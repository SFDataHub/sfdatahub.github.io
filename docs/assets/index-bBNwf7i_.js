import m3 from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function i_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c0={exports:{}},Rh={},d0={exports:{}},rs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function g6(){if(TS)return rs;TS=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function E(G,X,te){this.props=G,this.context=X,this.refs=k,this.updater=te||_}E.prototype.isReactComponent={},E.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},E.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function P(){}P.prototype=E.prototype;function L(G,X,te){this.props=G,this.context=X,this.refs=k,this.updater=te||_}var N=L.prototype=new P;N.constructor=L,w(N,E.prototype),N.isPureReactComponent=!0;var v=Array.isArray,b=Object.prototype.hasOwnProperty,I={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(G,X,te){var se,Z={},ve=null,Se=null;if(X!=null)for(se in X.ref!==void 0&&(Se=X.ref),X.key!==void 0&&(ve=""+X.key),X)b.call(X,se)&&!j.hasOwnProperty(se)&&(Z[se]=X[se]);var J=arguments.length-2;if(J===1)Z.children=te;else if(1<J){for(var ue=Array(J),ie=0;ie<J;ie++)ue[ie]=arguments[ie+2];Z.children=ue}if(G&&G.defaultProps)for(se in J=G.defaultProps,J)Z[se]===void 0&&(Z[se]=J[se]);return{$$typeof:t,type:G,key:ve,ref:Se,props:Z,_owner:I.current}}function C(G,X){return{$$typeof:t,type:G.type,key:X,ref:G.ref,props:G.props,_owner:G._owner}}function M(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function T(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(te){return X[te]})}var D=/\/+/g;function F(G,X){return typeof G=="object"&&G!==null&&G.key!=null?T(""+G.key):X.toString(36)}function V(G,X,te,se,Z){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var Se=!1;if(G===null)Se=!0;else switch(ve){case"string":case"number":Se=!0;break;case"object":switch(G.$$typeof){case t:case e:Se=!0}}if(Se)return Se=G,Z=Z(Se),G=se===""?"."+F(Se,0):se,v(Z)?(te="",G!=null&&(te=G.replace(D,"$&/")+"/"),V(Z,X,te,"",function(ie){return ie})):Z!=null&&(M(Z)&&(Z=C(Z,te+(!Z.key||Se&&Se.key===Z.key?"":(""+Z.key).replace(D,"$&/")+"/")+G)),X.push(Z)),1;if(Se=0,se=se===""?".":se+":",v(G))for(var J=0;J<G.length;J++){ve=G[J];var ue=se+F(ve,J);Se+=V(ve,X,te,ue,Z)}else if(ue=y(G),typeof ue=="function")for(G=ue.call(G),J=0;!(ve=G.next()).done;)ve=ve.value,ue=se+F(ve,J++),Se+=V(ve,X,te,ue,Z);else if(ve==="object")throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Se}function z(G,X,te){if(G==null)return G;var se=[],Z=0;return V(G,se,"","",function(ve){return X.call(te,ve,Z++)}),se}function q(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(te){(G._status===0||G._status===-1)&&(G._status=1,G._result=te)},function(te){(G._status===0||G._status===-1)&&(G._status=2,G._result=te)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var H={current:null},K={transition:null},ne={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:K,ReactCurrentOwner:I};function Y(){throw Error("act(...) is not supported in production builds of React.")}return rs.Children={map:z,forEach:function(G,X,te){z(G,function(){X.apply(this,arguments)},te)},count:function(G){var X=0;return z(G,function(){X++}),X},toArray:function(G){return z(G,function(X){return X})||[]},only:function(G){if(!M(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},rs.Component=E,rs.Fragment=n,rs.Profiler=i,rs.PureComponent=L,rs.StrictMode=r,rs.Suspense=u,rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,rs.act=Y,rs.cloneElement=function(G,X,te){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var se=w({},G.props),Z=G.key,ve=G.ref,Se=G._owner;if(X!=null){if(X.ref!==void 0&&(ve=X.ref,Se=I.current),X.key!==void 0&&(Z=""+X.key),G.type&&G.type.defaultProps)var J=G.type.defaultProps;for(ue in X)b.call(X,ue)&&!j.hasOwnProperty(ue)&&(se[ue]=X[ue]===void 0&&J!==void 0?J[ue]:X[ue])}var ue=arguments.length-2;if(ue===1)se.children=te;else if(1<ue){J=Array(ue);for(var ie=0;ie<ue;ie++)J[ie]=arguments[ie+2];se.children=J}return{$$typeof:t,type:G.type,key:Z,ref:ve,props:se,_owner:Se}},rs.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:a,_context:G},G.Consumer=G},rs.createElement=S,rs.createFactory=function(G){var X=S.bind(null,G);return X.type=G,X},rs.createRef=function(){return{current:null}},rs.forwardRef=function(G){return{$$typeof:c,render:G}},rs.isValidElement=M,rs.lazy=function(G){return{$$typeof:p,_payload:{_status:-1,_result:G},_init:q}},rs.memo=function(G,X){return{$$typeof:h,type:G,compare:X===void 0?null:X}},rs.startTransition=function(G){var X=K.transition;K.transition={};try{G()}finally{K.transition=X}},rs.unstable_act=Y,rs.useCallback=function(G,X){return H.current.useCallback(G,X)},rs.useContext=function(G){return H.current.useContext(G)},rs.useDebugValue=function(){},rs.useDeferredValue=function(G){return H.current.useDeferredValue(G)},rs.useEffect=function(G,X){return H.current.useEffect(G,X)},rs.useId=function(){return H.current.useId()},rs.useImperativeHandle=function(G,X,te){return H.current.useImperativeHandle(G,X,te)},rs.useInsertionEffect=function(G,X){return H.current.useInsertionEffect(G,X)},rs.useLayoutEffect=function(G,X){return H.current.useLayoutEffect(G,X)},rs.useMemo=function(G,X){return H.current.useMemo(G,X)},rs.useReducer=function(G,X,te){return H.current.useReducer(G,X,te)},rs.useRef=function(G){return H.current.useRef(G)},rs.useState=function(G){return H.current.useState(G)},rs.useSyncExternalStore=function(G,X,te){return H.current.useSyncExternalStore(G,X,te)},rs.useTransition=function(){return H.current.useTransition()},rs.version="18.3.1",rs}var IS;function a_(){return IS||(IS=1,d0.exports=g6()),d0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function f6(){if(AS)return Rh;AS=1;var t=a_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,u,h){var p,g={},y=null,_=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(_=u.ref);for(p in u)r.call(u,p)&&!a.hasOwnProperty(p)&&(g[p]=u[p]);if(c&&c.defaultProps)for(p in u=c.defaultProps,u)g[p]===void 0&&(g[p]=u[p]);return{$$typeof:e,type:c,key:y,ref:_,props:g,_owner:i.current}}return Rh.Fragment=n,Rh.jsx=o,Rh.jsxs=o,Rh}var ES;function v6(){return ES||(ES=1,c0.exports=f6()),c0.exports}var s=v6(),R=a_();const W=i_(R);var Fg={},u0={exports:{}},oi={},h0={exports:{}},p0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function x6(){return RS||(RS=1,(function(t){function e(K,ne){var Y=K.length;K.push(ne);e:for(;0<Y;){var G=Y-1>>>1,X=K[G];if(0<i(X,ne))K[G]=ne,K[Y]=X,Y=G;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ne=K[0],Y=K.pop();if(Y!==ne){K[0]=Y;e:for(var G=0,X=K.length,te=X>>>1;G<te;){var se=2*(G+1)-1,Z=K[se],ve=se+1,Se=K[ve];if(0>i(Z,Y))ve<X&&0>i(Se,Z)?(K[G]=Se,K[ve]=Y,G=ve):(K[G]=Z,K[se]=Y,G=se);else if(ve<X&&0>i(Se,Y))K[G]=Se,K[ve]=Y,G=ve;else break e}}return ne}function i(K,ne){var Y=K.sortIndex-ne.sortIndex;return Y!==0?Y:K.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],p=1,g=null,y=3,_=!1,w=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=K)r(h),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(h)}}function v(K){if(k=!1,N(K),!w)if(n(u)!==null)w=!0,q(b);else{var ne=n(h);ne!==null&&H(v,ne.startTime-K)}}function b(K,ne){w=!1,k&&(k=!1,P(S),S=-1),_=!0;var Y=y;try{for(N(ne),g=n(u);g!==null&&(!(g.expirationTime>ne)||K&&!T());){var G=g.callback;if(typeof G=="function"){g.callback=null,y=g.priorityLevel;var X=G(g.expirationTime<=ne);ne=t.unstable_now(),typeof X=="function"?g.callback=X:g===n(u)&&r(u),N(ne)}else r(u);g=n(u)}if(g!==null)var te=!0;else{var se=n(h);se!==null&&H(v,se.startTime-ne),te=!1}return te}finally{g=null,y=Y,_=!1}}var I=!1,j=null,S=-1,C=5,M=-1;function T(){return!(t.unstable_now()-M<C)}function D(){if(j!==null){var K=t.unstable_now();M=K;var ne=!0;try{ne=j(!0,K)}finally{ne?F():(I=!1,j=null)}}else I=!1}var F;if(typeof L=="function")F=function(){L(D)};else if(typeof MessageChannel!="undefined"){var V=new MessageChannel,z=V.port2;V.port1.onmessage=D,F=function(){z.postMessage(null)}}else F=function(){E(D,0)};function q(K){j=K,I||(I=!0,F())}function H(K,ne){S=E(function(){K(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){w||_||(w=!0,q(b))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var Y=y;y=ne;try{return K()}finally{y=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ne){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=y;y=K;try{return ne()}finally{y=Y}},t.unstable_scheduleCallback=function(K,ne,Y){var G=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?G+Y:G):Y=G,K){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Y+X,K={id:p++,callback:ne,priorityLevel:K,startTime:Y,expirationTime:X,sortIndex:-1},Y>G?(K.sortIndex=Y,e(h,K),n(u)===null&&K===n(h)&&(k?(P(S),S=-1):k=!0,H(v,Y-G))):(K.sortIndex=X,e(u,K),w||_||(w=!0,q(b))),K},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(K){var ne=y;return function(){var Y=y;y=ne;try{return K.apply(this,arguments)}finally{y=Y}}}})(p0)),p0}var PS;function y6(){return PS||(PS=1,h0.exports=x6()),h0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function b6(){if(LS)return oi;LS=1;var t=a_(),e=y6();function n(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var c=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(l){return u.call(g,l)?!0:u.call(p,l)?!1:h.test(l)?g[l]=!0:(p[l]=!0,!1)}function _(l,d,m,x){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function w(l,d,m,x){if(d===null||typeof d=="undefined"||_(l,d,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function k(l,d,m,x,A,$,U){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=x,this.attributeNamespace=A,this.mustUseProperty=m,this.propertyName=l,this.type=d,this.sanitizeURL=$,this.removeEmptyString=U}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new k(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];E[d]=new k(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new k(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new k(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new k(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new k(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new k(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new k(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new k(l,5,!1,l.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function L(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(P,L);E[d]=new k(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(P,L);E[d]=new k(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(P,L);E[d]=new k(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new k(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new k(l,1,!1,l.toLowerCase(),null,!0,!0)});function N(l,d,m,x){var A=E.hasOwnProperty(d)?E[d]:null;(A!==null?A.type!==0:x||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(w(d,m,A,x)&&(m=null),x||A===null?y(d)&&(m===null?l.removeAttribute(d):l.setAttribute(d,""+m)):A.mustUseProperty?l[A.propertyName]=m===null?A.type===3?!1:"":m:(d=A.attributeName,x=A.attributeNamespace,m===null?l.removeAttribute(d):(A=A.type,m=A===3||A===4&&m===!0?"":""+m,x?l.setAttributeNS(x,d,m):l.setAttribute(d,m))))}var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),K=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=K&&l[K]||l["@@iterator"],typeof l=="function"?l:null)}var Y=Object.assign,G;function X(l){if(G===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);G=d&&d[1]||""}return`
`+G+l}var te=!1;function se(l,d){if(!l||te)return"";te=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(we){var x=we}Reflect.construct(l,[],d)}else{try{d.call()}catch(we){x=we}l.call(d.prototype)}else{try{throw Error()}catch(we){x=we}l()}}catch(we){if(we&&x&&typeof we.stack=="string"){for(var A=we.stack.split(`
`),$=x.stack.split(`
`),U=A.length-1,ee=$.length-1;1<=U&&0<=ee&&A[U]!==$[ee];)ee--;for(;1<=U&&0<=ee;U--,ee--)if(A[U]!==$[ee]){if(U!==1||ee!==1)do if(U--,ee--,0>ee||A[U]!==$[ee]){var ae=`
`+A[U].replace(" at new "," at ");return l.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",l.displayName)),ae}while(1<=U&&0<=ee);break}}}finally{te=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?X(l):""}function Z(l){switch(l.tag){case 5:return X(l.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return l=se(l.type,!1),l;case 11:return l=se(l.type.render,!1),l;case 1:return l=se(l.type,!0),l;default:return""}}function ve(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case I:return"Portal";case C:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case T:return(l.displayName||"Context")+".Consumer";case M:return(l._context.displayName||"Context")+".Provider";case D:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return d=l.displayName||null,d!==null?d:ve(l.type)||"Memo";case q:d=l._payload,l=l._init;try{return ve(l(d))}catch(m){}}return null}function Se(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(d);case 8:return d===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function J(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ue(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ie(l){var d=ue(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),x=""+l[d];if(!l.hasOwnProperty(d)&&typeof m!="undefined"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,$=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return A.call(this)},set:function(U){x=""+U,$.call(this,U)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(U){x=""+U},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function me(l){l._valueTracker||(l._valueTracker=ie(l))}function ce(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),x="";return l&&(x=ue(l)?l.checked?"true":"false":l.value),l=x,l!==m?(d.setValue(l),!0):!1}function he(l){if(l=l||(typeof document!="undefined"?document:void 0),typeof l=="undefined")return null;try{return l.activeElement||l.body}catch(d){return l.body}}function Ne(l,d){var m=d.checked;return Y({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m!=null?m:l._wrapperState.initialChecked})}function Te(l,d){var m=d.defaultValue==null?"":d.defaultValue,x=d.checked!=null?d.checked:d.defaultChecked;m=J(d.value!=null?d.value:m),l._wrapperState={initialChecked:x,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function xe(l,d){d=d.checked,d!=null&&N(l,"checked",d,!1)}function Ie(l,d){xe(l,d);var m=J(d.value),x=d.type;if(m!=null)x==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(x==="submit"||x==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?Xe(l,d.type,m):d.hasOwnProperty("defaultValue")&&Xe(l,d.type,J(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function $e(l,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var x=d.type;if(!(x!=="submit"&&x!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,m||d===l.value||(l.value=d),l.defaultValue=d}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function Xe(l,d,m){(d!=="number"||he(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var be=Array.isArray;function Be(l,d,m,x){if(l=l.options,d){d={};for(var A=0;A<m.length;A++)d["$"+m[A]]=!0;for(m=0;m<l.length;m++)A=d.hasOwnProperty("$"+l[m].value),l[m].selected!==A&&(l[m].selected=A),A&&x&&(l[m].defaultSelected=!0)}else{for(m=""+J(m),d=null,A=0;A<l.length;A++){if(l[A].value===m){l[A].selected=!0,x&&(l[A].defaultSelected=!0);return}d!==null||l[A].disabled||(d=l[A])}d!==null&&(d.selected=!0)}}function Ve(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function nt(l,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(n(92));if(be(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),m=d}l._wrapperState={initialValue:J(m)}}function ht(l,d){var m=J(d.value),x=J(d.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),d.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),x!=null&&(l.defaultValue=""+x)}function Ue(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function Ee(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?Ee(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var St,Ct=(function(l){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(d,m,x,A){MSApp.execUnsafeLocalFunction(function(){return l(d,m,x,A)})}:l})(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=St.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function ns(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gt=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(l){Gt.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),Rt[d]=Rt[l]})});function Ps(l,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||Rt.hasOwnProperty(l)&&Rt[l]?(""+d).trim():d+"px"}function _t(l,d){l=l.style;for(var m in d)if(d.hasOwnProperty(m)){var x=m.indexOf("--")===0,A=Ps(m,d[m],x);m==="float"&&(m="cssFloat"),x?l.setProperty(m,A):l[m]=A}}var Ae=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ks(l,d){if(d){if(Ae[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function Ht(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var re=null;function qe(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var tt=null,ct=null,st=null;function Pt(l){if(l=vh(l)){if(typeof tt!="function")throw Error(n(280));var d=l.stateNode;d&&(d=Jm(d),tt(l.stateNode,l.type,d))}}function as(l){ct?st?st.push(l):st=[l]:ct=l}function os(){if(ct){var l=ct,d=st;if(st=ct=null,Pt(l),d)for(l=0;l<d.length;l++)Pt(d[l])}}function _n(l,d){return l(d)}function Vn(){}var rn=!1;function Ls(l,d,m){if(rn)return l(d,m);rn=!0;try{return _n(l,d,m)}finally{rn=!1,(ct!==null||st!==null)&&(Vn(),os())}}function js(l,d){var m=l.stateNode;if(m===null)return null;var x=Jm(m);if(x===null)return null;m=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var ar=!1;if(c)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){ar=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch(l){ar=!1}function Er(l,d,m,x,A,$,U,ee,ae){var we=Array.prototype.slice.call(arguments,3);try{d.apply(m,we)}catch(Le){this.onError(Le)}}var Rr=!1,Pr=null,Wn=!1,ms=null,$s={onError:function(l){Rr=!0,Pr=l}};function or(l,d,m,x,A,$,U,ee,ae){Rr=!1,Pr=null,Er.apply($s,arguments)}function xi(l,d,m,x,A,$,U,ee,ae){if(or.apply(this,arguments),Rr){if(Rr){var we=Pr;Rr=!1,Pr=null}else throw Error(n(198));Wn||(Wn=!0,ms=we)}}function es(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function Ta(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Zr(l){if(es(l)!==l)throw Error(n(188))}function ec(l){var d=l.alternate;if(!d){if(d=es(l),d===null)throw Error(n(188));return d!==l?null:l}for(var m=l,x=d;;){var A=m.return;if(A===null)break;var $=A.alternate;if($===null){if(x=A.return,x!==null){m=x;continue}break}if(A.child===$.child){for($=A.child;$;){if($===m)return Zr(A),l;if($===x)return Zr(A),d;$=$.sibling}throw Error(n(188))}if(m.return!==x.return)m=A,x=$;else{for(var U=!1,ee=A.child;ee;){if(ee===m){U=!0,m=A,x=$;break}if(ee===x){U=!0,x=A,m=$;break}ee=ee.sibling}if(!U){for(ee=$.child;ee;){if(ee===m){U=!0,m=$,x=A;break}if(ee===x){U=!0,x=$,m=A;break}ee=ee.sibling}if(!U)throw Error(n(189))}}if(m.alternate!==x)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:d}function Qo(l){return l=ec(l),l!==null?so(l):null}function so(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=so(l);if(d!==null)return d;l=l.sibling}return null}var no=e.unstable_scheduleCallback,Yo=e.unstable_cancelCallback,tc=e.unstable_shouldYield,md=e.unstable_requestPaint,Ds=e.unstable_now,sc=e.unstable_getCurrentPriorityLevel,Ia=e.unstable_ImmediatePriority,ta=e.unstable_UserBlockingPriority,Lr=e.unstable_NormalPriority,eh=e.unstable_LowPriority,Cm=e.unstable_IdlePriority,nc=null,yi=null;function Tm(l){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(nc,l,void 0,(l.current.flags&128)===128)}catch(d){}}var Dr=Math.clz32?Math.clz32:Am,th=Math.log,Im=Math.LN2;function Am(l){return l>>>=0,l===0?32:31-(th(l)/Im|0)|0}var gd=64,fd=4194304;function Xo(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function rc(l,d){var m=l.pendingLanes;if(m===0)return 0;var x=0,A=l.suspendedLanes,$=l.pingedLanes,U=m&268435455;if(U!==0){var ee=U&~A;ee!==0?x=Xo(ee):($&=U,$!==0&&(x=Xo($)))}else U=m&~A,U!==0?x=Xo(U):$!==0&&(x=Xo($));if(x===0)return 0;if(d!==0&&d!==x&&(d&A)===0&&(A=x&-x,$=d&-d,A>=$||A===16&&($&4194240)!==0))return d;if((x&4)!==0&&(x|=m&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=x;0<d;)m=31-Dr(d),A=1<<m,x|=l[m],d&=~A;return x}function $x(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(l,d){for(var m=l.suspendedLanes,x=l.pingedLanes,A=l.expirationTimes,$=l.pendingLanes;0<$;){var U=31-Dr($),ee=1<<U,ae=A[U];ae===-1?((ee&m)===0||(ee&x)!==0)&&(A[U]=$x(ee,d)):ae<=d&&(l.expiredLanes|=ee),$&=~ee}}function bi(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function ic(){var l=gd;return gd<<=1,(gd&4194240)===0&&(gd=64),l}function Jo(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function Zo(l,d,m){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-Dr(d),l[d]=m}function Os(l,d){var m=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var x=l.eventTimes;for(l=l.expirationTimes;0<m;){var A=31-Dr(m),$=1<<A;d[A]=0,x[A]=-1,l[A]=-1,m&=~$}}function el(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var x=31-Dr(m),A=1<<x;A&d|l[x]&d&&(l[x]|=d),m&=~A}}var us=0;function tl(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Em,vd,Rm,Pm,Lm,sh=!1,Aa=[],lr=null,sa=null,na=null,sl=new Map,Bi=new Map,Ea=[],Ox="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dm(l,d){switch(l){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":sl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(d.pointerId)}}function ei(l,d,m,x,A,$){return l===null||l.nativeEvent!==$?(l={blockedOn:d,domEventName:m,eventSystemFlags:x,nativeEvent:$,targetContainers:[A]},d!==null&&(d=vh(d),d!==null&&vd(d)),l):(l.eventSystemFlags|=x,d=l.targetContainers,A!==null&&d.indexOf(A)===-1&&d.push(A),l)}function Vx(l,d,m,x,A){switch(d){case"focusin":return lr=ei(lr,l,d,m,x,A),!0;case"dragenter":return sa=ei(sa,l,d,m,x,A),!0;case"mouseover":return na=ei(na,l,d,m,x,A),!0;case"pointerover":var $=A.pointerId;return sl.set($,ei(sl.get($)||null,l,d,m,x,A)),!0;case"gotpointercapture":return $=A.pointerId,Bi.set($,ei(Bi.get($)||null,l,d,m,x,A)),!0}return!1}function Mm(l){var d=dc(l.target);if(d!==null){var m=es(d);if(m!==null){if(d=m.tag,d===13){if(d=Ta(m),d!==null){l.blockedOn=d,Lm(l.priority,function(){Rm(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function io(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=xd(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var x=new m.constructor(m.type,m);re=x,m.target.dispatchEvent(x),re=null}else return d=vh(m),d!==null&&vd(d),l.blockedOn=m,!1;d.shift()}return!0}function ac(l,d,m){io(l)&&m.delete(d)}function Fm(){sh=!1,lr!==null&&io(lr)&&(lr=null),sa!==null&&io(sa)&&(sa=null),na!==null&&io(na)&&(na=null),sl.forEach(ac),Bi.forEach(ac)}function ra(l,d){l.blockedOn===d&&(l.blockedOn=null,sh||(sh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fm)))}function ia(l){function d(A){return ra(A,l)}if(0<Aa.length){ra(Aa[0],l);for(var m=1;m<Aa.length;m++){var x=Aa[m];x.blockedOn===l&&(x.blockedOn=null)}}for(lr!==null&&ra(lr,l),sa!==null&&ra(sa,l),na!==null&&ra(na,l),sl.forEach(d),Bi.forEach(d),m=0;m<Ea.length;m++)x=Ea[m],x.blockedOn===l&&(x.blockedOn=null);for(;0<Ea.length&&(m=Ea[0],m.blockedOn===null);)Mm(m),m.blockedOn===null&&Ea.shift()}var ao=v.ReactCurrentBatchConfig,nl=!0;function Js(l,d,m,x){var A=us,$=ao.transition;ao.transition=null;try{us=1,nh(l,d,m,x)}finally{us=A,ao.transition=$}}function Ux(l,d,m,x){var A=us,$=ao.transition;ao.transition=null;try{us=4,nh(l,d,m,x)}finally{us=A,ao.transition=$}}function nh(l,d,m,x){if(nl){var A=xd(l,d,m,x);if(A===null)Zx(l,d,x,oc,m),Dm(l,x);else if(Vx(A,l,d,m,x))x.stopPropagation();else if(Dm(l,x),d&4&&-1<Ox.indexOf(l)){for(;A!==null;){var $=vh(A);if($!==null&&Em($),$=xd(l,d,m,x),$===null&&Zx(l,d,x,oc,m),$===A)break;A=$}A!==null&&x.stopPropagation()}else Zx(l,d,x,null,m)}}var oc=null;function xd(l,d,m,x){if(oc=null,l=qe(x),l=dc(l),l!==null)if(d=es(l),d===null)l=null;else if(m=d.tag,m===13){if(l=Ta(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return oc=l,null}function rh(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sc()){case Ia:return 1;case ta:return 4;case Lr:case eh:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var _i=null,yd=null,ti=null;function ih(){if(ti)return ti;var l,d=yd,m=d.length,x,A="value"in _i?_i.value:_i.textContent,$=A.length;for(l=0;l<m&&d[l]===A[l];l++);var U=m-l;for(x=1;x<=U&&d[m-x]===A[$-x];x++);return ti=A.slice(l,1<x?1-x:void 0)}function bd(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Ra(){return!0}function ah(){return!1}function cr(l){function d(m,x,A,$,U){this._reactName=m,this._targetInst=A,this.type=x,this.nativeEvent=$,this.target=U,this.currentTarget=null;for(var ee in l)l.hasOwnProperty(ee)&&(m=l[ee],this[ee]=m?m($):$[ee]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?Ra:ah,this.isPropagationStopped=ah,this}return Y(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),d}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=cr(aa),Pa=Y({},aa,{view:0,detail:0}),Gx=cr(Pa),wd,oo,rl,lc=Y({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==rl&&(rl&&l.type==="mousemove"?(wd=l.screenX-rl.screenX,oo=l.screenY-rl.screenY):oo=wd=0,rl=l),wd)},movementY:function(l){return"movementY"in l?l.movementY:oo}}),jd=cr(lc),oh=Y({},lc,{dataTransfer:0}),Bm=cr(oh),Sd=Y({},Pa,{relatedTarget:0}),Nd=cr(Sd),$m=Y({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),lo=cr($m),Om=Y({},aa,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Vm=cr(Om),Um=Y({},aa,{data:0}),lh=cr(Um),kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Gm[l])?!!d[l]:!1}function La(){return zm}var f=Y({},Pa,{key:function(l){if(l.key){var d=kd[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=bd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Mr[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(l){return l.type==="keypress"?bd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?bd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),B=cr(f),O=Y({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q=cr(O),ge=Y({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),je=cr(ge),Je=Y({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ms=cr(Je),Un=Y({},lc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),gs=cr(Un),Kn=[9,13,27,32],En=c&&"CompositionEvent"in window,$i=null;c&&"documentMode"in document&&($i=document.documentMode);var wi=c&&"TextEvent"in window&&!$i,cc=c&&(!En||$i&&8<$i&&11>=$i),Cd=" ",wj=!1;function jj(l,d){switch(l){case"keyup":return Kn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sj(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Td=!1;function hL(l,d){switch(l){case"compositionend":return Sj(d);case"keypress":return d.which!==32?null:(wj=!0,Cd);case"textInput":return l=d.data,l===Cd&&wj?null:l;default:return null}}function pL(l,d){if(Td)return l==="compositionend"||!En&&jj(l,d)?(l=ih(),ti=yd=_i=null,Td=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return cc&&d.locale!=="ko"?null:d.data;default:return null}}var mL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nj(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!mL[l.type]:d==="textarea"}function kj(l,d,m,x){as(x),d=Qm(d,"onChange"),0<d.length&&(m=new _d("onChange","change",null,m,x),l.push({event:m,listeners:d}))}var ch=null,dh=null;function gL(l){zj(l,0)}function Hm(l){var d=Pd(l);if(ce(d))return l}function fL(l,d){if(l==="change")return d}var Cj=!1;if(c){var zx;if(c){var Hx="oninput"in document;if(!Hx){var Tj=document.createElement("div");Tj.setAttribute("oninput","return;"),Hx=typeof Tj.oninput=="function"}zx=Hx}else zx=!1;Cj=zx&&(!document.documentMode||9<document.documentMode)}function Ij(){ch&&(ch.detachEvent("onpropertychange",Aj),dh=ch=null)}function Aj(l){if(l.propertyName==="value"&&Hm(dh)){var d=[];kj(d,dh,l,qe(l)),Ls(gL,d)}}function vL(l,d,m){l==="focusin"?(Ij(),ch=d,dh=m,ch.attachEvent("onpropertychange",Aj)):l==="focusout"&&Ij()}function xL(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Hm(dh)}function yL(l,d){if(l==="click")return Hm(d)}function bL(l,d){if(l==="input"||l==="change")return Hm(d)}function _L(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var oa=typeof Object.is=="function"?Object.is:_L;function uh(l,d){if(oa(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),x=Object.keys(d);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var A=m[x];if(!u.call(d,A)||!oa(l[A],d[A]))return!1}return!0}function Ej(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Rj(l,d){var m=Ej(l);l=0;for(var x;m;){if(m.nodeType===3){if(x=l+m.textContent.length,l<=d&&x>=d)return{node:m,offset:d-l};l=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ej(m)}}function Pj(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Pj(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Lj(){for(var l=window,d=he();d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch(x){m=!1}if(m)l=d.contentWindow;else break;d=he(l.document)}return d}function Wx(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function wL(l){var d=Lj(),m=l.focusedElem,x=l.selectionRange;if(d!==m&&m&&m.ownerDocument&&Pj(m.ownerDocument.documentElement,m)){if(x!==null&&Wx(m)){if(d=x.start,l=x.end,l===void 0&&(l=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(l,m.value.length);else if(l=(d=m.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var A=m.textContent.length,$=Math.min(x.start,A);x=x.end===void 0?$:Math.min(x.end,A),!l.extend&&$>x&&(A=x,x=$,$=A),A=Rj(m,$);var U=Rj(m,x);A&&U&&(l.rangeCount!==1||l.anchorNode!==A.node||l.anchorOffset!==A.offset||l.focusNode!==U.node||l.focusOffset!==U.offset)&&(d=d.createRange(),d.setStart(A.node,A.offset),l.removeAllRanges(),$>x?(l.addRange(d),l.extend(U.node,U.offset)):(d.setEnd(U.node,U.offset),l.addRange(d)))}}for(d=[],l=m;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)l=d[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var jL=c&&"documentMode"in document&&11>=document.documentMode,Id=null,Kx=null,hh=null,qx=!1;function Dj(l,d,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;qx||Id==null||Id!==he(x)||(x=Id,"selectionStart"in x&&Wx(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),hh&&uh(hh,x)||(hh=x,x=Qm(Kx,"onSelect"),0<x.length&&(d=new _d("onSelect","select",null,d,m),l.push({event:d,listeners:x}),d.target=Id)))}function Wm(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Ad={animationend:Wm("Animation","AnimationEnd"),animationiteration:Wm("Animation","AnimationIteration"),animationstart:Wm("Animation","AnimationStart"),transitionend:Wm("Transition","TransitionEnd")},Qx={},Mj={};c&&(Mj=document.createElement("div").style,"AnimationEvent"in window||(delete Ad.animationend.animation,delete Ad.animationiteration.animation,delete Ad.animationstart.animation),"TransitionEvent"in window||delete Ad.transitionend.transition);function Km(l){if(Qx[l])return Qx[l];if(!Ad[l])return l;var d=Ad[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in Mj)return Qx[l]=d[m];return l}var Fj=Km("animationend"),Bj=Km("animationiteration"),$j=Km("animationstart"),Oj=Km("transitionend"),Vj=new Map,Uj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function il(l,d){Vj.set(l,d),a(d,[l])}for(var Yx=0;Yx<Uj.length;Yx++){var Xx=Uj[Yx],SL=Xx.toLowerCase(),NL=Xx[0].toUpperCase()+Xx.slice(1);il(SL,"on"+NL)}il(Fj,"onAnimationEnd"),il(Bj,"onAnimationIteration"),il($j,"onAnimationStart"),il("dblclick","onDoubleClick"),il("focusin","onFocus"),il("focusout","onBlur"),il(Oj,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kL=new Set("cancel close invalid load scroll toggle".split(" ").concat(ph));function Gj(l,d,m){var x=l.type||"unknown-event";l.currentTarget=m,xi(x,d,void 0,l),l.currentTarget=null}function zj(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var x=l[m],A=x.event;x=x.listeners;e:{var $=void 0;if(d)for(var U=x.length-1;0<=U;U--){var ee=x[U],ae=ee.instance,we=ee.currentTarget;if(ee=ee.listener,ae!==$&&A.isPropagationStopped())break e;Gj(A,ee,we),$=ae}else for(U=0;U<x.length;U++){if(ee=x[U],ae=ee.instance,we=ee.currentTarget,ee=ee.listener,ae!==$&&A.isPropagationStopped())break e;Gj(A,ee,we),$=ae}}}if(Wn)throw l=ms,Wn=!1,ms=null,l}function Ws(l,d){var m=d[iy];m===void 0&&(m=d[iy]=new Set);var x=l+"__bubble";m.has(x)||(Hj(d,l,2,!1),m.add(x))}function Jx(l,d,m){var x=0;d&&(x|=4),Hj(m,l,x,d)}var qm="_reactListening"+Math.random().toString(36).slice(2);function mh(l){if(!l[qm]){l[qm]=!0,r.forEach(function(m){m!=="selectionchange"&&(kL.has(m)||Jx(m,!1,l),Jx(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[qm]||(d[qm]=!0,Jx("selectionchange",!1,d))}}function Hj(l,d,m,x){switch(rh(d)){case 1:var A=Js;break;case 4:A=Ux;break;default:A=nh}m=A.bind(null,d,m,l),A=void 0,!ar||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(A=!0),x?A!==void 0?l.addEventListener(d,m,{capture:!0,passive:A}):l.addEventListener(d,m,!0):A!==void 0?l.addEventListener(d,m,{passive:A}):l.addEventListener(d,m,!1)}function Zx(l,d,m,x,A){var $=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var U=x.tag;if(U===3||U===4){var ee=x.stateNode.containerInfo;if(ee===A||ee.nodeType===8&&ee.parentNode===A)break;if(U===4)for(U=x.return;U!==null;){var ae=U.tag;if((ae===3||ae===4)&&(ae=U.stateNode.containerInfo,ae===A||ae.nodeType===8&&ae.parentNode===A))return;U=U.return}for(;ee!==null;){if(U=dc(ee),U===null)return;if(ae=U.tag,ae===5||ae===6){x=$=U;continue e}ee=ee.parentNode}}x=x.return}Ls(function(){var we=$,Le=qe(m),Oe=[];e:{var Pe=Vj.get(l);if(Pe!==void 0){var it=_d,lt=l;switch(l){case"keypress":if(bd(m)===0)break e;case"keydown":case"keyup":it=B;break;case"focusin":lt="focus",it=Nd;break;case"focusout":lt="blur",it=Nd;break;case"beforeblur":case"afterblur":it=Nd;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=je;break;case Fj:case Bj:case $j:it=lo;break;case Oj:it=Ms;break;case"scroll":it=Gx;break;case"wheel":it=gs;break;case"copy":case"cut":case"paste":it=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Q}var dt=(d&4)!==0,jn=!dt&&l==="scroll",fe=dt?Pe!==null?Pe+"Capture":null:Pe;dt=[];for(var le=we,ye;le!==null;){ye=le;var We=ye.stateNode;if(ye.tag===5&&We!==null&&(ye=We,fe!==null&&(We=js(le,fe),We!=null&&dt.push(gh(le,We,ye)))),jn)break;le=le.return}0<dt.length&&(Pe=new it(Pe,lt,null,m,Le),Oe.push({event:Pe,listeners:dt}))}}if((d&7)===0){e:{if(Pe=l==="mouseover"||l==="pointerover",it=l==="mouseout"||l==="pointerout",Pe&&m!==re&&(lt=m.relatedTarget||m.fromElement)&&(dc(lt)||lt[co]))break e;if((it||Pe)&&(Pe=Le.window===Le?Le:(Pe=Le.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,it?(lt=m.relatedTarget||m.toElement,it=we,lt=lt?dc(lt):null,lt!==null&&(jn=es(lt),lt!==jn||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(it=null,lt=we),it!==lt)){if(dt=jd,We="onMouseLeave",fe="onMouseEnter",le="mouse",(l==="pointerout"||l==="pointerover")&&(dt=Q,We="onPointerLeave",fe="onPointerEnter",le="pointer"),jn=it==null?Pe:Pd(it),ye=lt==null?Pe:Pd(lt),Pe=new dt(We,le+"leave",it,m,Le),Pe.target=jn,Pe.relatedTarget=ye,We=null,dc(Le)===we&&(dt=new dt(fe,le+"enter",lt,m,Le),dt.target=ye,dt.relatedTarget=jn,We=dt),jn=We,it&&lt)t:{for(dt=it,fe=lt,le=0,ye=dt;ye;ye=Ed(ye))le++;for(ye=0,We=fe;We;We=Ed(We))ye++;for(;0<le-ye;)dt=Ed(dt),le--;for(;0<ye-le;)fe=Ed(fe),ye--;for(;le--;){if(dt===fe||fe!==null&&dt===fe.alternate)break t;dt=Ed(dt),fe=Ed(fe)}dt=null}else dt=null;it!==null&&Wj(Oe,Pe,it,dt,!1),lt!==null&&jn!==null&&Wj(Oe,jn,lt,dt,!0)}}e:{if(Pe=we?Pd(we):window,it=Pe.nodeName&&Pe.nodeName.toLowerCase(),it==="select"||it==="input"&&Pe.type==="file")var gt=fL;else if(Nj(Pe))if(Cj)gt=bL;else{gt=xL;var Nt=vL}else(it=Pe.nodeName)&&it.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(gt=yL);if(gt&&(gt=gt(l,we))){kj(Oe,gt,m,Le);break e}Nt&&Nt(l,Pe,we),l==="focusout"&&(Nt=Pe._wrapperState)&&Nt.controlled&&Pe.type==="number"&&Xe(Pe,"number",Pe.value)}switch(Nt=we?Pd(we):window,l){case"focusin":(Nj(Nt)||Nt.contentEditable==="true")&&(Id=Nt,Kx=we,hh=null);break;case"focusout":hh=Kx=Id=null;break;case"mousedown":qx=!0;break;case"contextmenu":case"mouseup":case"dragend":qx=!1,Dj(Oe,m,Le);break;case"selectionchange":if(jL)break;case"keydown":case"keyup":Dj(Oe,m,Le)}var kt;if(En)e:{switch(l){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else Td?jj(l,m)&&(Mt="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Mt="onCompositionStart");Mt&&(cc&&m.locale!=="ko"&&(Td||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Td&&(kt=ih()):(_i=Le,yd="value"in _i?_i.value:_i.textContent,Td=!0)),Nt=Qm(we,Mt),0<Nt.length&&(Mt=new lh(Mt,l,null,m,Le),Oe.push({event:Mt,listeners:Nt}),kt?Mt.data=kt:(kt=Sj(m),kt!==null&&(Mt.data=kt)))),(kt=wi?hL(l,m):pL(l,m))&&(we=Qm(we,"onBeforeInput"),0<we.length&&(Le=new lh("onBeforeInput","beforeinput",null,m,Le),Oe.push({event:Le,listeners:we}),Le.data=kt))}zj(Oe,d)})}function gh(l,d,m){return{instance:l,listener:d,currentTarget:m}}function Qm(l,d){for(var m=d+"Capture",x=[];l!==null;){var A=l,$=A.stateNode;A.tag===5&&$!==null&&(A=$,$=js(l,m),$!=null&&x.unshift(gh(l,$,A)),$=js(l,d),$!=null&&x.push(gh(l,$,A))),l=l.return}return x}function Ed(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Wj(l,d,m,x,A){for(var $=d._reactName,U=[];m!==null&&m!==x;){var ee=m,ae=ee.alternate,we=ee.stateNode;if(ae!==null&&ae===x)break;ee.tag===5&&we!==null&&(ee=we,A?(ae=js(m,$),ae!=null&&U.unshift(gh(m,ae,ee))):A||(ae=js(m,$),ae!=null&&U.push(gh(m,ae,ee)))),m=m.return}U.length!==0&&l.push({event:d,listeners:U})}var CL=/\r\n?/g,TL=/\u0000|\uFFFD/g;function Kj(l){return(typeof l=="string"?l:""+l).replace(CL,`
`).replace(TL,"")}function Ym(l,d,m){if(d=Kj(d),Kj(l)!==d&&m)throw Error(n(425))}function Xm(){}var ey=null,ty=null;function sy(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var ny=typeof setTimeout=="function"?setTimeout:void 0,IL=typeof clearTimeout=="function"?clearTimeout:void 0,qj=typeof Promise=="function"?Promise:void 0,AL=typeof queueMicrotask=="function"?queueMicrotask:typeof qj!="undefined"?function(l){return qj.resolve(null).then(l).catch(EL)}:ny;function EL(l){setTimeout(function(){throw l})}function ry(l,d){var m=d,x=0;do{var A=m.nextSibling;if(l.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(x===0){l.removeChild(A),ia(d);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=A}while(m);ia(d)}function al(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function Qj(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return l;d--}else m==="/$"&&d++}l=l.previousSibling}return null}var Rd=Math.random().toString(36).slice(2),Da="__reactFiber$"+Rd,fh="__reactProps$"+Rd,co="__reactContainer$"+Rd,iy="__reactEvents$"+Rd,RL="__reactListeners$"+Rd,PL="__reactHandles$"+Rd;function dc(l){var d=l[Da];if(d)return d;for(var m=l.parentNode;m;){if(d=m[co]||m[Da]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=Qj(l);l!==null;){if(m=l[Da])return m;l=Qj(l)}return d}l=m,m=l.parentNode}return null}function vh(l){return l=l[Da]||l[co],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Pd(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Jm(l){return l[fh]||null}var ay=[],Ld=-1;function ol(l){return{current:l}}function Ks(l){0>Ld||(l.current=ay[Ld],ay[Ld]=null,Ld--)}function Us(l,d){Ld++,ay[Ld]=l.current,l.current=d}var ll={},jr=ol(ll),si=ol(!1),uc=ll;function Dd(l,d){var m=l.type.contextTypes;if(!m)return ll;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===d)return x.__reactInternalMemoizedMaskedChildContext;var A={},$;for($ in m)A[$]=d[$];return x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=A),A}function ni(l){return l=l.childContextTypes,l!=null}function Zm(){Ks(si),Ks(jr)}function Yj(l,d,m){if(jr.current!==ll)throw Error(n(168));Us(jr,d),Us(si,m)}function Xj(l,d,m){var x=l.stateNode;if(d=d.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var A in x)if(!(A in d))throw Error(n(108,Se(l)||"Unknown",A));return Y({},m,x)}function eg(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ll,uc=jr.current,Us(jr,l),Us(si,si.current),!0}function Jj(l,d,m){var x=l.stateNode;if(!x)throw Error(n(169));m?(l=Xj(l,d,uc),x.__reactInternalMemoizedMergedChildContext=l,Ks(si),Ks(jr),Us(jr,l)):Ks(si),Us(si,m)}var uo=null,tg=!1,oy=!1;function Zj(l){uo===null?uo=[l]:uo.push(l)}function LL(l){tg=!0,Zj(l)}function cl(){if(!oy&&uo!==null){oy=!0;var l=0,d=us;try{var m=uo;for(us=1;l<m.length;l++){var x=m[l];do x=x(!0);while(x!==null)}uo=null,tg=!1}catch(A){throw uo!==null&&(uo=uo.slice(l+1)),no(Ia,cl),A}finally{us=d,oy=!1}}return null}var Md=[],Fd=0,sg=null,ng=0,Oi=[],Vi=0,hc=null,ho=1,po="";function pc(l,d){Md[Fd++]=ng,Md[Fd++]=sg,sg=l,ng=d}function e2(l,d,m){Oi[Vi++]=ho,Oi[Vi++]=po,Oi[Vi++]=hc,hc=l;var x=ho;l=po;var A=32-Dr(x)-1;x&=~(1<<A),m+=1;var $=32-Dr(d)+A;if(30<$){var U=A-A%5;$=(x&(1<<U)-1).toString(32),x>>=U,A-=U,ho=1<<32-Dr(d)+A|m<<A|x,po=$+l}else ho=1<<$|m<<A|x,po=l}function ly(l){l.return!==null&&(pc(l,1),e2(l,1,0))}function cy(l){for(;l===sg;)sg=Md[--Fd],Md[Fd]=null,ng=Md[--Fd],Md[Fd]=null;for(;l===hc;)hc=Oi[--Vi],Oi[Vi]=null,po=Oi[--Vi],Oi[Vi]=null,ho=Oi[--Vi],Oi[Vi]=null}var ji=null,Si=null,Zs=!1,la=null;function t2(l,d){var m=Hi(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=l,d=l.deletions,d===null?(l.deletions=[m],l.flags|=16):d.push(m)}function s2(l,d){switch(l.tag){case 5:var m=l.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,ji=l,Si=al(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,ji=l,Si=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=hc!==null?{id:ho,overflow:po}:null,l.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=Hi(18,null,null,0),m.stateNode=d,m.return=l,l.child=m,ji=l,Si=null,!0):!1;default:return!1}}function dy(l){return(l.mode&1)!==0&&(l.flags&128)===0}function uy(l){if(Zs){var d=Si;if(d){var m=d;if(!s2(l,d)){if(dy(l))throw Error(n(418));d=al(m.nextSibling);var x=ji;d&&s2(l,d)?t2(x,m):(l.flags=l.flags&-4097|2,Zs=!1,ji=l)}}else{if(dy(l))throw Error(n(418));l.flags=l.flags&-4097|2,Zs=!1,ji=l}}}function n2(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ji=l}function rg(l){if(l!==ji)return!1;if(!Zs)return n2(l),Zs=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!sy(l.type,l.memoizedProps)),d&&(d=Si)){if(dy(l))throw r2(),Error(n(418));for(;d;)t2(l,d),d=al(d.nextSibling)}if(n2(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(d===0){Si=al(l.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}l=l.nextSibling}Si=null}}else Si=ji?al(l.stateNode.nextSibling):null;return!0}function r2(){for(var l=Si;l;)l=al(l.nextSibling)}function Bd(){Si=ji=null,Zs=!1}function hy(l){la===null?la=[l]:la.push(l)}var DL=v.ReactCurrentBatchConfig;function xh(l,d,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var x=m.stateNode}if(!x)throw Error(n(147,l));var A=x,$=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(U){var ee=A.refs;U===null?delete ee[$]:ee[$]=U},d._stringRef=$,d)}if(typeof l!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,l))}return l}function ig(l,d){throw l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function i2(l){var d=l._init;return d(l._payload)}function a2(l){function d(fe,le){if(l){var ye=fe.deletions;ye===null?(fe.deletions=[le],fe.flags|=16):ye.push(le)}}function m(fe,le){if(!l)return null;for(;le!==null;)d(fe,le),le=le.sibling;return null}function x(fe,le){for(fe=new Map;le!==null;)le.key!==null?fe.set(le.key,le):fe.set(le.index,le),le=le.sibling;return fe}function A(fe,le){return fe=vl(fe,le),fe.index=0,fe.sibling=null,fe}function $(fe,le,ye){return fe.index=ye,l?(ye=fe.alternate,ye!==null?(ye=ye.index,ye<le?(fe.flags|=2,le):ye):(fe.flags|=2,le)):(fe.flags|=1048576,le)}function U(fe){return l&&fe.alternate===null&&(fe.flags|=2),fe}function ee(fe,le,ye,We){return le===null||le.tag!==6?(le=n0(ye,fe.mode,We),le.return=fe,le):(le=A(le,ye),le.return=fe,le)}function ae(fe,le,ye,We){var gt=ye.type;return gt===j?Le(fe,le,ye.props.children,We,ye.key):le!==null&&(le.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===q&&i2(gt)===le.type)?(We=A(le,ye.props),We.ref=xh(fe,le,ye),We.return=fe,We):(We=Ig(ye.type,ye.key,ye.props,null,fe.mode,We),We.ref=xh(fe,le,ye),We.return=fe,We)}function we(fe,le,ye,We){return le===null||le.tag!==4||le.stateNode.containerInfo!==ye.containerInfo||le.stateNode.implementation!==ye.implementation?(le=r0(ye,fe.mode,We),le.return=fe,le):(le=A(le,ye.children||[]),le.return=fe,le)}function Le(fe,le,ye,We,gt){return le===null||le.tag!==7?(le=_c(ye,fe.mode,We,gt),le.return=fe,le):(le=A(le,ye),le.return=fe,le)}function Oe(fe,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number")return le=n0(""+le,fe.mode,ye),le.return=fe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return ye=Ig(le.type,le.key,le.props,null,fe.mode,ye),ye.ref=xh(fe,null,le),ye.return=fe,ye;case I:return le=r0(le,fe.mode,ye),le.return=fe,le;case q:var We=le._init;return Oe(fe,We(le._payload),ye)}if(be(le)||ne(le))return le=_c(le,fe.mode,ye,null),le.return=fe,le;ig(fe,le)}return null}function Pe(fe,le,ye,We){var gt=le!==null?le.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return gt!==null?null:ee(fe,le,""+ye,We);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return ye.key===gt?ae(fe,le,ye,We):null;case I:return ye.key===gt?we(fe,le,ye,We):null;case q:return gt=ye._init,Pe(fe,le,gt(ye._payload),We)}if(be(ye)||ne(ye))return gt!==null?null:Le(fe,le,ye,We,null);ig(fe,ye)}return null}function it(fe,le,ye,We,gt){if(typeof We=="string"&&We!==""||typeof We=="number")return fe=fe.get(ye)||null,ee(le,fe,""+We,gt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case b:return fe=fe.get(We.key===null?ye:We.key)||null,ae(le,fe,We,gt);case I:return fe=fe.get(We.key===null?ye:We.key)||null,we(le,fe,We,gt);case q:var Nt=We._init;return it(fe,le,ye,Nt(We._payload),gt)}if(be(We)||ne(We))return fe=fe.get(ye)||null,Le(le,fe,We,gt,null);ig(le,We)}return null}function lt(fe,le,ye,We){for(var gt=null,Nt=null,kt=le,Mt=le=0,Yn=null;kt!==null&&Mt<ye.length;Mt++){kt.index>Mt?(Yn=kt,kt=null):Yn=kt.sibling;var Ss=Pe(fe,kt,ye[Mt],We);if(Ss===null){kt===null&&(kt=Yn);break}l&&kt&&Ss.alternate===null&&d(fe,kt),le=$(Ss,le,Mt),Nt===null?gt=Ss:Nt.sibling=Ss,Nt=Ss,kt=Yn}if(Mt===ye.length)return m(fe,kt),Zs&&pc(fe,Mt),gt;if(kt===null){for(;Mt<ye.length;Mt++)kt=Oe(fe,ye[Mt],We),kt!==null&&(le=$(kt,le,Mt),Nt===null?gt=kt:Nt.sibling=kt,Nt=kt);return Zs&&pc(fe,Mt),gt}for(kt=x(fe,kt);Mt<ye.length;Mt++)Yn=it(kt,fe,Mt,ye[Mt],We),Yn!==null&&(l&&Yn.alternate!==null&&kt.delete(Yn.key===null?Mt:Yn.key),le=$(Yn,le,Mt),Nt===null?gt=Yn:Nt.sibling=Yn,Nt=Yn);return l&&kt.forEach(function(xl){return d(fe,xl)}),Zs&&pc(fe,Mt),gt}function dt(fe,le,ye,We){var gt=ne(ye);if(typeof gt!="function")throw Error(n(150));if(ye=gt.call(ye),ye==null)throw Error(n(151));for(var Nt=gt=null,kt=le,Mt=le=0,Yn=null,Ss=ye.next();kt!==null&&!Ss.done;Mt++,Ss=ye.next()){kt.index>Mt?(Yn=kt,kt=null):Yn=kt.sibling;var xl=Pe(fe,kt,Ss.value,We);if(xl===null){kt===null&&(kt=Yn);break}l&&kt&&xl.alternate===null&&d(fe,kt),le=$(xl,le,Mt),Nt===null?gt=xl:Nt.sibling=xl,Nt=xl,kt=Yn}if(Ss.done)return m(fe,kt),Zs&&pc(fe,Mt),gt;if(kt===null){for(;!Ss.done;Mt++,Ss=ye.next())Ss=Oe(fe,Ss.value,We),Ss!==null&&(le=$(Ss,le,Mt),Nt===null?gt=Ss:Nt.sibling=Ss,Nt=Ss);return Zs&&pc(fe,Mt),gt}for(kt=x(fe,kt);!Ss.done;Mt++,Ss=ye.next())Ss=it(kt,fe,Mt,Ss.value,We),Ss!==null&&(l&&Ss.alternate!==null&&kt.delete(Ss.key===null?Mt:Ss.key),le=$(Ss,le,Mt),Nt===null?gt=Ss:Nt.sibling=Ss,Nt=Ss);return l&&kt.forEach(function(m6){return d(fe,m6)}),Zs&&pc(fe,Mt),gt}function jn(fe,le,ye,We){if(typeof ye=="object"&&ye!==null&&ye.type===j&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:e:{for(var gt=ye.key,Nt=le;Nt!==null;){if(Nt.key===gt){if(gt=ye.type,gt===j){if(Nt.tag===7){m(fe,Nt.sibling),le=A(Nt,ye.props.children),le.return=fe,fe=le;break e}}else if(Nt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===q&&i2(gt)===Nt.type){m(fe,Nt.sibling),le=A(Nt,ye.props),le.ref=xh(fe,Nt,ye),le.return=fe,fe=le;break e}m(fe,Nt);break}else d(fe,Nt);Nt=Nt.sibling}ye.type===j?(le=_c(ye.props.children,fe.mode,We,ye.key),le.return=fe,fe=le):(We=Ig(ye.type,ye.key,ye.props,null,fe.mode,We),We.ref=xh(fe,le,ye),We.return=fe,fe=We)}return U(fe);case I:e:{for(Nt=ye.key;le!==null;){if(le.key===Nt)if(le.tag===4&&le.stateNode.containerInfo===ye.containerInfo&&le.stateNode.implementation===ye.implementation){m(fe,le.sibling),le=A(le,ye.children||[]),le.return=fe,fe=le;break e}else{m(fe,le);break}else d(fe,le);le=le.sibling}le=r0(ye,fe.mode,We),le.return=fe,fe=le}return U(fe);case q:return Nt=ye._init,jn(fe,le,Nt(ye._payload),We)}if(be(ye))return lt(fe,le,ye,We);if(ne(ye))return dt(fe,le,ye,We);ig(fe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,le!==null&&le.tag===6?(m(fe,le.sibling),le=A(le,ye),le.return=fe,fe=le):(m(fe,le),le=n0(ye,fe.mode,We),le.return=fe,fe=le),U(fe)):m(fe,le)}return jn}var $d=a2(!0),o2=a2(!1),ag=ol(null),og=null,Od=null,py=null;function my(){py=Od=og=null}function gy(l){var d=ag.current;Ks(ag),l._currentValue=d}function fy(l,d,m){for(;l!==null;){var x=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),l===m)break;l=l.return}}function Vd(l,d){og=l,py=Od=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(ri=!0),l.firstContext=null)}function Ui(l){var d=l._currentValue;if(py!==l)if(l={context:l,memoizedValue:d,next:null},Od===null){if(og===null)throw Error(n(308));Od=l,og.dependencies={lanes:0,firstContext:l}}else Od=Od.next=l;return d}var mc=null;function vy(l){mc===null?mc=[l]:mc.push(l)}function l2(l,d,m,x){var A=d.interleaved;return A===null?(m.next=m,vy(d)):(m.next=A.next,A.next=m),d.interleaved=m,mo(l,x)}function mo(l,d){l.lanes|=d;var m=l.alternate;for(m!==null&&(m.lanes|=d),m=l,l=l.return;l!==null;)l.childLanes|=d,m=l.alternate,m!==null&&(m.childLanes|=d),m=l,l=l.return;return m.tag===3?m.stateNode:null}var dl=!1;function xy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c2(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function go(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function ul(l,d,m){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(xs&2)!==0){var A=x.pending;return A===null?d.next=d:(d.next=A.next,A.next=d),x.pending=d,mo(l,m)}return A=x.interleaved,A===null?(d.next=d,vy(x)):(d.next=A.next,A.next=d),x.interleaved=d,mo(l,m)}function lg(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var x=d.lanes;x&=l.pendingLanes,m|=x,d.lanes=m,el(l,m)}}function d2(l,d){var m=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var A=null,$=null;if(m=m.firstBaseUpdate,m!==null){do{var U={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};$===null?A=$=U:$=$.next=U,m=m.next}while(m!==null);$===null?A=$=d:$=$.next=d}else A=$=d;m={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:$,shared:x.shared,effects:x.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}function cg(l,d,m,x){var A=l.updateQueue;dl=!1;var $=A.firstBaseUpdate,U=A.lastBaseUpdate,ee=A.shared.pending;if(ee!==null){A.shared.pending=null;var ae=ee,we=ae.next;ae.next=null,U===null?$=we:U.next=we,U=ae;var Le=l.alternate;Le!==null&&(Le=Le.updateQueue,ee=Le.lastBaseUpdate,ee!==U&&(ee===null?Le.firstBaseUpdate=we:ee.next=we,Le.lastBaseUpdate=ae))}if($!==null){var Oe=A.baseState;U=0,Le=we=ae=null,ee=$;do{var Pe=ee.lane,it=ee.eventTime;if((x&Pe)===Pe){Le!==null&&(Le=Le.next={eventTime:it,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var lt=l,dt=ee;switch(Pe=d,it=m,dt.tag){case 1:if(lt=dt.payload,typeof lt=="function"){Oe=lt.call(it,Oe,Pe);break e}Oe=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=dt.payload,Pe=typeof lt=="function"?lt.call(it,Oe,Pe):lt,Pe==null)break e;Oe=Y({},Oe,Pe);break e;case 2:dl=!0}}ee.callback!==null&&ee.lane!==0&&(l.flags|=64,Pe=A.effects,Pe===null?A.effects=[ee]:Pe.push(ee))}else it={eventTime:it,lane:Pe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Le===null?(we=Le=it,ae=Oe):Le=Le.next=it,U|=Pe;if(ee=ee.next,ee===null){if(ee=A.shared.pending,ee===null)break;Pe=ee,ee=Pe.next,Pe.next=null,A.lastBaseUpdate=Pe,A.shared.pending=null}}while(!0);if(Le===null&&(ae=Oe),A.baseState=ae,A.firstBaseUpdate=we,A.lastBaseUpdate=Le,d=A.shared.interleaved,d!==null){A=d;do U|=A.lane,A=A.next;while(A!==d)}else $===null&&(A.shared.lanes=0);vc|=U,l.lanes=U,l.memoizedState=Oe}}function u2(l,d,m){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var x=l[d],A=x.callback;if(A!==null){if(x.callback=null,x=m,typeof A!="function")throw Error(n(191,A));A.call(x)}}}var yh={},Ma=ol(yh),bh=ol(yh),_h=ol(yh);function gc(l){if(l===yh)throw Error(n(174));return l}function yy(l,d){switch(Us(_h,d),Us(bh,l),Us(Ma,yh),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:He(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=He(d,l)}Ks(Ma),Us(Ma,d)}function Ud(){Ks(Ma),Ks(bh),Ks(_h)}function h2(l){gc(_h.current);var d=gc(Ma.current),m=He(d,l.type);d!==m&&(Us(bh,l),Us(Ma,m))}function by(l){bh.current===l&&(Ks(Ma),Ks(bh))}var an=ol(0);function dg(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var _y=[];function wy(){for(var l=0;l<_y.length;l++)_y[l]._workInProgressVersionPrimary=null;_y.length=0}var ug=v.ReactCurrentDispatcher,jy=v.ReactCurrentBatchConfig,fc=0,on=null,Gn=null,qn=null,hg=!1,wh=!1,jh=0,ML=0;function Sr(){throw Error(n(321))}function Sy(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!oa(l[m],d[m]))return!1;return!0}function Ny(l,d,m,x,A,$){if(fc=$,on=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ug.current=l===null||l.memoizedState===null?OL:VL,l=m(x,A),wh){$=0;do{if(wh=!1,jh=0,25<=$)throw Error(n(301));$+=1,qn=Gn=null,d.updateQueue=null,ug.current=UL,l=m(x,A)}while(wh)}if(ug.current=gg,d=Gn!==null&&Gn.next!==null,fc=0,qn=Gn=on=null,hg=!1,d)throw Error(n(300));return l}function ky(){var l=jh!==0;return jh=0,l}function Fa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?on.memoizedState=qn=l:qn=qn.next=l,qn}function Gi(){if(Gn===null){var l=on.alternate;l=l!==null?l.memoizedState:null}else l=Gn.next;var d=qn===null?on.memoizedState:qn.next;if(d!==null)qn=d,Gn=l;else{if(l===null)throw Error(n(310));Gn=l,l={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},qn===null?on.memoizedState=qn=l:qn=qn.next=l}return qn}function Sh(l,d){return typeof d=="function"?d(l):d}function Cy(l){var d=Gi(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var x=Gn,A=x.baseQueue,$=m.pending;if($!==null){if(A!==null){var U=A.next;A.next=$.next,$.next=U}x.baseQueue=A=$,m.pending=null}if(A!==null){$=A.next,x=x.baseState;var ee=U=null,ae=null,we=$;do{var Le=we.lane;if((fc&Le)===Le)ae!==null&&(ae=ae.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),x=we.hasEagerState?we.eagerState:l(x,we.action);else{var Oe={lane:Le,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ae===null?(ee=ae=Oe,U=x):ae=ae.next=Oe,on.lanes|=Le,vc|=Le}we=we.next}while(we!==null&&we!==$);ae===null?U=x:ae.next=ee,oa(x,d.memoizedState)||(ri=!0),d.memoizedState=x,d.baseState=U,d.baseQueue=ae,m.lastRenderedState=x}if(l=m.interleaved,l!==null){A=l;do $=A.lane,on.lanes|=$,vc|=$,A=A.next;while(A!==l)}else A===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Ty(l){var d=Gi(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var x=m.dispatch,A=m.pending,$=d.memoizedState;if(A!==null){m.pending=null;var U=A=A.next;do $=l($,U.action),U=U.next;while(U!==A);oa($,d.memoizedState)||(ri=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),m.lastRenderedState=$}return[$,x]}function p2(){}function m2(l,d){var m=on,x=Gi(),A=d(),$=!oa(x.memoizedState,A);if($&&(x.memoizedState=A,ri=!0),x=x.queue,Iy(v2.bind(null,m,x,l),[l]),x.getSnapshot!==d||$||qn!==null&&qn.memoizedState.tag&1){if(m.flags|=2048,Nh(9,f2.bind(null,m,x,A,d),void 0,null),Qn===null)throw Error(n(349));(fc&30)!==0||g2(m,d,A)}return A}function g2(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=on.updateQueue,d===null?(d={lastEffect:null,stores:null},on.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function f2(l,d,m,x){d.value=m,d.getSnapshot=x,x2(d)&&y2(l)}function v2(l,d,m){return m(function(){x2(d)&&y2(l)})}function x2(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!oa(l,m)}catch(x){return!0}}function y2(l){var d=mo(l,1);d!==null&&ha(d,l,1,-1)}function b2(l){var d=Fa();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:l},d.queue=l,l=l.dispatch=$L.bind(null,on,l),[d.memoizedState,l]}function Nh(l,d,m,x){return l={tag:l,create:d,destroy:m,deps:x,next:null},d=on.updateQueue,d===null?(d={lastEffect:null,stores:null},on.updateQueue=d,d.lastEffect=l.next=l):(m=d.lastEffect,m===null?d.lastEffect=l.next=l:(x=m.next,m.next=l,l.next=x,d.lastEffect=l)),l}function _2(){return Gi().memoizedState}function pg(l,d,m,x){var A=Fa();on.flags|=l,A.memoizedState=Nh(1|d,m,void 0,x===void 0?null:x)}function mg(l,d,m,x){var A=Gi();x=x===void 0?null:x;var $=void 0;if(Gn!==null){var U=Gn.memoizedState;if($=U.destroy,x!==null&&Sy(x,U.deps)){A.memoizedState=Nh(d,m,$,x);return}}on.flags|=l,A.memoizedState=Nh(1|d,m,$,x)}function w2(l,d){return pg(8390656,8,l,d)}function Iy(l,d){return mg(2048,8,l,d)}function j2(l,d){return mg(4,2,l,d)}function S2(l,d){return mg(4,4,l,d)}function N2(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function k2(l,d,m){return m=m!=null?m.concat([l]):null,mg(4,4,N2.bind(null,d,l),m)}function Ay(){}function C2(l,d){var m=Gi();d=d===void 0?null:d;var x=m.memoizedState;return x!==null&&d!==null&&Sy(d,x[1])?x[0]:(m.memoizedState=[l,d],l)}function T2(l,d){var m=Gi();d=d===void 0?null:d;var x=m.memoizedState;return x!==null&&d!==null&&Sy(d,x[1])?x[0]:(l=l(),m.memoizedState=[l,d],l)}function I2(l,d,m){return(fc&21)===0?(l.baseState&&(l.baseState=!1,ri=!0),l.memoizedState=m):(oa(m,d)||(m=ic(),on.lanes|=m,vc|=m,l.baseState=!0),d)}function FL(l,d){var m=us;us=m!==0&&4>m?m:4,l(!0);var x=jy.transition;jy.transition={};try{l(!1),d()}finally{us=m,jy.transition=x}}function A2(){return Gi().memoizedState}function BL(l,d,m){var x=gl(l);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},E2(l))R2(d,m);else if(m=l2(l,d,m,x),m!==null){var A=Br();ha(m,l,x,A),P2(m,d,x)}}function $L(l,d,m){var x=gl(l),A={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(E2(l))R2(d,A);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var U=d.lastRenderedState,ee=$(U,m);if(A.hasEagerState=!0,A.eagerState=ee,oa(ee,U)){var ae=d.interleaved;ae===null?(A.next=A,vy(d)):(A.next=ae.next,ae.next=A),d.interleaved=A;return}}catch(we){}finally{}m=l2(l,d,A,x),m!==null&&(A=Br(),ha(m,l,x,A),P2(m,d,x))}}function E2(l){var d=l.alternate;return l===on||d!==null&&d===on}function R2(l,d){wh=hg=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function P2(l,d,m){if((m&4194240)!==0){var x=d.lanes;x&=l.pendingLanes,m|=x,d.lanes=m,el(l,m)}}var gg={readContext:Ui,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},OL={readContext:Ui,useCallback:function(l,d){return Fa().memoizedState=[l,d===void 0?null:d],l},useContext:Ui,useEffect:w2,useImperativeHandle:function(l,d,m){return m=m!=null?m.concat([l]):null,pg(4194308,4,N2.bind(null,d,l),m)},useLayoutEffect:function(l,d){return pg(4194308,4,l,d)},useInsertionEffect:function(l,d){return pg(4,2,l,d)},useMemo:function(l,d){var m=Fa();return d=d===void 0?null:d,l=l(),m.memoizedState=[l,d],l},useReducer:function(l,d,m){var x=Fa();return d=m!==void 0?m(d):d,x.memoizedState=x.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},x.queue=l,l=l.dispatch=BL.bind(null,on,l),[x.memoizedState,l]},useRef:function(l){var d=Fa();return l={current:l},d.memoizedState=l},useState:b2,useDebugValue:Ay,useDeferredValue:function(l){return Fa().memoizedState=l},useTransition:function(){var l=b2(!1),d=l[0];return l=FL.bind(null,l[1]),Fa().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,m){var x=on,A=Fa();if(Zs){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),Qn===null)throw Error(n(349));(fc&30)!==0||g2(x,d,m)}A.memoizedState=m;var $={value:m,getSnapshot:d};return A.queue=$,w2(v2.bind(null,x,$,l),[l]),x.flags|=2048,Nh(9,f2.bind(null,x,$,m,d),void 0,null),m},useId:function(){var l=Fa(),d=Qn.identifierPrefix;if(Zs){var m=po,x=ho;m=(x&~(1<<32-Dr(x)-1)).toString(32)+m,d=":"+d+"R"+m,m=jh++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=ML++,d=":"+d+"r"+m.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},VL={readContext:Ui,useCallback:C2,useContext:Ui,useEffect:Iy,useImperativeHandle:k2,useInsertionEffect:j2,useLayoutEffect:S2,useMemo:T2,useReducer:Cy,useRef:_2,useState:function(){return Cy(Sh)},useDebugValue:Ay,useDeferredValue:function(l){var d=Gi();return I2(d,Gn.memoizedState,l)},useTransition:function(){var l=Cy(Sh)[0],d=Gi().memoizedState;return[l,d]},useMutableSource:p2,useSyncExternalStore:m2,useId:A2,unstable_isNewReconciler:!1},UL={readContext:Ui,useCallback:C2,useContext:Ui,useEffect:Iy,useImperativeHandle:k2,useInsertionEffect:j2,useLayoutEffect:S2,useMemo:T2,useReducer:Ty,useRef:_2,useState:function(){return Ty(Sh)},useDebugValue:Ay,useDeferredValue:function(l){var d=Gi();return Gn===null?d.memoizedState=l:I2(d,Gn.memoizedState,l)},useTransition:function(){var l=Ty(Sh)[0],d=Gi().memoizedState;return[l,d]},useMutableSource:p2,useSyncExternalStore:m2,useId:A2,unstable_isNewReconciler:!1};function ca(l,d){if(l&&l.defaultProps){d=Y({},d),l=l.defaultProps;for(var m in l)d[m]===void 0&&(d[m]=l[m]);return d}return d}function Ey(l,d,m,x){d=l.memoizedState,m=m(x,d),m=m==null?d:Y({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var fg={isMounted:function(l){return(l=l._reactInternals)?es(l)===l:!1},enqueueSetState:function(l,d,m){l=l._reactInternals;var x=Br(),A=gl(l),$=go(x,A);$.payload=d,m!=null&&($.callback=m),d=ul(l,$,A),d!==null&&(ha(d,l,A,x),lg(d,l,A))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var x=Br(),A=gl(l),$=go(x,A);$.tag=1,$.payload=d,m!=null&&($.callback=m),d=ul(l,$,A),d!==null&&(ha(d,l,A,x),lg(d,l,A))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=Br(),x=gl(l),A=go(m,x);A.tag=2,d!=null&&(A.callback=d),d=ul(l,A,x),d!==null&&(ha(d,l,x,m),lg(d,l,x))}};function L2(l,d,m,x,A,$,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,$,U):d.prototype&&d.prototype.isPureReactComponent?!uh(m,x)||!uh(A,$):!0}function D2(l,d,m){var x=!1,A=ll,$=d.contextType;return typeof $=="object"&&$!==null?$=Ui($):(A=ni(d)?uc:jr.current,x=d.contextTypes,$=(x=x!=null)?Dd(l,A):ll),d=new d(m,$),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=fg,l.stateNode=d,d._reactInternals=l,x&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=A,l.__reactInternalMemoizedMaskedChildContext=$),d}function M2(l,d,m,x){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,x),d.state!==l&&fg.enqueueReplaceState(d,d.state,null)}function Ry(l,d,m,x){var A=l.stateNode;A.props=m,A.state=l.memoizedState,A.refs={},xy(l);var $=d.contextType;typeof $=="object"&&$!==null?A.context=Ui($):($=ni(d)?uc:jr.current,A.context=Dd(l,$)),A.state=l.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(Ey(l,d,$,m),A.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(d=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),d!==A.state&&fg.enqueueReplaceState(A,A.state,null),cg(l,m,A,x),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308)}function Gd(l,d){try{var m="",x=d;do m+=Z(x),x=x.return;while(x);var A=m}catch($){A=`
Error generating stack: `+$.message+`
`+$.stack}return{value:l,source:d,stack:A,digest:null}}function Py(l,d,m){return{value:l,source:null,stack:m!=null?m:null,digest:d!=null?d:null}}function Ly(l,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var GL=typeof WeakMap=="function"?WeakMap:Map;function F2(l,d,m){m=go(-1,m),m.tag=3,m.payload={element:null};var x=d.value;return m.callback=function(){jg||(jg=!0,Qy=x),Ly(l,d)},m}function B2(l,d,m){m=go(-1,m),m.tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var A=d.value;m.payload=function(){return x(A)},m.callback=function(){Ly(l,d)}}var $=l.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(m.callback=function(){Ly(l,d),typeof x!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var U=d.stack;this.componentDidCatch(d.value,{componentStack:U!==null?U:""})}),m}function $2(l,d,m){var x=l.pingCache;if(x===null){x=l.pingCache=new GL;var A=new Set;x.set(d,A)}else A=x.get(d),A===void 0&&(A=new Set,x.set(d,A));A.has(m)||(A.add(m),l=n6.bind(null,l,d,m),d.then(l,l))}function O2(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function V2(l,d,m,x,A){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=go(-1,1),d.tag=2,ul(m,d,1))),m.lanes|=1),l):(l.flags|=65536,l.lanes=A,l)}var zL=v.ReactCurrentOwner,ri=!1;function Fr(l,d,m,x){d.child=l===null?o2(d,null,m,x):$d(d,l.child,m,x)}function U2(l,d,m,x,A){m=m.render;var $=d.ref;return Vd(d,A),x=Ny(l,d,m,x,$,A),m=ky(),l!==null&&!ri?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,fo(l,d,A)):(Zs&&m&&ly(d),d.flags|=1,Fr(l,d,x,A),d.child)}function G2(l,d,m,x,A){if(l===null){var $=m.type;return typeof $=="function"&&!s0($)&&$.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=$,z2(l,d,$,x,A)):(l=Ig(m.type,null,x,d,d.mode,A),l.ref=d.ref,l.return=d,d.child=l)}if($=l.child,(l.lanes&A)===0){var U=$.memoizedProps;if(m=m.compare,m=m!==null?m:uh,m(U,x)&&l.ref===d.ref)return fo(l,d,A)}return d.flags|=1,l=vl($,x),l.ref=d.ref,l.return=d,d.child=l}function z2(l,d,m,x,A){if(l!==null){var $=l.memoizedProps;if(uh($,x)&&l.ref===d.ref)if(ri=!1,d.pendingProps=x=$,(l.lanes&A)!==0)(l.flags&131072)!==0&&(ri=!0);else return d.lanes=l.lanes,fo(l,d,A)}return Dy(l,d,m,x,A)}function H2(l,d,m){var x=d.pendingProps,A=x.children,$=l!==null?l.memoizedState:null;if(x.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Us(Hd,Ni),Ni|=m;else{if((m&1073741824)===0)return l=$!==null?$.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,Us(Hd,Ni),Ni|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=$!==null?$.baseLanes:m,Us(Hd,Ni),Ni|=x}else $!==null?(x=$.baseLanes|m,d.memoizedState=null):x=m,Us(Hd,Ni),Ni|=x;return Fr(l,d,A,m),d.child}function W2(l,d){var m=d.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Dy(l,d,m,x,A){var $=ni(m)?uc:jr.current;return $=Dd(d,$),Vd(d,A),m=Ny(l,d,m,x,$,A),x=ky(),l!==null&&!ri?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~A,fo(l,d,A)):(Zs&&x&&ly(d),d.flags|=1,Fr(l,d,m,A),d.child)}function K2(l,d,m,x,A){if(ni(m)){var $=!0;eg(d)}else $=!1;if(Vd(d,A),d.stateNode===null)xg(l,d),D2(d,m,x),Ry(d,m,x,A),x=!0;else if(l===null){var U=d.stateNode,ee=d.memoizedProps;U.props=ee;var ae=U.context,we=m.contextType;typeof we=="object"&&we!==null?we=Ui(we):(we=ni(m)?uc:jr.current,we=Dd(d,we));var Le=m.getDerivedStateFromProps,Oe=typeof Le=="function"||typeof U.getSnapshotBeforeUpdate=="function";Oe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ee!==x||ae!==we)&&M2(d,U,x,we),dl=!1;var Pe=d.memoizedState;U.state=Pe,cg(d,x,U,A),ae=d.memoizedState,ee!==x||Pe!==ae||si.current||dl?(typeof Le=="function"&&(Ey(d,m,Le,x),ae=d.memoizedState),(ee=dl||L2(d,m,ee,x,Pe,ae,we))?(Oe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(d.flags|=4194308)):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=ae),U.props=x,U.state=ae,U.context=we,x=ee):(typeof U.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{U=d.stateNode,c2(l,d),ee=d.memoizedProps,we=d.type===d.elementType?ee:ca(d.type,ee),U.props=we,Oe=d.pendingProps,Pe=U.context,ae=m.contextType,typeof ae=="object"&&ae!==null?ae=Ui(ae):(ae=ni(m)?uc:jr.current,ae=Dd(d,ae));var it=m.getDerivedStateFromProps;(Le=typeof it=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ee!==Oe||Pe!==ae)&&M2(d,U,x,ae),dl=!1,Pe=d.memoizedState,U.state=Pe,cg(d,x,U,A);var lt=d.memoizedState;ee!==Oe||Pe!==lt||si.current||dl?(typeof it=="function"&&(Ey(d,m,it,x),lt=d.memoizedState),(we=dl||L2(d,m,we,x,Pe,lt,ae)||!1)?(Le||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,lt,ae),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,lt,ae)),typeof U.componentDidUpdate=="function"&&(d.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof U.componentDidUpdate!="function"||ee===l.memoizedProps&&Pe===l.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===l.memoizedProps&&Pe===l.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=lt),U.props=x,U.state=lt,U.context=ae,x=we):(typeof U.componentDidUpdate!="function"||ee===l.memoizedProps&&Pe===l.memoizedState||(d.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===l.memoizedProps&&Pe===l.memoizedState||(d.flags|=1024),x=!1)}return My(l,d,m,x,$,A)}function My(l,d,m,x,A,$){W2(l,d);var U=(d.flags&128)!==0;if(!x&&!U)return A&&Jj(d,m,!1),fo(l,d,$);x=d.stateNode,zL.current=d;var ee=U&&typeof m.getDerivedStateFromError!="function"?null:x.render();return d.flags|=1,l!==null&&U?(d.child=$d(d,l.child,null,$),d.child=$d(d,null,ee,$)):Fr(l,d,ee,$),d.memoizedState=x.state,A&&Jj(d,m,!0),d.child}function q2(l){var d=l.stateNode;d.pendingContext?Yj(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Yj(l,d.context,!1),yy(l,d.containerInfo)}function Q2(l,d,m,x,A){return Bd(),hy(A),d.flags|=256,Fr(l,d,m,x),d.child}var Fy={dehydrated:null,treeContext:null,retryLane:0};function By(l){return{baseLanes:l,cachePool:null,transitions:null}}function Y2(l,d,m){var x=d.pendingProps,A=an.current,$=!1,U=(d.flags&128)!==0,ee;if((ee=U)||(ee=l!==null&&l.memoizedState===null?!1:(A&2)!==0),ee?($=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(A|=1),Us(an,A&1),l===null)return uy(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(U=x.children,l=x.fallback,$?(x=d.mode,$=d.child,U={mode:"hidden",children:U},(x&1)===0&&$!==null?($.childLanes=0,$.pendingProps=U):$=Ag(U,x,0,null),l=_c(l,x,m,null),$.return=d,l.return=d,$.sibling=l,d.child=$,d.child.memoizedState=By(m),d.memoizedState=Fy,l):$y(d,U));if(A=l.memoizedState,A!==null&&(ee=A.dehydrated,ee!==null))return HL(l,d,U,x,ee,A,m);if($){$=x.fallback,U=d.mode,A=l.child,ee=A.sibling;var ae={mode:"hidden",children:x.children};return(U&1)===0&&d.child!==A?(x=d.child,x.childLanes=0,x.pendingProps=ae,d.deletions=null):(x=vl(A,ae),x.subtreeFlags=A.subtreeFlags&14680064),ee!==null?$=vl(ee,$):($=_c($,U,m,null),$.flags|=2),$.return=d,x.return=d,x.sibling=$,d.child=x,x=$,$=d.child,U=l.child.memoizedState,U=U===null?By(m):{baseLanes:U.baseLanes|m,cachePool:null,transitions:U.transitions},$.memoizedState=U,$.childLanes=l.childLanes&~m,d.memoizedState=Fy,x}return $=l.child,l=$.sibling,x=vl($,{mode:"visible",children:x.children}),(d.mode&1)===0&&(x.lanes=m),x.return=d,x.sibling=null,l!==null&&(m=d.deletions,m===null?(d.deletions=[l],d.flags|=16):m.push(l)),d.child=x,d.memoizedState=null,x}function $y(l,d){return d=Ag({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function vg(l,d,m,x){return x!==null&&hy(x),$d(d,l.child,null,m),l=$y(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function HL(l,d,m,x,A,$,U){if(m)return d.flags&256?(d.flags&=-257,x=Py(Error(n(422))),vg(l,d,U,x)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):($=x.fallback,A=d.mode,x=Ag({mode:"visible",children:x.children},A,0,null),$=_c($,A,U,null),$.flags|=2,x.return=d,$.return=d,x.sibling=$,d.child=x,(d.mode&1)!==0&&$d(d,l.child,null,U),d.child.memoizedState=By(U),d.memoizedState=Fy,$);if((d.mode&1)===0)return vg(l,d,U,null);if(A.data==="$!"){if(x=A.nextSibling&&A.nextSibling.dataset,x)var ee=x.dgst;return x=ee,$=Error(n(419)),x=Py($,x,void 0),vg(l,d,U,x)}if(ee=(U&l.childLanes)!==0,ri||ee){if(x=Qn,x!==null){switch(U&-U){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(x.suspendedLanes|U))!==0?0:A,A!==0&&A!==$.retryLane&&($.retryLane=A,mo(l,A),ha(x,l,A,-1))}return t0(),x=Py(Error(n(421))),vg(l,d,U,x)}return A.data==="$?"?(d.flags|=128,d.child=l.child,d=r6.bind(null,l),A._reactRetry=d,null):(l=$.treeContext,Si=al(A.nextSibling),ji=d,Zs=!0,la=null,l!==null&&(Oi[Vi++]=ho,Oi[Vi++]=po,Oi[Vi++]=hc,ho=l.id,po=l.overflow,hc=d),d=$y(d,x.children),d.flags|=4096,d)}function X2(l,d,m){l.lanes|=d;var x=l.alternate;x!==null&&(x.lanes|=d),fy(l.return,d,m)}function Oy(l,d,m,x,A){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:A}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=x,$.tail=m,$.tailMode=A)}function J2(l,d,m){var x=d.pendingProps,A=x.revealOrder,$=x.tail;if(Fr(l,d,x.children,m),x=an.current,(x&2)!==0)x=x&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&X2(l,m,d);else if(l.tag===19)X2(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(Us(an,x),(d.mode&1)===0)d.memoizedState=null;else switch(A){case"forwards":for(m=d.child,A=null;m!==null;)l=m.alternate,l!==null&&dg(l)===null&&(A=m),m=m.sibling;m=A,m===null?(A=d.child,d.child=null):(A=m.sibling,m.sibling=null),Oy(d,!1,A,m,$);break;case"backwards":for(m=null,A=d.child,d.child=null;A!==null;){if(l=A.alternate,l!==null&&dg(l)===null){d.child=A;break}l=A.sibling,A.sibling=m,m=A,A=l}Oy(d,!0,m,null,$);break;case"together":Oy(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function xg(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function fo(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),vc|=d.lanes,(m&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,m=vl(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=vl(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function WL(l,d,m){switch(d.tag){case 3:q2(d),Bd();break;case 5:h2(d);break;case 1:ni(d.type)&&eg(d);break;case 4:yy(d,d.stateNode.containerInfo);break;case 10:var x=d.type._context,A=d.memoizedProps.value;Us(ag,x._currentValue),x._currentValue=A;break;case 13:if(x=d.memoizedState,x!==null)return x.dehydrated!==null?(Us(an,an.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?Y2(l,d,m):(Us(an,an.current&1),l=fo(l,d,m),l!==null?l.sibling:null);Us(an,an.current&1);break;case 19:if(x=(m&d.childLanes)!==0,(l.flags&128)!==0){if(x)return J2(l,d,m);d.flags|=128}if(A=d.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Us(an,an.current),x)break;return null;case 22:case 23:return d.lanes=0,H2(l,d,m)}return fo(l,d,m)}var Z2,Vy,eS,tS;Z2=function(l,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Vy=function(){},eS=function(l,d,m,x){var A=l.memoizedProps;if(A!==x){l=d.stateNode,gc(Ma.current);var $=null;switch(m){case"input":A=Ne(l,A),x=Ne(l,x),$=[];break;case"select":A=Y({},A,{value:void 0}),x=Y({},x,{value:void 0}),$=[];break;case"textarea":A=Ve(l,A),x=Ve(l,x),$=[];break;default:typeof A.onClick!="function"&&typeof x.onClick=="function"&&(l.onclick=Xm)}ks(m,x);var U;m=null;for(we in A)if(!x.hasOwnProperty(we)&&A.hasOwnProperty(we)&&A[we]!=null)if(we==="style"){var ee=A[we];for(U in ee)ee.hasOwnProperty(U)&&(m||(m={}),m[U]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(i.hasOwnProperty(we)?$||($=[]):($=$||[]).push(we,null));for(we in x){var ae=x[we];if(ee=A!=null?A[we]:void 0,x.hasOwnProperty(we)&&ae!==ee&&(ae!=null||ee!=null))if(we==="style")if(ee){for(U in ee)!ee.hasOwnProperty(U)||ae&&ae.hasOwnProperty(U)||(m||(m={}),m[U]="");for(U in ae)ae.hasOwnProperty(U)&&ee[U]!==ae[U]&&(m||(m={}),m[U]=ae[U])}else m||($||($=[]),$.push(we,m)),m=ae;else we==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ee=ee?ee.__html:void 0,ae!=null&&ee!==ae&&($=$||[]).push(we,ae)):we==="children"?typeof ae!="string"&&typeof ae!="number"||($=$||[]).push(we,""+ae):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(i.hasOwnProperty(we)?(ae!=null&&we==="onScroll"&&Ws("scroll",l),$||ee===ae||($=[])):($=$||[]).push(we,ae))}m&&($=$||[]).push("style",m);var we=$;(d.updateQueue=we)&&(d.flags|=4)}},tS=function(l,d,m,x){m!==x&&(d.flags|=4)};function kh(l,d){if(!Zs)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Nr(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,x=0;if(d)for(var A=l.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags&14680064,x|=A.flags&14680064,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=x,l.childLanes=m,d}function KL(l,d,m){var x=d.pendingProps;switch(cy(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(d),null;case 1:return ni(d.type)&&Zm(),Nr(d),null;case 3:return x=d.stateNode,Ud(),Ks(si),Ks(jr),wy(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(l===null||l.child===null)&&(rg(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,la!==null&&(Jy(la),la=null))),Vy(l,d),Nr(d),null;case 5:by(d);var A=gc(_h.current);if(m=d.type,l!==null&&d.stateNode!=null)eS(l,d,m,x,A),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!x){if(d.stateNode===null)throw Error(n(166));return Nr(d),null}if(l=gc(Ma.current),rg(d)){x=d.stateNode,m=d.type;var $=d.memoizedProps;switch(x[Da]=d,x[fh]=$,l=(d.mode&1)!==0,m){case"dialog":Ws("cancel",x),Ws("close",x);break;case"iframe":case"object":case"embed":Ws("load",x);break;case"video":case"audio":for(A=0;A<ph.length;A++)Ws(ph[A],x);break;case"source":Ws("error",x);break;case"img":case"image":case"link":Ws("error",x),Ws("load",x);break;case"details":Ws("toggle",x);break;case"input":Te(x,$),Ws("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!$.multiple},Ws("invalid",x);break;case"textarea":nt(x,$),Ws("invalid",x)}ks(m,$),A=null;for(var U in $)if($.hasOwnProperty(U)){var ee=$[U];U==="children"?typeof ee=="string"?x.textContent!==ee&&($.suppressHydrationWarning!==!0&&Ym(x.textContent,ee,l),A=["children",ee]):typeof ee=="number"&&x.textContent!==""+ee&&($.suppressHydrationWarning!==!0&&Ym(x.textContent,ee,l),A=["children",""+ee]):i.hasOwnProperty(U)&&ee!=null&&U==="onScroll"&&Ws("scroll",x)}switch(m){case"input":me(x),$e(x,$,!0);break;case"textarea":me(x),Ue(x);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(x.onclick=Xm)}x=A,d.updateQueue=x,x!==null&&(d.flags|=4)}else{U=A.nodeType===9?A:A.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Ee(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=U.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof x.is=="string"?l=U.createElement(m,{is:x.is}):(l=U.createElement(m),m==="select"&&(U=l,x.multiple?U.multiple=!0:x.size&&(U.size=x.size))):l=U.createElementNS(l,m),l[Da]=d,l[fh]=x,Z2(l,d,!1,!1),d.stateNode=l;e:{switch(U=Ht(m,x),m){case"dialog":Ws("cancel",l),Ws("close",l),A=x;break;case"iframe":case"object":case"embed":Ws("load",l),A=x;break;case"video":case"audio":for(A=0;A<ph.length;A++)Ws(ph[A],l);A=x;break;case"source":Ws("error",l),A=x;break;case"img":case"image":case"link":Ws("error",l),Ws("load",l),A=x;break;case"details":Ws("toggle",l),A=x;break;case"input":Te(l,x),A=Ne(l,x),Ws("invalid",l);break;case"option":A=x;break;case"select":l._wrapperState={wasMultiple:!!x.multiple},A=Y({},x,{value:void 0}),Ws("invalid",l);break;case"textarea":nt(l,x),A=Ve(l,x),Ws("invalid",l);break;default:A=x}ks(m,A),ee=A;for($ in ee)if(ee.hasOwnProperty($)){var ae=ee[$];$==="style"?_t(l,ae):$==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&Ct(l,ae)):$==="children"?typeof ae=="string"?(m!=="textarea"||ae!=="")&&ns(l,ae):typeof ae=="number"&&ns(l,""+ae):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?ae!=null&&$==="onScroll"&&Ws("scroll",l):ae!=null&&N(l,$,ae,U))}switch(m){case"input":me(l),$e(l,x,!1);break;case"textarea":me(l),Ue(l);break;case"option":x.value!=null&&l.setAttribute("value",""+J(x.value));break;case"select":l.multiple=!!x.multiple,$=x.value,$!=null?Be(l,!!x.multiple,$,!1):x.defaultValue!=null&&Be(l,!!x.multiple,x.defaultValue,!0);break;default:typeof A.onClick=="function"&&(l.onclick=Xm)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Nr(d),null;case 6:if(l&&d.stateNode!=null)tS(l,d,l.memoizedProps,x);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(m=gc(_h.current),gc(Ma.current),rg(d)){if(x=d.stateNode,m=d.memoizedProps,x[Da]=d,($=x.nodeValue!==m)&&(l=ji,l!==null))switch(l.tag){case 3:Ym(x.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ym(x.nodeValue,m,(l.mode&1)!==0)}$&&(d.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[Da]=d,d.stateNode=x}return Nr(d),null;case 13:if(Ks(an),x=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Zs&&Si!==null&&(d.mode&1)!==0&&(d.flags&128)===0)r2(),Bd(),d.flags|=98560,$=!1;else if($=rg(d),x!==null&&x.dehydrated!==null){if(l===null){if(!$)throw Error(n(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(n(317));$[Da]=d}else Bd(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Nr(d),$=!1}else la!==null&&(Jy(la),la=null),$=!0;if(!$)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(x=x!==null,x!==(l!==null&&l.memoizedState!==null)&&x&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(an.current&1)!==0?zn===0&&(zn=3):t0())),d.updateQueue!==null&&(d.flags|=4),Nr(d),null);case 4:return Ud(),Vy(l,d),l===null&&mh(d.stateNode.containerInfo),Nr(d),null;case 10:return gy(d.type._context),Nr(d),null;case 17:return ni(d.type)&&Zm(),Nr(d),null;case 19:if(Ks(an),$=d.memoizedState,$===null)return Nr(d),null;if(x=(d.flags&128)!==0,U=$.rendering,U===null)if(x)kh($,!1);else{if(zn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(U=dg(l),U!==null){for(d.flags|=128,kh($,!1),x=U.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),d.subtreeFlags=0,x=m,m=d.child;m!==null;)$=m,l=x,$.flags&=14680066,U=$.alternate,U===null?($.childLanes=0,$.lanes=l,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=U.childLanes,$.lanes=U.lanes,$.child=U.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=U.memoizedProps,$.memoizedState=U.memoizedState,$.updateQueue=U.updateQueue,$.type=U.type,l=U.dependencies,$.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return Us(an,an.current&1|2),d.child}l=l.sibling}$.tail!==null&&Ds()>Wd&&(d.flags|=128,x=!0,kh($,!1),d.lanes=4194304)}else{if(!x)if(l=dg(U),l!==null){if(d.flags|=128,x=!0,m=l.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),kh($,!0),$.tail===null&&$.tailMode==="hidden"&&!U.alternate&&!Zs)return Nr(d),null}else 2*Ds()-$.renderingStartTime>Wd&&m!==1073741824&&(d.flags|=128,x=!0,kh($,!1),d.lanes=4194304);$.isBackwards?(U.sibling=d.child,d.child=U):(m=$.last,m!==null?m.sibling=U:d.child=U,$.last=U)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=Ds(),d.sibling=null,m=an.current,Us(an,x?m&1|2:m&1),d):(Nr(d),null);case 22:case 23:return e0(),x=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==x&&(d.flags|=8192),x&&(d.mode&1)!==0?(Ni&1073741824)!==0&&(Nr(d),d.subtreeFlags&6&&(d.flags|=8192)):Nr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function qL(l,d){switch(cy(d),d.tag){case 1:return ni(d.type)&&Zm(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ud(),Ks(si),Ks(jr),wy(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return by(d),null;case 13:if(Ks(an),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Bd()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Ks(an),null;case 4:return Ud(),null;case 10:return gy(d.type._context),null;case 22:case 23:return e0(),null;case 24:return null;default:return null}}var yg=!1,kr=!1,QL=typeof WeakSet=="function"?WeakSet:Set,at=null;function zd(l,d){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){mn(l,d,x)}else m.current=null}function Uy(l,d,m){try{m()}catch(x){mn(l,d,x)}}var sS=!1;function YL(l,d){if(ey=nl,l=Lj(),Wx(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var A=x.anchorOffset,$=x.focusNode;x=x.focusOffset;try{m.nodeType,$.nodeType}catch(We){m=null;break e}var U=0,ee=-1,ae=-1,we=0,Le=0,Oe=l,Pe=null;t:for(;;){for(var it;Oe!==m||A!==0&&Oe.nodeType!==3||(ee=U+A),Oe!==$||x!==0&&Oe.nodeType!==3||(ae=U+x),Oe.nodeType===3&&(U+=Oe.nodeValue.length),(it=Oe.firstChild)!==null;)Pe=Oe,Oe=it;for(;;){if(Oe===l)break t;if(Pe===m&&++we===A&&(ee=U),Pe===$&&++Le===x&&(ae=U),(it=Oe.nextSibling)!==null)break;Oe=Pe,Pe=Oe.parentNode}Oe=it}m=ee===-1||ae===-1?null:{start:ee,end:ae}}else m=null}m=m||{start:0,end:0}}else m=null;for(ty={focusedElem:l,selectionRange:m},nl=!1,at=d;at!==null;)if(d=at,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,at=l;else for(;at!==null;){d=at;try{var lt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var dt=lt.memoizedProps,jn=lt.memoizedState,fe=d.stateNode,le=fe.getSnapshotBeforeUpdate(d.elementType===d.type?dt:ca(d.type,dt),jn);fe.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var ye=d.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(We){mn(d,d.return,We)}if(l=d.sibling,l!==null){l.return=d.return,at=l;break}at=d.return}return lt=sS,sS=!1,lt}function Ch(l,d,m){var x=d.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&l)===l){var $=A.destroy;A.destroy=void 0,$!==void 0&&Uy(d,m,$)}A=A.next}while(A!==x)}}function bg(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&l)===l){var x=m.create;m.destroy=x()}m=m.next}while(m!==d)}}function Gy(l){var d=l.ref;if(d!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof d=="function"?d(l):d.current=l}}function nS(l){var d=l.alternate;d!==null&&(l.alternate=null,nS(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Da],delete d[fh],delete d[iy],delete d[RL],delete d[PL])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function rS(l){return l.tag===5||l.tag===3||l.tag===4}function iS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||rS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function zy(l,d,m){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(l,d):m.insertBefore(l,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(l,m)):(d=m,d.appendChild(l)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Xm));else if(x!==4&&(l=l.child,l!==null))for(zy(l,d,m),l=l.sibling;l!==null;)zy(l,d,m),l=l.sibling}function Hy(l,d,m){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(x!==4&&(l=l.child,l!==null))for(Hy(l,d,m),l=l.sibling;l!==null;)Hy(l,d,m),l=l.sibling}var dr=null,da=!1;function hl(l,d,m){for(m=m.child;m!==null;)aS(l,d,m),m=m.sibling}function aS(l,d,m){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(nc,m)}catch(ee){}switch(m.tag){case 5:kr||zd(m,d);case 6:var x=dr,A=da;dr=null,hl(l,d,m),dr=x,da=A,dr!==null&&(da?(l=dr,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):dr.removeChild(m.stateNode));break;case 18:dr!==null&&(da?(l=dr,m=m.stateNode,l.nodeType===8?ry(l.parentNode,m):l.nodeType===1&&ry(l,m),ia(l)):ry(dr,m.stateNode));break;case 4:x=dr,A=da,dr=m.stateNode.containerInfo,da=!0,hl(l,d,m),dr=x,da=A;break;case 0:case 11:case 14:case 15:if(!kr&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){A=x=x.next;do{var $=A,U=$.destroy;$=$.tag,U!==void 0&&(($&2)!==0||($&4)!==0)&&Uy(m,d,U),A=A.next}while(A!==x)}hl(l,d,m);break;case 1:if(!kr&&(zd(m,d),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(ee){mn(m,d,ee)}hl(l,d,m);break;case 21:hl(l,d,m);break;case 22:m.mode&1?(kr=(x=kr)||m.memoizedState!==null,hl(l,d,m),kr=x):hl(l,d,m);break;default:hl(l,d,m)}}function oS(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new QL),d.forEach(function(x){var A=i6.bind(null,l,x);m.has(x)||(m.add(x),x.then(A,A))})}}function ua(l,d){var m=d.deletions;if(m!==null)for(var x=0;x<m.length;x++){var A=m[x];try{var $=l,U=d,ee=U;e:for(;ee!==null;){switch(ee.tag){case 5:dr=ee.stateNode,da=!1;break e;case 3:dr=ee.stateNode.containerInfo,da=!0;break e;case 4:dr=ee.stateNode.containerInfo,da=!0;break e}ee=ee.return}if(dr===null)throw Error(n(160));aS($,U,A),dr=null,da=!1;var ae=A.alternate;ae!==null&&(ae.return=null),A.return=null}catch(we){mn(A,d,we)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)lS(d,l),d=d.sibling}function lS(l,d){var m=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ua(d,l),Ba(l),x&4){try{Ch(3,l,l.return),bg(3,l)}catch(dt){mn(l,l.return,dt)}try{Ch(5,l,l.return)}catch(dt){mn(l,l.return,dt)}}break;case 1:ua(d,l),Ba(l),x&512&&m!==null&&zd(m,m.return);break;case 5:if(ua(d,l),Ba(l),x&512&&m!==null&&zd(m,m.return),l.flags&32){var A=l.stateNode;try{ns(A,"")}catch(dt){mn(l,l.return,dt)}}if(x&4&&(A=l.stateNode,A!=null)){var $=l.memoizedProps,U=m!==null?m.memoizedProps:$,ee=l.type,ae=l.updateQueue;if(l.updateQueue=null,ae!==null)try{ee==="input"&&$.type==="radio"&&$.name!=null&&xe(A,$),Ht(ee,U);var we=Ht(ee,$);for(U=0;U<ae.length;U+=2){var Le=ae[U],Oe=ae[U+1];Le==="style"?_t(A,Oe):Le==="dangerouslySetInnerHTML"?Ct(A,Oe):Le==="children"?ns(A,Oe):N(A,Le,Oe,we)}switch(ee){case"input":Ie(A,$);break;case"textarea":ht(A,$);break;case"select":var Pe=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!$.multiple;var it=$.value;it!=null?Be(A,!!$.multiple,it,!1):Pe!==!!$.multiple&&($.defaultValue!=null?Be(A,!!$.multiple,$.defaultValue,!0):Be(A,!!$.multiple,$.multiple?[]:"",!1))}A[fh]=$}catch(dt){mn(l,l.return,dt)}}break;case 6:if(ua(d,l),Ba(l),x&4){if(l.stateNode===null)throw Error(n(162));A=l.stateNode,$=l.memoizedProps;try{A.nodeValue=$}catch(dt){mn(l,l.return,dt)}}break;case 3:if(ua(d,l),Ba(l),x&4&&m!==null&&m.memoizedState.isDehydrated)try{ia(d.containerInfo)}catch(dt){mn(l,l.return,dt)}break;case 4:ua(d,l),Ba(l);break;case 13:ua(d,l),Ba(l),A=l.child,A.flags&8192&&($=A.memoizedState!==null,A.stateNode.isHidden=$,!$||A.alternate!==null&&A.alternate.memoizedState!==null||(qy=Ds())),x&4&&oS(l);break;case 22:if(Le=m!==null&&m.memoizedState!==null,l.mode&1?(kr=(we=kr)||Le,ua(d,l),kr=we):ua(d,l),Ba(l),x&8192){if(we=l.memoizedState!==null,(l.stateNode.isHidden=we)&&!Le&&(l.mode&1)!==0)for(at=l,Le=l.child;Le!==null;){for(Oe=at=Le;at!==null;){switch(Pe=at,it=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:Ch(4,Pe,Pe.return);break;case 1:zd(Pe,Pe.return);var lt=Pe.stateNode;if(typeof lt.componentWillUnmount=="function"){x=Pe,m=Pe.return;try{d=x,lt.props=d.memoizedProps,lt.state=d.memoizedState,lt.componentWillUnmount()}catch(dt){mn(x,m,dt)}}break;case 5:zd(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){uS(Oe);continue}}it!==null?(it.return=Pe,at=it):uS(Oe)}Le=Le.sibling}e:for(Le=null,Oe=l;;){if(Oe.tag===5){if(Le===null){Le=Oe;try{A=Oe.stateNode,we?($=A.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(ee=Oe.stateNode,ae=Oe.memoizedProps.style,U=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,ee.style.display=Ps("display",U))}catch(dt){mn(l,l.return,dt)}}}else if(Oe.tag===6){if(Le===null)try{Oe.stateNode.nodeValue=we?"":Oe.memoizedProps}catch(dt){mn(l,l.return,dt)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===l)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===l)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===l)break e;Le===Oe&&(Le=null),Oe=Oe.return}Le===Oe&&(Le=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:ua(d,l),Ba(l),x&4&&oS(l);break;case 21:break;default:ua(d,l),Ba(l)}}function Ba(l){var d=l.flags;if(d&2){try{e:{for(var m=l.return;m!==null;){if(rS(m)){var x=m;break e}m=m.return}throw Error(n(160))}switch(x.tag){case 5:var A=x.stateNode;x.flags&32&&(ns(A,""),x.flags&=-33);var $=iS(l);Hy(l,$,A);break;case 3:case 4:var U=x.stateNode.containerInfo,ee=iS(l);zy(l,ee,U);break;default:throw Error(n(161))}}catch(ae){mn(l,l.return,ae)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function XL(l,d,m){at=l,cS(l)}function cS(l,d,m){for(var x=(l.mode&1)!==0;at!==null;){var A=at,$=A.child;if(A.tag===22&&x){var U=A.memoizedState!==null||yg;if(!U){var ee=A.alternate,ae=ee!==null&&ee.memoizedState!==null||kr;ee=yg;var we=kr;if(yg=U,(kr=ae)&&!we)for(at=A;at!==null;)U=at,ae=U.child,U.tag===22&&U.memoizedState!==null?hS(A):ae!==null?(ae.return=U,at=ae):hS(A);for(;$!==null;)at=$,cS($),$=$.sibling;at=A,yg=ee,kr=we}dS(l)}else(A.subtreeFlags&8772)!==0&&$!==null?($.return=A,at=$):dS(l)}}function dS(l){for(;at!==null;){var d=at;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:kr||bg(5,d);break;case 1:var x=d.stateNode;if(d.flags&4&&!kr)if(m===null)x.componentDidMount();else{var A=d.elementType===d.type?m.memoizedProps:ca(d.type,m.memoizedProps);x.componentDidUpdate(A,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&u2(d,$,x);break;case 3:var U=d.updateQueue;if(U!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}u2(d,U,m)}break;case 5:var ee=d.stateNode;if(m===null&&d.flags&4){m=ee;var ae=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&m.focus();break;case"img":ae.src&&(m.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var we=d.alternate;if(we!==null){var Le=we.memoizedState;if(Le!==null){var Oe=Le.dehydrated;Oe!==null&&ia(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}kr||d.flags&512&&Gy(d)}catch(Pe){mn(d,d.return,Pe)}}if(d===l){at=null;break}if(m=d.sibling,m!==null){m.return=d.return,at=m;break}at=d.return}}function uS(l){for(;at!==null;){var d=at;if(d===l){at=null;break}var m=d.sibling;if(m!==null){m.return=d.return,at=m;break}at=d.return}}function hS(l){for(;at!==null;){var d=at;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{bg(4,d)}catch(ae){mn(d,m,ae)}break;case 1:var x=d.stateNode;if(typeof x.componentDidMount=="function"){var A=d.return;try{x.componentDidMount()}catch(ae){mn(d,A,ae)}}var $=d.return;try{Gy(d)}catch(ae){mn(d,$,ae)}break;case 5:var U=d.return;try{Gy(d)}catch(ae){mn(d,U,ae)}}}catch(ae){mn(d,d.return,ae)}if(d===l){at=null;break}var ee=d.sibling;if(ee!==null){ee.return=d.return,at=ee;break}at=d.return}}var JL=Math.ceil,_g=v.ReactCurrentDispatcher,Wy=v.ReactCurrentOwner,zi=v.ReactCurrentBatchConfig,xs=0,Qn=null,Rn=null,ur=0,Ni=0,Hd=ol(0),zn=0,Th=null,vc=0,wg=0,Ky=0,Ih=null,ii=null,qy=0,Wd=1/0,vo=null,jg=!1,Qy=null,pl=null,Sg=!1,ml=null,Ng=0,Ah=0,Yy=null,kg=-1,Cg=0;function Br(){return(xs&6)!==0?Ds():kg!==-1?kg:kg=Ds()}function gl(l){return(l.mode&1)===0?1:(xs&2)!==0&&ur!==0?ur&-ur:DL.transition!==null?(Cg===0&&(Cg=ic()),Cg):(l=us,l!==0||(l=window.event,l=l===void 0?16:rh(l.type)),l)}function ha(l,d,m,x){if(50<Ah)throw Ah=0,Yy=null,Error(n(185));Zo(l,m,x),((xs&2)===0||l!==Qn)&&(l===Qn&&((xs&2)===0&&(wg|=m),zn===4&&fl(l,ur)),ai(l,x),m===1&&xs===0&&(d.mode&1)===0&&(Wd=Ds()+500,tg&&cl()))}function ai(l,d){var m=l.callbackNode;ro(l,d);var x=rc(l,l===Qn?ur:0);if(x===0)m!==null&&Yo(m),l.callbackNode=null,l.callbackPriority=0;else if(d=x&-x,l.callbackPriority!==d){if(m!=null&&Yo(m),d===1)l.tag===0?LL(mS.bind(null,l)):Zj(mS.bind(null,l)),AL(function(){(xs&6)===0&&cl()}),m=null;else{switch(tl(x)){case 1:m=Ia;break;case 4:m=ta;break;case 16:m=Lr;break;case 536870912:m=Cm;break;default:m=Lr}m=wS(m,pS.bind(null,l))}l.callbackPriority=d,l.callbackNode=m}}function pS(l,d){if(kg=-1,Cg=0,(xs&6)!==0)throw Error(n(327));var m=l.callbackNode;if(Kd()&&l.callbackNode!==m)return null;var x=rc(l,l===Qn?ur:0);if(x===0)return null;if((x&30)!==0||(x&l.expiredLanes)!==0||d)d=Tg(l,x);else{d=x;var A=xs;xs|=2;var $=fS();(Qn!==l||ur!==d)&&(vo=null,Wd=Ds()+500,yc(l,d));do try{t6();break}catch(ee){gS(l,ee)}while(!0);my(),_g.current=$,xs=A,Rn!==null?d=0:(Qn=null,ur=0,d=zn)}if(d!==0){if(d===2&&(A=bi(l),A!==0&&(x=A,d=Xy(l,A))),d===1)throw m=Th,yc(l,0),fl(l,x),ai(l,Ds()),m;if(d===6)fl(l,x);else{if(A=l.current.alternate,(x&30)===0&&!ZL(A)&&(d=Tg(l,x),d===2&&($=bi(l),$!==0&&(x=$,d=Xy(l,$))),d===1))throw m=Th,yc(l,0),fl(l,x),ai(l,Ds()),m;switch(l.finishedWork=A,l.finishedLanes=x,d){case 0:case 1:throw Error(n(345));case 2:bc(l,ii,vo);break;case 3:if(fl(l,x),(x&130023424)===x&&(d=qy+500-Ds(),10<d)){if(rc(l,0)!==0)break;if(A=l.suspendedLanes,(A&x)!==x){Br(),l.pingedLanes|=l.suspendedLanes&A;break}l.timeoutHandle=ny(bc.bind(null,l,ii,vo),d);break}bc(l,ii,vo);break;case 4:if(fl(l,x),(x&4194240)===x)break;for(d=l.eventTimes,A=-1;0<x;){var U=31-Dr(x);$=1<<U,U=d[U],U>A&&(A=U),x&=~$}if(x=A,x=Ds()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*JL(x/1960))-x,10<x){l.timeoutHandle=ny(bc.bind(null,l,ii,vo),x);break}bc(l,ii,vo);break;case 5:bc(l,ii,vo);break;default:throw Error(n(329))}}}return ai(l,Ds()),l.callbackNode===m?pS.bind(null,l):null}function Xy(l,d){var m=Ih;return l.current.memoizedState.isDehydrated&&(yc(l,d).flags|=256),l=Tg(l,d),l!==2&&(d=ii,ii=m,d!==null&&Jy(d)),l}function Jy(l){ii===null?ii=l:ii.push.apply(ii,l)}function ZL(l){for(var d=l;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var A=m[x],$=A.getSnapshot;A=A.value;try{if(!oa($(),A))return!1}catch(U){return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function fl(l,d){for(d&=~Ky,d&=~wg,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var m=31-Dr(d),x=1<<m;l[m]=-1,d&=~x}}function mS(l){if((xs&6)!==0)throw Error(n(327));Kd();var d=rc(l,0);if((d&1)===0)return ai(l,Ds()),null;var m=Tg(l,d);if(l.tag!==0&&m===2){var x=bi(l);x!==0&&(d=x,m=Xy(l,x))}if(m===1)throw m=Th,yc(l,0),fl(l,d),ai(l,Ds()),m;if(m===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,bc(l,ii,vo),ai(l,Ds()),null}function Zy(l,d){var m=xs;xs|=1;try{return l(d)}finally{xs=m,xs===0&&(Wd=Ds()+500,tg&&cl())}}function xc(l){ml!==null&&ml.tag===0&&(xs&6)===0&&Kd();var d=xs;xs|=1;var m=zi.transition,x=us;try{if(zi.transition=null,us=1,l)return l()}finally{us=x,zi.transition=m,xs=d,(xs&6)===0&&cl()}}function e0(){Ni=Hd.current,Ks(Hd)}function yc(l,d){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,IL(m)),Rn!==null)for(m=Rn.return;m!==null;){var x=m;switch(cy(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Zm();break;case 3:Ud(),Ks(si),Ks(jr),wy();break;case 5:by(x);break;case 4:Ud();break;case 13:Ks(an);break;case 19:Ks(an);break;case 10:gy(x.type._context);break;case 22:case 23:e0()}m=m.return}if(Qn=l,Rn=l=vl(l.current,null),ur=Ni=d,zn=0,Th=null,Ky=wg=vc=0,ii=Ih=null,mc!==null){for(d=0;d<mc.length;d++)if(m=mc[d],x=m.interleaved,x!==null){m.interleaved=null;var A=x.next,$=m.pending;if($!==null){var U=$.next;$.next=A,x.next=U}m.pending=x}mc=null}return l}function gS(l,d){do{var m=Rn;try{if(my(),ug.current=gg,hg){for(var x=on.memoizedState;x!==null;){var A=x.queue;A!==null&&(A.pending=null),x=x.next}hg=!1}if(fc=0,qn=Gn=on=null,wh=!1,jh=0,Wy.current=null,m===null||m.return===null){zn=1,Th=d,Rn=null;break}e:{var $=l,U=m.return,ee=m,ae=d;if(d=ur,ee.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var we=ae,Le=ee,Oe=Le.tag;if((Le.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var Pe=Le.alternate;Pe?(Le.updateQueue=Pe.updateQueue,Le.memoizedState=Pe.memoizedState,Le.lanes=Pe.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var it=O2(U);if(it!==null){it.flags&=-257,V2(it,U,ee,$,d),it.mode&1&&$2($,we,d),d=it,ae=we;var lt=d.updateQueue;if(lt===null){var dt=new Set;dt.add(ae),d.updateQueue=dt}else lt.add(ae);break e}else{if((d&1)===0){$2($,we,d),t0();break e}ae=Error(n(426))}}else if(Zs&&ee.mode&1){var jn=O2(U);if(jn!==null){(jn.flags&65536)===0&&(jn.flags|=256),V2(jn,U,ee,$,d),hy(Gd(ae,ee));break e}}$=ae=Gd(ae,ee),zn!==4&&(zn=2),Ih===null?Ih=[$]:Ih.push($),$=U;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var fe=F2($,ae,d);d2($,fe);break e;case 1:ee=ae;var le=$.type,ye=$.stateNode;if(($.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(pl===null||!pl.has(ye)))){$.flags|=65536,d&=-d,$.lanes|=d;var We=B2($,ee,d);d2($,We);break e}}$=$.return}while($!==null)}xS(m)}catch(gt){d=gt,Rn===m&&m!==null&&(Rn=m=m.return);continue}break}while(!0)}function fS(){var l=_g.current;return _g.current=gg,l===null?gg:l}function t0(){(zn===0||zn===3||zn===2)&&(zn=4),Qn===null||(vc&268435455)===0&&(wg&268435455)===0||fl(Qn,ur)}function Tg(l,d){var m=xs;xs|=2;var x=fS();(Qn!==l||ur!==d)&&(vo=null,yc(l,d));do try{e6();break}catch(A){gS(l,A)}while(!0);if(my(),xs=m,_g.current=x,Rn!==null)throw Error(n(261));return Qn=null,ur=0,zn}function e6(){for(;Rn!==null;)vS(Rn)}function t6(){for(;Rn!==null&&!tc();)vS(Rn)}function vS(l){var d=_S(l.alternate,l,Ni);l.memoizedProps=l.pendingProps,d===null?xS(l):Rn=d,Wy.current=null}function xS(l){var d=l;do{var m=d.alternate;if(l=d.return,(d.flags&32768)===0){if(m=KL(m,d,Ni),m!==null){Rn=m;return}}else{if(m=qL(m,d),m!==null){m.flags&=32767,Rn=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{zn=6,Rn=null;return}}if(d=d.sibling,d!==null){Rn=d;return}Rn=d=l}while(d!==null);zn===0&&(zn=5)}function bc(l,d,m){var x=us,A=zi.transition;try{zi.transition=null,us=1,s6(l,d,m,x)}finally{zi.transition=A,us=x}return null}function s6(l,d,m,x){do Kd();while(ml!==null);if((xs&6)!==0)throw Error(n(327));m=l.finishedWork;var A=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var $=m.lanes|m.childLanes;if(Os(l,$),l===Qn&&(Rn=Qn=null,ur=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Sg||(Sg=!0,wS(Lr,function(){return Kd(),null})),$=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||$){$=zi.transition,zi.transition=null;var U=us;us=1;var ee=xs;xs|=4,Wy.current=null,YL(l,m),lS(m,l),wL(ty),nl=!!ey,ty=ey=null,l.current=m,XL(m),md(),xs=ee,us=U,zi.transition=$}else l.current=m;if(Sg&&(Sg=!1,ml=l,Ng=A),$=l.pendingLanes,$===0&&(pl=null),Tm(m.stateNode),ai(l,Ds()),d!==null)for(x=l.onRecoverableError,m=0;m<d.length;m++)A=d[m],x(A.value,{componentStack:A.stack,digest:A.digest});if(jg)throw jg=!1,l=Qy,Qy=null,l;return(Ng&1)!==0&&l.tag!==0&&Kd(),$=l.pendingLanes,($&1)!==0?l===Yy?Ah++:(Ah=0,Yy=l):Ah=0,cl(),null}function Kd(){if(ml!==null){var l=tl(Ng),d=zi.transition,m=us;try{if(zi.transition=null,us=16>l?16:l,ml===null)var x=!1;else{if(l=ml,ml=null,Ng=0,(xs&6)!==0)throw Error(n(331));var A=xs;for(xs|=4,at=l.current;at!==null;){var $=at,U=$.child;if((at.flags&16)!==0){var ee=$.deletions;if(ee!==null){for(var ae=0;ae<ee.length;ae++){var we=ee[ae];for(at=we;at!==null;){var Le=at;switch(Le.tag){case 0:case 11:case 15:Ch(8,Le,$)}var Oe=Le.child;if(Oe!==null)Oe.return=Le,at=Oe;else for(;at!==null;){Le=at;var Pe=Le.sibling,it=Le.return;if(nS(Le),Le===we){at=null;break}if(Pe!==null){Pe.return=it,at=Pe;break}at=it}}}var lt=$.alternate;if(lt!==null){var dt=lt.child;if(dt!==null){lt.child=null;do{var jn=dt.sibling;dt.sibling=null,dt=jn}while(dt!==null)}}at=$}}if(($.subtreeFlags&2064)!==0&&U!==null)U.return=$,at=U;else e:for(;at!==null;){if($=at,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:Ch(9,$,$.return)}var fe=$.sibling;if(fe!==null){fe.return=$.return,at=fe;break e}at=$.return}}var le=l.current;for(at=le;at!==null;){U=at;var ye=U.child;if((U.subtreeFlags&2064)!==0&&ye!==null)ye.return=U,at=ye;else e:for(U=le;at!==null;){if(ee=at,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:bg(9,ee)}}catch(gt){mn(ee,ee.return,gt)}if(ee===U){at=null;break e}var We=ee.sibling;if(We!==null){We.return=ee.return,at=We;break e}at=ee.return}}if(xs=A,cl(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(nc,l)}catch(gt){}x=!0}return x}finally{us=m,zi.transition=d}}return!1}function yS(l,d,m){d=Gd(m,d),d=F2(l,d,1),l=ul(l,d,1),d=Br(),l!==null&&(Zo(l,1,d),ai(l,d))}function mn(l,d,m){if(l.tag===3)yS(l,l,m);else for(;d!==null;){if(d.tag===3){yS(d,l,m);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(pl===null||!pl.has(x))){l=Gd(m,l),l=B2(d,l,1),d=ul(d,l,1),l=Br(),d!==null&&(Zo(d,1,l),ai(d,l));break}}d=d.return}}function n6(l,d,m){var x=l.pingCache;x!==null&&x.delete(d),d=Br(),l.pingedLanes|=l.suspendedLanes&m,Qn===l&&(ur&m)===m&&(zn===4||zn===3&&(ur&130023424)===ur&&500>Ds()-qy?yc(l,0):Ky|=m),ai(l,d)}function bS(l,d){d===0&&((l.mode&1)===0?d=1:(d=fd,fd<<=1,(fd&130023424)===0&&(fd=4194304)));var m=Br();l=mo(l,d),l!==null&&(Zo(l,d,m),ai(l,m))}function r6(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),bS(l,m)}function i6(l,d){var m=0;switch(l.tag){case 13:var x=l.stateNode,A=l.memoizedState;A!==null&&(m=A.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(d),bS(l,m)}var _S;_S=function(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps||si.current)ri=!0;else{if((l.lanes&m)===0&&(d.flags&128)===0)return ri=!1,WL(l,d,m);ri=(l.flags&131072)!==0}else ri=!1,Zs&&(d.flags&1048576)!==0&&e2(d,ng,d.index);switch(d.lanes=0,d.tag){case 2:var x=d.type;xg(l,d),l=d.pendingProps;var A=Dd(d,jr.current);Vd(d,m),A=Ny(null,d,x,l,A,m);var $=ky();return d.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ni(x)?($=!0,eg(d)):$=!1,d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,xy(d),A.updater=fg,d.stateNode=A,A._reactInternals=d,Ry(d,x,l,m),d=My(null,d,x,!0,$,m)):(d.tag=0,Zs&&$&&ly(d),Fr(null,d,A,m),d=d.child),d;case 16:x=d.elementType;e:{switch(xg(l,d),l=d.pendingProps,A=x._init,x=A(x._payload),d.type=x,A=d.tag=o6(x),l=ca(x,l),A){case 0:d=Dy(null,d,x,l,m);break e;case 1:d=K2(null,d,x,l,m);break e;case 11:d=U2(null,d,x,l,m);break e;case 14:d=G2(null,d,x,ca(x.type,l),m);break e}throw Error(n(306,x,""))}return d;case 0:return x=d.type,A=d.pendingProps,A=d.elementType===x?A:ca(x,A),Dy(l,d,x,A,m);case 1:return x=d.type,A=d.pendingProps,A=d.elementType===x?A:ca(x,A),K2(l,d,x,A,m);case 3:e:{if(q2(d),l===null)throw Error(n(387));x=d.pendingProps,$=d.memoizedState,A=$.element,c2(l,d),cg(d,x,null,m);var U=d.memoizedState;if(x=U.element,$.isDehydrated)if($={element:x,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){A=Gd(Error(n(423)),d),d=Q2(l,d,x,m,A);break e}else if(x!==A){A=Gd(Error(n(424)),d),d=Q2(l,d,x,m,A);break e}else for(Si=al(d.stateNode.containerInfo.firstChild),ji=d,Zs=!0,la=null,m=o2(d,null,x,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Bd(),x===A){d=fo(l,d,m);break e}Fr(l,d,x,m)}d=d.child}return d;case 5:return h2(d),l===null&&uy(d),x=d.type,A=d.pendingProps,$=l!==null?l.memoizedProps:null,U=A.children,sy(x,A)?U=null:$!==null&&sy(x,$)&&(d.flags|=32),W2(l,d),Fr(l,d,U,m),d.child;case 6:return l===null&&uy(d),null;case 13:return Y2(l,d,m);case 4:return yy(d,d.stateNode.containerInfo),x=d.pendingProps,l===null?d.child=$d(d,null,x,m):Fr(l,d,x,m),d.child;case 11:return x=d.type,A=d.pendingProps,A=d.elementType===x?A:ca(x,A),U2(l,d,x,A,m);case 7:return Fr(l,d,d.pendingProps,m),d.child;case 8:return Fr(l,d,d.pendingProps.children,m),d.child;case 12:return Fr(l,d,d.pendingProps.children,m),d.child;case 10:e:{if(x=d.type._context,A=d.pendingProps,$=d.memoizedProps,U=A.value,Us(ag,x._currentValue),x._currentValue=U,$!==null)if(oa($.value,U)){if($.children===A.children&&!si.current){d=fo(l,d,m);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var ee=$.dependencies;if(ee!==null){U=$.child;for(var ae=ee.firstContext;ae!==null;){if(ae.context===x){if($.tag===1){ae=go(-1,m&-m),ae.tag=2;var we=$.updateQueue;if(we!==null){we=we.shared;var Le=we.pending;Le===null?ae.next=ae:(ae.next=Le.next,Le.next=ae),we.pending=ae}}$.lanes|=m,ae=$.alternate,ae!==null&&(ae.lanes|=m),fy($.return,m,d),ee.lanes|=m;break}ae=ae.next}}else if($.tag===10)U=$.type===d.type?null:$.child;else if($.tag===18){if(U=$.return,U===null)throw Error(n(341));U.lanes|=m,ee=U.alternate,ee!==null&&(ee.lanes|=m),fy(U,m,d),U=$.sibling}else U=$.child;if(U!==null)U.return=$;else for(U=$;U!==null;){if(U===d){U=null;break}if($=U.sibling,$!==null){$.return=U.return,U=$;break}U=U.return}$=U}Fr(l,d,A.children,m),d=d.child}return d;case 9:return A=d.type,x=d.pendingProps.children,Vd(d,m),A=Ui(A),x=x(A),d.flags|=1,Fr(l,d,x,m),d.child;case 14:return x=d.type,A=ca(x,d.pendingProps),A=ca(x.type,A),G2(l,d,x,A,m);case 15:return z2(l,d,d.type,d.pendingProps,m);case 17:return x=d.type,A=d.pendingProps,A=d.elementType===x?A:ca(x,A),xg(l,d),d.tag=1,ni(x)?(l=!0,eg(d)):l=!1,Vd(d,m),D2(d,x,A),Ry(d,x,A,m),My(null,d,x,!0,l,m);case 19:return J2(l,d,m);case 22:return H2(l,d,m)}throw Error(n(156,d.tag))};function wS(l,d){return no(l,d)}function a6(l,d,m,x){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(l,d,m,x){return new a6(l,d,m,x)}function s0(l){return l=l.prototype,!(!l||!l.isReactComponent)}function o6(l){if(typeof l=="function")return s0(l)?1:0;if(l!=null){if(l=l.$$typeof,l===D)return 11;if(l===z)return 14}return 2}function vl(l,d){var m=l.alternate;return m===null?(m=Hi(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Ig(l,d,m,x,A,$){var U=2;if(x=l,typeof l=="function")s0(l)&&(U=1);else if(typeof l=="string")U=5;else e:switch(l){case j:return _c(m.children,A,$,d);case S:U=8,A|=8;break;case C:return l=Hi(12,m,d,A|2),l.elementType=C,l.lanes=$,l;case F:return l=Hi(13,m,d,A),l.elementType=F,l.lanes=$,l;case V:return l=Hi(19,m,d,A),l.elementType=V,l.lanes=$,l;case H:return Ag(m,A,$,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:U=10;break e;case T:U=9;break e;case D:U=11;break e;case z:U=14;break e;case q:U=16,x=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return d=Hi(U,m,d,A),d.elementType=l,d.type=x,d.lanes=$,d}function _c(l,d,m,x){return l=Hi(7,l,x,d),l.lanes=m,l}function Ag(l,d,m,x){return l=Hi(22,l,x,d),l.elementType=H,l.lanes=m,l.stateNode={isHidden:!1},l}function n0(l,d,m){return l=Hi(6,l,null,d),l.lanes=m,l}function r0(l,d,m){return d=Hi(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function l6(l,d,m,x,A){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=x,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function i0(l,d,m,x,A,$,U,ee,ae){return l=new l6(l,d,m,ee,ae),d===1?(d=1,$===!0&&(d|=8)):d=0,$=Hi(3,null,null,d),l.current=$,$.stateNode=l,$.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},xy($),l}function c6(l,d,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:x==null?null:""+x,children:l,containerInfo:d,implementation:m}}function jS(l){if(!l)return ll;l=l._reactInternals;e:{if(es(l)!==l||l.tag!==1)throw Error(n(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ni(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(l.tag===1){var m=l.type;if(ni(m))return Xj(l,m,d)}return d}function SS(l,d,m,x,A,$,U,ee,ae){return l=i0(m,x,!0,l,A,$,U,ee,ae),l.context=jS(null),m=l.current,x=Br(),A=gl(m),$=go(x,A),$.callback=d!=null?d:null,ul(m,$,A),l.current.lanes=A,Zo(l,A,x),ai(l,x),l}function Eg(l,d,m,x){var A=d.current,$=Br(),U=gl(A);return m=jS(m),d.context===null?d.context=m:d.pendingContext=m,d=go($,U),d.payload={element:l},x=x===void 0?null:x,x!==null&&(d.callback=x),l=ul(A,d,U),l!==null&&(ha(l,A,U,$),lg(l,A,U)),U}function Rg(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function NS(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function a0(l,d){NS(l,d),(l=l.alternate)&&NS(l,d)}function d6(){return null}var kS=typeof reportError=="function"?reportError:function(l){console.error(l)};function o0(l){this._internalRoot=l}Pg.prototype.render=o0.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));Eg(l,d,null,null)},Pg.prototype.unmount=o0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;xc(function(){Eg(null,l,null,null)}),d[co]=null}};function Pg(l){this._internalRoot=l}Pg.prototype.unstable_scheduleHydration=function(l){if(l){var d=Pm();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Ea.length&&d!==0&&d<Ea[m].priority;m++);Ea.splice(m,0,l),m===0&&Mm(l)}};function l0(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Lg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function CS(){}function u6(l,d,m,x,A){if(A){if(typeof x=="function"){var $=x;x=function(){var we=Rg(U);$.call(we)}}var U=SS(d,x,l,0,null,!1,!1,"",CS);return l._reactRootContainer=U,l[co]=U.current,mh(l.nodeType===8?l.parentNode:l),xc(),U}for(;A=l.lastChild;)l.removeChild(A);if(typeof x=="function"){var ee=x;x=function(){var we=Rg(ae);ee.call(we)}}var ae=i0(l,0,!1,null,null,!1,!1,"",CS);return l._reactRootContainer=ae,l[co]=ae.current,mh(l.nodeType===8?l.parentNode:l),xc(function(){Eg(d,ae,m,x)}),ae}function Dg(l,d,m,x,A){var $=m._reactRootContainer;if($){var U=$;if(typeof A=="function"){var ee=A;A=function(){var ae=Rg(U);ee.call(ae)}}Eg(d,U,l,A)}else U=u6(m,d,l,A,x);return Rg(U)}Em=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var m=Xo(d.pendingLanes);m!==0&&(el(d,m|1),ai(d,Ds()),(xs&6)===0&&(Wd=Ds()+500,cl()))}break;case 13:xc(function(){var x=mo(l,1);if(x!==null){var A=Br();ha(x,l,1,A)}}),a0(l,1)}},vd=function(l){if(l.tag===13){var d=mo(l,134217728);if(d!==null){var m=Br();ha(d,l,134217728,m)}a0(l,134217728)}},Rm=function(l){if(l.tag===13){var d=gl(l),m=mo(l,d);if(m!==null){var x=Br();ha(m,l,d,x)}a0(l,d)}},Pm=function(){return us},Lm=function(l,d){var m=us;try{return us=l,d()}finally{us=m}},tt=function(l,d,m){switch(d){case"input":if(Ie(l,m),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var x=m[d];if(x!==l&&x.form===l.form){var A=Jm(x);if(!A)throw Error(n(90));ce(x),Ie(x,A)}}}break;case"textarea":ht(l,m);break;case"select":d=m.value,d!=null&&Be(l,!!m.multiple,d,!1)}},_n=Zy,Vn=xc;var h6={usingClientEntryPoint:!1,Events:[vh,Pd,Jm,as,os,Zy]},Eh={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p6={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Qo(l),l===null?null:l.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||d6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{nc=Mg.inject(p6),yi=Mg}catch(l){}}return oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h6,oi.createPortal=function(l,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(d))throw Error(n(200));return c6(l,d,null,m)},oi.createRoot=function(l,d){if(!l0(l))throw Error(n(299));var m=!1,x="",A=kS;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),d=i0(l,1,!1,null,null,m,!1,x,A),l[co]=d.current,mh(l.nodeType===8?l.parentNode:l),new o0(d)},oi.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Qo(d),l=l===null?null:l.stateNode,l},oi.flushSync=function(l){return xc(l)},oi.hydrate=function(l,d,m){if(!Lg(d))throw Error(n(200));return Dg(null,l,d,!0,m)},oi.hydrateRoot=function(l,d,m){if(!l0(l))throw Error(n(405));var x=m!=null&&m.hydratedSources||null,A=!1,$="",U=kS;if(m!=null&&(m.unstable_strictMode===!0&&(A=!0),m.identifierPrefix!==void 0&&($=m.identifierPrefix),m.onRecoverableError!==void 0&&(U=m.onRecoverableError)),d=SS(d,null,l,1,m!=null?m:null,A,!1,$,U),l[co]=d.current,mh(l),x)for(l=0;l<x.length;l++)m=x[l],A=m._getVersion,A=A(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,A]:d.mutableSourceEagerHydrationData.push(m,A);return new Pg(d)},oi.render=function(l,d,m){if(!Lg(d))throw Error(n(200));return Dg(null,l,d,!1,m)},oi.unmountComponentAtNode=function(l){if(!Lg(l))throw Error(n(40));return l._reactRootContainer?(xc(function(){Dg(null,null,l,!1,function(){l._reactRootContainer=null,l[co]=null})}),!0):!1},oi.unstable_batchedUpdates=Zy,oi.unstable_renderSubtreeIntoContainer=function(l,d,m,x){if(!Lg(m))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Dg(l,d,m,!1,x)},oi.version="18.3.1-next-f1338f8080-20240426",oi}var DS;function g3(){if(DS)return u0.exports;DS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),u0.exports=b6(),u0.exports}var MS;function _6(){if(MS)return Fg;MS=1;var t=g3();return Fg.createRoot=t.createRoot,Fg.hydrateRoot=t.hydrateRoot,Fg}var w6=_6();const j6=i_(w6),Ot=t=>typeof t=="string",Ph=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},FS=t=>t==null?"":""+t,S6=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},N6=/###/g,BS=t=>t&&t.indexOf("###")>-1?t.replace(N6,"."):t,$S=t=>!t||Ot(t),ip=(t,e,n)=>{const r=Ot(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if($S(t))return{};const a=BS(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return $S(t)?{}:{obj:t,k:BS(r[i])}},OS=(t,e,n)=>{const{obj:r,k:i}=ip(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],o=e.slice(0,e.length-1),c=ip(t,o,Object);for(;c.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),c=ip(t,o,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${a}`]!="undefined"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=n},k6=(t,e,n,r)=>{const{obj:i,k:a}=ip(t,e,Object);i[a]=i[a]||[],i[a].push(n)},Yf=(t,e)=>{const{obj:n,k:r}=ip(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},C6=(t,e,n)=>{const r=Yf(t,n);return r!==void 0?r:Yf(e,n)},f3=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Ot(t[r])||t[r]instanceof String||Ot(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):f3(t[r],e[r],n):t[r]=e[r]);return t},qd=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var T6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const I6=t=>Ot(t)?t.replace(/[&<>"'\/]/g,e=>T6[e]):t;class A6{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const E6=[" ",",","?","!",";"],R6=new A6(20),P6=(t,e,n)=>{e=e||"",n=n||"";const r=E6.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=R6.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(t);if(!a){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a},Yb=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,c="";for(let u=a;u<r.length;++u)if(u!==a&&(c+=n),c+=r[u],o=i[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=o}return i},Np=t=>t==null?void 0:t.replace("_","-"),L6={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};let D6=class Xb{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||L6,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Ot(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Xb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Xb(this.logger,e)}};var Ga=new D6;class Kv{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...n])})}}class VS extends Kv{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var h,p;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],r&&(Array.isArray(r)?c.push(...r):Ot(r)&&a?c.push(...r.split(a)):c.push(r)));const u=Yf(this.data,c);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=c[0],n=c[1],r=c.slice(2).join(".")),u||!o||!Ot(r)?u:Yb((p=(h=this.data)==null?void 0:h[e])==null?void 0:p[n],r,a)}addResource(e,n,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,n];r&&(c=c.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(c=e.split("."),i=n,n=c[1]),this.addNamespaces(n),OS(this.data,c,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const a in r)(Ot(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a,o={silent:!1,skipCopy:!1}){let c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),i=r,r=n,n=c[1]),this.addNamespaces(n);let u=Yf(this.data,c)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?f3(u,r,a):u={...u,...r},OS(this.data,c,u),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var v3={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{var o,c;e=(c=(o=this.processors[a])==null?void 0:o.process(e,n,r,i))!=null?c:e}),e}};const x3=Symbol("i18next/PATH_KEY");function M6(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var a;return(a=n==null?void 0:n.revoke)==null||a.call(n),i===x3?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Jb(t,e){var r;const{[x3]:n}=t(M6());return n.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const US={},GS=t=>!Ot(t)&&typeof t!="boolean"&&typeof t!="number";class Xf extends Kv{constructor(e,n={}){super(),S6(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ga.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!P6(e,r,i);if(o&&!c){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:Ot(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Ot(a)?[a]:a}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Jb(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:c,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let p=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const g=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return y?a?{res:`${h}${p}${c}`,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${p}${c}`:a?{res:c,usedKey:c,exactUsedKey:c,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:c;const _=this.resolve(e,i);let w=_==null?void 0:_.res;const k=(_==null?void 0:_.usedKey)||c,E=(_==null?void 0:_.exactUsedKey)||c,P=["[object Number]","[object Function]","[object RegExp]"],L=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,v=i.count!==void 0&&!Ot(i.count),b=Xf.hasDefaultValue(i),I=v?this.pluralResolver.getSuffix(g,i.count,i):"",j=i.ordinal&&v?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",S=v&&!i.ordinal&&i.count===0,C=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${I}`]||i[`defaultValue${j}`]||i.defaultValue;let M=w;N&&!w&&b&&(M=C);const T=GS(M),D=Object.prototype.toString.apply(M);if(N&&M&&T&&P.indexOf(D)<0&&!(Ot(L)&&Array.isArray(M))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const F=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,M,{...i,ns:u}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(_.res=F,_.usedParams=this.getUsedParamsDetails(i),_):F}if(o){const F=Array.isArray(M),V=F?[]:{},z=F?E:k;for(const q in M)if(Object.prototype.hasOwnProperty.call(M,q)){const H=`${z}${o}${q}`;b&&!w?V[q]=this.translate(H,{...i,defaultValue:GS(C)?C[q]:void 0,joinArrays:!1,ns:u}):V[q]=this.translate(H,{...i,joinArrays:!1,ns:u}),V[q]===H&&(V[q]=M[q])}w=V}}else if(N&&Ot(L)&&Array.isArray(w))w=w.join(L),w&&(w=this.extendTranslation(w,e,i,r));else{let F=!1,V=!1;!this.isValidLookup(w)&&b&&(F=!0,w=C),this.isValidLookup(w)||(V=!0,w=c);const q=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:w,H=b&&C!==w&&this.options.updateMissing;if(V||F||H){if(this.logger.log(H?"updateKey":"missingKey",g,h,c,H?C:w),o){const G=this.resolve(c,{...i,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ne&&ne[0])for(let G=0;G<ne.length;G++)K.push(ne[G]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(i.lng||this.language):K.push(i.lng||this.language);const Y=(G,X,te)=>{var Z;const se=b&&te!==w?te:q;this.options.missingKeyHandler?this.options.missingKeyHandler(G,h,X,se,H,i):(Z=this.backendConnector)!=null&&Z.saveMissing&&this.backendConnector.saveMissing(G,h,X,se,H,i),this.emit("missingKey",G,h,X,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?K.forEach(G=>{const X=this.pluralResolver.getSuffixes(G,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(te=>{Y([G],c+te,i[`defaultValue${te}`]||C)})}):Y(K,c,C))}w=this.extendTranslation(w,e,i,_,r),V&&w===c&&this.options.appendNamespaceToMissingKey&&(w=`${h}${p}${c}`),(V||F)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${c}`:c,F?w:void 0,i))}return a?(_.res=w,_.usedParams=this.getUsedParamsDetails(i),_):w}extendTranslation(e,n,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=Ot(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const _=e.match(this.interpolator.nestingRegexp);g=_&&_.length}let y=r.replace&&!Ot(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,r.lng||this.language||i.usedLng,r),p){const _=e.match(this.interpolator.nestingRegexp),w=_&&_.length;g<w&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(..._)=>(a==null?void 0:a[0])===_[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${n[0]}`),null):this.translate(..._,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,c=Ot(o)?[o]:o;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=v3.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,a,o,c;return Ot(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,n),p=h.key;i=p;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=n.count!==void 0&&!Ot(n.count),_=y&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(Ot(n.context)||typeof n.context=="number")&&n.context!=="",k=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(E=>{var P,L;this.isValidLookup(r)||(c=E,!US[`${k[0]}-${E}`]&&((P=this.utils)!=null&&P.hasLoadedNamespace)&&!((L=this.utils)!=null&&L.hasLoadedNamespace(c))&&(US[`${k[0]}-${E}`]=!0,this.logger.warn(`key "${i}" for languages "${k.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(N=>{var I;if(this.isValidLookup(r))return;o=N;const v=[p];if((I=this.i18nFormat)!=null&&I.addLookupKeys)this.i18nFormat.addLookupKeys(v,p,N,E,n);else{let j;y&&(j=this.pluralResolver.getSuffix(N,n.count,n));const S=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(n.ordinal&&j.indexOf(C)===0&&v.push(p+j.replace(C,this.options.pluralSeparator)),v.push(p+j),_&&v.push(p+S)),w){const M=`${p}${this.options.contextSeparator||"_"}${n.context}`;v.push(M),y&&(n.ordinal&&j.indexOf(C)===0&&v.push(M+j.replace(C,this.options.pluralSeparator)),v.push(M+j),_&&v.push(M+S))}}let b;for(;b=v.pop();)this.isValidLookup(r)||(a=b,r=this.getResource(N,E,b,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ot(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class zS{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ga.create("languageUtils")}getScriptPartFromCode(e){if(e=Np(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Np(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ot(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch(r){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ot(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ot(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Ot(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const HS={zero:0,one:1,two:2,few:3,many:4,other:5},WS={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class F6{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Ga.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Np(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(c){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),WS;if(!e.match(/-|_/))return WS;const u=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(u,n)}return this.pluralRulesCache[a]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>HS[i]-HS[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const KS=(t,e,n,r=".",i=!0)=>{let a=C6(t,e,n);return!a&&i&&Ot(n)&&(a=Yb(t,n,r),a===void 0&&(a=Yb(e,n,r))),a},m0=t=>t.replace(/\$/g,"$$$$");class B6{constructor(e={}){var n;this.logger=Ga.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:c,suffixEscaped:u,formatSeparator:h,unescapeSuffix:p,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:_,nestingSuffix:w,nestingSuffixEscaped:k,nestingOptionsSeparator:E,maxReplaces:P,alwaysFormat:L}=e.interpolation;this.escape=n!==void 0?n:I6,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?qd(a):o||"{{",this.suffix=c?qd(c):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?qd(y):_||qd("$t("),this.nestingSuffix=w?qd(w):k||qd(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=P||1e3,this.alwaysFormat=L!==void 0?L:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var _;let a,o,c;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=w=>{if(w.indexOf(this.formatSeparator)<0){const L=KS(n,u,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...n,interpolationkey:w}):L}const k=w.split(this.formatSeparator),E=k.shift().trim(),P=k.join(this.formatSeparator).trim();return this.format(KS(n,u,E,this.options.keySeparator,this.options.ignoreJSONStructure),P,r,{...i,...n,interpolationkey:E})};this.resetRegExp();const p=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((_=i==null?void 0:i.interpolation)==null?void 0:_.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>m0(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?m0(this.escape(w)):m0(w)}].forEach(w=>{for(c=0;a=w.regex.exec(e);){const k=a[1].trim();if(o=h(k),o===void 0)if(typeof p=="function"){const P=p(e,a,i);o=Ot(P)?P:""}else if(i&&Object.prototype.hasOwnProperty.call(i,k))o="";else if(g){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${k} for interpolating ${e}`),o="";else!Ot(o)&&!this.useRawValueToEscape&&(o=FS(o));const E=w.safeValue(o);if(e=e.replace(a[0],E),g?(w.regex.lastIndex+=o.length,w.regex.lastIndex-=a[0].length):w.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,a,o;const c=(u,h)=>{var k;const p=this.nestingOptionsSeparator;if(u.indexOf(p)<0)return u;const g=u.split(new RegExp(`${p}[ ]*{`));let y=`{${g[1]}`;u=g[0],y=this.interpolate(y,o);const _=y.match(/'/g),w=y.match(/"/g);(((k=_==null?void 0:_.length)!=null?k:0)%2===0&&!w||w.length%2!==0)&&(y=y.replace(/'/g,'"'));try{o=JSON.parse(y),h&&(o={...h,...o})}catch(E){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,E),`${u}${p}${y}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];o={...r},o=o.replace&&!Ot(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=n(c.call(this,i[1].trim(),o),o),a&&i[0]===e&&!Ot(a))return a;Ot(a)||(a=FS(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((p,g)=>this.format(p,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const $6=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[c,...u]=o.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),p=c.trim();n[p]||(n[p]=h),h==="false"&&(n[p]=!1),h==="true"&&(n[p]=!0),isNaN(h)||(n[p]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},qS=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let c=e[o];return c||(c=t(Np(r),i),e[o]=c),c(n)}},O6=t=>(e,n,r)=>t(Np(n),r)(e);class V6{constructor(e={}){this.logger=Ga.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?qS:O6;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return c=>o.format(c)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return c=>o.format(c)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return c=>o.format(c)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return c=>o.format(c,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return c=>o.format(c)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=qS(n)}format(e,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,u)=>{var g;const{formatName:h,formatOptions:p}=$6(u);if(this.formats[h]){let y=c;try{const _=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},w=_.locale||_.lng||i.locale||i.lng||r;y=this.formats[h](c,w,{...p,...i,..._})}catch(_){this.logger.warn(_)}return y}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const U6=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class G6 extends Kv{constructor(e,n,r,i={}){var a,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Ga.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(a=this.backend)==null?void 0:a.init)==null||o.call(a,r,i.backend,i)}queueLoad(e,n,r,i){const a={},o={},c={},u={};return e.forEach(h=>{let p=!0;n.forEach(g=>{const y=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?o[y]===void 0&&(o[y]=!0):(this.state[y]=1,p=!1,o[y]===void 0&&(o[y]=!0),a[y]===void 0&&(a[y]=!0),u[g]===void 0&&(u[g]=!0)))}),p||(c[h]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){const i=e.split("|"),a=i[0],o=i[1];n&&this.emit("failedLoading",a,o,n),!n&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const c={};this.queue.forEach(u=>{k6(u.loaded,[a],o),U6(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{c[h]||(c[h]={});const p=u.loaded[h];p.length&&p.forEach(g=>{c[h][g]===void 0&&(c[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const c=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&p&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,o)},a);return}o(h,p)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,n);h&&typeof h.then=="function"?h.then(p=>c(null,p)).catch(c):c(null,h)}catch(h){c(h)}return}return u(e,n,c)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ot(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ot(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,o),!o&&c&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,c),this.loaded(e,o,c)})}saveMissing(e,n,r,i,a,o={},c=()=>{}){var u,h,p,g,y;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((y=this.backend)!=null&&y.create){const _={...o,isUpdate:a},w=this.backend.create.bind(this.backend);if(w.length<6)try{let k;w.length===5?k=w(e,n,r,i,_):k=w(e,n,r,i),k&&typeof k.then=="function"?k.then(E=>c(null,E)).catch(c):c(null,k)}catch(k){c(k)}else w(e,n,r,i,c,_)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const QS=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ot(t[1])&&(e.defaultValue=t[1]),Ot(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),YS=t=>{var e,n;return Ot(t.ns)&&(t.ns=[t.ns]),Ot(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ot(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Bg=()=>{},z6=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class kp extends Kv{constructor(e={},n){if(super(),this.options=YS(e),this.services={},this.logger=Ga,this.modules={external:[]},z6(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Ot(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=QS();this.options={...r,...this.options,...YS(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Ga.init(i(this.modules.logger),this.options):Ga.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=V6;const p=new zS(this.options);this.store=new VS(this.options.resources,this.options);const g=this.services;g.logger=Ga,g.resourceStore=this.store,g.languageUtils=p,g.pluralResolver=new F6(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new B6(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new G6(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(_,...w)=>{this.emit(_,...w)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Xf(this.services,this.options),this.translator.on("*",(_,...w)=>{this.emit(_,...w)}),this.modules.external.forEach(_=>{_.init&&_.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Bg),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const c=Ph(),u=()=>{const h=(p,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(g),n(p,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),c}loadResources(e,n=Bg){var a,o;let r=n;const i=Ot(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&c.indexOf(g)<0&&c.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>u(p)),(o=(a=this.options.preload)==null?void 0:a.forEach)==null||o.call(a,h=>u(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,n,r){const i=Ph();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Bg),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&v3.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Ph();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(c,(...h)=>this.t(...h))},o=c=>{var p,g;!e&&!c&&this.services.languageDetector&&(c=[]);const u=Ot(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Ot(c)?[c]:c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||g.call(p,h)),this.loadResources(h,y=>{a(y,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(a,o,...c)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([a,o].concat(c)):u={...o},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let p;return u.keyPrefix&&Array.isArray(a)?p=a.map(g=>(typeof g=="function"&&(g=Jb(g,{...this.options,...o})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=Jb(a,{...this.options,...o})),p=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(p,u)};return Ot(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(c,u)=>{const h=this.services.backendConnector.state[`${c}|${u}`];return h===-1||h===0||h===2};if(n.precheck){const c=n.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,n){const r=Ph();return this.options.ns?(Ot(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Ph();Ot(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const c=o.getTextInfo();if(c&&c.direction)return c.direction}}catch(o){}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new zS(QS());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new kp(e,n)}cloneInstance(e={},n=Bg){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new kp(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const c=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((p,g)=>(p[g]={...u[h][g]},p),u[h]),u),{});a.store=new VS(c,i),a.services.resourceStore=a.store}return a.translator=new Xf(a.services,i),a.translator.on("*",(c,...u)=>{a.emit(c,...u)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const An=kp.createInstance();An.createInstance=kp.createInstance;An.createInstance;An.dir;An.init;An.loadResources;An.reloadResources;An.use;An.changeLanguage;An.getFixedT;An.t;An.exists;An.setDefaultNamespace;An.hasLoadedNamespace;An.loadNamespaces;An.loadLanguages;const H6=(t,e,n,r)=>{var a,o,c,u;const i=[n,{code:e,...r||{}}];if((o=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Gc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(c=t==null?void 0:t.services)==null?void 0:c.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},XS={},Zb=(t,e,n,r)=>{Gc(n)&&XS[n]||(Gc(n)&&(XS[n]=new Date),H6(t,e,n,r))},y3=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},e1=(t,e,n)=>{t.loadNamespaces(e,y3(t,n))},JS=(t,e,n,r)=>{if(Gc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return e1(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,y3(t,r))},W6=(t,e,n={})=>!e.languages||!e.languages.length?(Zb(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Gc=t=>typeof t=="string",K6=t=>typeof t=="object"&&t!==null,q6=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Q6={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Y6=t=>Q6[t],X6=t=>t.replace(q6,Y6);let t1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:X6};const J6=(t={})=>{t1={...t1,...t}},Z6=()=>t1;let b3;const eD=t=>{b3=t},tD=()=>b3,sD={type:"3rdParty",init(t){J6(t.options.react),eD(t)}},nD=R.createContext();class rD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const iD=(t,e)=>{const n=R.useRef();return R.useEffect(()=>{n.current=t},[t,e]),n.current},_3=(t,e,n,r)=>t.getFixedT(e,n,r),aD=(t,e,n,r)=>R.useCallback(_3(t,e,n,r),[t,e,n,r]),Hs=(t,e={})=>{var v,b,I,j;const{i18n:n}=e,{i18n:r,defaultNS:i}=R.useContext(nD)||{},a=n||r||tD();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new rD),!a){Zb(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(M,T)=>Gc(T)?T:K6(T)&&Gc(T.defaultValue)?T.defaultValue:Array.isArray(M)?M[M.length-1]:M,C=[S,{},!1];return C.t=S,C.i18n={},C.ready=!1,C}(v=a.options.react)!=null&&v.wait&&Zb(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Z6(),...a.options.react,...e},{useSuspense:c,keyPrefix:u}=o;let h=i||((b=a.options)==null?void 0:b.defaultNS);h=Gc(h)?[h]:h||["translation"],(j=(I=a.reportNamespaces).addUsedNamespaces)==null||j.call(I,h);const p=(a.isInitialized||a.initializedStoreOnce)&&h.every(S=>W6(S,a,o)),g=aD(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),y=()=>g,_=()=>_3(a,e.lng||null,o.nsMode==="fallback"?h:h[0],u),[w,k]=R.useState(y);let E=h.join();e.lng&&(E=`${e.lng}${E}`);const P=iD(E),L=R.useRef(!0);R.useEffect(()=>{const{bindI18n:S,bindI18nStore:C}=o;L.current=!0,!p&&!c&&(e.lng?JS(a,e.lng,h,()=>{L.current&&k(_)}):e1(a,h,()=>{L.current&&k(_)})),p&&P&&P!==E&&L.current&&k(_);const M=()=>{L.current&&k(_)};return S&&(a==null||a.on(S,M)),C&&(a==null||a.store.on(C,M)),()=>{L.current=!1,a&&S&&(S==null||S.split(" ").forEach(T=>a.off(T,M))),C&&a&&C.split(" ").forEach(T=>a.store.off(T,M))}},[a,E]),R.useEffect(()=>{L.current&&p&&k(y)},[a,u,p]);const N=[w,a,p];if(N.t=w,N.i18n=a,N.ready=p,p||!p&&!c)return N;throw new Promise(S=>{e.lng?JS(a,e.lng,h,()=>S()):e1(a,h,()=>S())})},oD={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Settings"},lD={title:"Home",subtitle:"Welcome back",historybook:{title:"Historybook",credit:"Historybook - created by Resist 2 Exist & DonMuErte",logoAlt:"Historybook logo",coverAlt:"Historybook cover",open:"Open Historybook"},guidehub:{title:"GuideHub",subtitle:"Guides & calculators",logoAlt:"GuideHub logo",previewAlt:"GuideHub preview",open:"Open GuideHub"},sftools:{title:"SFTools",subtitle:"Tools & resources",previewAlt:"SFTools preview"},taverndiscord:{title:"Tavern Discord",subtitle:"Community Discord",previewAlt:"Tavern Discord preview"},news:{title:"Community news",empty:"No news yet.",emptyChannel:"No recent news in this channel.",openOnDiscord:"Open on Discord",prev:"Previous channel",next:"Next channel"},youtube:{title:"YouTube",prev:"Previous video",next:"Next video",empty:"No videos"},live:{title:"Live now",none:"Nobody is live right now.",open_on_twitch:"Open on Twitch",badge:"LIVE",viewers:"{{viewers}} viewers",prev:"Previous stream",next:"Next stream"},schedule:{open:"Show streaming schedule",title:"Streaming schedule",close:"Close",platform:"Platform",platformAll:"All",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Search",searchPlaceholder:"Streamer / Title",today:"Today only",columns:{weekday:"Weekday",start:"Start (UTC)",end:"End (UTC)",timezone:"Timezone",platform:"Platform",channel:"Channel URL",streamer:"Streamer",title:"Title"},empty:"No schedule yet.",link:"Link"}},cD={arenaManager:{amRuneBonuses:{description:"Complete overview of Arena Manager runes and their bonus values. Grouped by tier; max, achievements, and breakpoints are highlighted.",searchPlaceholder:"Search (e.g., thousand, E34, x60)...",table:{tier:"Tier",amount:"Amount",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Total Resistance",singleResistance:"Single Resistance",elementalDamage:"Elemental Damage",improvedItemQuality:"Improved Item Quality",chancesOfEpics:"Chances of Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Achievement",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Capitalist Achievement",stinkingrich:"Stinking Rich Achievement",runemaster:"Rune Master"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}}},dD={tiles:{overview:{title:"Server Overview",subtitle:"Fusion tree & active servers"}},overview:{pageTitle:"Server Overview",expandAll:"Expand all",collapseAll:"Collapse all"}},uD={tabs:{gamified:"Gamified",gamified2:"Gamified 2",gamified3:"Gamified 3"}},hD={connectedCharacters:{title:"Connected characters",empty:"No characters linked yet. Link a character in your account to see it here.",loginPrompt:"Sign in to see your linked characters.",ctaGuest:"Open start guide",ctaAuthed:"Open linked characters guide",chip:{server:"Server",class:"Class"}}},pD={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}},connectedCharacters:{title:"Connected characters",subtitle:"These game characters are linked to your SFDataHub account.",loading:"Refreshing characters...",empty:{title:"No characters linked yet",description:'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.',cta:"Click to learn how linking works"},actions:{refresh:"Refresh",refreshing:"Refreshing...",unlink:"Disconnect character"},confirmation:{title:"Are you sure you want to unlink this character?",cancel:"Cancel",confirm:"Yes, unlink",confirming:"Unlinking..."},errors:{serviceUnavailable:"Auth service is not configured for unlinking.",unlink:"Could not unlink character."},columns:{character:"Character",server:"Server",playerId:"Player ID",class:"Class",level:"Level",guild:"Guild",lastVerified:"Last linked",source:"Source",actions:"Actions"},method:{discord:"Discord bot"},help:{title:"How does linking work?",show:"Show",hide:"Hide",steps:{link:'Link a character via the Discord bot using the "!connect char" command.',verify:"We match the character to your latest verified scan; keep your game data up to date.",refresh:"After linking, click Refresh here to sync the latest characters from the auth service.",unlink:"You can unlink any character in the Actions column; the source column shows how it was linked."},footnote:"Tip: Click Refresh after linking or unlinking to update this table."}}},mD={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},gD={quickAccess:"Quick access",upload:"Upload scan",search:"Search /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},fD={errors:{noSnapshot:"No snapshot yet for this server."}},vD={compareMonth:"Progress since",compareOff:"Off",compareMissingSnapshot:"No snapshot found for this month.",deltaNew:"NEW",filters:{guilds:{label:"Guilds",placeholder:"All guilds",empty:"No guilds in snapshot.",clear:"Clear",selected:"{{count}} selected"}}},xD={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},yD={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},bD={quota:{unlimited:"No limit"}},_D={placeholder:"Search players",inputLabel:"Search players, guilds and servers",loading:"Loading",recents:"Recent searches",minCharsHint:"Type at least 3 characters",noResults:"No results",players:"Players",guilds:"Guilds",servers:"Servers",active:"Active",inactive:"Inactive",guildMembers:"{{count}} members",guildMembersUnknown:"Members ?",moreResults:"More results press Enter",recentLabel:"Recent"},wD={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},jD={v2:{searchPlaceholder:"Search guides",searchLabel:"Search guides",navHomeLabel:"Home",emptyStateTitle:"Select a guide",emptyStateBody:"Choose an entry from the guide navigation.",loading:"Loading guide...",missingTitle:"Guide not available yet",missingBody:"This guide does not have markdown content yet.",createdLabel:"Created",updatedLabel:"Last edited",sectionsLabel:"Sections",noSections:"No sections",galleryLabel:"Gallery",closeLabel:"Close"}},SD={nav:oD,home:lD,guidehub:cD,servers:dD,playground:uD,sidebar:hD,account:pD,tools:mD,topbar:gD,toplistsPage:fD,toplists:vD,profile:xD,help:yD,uploadCenter:bD,search:_D,footer:wD,guides:jD},ND={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community",creatorHub:"Creator Hub",settings:"Einstellungen"},kD={title:"Start",subtitle:"Willkommen zurueck",historybook:{title:"Historybook",credit:"Historybook - erstellt von Resist 2 Exist & DonMuErte",logoAlt:"Historybook Logo",coverAlt:"Historybook Cover",open:"Historybook oeffnen"},guidehub:{title:"GuideHub",subtitle:"Guides & Rechner",logoAlt:"GuideHub Logo",previewAlt:"GuideHub Vorschau",open:"GuideHub oeffnen"},sftools:{title:"SFTools",subtitle:"Tools & Ressourcen",previewAlt:"SFTools Vorschau"},taverndiscord:{title:"Tavern Discord",subtitle:"Community-Discord",previewAlt:"Tavern Discord Vorschau"},news:{title:"Community-News",empty:"Noch keine Neuigkeiten.",emptyChannel:"Keine aktuellen News in diesem Kanal.",openOnDiscord:"Auf Discord oeffnen",prev:"Vorheriger Kanal",next:"Naechster Kanal"},youtube:{title:"YouTube",prev:"Vorheriges Video",next:"Naechstes Video",empty:"Keine Videos"},live:{title:"Jetzt live",none:"Niemand ist gerade live.",open_on_twitch:"Auf Twitch oeffnen",badge:"LIVE",viewers:"{{viewers}} Zuschauer",prev:"Vorheriger Stream",next:"Naechster Stream"},schedule:{open:"Streaming-Plan anzeigen",title:"Streaming-Plan",close:"Schliessen",platform:"Plattform",platformAll:"Alle",platformTwitch:"Twitch",platformYouTube:"YouTube",search:"Suche",searchPlaceholder:"Streamer / Titel",today:"Nur heute",columns:{weekday:"Wochentag",start:"Start (UTC)",end:"Ende (UTC)",timezone:"Zeitzone",platform:"Plattform",channel:"Kanal-URL",streamer:"Streamer",title:"Titel"},empty:"Noch kein Streaming-Plan.",link:"Link"}},CD={arenaManager:{amRuneBonuses:{description:"Komplette Uebersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Errungenschaften und Breakpoints sind markiert.",searchPlaceholder:"Suche (z. B. thousand, E34, x60)...",table:{tier:"Tier",amount:"Menge",goldBonus:"Gold Bonus",xpBonus:"XP Bonus",hpBonus:"HP Bonus",totalResistance:"Gesamtwiderstand",singleResistance:"Einzelwiderstand",elementalDamage:"Elementarschaden",improvedItemQuality:"Verbesserte Item-Qualitaet",chancesOfEpics:"Chance auf Epics",tags:"Tags"},badges:{max:"MAX",achievement:"Errungenschaft",x2:"x2",x12:"x12",x60:"x60",x8:"x8"},achievements:{capitalist:"Kapitalist Errungenschaft",stinkingrich:"Stinkreich Errungenschaft",runemaster:"Runenmeister"},tiers:{thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion",quintillion:"Quintillion",sextillion:"Sextillion",septillion:"Septillion",octillion:"Octillion",nonillion:"Nonillion",decillion:"Decillion",undecillion:"Undecillion",duodecillion:"Duodecillion",tredecillion:"Tredecillion",quattuordecillion:"Quattuordecillion",quindecillion:"Quindecillion",sexdecillion:"Sexdecillion",septendecillion:"Septendecillion",octodecillion:"Octodecillion",novendecillion:"Novendecillion",vigintillion:"Vigintillion",unvigintillion:"Unvigintillion",duovigintillion:"Duovigintillion",trevigintillion:"Trevigintillion",quattuorvigintillion:"Quattuorvigintillion",quinquavigintillion:"Quinquavigintillion",sesvigintillion:"Sesvigintillion",septemvigintillion:"Septemvigintillion",octovigintillion:"Octovigintillion",novemvigintillion:"Novemvigintillion",trigintillion:"Trigintillion",untrigintillion:"Untrigintillion",duotrigintillion:"Duotrigintillion",trestrigintillion:"Trestrigintillion",quattuortrigintillion:"Quattuortrigintillion",quinquatrigintillion:"Quinquatrigintillion",sextrigintillion:"Sextrigintillion",septentrigintillion:"Septentrigintillion",octotrigintillion:"Octotrigintillion",noventrigintillion:"Noventrigintillion",quadragintillion:"Quadragintillion",unquadragintillion:"Unquadragintillion",duoquadragintillion:"Duoquadragintillion",trequadragintillion:"Trequadragintillion",quattuorquadragintillion:"Quattuorquadragintillion",quinquadragintillion:"Quinquadragintillion",sexquadragintillion:"Sexquadragintillion",septenquadragintillion:"Septenquadragintillion",octoquadragintillion:"Octoquadragintillion",novenquadragintillion:"Novenquadragintillion"}}}},TD={tiles:{overview:{title:"Server-Uebersicht",subtitle:"Fusion-Tree & aktive Server"}},overview:{pageTitle:"Server-Uebersicht",expandAll:"Alle aufklappen",collapseAll:"Alle einklappen"}},ID={tabs:{gamified:"Gamifiziert",gamified2:"Gamified 2",gamified3:"Gamified 3"}},AD={connectedCharacters:{title:"Verknuepfte Charaktere",empty:"Noch keine Charaktere verknuepft. Verknuepfe einen Charakter in deinem Account, damit er hier erscheint.",loginPrompt:"Bitte einloggen, um verknuepfte Charaktere zu sehen.",ctaGuest:"Start-Guide oeffnen",ctaAuthed:"Zum Account-Tab wechseln",chip:{server:"Server",class:"Klasse"}}},ED={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fuer deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}},connectedCharacters:{title:"Verknuepfte Charaktere",subtitle:"Diese Spielcharaktere sind mit deinem SFDataHub-Account verknuepft.",loading:"Charaktere werden aktualisiert...",empty:{title:"Noch keine Charaktere verknuepft",description:'Nutze den Befehl "!connect char" im Discord-Bot, verknuepfe deinen Account und klicke dann hier auf "Refresh".',cta:"Klicke hier, um zu erfahren, wie das Verknuepfen funktioniert"},actions:{refresh:"Refresh",refreshing:"Aktualisiere...",unlink:"Charakter trennen"},confirmation:{title:"Moechtest du diesen Charakter wirklich trennen?",cancel:"Abbrechen",confirm:"Ja, trennen",confirming:"Trenne..."},errors:{serviceUnavailable:"Auth-Service ist fuer das Trennen nicht konfiguriert.",unlink:"Charakter konnte nicht getrennt werden."},columns:{character:"Charakter",server:"Server",playerId:"Player ID",class:"Klasse",level:"Level",guild:"Gilde",lastVerified:"Zuletzt verknuepft",source:"Quelle",actions:"Aktionen"},method:{discord:"Discord-Bot"},help:{title:"Wie funktioniert das Verknuepfen?",show:"Anzeigen",hide:"Ausblenden",steps:{link:'Verknuepfe einen Charakter ueber den Discord-Bot mit dem Befehl "!connect char".',verify:"Wir gleichen den Charakter mit deinem letzten verifizierten Scan ab; halte deine Daten aktuell.",refresh:"Klicke nach dem Verknuepfen auf Refresh, damit die Liste aktualisiert wird.",unlink:"Du kannst jeden Charakter ueber die Spalte Aktionen trennen; die Quelle zeigt, wie er verknuepft wurde."},footnote:"Tipp: Nach dem Verknuepfen oder Trennen immer kurz auf Refresh klicken."}}},RD={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},PD={quickAccess:"Schnellzugriff",upload:"Scan hochladen",search:"Suchen /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},LD={errors:{noSnapshot:"Noch kein Snapshot fuer diesen Server."}},DD={compareMonth:"Fortschritt seit",compareOff:"Aus",compareMissingSnapshot:"Kein Snapshot fr diesen Monat gefunden.",deltaNew:"NEU",filters:{guilds:{label:"Gilden",placeholder:"Alle Gilden",empty:"Keine Gilden im Snapshot.",clear:"Leeren",selected:"{{count}} ausgewaehlt"}}},MD={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},FD={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},BD={quota:{unlimited:"Kein Limit"}},$D={placeholder:"Suchen (Spieler)",inputLabel:"Spieler, Gilden und Server suchen",loading:"Ldt?",recents:"Letzte Suchen",minCharsHint:"Mindestens 3 Zeichen eingeben?",noResults:"Keine Treffer",players:"Spieler",guilds:"Gilden",servers:"Server",active:"Aktiv",inactive:"Inaktiv",guildMembers:"{{count}} Mitglieder",guildMembersUnknown:"Mitglieder ?",moreResults:"Mehr Ergebnisse? Enter drcken",recentLabel:"Kuerzlich"},OD={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},VD={v2:{searchPlaceholder:"Guides suchen",searchLabel:"Guides suchen",navHomeLabel:"Startseite",emptyStateTitle:"Guide auswaehlen",emptyStateBody:"Waehle einen Eintrag in der Guide-Navigation.",loading:"Guide wird geladen...",missingTitle:"Guide noch nicht verfuegbar",missingBody:"Fuer diesen Guide gibt es noch keinen Markdown-Inhalt.",createdLabel:"Erstellt",updatedLabel:"Bearbeitet",sectionsLabel:"Sektionen",noSections:"Keine Sektionen",galleryLabel:"Galerie",closeLabel:"Schliessen"}},UD={nav:ND,home:kD,guidehub:CD,servers:TD,playground:ID,sidebar:AD,account:ED,tools:RD,topbar:PD,toplistsPage:LD,toplists:DD,profile:MD,help:FD,uploadCenter:BD,search:$D,footer:OD,guides:VD},GD={en:{translation:SD},de:{translation:UD}};An.use(sD).init({resources:GD,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function Ft(t,e="en"){return An.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZS="popstate";function zD(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=ad(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),s1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");c=h===-1?u:u.slice(0,h)}return c+"#"+(typeof a=="string"?a:Cp(a))}function r(i,a){Mi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return WD(e,n,r,t)}function tn(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Mi(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function HD(){return Math.random().toString(36).substring(2,10)}function eN(t,e){return{usr:t.state,key:t.key,idx:e}}function s1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ad(e):e,state:n,key:e&&e.key||r||HD()}}function Cp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ad(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WD(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=p(),P=E==null?null:E-h;h=E,u&&u({action:c,location:k.location,delta:P})}function y(E,P){c="PUSH";let L=s1(k.location,E,P);n&&n(L,E),h=p()+1;let N=eN(L,h),v=k.createHref(L);try{o.pushState(N,"",v)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(v)}a&&u&&u({action:c,location:k.location,delta:1})}function _(E,P){c="REPLACE";let L=s1(k.location,E,P);n&&n(L,E),h=p();let N=eN(L,h),v=k.createHref(L);o.replaceState(N,"",v),a&&u&&u({action:c,location:k.location,delta:0})}function w(E){return KD(E)}let k={get action(){return c},get location(){return t(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ZS,g),u=E,()=>{i.removeEventListener(ZS,g),u=null}},createHref(E){return e(i,E)},createURL:w,encodeLocation(E){let P=w(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:y,replace:_,go(E){return o.go(E)}};return k}function KD(t,e=!1){let n="http://localhost";typeof window!="undefined"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Cp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function w3(t,e,n="/"){return qD(t,e,n,!1)}function qD(t,e,n,r){let i=typeof e=="string"?ad(e):e,a=Bo(i.pathname||"/",n);if(a==null)return null;let o=j3(t);QD(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=a8(a);c=r8(o[u],h,r)}return c}function j3(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;tn(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=Lo([r,p.relativePath]),y=n.concat(p);o.children&&o.children.length>0&&(tn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),j3(o.children,e,y,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:s8(g,o.index),routesMeta:y})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of S3(o.path))a(o,c,!0,h)}),e}function S3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=S3(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function QD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:n8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var YD=/^:[\w-]+$/,XD=3,JD=2,ZD=1,e8=10,t8=-2,tN=t=>t==="*";function s8(t,e){let n=t.split("/"),r=n.length;return n.some(tN)&&(r+=t8),e&&(r+=JD),n.filter(i=>!tN(i)).reduce((i,a)=>i+(YD.test(a)?XD:a===""?ZD:e8),r)}function n8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function r8(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=Jf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=Jf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Lo([a,g.pathname]),pathnameBase:d8(Lo([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=Lo([a,g.pathnameBase]))}return o}function Jf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=i8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let w=c[y]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const _=c[y];return g&&!_?h[p]=void 0:h[p]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function i8(t,e=!1,n=!0){Mi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function a8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Bo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function o8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ad(t):t;return{pathname:n?n.startsWith("/")?n:l8(n,e):e,search:u8(r),hash:h8(i)}}function l8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function g0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o_(t){let e=c8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function l_(t,e,n,r=!1){let i;typeof t=="string"?i=ad(t):(i={...t},tn(!i.pathname||!i.pathname.includes("?"),g0("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),g0("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),g0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}c=g>=0?e[g]:"/"}let u=o8(i,c),h=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Lo=t=>t.join("/").replace(/\/\/+/g,"/"),d8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,h8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function p8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var N3=["POST","PUT","PATCH","DELETE"];new Set(N3);var m8=["GET",...N3];new Set(m8);var Bu=R.createContext(null);Bu.displayName="DataRouter";var qv=R.createContext(null);qv.displayName="DataRouterState";R.createContext(!1);var k3=R.createContext({isTransitioning:!1});k3.displayName="ViewTransition";var g8=R.createContext(new Map);g8.displayName="Fetchers";var f8=R.createContext(null);f8.displayName="Await";var Na=R.createContext(null);Na.displayName="Navigation";var Yp=R.createContext(null);Yp.displayName="Location";var Zi=R.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var c_=R.createContext(null);c_.displayName="RouteError";function v8(t,{relative:e}={}){tn($u(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Na),{hash:i,pathname:a,search:o}=Xp(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:Lo([n,a])),r.createHref({pathname:c,search:o,hash:i})}function $u(){return R.useContext(Yp)!=null}function ir(){return tn($u(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Yp).location}var C3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function T3(t){R.useContext(Na).static||R.useLayoutEffect(t)}function Xr(){let{isDataRoute:t}=R.useContext(Zi);return t?R8():x8()}function x8(){tn($u(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Bu),{basename:e,navigator:n}=R.useContext(Na),{matches:r}=R.useContext(Zi),{pathname:i}=ir(),a=JSON.stringify(o_(r)),o=R.useRef(!1);return T3(()=>{o.current=!0}),R.useCallback((u,h={})=>{if(Mi(o.current,C3),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=l_(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lo([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,a,i,t])}var y8=R.createContext(null);function b8(t){let e=R.useContext(Zi).outlet;return e&&R.createElement(y8.Provider,{value:t},e)}function Qv(){let{matches:t}=R.useContext(Zi),e=t[t.length-1];return e?e.params:{}}function Xp(t,{relative:e}={}){let{matches:n}=R.useContext(Zi),{pathname:r}=ir(),i=JSON.stringify(o_(n));return R.useMemo(()=>l_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function _8(t,e){return I3(t,e)}function I3(t,e,n,r,i){var L;tn($u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(Na),{matches:o}=R.useContext(Zi),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let N=g&&g.path||"";A3(h,!g||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=ir(),_;if(e){let N=typeof e=="string"?ad(e):e;tn(p==="/"||((L=N.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),_=N}else _=y;let w=_.pathname||"/",k=w;if(p!=="/"){let N=p.replace(/^\//,"").split("/");k="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=w3(t,{pathname:k});Mi(g||E!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Mi(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=k8(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Lo([p,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Lo([p,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,r,i);return e&&P?R.createElement(Yp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},P):P}function w8(){let t=E8(),e=p8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,o)}var j8=R.createElement(w8,null),S8=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Zi.Provider,{value:this.props.routeContext},R.createElement(c_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N8({routeContext:t,match:e,children:n}){let r=R.useContext(Bu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Zi.Provider,{value:t},n)}function k8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);tn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:y}=n,_=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let y,_=!1,w=null,k=null;n&&(y=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||j8,c&&(u<0&&g===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,k=null):u===g&&(_=!0,k=p.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,g+1)),P=()=>{let L;return y?L=w:_?L=k:p.route.Component?L=R.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=h,R.createElement(N8,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:L})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?R.createElement(S8,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:P(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):P()},null)}function d_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C8(t){let e=R.useContext(Bu);return tn(e,d_(t)),e}function T8(t){let e=R.useContext(qv);return tn(e,d_(t)),e}function I8(t){let e=R.useContext(Zi);return tn(e,d_(t)),e}function u_(t){let e=I8(t),n=e.matches[e.matches.length-1];return tn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function A8(){return u_("useRouteId")}function E8(){var r;let t=R.useContext(c_),e=T8("useRouteError"),n=u_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function R8(){let{router:t}=C8("useNavigate"),e=u_("useNavigate"),n=R.useRef(!1);return T3(()=>{n.current=!0}),R.useCallback(async(i,a={})=>{Mi(n.current,C3),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var sN={};function A3(t,e,n){!e&&!sN[t]&&(sN[t]=!0,Mi(!1,n))}R.memo(P8);function P8({routes:t,future:e,state:n,unstable_onError:r}){return I3(t,void 0,n,r,e)}function No({to:t,replace:e,state:n,relative:r}){tn($u(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(Na);Mi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=R.useContext(Zi),{pathname:o}=ir(),c=Xr(),u=l_(t,o_(a),o,r==="path"),h=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function E3(t){return b8(t.context)}function _e(t){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function L8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){tn(!$u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=ad(n));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:y="default"}=n,_=R.useMemo(()=>{let w=Bo(u,o);return w==null?null:{location:{pathname:w,search:h,hash:p,state:g,key:y},navigationType:r}},[o,u,h,p,g,y,r]);return Mi(_!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:R.createElement(Na.Provider,{value:c},R.createElement(Yp.Provider,{children:e,value:_}))}function D8({children:t,location:e}){return _8(n1(t),e)}function n1(t,e=[]){let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let a=[...e,i];if(r.type===R.Fragment){n.push.apply(n,n1(r.props.children,a));return}tn(r.type===_e,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=n1(r.props.children,a)),n.push(o)}),n}var _f="get",wf="application/x-www-form-urlencoded";function Yv(t){return t!=null&&typeof t.tagName=="string"}function M8(t){return Yv(t)&&t.tagName.toLowerCase()==="button"}function F8(t){return Yv(t)&&t.tagName.toLowerCase()==="form"}function B8(t){return Yv(t)&&t.tagName.toLowerCase()==="input"}function $8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O8(t,e){return t.button===0&&(!e||e==="_self")&&!$8(t)}function r1(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function V8(t,e){let n=r1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var $g=null;function U8(){if($g===null)try{new FormData(document.createElement("form"),0),$g=!1}catch(t){$g=!0}return $g}var G8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function f0(t){return t!=null&&!G8.has(t)?(Mi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wf}"`),null):t}function z8(t,e){let n,r,i,a,o;if(F8(t)){let c=t.getAttribute("action");r=c?Bo(c,e):null,n=t.getAttribute("method")||_f,i=f0(t.getAttribute("enctype"))||wf,a=new FormData(t)}else if(M8(t)||B8(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Bo(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||_f,i=f0(t.getAttribute("formenctype"))||f0(c.getAttribute("enctype"))||wf,a=new FormData(c,t),!U8()){let{name:h,type:p,value:g}=t;if(p==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,g)}}else{if(Yv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_f,r=null,i=wf,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function h_(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function H8(t,e,n){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Bo(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function W8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function K8(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function q8(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await W8(a,n);return o.links?o.links():[]}return[]}));return J8(r.flat(1).filter(K8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function nN(t,e,n,r,i,a){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var p;return n[h].pathname!==u.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{var g;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Q8(t,e,{includeHydrateFallback:n}={}){return Y8(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Y8(t){return[...new Set(t)]}function X8(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function J8(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(X8(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function R3(){let t=R.useContext(Bu);return h_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Z8(){let t=R.useContext(qv);return h_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var p_=R.createContext(void 0);p_.displayName="FrameworkContext";function P3(){let t=R.useContext(p_);return h_(t,"You must render this element inside a <HydratedRouter> element"),t}function eM(t,e){let n=R.useContext(p_),[r,i]=R.useState(!1),[a,o]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,y=R.useRef(null);R.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let k=P=>{P.forEach(L=>{o(L.isIntersecting)})},E=new IntersectionObserver(k,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[t]),R.useEffect(()=>{if(r){let k=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(k)}}},[r]);let _=()=>{i(!0)},w=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,y,{}]:[a,y,{onFocus:Lh(c,_),onBlur:Lh(u,w),onMouseEnter:Lh(h,_),onMouseLeave:Lh(p,w),onTouchStart:Lh(g,_)}]:[!1,y,{}]}function Lh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function tM({page:t,...e}){let{router:n}=R3(),r=R.useMemo(()=>w3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(nM,{page:t,matches:r,...e}):null}function sM(t){let{manifest:e,routeModules:n}=P3(),[r,i]=R.useState([]);return R.useEffect(()=>{let a=!1;return q8(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function nM({page:t,matches:e,...n}){let r=ir(),{manifest:i,routeModules:a}=P3(),{basename:o}=R3(),{loaderData:c,matches:u}=Z8(),h=R.useMemo(()=>nN(t,e,u,i,r,"data"),[t,e,u,i,r]),p=R.useMemo(()=>nN(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,k=!1;if(e.forEach(P=>{var N;let L=i.routes[P.route.id];!L||!L.hasLoader||(!h.some(v=>v.route.id===P.route.id)&&P.route.id in c&&((N=a[P.route.id])!=null&&N.shouldRevalidate)||L.hasClientLoader?k=!0:w.add(P.route.id))}),w.size===0)return[];let E=H8(t,o,"data");return k&&w.size>0&&E.searchParams.set("_routes",e.filter(P=>w.has(P.route.id)).map(P=>P.route.id).join(",")),[E.pathname+E.search]},[o,c,r,i,h,e,t,a]),y=R.useMemo(()=>Q8(p,i),[p,i]),_=sM(p);return R.createElement(R.Fragment,null,g.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),_.map(({key:w,link:k})=>R.createElement("link",{key:w,nonce:n.nonce,...k})))}function rM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var L3=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{L3&&(window.__reactRouterVersion="7.9.1")}catch(t){}function iM({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=zD({window:n,v5Compat:!0}));let i=r.current,[a,o]=R.useState({action:i.action,location:i.location}),c=R.useCallback(u=>{R.startTransition(()=>o(u))},[o]);return R.useLayoutEffect(()=>i.listen(c),[i,c]),R.createElement(L8,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var D3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:p,viewTransition:g,...y},_){let{basename:w}=R.useContext(Na),k=typeof h=="string"&&D3.test(h),E,P=!1;if(typeof h=="string"&&k&&(E=h,L3))try{let C=new URL(window.location.href),M=h.startsWith("//")?new URL(C.protocol+h):new URL(h),T=Bo(M.pathname,w);M.origin===C.origin&&T!=null?h=T+M.search+M.hash:P=!0}catch(C){Mi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=v8(h,{relative:i}),[N,v,b]=eM(r,y),I=lM(h,{replace:o,state:c,target:u,preventScrollReset:p,relative:i,viewTransition:g});function j(C){e&&e(C),C.defaultPrevented||I(C)}let S=R.createElement("a",{...y,...b,href:E||L,onClick:P||a?e:j,ref:rM(_,v),target:u,"data-discover":!k&&n==="render"?"true":void 0});return N&&!k?R.createElement(R.Fragment,null,S,R.createElement(tM,{page:L})):S});As.displayName="Link";var Cs=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},p){let g=Xp(o,{relative:h.relative}),y=ir(),_=R.useContext(qv),{navigator:w,basename:k}=R.useContext(Na),E=_!=null&&pM(g)&&c===!0,P=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,L=y.pathname,N=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(L=L.toLowerCase(),N=N?N.toLowerCase():null,P=P.toLowerCase()),N&&k&&(N=Bo(N,k)||N);const v=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let b=L===P||!i&&L.startsWith(P)&&L.charAt(v)==="/",I=N!=null&&(N===P||!i&&N.startsWith(P)&&N.charAt(P.length)==="/"),j={isActive:b,isPending:I,isTransitioning:E},S=b?e:void 0,C;typeof r=="function"?C=r(j):C=[r,b?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(j):a;return R.createElement(As,{...h,"aria-current":S,className:C,ref:p,style:M,to:o,viewTransition:c},typeof u=="function"?u(j):u)});Cs.displayName="NavLink";var aM=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=_f,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,...y},_)=>{let w=uM(),k=hM(c,{relative:h}),E=o.toLowerCase()==="get"?"get":"post",P=typeof c=="string"&&D3.test(c),L=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let v=N.nativeEvent.submitter,b=(v==null?void 0:v.getAttribute("formmethod"))||o;w(v||N.currentTarget,{fetcherKey:e,method:b,navigate:n,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return R.createElement("form",{ref:_,method:E,action:k,onSubmit:r?u:L,...y,"data-discover":!P&&t==="render"?"true":void 0})});aM.displayName="Form";function oM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M3(t){let e=R.useContext(Bu);return tn(e,oM(t)),e}function lM(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Xr(),u=ir(),h=Xp(t,{relative:a});return R.useCallback(p=>{if(O8(p,e)){p.preventDefault();let g=n!==void 0?n:Cp(u)===Cp(h);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,n,r,e,t,i,a,o])}function fi(t){Mi(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=R.useRef(r1(t)),n=R.useRef(!1),r=ir(),i=R.useMemo(()=>V8(r.search,n.current?null:e.current),[r.search]),a=Xr(),o=R.useCallback((c,u)=>{const h=r1(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var cM=0,dM=()=>`__${String(++cM)}__`;function uM(){let{router:t}=M3("useSubmit"),{basename:e}=R.useContext(Na),n=A8();return R.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=z8(r,e);if(i.navigate===!1){let p=i.fetcherKey||dM();await t.fetch(p,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function hM(t,{relative:e}={}){let{basename:n}=R.useContext(Na),r=R.useContext(Zi);tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Xp(t||".",{relative:e})},o=ir();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let p=c.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Lo([n,a.pathname])),Cp(a)}function pM(t,{relative:e}={}){let n=R.useContext(k3);tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=M3("useViewTransitionState"),i=Xp(t,{relative:e});if(!n.isTransitioning)return!1;let a=Bo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Bo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Jf(i.pathname,o)!=null||Jf(i.pathname,a)!=null}var mM=g3();const gM=i_(mM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vM=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),rN=t=>{const e=vM(t);return e.charAt(0).toUpperCase()+e.slice(1)},F3=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),xM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>R.createElement("svg",{ref:u,...yM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:F3("lucide",i),...!a&&!xM(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,p])=>R.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(t,e)=>{const n=R.forwardRef(({className:r,...i},a)=>R.createElement(bM,{ref:a,iconNode:e,className:F3(`lucide-${fM(rN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=rN(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],Xv=Et("aperture",_M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],jM=Et("arrow-up-right",wM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],NM=Et("ban",SM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],CM=Et("bell",kM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],IM=Et("book-open",TM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],EM=Et("chart-column",AM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],PM=Et("chevron-right",RM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ap=Et("circle-alert",LM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MM=Et("circle-check",DM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],jf=Et("circle-dot",FM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$M=Et("circle-user-round",BM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VM=Et("clock-3",OM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],GM=Et("cloud-upload",UM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],HM=Et("compass",zM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],KM=Et("database",WM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],B3=Et("diamond",qM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YM=Et("file-text",QM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],JM=Et("folder-search",XM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],e7=Et("globe",ZM);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],$3=Et("hexagon",t7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],n7=Et("house",s7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],i7=Et("layers",r7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],o7=Et("layout-dashboard",a7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ol=Et("loader-circle",l7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],d7=Et("menu",c7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],h7=Et("messages-square",u7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],m7=Et("pencil",p7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],f7=Et("pin-off",g7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],x7=Et("pin",v7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Jv=Et("refresh-ccw",y7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],_7=Et("scroll-text",b7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zf=Et("search",w7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],S7=Et("server-cog",j7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k7=Et("settings",N7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],O3=Et("shapes",C7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],V3=Et("shield-alert",T7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A7=Et("shield-check",I7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],U3=Et("shield-off",E7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],od=Et("shield",R7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],L7=Et("square-activity",P7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],M7=Et("star",D7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],B7=Et("sticky-note",F7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O7=Et("trash-2",$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],m_=Et("triangle-alert",V7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],G7=Et("trophy",U7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],H7=Et("upload",z7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zv=Et("users",W7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],q7=Et("wrench",K7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G3=Et("zap",Q7),Y7="_topbar_m8njg_3",X7="_topbarLeft_m8njg_39",J7="_searchWrap_m8njg_55",Z7="_topbarRight_m8njg_109",eF="_mobileSearchBtn_m8njg_123",tF="_ico_m8njg_133",sF="_btnIco_m8njg_147",nF="_pill_m8njg_181",rF="_pillActive_m8njg_203",iF="_onlyExpanded_m8njg_211",aF="_topbarNav_m8njg_213",oF="_topbarLink_m8njg_223",lF="_upload_m8njg_233",cF="_label_m8njg_263",dF="_avatarBtn_m8njg_269",uF="_avatar_m8njg_269",hF="_avatarSpinnerShell_m8njg_297",pF="_avatarSpinner_m8njg_297",mF="_srOnly_m8njg_333",gF="_accountRoot_m8njg_359",fF="_accountDropdown_m8njg_367",vF="_accountHeader_m8njg_397",xF="_accountName_m8njg_409",yF="_accountSub_m8njg_421",bF="_accountStatusText_m8njg_431",_F="_accountPrimary_m8njg_441",wF="_accountHint_m8njg_463",jF="_accountItem_m8njg_473",SF="_accountDivider_m8njg_503",NF="_accountMiniAvatar_m8njg_515",kF="_accountLogout_m8njg_527",CF="_mobileSearchPanel_m8njg_557",TF="_mobileSearchOverlay_m8njg_585",$t={topbar:Y7,topbarLeft:X7,searchWrap:J7,topbarRight:Z7,mobileSearchBtn:eF,ico:tF,btnIco:sF,pill:nF,pillActive:rF,onlyExpanded:iF,topbarNav:aF,topbarLink:oF,upload:lF,label:cF,avatarBtn:dF,avatar:uF,avatarSpinnerShell:hF,avatarSpinner:pF,srOnly:mF,accountRoot:gF,accountDropdown:fF,accountHeader:vF,accountName:xF,accountSub:yF,accountStatusText:bF,accountPrimary:_F,accountHint:wF,accountItem:jF,accountDivider:SF,accountMiniAvatar:NF,accountLogout:kF,mobileSearchPanel:CF,mobileSearchOverlay:TF},ka="https://auth.sfdatahub.com",IF=`${ka}/auth/firebase-token`;async function AF(){var r,i;const t=await fetch(IF,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),n=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!n)throw new Error("Firebase token missing in response");return n}var iN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},H3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=a>>2,g=(a&3)<<4|c>>4;let y=(c&15)<<2|h>>6,_=h&63;u||(_=64,o||(y=64)),r.push(n[p],n[g],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||g==null)throw new RF;const y=a<<2|c>>4;if(r.push(y),h!==64){const _=c<<4&240|h>>2;if(r.push(_),g!==64){const w=h<<6&192|g;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PF=function(t){const e=z3(t);return H3.encodeByteArray(e,!0)},ev=function(t){return PF(t).replace(/\./g,"")},W3=function(t){try{return H3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=()=>LF().__FIREBASE_DEFAULTS__,MF=()=>{if(typeof process=="undefined"||typeof iN=="undefined")return;const t=iN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FF=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&W3(t[1]);return e&&JSON.parse(e)},ex=()=>{try{return DF()||MF()||FF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K3=t=>{var e,n;return(n=(e=ex())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BF=t=>{const e=K3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q3=()=>{var t;return(t=ex())===null||t===void 0?void 0:t.config},Q3=t=>{var e;return(e=ex())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ev(JSON.stringify(n)),ev(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VF(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ar())}function UF(){var t;const e=(t=ex())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function GF(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function zF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WF(){const t=Ar();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KF(){return!UF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qF(){try{return typeof indexedDB=="object"}catch(t){return!1}}function QF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF="FirebaseError";class Ko extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YF,Object.setPrototypeOf(this,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jp.prototype.create)}}class Jp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?XF(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Ko(i,c,r)}}function XF(t,e){return t.replace(JF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JF=/\{\$([^}]+)}/g;function ZF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(aN(a)&&aN(o)){if(!tv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function aN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function e9(t,e){const n=new t9(t,e);return n.subscribe.bind(n)}class t9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=v0),i.error===void 0&&(i.error=v0),i.complete===void 0&&(i.complete=v0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function v0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){return t&&t._delegate?t._delegate:t}class Xc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $F;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i9(e))try{this.getOrInitializeService({instanceIdentifier:Pc})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=Pc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pc){return this.instances.has(e)}getOptions(e=Pc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Pc){return this.component?this.component.multipleInstances?e:Pc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r9(t){return t===Pc?void 0:t}function i9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ps||(ps={}));const o9={debug:ps.DEBUG,verbose:ps.VERBOSE,info:ps.INFO,warn:ps.WARN,error:ps.ERROR,silent:ps.SILENT},l9=ps.INFO,c9={[ps.DEBUG]:"log",[ps.VERBOSE]:"log",[ps.INFO]:"info",[ps.WARN]:"warn",[ps.ERROR]:"error"},d9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=c9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g_{constructor(e){this.name=e,this._logLevel=l9,this._logHandler=d9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ps))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ps.DEBUG,...e),this._logHandler(this,ps.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ps.VERBOSE,...e),this._logHandler(this,ps.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ps.INFO,...e),this._logHandler(this,ps.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ps.WARN,...e),this._logHandler(this,ps.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ps.ERROR,...e),this._logHandler(this,ps.ERROR,...e)}}const u9=(t,e)=>e.some(n=>t instanceof n);let oN,lN;function h9(){return oN||(oN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p9(){return lN||(lN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y3=new WeakMap,i1=new WeakMap,X3=new WeakMap,x0=new WeakMap,f_=new WeakMap;function m9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Vl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Y3.set(n,t)}).catch(()=>{}),f_.set(e,t),e}function g9(t){if(i1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});i1.set(t,e)}let a1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f9(t){a1=t(a1)}function v9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(y0(this),e,...n);return X3.set(r,e.sort?e.sort():[e]),Vl(r)}:p9().includes(t)?function(...e){return t.apply(y0(this),e),Vl(Y3.get(this))}:function(...e){return Vl(t.apply(y0(this),e))}}function x9(t){return typeof t=="function"?v9(t):(t instanceof IDBTransaction&&g9(t),u9(t,h9())?new Proxy(t,a1):t)}function Vl(t){if(t instanceof IDBRequest)return m9(t);if(x0.has(t))return x0.get(t);const e=x9(t);return e!==t&&(x0.set(t,e),f_.set(e,t)),e}const y0=t=>f_.get(t);function y9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Vl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Vl(o.result),u.oldVersion,u.newVersion,Vl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const b9=["get","getKey","getAll","getAllKeys","count"],_9=["put","add","delete","clear"],b0=new Map;function cN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(b0.get(e))return b0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||b9.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return b0.set(e,a),a}f9(t=>({...t,get:(e,n,r)=>cN(e,n)||t.get(e,n,r),has:(e,n)=>!!cN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function j9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const o1="@firebase/app",dN="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new g_("@firebase/app"),S9="@firebase/app-compat",N9="@firebase/analytics-compat",k9="@firebase/analytics",C9="@firebase/app-check-compat",T9="@firebase/app-check",I9="@firebase/auth",A9="@firebase/auth-compat",E9="@firebase/database",R9="@firebase/data-connect",P9="@firebase/database-compat",L9="@firebase/functions",D9="@firebase/functions-compat",M9="@firebase/installations",F9="@firebase/installations-compat",B9="@firebase/messaging",$9="@firebase/messaging-compat",O9="@firebase/performance",V9="@firebase/performance-compat",U9="@firebase/remote-config",G9="@firebase/remote-config-compat",z9="@firebase/storage",H9="@firebase/storage-compat",W9="@firebase/firestore",K9="@firebase/vertexai-preview",q9="@firebase/firestore-compat",Q9="firebase",Y9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="[DEFAULT]",X9={[o1]:"fire-core",[S9]:"fire-core-compat",[k9]:"fire-analytics",[N9]:"fire-analytics-compat",[T9]:"fire-app-check",[C9]:"fire-app-check-compat",[I9]:"fire-auth",[A9]:"fire-auth-compat",[E9]:"fire-rtdb",[R9]:"fire-data-connect",[P9]:"fire-rtdb-compat",[L9]:"fire-fn",[D9]:"fire-fn-compat",[M9]:"fire-iid",[F9]:"fire-iid-compat",[B9]:"fire-fcm",[$9]:"fire-fcm-compat",[O9]:"fire-perf",[V9]:"fire-perf-compat",[U9]:"fire-rc",[G9]:"fire-rc-compat",[z9]:"fire-gcs",[H9]:"fire-gcs-compat",[W9]:"fire-fst",[q9]:"fire-fst-compat",[K9]:"fire-vertex","fire-js":"fire-js",[Q9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new Map,J9=new Map,c1=new Map;function uN(t,e){try{t.container.addComponent(e)}catch(n){$o.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ju(t){const e=t.name;if(c1.has(e))return $o.debug(`There were multiple attempts to register component ${e}.`),!1;c1.set(e,t);for(const n of Tp.values())uN(n,t);for(const n of J9.values())uN(n,t);return!0}function v_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function za(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ul=new Jp("app","Firebase",Z9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ul.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=Y9;function J3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:l1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ul.create("bad-app-name",{appName:String(i)});if(n||(n=q3()),!n)throw Ul.create("no-options");const a=Tp.get(i);if(a){if(tv(n,a.options)&&tv(r,a.config))return a;throw Ul.create("duplicate-app",{appName:i})}const o=new a9(i);for(const u of c1.values())o.addComponent(u);const c=new eB(n,r,o);return Tp.set(i,c),c}function x_(t=l1){const e=Tp.get(t);if(!e&&t===l1&&q3())return J3();if(!e)throw Ul.create("no-app",{appName:t});return e}function tB(){return Array.from(Tp.values())}function Gl(t,e,n){var r;let i=(r=X9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$o.warn(c.join(" "));return}ju(new Xc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB="firebase-heartbeat-database",nB=1,Ip="firebase-heartbeat-store";let _0=null;function Z3(){return _0||(_0=y9(sB,nB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ip)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ul.create("idb-open",{originalErrorMessage:t.message})})),_0}async function rB(t){try{const n=(await Z3()).transaction(Ip),r=await n.objectStore(Ip).get(e5(t));return await n.done,r}catch(e){if(e instanceof Ko)$o.warn(e.message);else{const n=Ul.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$o.warn(n.message)}}}async function hN(t,e){try{const r=(await Z3()).transaction(Ip,"readwrite");await r.objectStore(Ip).put(e,e5(t)),await r.done}catch(n){if(n instanceof Ko)$o.warn(n.message);else{const r=Ul.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$o.warn(r.message)}}}function e5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=1024,aB=720*60*60*1e3;class oB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=aB}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$o.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pN(),{heartbeatsToSend:r,unsentEntries:i}=lB(this._heartbeatsCache.heartbeats),a=ev(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return $o.warn(n),""}}}function pN(){return new Date().toISOString().substring(0,10)}function lB(t,e=iB){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),mN(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qF()?QF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mN(t){return ev(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t){ju(new Xc("platform-logger",e=>new w9(e),"PRIVATE")),ju(new Xc("heartbeat",e=>new oB(e),"PRIVATE")),Gl(o1,dN,t),Gl(o1,dN,"esm2017"),Gl("fire-js","")}dB("");var uB="firebase",hB="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(uB,hB,"app");function y_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function t5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pB=t5,s5=new Jp("auth","Firebase",t5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new g_("@firebase/auth");function mB(t,...e){sv.logLevel<=ps.WARN&&sv.warn(`Auth (${Ou}): ${t}`,...e)}function Sf(t,...e){sv.logLevel<=ps.ERROR&&sv.error(`Auth (${Ou}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t,...e){throw __(t,...e)}function wa(t,...e){return __(t,...e)}function b_(t,e,n){const r=Object.assign(Object.assign({},pB()),{[e]:n});return new Jp("auth","Firebase",r).create(e,{appName:t.name})}function zl(t){return b_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gB(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ja(t,"argument-error"),b_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function __(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s5.create(t,...e)}function Vt(t,e,...n){if(!t)throw __(e,...n)}function Io(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sf(e),new Error(e)}function Oo(t,e){t||Io(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fB(){return gN()==="http:"||gN()==="https:"}function gN(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fB()||zF()||"connection"in navigator)?navigator.onLine:!0}function xB(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oo(n>e,"Short delay should be less than long delay!"),this.isMobile=VF()||HF()}get(){return vB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){Oo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=new em(3e4,6e4);function tx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vu(t,e,n,r,i={}){return r5(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Zp(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return GF()||(h.referrerPolicy="no-referrer"),n5.fetch()(a5(t,t.config.apiHost,n,c),h)})}async function r5(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yB),e);try{const i=new _B(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Og(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Og(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Og(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Og(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw b_(t,p,h);Ja(t,p)}}catch(i){if(i instanceof Ko)throw i;Ja(t,"network-request-failed",{message:String(i)})}}async function i5(t,e,n,r,i={}){const a=await Vu(t,e,n,r,i);return"mfaPendingCredential"in a&&Ja(t,"multi-factor-auth-required",{_serverResponse:a}),a}function a5(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?w_(t.config,i):`${t.config.apiScheme}://${i}`}class _B{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wa(this.auth,"network-request-failed")),bB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Og(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wa(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e){return Vu(t,"POST","/v1/accounts:delete",e)}async function o5(t,e){return Vu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function jB(t,e=!1){const n=On(t),r=await n.getIdToken(e),i=j_(r);Vt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:op(w0(i.auth_time)),issuedAtTime:op(w0(i.iat)),expirationTime:op(w0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function w0(t){return Number(t)*1e3}function j_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const i=W3(n);return i?JSON.parse(i):(Sf("Failed to decode base64 JWT payload"),null)}catch(i){return Sf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fN(t){const e=j_(t);return Vt(e,"internal-error"),Vt(typeof e.exp!="undefined","internal-error"),Vt(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ap(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ko&&SB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=op(this.lastLoginAt),this.creationTime=op(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ap(t,o5(n,{idToken:r}));Vt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?l5(a.providerUserInfo):[],c=CB(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),p=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new u1(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function kB(t){const e=On(t);await nv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function l5(t){return t.map(e=>{var{providerId:n}=e,r=y_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t,e){const n=await r5(t,{},async()=>{const r=Zp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=a5(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",n5.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IB(t,e){return Vu(t,"POST","/v2/accounts:revokeToken",tx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vt(e.idToken,"internal-error"),Vt(typeof e.idToken!="undefined","internal-error"),Vt(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):fN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Vt(e.length!==0,"internal-error");const n=fN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await TB(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new vu;return r&&(Vt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Vt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Vt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vu,this.toJSON())}_performRefresh(){return Io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t,e){Vt(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Ao{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=y_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new u1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ap(this,this.stsTokenManager.getToken(this.auth,e));return Vt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jB(this,e)}reload(){return kB(this)}_assign(e){this!==e&&(Vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ao(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(za(this.auth.app))return Promise.reject(zl(this.auth));const e=await this.getIdToken();return await Ap(this,wB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,E=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(h=n.createdAt)!==null&&h!==void 0?h:void 0,L=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:v,isAnonymous:b,providerData:I,stsTokenManager:j}=n;Vt(N&&j,e,"internal-error");const S=vu.fromJSON(this.name,j);Vt(typeof N=="string",e,"internal-error"),yl(g,e.name),yl(y,e.name),Vt(typeof v=="boolean",e,"internal-error"),Vt(typeof b=="boolean",e,"internal-error"),yl(_,e.name),yl(w,e.name),yl(k,e.name),yl(E,e.name),yl(P,e.name),yl(L,e.name);const C=new Ao({uid:N,auth:e,email:y,emailVerified:v,displayName:g,isAnonymous:b,photoURL:w,phoneNumber:_,tenantId:k,stsTokenManager:S,createdAt:P,lastLoginAt:L});return I&&Array.isArray(I)&&(C.providerData=I.map(M=>Object.assign({},M))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new vu;i.updateFromServerResponse(n);const a=new Ao({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Vt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?l5(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new vu;c.updateFromIdToken(r);const u=new Ao({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new u1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=new Map;function Eo(t){Oo(t instanceof Function,"Expected a class definition");let e=vN.get(t);return e?(Oo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c5.type="NONE";const xN=c5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e,n){return`firebase:${t}:${e}:${n}`}class xu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Nf(this.userKey,i.apiKey,a),this.fullPersistenceKey=Nf("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ao._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xu(Eo(xN),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Eo(xN);const o=Nf(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(o);if(p){const g=Ao._fromJSON(e,p);h!==a&&(c=g),a=h;break}}catch(p){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new xu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch(p){}})),new xu(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(p5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g5(e))return"Blackberry";if(f5(e))return"Webos";if(u5(e))return"Safari";if((e.includes("chrome/")||h5(e))&&!e.includes("edge/"))return"Chrome";if(m5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function d5(t=Ar()){return/firefox\//i.test(t)}function u5(t=Ar()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h5(t=Ar()){return/crios\//i.test(t)}function p5(t=Ar()){return/iemobile/i.test(t)}function m5(t=Ar()){return/android/i.test(t)}function g5(t=Ar()){return/blackberry/i.test(t)}function f5(t=Ar()){return/webos/i.test(t)}function S_(t=Ar()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AB(t=Ar()){var e;return S_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EB(){return WF()&&document.documentMode===10}function v5(t=Ar()){return S_(t)||m5(t)||f5(t)||g5(t)||/windows phone/i.test(t)||p5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t,e=[]){let n;switch(t){case"Browser":n=yN(Ar());break;case"Worker":n=`${yN(Ar())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ou}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e={}){return Vu(t,"GET","/v2/passwordPolicy",tx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=6;class DB{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bN(this),this.idTokenSubscription=new bN(this),this.beforeStateQueue=new RB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Eo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await o5(this,{idToken:e}),r=await Ao._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(za(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(za(this.app))return Promise.reject(zl(this));const n=e?On(e):null;return n&&Vt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return za(this.app)?Promise.reject(zl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return za(this.app)?Promise.reject(zl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PB(this),n=new DB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await IB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Eo(e)||this._popupRedirectResolver;Vt(n,this,"argument-error"),this.redirectPersistenceManager=await xu.create(this,[Eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tm(t){return On(t)}class bN{constructor(e){this.auth=e,this.observer=null,this.addObserver=e9(n=>this.observer=n)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FB(t){N_=t}function BB(t){return N_.loadJS(t)}function $B(){return N_.gapiScript}function OB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t,e){const n=v_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(tv(a,e!=null?e:{}))return i;Ja(i,"already-initialized")}return n.initialize({options:e})}function UB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function GB(t,e,n){const r=tm(t);Vt(r._canInitEmulator,r,"emulator-config-failed"),Vt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=y5(e),{host:o,port:c}=zB(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),HB()}function y5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zB(t){const e=y5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:_N(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:_N(o)}}}function _N(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function HB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Io("not implemented")}_getIdTokenResponse(e){return Io("not implemented")}_linkToIdToken(e,n){return Io("not implemented")}_getReauthenticationResolver(e){return Io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e){return i5(t,"POST","/v1/accounts:signInWithIdp",tx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB="http://localhost";class Jc extends b5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ja("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=y_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Jc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yu(e,n)}buildRequest(){const e={requestUri:WB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zp(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends k_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends sm{constructor(){super("facebook.com")}static credential(e){return Jc._fromParams({providerId:Il.PROVIDER_ID,signInMethod:Il.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Il.credentialFromTaggedObject(e)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Il.credential(e.oauthAccessToken)}catch(n){return null}}}Il.FACEBOOK_SIGN_IN_METHOD="facebook.com";Il.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends sm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jc._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return To.credential(n,r)}catch(i){return null}}}To.GOOGLE_SIGN_IN_METHOD="google.com";To.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends sm{constructor(){super("github.com")}static credential(e){return Jc._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Al.credential(e.oauthAccessToken)}catch(n){return null}}}Al.GITHUB_SIGN_IN_METHOD="github.com";Al.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends sm{constructor(){super("twitter.com")}static credential(e,n){return Jc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return El.credential(n,r)}catch(i){return null}}}El.TWITTER_SIGN_IN_METHOD="twitter.com";El.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ao._fromIdTokenResponse(e,r,i),o=wN(r);return new Zc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=wN(r);return new Zc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function wN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends Ko{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new rv(e,n,r,i)}}function _5(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?rv._fromErrorAndOperation(t,a,e,r):a})}async function KB(t,e,n=!1){const r=await Ap(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e,n=!1){const{auth:r}=t;if(za(r.app))return Promise.reject(zl(r));const i="reauthenticate";try{const a=await Ap(t,_5(r,i,e,t),n);Vt(a.idToken,r,"internal-error");const o=j_(a.idToken);Vt(o,r,"internal-error");const{sub:c}=o;return Vt(t.uid===c,r,"user-mismatch"),Zc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ja(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QB(t,e,n=!1){if(za(t.app))return Promise.reject(zl(t));const r="signIn",i=await _5(t,r,e),a=await Zc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){return i5(t,"POST","/v1/accounts:signInWithCustomToken",tx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){if(za(t.app))return Promise.reject(zl(t));const n=tm(t),r=await YB(n,{token:e,returnSecureToken:!0}),i=await Zc._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function XB(t,e,n,r){return On(t).onIdTokenChanged(e,n,r)}function JB(t,e,n){return On(t).beforeAuthStateChanged(e,n)}function ZB(t,e,n,r){return On(t).onAuthStateChanged(e,n,r)}function e$(t){return On(t).signOut()}const iv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iv,"1"),this.storage.removeItem(iv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=1e3,s$=10;class j5 extends w5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);EB()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,s$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},t$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j5.type="LOCAL";const n$=j5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5 extends w5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}S5.type="SESSION";const N5=S5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await r$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=C_("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return window}function a$(t){Ha().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(){return typeof Ha().WorkerGlobalScope!="undefined"&&typeof Ha().importScripts=="function"}async function o$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function l$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c$(){return k5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="firebaseLocalStorageDb",d$=1,av="firebaseLocalStorage",T5="fbase_key";class nm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nx(t,e){return t.transaction([av],e?"readwrite":"readonly").objectStore(av)}function u$(){const t=indexedDB.deleteDatabase(C5);return new nm(t).toPromise()}function h1(){const t=indexedDB.open(C5,d$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(av,{keyPath:T5})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(av)?e(r):(r.close(),await u$(),e(await h1()))})})}async function SN(t,e,n){const r=nx(t,!0).put({[T5]:e,value:n});return new nm(r).toPromise()}async function h$(t,e){const n=nx(t,!1).get(e),r=await new nm(n).toPromise();return r===void 0?null:r.value}function NN(t,e){const n=nx(t,!0).delete(e);return new nm(n).toPromise()}const p$=800,m$=3;class I5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>m$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sx._getInstance(c$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o$(),!this.activeServiceWorker)return;this.sender=new i$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h1();return await SN(e,iv,"1"),await NN(e,iv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>SN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>NN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=nx(i,!1).getAll();return new nm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I5.type="LOCAL";const g$=I5;new em(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t,e){return e?Eo(e):(Vt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends b5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function f$(t){return QB(t.auth,new T_(t),t.bypassAuthState)}function v$(t){const{auth:e,user:n}=t;return Vt(n,e,"internal-error"),qB(n,new T_(t),t.bypassAuthState)}async function x$(t){const{auth:e,user:n}=t;return Vt(n,e,"internal-error"),KB(n,new T_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f$;case"linkViaPopup":case"linkViaRedirect":return x$;case"reauthViaPopup":case"reauthViaRedirect":return v$;default:Ja(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new em(2e3,1e4);async function b$(t,e,n){if(za(t.app))return Promise.reject(wa(t,"operation-not-supported-in-this-environment"));const r=tm(t);gB(t,e,k_);const i=A5(r,n);return new Bc(r,"signInViaPopup",e,i).executeNotNull()}class Bc extends E5{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Bc.currentPopupAction&&Bc.currentPopupAction.cancel(),Bc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vt(e,this.auth,"internal-error"),e}async onExecution(){Oo(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y$.get())};e()}}Bc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$="pendingRedirect",kf=new Map;class w$ extends E5{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const r=await j$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j$(t,e){const n=k$(e),r=N$(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function S$(t,e){kf.set(t._key(),e)}function N$(t){return Eo(t._redirectPersistence)}function k$(t){return Nf(_$,t.config.apiKey,t.name)}async function C$(t,e,n=!1){if(za(t.app))return Promise.reject(zl(t));const r=tm(t),i=A5(r,e),o=await new w$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=600*1e3;class I${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R5(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T$&&this.cachedEventUids.clear(),this.cachedEventUids.has(kN(e))}saveEventToCache(e){this.cachedEventUids.add(kN(e)),this.lastProcessedEventTime=Date.now()}}function kN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R5({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R5(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t,e={}){return Vu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P$=/^https?/;async function L$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E$(t);for(const n of e)try{if(D$(n))return}catch(r){}Ja(t,"unauthorized-domain")}function D$(t){const e=d1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!P$.test(n))return!1;if(R$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=new em(3e4,6e4);function CN(){const t=Ha().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function F$(t){return new Promise((e,n)=>{var r,i,a;function o(){CN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CN(),n(wa(t,"network-request-failed"))},timeout:M$.get()})}if(!((i=(r=Ha().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ha().gapi)===null||a===void 0)&&a.load)o();else{const c=OB("iframefcb");return Ha()[c]=()=>{gapi.load?o():n(wa(t,"network-request-failed"))},BB(`${$B()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Cf=null,e})}let Cf=null;function B$(t){return Cf=Cf||F$(t),Cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=new em(5e3,15e3),O$="__/auth/iframe",V$="emulator/auth/iframe",U$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z$(t){const e=t.config;Vt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?w_(e,V$):`https://${t.config.authDomain}/${O$}`,r={apiKey:e.apiKey,appName:t.name,v:Ou},i=G$.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Zp(r).slice(1)}`}async function H$(t){const e=await B$(t),n=Ha().gapi;return Vt(n,t,"internal-error"),e.open({where:document.body,url:z$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U$,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=wa(t,"network-request-failed"),c=Ha().setTimeout(()=>{a(o)},$$.get());function u(){Ha().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K$=500,q$=600,Q$="_blank",Y$="http://localhost";class TN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function X$(t,e,n,r=K$,i=q$){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},W$),{width:r.toString(),height:i.toString(),top:a,left:o}),h=Ar().toLowerCase();n&&(c=h5(h)?Q$:n),d5(h)&&(e=e||Y$,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[_,w])=>`${y}${_}=${w},`,"");if(AB(h)&&c!=="_self")return J$(e||"",c),new TN(null);const g=window.open(e||"",c,p);Vt(g,t,"popup-blocked");try{g.focus()}catch(y){}return new TN(g)}function J$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="__/auth/handler",eO="emulator/auth/handler",tO=encodeURIComponent("fac");async function IN(t,e,n,r,i,a){Vt(t.config.authDomain,t,"auth-domain-config-required"),Vt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ou,eventId:i};if(e instanceof k_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof sm){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${tO}=${encodeURIComponent(u)}`:"";return`${sO(t)}?${Zp(c).slice(1)}${h}`}function sO({config:t}){return t.emulator?w_(t,eO):`https://${t.authDomain}/${Z$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N5,this._completeRedirectFn=C$,this._overrideRedirectResult=S$}async _openPopup(e,n,r,i){var a;Oo((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await IN(e,n,r,d1(),i);return X$(e,o,C_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await IN(e,n,r,d1(),i);return a$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Oo(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H$(e),r=new I$(e);return n.register("authEvent",i=>(Vt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(j0,{type:j0},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[j0];o!==void 0&&n(!!o),Ja(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return v5()||u5()||S_()}}const rO=nO;var AN="@firebase/auth",EN="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(t){ju(new Xc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Vt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x5(t)},h=new MB(r,i,a,u);return UB(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ju(new Xc("auth-internal",e=>{const n=tm(e.getProvider("auth").getImmediate());return(r=>new iO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gl(AN,EN,aO(t)),Gl(AN,EN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=300,cO=Q3("authIdTokenMaxAge")||lO;let RN=null;const dO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cO)return;const i=n==null?void 0:n.token;RN!==i&&(RN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uO(t=x_()){const e=v_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VB(t,{popupRedirectResolver:rO,persistence:[g$,n$,N5]}),r=Q3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=dO(a.toString());JB(n,o,()=>o(n.currentUser)),XB(n,c=>o(c))}}const i=K3("auth");return i&&GB(n,`http://${i}`),n}function hO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=wa("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",hO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");var PN=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zc,P5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function C(){}C.prototype=S.prototype,j.D=S.prototype,j.prototype=new C,j.prototype.constructor=j,j.C=function(M,T,D){for(var F=Array(arguments.length-2),V=2;V<arguments.length;V++)F[V-2]=arguments[V];return S.prototype[T].apply(M,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,S,C){C||(C=0);var M=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)M[T]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(T=0;16>T;++T)M[T]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=j.g[0],C=j.g[1],T=j.g[2];var D=j.g[3],F=S+(D^C&(T^D))+M[0]+3614090360&4294967295;S=C+(F<<7&4294967295|F>>>25),F=D+(T^S&(C^T))+M[1]+3905402710&4294967295,D=S+(F<<12&4294967295|F>>>20),F=T+(C^D&(S^C))+M[2]+606105819&4294967295,T=D+(F<<17&4294967295|F>>>15),F=C+(S^T&(D^S))+M[3]+3250441966&4294967295,C=T+(F<<22&4294967295|F>>>10),F=S+(D^C&(T^D))+M[4]+4118548399&4294967295,S=C+(F<<7&4294967295|F>>>25),F=D+(T^S&(C^T))+M[5]+1200080426&4294967295,D=S+(F<<12&4294967295|F>>>20),F=T+(C^D&(S^C))+M[6]+2821735955&4294967295,T=D+(F<<17&4294967295|F>>>15),F=C+(S^T&(D^S))+M[7]+4249261313&4294967295,C=T+(F<<22&4294967295|F>>>10),F=S+(D^C&(T^D))+M[8]+1770035416&4294967295,S=C+(F<<7&4294967295|F>>>25),F=D+(T^S&(C^T))+M[9]+2336552879&4294967295,D=S+(F<<12&4294967295|F>>>20),F=T+(C^D&(S^C))+M[10]+4294925233&4294967295,T=D+(F<<17&4294967295|F>>>15),F=C+(S^T&(D^S))+M[11]+2304563134&4294967295,C=T+(F<<22&4294967295|F>>>10),F=S+(D^C&(T^D))+M[12]+1804603682&4294967295,S=C+(F<<7&4294967295|F>>>25),F=D+(T^S&(C^T))+M[13]+4254626195&4294967295,D=S+(F<<12&4294967295|F>>>20),F=T+(C^D&(S^C))+M[14]+2792965006&4294967295,T=D+(F<<17&4294967295|F>>>15),F=C+(S^T&(D^S))+M[15]+1236535329&4294967295,C=T+(F<<22&4294967295|F>>>10),F=S+(T^D&(C^T))+M[1]+4129170786&4294967295,S=C+(F<<5&4294967295|F>>>27),F=D+(C^T&(S^C))+M[6]+3225465664&4294967295,D=S+(F<<9&4294967295|F>>>23),F=T+(S^C&(D^S))+M[11]+643717713&4294967295,T=D+(F<<14&4294967295|F>>>18),F=C+(D^S&(T^D))+M[0]+3921069994&4294967295,C=T+(F<<20&4294967295|F>>>12),F=S+(T^D&(C^T))+M[5]+3593408605&4294967295,S=C+(F<<5&4294967295|F>>>27),F=D+(C^T&(S^C))+M[10]+38016083&4294967295,D=S+(F<<9&4294967295|F>>>23),F=T+(S^C&(D^S))+M[15]+3634488961&4294967295,T=D+(F<<14&4294967295|F>>>18),F=C+(D^S&(T^D))+M[4]+3889429448&4294967295,C=T+(F<<20&4294967295|F>>>12),F=S+(T^D&(C^T))+M[9]+568446438&4294967295,S=C+(F<<5&4294967295|F>>>27),F=D+(C^T&(S^C))+M[14]+3275163606&4294967295,D=S+(F<<9&4294967295|F>>>23),F=T+(S^C&(D^S))+M[3]+4107603335&4294967295,T=D+(F<<14&4294967295|F>>>18),F=C+(D^S&(T^D))+M[8]+1163531501&4294967295,C=T+(F<<20&4294967295|F>>>12),F=S+(T^D&(C^T))+M[13]+2850285829&4294967295,S=C+(F<<5&4294967295|F>>>27),F=D+(C^T&(S^C))+M[2]+4243563512&4294967295,D=S+(F<<9&4294967295|F>>>23),F=T+(S^C&(D^S))+M[7]+1735328473&4294967295,T=D+(F<<14&4294967295|F>>>18),F=C+(D^S&(T^D))+M[12]+2368359562&4294967295,C=T+(F<<20&4294967295|F>>>12),F=S+(C^T^D)+M[5]+4294588738&4294967295,S=C+(F<<4&4294967295|F>>>28),F=D+(S^C^T)+M[8]+2272392833&4294967295,D=S+(F<<11&4294967295|F>>>21),F=T+(D^S^C)+M[11]+1839030562&4294967295,T=D+(F<<16&4294967295|F>>>16),F=C+(T^D^S)+M[14]+4259657740&4294967295,C=T+(F<<23&4294967295|F>>>9),F=S+(C^T^D)+M[1]+2763975236&4294967295,S=C+(F<<4&4294967295|F>>>28),F=D+(S^C^T)+M[4]+1272893353&4294967295,D=S+(F<<11&4294967295|F>>>21),F=T+(D^S^C)+M[7]+4139469664&4294967295,T=D+(F<<16&4294967295|F>>>16),F=C+(T^D^S)+M[10]+3200236656&4294967295,C=T+(F<<23&4294967295|F>>>9),F=S+(C^T^D)+M[13]+681279174&4294967295,S=C+(F<<4&4294967295|F>>>28),F=D+(S^C^T)+M[0]+3936430074&4294967295,D=S+(F<<11&4294967295|F>>>21),F=T+(D^S^C)+M[3]+3572445317&4294967295,T=D+(F<<16&4294967295|F>>>16),F=C+(T^D^S)+M[6]+76029189&4294967295,C=T+(F<<23&4294967295|F>>>9),F=S+(C^T^D)+M[9]+3654602809&4294967295,S=C+(F<<4&4294967295|F>>>28),F=D+(S^C^T)+M[12]+3873151461&4294967295,D=S+(F<<11&4294967295|F>>>21),F=T+(D^S^C)+M[15]+530742520&4294967295,T=D+(F<<16&4294967295|F>>>16),F=C+(T^D^S)+M[2]+3299628645&4294967295,C=T+(F<<23&4294967295|F>>>9),F=S+(T^(C|~D))+M[0]+4096336452&4294967295,S=C+(F<<6&4294967295|F>>>26),F=D+(C^(S|~T))+M[7]+1126891415&4294967295,D=S+(F<<10&4294967295|F>>>22),F=T+(S^(D|~C))+M[14]+2878612391&4294967295,T=D+(F<<15&4294967295|F>>>17),F=C+(D^(T|~S))+M[5]+4237533241&4294967295,C=T+(F<<21&4294967295|F>>>11),F=S+(T^(C|~D))+M[12]+1700485571&4294967295,S=C+(F<<6&4294967295|F>>>26),F=D+(C^(S|~T))+M[3]+2399980690&4294967295,D=S+(F<<10&4294967295|F>>>22),F=T+(S^(D|~C))+M[10]+4293915773&4294967295,T=D+(F<<15&4294967295|F>>>17),F=C+(D^(T|~S))+M[1]+2240044497&4294967295,C=T+(F<<21&4294967295|F>>>11),F=S+(T^(C|~D))+M[8]+1873313359&4294967295,S=C+(F<<6&4294967295|F>>>26),F=D+(C^(S|~T))+M[15]+4264355552&4294967295,D=S+(F<<10&4294967295|F>>>22),F=T+(S^(D|~C))+M[6]+2734768916&4294967295,T=D+(F<<15&4294967295|F>>>17),F=C+(D^(T|~S))+M[13]+1309151649&4294967295,C=T+(F<<21&4294967295|F>>>11),F=S+(T^(C|~D))+M[4]+4149444226&4294967295,S=C+(F<<6&4294967295|F>>>26),F=D+(C^(S|~T))+M[11]+3174756917&4294967295,D=S+(F<<10&4294967295|F>>>22),F=T+(S^(D|~C))+M[2]+718787259&4294967295,T=D+(F<<15&4294967295|F>>>17),F=C+(D^(T|~S))+M[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(T+(F<<21&4294967295|F>>>11))&4294967295,j.g[2]=j.g[2]+T&4294967295,j.g[3]=j.g[3]+D&4294967295}r.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var C=S-this.blockSize,M=this.B,T=this.h,D=0;D<S;){if(T==0)for(;D<=C;)i(this,j,D),D+=this.blockSize;if(typeof j=="string"){for(;D<S;)if(M[T++]=j.charCodeAt(D++),T==this.blockSize){i(this,M),T=0;break}}else for(;D<S;)if(M[T++]=j[D++],T==this.blockSize){i(this,M),T=0;break}}this.h=T,this.o+=S},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var C=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=C&255,C/=256;for(this.u(j),j=Array(16),S=C=0;4>S;++S)for(var M=0;32>M;M+=8)j[C++]=this.g[S]>>>M&255;return j};function a(j,S){var C=c;return Object.prototype.hasOwnProperty.call(C,j)?C[j]:C[j]=S(j)}function o(j,S){this.h=S;for(var C=[],M=!0,T=j.length-1;0<=T;T--){var D=j[T]|0;M&&D==S||(C[T]=D,M=!1)}this.g=C}var c={};function u(j){return-128<=j&&128>j?a(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function h(j){if(isNaN(j)||!isFinite(j))return g;if(0>j)return E(h(-j));for(var S=[],C=1,M=0;j>=C;M++)S[M]=j/C|0,C*=4294967296;return new o(S,0)}function p(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return E(p(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(S,8)),M=g,T=0;T<j.length;T+=8){var D=Math.min(8,j.length-T),F=parseInt(j.substring(T,T+D),S);8>D?(D=h(Math.pow(S,D)),M=M.j(D).add(h(F))):(M=M.j(C),M=M.add(h(F)))}return M}var g=u(0),y=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-E(this).m();for(var j=0,S=1,C=0;C<this.g.length;C++){var M=this.i(C);j+=(0<=M?M:4294967296+M)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(w(this))return"0";if(k(this))return"-"+E(this).toString(j);for(var S=h(Math.pow(j,6)),C=this,M="";;){var T=v(C,S).g;C=P(C,T.j(S));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(j);if(C=T,w(C))return D+M;for(;6>D.length;)D="0"+D;M=D+M}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function w(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function k(j){return j.h==-1}t.l=function(j){return j=P(this,j),k(j)?-1:w(j)?0:1};function E(j){for(var S=j.g.length,C=[],M=0;M<S;M++)C[M]=~j.g[M];return new o(C,~j.h).add(y)}t.abs=function(){return k(this)?E(this):this},t.add=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0,T=0;T<=S;T++){var D=M+(this.i(T)&65535)+(j.i(T)&65535),F=(D>>>16)+(this.i(T)>>>16)+(j.i(T)>>>16);M=F>>>16,D&=65535,F&=65535,C[T]=F<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function P(j,S){return j.add(E(S))}t.j=function(j){if(w(this)||w(j))return g;if(k(this))return k(j)?E(this).j(E(j)):E(E(this).j(j));if(k(j))return E(this.j(E(j)));if(0>this.l(_)&&0>j.l(_))return h(this.m()*j.m());for(var S=this.g.length+j.g.length,C=[],M=0;M<2*S;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var T=0;T<j.g.length;T++){var D=this.i(M)>>>16,F=this.i(M)&65535,V=j.i(T)>>>16,z=j.i(T)&65535;C[2*M+2*T]+=F*z,L(C,2*M+2*T),C[2*M+2*T+1]+=D*z,L(C,2*M+2*T+1),C[2*M+2*T+1]+=F*V,L(C,2*M+2*T+1),C[2*M+2*T+2]+=D*V,L(C,2*M+2*T+2)}for(M=0;M<S;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=S;M<2*S;M++)C[M]=0;return new o(C,0)};function L(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function N(j,S){this.g=j,this.h=S}function v(j,S){if(w(S))throw Error("division by zero");if(w(j))return new N(g,g);if(k(j))return S=v(E(j),S),new N(E(S.g),E(S.h));if(k(S))return S=v(j,E(S)),new N(E(S.g),S.h);if(30<j.g.length){if(k(j)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var C=y,M=S;0>=M.l(j);)C=b(C),M=b(M);var T=I(C,1),D=I(M,1);for(M=I(M,2),C=I(C,2);!w(M);){var F=D.add(M);0>=F.l(j)&&(T=T.add(C),D=F),M=I(M,1),C=I(C,1)}return S=P(j,T.j(S)),new N(T,S)}for(T=g;0<=j.l(S);){for(C=Math.max(1,Math.floor(j.m()/S.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),D=h(C),F=D.j(S);k(F)||0<F.l(j);)C-=M,D=h(C),F=D.j(S);w(D)&&(D=y),T=T.add(D),j=P(j,F)}return new N(T,j)}t.A=function(j){return v(this,j).h},t.and=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)&j.i(M);return new o(C,this.h&j.h)},t.or=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)|j.i(M);return new o(C,this.h|j.h)},t.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),C=[],M=0;M<S;M++)C[M]=this.i(M)^j.i(M);return new o(C,this.h^j.h)};function b(j){for(var S=j.g.length+1,C=[],M=0;M<S;M++)C[M]=j.i(M)<<1|j.i(M-1)>>>31;return new o(C,j.h)}function I(j,S){var C=S>>5;S%=32;for(var M=j.g.length-C,T=[],D=0;D<M;D++)T[D]=0<S?j.i(D+C)>>>S|j.i(D+C+1)<<32-S:j.i(D+C);return new o(T,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,zc=o}).apply(typeof PN!="undefined"?PN:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Vg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L5,Yh,D5,Tf,p1,M5,F5,B5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,B,O){return f==Array.prototype||f==Object.prototype||(f[B]=O.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vg=="object"&&Vg];for(var B=0;B<f.length;++B){var O=f[B];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(f,B){if(B)e:{var O=r;f=f.split(".");for(var Q=0;Q<f.length-1;Q++){var ge=f[Q];if(!(ge in O))break e;O=O[ge]}f=f[f.length-1],Q=O[f],B=B(Q),B!=Q&&B!=null&&e(O,f,{configurable:!0,writable:!0,value:B})}}function a(f,B){f instanceof String&&(f+="");var O=0,Q=!1,ge={next:function(){if(!Q&&O<f.length){var je=O++;return{value:B(je,f[je]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}i("Array.prototype.values",function(f){return f||function(){return a(this,function(B,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(f){var B=typeof f;return B=B!="object"?B:f?Array.isArray(f)?"array":B:"null",B=="array"||B=="object"&&typeof f.length=="number"}function h(f){var B=typeof f;return B=="object"&&f!=null||B=="function"}function p(f,B,O){return f.call.apply(f.bind,arguments)}function g(f,B,O){if(!f)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,Q),f.apply(B,ge)}}return function(){return f.apply(B,arguments)}}function y(f,B,O){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,y.apply(null,arguments)}function _(f,B){var O=Array.prototype.slice.call(arguments,1);return function(){var Q=O.slice();return Q.push.apply(Q,arguments),f.apply(this,Q)}}function w(f,B){function O(){}O.prototype=B.prototype,f.aa=B.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(Q,ge,je){for(var Je=Array(arguments.length-2),Ms=2;Ms<arguments.length;Ms++)Je[Ms-2]=arguments[Ms];return B.prototype[ge].apply(Q,Je)}}function k(f){const B=f.length;if(0<B){const O=Array(B);for(let Q=0;Q<B;Q++)O[Q]=f[Q];return O}return[]}function E(f,B){for(let O=1;O<arguments.length;O++){const Q=arguments[O];if(u(Q)){const ge=f.length||0,je=Q.length||0;f.length=ge+je;for(let Je=0;Je<je;Je++)f[ge+Je]=Q[Je]}else f.push(Q)}}class P{constructor(B,O){this.i=B,this.j=O,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function L(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function v(f){return v[" "](f),f}v[" "]=function(){};var b=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function I(f,B,O){for(const Q in f)B.call(O,f[Q],Q,f)}function j(f,B){for(const O in f)B.call(void 0,f[O],O,f)}function S(f){const B={};for(const O in f)B[O]=f[O];return B}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,B){let O,Q;for(let ge=1;ge<arguments.length;ge++){Q=arguments[ge];for(O in Q)f[O]=Q[O];for(let je=0;je<C.length;je++)O=C[je],Object.prototype.hasOwnProperty.call(Q,O)&&(f[O]=Q[O])}}function T(f){var B=1;f=f.split(":");const O=[];for(;0<B&&f.length;)O.push(f.shift()),B--;return f.length&&O.push(f.join(":")),O}function D(f){c.setTimeout(()=>{throw f},0)}function F(){var f=ne;let B=null;return f.g&&(B=f.g,f.g=f.g.next,f.g||(f.h=null),B.next=null),B}class V{constructor(){this.h=this.g=null}add(B,O){const Q=z.get();Q.set(B,O),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var z=new P(()=>new q,f=>f.reset());class q{constructor(){this.next=this.g=this.h=null}set(B,O){this.h=B,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let H,K=!1,ne=new V,Y=()=>{const f=c.Promise.resolve(void 0);H=()=>{f.then(G)}};var G=()=>{for(var f;f=F();){try{f.h.call(f.g)}catch(O){D(O)}var B=z;B.j(f),100>B.h&&(B.h++,f.next=B.g,B.g=f)}K=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(f,B){this.type=f,this.g=this.target=B,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,B=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};c.addEventListener("test",O,B),c.removeEventListener("test",O,B)}catch(O){}return f})();function Z(f,B){if(te.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,Q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=B,B=f.relatedTarget){if(b){e:{try{v(B.nodeName);var ge=!0;break e}catch(je){}ge=!1}ge||(B=null)}}else O=="mouseover"?B=f.fromElement:O=="mouseout"&&(B=f.toElement);this.relatedTarget=B,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ve[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Z.aa.h.call(this)}}w(Z,te);var ve={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),J=0;function ue(f,B,O,Q,ge){this.listener=f,this.proxy=null,this.src=B,this.type=O,this.capture=!!Q,this.ha=ge,this.key=++J,this.da=this.fa=!1}function ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function me(f){this.src=f,this.g={},this.h=0}me.prototype.add=function(f,B,O,Q,ge){var je=f.toString();f=this.g[je],f||(f=this.g[je]=[],this.h++);var Je=he(f,B,Q,ge);return-1<Je?(B=f[Je],O||(B.fa=!1)):(B=new ue(B,this.src,je,!!Q,ge),B.fa=O,f.push(B)),B};function ce(f,B){var O=B.type;if(O in f.g){var Q=f.g[O],ge=Array.prototype.indexOf.call(Q,B,void 0),je;(je=0<=ge)&&Array.prototype.splice.call(Q,ge,1),je&&(ie(B),f.g[O].length==0&&(delete f.g[O],f.h--))}}function he(f,B,O,Q){for(var ge=0;ge<f.length;++ge){var je=f[ge];if(!je.da&&je.listener==B&&je.capture==!!O&&je.ha==Q)return ge}return-1}var Ne="closure_lm_"+(1e6*Math.random()|0),Te={};function xe(f,B,O,Q,ge){if(Array.isArray(B)){for(var je=0;je<B.length;je++)xe(f,B[je],O,Q,ge);return null}return O=Ue(O),f&&f[Se]?f.K(B,O,h(Q)?!!Q.capture:!1,ge):Ie(f,B,O,!1,Q,ge)}function Ie(f,B,O,Q,ge,je){if(!B)throw Error("Invalid event type");var Je=h(ge)?!!ge.capture:!!ge,Ms=nt(f);if(Ms||(f[Ne]=Ms=new me(f)),O=Ms.add(B,O,Q,Je,je),O.proxy)return O;if(Q=$e(),O.proxy=Q,Q.src=f,Q.listener=O,f.addEventListener)se||(ge=Je),ge===void 0&&(ge=!1),f.addEventListener(B.toString(),Q,ge);else if(f.attachEvent)f.attachEvent(Be(B.toString()),Q);else if(f.addListener&&f.removeListener)f.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return O}function $e(){function f(O){return B.call(f.src,f.listener,O)}const B=Ve;return f}function Xe(f,B,O,Q,ge){if(Array.isArray(B))for(var je=0;je<B.length;je++)Xe(f,B[je],O,Q,ge);else Q=h(Q)?!!Q.capture:!!Q,O=Ue(O),f&&f[Se]?(f=f.i,B=String(B).toString(),B in f.g&&(je=f.g[B],O=he(je,O,Q,ge),-1<O&&(ie(je[O]),Array.prototype.splice.call(je,O,1),je.length==0&&(delete f.g[B],f.h--)))):f&&(f=nt(f))&&(B=f.g[B.toString()],f=-1,B&&(f=he(B,O,Q,ge)),(O=-1<f?B[f]:null)&&be(O))}function be(f){if(typeof f!="number"&&f&&!f.da){var B=f.src;if(B&&B[Se])ce(B.i,f);else{var O=f.type,Q=f.proxy;B.removeEventListener?B.removeEventListener(O,Q,f.capture):B.detachEvent?B.detachEvent(Be(O),Q):B.addListener&&B.removeListener&&B.removeListener(Q),(O=nt(B))?(ce(O,f),O.h==0&&(O.src=null,B[Ne]=null)):ie(f)}}}function Be(f){return f in Te?Te[f]:Te[f]="on"+f}function Ve(f,B){if(f.da)f=!0;else{B=new Z(B,this);var O=f.listener,Q=f.ha||f.src;f.fa&&be(f),f=O.call(Q,B)}return f}function nt(f){return f=f[Ne],f instanceof me?f:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(f){return typeof f=="function"?f:(f[ht]||(f[ht]=function(B){return f.handleEvent(B)}),f[ht])}function Ee(){X.call(this),this.i=new me(this),this.M=this,this.F=null}w(Ee,X),Ee.prototype[Se]=!0,Ee.prototype.removeEventListener=function(f,B,O,Q){Xe(this,f,B,O,Q)};function He(f,B){var O,Q=f.F;if(Q)for(O=[];Q;Q=Q.F)O.push(Q);if(f=f.M,Q=B.type||B,typeof B=="string")B=new te(B,f);else if(B instanceof te)B.target=B.target||f;else{var ge=B;B=new te(Q,f),M(B,ge)}if(ge=!0,O)for(var je=O.length-1;0<=je;je--){var Je=B.g=O[je];ge=St(Je,Q,!0,B)&&ge}if(Je=B.g=f,ge=St(Je,Q,!0,B)&&ge,ge=St(Je,Q,!1,B)&&ge,O)for(je=0;je<O.length;je++)Je=B.g=O[je],ge=St(Je,Q,!1,B)&&ge}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var f=this.i,B;for(B in f.g){for(var O=f.g[B],Q=0;Q<O.length;Q++)ie(O[Q]);delete f.g[B],f.h--}}this.F=null},Ee.prototype.K=function(f,B,O,Q){return this.i.add(String(f),B,!1,O,Q)},Ee.prototype.L=function(f,B,O,Q){return this.i.add(String(f),B,!0,O,Q)};function St(f,B,O,Q){if(B=f.i.g[String(B)],!B)return!0;B=B.concat();for(var ge=!0,je=0;je<B.length;++je){var Je=B[je];if(Je&&!Je.da&&Je.capture==O){var Ms=Je.listener,Un=Je.ha||Je.src;Je.fa&&ce(f.i,Je),ge=Ms.call(Un,Q)!==!1&&ge}}return ge&&!Q.defaultPrevented}function Ct(f,B,O){if(typeof f=="function")O&&(f=y(f,O));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:c.setTimeout(f,B||0)}function ns(f){f.g=Ct(()=>{f.g=null,f.i&&(f.i=!1,ns(f))},f.l);const B=f.h;f.h=null,f.m.apply(null,B)}class Rt extends X{constructor(B,O){super(),this.m=B,this.l=O,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:ns(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(f){X.call(this),this.h=f,this.g={}}w(Gt,X);var Ps=[];function _t(f){I(f.g,function(B,O){this.g.hasOwnProperty(O)&&be(B)},f),f.g={}}Gt.prototype.N=function(){Gt.aa.N.call(this),_t(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=c.JSON.stringify,ks=c.JSON.parse,Ht=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function re(){}re.prototype.h=null;function qe(f){return f.h||(f.h=f.i())}function tt(){}var ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function st(){te.call(this,"d")}w(st,te);function Pt(){te.call(this,"c")}w(Pt,te);var as={},os=null;function _n(){return os=os||new Ee}as.La="serverreachability";function Vn(f){te.call(this,as.La,f)}w(Vn,te);function rn(f){const B=_n();He(B,new Vn(B))}as.STAT_EVENT="statevent";function Ls(f,B){te.call(this,as.STAT_EVENT,f),this.stat=B}w(Ls,te);function js(f){const B=_n();He(B,new Ls(B,f))}as.Ma="timingevent";function ar(f,B){te.call(this,as.Ma,f),this.size=B}w(ar,te);function wn(f,B){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},B)}function Er(){this.g=!0}Er.prototype.xa=function(){this.g=!1};function Rr(f,B,O,Q,ge,je){f.info(function(){if(f.g)if(je)for(var Je="",Ms=je.split("&"),Un=0;Un<Ms.length;Un++){var gs=Ms[Un].split("=");if(1<gs.length){var Kn=gs[0];gs=gs[1];var En=Kn.split("_");Je=2<=En.length&&En[1]=="type"?Je+(Kn+"="+gs+"&"):Je+(Kn+"=redacted&")}}else Je=null;else Je=je;return"XMLHTTP REQ ("+Q+") [attempt "+ge+"]: "+B+`
`+O+`
`+Je})}function Pr(f,B,O,Q,ge,je,Je){f.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+ge+"]: "+B+`
`+O+`
`+je+" "+Je})}function Wn(f,B,O,Q){f.info(function(){return"XMLHTTP TEXT ("+B+"): "+$s(f,O)+(Q?" "+Q:"")})}function ms(f,B){f.info(function(){return"TIMEOUT: "+B})}Er.prototype.info=function(){};function $s(f,B){if(!f.g)return B;if(!B)return null;try{var O=JSON.parse(B);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var Q=O[f];if(!(2>Q.length)){var ge=Q[1];if(Array.isArray(ge)&&!(1>ge.length)){var je=ge[0];if(je!="noop"&&je!="stop"&&je!="close")for(var Je=1;Je<ge.length;Je++)ge[Je]=""}}}}return Ae(O)}catch(Ms){return B}}var or={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function Ta(){}w(Ta,re),Ta.prototype.g=function(){return new XMLHttpRequest},Ta.prototype.i=function(){return{}},es=new Ta;function Zr(f,B,O,Q){this.j=f,this.i=B,this.l=O,this.R=Q||1,this.U=new Gt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ec}function ec(){this.i=null,this.g="",this.h=!1}var Qo={},so={};function no(f,B,O){f.L=1,f.v=el(bi(B)),f.m=O,f.P=!0,Yo(f,null)}function Yo(f,B){f.F=Date.now(),Ds(f),f.A=bi(f.v);var O=f.A,Q=f.R;Array.isArray(Q)||(Q=[String(Q)]),sl(O.i,"t",Q),f.C=0,O=f.j.J,f.h=new ec,f.g=Um(f.j,O?B:null,!f.m),0<f.O&&(f.M=new Rt(y(f.Y,f,f.g),f.O)),B=f.U,O=f.g,Q=f.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(Ps[0]=ge.toString()),ge=Ps);for(var je=0;je<ge.length;je++){var Je=xe(O,ge[je],Q||B.handleEvent,!1,B.h||B);if(!Je)break;B.g[Je.key]=Je}B=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,B)):(f.u="GET",f.g.ea(f.A,f.u,null,B)),rn(),Rr(f.i,f.u,f.A,f.l,f.R,f.m)}Zr.prototype.ca=function(f){f=f.target;const B=this.M;B&&ti(f)==3?B.j():this.Y(f)},Zr.prototype.Y=function(f){try{if(f==this.g)e:{const En=ti(this.g);var B=this.g.Ba();const $i=this.g.Z();if(!(3>En)&&(En!=3||this.g&&(this.h.h||this.g.oa()||ih(this.g)))){this.J||En!=4||B==7||(B==8||0>=$i?rn(3):rn(2)),Ia(this);var O=this.g.Z();this.X=O;t:if(tc(this)){var Q=ih(this.g);f="";var ge=Q.length,je=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Lr(this),ta(this);var Je="";break t}this.h.i=new c.TextDecoder}for(B=0;B<ge;B++)this.h.h=!0,f+=this.h.i.decode(Q[B],{stream:!(je&&B==ge-1)});Q.length=0,this.h.g+=f,this.C=0,Je=this.h.g}else Je=this.g.oa();if(this.o=O==200,Pr(this.i,this.u,this.A,this.l,this.R,En,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Ms,Un=this.g;if((Ms=Un.g?Un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Ms)){var gs=Ms;break t}}gs=null}if(O=gs)Wn(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eh(this,O);else{this.o=!1,this.s=3,js(12),Lr(this),ta(this);break e}}if(this.P){O=!0;let wi;for(;!this.J&&this.C<Je.length;)if(wi=md(this,Je),wi==so){En==4&&(this.s=4,js(14),O=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(wi==Qo){this.s=4,js(15),Wn(this.i,this.l,Je,"[Invalid Chunk]"),O=!1;break}else Wn(this.i,this.l,wi,null),eh(this,wi);if(tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),En!=4||Je.length!=0||this.h.h||(this.s=1,js(16),O=!1),this.o=this.o&&O,!O)Wn(this.i,this.l,Je,"[Invalid Chunked Response]"),Lr(this),ta(this);else if(0<Je.length&&!this.W){this.W=!0;var Kn=this.j;Kn.g==this&&Kn.ba&&!Kn.M&&(Kn.j.info("Great, no buffering proxy detected. Bytes received: "+Je.length),oh(Kn),Kn.M=!0,js(11))}}else Wn(this.i,this.l,Je,null),eh(this,Je);En==4&&Lr(this),this.o&&!this.J&&(En==4?Nd(this.j,this):(this.o=!1,Ds(this)))}else bd(this.g),O==400&&0<Je.indexOf("Unknown SID")?(this.s=3,js(12)):(this.s=0,js(13)),Lr(this),ta(this)}}}catch(En){}finally{}};function tc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function md(f,B){var O=f.C,Q=B.indexOf(`
`,O);return Q==-1?so:(O=Number(B.substring(O,Q)),isNaN(O)?Qo:(Q+=1,Q+O>B.length?so:(B=B.slice(Q,Q+O),f.C=Q+O,B)))}Zr.prototype.cancel=function(){this.J=!0,Lr(this)};function Ds(f){f.S=Date.now()+f.I,sc(f,f.I)}function sc(f,B){if(f.B!=null)throw Error("WatchDog timer not null");f.B=wn(y(f.ba,f),B)}function Ia(f){f.B&&(c.clearTimeout(f.B),f.B=null)}Zr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ms(this.i,this.A),this.L!=2&&(rn(),js(17)),Lr(this),this.s=2,ta(this)):sc(this,this.S-f)};function ta(f){f.j.G==0||f.J||Nd(f.j,f)}function Lr(f){Ia(f);var B=f.M;B&&typeof B.ma=="function"&&B.ma(),f.M=null,_t(f.U),f.g&&(B=f.g,f.g=null,B.abort(),B.ma())}function eh(f,B){try{var O=f.j;if(O.G!=0&&(O.g==f||Dr(O.h,f))){if(!f.K&&Dr(O.h,f)&&O.G==3){try{var Q=O.Da.g.parse(B)}catch(gs){Q=null}if(Array.isArray(Q)&&Q.length==3){var ge=Q;if(ge[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)Sd(O),aa(O);else break e;jd(O),js(18)}}else O.za=ge[1],0<O.za-O.T&&37500>ge[2]&&O.F&&O.v==0&&!O.C&&(O.C=wn(y(O.Za,O),6e3));if(1>=Tm(O.h)&&O.ca){try{O.ca()}catch(gs){}O.ca=void 0}}else lo(O,11)}else if((f.K||O.g==f)&&Sd(O),!L(B))for(ge=O.Da.g.parse(B),B=0;B<ge.length;B++){let gs=ge[B];if(O.T=gs[0],gs=gs[1],O.G==2)if(gs[0]=="c"){O.K=gs[1],O.ia=gs[2];const Kn=gs[3];Kn!=null&&(O.la=Kn,O.j.info("VER="+O.la));const En=gs[4];En!=null&&(O.Aa=En,O.j.info("SVER="+O.Aa));const $i=gs[5];$i!=null&&typeof $i=="number"&&0<$i&&(Q=1.5*$i,O.L=Q,O.j.info("backChannelRequestTimeoutMs_="+Q)),Q=O;const wi=f.g;if(wi){const cc=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cc){var je=Q.h;je.g||cc.indexOf("spdy")==-1&&cc.indexOf("quic")==-1&&cc.indexOf("h2")==-1||(je.j=je.l,je.g=new Set,je.h&&(th(je,je.h),je.h=null))}if(Q.D){const Cd=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Cd&&(Q.ya=Cd,Os(Q.I,Q.D,Cd))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),Q=O;var Je=f;if(Q.qa=Vm(Q,Q.J?Q.ia:null,Q.W),Je.K){Im(Q.h,Je);var Ms=Je,Un=Q.L;Un&&(Ms.I=Un),Ms.B&&(Ia(Ms),Ds(Ms)),Q.g=Je}else lc(Q);0<O.i.length&&Pa(O)}else gs[0]!="stop"&&gs[0]!="close"||lo(O,7);else O.G==3&&(gs[0]=="stop"||gs[0]=="close"?gs[0]=="stop"?lo(O,7):cr(O):gs[0]!="noop"&&O.l&&O.l.ta(gs),O.v=0)}}rn(4)}catch(gs){}}var Cm=class{constructor(f,B){this.g=f,this.map=B}};function nc(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Tm(f){return f.h?1:f.g?f.g.size:0}function Dr(f,B){return f.h?f.h==B:f.g?f.g.has(B):!1}function th(f,B){f.g?f.g.add(B):f.h=B}function Im(f,B){f.h&&f.h==B?f.h=null:f.g&&f.g.has(B)&&f.g.delete(B)}nc.prototype.cancel=function(){if(this.i=Am(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Am(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let B=f.i;for(const O of f.g.values())B=B.concat(O.D);return B}return k(f.i)}function gd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var B=[],O=f.length,Q=0;Q<O;Q++)B.push(f[Q]);return B}B=[],O=0;for(Q in f)B[O++]=f[Q];return B}function fd(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var B=[];f=f.length;for(var O=0;O<f;O++)B.push(O);return B}B=[],O=0;for(const Q in f)B[O++]=Q;return B}}}function Xo(f,B){if(f.forEach&&typeof f.forEach=="function")f.forEach(B,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,B,void 0);else for(var O=fd(f),Q=gd(f),ge=Q.length,je=0;je<ge;je++)B.call(void 0,Q[je],O&&O[je],f)}var rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $x(f,B){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var Q=f[O].indexOf("="),ge=null;if(0<=Q){var je=f[O].substring(0,Q);ge=f[O].substring(Q+1)}else je=f[O];B(je,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function ro(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ro){this.h=f.h,ic(this,f.j),this.o=f.o,this.g=f.g,Jo(this,f.s),this.l=f.l;var B=f.i,O=new Aa;O.i=B.i,B.g&&(O.g=new Map(B.g),O.h=B.h),Zo(this,O),this.m=f.m}else f&&(B=String(f).match(rc))?(this.h=!1,ic(this,B[1]||"",!0),this.o=us(B[2]||""),this.g=us(B[3]||"",!0),Jo(this,B[4]),this.l=us(B[5]||"",!0),Zo(this,B[6]||"",!0),this.m=us(B[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}ro.prototype.toString=function(){var f=[],B=this.j;B&&f.push(tl(B,vd,!0),":");var O=this.g;return(O||B=="file")&&(f.push("//"),(B=this.o)&&f.push(tl(B,vd,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(tl(O,O.charAt(0)=="/"?Pm:Rm,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",tl(O,sh)),f.join("")};function bi(f){return new ro(f)}function ic(f,B,O){f.j=O?us(B,!0):B,f.j&&(f.j=f.j.replace(/:$/,""))}function Jo(f,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);f.s=B}else f.s=null}function Zo(f,B,O){B instanceof Aa?(f.i=B,Ea(f.i,f.h)):(O||(B=tl(B,Lm)),f.i=new Aa(B,f.h))}function Os(f,B,O){f.i.set(B,O)}function el(f){return Os(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function us(f,B){return f?B?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function tl(f,B,O){return typeof f=="string"?(f=encodeURI(f).replace(B,Em),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Em(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var vd=/[#\/\?@]/g,Rm=/[#\?:]/g,Pm=/[#\?]/g,Lm=/[#\?@]/g,sh=/#/g;function Aa(f,B){this.h=this.g=null,this.i=f||null,this.j=!!B}function lr(f){f.g||(f.g=new Map,f.h=0,f.i&&$x(f.i,function(B,O){f.add(decodeURIComponent(B.replace(/\+/g," ")),O)}))}t=Aa.prototype,t.add=function(f,B){lr(this),this.i=null,f=Bi(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(B),this.h+=1,this};function sa(f,B){lr(f),B=Bi(f,B),f.g.has(B)&&(f.i=null,f.h-=f.g.get(B).length,f.g.delete(B))}function na(f,B){return lr(f),B=Bi(f,B),f.g.has(B)}t.forEach=function(f,B){lr(this),this.g.forEach(function(O,Q){O.forEach(function(ge){f.call(B,ge,Q,this)},this)},this)},t.na=function(){lr(this);const f=Array.from(this.g.values()),B=Array.from(this.g.keys()),O=[];for(let Q=0;Q<B.length;Q++){const ge=f[Q];for(let je=0;je<ge.length;je++)O.push(B[Q])}return O},t.V=function(f){lr(this);let B=[];if(typeof f=="string")na(this,f)&&(B=B.concat(this.g.get(Bi(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)B=B.concat(f[O])}return B},t.set=function(f,B){return lr(this),this.i=null,f=Bi(this,f),na(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[B]),this.h+=1,this},t.get=function(f,B){return f?(f=this.V(f),0<f.length?String(f[0]):B):B};function sl(f,B,O){sa(f,B),0<O.length&&(f.i=null,f.g.set(Bi(f,B),k(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],B=Array.from(this.g.keys());for(var O=0;O<B.length;O++){var Q=B[O];const je=encodeURIComponent(String(Q)),Je=this.V(Q);for(Q=0;Q<Je.length;Q++){var ge=je;Je[Q]!==""&&(ge+="="+encodeURIComponent(String(Je[Q]))),f.push(ge)}}return this.i=f.join("&")};function Bi(f,B){return B=String(B),f.j&&(B=B.toLowerCase()),B}function Ea(f,B){B&&!f.j&&(lr(f),f.i=null,f.g.forEach(function(O,Q){var ge=Q.toLowerCase();Q!=ge&&(sa(this,Q),sl(this,ge,O))},f)),f.j=B}function Ox(f,B){const O=new Er;if(c.Image){const Q=new Image;Q.onload=_(ei,O,"TestLoadImage: loaded",!0,B,Q),Q.onerror=_(ei,O,"TestLoadImage: error",!1,B,Q),Q.onabort=_(ei,O,"TestLoadImage: abort",!1,B,Q),Q.ontimeout=_(ei,O,"TestLoadImage: timeout",!1,B,Q),c.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=f}else B(!1)}function Dm(f,B){const O=new Er,Q=new AbortController,ge=setTimeout(()=>{Q.abort(),ei(O,"TestPingServer: timeout",!1,B)},1e4);fetch(f,{signal:Q.signal}).then(je=>{clearTimeout(ge),je.ok?ei(O,"TestPingServer: ok",!0,B):ei(O,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(ge),ei(O,"TestPingServer: error",!1,B)})}function ei(f,B,O,Q,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),Q(O)}catch(je){}}function Vx(){this.g=new Ht}function Mm(f,B,O){const Q=O||"";try{Xo(f,function(ge,je){let Je=ge;h(ge)&&(Je=Ae(ge)),B.push(Q+je+"="+encodeURIComponent(Je))})}catch(ge){throw B.push(Q+"type="+encodeURIComponent("_badmap")),ge}}function io(f){this.l=f.Ub||null,this.j=f.eb||!1}w(io,re),io.prototype.g=function(){return new ac(this.l,this.j)},io.prototype.i=(function(f){return function(){return f}})({});function ac(f,B){Ee.call(this),this.D=f,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ac,Ee),t=ac.prototype,t.open=function(f,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=B,this.readyState=1,ia(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(B.body=f),(this.D||c).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var B=f.value?f.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!f.done}))&&(this.response=this.responseText+=B)}f.done?ra(this):ia(this),this.readyState==3&&Fm(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ra(this))},t.Qa=function(f){this.g&&(this.response=f,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ia(f)}t.setRequestHeader=function(f,B){this.u.append(f,B)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],B=this.h.entries();for(var O=B.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=B.next();return f.join(`\r
`)};function ia(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ao(f){let B="";return I(f,function(O,Q){B+=Q,B+=":",B+=O,B+=`\r
`}),B}function nl(f,B,O){e:{for(Q in O){var Q=!1;break e}Q=!0}Q||(O=ao(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):Os(f,B,O))}function Js(f){Ee.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Js,Ee);var Ux=/^https?$/i,nh=["POST","PUT"];t=Js.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,B,O,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);B=B?B.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?qe(this.o):qe(es),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(B,String(f),!0),this.B=!1}catch(je){oc(this,je);return}if(f=O||"",O=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var ge in Q)O.set(ge,Q[ge]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const je of Q.keys())O.set(je,Q.get(je));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(O.keys()).find(je=>je.toLowerCase()=="content-type"),ge=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(nh,B,void 0))||Q||ge||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[je,Je]of O)this.g.setRequestHeader(je,Je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yd(this),this.u=!0,this.g.send(f),this.u=!1}catch(je){oc(this,je)}};function oc(f,B){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=B,f.m=5,xd(f),_i(f)}function xd(f){f.A||(f.A=!0,He(f,"complete"),He(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,He(this,"complete"),He(this,"abort"),_i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Js.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rh(this):this.bb())},t.bb=function(){rh(this)};function rh(f){if(f.h&&typeof o!="undefined"&&(!f.v[1]||ti(f)!=4||f.Z()!=2)){if(f.u&&ti(f)==4)Ct(f.Ea,0,f);else if(He(f,"readystatechange"),ti(f)==4){f.h=!1;try{const Je=f.Z();e:switch(Je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var O;if(!(O=B)){var Q;if(Q=Je===0){var ge=String(f.D).match(rc)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),Q=!Ux.test(ge?ge.toLowerCase():"")}O=Q}if(O)He(f,"complete"),He(f,"success");else{f.m=6;try{var je=2<ti(f)?f.g.statusText:""}catch(Ms){je=""}f.l=je+" ["+f.Z()+"]",xd(f)}}finally{_i(f)}}}}function _i(f,B){if(f.g){yd(f);const O=f.g,Q=f.v[0]?()=>{}:null;f.g=null,f.v=null,B||He(f,"ready");try{O.onreadystatechange=Q}catch(ge){}}}function yd(f){f.I&&(c.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function ti(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var B=this.g.responseText;return f&&B.indexOf(f)==0&&(B=B.substring(f.length)),ks(B)}};function ih(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(B){return null}}function bd(f){const B={};f=(f.g&&2<=ti(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<f.length;Q++){if(L(f[Q]))continue;var O=T(f[Q]);const ge=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const je=B[ge]||[];B[ge]=je,je.push(O)}j(B,function(Q){return Q.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ra(f,B,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||B}function ah(f){this.Aa=0,this.i=[],this.j=new Er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ra("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ra("baseRetryDelayMs",5e3,f),this.cb=Ra("retryDelaySeedMs",1e4,f),this.Wa=Ra("forwardChannelMaxRetries",2,f),this.wa=Ra("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new nc(f&&f.concurrentRequestLimit),this.Da=new Vx,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ah.prototype,t.la=8,t.G=1,t.connect=function(f,B,O,Q){js(0),this.W=f,this.H=B||{},O&&Q!==void 0&&(this.H.OSID=O,this.H.OAID=Q),this.F=this.X,this.I=Vm(this,null,this.W),Pa(this)};function cr(f){if(_d(f),f.G==3){var B=f.U++,O=bi(f.I);if(Os(O,"SID",f.K),Os(O,"RID",B),Os(O,"TYPE","terminate"),oo(f,O),B=new Zr(f,f.j,B),B.L=2,B.v=el(bi(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(B.v.toString(),"")}catch(Q){}!O&&c.Image&&(new Image().src=B.v,O=!0),O||(B.g=Um(B.j,null),B.g.ea(B.v)),B.F=Date.now(),Ds(B)}Om(f)}function aa(f){f.g&&(oh(f),f.g.cancel(),f.g=null)}function _d(f){aa(f),f.u&&(c.clearTimeout(f.u),f.u=null),Sd(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Pa(f){if(!yi(f.h)&&!f.s){f.s=!0;var B=f.Ga;H||Y(),K||(H(),K=!0),ne.add(B,f),f.B=0}}function Gx(f,B){return Tm(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=B.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=wn(y(f.Ga,f,B),$m(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const ge=new Zr(this,this.j,f);let je=this.o;if(this.S&&(je?(je=S(je),M(je,this.S)):je=this.S),this.m!==null||this.O||(ge.H=je,je=null),this.P)e:{for(var B=0,O=0;O<this.i.length;O++){t:{var Q=this.i[O];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(B+=Q,4096<B){B=O;break e}if(B===4096||O===this.i.length-1){B=O+1;break e}}B=1e3}else B=1e3;B=rl(this,ge,B),O=bi(this.I),Os(O,"RID",f),Os(O,"CVER",22),this.D&&Os(O,"X-HTTP-Session-Id",this.D),oo(this,O),je&&(this.O?B="headers="+encodeURIComponent(String(ao(je)))+"&"+B:this.m&&nl(O,this.m,je)),th(this.h,ge),this.Ua&&Os(O,"TYPE","init"),this.P?(Os(O,"$req",B),Os(O,"SID","null"),ge.T=!0,no(ge,O,null)):no(ge,O,B),this.G=2}}else this.G==3&&(f?wd(this,f):this.i.length==0||yi(this.h)||wd(this))};function wd(f,B){var O;B?O=B.l:O=f.U++;const Q=bi(f.I);Os(Q,"SID",f.K),Os(Q,"RID",O),Os(Q,"AID",f.T),oo(f,Q),f.m&&f.o&&nl(Q,f.m,f.o),O=new Zr(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),B&&(f.i=B.D.concat(f.i)),B=rl(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),th(f.h,O),no(O,Q,B)}function oo(f,B){f.H&&I(f.H,function(O,Q){Os(B,Q,O)}),f.l&&Xo({},function(O,Q){Os(B,Q,O)})}function rl(f,B,O){O=Math.min(f.i.length,O);var Q=f.l?y(f.l.Na,f.l,f):null;e:{var ge=f.i;let je=-1;for(;;){const Je=["count="+O];je==-1?0<O?(je=ge[0].g,Je.push("ofs="+je)):je=0:Je.push("ofs="+je);let Ms=!0;for(let Un=0;Un<O;Un++){let gs=ge[Un].g;const Kn=ge[Un].map;if(gs-=je,0>gs)je=Math.max(0,ge[Un].g-100),Ms=!1;else try{Mm(Kn,Je,"req"+gs+"_")}catch(En){Q&&Q(Kn)}}if(Ms){Q=Je.join("&");break e}}}return f=f.i.splice(0,O),B.D=f,Q}function lc(f){if(!f.g&&!f.u){f.Y=1;var B=f.Fa;H||Y(),K||(H(),K=!0),ne.add(B,f),f.v=0}}function jd(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=wn(y(f.Fa,f),$m(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Bm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=wn(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,js(10),aa(this),Bm(this))};function oh(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function Bm(f){f.g=new Zr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var B=bi(f.qa);Os(B,"RID","rpc"),Os(B,"SID",f.K),Os(B,"AID",f.T),Os(B,"CI",f.F?"0":"1"),!f.F&&f.ja&&Os(B,"TO",f.ja),Os(B,"TYPE","xmlhttp"),oo(f,B),f.m&&f.o&&nl(B,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=el(bi(B)),O.m=null,O.P=!0,Yo(O,f)}t.Za=function(){this.C!=null&&(this.C=null,aa(this),jd(this),js(19))};function Sd(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Nd(f,B){var O=null;if(f.g==B){Sd(f),oh(f),f.g=null;var Q=2}else if(Dr(f.h,B))O=B.D,Im(f.h,B),Q=1;else return;if(f.G!=0){if(B.o)if(Q==1){O=B.m?B.m.length:0,B=Date.now()-B.F;var ge=f.B;Q=_n(),He(Q,new ar(Q,O)),Pa(f)}else lc(f);else if(ge=B.s,ge==3||ge==0&&0<B.X||!(Q==1&&Gx(f,B)||Q==2&&jd(f)))switch(O&&0<O.length&&(B=f.h,B.i=B.i.concat(O)),ge){case 1:lo(f,5);break;case 4:lo(f,10);break;case 3:lo(f,6);break;default:lo(f,2)}}}function $m(f,B){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*B}function lo(f,B){if(f.j.info("Error code "+B),B==2){var O=y(f.fb,f),Q=f.Xa;const ge=!Q;Q=new ro(Q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ic(Q,"https"),el(Q),ge?Ox(Q.toString(),O):Dm(Q.toString(),O)}else js(2);f.G=0,f.l&&f.l.sa(B),Om(f),_d(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),js(2)):(this.j.info("Failed to ping google.com"),js(1))};function Om(f){if(f.G=0,f.ka=[],f.l){const B=Am(f.h);(B.length!=0||f.i.length!=0)&&(E(f.ka,B),E(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function Vm(f,B,O){var Q=O instanceof ro?bi(O):new ro(O);if(Q.g!="")B&&(Q.g=B+"."+Q.g),Jo(Q,Q.s);else{var ge=c.location;Q=ge.protocol,B=B?B+"."+ge.hostname:ge.hostname,ge=+ge.port;var je=new ro(null);Q&&ic(je,Q),B&&(je.g=B),ge&&Jo(je,ge),O&&(je.l=O),Q=je}return O=f.D,B=f.ya,O&&B&&Os(Q,O,B),Os(Q,"VER",f.la),oo(f,Q),Q}function Um(f,B,O){if(B&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=f.Ca&&!f.pa?new Js(new io({eb:O})):new Js(f.pa),B.Ha(f.J),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lh(){}t=lh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kd(){}kd.prototype.g=function(f,B){return new Mr(f,B)};function Mr(f,B){Ee.call(this),this.g=new ah(B),this.l=f,this.h=B&&B.messageUrlParams||null,f=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(f?f["X-WebChannel-Content-Type"]=B.messageContentType:f={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(f?f["X-WebChannel-Client-Profile"]=B.va:f={"X-WebChannel-Client-Profile":B.va}),this.g.S=f,(f=B&&B.Sb)&&!L(f)&&(this.g.m=f),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!L(B)&&(this.g.D=B,f=this.h,f!==null&&B in f&&(f=this.h,B in f&&delete f[B])),this.j=new La(this)}w(Mr,Ee),Mr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mr.prototype.close=function(){cr(this.g)},Mr.prototype.o=function(f){var B=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=Ae(f),f=O);B.i.push(new Cm(B.Ya++,f)),B.G==3&&Pa(B)},Mr.prototype.N=function(){this.g.l=null,delete this.j,cr(this.g),delete this.g,Mr.aa.N.call(this)};function Gm(f){st.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var B=f.__sm__;if(B){e:{for(const O in B){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,B=B!==null&&f in B?B[f]:void 0),this.data=B}else this.data=f}w(Gm,st);function zm(){Pt.call(this),this.status=1}w(zm,Pt);function La(f){this.g=f}w(La,lh),La.prototype.ua=function(){He(this.g,"a")},La.prototype.ta=function(f){He(this.g,new Gm(f))},La.prototype.sa=function(f){He(this.g,new zm)},La.prototype.ra=function(){He(this.g,"b")},kd.prototype.createWebChannel=kd.prototype.g,Mr.prototype.send=Mr.prototype.o,Mr.prototype.open=Mr.prototype.m,Mr.prototype.close=Mr.prototype.close,B5=function(){return new kd},F5=function(){return _n()},M5=as,p1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,Tf=or,xi.COMPLETE="complete",D5=xi,tt.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Yh=tt,Js.prototype.listenOnce=Js.prototype.L,Js.prototype.getLastError=Js.prototype.Ka,Js.prototype.getLastErrorCode=Js.prototype.Ba,Js.prototype.getStatus=Js.prototype.Z,Js.prototype.getResponseJson=Js.prototype.Oa,Js.prototype.getResponseText=Js.prototype.oa,Js.prototype.send=Js.prototype.ea,Js.prototype.setWithCredentials=Js.prototype.Ha,L5=Js}).apply(typeof Vg!="undefined"?Vg:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const LN="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new g_("@firebase/firestore");function Dh(){return ed.logLevel}function ut(t,...e){if(ed.logLevel<=ps.DEBUG){const n=e.map(I_);ed.debug(`Firestore (${Uu}): ${t}`,...n)}}function Vo(t,...e){if(ed.logLevel<=ps.ERROR){const n=e.map(I_);ed.error(`Firestore (${Uu}): ${t}`,...n)}}function Su(t,...e){if(ed.logLevel<=ps.WARN){const n=e.map(I_);ed.warn(`Firestore (${Uu}): ${t}`,...n)}}function I_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t="Unexpected state"){const e=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: `+t;throw Vo(e),new Error(e)}function _s(t,e){t||At()}function Ut(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Ko{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ir.UNAUTHENTICATED)))}shutdown(){}}class mO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gO{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_s(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wa,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wa)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_s(typeof r.accessToken=="string"),new $5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _s(e===null||typeof e=="string"),new Ir(e)}}class fO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_s(this.o===void 0);const r=a=>{a.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ut("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(_s(typeof n.token=="string"),this.R=n.token,new xO(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bO(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Ns(t,e){return t<e?-1:t>e?1:0}function Nu(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xs.fromMillis(Date.now())}static fromDate(e){return Xs.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ns(this.nanoseconds,e.nanoseconds):Ns(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Xs(0,0))}static max(){return new Dt(new Xs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r){n===void 0?n=0:n>e.length&&At(),r===void 0?r=e.length-n:r>e.length-n&&At(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ep.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ep?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fs extends Ep{construct(e,n,r){return new Fs(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Fs(n)}static emptyPath(){return new Fs([])}}const _O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Ep{construct(e,n,r){return new vr(e,n,r)}static isValidIdentifier(e){return _O.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ze(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ze(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ze(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(n)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Fs.fromString(e))}static fromName(e){return new yt(Fs.fromString(e).popFirst(5))}static empty(){return new yt(Fs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Fs(e.slice()))}}function wO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(r===1e9?new Xs(n+1,0):new Xs(n,r));return new Wl(i,yt.empty(),e)}function jO(t){return new Wl(t.readTime,t.key,-1)}class Wl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wl(Dt.min(),yt.empty(),-1)}static max(){return new Wl(Dt.max(),yt.empty(),-1)}}function SO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(t.documentKey,e.documentKey),n!==0?n:Ns(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==NO)throw t;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Fe?n:Fe.resolve(n)}catch(n){return Fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Fe.reject(n)}static resolve(e){return new Fe(((n,r)=>{n(e)}))}static reject(e){return new Fe(((n,r)=>{r(e)}))}static waitFor(e){return new Fe(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=Fe.resolve(!1);for(const r of e)n=n.next((i=>i?Fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Fe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next((p=>{o[h]=p,++c,c===a&&r(o)}),(p=>i(p)))}}))}static doWhile(e,n){return new Fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function CO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function im(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}A_.oe=-1;function am(t){return t==null}function ov(t){return t===0&&1/t==-1/0}function TO(t){return typeof t=="number"&&Number.isInteger(t)&&!ov(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ld(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ug(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ug(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ug(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ug(this.root,e,this.comparator,!0)}}class Ug{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r!=null?r:mr.RED,this.left=i!=null?i:mr.EMPTY,this.right=a!=null?a:mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new mr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(e,n,r,i,a){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MN(this.data.getIterator())}getIteratorFrom(e){return new MN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new br(this.comparator);return n.data=e,n}}class MN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Ri([])}unionWith(e){let n=new br(vr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new U5("Invalid base64 string: "+a):a}})(e);return new wr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new wr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ns(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const IO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kl(t){if(_s(!!t),typeof t=="string"){let e=0;const n=IO.exec(t);if(_s(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(t.seconds),nanos:Cn(t.nanos)}}function Cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function td(t){return typeof t=="string"?wr.fromBase64String(t):wr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function E_(t){const e=t.mapValue.fields.__previous_value__;return rx(e)?E_(e):e}function Rp(t){const e=Kl(t.mapValue.fields.__local_write_time__.timestampValue);return new Xs(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class Pp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg={mapValue:{}};function sd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rx(t)?4:RO(t)?9007199254740991:EO(t)?10:11:At()}function Za(t,e){if(t===e)return!0;const n=sd(t);if(n!==sd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rp(t).isEqual(Rp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Kl(i.timestampValue),c=Kl(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return td(i.bytesValue).isEqual(td(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Cn(i.geoPointValue.latitude)===Cn(a.geoPointValue.latitude)&&Cn(i.geoPointValue.longitude)===Cn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Cn(i.integerValue)===Cn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Cn(i.doubleValue),c=Cn(a.doubleValue);return o===c?ov(o)===ov(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Nu(t.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(DN(o)!==DN(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Za(o[u],c[u])))return!1;return!0})(t,e);default:return At()}}function Lp(t,e){return(t.values||[]).find((n=>Za(n,e)))!==void 0}function ku(t,e){if(t===e)return 0;const n=sd(t),r=sd(e);if(n!==r)return Ns(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ns(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=Cn(a.integerValue||a.doubleValue),u=Cn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return FN(t.timestampValue,e.timestampValue);case 4:return FN(Rp(t),Rp(e));case 5:return Ns(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=td(a),u=td(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Ns(c[h],u[h]);if(p!==0)return p}return Ns(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=Ns(Cn(a.latitude),Cn(o.latitude));return c!==0?c:Ns(Cn(a.longitude),Cn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BN(t.arrayValue,e.arrayValue);case 10:return(function(a,o){var c,u,h,p;const g=a.fields||{},y=o.fields||{},_=(c=g.value)===null||c===void 0?void 0:c.arrayValue,w=(u=y.value)===null||u===void 0?void 0:u.arrayValue,k=Ns(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((p=w==null?void 0:w.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:BN(_,w)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Gg.mapValue&&o===Gg.mapValue)return 0;if(a===Gg.mapValue)return 1;if(o===Gg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const y=Ns(u[g],p[g]);if(y!==0)return y;const _=ku(c[u[g]],h[p[g]]);if(_!==0)return _}return Ns(u.length,p.length)})(t.mapValue,e.mapValue);default:throw At()}}function FN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ns(t,e);const n=Kl(t),r=Kl(e),i=Ns(n.seconds,r.seconds);return i!==0?i:Ns(n.nanos,r.nanos)}function BN(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ku(n[i],r[i]);if(a)return a}return Ns(n.length,r.length)}function Cu(t){return m1(t)}function m1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Kl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return td(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return yt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=m1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${m1(n.fields[o])}`;return i+"}"})(t.mapValue):At()}function lv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g1(t){return!!t&&"integerValue"in t}function R_(t){return!!t&&"arrayValue"in t}function $N(t){return!!t&&"nullValue"in t}function ON(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function If(t){return!!t&&"mapValue"in t}function EO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function lp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ld(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=lp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!If(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lp(n)}setAll(e){let n=vr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=lp(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());If(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];If(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ld(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Qr(lp(this.value))}}function G5(t){const e=[];return ld(t.fields,((n,r)=>{const i=new vr([n]);if(If(r)){const a=G5(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new tr(e,0,Dt.min(),Dt.min(),Dt.min(),Qr.empty(),0)}static newFoundDocument(e,n,r,i){return new tr(e,1,n,Dt.min(),r,i,0)}static newNoDocument(e,n){return new tr(e,2,n,Dt.min(),Dt.min(),Qr.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,Dt.min(),Dt.min(),Qr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.position=e,this.inclusive=n}}function VN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=yt.comparator(yt.fromName(o.referenceValue),n.key):r=ku(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function UN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Za(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n="asc"){this.field=e,this.dir=n}}function PO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{}class $n extends z5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DO(e,n,r):n==="array-contains"?new BO(e,r):n==="in"?new $O(e,r):n==="not-in"?new OO(e,r):n==="array-contains-any"?new VO(e,r):new $n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MO(e,r):new FO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ku(n,this.value)):n!==null&&sd(this.value)===sd(n)&&this.matchesComparison(ku(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sa extends z5{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Sa(e,n)}matches(e){return H5(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function H5(t){return t.op==="and"}function W5(t){return LO(t)&&H5(t)}function LO(t){for(const e of t.filters)if(e instanceof Sa)return!1;return!0}function f1(t){if(t instanceof $n)return t.field.canonicalString()+t.op.toString()+Cu(t.value);if(W5(t))return t.filters.map((e=>f1(e))).join(",");{const e=t.filters.map((n=>f1(n))).join(",");return`${t.op}(${e})`}}function K5(t,e){return t instanceof $n?(function(r,i){return i instanceof $n&&r.op===i.op&&r.field.isEqual(i.field)&&Za(r.value,i.value)})(t,e):t instanceof Sa?(function(r,i){return i instanceof Sa&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&K5(o,i.filters[c])),!0):!1})(t,e):void At()}function q5(t){return t instanceof $n?(function(n){return`${n.field.canonicalString()} ${n.op} ${Cu(n.value)}`})(t):t instanceof Sa?(function(n){return n.op.toString()+" {"+n.getFilters().map(q5).join(" ,")+"}"})(t):"Filter"}class DO extends $n{constructor(e,n,r){super(e,n,r),this.key=yt.fromName(r.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class MO extends $n{constructor(e,n){super(e,"in",n),this.keys=Q5("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FO extends $n{constructor(e,n){super(e,"not-in",n),this.keys=Q5("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Q5(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>yt.fromName(r.referenceValue)))}class BO extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return R_(n)&&Lp(n.arrayValue,this.value)}}class $O extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lp(this.value.arrayValue,n)}}class OO extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lp(this.value.arrayValue,n)}}class VO extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!R_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Lp(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function GN(t,e=null,n=[],r=[],i=null,a=null,o=null){return new UO(t,e,n,r,i,a,o)}function P_(t){const e=Ut(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>f1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Cu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Cu(r))).join(",")),e.ue=n}return e.ue}function L_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!K5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UN(t.startAt,e.startAt)&&UN(t.endAt,e.endAt)}function v1(t){return yt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GO(t,e,n,r,i,a,o,c){return new qo(t,e,n,r,i,a,o,c)}function D_(t){return new qo(t)}function zN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M_(t){return t.collectionGroup!==null}function bu(t){const e=Ut(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new br(vr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Dp(a,r))})),n.has(vr.keyField().canonicalString())||e.ce.push(new Dp(vr.keyField(),r))}return e.ce}function Ka(t){const e=Ut(t);return e.le||(e.le=zO(e,bu(t))),e.le}function zO(t,e){if(t.limitType==="F")return GN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Dp(i.field,a)}));const n=t.endAt?new Tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tu(t.startAt.position,t.startAt.inclusive):null;return GN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x1(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cv(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ix(t,e){return L_(Ka(t),Ka(e))&&t.limitType===e.limitType}function Y5(t){return`${P_(Ka(t))}|lt:${t.limitType}`}function nu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>q5(i))).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Cu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Cu(i))).join(",")),`Target(${r})`})(Ka(t))}; limitType=${t.limitType})`}function ax(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):yt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of bu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const h=VN(o,c,u);return o.inclusive?h<=0:h<0})(r.startAt,bu(r),i)||r.endAt&&!(function(o,c,u){const h=VN(o,c,u);return o.inclusive?h>=0:h>0})(r.endAt,bu(r),i))})(t,e)}function HO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function X5(t){return(e,n)=>{let r=!1;for(const i of bu(t)){const a=WO(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function WO(t,e,n){const r=t.field.isKeyField()?yt.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?ku(u,h):At()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ld(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return V5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new un(yt.comparator);function Uo(){return KO}const J5=new un(yt.comparator);function Xh(...t){let e=J5;for(const n of t)e=e.insert(n.key,n);return e}function Z5(t){let e=J5;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function $c(){return cp()}function eA(){return cp()}function cp(){return new Gu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const qO=new un(yt.comparator),QO=new br(yt.comparator);function ds(...t){let e=QO;for(const n of t)e=e.add(n);return e}const YO=new br(Ns);function XO(){return YO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ov(e)?"-0":e}}function tA(t){return{integerValue:""+t}}function JO(t,e){return TO(e)?tA(e):F_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this._=void 0}}function ZO(t,e,n){return t instanceof Mp?(function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&rx(a)&&(a=E_(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}})(n,e):t instanceof Fp?nA(t,e):t instanceof Bp?rA(t,e):(function(i,a){const o=sA(i,a),c=HN(o)+HN(i.Pe);return g1(o)&&g1(i.Pe)?tA(c):F_(i.serializer,c)})(t,e)}function eV(t,e,n){return t instanceof Fp?nA(t,e):t instanceof Bp?rA(t,e):n}function sA(t,e){return t instanceof dv?(function(r){return g1(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Mp extends ox{}class Fp extends ox{constructor(e){super(),this.elements=e}}function nA(t,e){const n=iA(e);for(const r of t.elements)n.some((i=>Za(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Bp extends ox{constructor(e){super(),this.elements=e}}function rA(t,e){let n=iA(e);for(const r of t.elements)n=n.filter((i=>!Za(i,r)));return{arrayValue:{values:n}}}class dv extends ox{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function HN(t){return Cn(t.integerValue||t.doubleValue)}function iA(t){return R_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.field=e,this.transform=n}}function sV(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Fp&&i instanceof Fp||r instanceof Bp&&i instanceof Bp?Nu(r.elements,i.elements,Za):r instanceof dv&&i instanceof dv?Za(r.Pe,i.Pe):r instanceof Mp&&i instanceof Mp})(t.transform,e.transform)}class nV{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lx{}function aA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cx(t.key,xr.none()):new om(t.key,t.data,xr.none());{const n=t.data,r=Qr.empty();let i=new br(vr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Xl(t.key,r,new Ri(i.toArray()),xr.none())}}function rV(t,e,n){t instanceof om?(function(i,a,o){const c=i.value.clone(),u=KN(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Xl?(function(i,a,o){if(!Af(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=KN(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(oA(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function dp(t,e,n,r){return t instanceof om?(function(a,o,c,u){if(!Af(a.precondition,o))return c;const h=a.value.clone(),p=qN(a.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xl?(function(a,o,c,u){if(!Af(a.precondition,o))return c;const h=qN(a.fieldTransforms,u,o),p=o.data;return p.setAll(oA(a)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return Af(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function iV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=sA(r.transform,i||null);a!=null&&(n===null&&(n=Qr.empty()),n.set(r.field,a))}return n||null}function WN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Nu(r,i,((a,o)=>sV(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class om extends lx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xl extends lx{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function KN(t,e,n){const r=new Map;_s(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,eV(o,c,n[i]))}return r}function qN(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,ZO(a,o,e))}return r}class cx extends lx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lA extends lx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&rV(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eA();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=aA(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Dt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ds())}isEqual(e){return this.batchId===e.batchId&&Nu(this.mutations,e.mutations,((n,r)=>WN(n,r)))&&Nu(this.baseMutations,e.baseMutations,((n,r)=>WN(n,r)))}}class B_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_s(e.mutations.length===r.length);let i=(function(){return qO})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new B_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,fs;function cA(t){switch(t){default:return At();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function dA(t){if(t===void 0)return Vo("GRPC error has no .code"),ke.UNKNOWN;switch(t){case Dn.OK:return ke.OK;case Dn.CANCELLED:return ke.CANCELLED;case Dn.UNKNOWN:return ke.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return ke.INTERNAL;case Dn.UNAVAILABLE:return ke.UNAVAILABLE;case Dn.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Dn.NOT_FOUND:return ke.NOT_FOUND;case Dn.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Dn.ABORTED:return ke.ABORTED;case Dn.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Dn.DATA_LOSS:return ke.DATA_LOSS;default:return At()}}(fs=Dn||(Dn={}))[fs.OK=0]="OK",fs[fs.CANCELLED=1]="CANCELLED",fs[fs.UNKNOWN=2]="UNKNOWN",fs[fs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fs[fs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fs[fs.NOT_FOUND=5]="NOT_FOUND",fs[fs.ALREADY_EXISTS=6]="ALREADY_EXISTS",fs[fs.PERMISSION_DENIED=7]="PERMISSION_DENIED",fs[fs.UNAUTHENTICATED=16]="UNAUTHENTICATED",fs[fs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fs[fs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fs[fs.ABORTED=10]="ABORTED",fs[fs.OUT_OF_RANGE=11]="OUT_OF_RANGE",fs[fs.UNIMPLEMENTED=12]="UNIMPLEMENTED",fs[fs.INTERNAL=13]="INTERNAL",fs[fs.UNAVAILABLE=14]="UNAVAILABLE",fs[fs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new zc([4294967295,4294967295],0);function QN(t){const e=cV().encode(t),n=new P5;return n.update(e),new Uint8Array(n.digest())}function YN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zc([n,r],0),new zc([i,a],0)]}class $_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jh(`Invalid padding: ${n}`);if(r<0)throw new Jh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zc.fromNumber(r)));return i.compare(dV)===1&&(i=new zc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=QN(e),[r,i]=YN(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new $_(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const n=QN(e),[r,i]=YN(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dx(Dt.min(),i,new un(Ns),Uo(),ds())}}class lm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lm(r,n,ds(),ds(),ds())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uA{constructor(e,n){this.targetId=e,this.me=n}}class hA{constructor(e,n,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class XN{constructor(){this.fe=0,this.ge=ZN(),this.pe=wr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ds(),n=ds(),r=ds();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:At()}})),new lm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ZN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_s(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Uo(),this.qe=JN(),this.Qe=new un(Ns)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:At()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,i)=>{this.ze(i)&&n(i)}))}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(v1(a))if(r===0){const o=new yt(a.path);this.Ue(n,o,tr.newNoDocument(o,Dt.min()))}else _s(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=td(r).toUint8Array()}catch(u){if(u instanceof U5)return Su("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new $_(o,i,a)}catch(u){return Su(u instanceof Jh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)})),i}rt(e){const n=new Map;this.Be.forEach(((a,o)=>{const c=this.Je(o);if(c){if(a.current&&v1(c.target)){const u=new yt(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}}));let r=ds();this.qe.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.ke.forEach(((a,o)=>o.setReadTime(e)));const i=new dx(e,n,this.Qe,this.ke,r);return this.ke=Uo(),this.qe=JN(),this.Qe=new un(Ns),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new XN,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new br(Ns),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new XN),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function JN(){return new un(yt.comparator)}function ZN(){return new un(yt.comparator)}const hV={asc:"ASCENDING",desc:"DESCENDING"},pV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mV={and:"AND",or:"OR"};class gV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y1(t,e){return t.useProto3Json||am(e)?e:{value:e}}function uv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fV(t,e){return uv(t,e.toTimestamp())}function Li(t){return _s(!!t),Dt.fromTimestamp((function(n){const r=Kl(n);return new Xs(r.seconds,r.nanos)})(t))}function O_(t,e){return b1(t,e).canonicalString()}function b1(t,e){const n=(function(i){return new Fs(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function mA(t){const e=Fs.fromString(t);return _s(bA(e)),e}function hv(t,e){return O_(t.databaseId,e.path)}function up(t,e){const n=mA(e);if(n.get(1)!==t.databaseId.projectId)throw new Ze(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ze(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yt(fA(n))}function gA(t,e){return O_(t.databaseId,e)}function vV(t){const e=mA(t);return e.length===4?Fs.emptyPath():fA(e)}function _1(t){return new Fs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fA(t){return _s(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ek(t,e,n){return{name:hv(t,e),fields:n.value.mapValue.fields}}function xV(t,e){return"found"in e?(function(r,i){_s(!!i.found),i.found.name,i.found.updateTime;const a=up(r,i.found.name),o=Li(i.found.updateTime),c=i.found.createTime?Li(i.found.createTime):Dt.min(),u=new Qr({mapValue:{fields:i.found.fields}});return tr.newFoundDocument(a,o,c,u)})(t,e):"missing"in e?(function(r,i){_s(!!i.missing),_s(!!i.readTime);const a=up(r,i.missing),o=Li(i.readTime);return tr.newNoDocument(a,o)})(t,e):At()}function yV(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:At()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(_s(p===void 0||typeof p=="string"),wr.fromBase64String(p||"")):(_s(p===void 0||p instanceof Buffer||p instanceof Uint8Array),wr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?ke.UNKNOWN:dA(h.code);return new Ze(p,h.message||"")})(o);n=new hA(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=up(t,r.document.name),a=Li(r.document.updateTime),o=r.document.createTime?Li(r.document.createTime):Dt.min(),c=new Qr({mapValue:{fields:r.document.fields}}),u=tr.newFoundDocument(i,a,o,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Ef(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=up(t,r.document),a=r.readTime?Li(r.readTime):Dt.min(),o=tr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Ef([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=up(t,r.document),a=r.removedTargetIds||[];n=new Ef([],a,i,null)}else{if(!("filter"in e))return At();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new lV(i,a),c=r.targetId;n=new uA(c,o)}}return n}function vA(t,e){let n;if(e instanceof om)n={update:ek(t,e.key,e.value)};else if(e instanceof cx)n={delete:hv(t,e.key)};else if(e instanceof Xl)n={update:ek(t,e.key,e.data),updateMask:TV(e.fieldMask)};else{if(!(e instanceof lA))return At();n={verify:hv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Mp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof dv)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw At()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:fV(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At()})(t,e.precondition)),n}function bV(t,e){return t&&t.length>0?(_s(e!==void 0),t.map((n=>(function(i,a){let o=i.updateTime?Li(i.updateTime):Li(a);return o.isEqual(Dt.min())&&(o=Li(a)),new nV(o,i.transformResults||[])})(n,e)))):[]}function _V(t,e){return{documents:[gA(t,e.path)]}}function wV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gA(t,i);const a=(function(h){if(h.length!==0)return yA(Sa.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:ru(y.field),direction:NV(y.dir)}})(p)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=y1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:n,parent:i}}function jV(t){let e=vV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_s(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(g){const y=xA(g);return y instanceof Sa&&W5(y)?y.getFilters():[y]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((y=>(function(w){return new Dp(iu(w.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let y;return y=typeof g=="object"?g.value:g,am(y)?null:y})(n.limit));let u=null;n.startAt&&(u=(function(g){const y=!!g.before,_=g.values||[];return new Tu(_,y)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const y=!g.before,_=g.values||[];return new Tu(_,y)})(n.endAt)),GO(e,i,o,a,c,"F",u,h)}function SV(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=iu(n.unaryFilter.field);return $n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=iu(n.unaryFilter.field);return $n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=iu(n.unaryFilter.field);return $n.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=iu(n.unaryFilter.field);return $n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return At()}})(t):t.fieldFilter!==void 0?(function(n){return $n.create(iu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Sa.create(n.compositeFilter.filters.map((r=>xA(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return At()}})(n.compositeFilter.op))})(t):At()}function NV(t){return hV[t]}function kV(t){return pV[t]}function CV(t){return mV[t]}function ru(t){return{fieldPath:t.canonicalString()}}function iu(t){return vr.fromServerFormat(t.fieldPath)}function yA(t){return t instanceof $n?(function(n){if(n.op==="=="){if(ON(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NAN"}};if($N(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ON(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NAN"}};if($N(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(n.field),op:kV(n.op),value:n.value}}})(t):t instanceof Sa?(function(n){const r=n.getFilters().map((i=>yA(i)));return r.length===1?r[0]:{compositeFilter:{op:CV(n.op),filters:r}}})(t):At()}function TV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function bA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,i,a=Dt.min(),o=Dt.min(),c=wr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.ct=e}}function AV(t){const e=jV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.un=new RV}addToCollectionParentIndex(e,n){return this.un.add(n),Fe.resolve()}getCollectionParents(e,n){return Fe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Fe.resolve()}deleteFieldIndex(e,n){return Fe.resolve()}deleteAllFieldIndexes(e){return Fe.resolve()}createTargetIndexes(e,n){return Fe.resolve()}getDocumentsMatchingTarget(e,n){return Fe.resolve(null)}getIndexType(e,n){return Fe.resolve(0)}getFieldIndexes(e,n){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,n){return Fe.resolve(Wl.min())}getMinOffsetFromCollectionGroup(e,n){return Fe.resolve(Wl.min())}updateCollectionGroup(e,n,r){return Fe.resolve()}updateIndexEntries(e,n){return Fe.resolve()}}class RV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new br(Fs.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new br(Fs.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Iu(0)}static kn(){return new Iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.changes=new Gu((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&dp(r.mutation,i,Ri.empty(),Xs.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ds()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ds()){const i=$c();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=Xh();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=$c();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ds())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=Uo();const o=cp(),c=(function(){return cp()})();return n.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Xl)?a=a.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),dp(p.mutation,h,p.mutation.getFieldMask(),Xs.now())):o.set(h.key,Ri.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>o.set(h,p))),n.forEach(((h,p)=>{var g;return c.set(h,new LV(p,(g=o.get(h))!==null&&g!==void 0?g:null))})),c)))}recalculateAndSaveOverlays(e,n){const r=cp();let i=new un(((o,c)=>o-c)),a=ds();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Ri.empty();p=c.applyToLocalView(h,p),r.set(u,p);const g=(i.get(c.batchId)||ds()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,g=eA();p.forEach((y=>{if(!a.has(y)){const _=aA(n.get(y),r.get(y));_!==null&&g.set(y,_),a=a.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Fe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Fe.resolve($c());let c=-1,u=a;return o.next((h=>Fe.forEach(h,((p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(p)?Fe.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{u=u.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,ds()))).next((p=>({batchId:c,changes:Z5(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next((r=>{let i=Xh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=Xh();return this.indexManager.getCollectionParents(e,a).next((c=>Fe.forEach(c,(u=>{const h=(function(g,y){return new qo(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,y)=>{o=o.insert(g,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,tr.newInvalidDocument(p)))}));let c=Xh();return o.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&dp(p.mutation,h,Ri.empty(),Xs.now()),ax(n,h)&&(c=c.insert(u,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Fe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Li(i.createTime)}})(n)),Fe.resolve()}getNamedQuery(e,n){return Fe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(i){return{name:i.name,query:AV(i.bundledQuery),readTime:Li(i.readTime)}})(n)),Fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.overlays=new un(yt.comparator),this.Ir=new Map}getOverlay(e,n){return Fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$c();return Fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.ht(e,n,a)})),Fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Fe.resolve()}getOverlaysForCollection(e,n,r){const i=$c(),a=n.length+1,o=new yt(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new un(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=$c(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=$c(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return Fe.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oV(n,r));let a=this.Ir.get(n);a===void 0&&(a=ds(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.sessionToken=wr.EMPTY_BYTE_STRING}getSessionToken(e){return Fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.Tr=new br(er.Er),this.dr=new br(er.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new er(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new er(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new yt(new Fs([])),r=new er(n,e),i=new er(n,e+1),a=[];return this.dr.forEachInRange([r,i],(o=>{this.Vr(o),a.push(o.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new yt(new Fs([])),r=new er(n,e),i=new er(n,e+1);let a=ds();return this.dr.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new er(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class er{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return yt.comparator(e.key,n.key)||Ns(e.wr,n.wr)}static Ar(e,n){return Ns(e.wr,n.wr)||yt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new br(er.Er)}checkEmpty(e){return Fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aV(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new er(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Fe.resolve(o)}lookupMutationBatch(e,n){return Fe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return Fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new er(n,0),i=new er(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(o=>{const c=this.Dr(o.wr);a.push(c)})),Fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new br(Ns);return n.forEach((i=>{const a=new er(i,0),o=new er(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],(c=>{r=r.add(c.wr)}))})),Fe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;yt.isDocumentKey(a)||(a=a.child(""));const o=new er(new yt(a),0);let c=new br(Ns);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)}),o),Fe.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){_s(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Fe.forEach(n.mutations,(i=>{const a=new er(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new er(n,0),i=this.br.firstAfterOrEqual(r);return Fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.Mr=e,this.docs=(function(){return new un(yt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Fe.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let r=Uo();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))})),Fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Uo();const o=n.path,c=new yt(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||SO(jO(p),r)<=0||(i.has(p.key)||ax(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){At()}Or(e,n){return Fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new VV(this)}getSize(e){return Fe.resolve(this.size)}}class VV extends PV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Fe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.persistence=e,this.Nr=new Gu((n=>P_(n)),L_),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new V_,this.targetCount=0,this.kr=Iu.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,i)=>n(i))),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Fe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Iu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Fe.resolve()}updateTargetData(e,n){return this.Kn(n),Fe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Fe.waitFor(a).next((()=>i))}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Fe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Fe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),Fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Fe.resolve(r)}containsKey(e,n){return Fe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new A_(0),this.Kr=!1,this.Kr=!0,this.$r=new BV,this.referenceDelegate=e(this),this.Ur=new UV(this),this.indexManager=new EV,this.remoteDocumentCache=(function(i){return new OV(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new IV(n),this.Gr=new MV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new $V(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ut("MemoryPersistence","Starting transaction:",e);const i=new zV(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,n){return Fe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class zV extends kO{constructor(e){super(),this.currentSequenceNumber=e}}class U_{constructor(e){this.persistence=e,this.Jr=new V_,this.Yr=null}static Zr(e){return new U_(e)}get Xr(){if(this.Yr)return this.Yr;throw At()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Fe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Fe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Fe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.Xr,(r=>{const i=yt.fromPath(r);return this.ei(e,i).next((a=>{a||n.removeEntry(i,Dt.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return Fe.or([()=>Fe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ds(),i=ds();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new G_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return KF()?8:CO(Ar())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.Zi(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new HV;return this.Xi(e,n,o).next((c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)}))})).next((()=>a.result))}es(e,n,r,i){return r.documentReadCount<this.ji?(Dh()<=ps.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",nu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Fe.resolve()):(Dh()<=ps.DEBUG&&ut("QueryEngine","Query:",nu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dh()<=ps.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",nu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ka(n))):Fe.resolve())}Yi(e,n){if(zN(n))return Fe.resolve(null);let r=Ka(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=cv(n,null,"F"),r=Ka(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ds(...a);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,cv(n,null,"F")):this.rs(e,h,n,u)}))))})))))}Zi(e,n,r,i){return zN(n)||i.isEqual(Dt.min())?Fe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?Fe.resolve(null):(Dh()<=ps.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nu(n)),this.rs(e,o,n,wO(i,-1)).next((c=>c)))}))}ts(e,n){let r=new br(X5(e));return n.forEach(((i,a)=>{ax(e,a)&&(r=r.add(a))})),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Dh()<=ps.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",nu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new un(Ns),this._s=new Gu((a=>P_(a)),L_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function qV(t,e,n,r){return new KV(t,e,n,r)}async function _A(t,e){const n=Ut(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ds();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function QV(t,e){const n=Ut(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return(function(c,u,h,p){const g=h.batch,y=g.keys();let _=Fe.resolve();return y.forEach((w=>{_=_.next((()=>p.getEntry(u,w))).next((k=>{const E=h.docVersions.get(w);_s(E!==null),k.version.compareTo(E)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ds();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function wA(t){const e=Ut(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function YV(t,e){const n=Ut(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;c.push(n.Ur.removeMatchingKeys(a,p.removedDocuments,g).next((()=>n.Ur.addMatchingKeys(a,p.addedDocuments,g))));let _=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(wr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),i=i.insert(g,_),(function(k,E,P){return k.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(y,_,p)&&c.push(n.Ur.updateTargetData(a,_))}));let u=Uo(),h=ds();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(XV(a,o,e.documentUpdates).next((p=>{u=p.Ps,h=p.Is}))),!r.isEqual(Dt.min())){const p=n.Ur.getLastRemoteSnapshotVersion(a).next((g=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(p)}return Fe.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(n.os=i,a)))}function XV(t,e,n){let r=ds(),i=ds();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Uo();return n.forEach(((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Dt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ut("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)})),{Ps:o,Is:i}}))}function JV(t,e){const n=Ut(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ZV(t,e){const n=Ut(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Ur.getTargetData(r,e).next((a=>a?(i=a,Fe.resolve(i)):n.Ur.allocateTargetId(r).next((o=>(i=new Ll(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function w1(t,e,n){const r=Ut(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!im(o))throw o;ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function tk(t,e,n){const r=Ut(t);let i=Dt.min(),a=ds();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,h,p){const g=Ut(u),y=g._s.get(p);return y!==void 0?Fe.resolve(g.os.get(y)):g.Ur.getTargetData(h,p)})(r,o,Ka(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Dt.min(),n?a:ds()))).next((c=>(eU(r,HO(e),c),{documents:c,Ts:a})))))}function eU(t,e,n){let r=t.us.get(e)||Dt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class sk{constructor(){this.activeTargetIds=XO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tU{constructor(){this.so=new sk,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg=null;function S0(){return zg===null?zg=(function(){return 268435456+Math.round(2147483648*Math.random())})():zg++,"0x"+zg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="WebChannelConnection";class iU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=S0(),u=this.xo(n,r.toUriEncodedString());ut("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,i).then((p=>(ut("RestConnection",`Received RPC '${n}' ${c}: `,p),p)),(p=>{throw Su("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",i),p}))}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uu})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,o)=>n[o]=a)),i&&i.headers.forEach(((a,o)=>n[o]=a))}xo(n,r){const i=nU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=S0();return new Promise(((o,c)=>{const u=new L5;u.setWithCredentials(!0),u.listenOnce(D5.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Tf.NO_ERROR:const p=u.getResponseJson();ut(Cr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),o(p);break;case Tf.TIMEOUT:ut(Cr,`RPC '${e}' ${a} timed out`),c(new Ze(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const g=u.getStatus();if(ut(Cr,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const w=(function(E){const P=E.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(P)>=0?P:ke.UNKNOWN})(_.status);c(new Ze(w,_.message))}else c(new Ze(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ze(ke.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{ut(Cr,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);ut(Cr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",h,r,15)}))}Bo(e,n,r){const i=S0(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=B5(),c=F5(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=a.join("");ut(Cr,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=o.createWebChannel(p,u);let y=!1,_=!1;const w=new rU({Io:E=>{_?ut(Cr,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(y||(ut(Cr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),ut(Cr,`RPC '${e}' stream ${i} sending:`,E),g.send(E))},To:()=>g.close()}),k=(E,P,L)=>{E.listen(P,(N=>{try{L(N)}catch(v){setTimeout((()=>{throw v}),0)}}))};return k(g,Yh.EventType.OPEN,(()=>{_||(ut(Cr,`RPC '${e}' stream ${i} transport opened.`),w.yo())})),k(g,Yh.EventType.CLOSE,(()=>{_||(_=!0,ut(Cr,`RPC '${e}' stream ${i} transport closed`),w.So())})),k(g,Yh.EventType.ERROR,(E=>{_||(_=!0,Su(Cr,`RPC '${e}' stream ${i} transport errored:`,E),w.So(new Ze(ke.UNAVAILABLE,"The operation could not be completed")))})),k(g,Yh.EventType.MESSAGE,(E=>{var P;if(!_){const L=E.data[0];_s(!!L);const N=L,v=N.error||((P=N[0])===null||P===void 0?void 0:P.error);if(v){ut(Cr,`RPC '${e}' stream ${i} received error:`,v);const b=v.status;let I=(function(C){const M=Dn[C];if(M!==void 0)return dA(M)})(b),j=v.message;I===void 0&&(I=ke.INTERNAL,j="Unknown error status: "+b+" with message "+v.message),_=!0,w.So(new Ze(I,j)),g.close()}else ut(Cr,`RPC '${e}' stream ${i} received:`,L),w.bo(L)}})),k(c,M5.STAT_EVENT,(E=>{E.stat===p1.PROXY?ut(Cr,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===p1.NOPROXY&&ut(Cr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.wo()}),0),w}}function N0(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){return new gV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new z_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Vo(n.toString()),Vo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===n&&this.P_(r,i)}),(r=>{e((()=>{const i=new Ze(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aU extends jA{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yV(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Dt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?Li(o.readTime):Dt.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_1(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=v1(u)?{documents:_V(a,u)}:{query:wV(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=pA(a,o.resumeToken);const h=y1(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Dt.min())>0){c.readTime=uv(a,o.snapshotVersion.toTimestamp());const h=y1(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=SV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_1(this.serializer),n.removeTarget=e,this.a_(n)}}class oU extends jA{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _s(!!e.streamToken),this.lastStreamToken=e.streamToken,_s(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_s(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bV(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>vA(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ze(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Mo(e,b1(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(ke.UNKNOWN,a.toString())}))}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,b1(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ze(ke.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class cU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vo(n),this.D_=!1):ut("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((o=>{r.enqueueAndForget((async()=>{cd(this)&&(ut("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=Ut(u);h.L_.add(4),await cm(h),h.q_.set("Unknown"),h.L_.delete(4),await hx(h)})(this))}))})),this.q_=new cU(r,i)}}async function hx(t){if(cd(t))for(const e of t.B_)await e(!0)}async function cm(t){for(const e of t.B_)await e(!1)}function SA(t,e){const n=Ut(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),q_(n)?K_(n):zu(n).r_()&&W_(n,e))}function H_(t,e){const n=Ut(t),r=zu(n);n.N_.delete(e),r.r_()&&NA(n,e),n.N_.size===0&&(r.r_()?r.o_():cd(n)&&n.q_.set("Unknown"))}function W_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zu(t).A_(e)}function NA(t,e){t.Q_.xe(e),zu(t).R_(e)}function K_(t){t.Q_=new uV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zu(t).start(),t.q_.v_()}function q_(t){return cd(t)&&!zu(t).n_()&&t.N_.size>0}function cd(t){return Ut(t).L_.size===0}function kA(t){t.Q_=void 0}async function uU(t){t.q_.set("Online")}async function hU(t){t.N_.forEach(((e,n)=>{W_(t,e)}))}async function pU(t,e){kA(t),q_(t)?(t.q_.M_(e),K_(t)):t.q_.set("Unknown")}async function mU(t,e,n){if(t.q_.set("Online"),e instanceof hA&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(r){ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pv(t,r)}else if(e instanceof Ef?t.Q_.Ke(e):e instanceof uA?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Dt.min()))try{const r=await wA(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.N_.get(h);p&&a.N_.set(h,p.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,h)=>{const p=a.N_.get(u);if(!p)return;a.N_.set(u,p.withResumeToken(wr.EMPTY_BYTE_STRING,p.snapshotVersion)),NA(a,u);const g=new Ll(p.target,u,h,p.sequenceNumber);W_(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){ut("RemoteStore","Failed to raise snapshot:",r),await pv(t,r)}}async function pv(t,e,n){if(!im(e))throw e;t.L_.add(1),await cm(t),t.q_.set("Offline"),n||(n=()=>wA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ut("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hx(t)}))}function CA(t,e){return e().catch((n=>pv(t,n,e)))}async function px(t){const e=Ut(t),n=ql(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gU(e);)try{const i=await JV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fU(e,i)}catch(i){await pv(e,i)}TA(e)&&IA(e)}function gU(t){return cd(t)&&t.O_.length<10}function fU(t,e){t.O_.push(e);const n=ql(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TA(t){return cd(t)&&!ql(t).n_()&&t.O_.length>0}function IA(t){ql(t).start()}async function vU(t){ql(t).p_()}async function xU(t){const e=ql(t);for(const n of t.O_)e.m_(n.mutations)}async function yU(t,e,n){const r=t.O_.shift(),i=B_.from(r,e,n);await CA(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await px(t)}async function bU(t,e){e&&ql(t).V_&&await(async function(r,i){if((function(o){return cA(o)&&o!==ke.ABORTED})(i.code)){const a=r.O_.shift();ql(r).s_(),await CA(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await px(r)}})(t,e),TA(t)&&IA(t)}async function rk(t,e){const n=Ut(t);n.asyncQueue.verifyOperationInProgress(),ut("RemoteStore","RemoteStore received new credentials");const r=cd(n);n.L_.add(3),await cm(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hx(n)}async function _U(t,e){const n=Ut(t);e?(n.L_.delete(2),await hx(n)):e||(n.L_.add(2),await cm(n),n.q_.set("Unknown"))}function zu(t){return t.K_||(t.K_=(function(n,r,i){const a=Ut(n);return a.w_(),new aU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:uU.bind(null,t),Ro:hU.bind(null,t),mo:pU.bind(null,t),d_:mU.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),q_(t)?K_(t):t.q_.set("Unknown")):(await t.K_.stop(),kA(t))}))),t.K_}function ql(t){return t.U_||(t.U_=(function(n,r,i){const a=Ut(n);return a.w_(),new oU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vU.bind(null,t),mo:bU.bind(null,t),f_:xU.bind(null,t),g_:yU.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await px(t)):(await t.U_.stop(),t.O_.length>0&&(ut("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new Q_(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y_(t,e){if(Vo("AsyncQueue",`${e}: ${t}`),im(t))return new Ze(ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.comparator=e?(n,r)=>e(n,r)||yt.comparator(n.key,r.key):(n,r)=>yt.comparator(n.key,r.key),this.keyedMap=Xh(),this.sortedSet=new un(this.comparator)}static emptySet(e){return new _u(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _u)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _u;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.W_=new un(yt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):At():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Au{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Au(e,n,_u.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ix(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class jU{constructor(){this.queries=ak(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ut(n),a=i.queries;i.queries=ak(),a.forEach(((o,c)=>{for(const u of c.j_)u.onError(r)}))})(this,new Ze(ke.ABORTED,"Firestore shutting down"))}}function ak(){return new Gu((t=>Y5(t)),ix)}async function AA(t,e){const n=Ut(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new wU,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Y_(o,`Initialization of query '${nu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&X_(n)}async function EA(t,e){const n=Ut(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SU(t,e){const n=Ut(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&X_(n)}function NU(t,e,n){const r=Ut(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function X_(t){t.Y_.forEach((e=>{e.next()}))}var j1,ok;(ok=j1||(j1={})).ea="default",ok.Cache="cache";class RA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Au(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==j1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.key=e}}class LA{constructor(e){this.key=e}}class kU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ds(),this.mutatedKeys=ds(),this.Aa=X5(e),this.Ra=new _u(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ik,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),_=ax(this.query,g)?g:null,w=!!y&&this.mutatedKeys.has(y.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let E=!1;y&&_?y.data.isEqual(_.data)?w!==k&&(r.track({type:3,doc:_}),E=!0):this.ga(y,_)||(r.track({type:2,doc:_}),E=!0,(u&&this.Aa(_,u)>0||h&&this.Aa(_,h)<0)&&(c=!0)):!y&&_?(r.track({type:0,doc:_}),E=!0):y&&!_&&(r.track({type:1,doc:y}),E=!0,(u||h)&&(c=!0)),E&&(_?(o=o.add(_),a=k?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,g)=>(function(_,w){const k=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return k(_)-k(w)})(p.type,g.type)||this.Aa(p.doc,g.doc))),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Au(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ik,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ds(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new LA(r))})),this.da.forEach((r=>{e.has(r)||n.push(new PA(r))})),n}ba(e){this.Ta=e.Ts,this.da=ds();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Au.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TU{constructor(e){this.key=e,this.va=!1}}class IU{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gu((c=>Y5(c)),ix),this.Ma=new Map,this.xa=new Set,this.Oa=new un(yt.comparator),this.Na=new Map,this.La=new V_,this.Ba={},this.ka=new Map,this.qa=Iu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AU(t,e,n=!0){const r=OA(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await DA(r,e,n,!0),i}async function EU(t,e){const n=OA(t);await DA(n,e,!0,!1)}async function DA(t,e,n,r){const i=await ZV(t.localStore,Ka(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await RU(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&SA(t.remoteStore,i),c}async function RU(t,e,n,r,i){t.Ka=(g,y,_)=>(async function(k,E,P,L){let N=E.view.ma(P);N.ns&&(N=await tk(k.localStore,E.query,!1).then((({documents:j})=>E.view.ma(j,N))));const v=L&&L.targetChanges.get(E.targetId),b=L&&L.targetMismatches.get(E.targetId)!=null,I=E.view.applyChanges(N,k.isPrimaryClient,v,b);return ck(k,E.targetId,I.wa),I.snapshot})(t,g,y,_);const a=await tk(t.localStore,e,!0),o=new kU(e,a.Ts),c=o.ma(a.documents),u=lm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);ck(t,n,h.wa);const p=new CU(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function PU(t,e,n){const r=Ut(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((o=>!ix(o,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await w1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&H_(r.remoteStore,i.targetId),S1(r,i.targetId)})).catch(rm)):(S1(r,i.targetId),await w1(r.localStore,i.targetId,!0))}async function LU(t,e){const n=Ut(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),H_(n.remoteStore,r.targetId))}async function DU(t,e,n){const r=UU(t);try{const i=await(function(o,c){const u=Ut(o),h=Xs.now(),p=c.reduce(((_,w)=>_.add(w.key)),ds());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let w=Uo(),k=ds();return u.cs.getEntries(_,p).next((E=>{w=E,w.forEach(((P,L)=>{L.isValidDocument()||(k=k.add(P))}))})).next((()=>u.localDocuments.getOverlayedDocuments(_,w))).next((E=>{g=E;const P=[];for(const L of c){const N=iV(L,g.get(L.key).overlayedDocument);N!=null&&P.push(new Xl(L.key,N,G5(N.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,P,c)})).next((E=>{y=E;const P=E.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(_,E.batchId,P)}))})).then((()=>({batchId:y.batchId,changes:Z5(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new un(Ns)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h})(r,i.batchId,n),await dm(r,i.changes),await px(r.remoteStore)}catch(i){const a=Y_(i,"Failed to persist write");n.reject(a)}}async function MA(t,e){const n=Ut(t);try{const r=await YV(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Na.get(a);o&&(_s(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_s(o.va):i.removedDocuments.size>0&&(_s(o.va),o.va=!1))})),await dm(n,r,e)}catch(r){await rm(r)}}function lk(t,e,n){const r=Ut(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach(((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=Ut(o);u.onlineState=c;let h=!1;u.queries.forEach(((p,g)=>{for(const y of g.j_)y.Z_(c)&&(h=!0)})),h&&X_(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MU(t,e,n){const r=Ut(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new un(yt.comparator);o=o.insert(a,tr.newNoDocument(a,Dt.min()));const c=ds().add(a),u=new dx(Dt.min(),new Map,new un(Ns),o,c);await MA(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),J_(r)}else await w1(r.localStore,e,!1).then((()=>S1(r,e,n))).catch(rm)}async function FU(t,e){const n=Ut(t),r=e.batch.batchId;try{const i=await QV(n.localStore,e);BA(n,r,null),FA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dm(n,i)}catch(i){await rm(i)}}async function BU(t,e,n){const r=Ut(t);try{const i=await(function(o,c){const u=Ut(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next((g=>(_s(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);BA(r,e,n),FA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dm(r,i)}catch(i){await rm(i)}}function FA(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function BA(t,e,n){const r=Ut(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function S1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||$A(t,r)}))}function $A(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(H_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),J_(t))}function ck(t,e,n){for(const r of n)r instanceof PA?(t.La.addReference(r.key,e),$U(t,r)):r instanceof LA?(ut("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$A(t,r.key)):At()}function $U(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ut("SyncEngine","New document in limbo: "+n),t.xa.add(r),J_(t))}function J_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new yt(Fs.fromString(e)),r=t.qa.next();t.Na.set(r,new TU(n)),t.Oa=t.Oa.insert(n,r),SA(t.remoteStore,new Ll(Ka(D_(n.path)),r,"TargetPurposeLimboResolution",A_.oe))}}async function dm(t,e,n){const r=Ut(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((c,u)=>{o.push(r.Ka(u,e,n).then((h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=G_.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(o),r.Ca.d_(i),await(async function(u,h){const p=Ut(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Fe.forEach(h,(y=>Fe.forEach(y.$i,(_=>p.persistence.referenceDelegate.addReference(g,y.targetId,_))).next((()=>Fe.forEach(y.Ui,(_=>p.persistence.referenceDelegate.removeReference(g,y.targetId,_)))))))))}catch(g){if(!im(g))throw g;ut("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const _=p.os.get(y),w=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(w);p.os=p.os.insert(y,k)}}})(r.localStore,a))}async function OU(t,e){const n=Ut(t);if(!n.currentUser.isEqual(e)){ut("SyncEngine","User change. New user:",e.toKey());const r=await _A(n.localStore,e);n.currentUser=e,(function(a,o){a.ka.forEach((c=>{c.forEach((u=>{u.reject(new Ze(ke.CANCELLED,o))}))})),a.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dm(n,r.hs)}}function VU(t,e){const n=Ut(t),r=n.Na.get(e);if(r&&r.va)return ds().add(r.key);{let i=ds();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function OA(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MU.bind(null,e),e.Ca.d_=SU.bind(null,e.eventManager),e.Ca.$a=NU.bind(null,e.eventManager),e}function UU(t){const e=Ut(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BU.bind(null,e),e}class mv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ux(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qV(this.persistence,new WV,e.initialUser,this.serializer)}Ga(e){return new GV(U_.Zr,this.serializer)}Wa(e){return new tU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mv.provider={build:()=>new mv};class N1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OU.bind(null,this.syncEngine),await _U(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jU})()}createDatastore(e){const n=ux(e.databaseInfo.databaseId),r=(function(a){return new iU(a)})(e.databaseInfo);return(function(a,o,c,u){return new lU(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new dU(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>lk(this.syncEngine,n,0)),(function(){return nk.D()?new nk:new sU})())}createSyncEngine(e,n){return(function(i,a,o,c,u,h,p){const g=new IU(i,a,o,c,u,h);return p&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=Ut(i);ut("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await cm(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}N1.provider={build:()=>new N1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ze(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const o=Ut(i),c={documents:a.map((g=>hv(o.serializer,g)))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Fs.emptyPath(),c,a.length),h=new Map;u.forEach((g=>{const y=xV(o.serializer,g);h.set(y.key.toString(),y)}));const p=[];return a.forEach((g=>{const y=h.get(g.toString());_s(!!y),p.push(y)})),p})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=yt.fromPath(r);this.mutations.push(new lA(i,this.precondition(i)))})),await(async function(r,i){const a=Ut(r),o={writes:i.map((c=>vA(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,Fs.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw At();n=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ze(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Dt.min())?xr.exists(!1):xr.updateTime(n):xr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Dt.min()))throw new Ze(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(n)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this._u=r.maxAttempts,this.t_=new z_(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new GU(this.datastore),n=this.cu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.lu(i)}))))})).catch((r=>{this.lu(r)}))}))}cu(e){try{const n=this.updateFunction(e);return!am(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!cA(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=O5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{ut("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ut("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Y_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function k0(t,e){t.asyncQueue.verifyOperationInProgress(),ut("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await _A(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function dk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WU(t);ut("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>rk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>rk(e.remoteStore,i))),t._onlineComponents=e}async function WU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ut("FirestoreClient","Using user provided OfflineComponentProvider");try{await k0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Su("Error using user provided cache. Falling back to memory cache: "+n),await k0(t,new mv)}}else ut("FirestoreClient","Using default OfflineComponentProvider"),await k0(t,new mv);return t._offlineComponents}async function Z_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ut("FirestoreClient","Using user provided OnlineComponentProvider"),await dk(t,t._uninitializedComponentsProvider._online)):(ut("FirestoreClient","Using default OnlineComponentProvider"),await dk(t,new N1))),t._onlineComponents}function KU(t){return Z_(t).then((e=>e.syncEngine))}function qU(t){return Z_(t).then((e=>e.datastore))}async function UA(t){const e=await Z_(t),n=e.eventManager;return n.onListen=AU.bind(null,e.syncEngine),n.onUnlisten=PU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),n}function QU(t,e,n={}){const r=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new VA({next:y=>{p.Za(),o.enqueueAndForget((()=>EA(a,g)));const _=y.docs.has(c);!_&&y.fromCache?h.reject(new Ze(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?h.reject(new Ze(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new RA(D_(c.path),p,{includeMetadataChanges:!0,_a:!0});return AA(a,g)})(await UA(t),t.asyncQueue,e,n,r))),r.promise}function YU(t,e,n={}){const r=new Wa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,h){const p=new VA({next:y=>{p.Za(),o.enqueueAndForget((()=>EA(a,g))),y.fromCache&&u.source==="server"?h.reject(new Ze(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new RA(c,p,{includeMetadataChanges:!0,_a:!0});return AA(a,g)})(await UA(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t,e,n){if(!n)throw new Ze(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XU(t,e,n,r){if(e===!0&&r===!0)throw new Ze(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hk(t){if(!yt.isDocumentKey(t))throw new Ze(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pk(t){if(yt.isDocumentKey(t))throw new Ze(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":At()}function eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mx(t);throw new Ze(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function JU(t,e){if(e<=0)throw new Ze(ke.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ze(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class um{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mk({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mk(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pO;switch(r.type){case"firstParty":return new vO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=uk.get(n);r&&(ut("ComponentProvider","Removing Datastore"),uk.delete(n),r.terminate())})(this),Promise.resolve()}}function ZU(t,e,n,r={}){var i;const a=(t=eo(t,um))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Su("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ir.MOCK_USER;else{c=OF(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Ze(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(h)}t._authCredentials=new mO(new $5(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ca(this.firestore,e,this._query)}}class Yr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yr(this.firestore,e,this._key)}}class Hl extends Ca{constructor(e,n,r){super(e,n,D_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yr(this.firestore,null,new yt(e))}withConverter(e){return new Hl(this.firestore,e,this._path)}}function Go(t,e,...n){if(t=On(t),ew("collection","path",e),t instanceof um){const r=Fs.fromString(e,...n);return pk(r),new Hl(t,null,r)}{if(!(t instanceof Yr||t instanceof Hl))throw new Ze(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fs.fromString(e,...n));return pk(r),new Hl(t.firestore,null,r)}}function hm(t,e){if(t=eo(t,um),ew("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ca(t,null,(function(r){return new qo(Fs.emptyPath(),r)})(e))}function ss(t,e,...n){if(t=On(t),arguments.length===1&&(e=O5.newId()),ew("doc","path",e),t instanceof um){const r=Fs.fromString(e,...n);return hk(r),new Yr(t,null,new yt(r))}{if(!(t instanceof Yr||t instanceof Hl))throw new Ze(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fs.fromString(e,...n));return hk(r),new Yr(t.firestore,t instanceof Hl?t.converter:null,new yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new z_(this,"async_queue_retry"),this.Vu=()=>{const r=N0();r&&ut("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=N0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=N0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new Wa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!im(e))throw e;ut("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(r);throw Vo("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Q_.createAndSchedule(this,e,n,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&At()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Hu extends um{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new gk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gk(e),this._firestoreClient=void 0,await e}}}function eG(t,e){const n=typeof t=="object"?t:x_(),r=typeof t=="string"?t:"(default)",i=v_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=BF("firestore");a&&ZU(i,...a)}return i}function pm(t){if(t._terminated)throw new Ze(ke.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tG(t),t._firestoreClient}function tG(t){var e,n,r;const i=t._freezeSettings(),a=(function(c,u,h,p){return new AO(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,GA(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new HU(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nd(wr.fromBase64String(e))}catch(n){throw new Ze(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nd(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function k1(){return new Wu("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ns(this._lat,e._lat)||Ns(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=/^__.*__$/;class nG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms):new om(e,this.data,n,this.fieldTransforms)}}class zA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class nw{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new nw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HA(this.Cu)&&sG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ux(e)}Qu(e,n,r,i=!1){return new nw({Cu:e,methodName:n,qu:r,path:vr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mm(t){const e=t._freezeSettings(),n=ux(t._databaseId);return new rG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rw(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);aw("Data must be an object, but it was:",o,r);const c=QA(r,o);let u,h;if(a.merge)u=new Ri(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const y=C1(e,g,n);if(!o.contains(y))throw new Ze(ke.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);XA(p,y)||p.push(y)}u=new Ri(p),h=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=o.fieldTransforms;return new nG(new Qr(c),u,h)}class fx extends gx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fx}}class iw extends gx{_toFieldTransform(e){return new tV(e.path,new Mp)}isEqual(e){return e instanceof iw}}function WA(t,e,n,r){const i=t.Qu(1,e,n);aw("Data must be an object, but it was:",i,r);const a=[],o=Qr.empty();ld(r,((u,h)=>{const p=ow(e,u,n);h=On(h);const g=i.Nu(p);if(h instanceof fx)a.push(p);else{const y=gm(h,g);y!=null&&(a.push(p),o.set(p,y))}}));const c=new Ri(a);return new zA(o,c,i.fieldTransforms)}function KA(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[C1(e,r,n)],u=[i];if(a.length%2!=0)throw new Ze(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(C1(e,a[y])),u.push(a[y+1]);const h=[],p=Qr.empty();for(let y=c.length-1;y>=0;--y)if(!XA(h,c[y])){const _=c[y];let w=u[y];w=On(w);const k=o.Nu(_);if(w instanceof fx)h.push(_);else{const E=gm(w,k);E!=null&&(h.push(_),p.set(_,E))}}const g=new Ri(h);return new zA(p,g,o.fieldTransforms)}function qA(t,e,n,r=!1){return gm(n,t.Qu(r?4:3,e))}function gm(t,e){if(YA(t=On(t)))return aw("Unsupported field value:",e,t),QA(t,e);if(t instanceof gx)return(function(r,i){if(!HA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=gm(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=On(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Xs.fromDate(r);return{timestampValue:uv(i.serializer,a)}}if(r instanceof Xs){const a=new Xs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uv(i.serializer,a)}}if(r instanceof tw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nd)return{bytesValue:pA(i.serializer,r._byteString)};if(r instanceof Yr){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:O_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sw)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return F_(c.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${mx(r)}`)})(t,e)}function QA(t,e){const n={};return V5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ld(t,((r,i)=>{const a=gm(i,e.Mu(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function YA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xs||t instanceof tw||t instanceof nd||t instanceof Yr||t instanceof gx||t instanceof sw)}function aw(t,e,n){if(!YA(n)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(n)){const r=mx(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function C1(t,e,n){if((e=On(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return ow(t,e);throw gv("Field path arguments must be of type string or ",t,!1,void 0,n)}const iG=new RegExp("[~\\*/\\[\\]]");function ow(t,e,n){if(e.search(iG)>=0)throw gv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch(r){throw gv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ze(ke.INVALID_ARGUMENT,c+t+u)}function XA(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aG extends $p{data(){return super.data()}}function vx(t,e){return typeof e=="string"?ow(t,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lw{}class fm extends lw{}function Tn(t,e,...n){let r=[];e instanceof lw&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof cw)).length,c=a.filter((u=>u instanceof xx)).length;if(o>1||o>0&&c>0)throw new Ze(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class xx extends fm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xx(e,n,r)}_apply(e){const n=this._parse(e);return ZA(e._query,n),new Ca(e.firestore,e.converter,x1(e._query,n))}_parse(e){const n=mm(e.firestore);return(function(a,o,c,u,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ze(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){vk(g,p);const _=[];for(const w of g)_.push(fk(u,a,w));y={arrayValue:{values:_}}}else y=fk(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||vk(g,p),y=qA(c,o,g,p==="in"||p==="not-in");return $n.create(h,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gi(t,e,n){const r=e,i=vx("where",t);return xx._create(i,r,n)}class cw extends lw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Sa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)ZA(o,u),o=x1(o,u)})(e._query,n),new Ca(e.firestore,e.converter,x1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dw extends fm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dw(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Ze(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ze(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dp(a,o)})(e._query,this._field,this._direction);return new Ca(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new qo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Pi(t,e="asc"){const n=e,r=vx("orderBy",t);return dw._create(r,n)}class uw extends fm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new uw(e,n,r)}_apply(e){return new Ca(e.firestore,e.converter,cv(e._query,this._limit,this._limitType))}}function sr(t){return JU("limit",t),uw._create("limit",t,"F")}class yx extends fm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new yx(e,n,r)}_apply(e){const n=JA(e,this.type,this._docOrFields,this._inclusive);return new Ca(e.firestore,e.converter,(function(i,a){return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,n))}}function Dl(...t){return yx._create("startAt",t,!0)}function lG(...t){return yx._create("startAfter",t,!1)}class hw extends fm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hw(e,n,r)}_apply(e){const n=JA(e,this.type,this._docOrFields,this._inclusive);return new Ca(e.firestore,e.converter,(function(i,a){return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,n))}}function Ml(...t){return hw._create("endAt",t,!0)}function JA(t,e,n,r){if(n[0]=On(n[0]),n[0]instanceof $p)return(function(a,o,c,u,h){if(!u)throw new Ze(ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const p=[];for(const g of bu(a))if(g.field.isKeyField())p.push(lv(o,u.key));else{const y=u.data.field(g.field);if(rx(y))throw new Ze(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const _=g.field.canonicalString();throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}p.push(y)}return new Tu(p,h)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=mm(t.firestore);return(function(o,c,u,h,p,g){const y=o.explicitOrderBy;if(p.length>y.length)throw new Ze(ke.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let w=0;w<p.length;w++){const k=p[w];if(y[w].field.isKeyField()){if(typeof k!="string")throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!M_(o)&&k.indexOf("/")!==-1)throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const E=o.path.child(Fs.fromString(k));if(!yt.isDocumentKey(E))throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const P=new yt(E);_.push(lv(c,P))}else{const E=qA(u,h,k);_.push(E)}}return new Tu(_,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function fk(t,e,n){if(typeof(n=On(n))=="string"){if(n==="")throw new Ze(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M_(e)&&n.indexOf("/")!==-1)throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fs.fromString(n));if(!yt.isDocumentKey(r))throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lv(t,new yt(r))}if(n instanceof Yr)return lv(t,n._key);throw new Ze(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mx(n)}.`)}function vk(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZA(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ze(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eE{convertValue(e,n="none"){switch(sd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(td(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw At()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ld(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>Cn(o.doubleValue)));return new sw(a)}convertGeoPoint(e){return new tw(Cn(e.latitude),Cn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=E_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rp(e));default:return null}}convertTimestamp(e){const n=Kl(e);return new Xs(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fs.fromString(e);_s(bA(r));const i=new Pp(r.get(1),r.get(3)),a=new yt(r.popFirst(5));return i.isEqual(n)||Vo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cG extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mw extends $p{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rf extends mw{data(e={}){return super.data(e)}}class dG{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ou(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Rf(this._firestore,this._userDataWriter,r.key,r,new ou(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Rf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ou(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Rf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ou(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:uG(c.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){t=eo(t,Yr);const e=eo(t.firestore,Hu);return QU(pm(e),t._key).then((n=>hG(e,t,n)))}class gw extends eE{constructor(e){super(),this.firestore=e}convertBytes(e){return new nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,n)}}function xn(t){t=eo(t,Ca);const e=eo(t.firestore,Hu),n=pm(e),r=new gw(e);return oG(t._query),YU(n,t._query).then((i=>new dG(e,r,t,i)))}function zo(t,e,n){t=eo(t,Yr);const r=eo(t.firestore,Hu),i=pw(t.converter,e,n);return tE(r,[rw(mm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xr.none())])}function tE(t,e){return(function(r,i){const a=new Wa;return r.asyncQueue.enqueueAndForget((async()=>DU(await KU(r),i,a))),a.promise})(pm(t),e)}function hG(t,e,n){const r=n.docs.get(e._key),i=new gw(t);return new mw(t,i,e._key,r,new ou(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mm(e)}set(e,n,r){this._verifyNotCommitted();const i=Rl(e,this._firestore),a=pw(i.converter,n,r),o=rw(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,xr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Rl(e,this._firestore);let o;return o=typeof(n=On(n))=="string"||n instanceof Wu?KA(this._dataReader,"WriteBatch.update",a._key,n,r,i):WA(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rl(e,this._firestore);return this._mutations=this._mutations.concat(new cx(n._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rl(t,e){if((t=On(t)).firestore!==e)throw new Ze(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=mm(n)}get(n){const r=Rl(n,this._firestore),i=new cG(this._firestore);return this._transaction.lookup([r._key]).then((a=>{if(!a||a.length!==1)return At();const o=a[0];if(o.isFoundDocument())return new $p(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new $p(this._firestore,i,r._key,null,r.converter);throw At()}))}set(n,r,i){const a=Rl(n,this._firestore),o=pw(a.converter,r,i),c=rw(this._dataReader,"Transaction.set",a._key,o,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(n,r,i,...a){const o=Rl(n,this._firestore);let c;return c=typeof(r=On(r))=="string"||r instanceof Wu?KA(this._dataReader,"Transaction.update",o._key,r,i,a):WA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,c),this}delete(n){const r=Rl(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Rl(e,this._firestore),r=new gw(this._firestore);return super.get(e).then((i=>new mw(this._firestore,r,n._key,i._document,new ou(!1,!1),n.converter)))}}function sE(t,e,n){t=eo(t,Hu);const r=Object.assign(Object.assign({},pG),n);return(function(a){if(a.maxAttempts<1)throw new Ze(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,o,c){const u=new Wa;return a.asyncQueue.enqueueAndForget((async()=>{const h=await qU(a);new zU(a.asyncQueue,h,c,o,u).au()})),u.promise})(pm(t),(i=>e(new gG(t,i))),r)}function Ai(){return new iw("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t){return pm(t=eo(t,Hu)),new mG(t,(e=>tE(t,e)))}(function(e,n=!0){(function(i){Uu=i})(Ou),ju(new Xc("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Hu(new gO(r.getProvider("auth-internal")),new yO(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ze(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pp(h.options.projectId,p)})(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Gl(LN,"4.7.3",e),Gl(LN,"4.7.3","esm2017")})();const fw={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};fw.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const vG=()=>{var i,a;if(typeof window=="undefined")return;const t=(i=window.location.hostname)==null?void 0:i.toLowerCase(),e=String((a=fw.authDomain)!=null?a:"").toLowerCase();if(!t||!e||t===e||t==="localhost"||t==="127.0.0.1"||t.endsWith(".local"))return;const r=e.endsWith(".firebaseapp.com")?e.replace(".firebaseapp.com",".web.app"):e.endsWith(".web.app")?e.replace(".web.app",".firebaseapp.com"):"";if(r&&t===r){const o=window.location.href.replace(t,e);window.location.replace(o)}};vG();const nE=tB().length?x_():J3(fw),ft=eG(nE),fa=uO(nE),rE=R.createContext(void 0),xk=`${ka}/auth/session`,yk=`${ka}/auth/logout`,C0="sfh:authPopupNonce",xG=2e3,yG=new Set(["auth/popup-blocked","auth/popup-closed-by-user","auth/cancelled-popup-request","auth/operation-not-supported-in-this-environment"]),bG=()=>{var e;if(typeof window=="undefined")return!1;try{const n=(e=window.localStorage)==null?void 0:e.getItem("sfh:debug:auth");if(n==="1"||n==="true")return!0}catch(n){console.warn("[Auth] Failed to read auth debug flag",n)}return!1},pa=(...t)=>{bG()&&console.info(...t)},_G=()=>{var t;try{const e=new Uint8Array(16);if(typeof window!="undefined"&&((t=window.crypto)!=null&&t.getRandomValues))return window.crypto.getRandomValues(e),Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")}catch(e){}return Math.random().toString(36).slice(2,14)},bk=(t,e)=>{try{const n=new URL(`${ka}/auth/${t}/login`);return(e==null?void 0:e.mode)==="popup"&&n.searchParams.set("mode","popup"),e!=null&&e.nonce&&n.searchParams.set("nonce",e.nonce),n.toString()}catch(n){return console.warn("[Auth] Failed to construct login URL",n),""}},wG=()=>{var e;const t=new Set;typeof window!="undefined"&&((e=window.location)!=null&&e.origin)&&t.add(window.location.origin);try{t.add(new URL(ka).origin)}catch(n){console.warn("[Auth] Failed to parse AUTH_BASE_URL for allowed origins",n)}return t},jG=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState("idle"),a=R.useRef({tried:!1}),o=R.useRef(!1),c=R.useRef(!1),u=R.useMemo(()=>{try{return new To}catch(v){return console.warn("[Auth] Failed to initialize Google provider",v),null}},[]),h=R.useCallback(v=>{v!=null&&v.authenticated&&v.user?(n(v.user),i("authenticated")):(n(null),i("unauthenticated"))},[]),p=R.useCallback(async v=>{if(v!=null&&v.silent||i("loading"),!xk)return console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),n(null),i("unauthenticated"),!1;try{const b=await fetch(xk,{credentials:"include"});if(!b.ok)throw new Error(`Failed to fetch session (${b.status})`);const I=await b.json();return h(I),!!(I!=null&&I.authenticated&&I.user)}catch(b){return console.error("[Auth] Failed to refresh session.",b),n(null),i("unauthenticated"),!1}},[h]);R.useEffect(()=>{p()},[p]),R.useEffect(()=>{console.log("[AuthDebug] session user:",e);const v=fa.currentUser;console.log("[AuthDebug] firebase currentUser uid:",v==null?void 0:v.uid),v==null||v.getIdTokenResult().then(b=>{console.log("[AuthDebug] firebase claims:",b.claims)}).catch(b=>{console.warn("[AuthDebug] failed to fetch token claims",b)})},[e]),R.useEffect(()=>{const v=ZB(fa,b=>{console.log("[AuthDebug] firebase currentUser uid:",b==null?void 0:b.uid)});return()=>v()},[]),R.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const v=await AF();await jN(fa,v),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(v){console.error("[AuthDebug] failed to sign in to Firebase",v)}})())},[e]);const g=R.useCallback(v=>{window.location.href=bk(v)},[]),y=R.useCallback(async(v,b)=>{const I=wG();return new Promise((j,S)=>{let C=!1;const M=window.setTimeout(()=>{C||(D(),S(new Error("auth_popup_timeout")))},18e4),T=window.setInterval(()=>{if(v.closed){if(C||c.current){D(),j({});return}pa("[Auth] Discord popup closed; starting grace window");const V=2200,z=Date.now(),q=window.setInterval(()=>{if(C||c.current){window.clearInterval(q),D(),j({});return}if(fa.currentUser||r==="authenticated"&&e){window.clearInterval(q),D(),j({});return}Date.now()-z>=V&&(window.clearInterval(q),D(),S(new Error("auth_popup_closed")))},200)}},500),D=V=>{window.removeEventListener("message",F),window.clearTimeout(M),window.clearInterval(T)},F=V=>{if(!I.has(V.origin))return;const z=V.data;(z==null?void 0:z.type)==="sfh:discordAuth"&&(z!=null&&z.nonce&&z.nonce!==b||(c.current=!0,C=!0,D(),j({customToken:typeof(z==null?void 0:z.customToken)=="string"?z.customToken:void 0})))};window.addEventListener("message",F)})},[]),_=R.useCallback(async()=>{const v=Date.now(),b=2e3,I=200,j=async()=>await p({silent:!0})?!0:Date.now()-v>=b?!1:(await new Promise(C=>setTimeout(C,I)),j());return j()},[p]),w=R.useCallback(async()=>{var C,M,T;if(o.current){pa("[Auth] Discord login already in-flight, ignoring new request");return}o.current=!0,c.current=!1;const v=typeof window!="undefined"?window.location.origin:"N/A",b=typeof window!="undefined"?window.location.host:"N/A";pa("[Auth] Starting Discord auth-api popup login",{origin:v,host:b});const I=_G();try{(C=window.sessionStorage)==null||C.setItem(C0,I)}catch(D){console.warn("[Auth] Failed to persist popup nonce",D)}const j=bk("discord",{mode:"popup",nonce:I});if(!j){console.warn("[Auth] Missing AUTH_BASE_URL for Discord login.");return}const S=window.open(j,"sfh_discord_oauth","width=520,height=720,menubar=no,toolbar=no,resizable=yes,scrollbars=yes");if(!S||S.closed){pa("[Auth] Popup blocked or failed, redirecting to auth-api flow");try{(M=window.sessionStorage)==null||M.removeItem(C0)}catch(D){}g("discord"),o.current=!1;return}try{const D=await y(S,I);D!=null&&D.customToken?(await jN(fa,D.customToken),pa("[Auth] Discord popup custom token received and signed in"),await p({silent:!0})):await _()||(pa("[Auth] Popup login completed but session missing, redirecting for sync"),g("discord"))}catch(D){pa("[Auth] Popup login did not complete, falling back to redirect",{code:D==null?void 0:D.code,message:D==null?void 0:D.message}),g("discord")}finally{try{(T=window.sessionStorage)==null||T.removeItem(C0)}catch(D){}setTimeout(()=>{o.current=!1},xG)}},[g,y,_]),k=R.useCallback(async()=>{var M,T,D,F,V,z,q;const v=typeof window!="undefined"?window.location.origin:"N/A",b=typeof window!="undefined"?window.location.host:"N/A",I=(D=(T=(M=fa.app)==null?void 0:M.options)==null?void 0:T.projectId)!=null?D:"unknown",j=(z=(V=(F=fa.app)==null?void 0:F.options)==null?void 0:V.authDomain)!=null?z:"unknown";pa("[Auth] Starting google login",{origin:v,host:b,projectId:I,authDomain:j});const S=u;if(!S||(()=>{var K;if(typeof window=="undefined")return!1;const H=(((K=window.navigator)==null?void 0:K.userAgent)||"").toLowerCase();return/mobile|android|iphone|ipad|ipod/.test(H)?!0:typeof window.matchMedia=="function"?window.matchMedia("(max-width: 768px)").matches:!1})()){pa("[Auth] Falling back to redirect for google",{reason:S?"mobile":"provider_unavailable"}),g("google");return}try{await b$(fa,S),await p({silent:!0})||(pa("[Auth] Popup login succeeded but session missing, redirecting for sync"),g("google"))}catch(H){const K=typeof(H==null?void 0:H.code)=="string"?H.code:"",ne=typeof(H==null?void 0:H.message)=="string"?H.message:"Auth popup failed",Y=yG.has(K);if(pa("[Auth] Popup login failed for google",{code:K,message:ne,host:b,origin:v,projectId:I,authDomain:j,email:typeof((q=H==null?void 0:H.customData)==null?void 0:q.email)=="string"?H.customData.email:void 0}),Y){g("google");return}console.error("[Auth] Popup login failed for google (no fallback)",{code:K,message:ne});const G=new Error(ne);throw K&&(G.code=K),G}},[p,u,g]),E=R.useCallback(async()=>{if(await e$(fa).catch(()=>{}),!yk){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),n(null),i("unauthenticated");return}try{const v=await fetch(yk,{method:"POST",credentials:"include"});if(!v.ok)throw new Error(`Logout failed (${v.status})`)}catch(v){console.error("[Auth] Failed to logout. Clearing local session anyway.",v)}finally{n(null),i("unauthenticated")}},[]),P=R.useCallback(async v=>p(v),[p]),L=r==="idle"||r==="loading",N=R.useMemo(()=>({user:e,status:r,isLoading:L,loginWithDiscord:w,loginWithGoogle:k,logout:E,refreshSession:P}),[e,r,L,w,k,E,P]);return s.jsx(rE.Provider,{value:N,children:t})},ea=()=>{const t=R.useContext(rE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},SG="https://i.pravatar.cc/72",NG=({fallbackName:t})=>{var L,N;const{user:e,status:n,logout:r,isLoading:i}=ea(),a=Xr(),[o,c]=R.useState(!1),u=R.useRef(null),h=n==="authenticated",p=h?(N=(L=e==null?void 0:e.displayName)!=null?L:t)!=null?N:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:SG;R.useEffect(()=>{const v=b=>{u.current&&!u.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),R.useEffect(()=>{i&&c(!1)},[i]);const y=R.useCallback(()=>c(!1),[]),_=()=>{c(v=>!v)},w=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):a("/login"),y()},k=()=>{a("/settings/account"),y()},E=R.useCallback(async()=>{try{await r()}finally{y(),a("/")}},[y,r,a]),P=()=>{var v;if(i)return s.jsx("p",{className:$t.accountStatusText,children:"Checking session..."});if(n==="unauthenticated")return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:$t.accountHeader,children:[s.jsx("p",{className:$t.accountName,children:"Not signed in"}),s.jsx("p",{className:$t.accountSub,children:"Your scans stay synced when you log in."})]}),s.jsx("button",{type:"button",className:$t.accountPrimary,onClick:w,children:"Sign in"}),s.jsx("p",{className:$t.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(n==="authenticated"){const b=!!((v=e==null?void 0:e.roles)!=null&&v.includes("admin"));return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:$t.accountHeader,children:[s.jsx("img",{className:$t.accountMiniAvatar,src:g,alt:p}),s.jsxs("div",{children:[s.jsx("p",{className:$t.accountName,children:p}),s.jsxs("p",{className:$t.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),s.jsx("button",{type:"button",className:$t.accountItem,onClick:k,children:"Account & Profile"}),b?s.jsx("a",{className:$t.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,s.jsx("hr",{className:$t.accountDivider}),s.jsx("button",{type:"button",className:`${$t.accountItem} ${$t.accountLogout}`,onClick:E,children:"Logout"})]})}return null};return s.jsxs("div",{className:$t.accountRoot,ref:u,children:[i?s.jsxs("div",{className:$t.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[s.jsx("span",{className:$t.avatarSpinner,"aria-hidden":"true"}),s.jsx("span",{className:$t.srOnly,children:"Checking login status"})]}):s.jsx("button",{type:"button",className:$t.avatarBtn,"aria-haspopup":"menu","aria-expanded":o,"aria-label":p,onClick:_,children:s.jsx("img",{className:$t.avatar,src:g,alt:p})}),!i&&o&&s.jsx("div",{className:$t.accountDropdown,role:"menu",children:P()})]})},kG="sfh:debug:firestoreReadsCallsite",CG="sf_debug_firestore_reads_callsite",TG="sfh:debug:firestoreWritesCallsite",IG="sf_debug_firestore_writes_callsite",fv=new Map,vv=new Map,Op=new Map,xv=new Map,yv=new Map,Vp=new Map,bv=new Map,iE=new Map,aE=new Map;let AG=1,oE=0,lE=0,Hc=null;const Kr=(...t)=>{console.log(...t)},dd=()=>!1,vm=()=>!1,cE=()=>!dd()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(kG)==="1"||window.localStorage.getItem(CG)==="1",dE=()=>!vm()||typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(TG)==="1"||window.localStorage.getItem(IG)==="1",vw=(t,e)=>t?t.split("/").filter(Boolean)[0]||e||"unknown":e!=null?e:"unknown",EG=()=>{if(!cE())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracegetdoc")&&!r.toLowerCase().includes("tracegetdocs")&&!r.toLowerCase().includes("traceonsnapshot"));return n[1]||n[0]},RG=()=>{if(!dE())return;const t=new Error;if(!t.stack)return;const n=t.stack.split(`
`).map(r=>r.trim()).filter(r=>r&&!r.toLowerCase().includes("firestorereadtrace")&&!r.toLowerCase().includes("tracewrit")&&!r.toLowerCase().includes("tracesetdoc")&&!r.toLowerCase().includes("traceupdatedoc")&&!r.toLowerCase().includes("traceadddoc")&&!r.toLowerCase().includes("tracedeletedoc")&&!r.toLowerCase().includes("recordwrite")&&!r.toLowerCase().includes("tracebatchcommit")&&!r.toLowerCase().includes("traceruntransaction"));return n[1]||n[0]},uE=t=>(t==null?void 0:t.trim())||"unknown",In=t=>dd()?{id:AG++,name:t,startedAt:performance.now(),reads:[]}:null,hE=(t,e)=>{var o,c,u,h,p,g,y;if(!dd())return;const n=uE(e.path),r=vw(e.collection||n),i=(c=(o=e.callsite)!=null?o:e.label)!=null?c:EG();t&&t.reads.push({collection:r,path:n,op:e.op,docCount:e.docCount,startedAt:performance.now(),callsite:i,label:e.label}),fv.set(r,((u=fv.get(r))!=null?u:0)+e.docCount);const a=(h=vv.get(n))!=null?h:{total:0,ops:{}};a.total+=e.docCount,a.ops[e.op]=((p=a.ops[e.op])!=null?p:0)+e.docCount,vv.set(n,a),Op.set(e.op,((g=Op.get(e.op))!=null?g:0)+e.docCount),i&&xv.set(i,((y=xv.get(i))!=null?y:0)+e.docCount)},Ku=t=>{var a,o,c,u,h,p,g;if(!vm())return;const e=uE(t.path),n=(a=t.docCount)!=null?a:1,r=(c=(o=t.callsite)!=null?o:t.label)!=null?c:RG();if(t.includeInPaths!==!1){const y=(u=yv.get(e))!=null?u:{total:0,ops:{}};y.total+=n,y.ops[t.op]=((h=y.ops[t.op])!=null?h:0)+n,yv.set(e,y)}Vp.set(t.op,((p=Vp.get(t.op))!=null?p:0)+n),r&&bv.set(r,((g=bv.get(r))!=null?g:0)+n)},Ys=t=>{var o;if(!t)return;t.endedAt=performance.now();const e=Math.round(t.endedAt-t.startedAt),n=t.reads.reduce((c,u)=>{var h;return c[u.collection]=((h=c[u.collection])!=null?h:0)+u.docCount,c},{}),r=t.reads.reduce((c,u)=>c+u.docCount,0),i=t.reads.map(c=>({op:c.op,path:c.path,collection:c.collection,docs:c.docCount,callsite:c.callsite})),a=`[FirestoreTrace] ${t.name} - ${r} reads in ${e}ms`;if(console.groupCollapsed(a),Kr("Breakdown by collection",n),Kr("Entries",i),cE()){const c=(o=t.reads.find(u=>u.callsite))==null?void 0:o.callsite;c&&Kr("Top callsite",c)}Kr("Totals (page lifetime)",Object.fromEntries(fv.entries())),console.groupEnd()},bn=async(t,e,n,r)=>{const i=await n(),a=i!=null&&i.exists?i.exists()?1:0:1;return hE(t,{collection:vw(e.path),path:e.path,op:"getDoc",docCount:a,label:r==null?void 0:r.label}),i},yn=async(t,e,n,r)=>{var c,u,h;const i=await n(),a=(c=i==null?void 0:i.size)!=null?c:Array.isArray(i==null?void 0:i.docs)?i.docs.length:0,o=(h=(u=e.path)!=null?u:r==null?void 0:r.collectionHint)!=null?h:"unknown";return hE(t,{collection:vw(o,r==null?void 0:r.collectionHint),path:o,op:"getDocs",docCount:typeof a=="number"?a:0,label:r==null?void 0:r.label}),i},xw=async(t,e,n)=>{const r=await e();return Ku({path:t.path,op:"setDoc",docCount:1,label:n==null?void 0:n.label}),r},PG=async(t,e)=>{var r;const n=await t();return Ku({path:(r=e==null?void 0:e.path)!=null?r:"batchCommit",op:"batchCommit",docCount:1,label:e==null?void 0:e.label,includeInPaths:!1}),n},pE=async(t,e)=>{var r;const n=await t();return Ku({path:(r=e==null?void 0:e.path)!=null?r:"transaction",op:"runTransaction",docCount:1,label:e==null?void 0:e.label}),n},LG=()=>{!dd()&&!vm()||(fv.clear(),vv.clear(),Op.clear(),xv.clear(),yv.clear(),Vp.clear(),bv.clear(),iE.clear(),oE=0,lE=0,aE.forEach(t=>{t.callbacks=0,t.docs=0}))},bx=t=>{!dd()&&!vm()||(LG(),Hc={name:t,startedAt:performance.now()})},_x=(t,e)=>{var y,_;if(!dd())return;const n=10,r=t||(Hc==null?void 0:Hc.name),i=r?` (${r})`:"",a={getDoc:(y=Op.get("getDoc"))!=null?y:0,getDocs:(_=Op.get("getDocs"))!=null?_:0},o=a.getDoc+a.getDocs,u=Array.from(vv.entries()).map(([w,k])=>({path:w,total:k.total,ops:k.ops})).sort((w,k)=>k.total-w.total).slice(0,n),h=Array.from(xv.entries()).map(([w,k])=>({callsite:w,count:k})).sort((w,k)=>k.count-w.count).slice(0,n),p=Array.from(aE.values()).map(w=>({path:w.path,callbacks:w.callbacks,docs:w.docs,callsite:w.callsite})).sort((w,k)=>k.callbacks-w.callbacks),g=Array.from(iE.entries()).map(([w,k])=>({path:w,callbacks:k.callbacks,docs:k.docs})).sort((w,k)=>k.callbacks-w.callbacks).slice(0,n);console.groupCollapsed(`[FirestoreTrace] READ SUMMARY${i}`),Kr("Totals",{...a,total:o}),Kr("Top paths",u),h.length>0&&Kr("Top callsites",h),console.groupEnd(),console.groupCollapsed(`[FirestoreTrace] LISTENER SUMMARY${i}`),Kr("Listener callbacks",{total:oE,estimatedReads:lE}),Kr("Listeners active",p.length?p:"None"),g.length>0&&Kr("Top listener paths",g),console.groupEnd()},wx=(t,e)=>{if(!vm())return;const n=10,r=t||(Hc==null?void 0:Hc.name),i=r?` (${r})`:"",a=Object.fromEntries(Vp.entries()),o=Array.from(Vp.values()).reduce((p,g)=>p+g,0),c=Array.from(yv.entries()).map(([p,g])=>({path:p,total:g.total,ops:g.ops})).sort((p,g)=>g.total-p.total),u=c.slice(0,n),h=dE()?Array.from(bv.entries()).map(([p,g])=>({callsite:p,count:g})).sort((p,g)=>g.count-p.count).slice(0,n):[];console.groupCollapsed(`[FirestoreTrace] WRITE SUMMARY${i}`),Kr("Totals",{...a,total:o}),Kr("Top paths",u),Kr("All paths",c),Kr("All paths",c),h.length>0&&Kr("Top callsites",h),console.groupEnd()},DG=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub-v2",area:"main",titleKey:"nav.guideHub",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],_k=["guest","user","moderator","developer","admin"];function mE(t){const e=t.trim();if(!e)return"/";const n=e.startsWith("/")?e:`/${e}`;return n==="/"?n:n.replace(/\/+$/,"").toLowerCase()}function gE(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function fE(t){if(!Array.isArray(t))return;const e=t.map(n=>gE(n)).filter(Boolean);return e.length?e:void 0}function vE(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function xE(t){if(!Array.isArray(t))return;const e=t.map(n=>typeof n=="string"?n.trim():"").filter(n=>n.length>0);return e.length?e:void 0}function yw(t){var e,n,r;return{...t,id:t.id.trim(),route:mE(t.route),area:t.area.trim(),allowedRoles:(e=fE(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(n=vE(t.allowedGroups))!=null?n:t.allowedGroups,allowedUserIds:(r=xE(t.allowedUserIds))!=null?r:t.allowedUserIds}}function wk(t,e){if(!e||typeof e!="object")return null;const n=e,r=typeof n.route=="string"?n.route:"",i=typeof n.area=="string"?n.area:"",a=typeof n.id=="string"&&n.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const o={id:a,route:r,area:i,titleKey:typeof n.titleKey=="string"?n.titleKey:void 0,status:typeof n.status=="string"?n.status:void 0,minRole:gE(n.minRole),allowedRoles:fE(n.allowedRoles),allowedGroups:vE(n.allowedGroups),allowedUserIds:xE(n.allowedUserIds),showInTopbar:typeof n.showInTopbar=="boolean"?n.showInTopbar:void 0,showInSidebar:typeof n.showInSidebar=="boolean"?n.showInSidebar:void 0,navOrder:typeof n.navOrder=="number"?n.navOrder:void 0,isExperimental:typeof n.isExperimental=="boolean"?n.isExperimental:void 0,description:typeof n.description=="string"?n.description:void 0};return yw(o)}function MG(t){if(!t||typeof t!="object")return[];const n=t.items;return Array.isArray(n)?n.map(r=>{if(!r||typeof r!="object")return null;const i=r,a=typeof i.id=="string"?i.id:"";return wk(a,i)}).filter(r=>!!r):n&&typeof n=="object"?Object.entries(n).map(([r,i])=>wk(r,i)).filter(r=>!!r):[]}function FG(t){const e={},n={};return t.forEach(r=>{const i=yw(r);e[i.id]=i,n[i.route]=i}),{byId:e,byRoute:n}}const Do=FG(DG),BG={...Do,loading:!1,error:null},$G=300*1e3,OG="stats_public",VG="feature_access_main_nav";let au=null,Zh=null;const UG=async t=>{const e=Date.now();return Zh&&e-Zh.fetchedAt<$G?Zh:au||(au=(async()=>{const n=ss(ft,OG,VG),r=await bn(t,n,()=>sn(n),{label:"feature_access_snapshot"}),i=r.exists()?MG(r.data()):[],o={rules:zG(i),fetchedAt:Date.now()};return Zh=o,o})().finally(()=>{au=null}),au)};function GG(t,e){const n={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const o=i;n[o]=a}}),n}function zG(t){const e={...Do.byId},n={...Do.byRoute};return t.forEach(r=>{const i=yw(r),a=e[i.id],o=GG(a,i);e[o.id]=o,n[o.route]=o}),{byId:e,byRoute:n}}const yE=W.createContext(BG),HG=({children:t})=>{const[e,n]=W.useState({...Do,loading:!0,error:null});W.useEffect(()=>{let i=!0;return(async()=>{const c=dd()&&!Zh&&!au?In("FeatureAccess:load"):null;try{const{rules:u}=await UG(c);i&&n({...u,loading:!1,error:null})}catch(u){const h=u,p=h==null?void 0:h.code,g=p==="permission-denied"||p==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore stats_public feature access snapshot ${g?"not readable":"load failed"}. Falling back to defaults.`,u),i&&n(_=>({..._,loading:!1,error:u instanceof Error?u.message:"Failed to load feature access rules"}))}finally{Ys(c)}})(),()=>{i=!1}},[]);const r=W.useMemo(()=>e,[e]);return s.jsx(yE.Provider,{value:r,children:t})};function WG(){return W.useContext(yE)}function KG(t,e){var i,a,o;if(!t)return;const n=e!=null?e:Do,r=mE(t);return(o=(a=(i=n.byId[t])!=null?i:n.byRoute[r])!=null?a:Do.byId[t])!=null?o:Do.byRoute[r]}function qG(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function QG(t,e,n,r,i){if(n)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const o=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&o!=="developer"&&o!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!o&&t.allowedRoles.includes(o);if(t.minRole){const c=_k.indexOf(o),u=_k.indexOf(t.minRole);return c>=u&&c!==-1}return!0}function jx(){var k;let t=null;try{t=ea().user}catch(E){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:n,loading:r,error:i}=WG(),a=W.useMemo(()=>({byId:e!=null?e:Do.byId,byRoute:n!=null?n:Do.byRoute}),[e,n]),o=W.useMemo(()=>qG(t==null?void 0:t.roles),[t==null?void 0:t.roles]),c=W.useMemo(()=>{var E;return!!((E=t==null?void 0:t.roles)!=null&&E.includes("admin"))},[t==null?void 0:t.roles]),u=W.useMemo(()=>{var E;return(E=t==null?void 0:t.accessGroups)!=null?E:[]},[t==null?void 0:t.accessGroups]),h=(k=t==null?void 0:t.id)!=null?k:null,p=W.useCallback(E=>KG(E,a),[a]),g=W.useCallback(E=>E?QG(E,o,c,h,u):!0,[c,u,h,o]),y=W.useCallback(E=>{if(!E)return!0;const P=p(E);return g(P)},[g,p]),_=W.useCallback(E=>{if(!E)return!0;const P=p(E);return P?P.status==="hidden"||P.showInSidebar===!1?!1:g(P):!0},[g,p]),w=W.useCallback(E=>{if(!E)return!0;const P=p(E);return P?P.status==="hidden"||P.showInTopbar===!1?!1:g(P):!0},[g,p]);return{loading:r,error:i,rulesById:e,rulesByRoute:n,storeRules:a,resolveRule:p,canAccessRule:g,canAccessFeature:y,isVisibleInSidebar:_,isVisibleInTopbar:w}}const bE=R.createContext(null);function YG({children:t}){const{canAccessFeature:e}=jx(),[n,r]=R.useState(!1),[i,a]=R.useState("csv"),o=e("main.uploadCenter"),c=R.useCallback(p=>{o&&(p!=null&&p.tab?a(p.tab):a("csv"),r(!0))},[o]),u=R.useCallback(()=>r(!1),[]),h=R.useMemo(()=>({isOpen:n,open:c,close:u,activeTab:i,setTab:a,canUse:o}),[n,c,u,i,o]);return s.jsx(bE.Provider,{value:h,children:t})}function bw(){const t=R.useContext(bE);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const ma={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},ga=t=>`https://drive.google.com/uc?export=view&id=${t}`,_E=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),rr=[{key:"warrior",label:"Warrior",iconUrl:ga(ma.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:ga(ma.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:ga(ma.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:ga(ma.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:ga(ma["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:ga(ma.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:ga(ma["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:ga(ma.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:ga(ma.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:ga(ma.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:ga(ma.paladin),fallback:""}],jk=Object.fromEntries(rr.map(t=>[t.key,t])),T1=new Map;function hn(t,e){T1.set(_E(t),e)}for(const t of rr)hn(t.key,t.key),hn(t.label,t.key);hn("war","warrior");hn("krieger","warrior");hn("magier","mage");hn("jaeger","scout");hn("jger","scout");hn("assa","assassin");hn("meuchelmoerder","assassin");hn("meuchelmrder","assassin");hn("demonhunter","demon-hunter");hn("dh","demon-hunter");hn("daemonenjaeger","demon-hunter");hn("dmonenjger","demon-hunter");hn("zerker","berserker");hn("battlemage","battle-mage");hn("kampfmagier","battle-mage");hn("bm","battle-mage");hn("druide","druid");hn("barde","bard");hn("necro","necromancer");hn("nekromant","necromancer");hn("pala","paladin");function wE(t){const e=_E(t);if(!e)return{};const n=T1.get(e);if(n){const r=jk[n];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of T1.entries())if(r.startsWith(e)||e.startsWith(r)){const a=jk[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function Sx(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const n=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(n!=null&&n[1])return n[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function Pf(t){if(t==null)return;const e=Sx(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function jE(t,e=64){if(t==null)return;const n=Sx(t);if(!n)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${n}&sz=w${r}`}function SE(t,e){const n="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${n}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function NE(t,e,n,r){const i=Pf(t);return i?SE(i,{w:e,h:n,fit:r}):void 0}function vi(t,e=64){const n=jE(t,e);return n?SE(n,{w:e,h:e,fit:"contain"}):void 0}function T0(t){if(t==null)return;const e=Sx(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function XG(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const rd=Object.assign(t=>Pf(t),{id:Sx,direct:Pf,thumb:jE,proxy:NE,thumbProxy:vi,raw:T0,gif:T0,gifProxy:t=>{const e=T0(t);return e&&/^https?:\/\//i.test(e)?XG(e):Pf(t)}}),Nx="sfh:search:cache:v1:universal:",kE=`${Nx}lru`,JG=720*60,hp=150,qu=()=>typeof window!="undefined"&&!!window.localStorage,ZG=t=>t.trim().replace(/\s+/g," ").toLowerCase(),CE=(...t)=>{try{qu()&&window.localStorage.getItem("sfh:debug:firestoreReads")==="1"&&console.debug(...t)}catch(e){}},TE=()=>{if(!qu())return[];try{const t=window.localStorage.getItem(kE);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}catch(t){return[]}},IE=t=>{if(qu())try{window.localStorage.setItem(kE,JSON.stringify(t.slice(0,hp)))}catch(e){}},AE=t=>{const e=TE().filter(n=>n!==t);e.unshift(t),IE(e.slice(0,hp))},ez=()=>{const t=TE();if(t.length<=hp)return;const e=t.slice(0,hp);if(IE(e),!!qu())try{t.slice(hp).forEach(r=>window.localStorage.removeItem(Nx+r))}catch(n){}},tz=t=>{if(!qu())return null;try{const e=window.localStorage.getItem(Nx+t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n.ts!="number"||typeof n.ttlSec!="number"||Date.now()-n.ts>n.ttlSec*1e3?null:(CE("[SearchCache] hit",t),AE(t),n)}catch(e){return null}},sz=(t,e,n=JG)=>{if(!qu())return;const r={...e,ts:Date.now(),ttlSec:n};try{window.localStorage.setItem(Nx+t,JSON.stringify(r)),AE(t),ez(),CE("[SearchCache] store",t,{players:e.players.length,guilds:e.guilds.length})}catch(i){}},Hg=3,nz=350,bl=25,Wg=10,_w="sfh:search:recents",EE=20,I0=t=>Number.isFinite(t),Qd=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},rz=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Tl=()=>{try{const t=typeof window!="undefined"?window.localStorage.getItem(_w):null;if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.slice(0,EE).map(n=>{var r,i,a,o,c,u,h,p,g;return(n==null?void 0:n.kind)==="player"||(n==null?void 0:n.kind)==="guild"?{kind:n.kind,id:String((i=(r=n.id)!=null?r:n.value)!=null?i:""),server:(o=(a=n.server)!=null?a:n.serverId)!=null?o:null,name:(u=(c=n.name)!=null?c:n.label)!=null?u:null,className:(h=n.className)!=null?h:null,level:typeof n.level=="number"?n.level:null,guildName:(p=n.guildName)!=null?p:null}:(n==null?void 0:n.kind)==="query"?{kind:"query",value:String((g=n.value)!=null?g:"")}:null}).filter(Boolean):[]}catch(t){return[]}},Wc=t=>{var n;if(t.kind==="query")return`query:${t.value}`;const e=(n=t.server)!=null?n:"";return`${t.kind}:${e}:${t.id}`},Sk=t=>{var e,n,r,i,a,o,c,u,h;if(t.kind!=="player"||t.name&&t.className&&t.server||typeof window=="undefined")return t;try{const p=window.localStorage.getItem(`player-profile-cache:${t.id}`);if(!p)return t;const g=JSON.parse(p),y=(g==null?void 0:g.data)||{};return{...t,name:(n=(e=t.name)!=null?e:y.name)!=null?n:null,className:(i=(r=t.className)!=null?r:y.className)!=null?i:null,server:(o=(a=t.server)!=null?a:y.server)!=null?o:null,level:(c=t.level)!=null?c:typeof y.level=="number"?y.level:null,guildName:(h=(u=t.guildName)!=null?u:y.guild)!=null?h:null}}catch(p){return t}},A0=t=>{if(typeof window!="undefined")try{const e=Tl().map(Sk),n=t.kind==="player"?Sk(t):t,r=Wc(n),i=[n,...e.filter(a=>Wc(a)!==r)];window.localStorage.setItem(_w,JSON.stringify(i.slice(0,EE)))}catch(e){}},E0=(t,e)=>{try{const n=Tl().filter(r=>Wc(r)!==t);window.localStorage.setItem(_w,JSON.stringify(n)),e(n)}catch(n){e(r=>r.filter(i=>Wc(i)!==t))}};function iz(t){const e=t.ref.parent,n=e==null?void 0:e.parent,r=n==null?void 0:n.parent;return{root:r==null?void 0:r.id,id:n==null?void 0:n.id}}function Nk({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:n}){const{t:r}=Hs(),i=Xr(),[a,o]=W.useState(""),[c,u]=W.useState(""),[h,p]=W.useState(!1),[g,y]=W.useState(null),[_,w]=W.useState([]),[k,E]=W.useState([]),[P,L]=W.useState([]),[N,v]=W.useState(!1),[b,I]=W.useState(!1),[j,S]=W.useState(Tl()),[C,M]=W.useState(-1),[T,D]=W.useState(!1),[F,V]=W.useState(!1),[z,q]=W.useState(null),H=W.useRef(null),K=W.useRef(0);W.useEffect(()=>{const J=setTimeout(()=>u(a.trim()),nz);return()=>clearTimeout(J)},[a]),W.useEffect(()=>{let J=!1;async function ue(){const ie=c,me=ZG(ie);if(ie.length<Hg){w([]),E([]),L([]),v(!1),I(!1),M(j.length?0:-1),q(null);return}const ce=tz(me);if(ce){w(ce.players.slice(0,Wg).map(Te=>{var xe,Ie,$e;return{kind:"player",id:String(Te.playerId),name:Te.name,server:(xe=Te.server)!=null?xe:null,className:(Ie=Te.className)!=null?Ie:null,guildName:($e=Te.guildName)!=null?$e:null,nameFold:null,level:null}})),E(ce.guilds.slice(0,Wg).map(Te=>{var xe;return{kind:"guild",id:Te.guildId,name:Te.name,nameFold:null,server:(xe=Te.server)!=null?xe:null,memberCount:null,hofRank:null}})),v(ce.playersHasMore),I(ce.guildsHasMore),L([]),M(ce.players.length+ce.guilds.length?0:-1),q("cache");return}D(!0);const he=In("Search:universal");y(null),p(!0);const Ne=++K.current;try{let Te=function(Ht){var st,Pt,as,os,_n,Vn,rn,Ls,js,ar,wn,Er,Rr,Pr,Wn,ms,$s,or,xi,es,Ta,Zr,ec,Qo,so,no,Yo,tc,md,Ds,sc,Ia,ta,Lr;const re=Ht.data(),{root:qe,id:tt}=iz(Ht),ct=tt||re.playerId||re.guildIdentifier||"";if(qe==="players"||re.playerId&&!re.guildIdentifier){if(!ct||Ve.has(ct))return;Ve.add(ct),ht.push({kind:"player",id:ct,name:(as=(Pt=re.name)!=null?Pt:(st=re.values)==null?void 0:st.Name)!=null?as:null,nameFold:(os=re.nameFold)!=null?os:null,server:(rn=(Vn=re.server)!=null?Vn:(_n=re.values)==null?void 0:_n.Server)!=null?rn:null,guildName:(ar=(js=re.guildName)!=null?js:(Ls=re.values)==null?void 0:Ls.Guild)!=null?ar:null,className:(Rr=(Er=re.className)!=null?Er:(wn=re.values)==null?void 0:wn.Class)!=null?Rr:null,level:Qd((Wn=re.level)!=null?Wn:(Pr=re.values)==null?void 0:Pr.Level),ts:Qd(re.timestamp)});return}if(qe==="guilds"||re.guildIdentifier&&!re.playerId){if(!ct||nt.has(ct))return;nt.add(ct),Ue.push({kind:"guild",id:ct,name:(or=($s=re.name)!=null?$s:(ms=re.values)==null?void 0:ms.Name)!=null?or:null,nameFold:(xi=re.nameFold)!=null?xi:null,server:(Zr=(Ta=re.server)!=null?Ta:(es=re.values)==null?void 0:es.Server)!=null?Zr:null,memberCount:Qd((no=(Qo=re.memberCount)!=null?Qo:(ec=re.values)==null?void 0:ec["Guild Member Count"])!=null?no:(so=re.values)==null?void 0:so.GuildMemberCount),hofRank:Qd((Lr=(Ia=(Ds=(tc=re.hofRank)!=null?tc:(Yo=re.values)==null?void 0:Yo["Hall of Fame Rank"])!=null?Ds:(md=re.values)==null?void 0:md.HoF)!=null?Ia:(sc=re.values)==null?void 0:sc.Rank)!=null?Lr:(ta=re.values)==null?void 0:ta["Guild Rank"]),ts:Qd(re.timestamp)});return}};const xe=rz(ie),Ie=hm(ft,"latest"),$e=Tn(Ie,Pi("nameFold"),Dl(xe),Ml(xe+""),sr(bl)),Xe=await yn(he,{path:"latest"},()=>xn($e),{collectionHint:"latest"}),be=Tn(Ie,gi("nameNgrams","array-contains",xe),sr(bl)),Be=await yn(he,{path:"latest"},()=>xn(be),{collectionHint:"latest"}),Ve=new Set,nt=new Set,ht=[],Ue=[];Xe.forEach(Te),Be.forEach(Te);const Ee=ht.slice(0,bl),He=Ue.slice(0,bl);if(Ne!==K.current||J){Ys(he);return}const St=Go(ft,"servers"),Ct=ie.toLowerCase(),ns=ie.toUpperCase(),Rt=[yn(he,{path:"servers"},()=>xn(Tn(St,Pi("displayName"),Dl(ie),Ml(ie+""),sr(e))),{collectionHint:"servers"}),yn(he,{path:"servers"},()=>xn(Tn(St,Pi("code"),Dl(ns),Ml(ns+""),sr(e))),{collectionHint:"servers"}),yn(he,{path:"servers"},()=>xn(Tn(St,Pi("host"),Dl(Ct),Ml(Ct+""),sr(e))),{collectionHint:"servers"})],Gt=await Promise.allSettled(Rt),Ps=new Set,_t=[];for(const Ht of Gt)Ht.status==="fulfilled"&&Ht.value.forEach(re=>{var ct,st,Pt,as,os;const qe=re.data(),tt=re.id;!tt||Ps.has(tt)||(Ps.add(tt),_t.push({kind:"server",id:tt,displayName:(ct=qe.displayName)!=null?ct:null,code:(st=qe.code)!=null?st:null,host:(Pt=qe.host)!=null?Pt:null,region:(as=qe.region)!=null?as:null,type:(os=qe.type)!=null?os:null,numericId:Qd(qe.numericId),active:typeof qe.active=="boolean"?qe.active:null}))});const Ae=[],ks=Ht=>{for(const re of Ht){if(Ae.length>=Wg)break;Ae.push(re)}};ks(Ee),ks(He),Ae.length<Wg&&(ks(Ee.slice(Ae.length)),ks(He.slice(Ae.length))),w(Ae.filter(Ht=>Ht.kind==="player")),E(Ae.filter(Ht=>Ht.kind==="guild")),L(_t.slice(0,e)),v(Ee.length===bl),I(He.length===bl),M(Ae.length+_t.length?0:-1),q("live"),sz(me,{players:Ee.map(Ht=>({playerId:Ht.id,name:Ht.name,server:Ht.server,className:Ht.className,guildName:Ht.guildName})),guilds:He.map(Ht=>{var re;return{guildId:Ht.id,name:Ht.name,server:(re=Ht.server)!=null?re:void 0}}),playersHasMore:Ee.length===bl,guildsHasMore:He.length===bl})}catch(Te){y((Te==null?void 0:Te.message)||"Unbekannter Fehler bei der Suche."),w([]),E([]),L([]),M(-1)}finally{Ys(he),p(!1)}}return ue(),()=>{J=!0}},[c,e,j.length]),W.useEffect(()=>{const J=ue=>{H.current&&(H.current.contains(ue.target)||(w([]),E([]),L([]),M(-1),D(!1),V(!1)))};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]);const ne=T&&a.trim().length<Hg&&j.length>0,Y=T&&(h||g||ne||[..._,...k,...P].length>0||F&&a.trim().length<Hg),G=j.filter(J=>J.kind==="player"||J.kind==="guild").map(J=>{var ue,ie,me,ce,he,Ne,Te;return J.kind==="player"?{kind:"player",id:J.id,name:(ue=J.name)!=null?ue:null,nameFold:null,server:(ie=J.server)!=null?ie:null,guildName:(me=J.guildName)!=null?me:null,className:(ce=J.className)!=null?ce:null,level:(he=J.level)!=null?he:null,ts:null}:{kind:"guild",id:J.id,name:(Ne=J.name)!=null?Ne:null,nameFold:null,server:(Te=J.server)!=null?Te:null,memberCount:null,hofRank:null,ts:null}}),X=ne?G:[..._,...k,...P],te=J=>{J.kind==="player"?(A0({kind:"player",id:J.id,name:J.name,className:J.className,level:J.level,guildName:J.guildName,server:J.server}),S(Tl()),i(`/player/${encodeURIComponent(J.id)}`)):J.kind==="guild"?(A0({kind:"guild",id:J.id,name:J.name,server:J.server}),S(Tl()),i(`/guild/${encodeURIComponent(J.id)}`)):i(`/server/${encodeURIComponent(J.id)}`),w([]),E([]),L([]),M(-1),o(""),D(!1),q(null)},se=()=>{a.trim().length<Hg||(A0({kind:"query",value:a.trim()}),S(Tl()),i(`/search?q=${encodeURIComponent(a.trim())}`),D(!1))},Z=J=>{if(J.key==="Enter"){J.preventDefault(),C>=0&&X[C]?te(X[C]):se();return}if(J.key==="Escape"){w([]),E([]),L([]),M(-1),D(!1);return}X.length&&(J.key==="ArrowDown"?(J.preventDefault(),M(ue=>(ue+1)%X.length)):J.key==="ArrowUp"&&(J.preventDefault(),M(ue=>(ue-1+X.length)%X.length)))},ve=(J,ue,ie=!1,me)=>{var Te,xe,Ie,$e,Xe,be;const ce=ue===C,he=ie?"div":"button",Ne=ie?{role:"button",tabIndex:0,onKeyDown:Be=>{(Be.key==="Enter"||Be.key===" ")&&(Be.preventDefault(),te(J))}}:{type:"button"};return s.jsxs(he,{onClick:()=>te(J),style:ce?wt.itemActive:wt.item,title:J.name||"",onMouseEnter:()=>M(ue),...Ne,children:[s.jsx("div",{style:wt.iconBox,children:n?s.jsx("img",{src:n((Te=J.className)!=null?Te:void 0,64),alt:(xe=J.className)!=null?xe:"class icon",style:wt.iconImgShadow,loading:"lazy"}):s.jsx("span",{style:wt.iconFallback,children:(Ie=J.className)!=null?Ie:"?"})}),s.jsxs("div",{style:wt.meta,children:[s.jsxs("div",{style:wt.line1,children:[s.jsx("span",{style:wt.name,children:($e=J.name)!=null?$e:J.id}),I0(J.level)&&s.jsxs("span",{style:wt.badge,children:["Lvl ",J.level]}),ie&&s.jsx("span",{style:wt.recentsBadge,children:r("search.recentLabel","Recent")}),ie&&me&&s.jsx("button",{type:"button",style:wt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Be=>{Be.preventDefault(),Be.stopPropagation(),E0(me,S)},children:""})]}),s.jsxs("div",{style:wt.line2,children:[s.jsx("span",{children:(Xe=J.className)!=null?Xe:"Klasse ?"}),s.jsx("span",{style:wt.sep,children:""}),s.jsx("span",{children:(be=J.server)!=null?be:"Server ?"})]})]})]},`p-${J.id}-${ue}-${ie?"r":"s"}`)},Se=(J,ue,ie=!1,me)=>{var Te,xe;const ce=ue===C,he=ie?"div":"button",Ne=ie?{role:"button",tabIndex:0,onKeyDown:Ie=>{(Ie.key==="Enter"||Ie.key===" ")&&(Ie.preventDefault(),te(J))}}:{type:"button"};return s.jsxs(he,{onClick:()=>te(J),style:ce?wt.itemActive:wt.item,title:J.name||"",onMouseEnter:()=>M(ue),...Ne,children:[s.jsx("div",{style:wt.iconBox,children:""}),s.jsxs("div",{style:wt.meta,children:[s.jsxs("div",{style:wt.line1,children:[s.jsx("span",{style:wt.name,children:(Te=J.name)!=null?Te:J.id}),I0(J.hofRank)&&s.jsxs("span",{style:wt.badge,children:["HoF #",J.hofRank]}),ie&&s.jsx("span",{style:wt.recentsBadge,children:r("search.recentLabel","Recent")}),ie&&me&&s.jsx("button",{type:"button",style:wt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:Ie=>{Ie.preventDefault(),Ie.stopPropagation(),E0(me,S)},children:""})]}),s.jsxs("div",{style:wt.line2,children:[s.jsx("span",{children:(xe=J.server)!=null?xe:"Server ?"}),s.jsx("span",{style:wt.sep,children:""}),s.jsx("span",{children:I0(J.memberCount)?r("search.guildMembers","{{count}} members",{count:J.memberCount}):r("search.guildMembersUnknown","Members ?")})]})]})]},`g-${J.id}-${ue}-${ie?"r":"s"}`)};return s.jsxs("div",{ref:H,style:wt.wrap,children:[s.jsx("input",{style:wt.input,placeholder:t,value:a,onChange:J=>o(J.target.value),onKeyDown:Z,onFocus:()=>{V(!0),D(!0)},onBlur:()=>{V(!1)},"aria-label":r("search.inputLabel","Spieler, Gilden und Server suchen")}),Y&&s.jsxs("div",{style:wt.dropdown,children:[h&&s.jsx("div",{style:wt.hint,children:r("search.loading","Laden ")}),g&&s.jsx("div",{style:wt.err,children:g}),!h&&!g&&ne&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:wt.sectionHdr,children:r("search.recents","Recent searches")}),j.length===0&&s.jsx("div",{style:wt.hint,children:r("search.minCharsHint","Type at least 3 characters")}),j.map((J,ue)=>{var ie,me,ce,he,Ne,Te,xe;if(J.kind==="query"){const Ie=Wc(J);return s.jsx("div",{style:wt.item,role:"button",tabIndex:0,onClick:()=>{o(J.value),u(J.value),D(!1),S(Tl())},onKeyDown:$e=>{($e.key==="Enter"||$e.key===" ")&&($e.preventDefault(),o(J.value),u(J.value),D(!1),S(Tl()))},children:s.jsx("div",{style:wt.meta,children:s.jsxs("div",{style:wt.line1,children:[s.jsx("span",{style:wt.name,children:J.value}),s.jsx("span",{style:wt.recentsBadge,children:r("search.recentLabel","Recent")}),s.jsx("button",{type:"button",style:wt.clearBtn,"aria-label":r("search.removeRecent","Remove"),onClick:$e=>{$e.preventDefault(),$e.stopPropagation(),E0(Ie,S)},children:""})]})})},`rq-${ue}`)}if(J.kind==="player"){const Ie={kind:"player",id:J.id,name:(ie=J.name)!=null?ie:null,server:(me=J.server)!=null?me:null,guildName:(ce=J.guildName)!=null?ce:null,className:(he=J.className)!=null?he:null,level:(Ne=J.level)!=null?Ne:null},$e=Wc(J);return s.jsx(W.Fragment,{children:ve(Ie,ue,!0,$e)},`rp-${J.id}-${ue}`)}if(J.kind==="guild"){const Ie={kind:"guild",id:J.id,name:(Te=J.name)!=null?Te:null,server:(xe=J.server)!=null?xe:null,memberCount:null,hofRank:null},$e=Wc(J);return s.jsx(W.Fragment,{children:Se(Ie,ue+_.length,!0,$e)},`rg-${J.id}-${ue}`)}return null})]}),!h&&!g&&!ne&&X.length===0&&s.jsx("div",{style:wt.hint,children:r("search.noResults","No results")}),!h&&!g&&_.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:wt.sectionHdr,children:r("search.players","Players")}),_.map((J,ue)=>ve(J,ue))]}),!h&&!g&&k.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:wt.sectionHdr,children:r("search.guilds","Guilds")}),k.map((J,ue)=>{const ie=_.length+ue;return Se(J,ie)})]}),!h&&!g&&P.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:wt.sectionHdr,children:r("search.servers","Servers")}),P.map((J,ue)=>{var ce,he,Ne,Te,xe,Ie;const ie=_.length+k.length+ue,me=ie===C;return s.jsxs("button",{onClick:()=>te(J),style:me?wt.itemActive:wt.item,title:J.displayName||J.code||J.host||"",onMouseEnter:()=>M(ie),children:[s.jsx("div",{style:wt.iconBoxPlain,children:s.jsx("div",{style:wt.serverGlyph,children:""})}),s.jsxs("div",{style:wt.meta,children:[s.jsxs("div",{style:wt.line1,children:[s.jsx("span",{style:wt.name,children:(Ne=(he=(ce=J.displayName)!=null?ce:J.code)!=null?he:J.host)!=null?Ne:J.id}),J.active!=null&&s.jsx("span",{style:wt.badge,children:J.active?r("search.active","Active"):r("search.inactive","Inactive")})]}),s.jsxs("div",{style:wt.line2,children:[s.jsx("span",{children:(Te=J.code)!=null?Te:"?"}),s.jsx("span",{style:wt.sep,children:""}),s.jsx("span",{children:(xe=J.host)!=null?xe:"?"}),s.jsx("span",{style:wt.sep,children:""}),s.jsx("span",{children:(Ie=J.region)!=null?Ie:"?"}),J.type?s.jsxs(s.Fragment,{children:[s.jsx("span",{style:wt.sep,children:""}),s.jsx("span",{children:J.type.toUpperCase()})]}):null]})]})]},`s-${J.id}-${ue}`)})]}),(N||b)&&s.jsx("button",{style:wt.moreCta,onClick:se,children:r("search.moreResults","More results press Enter")})]})]})}const wt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},moreCta:{width:"100%",border:"1px dashed rgba(255,255,255,0.3)",background:"transparent",color:"#d6e4f7",padding:"10px 12px",borderRadius:10,cursor:"pointer",marginTop:8},recentsBadge:{marginLeft:8,fontSize:11,color:"#8aa5c4",border:"1px solid rgba(255,255,255,0.2)",padding:"0 6px",borderRadius:12},clearBtn:{marginLeft:8,background:"transparent",border:"none",color:"rgba(214,228,247,0.85)",cursor:"pointer",fontSize:12,padding:"0 4px"}},Kg=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function kx(t,e=64){if(!t)return;const n=Kg(t);let r=rr.find(i=>Kg(i.label)===n);return r||(r=rr.find(i=>Kg(i.label).startsWith(n)||n.startsWith(Kg(i.label)))),r?vi(r.iconUrl,e):void 0}const az=[{to:"/",labelKey:"home",defaultLabel:"Home",featureId:"main.home"},{to:"/dashboard",labelKey:"dashboard",defaultLabel:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",labelKey:"guildHub",defaultLabel:"Guild Hub",featureId:"main.guildHub"},{to:"/community",labelKey:"community",defaultLabel:"Community",featureId:"main.community"},{to:"/tools",labelKey:"tools",defaultLabel:"Tools",featureId:"main.tools"}];function kk(t,e){return kx(t,e)}function oz({user:t}){const{open:e,canUse:n}=bw(),{isVisibleInTopbar:r}=jx(),{t:i}=Hs(),[a,o]=W.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 767px)").matches),[c,u]=W.useState(!1),h=W.useRef(null),p=W.useMemo(()=>az.filter(_=>!_.featureId||r(_.featureId)),[r]),g=()=>{e({tab:"json"})};W.useEffect(()=>{if(typeof window=="undefined")return;const _=window.matchMedia("(max-width: 767px)"),w=()=>o(_.matches);return w(),_.addEventListener("change",w),()=>_.removeEventListener("change",w)},[]),W.useEffect(()=>{a||u(!1)},[a]),W.useEffect(()=>{if(!c||typeof window=="undefined")return;const _=w=>{w.key==="Escape"&&u(!1)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[c]),W.useEffect(()=>{if(!c||typeof document=="undefined")return;const _=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=_}},[c]),W.useEffect(()=>{if(!c)return;const _=()=>{var E;const k=(E=h.current)==null?void 0:E.querySelector("input");k==null||k.focus()},w=window.requestAnimationFrame(_);return()=>window.cancelAnimationFrame(w)},[c]);const y=i("search.open",{defaultValue:"Open search"});return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:$t.topbar,children:[s.jsxs("div",{className:$t.topbarLeft,children:[s.jsx("button",{className:$t.btnIco,"aria-label":i("nav.notifications",{defaultValue:"Notifications"}),children:s.jsx(CM,{className:$t.ico})}),s.jsx("button",{className:$t.btnIco,"aria-label":i("nav.favorites",{defaultValue:"Favorites"}),children:s.jsx(M7,{className:$t.ico})}),s.jsx("button",{className:`${$t.btnIco} ${$t.mobileSearchBtn}`,"aria-label":y,onClick:()=>u(!0),type:"button",children:s.jsx(Zf,{className:$t.ico})}),p.length>0?s.jsx("nav",{className:$t.topbarNav,"aria-label":i("topbar.quickAccess",{defaultValue:"Quick access"}),children:p.map(_=>s.jsx(Cs,{to:_.to,className:({isActive:w})=>`${$t.pill} ${$t.topbarLink} ${w?$t.pillActive:""}`,children:i(`nav.${_.labelKey}`,{defaultValue:_.defaultLabel})},_.to))}):null]}),s.jsx("div",{className:$t.searchWrap,children:s.jsx(Nk,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:kk,maxPerSection:10})}),s.jsxs("div",{className:$t.topbarRight,children:[s.jsxs("a",{className:`${$t.pill} ${$t.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer",children:[s.jsx(e7,{className:$t.ico}),"www.sfgame.net"]}),n?s.jsxs("button",{className:$t.upload,"aria-label":i("topbar.upload",{defaultValue:"Upload scan"}),onClick:g,title:i("topbar.upload",{defaultValue:"Upload scan"}),children:[s.jsx(H7,{className:$t.ico}),s.jsx("span",{className:$t.label,children:i("topbar.upload",{defaultValue:"Upload scan"})})]}):null,s.jsx(NG,{fallbackName:t==null?void 0:t.name})]})]}),a&&c?s.jsx("div",{className:$t.mobileSearchOverlay,role:"presentation",onClick:()=>u(!1),children:s.jsx("div",{className:$t.mobileSearchPanel,onClick:_=>_.stopPropagation(),ref:h,children:s.jsx("div",{className:$t.searchWrap,children:s.jsx(Nk,{placeholder:i("search.placeholder",{defaultValue:"Search players"}),getClassIcon:kk,maxPerSection:10})})})}):null]})}const lz="_root_1uloe_3",cz="_expanded_1uloe_45",dz="_drawer_1uloe_49",uz="_headRow_1uloe_75",hz="_headTitle_1uloe_83",pz="_headDot_1uloe_85",mz="_headLabel_1uloe_87",gz="_pinBtn_1uloe_89",fz="_navScroll_1uloe_103",vz="_pad_1uloe_105",xz="_segCard_1uloe_111",yz="_segTitle_1uloe_143",bz="_connectedCharactersCard_1uloe_161",_z="_connectedCharactersTitle_1uloe_167",wz="_connectedCharactersList_1uloe_181",jz="_characterChip_1uloe_197",Sz="_characterChipId_1uloe_237",Nz="_characterChipMeta_1uloe_245",kz="_connectedCharactersEmpty_1uloe_253",Cz="_connectedCharactersEmptyText_1uloe_307",Tz="_connectedCharactersEmptyCta_1uloe_313",Iz="_navCol_1uloe_363",Az="_navItemWrap_1uloe_365",Ez="_navBtn_1uloe_371",Rz="_navBtnActive_1uloe_395",Pz="_label_1uloe_399",Lz="_trailing_1uloe_429",Dz="_isOpen_1uloe_477",Mz="_footer_1uloe_503",Fz="_login_1uloe_505",Bz="_userMeta_1uloe_527",$z="_footerLink_1uloe_541",Oz="_footerRow_1uloe_569",Vz="_footerRowCell_1uloe_579",Uz="_footerRowLink_1uloe_593",Gz="_languageSwitch_1uloe_599",zz="_languageSegment_1uloe_625",Hz="_languageSegmentEn_1uloe_715",Wz="_languageSegmentDe_1uloe_725",Kz="_languageSegmentActive_1uloe_737",qz="_languageSegmentInactive_1uloe_755",Qz="_legal_1uloe_781",Yz="_labelText_1uloe_805",Xz="_char_1uloe_197",Jz="_mainNavCard_1uloe_883",Zz="_mobileTrigger_1uloe_893",eH="_mobileOverlay_1uloe_907",tH="_mobileDrawer_1uloe_929",mt={root:lz,expanded:cz,drawer:dz,headRow:uz,headTitle:hz,headDot:pz,headLabel:mz,pinBtn:gz,navScroll:fz,pad:vz,segCard:xz,segTitle:yz,connectedCharactersCard:bz,connectedCharactersTitle:_z,connectedCharactersList:wz,characterChip:jz,characterChipId:Sz,characterChipMeta:Nz,connectedCharactersEmpty:kz,connectedCharactersEmptyText:Cz,connectedCharactersEmptyCta:Tz,navCol:Iz,navItemWrap:Az,navBtn:Ez,navBtnActive:Rz,label:Pz,trailing:Lz,isOpen:Dz,footer:Mz,login:Fz,userMeta:Bz,footerLink:$z,footerRow:Oz,footerRowCell:Vz,footerRowLink:Uz,languageSwitch:Gz,languageSegment:zz,languageSegmentEn:Hz,languageSegmentDe:Wz,languageSegmentActive:Kz,languageSegmentInactive:qz,legal:Qz,labelText:Yz,char:Xz,mainNavCard:Jz,mobileTrigger:Zz,mobileOverlay:eH,mobileDrawer:tH},sH="_panel_90cjk_1",nH="_open_90cjk_31",rH="_col_90cjk_43",iH="_link_90cjk_55",aH="_linkActive_90cjk_73",pp={panel:sH,open:nH,col:rH,link:iH,linkActive:aH};function oH(t,e=8){const n=t.getBoundingClientRect();return{left:Math.round(n.right+e),top:Math.round(n.top)}}function lH({anchorEl:t,open:e,items:n,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[o,c]=W.useState({left:0,top:0});return W.useEffect(()=>{if(!e||!t)return;const u=()=>c(oH(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(n!=null&&n.length)&&console.log("submenu items:",n.map(u=>u.label)),gM.createPortal(s.jsx("div",{className:`${pp.panel} ${e?pp.open:""}`,style:{left:o.left,top:o.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:s.jsx("div",{className:pp.col,children:n.map(u=>r(u))})}),document.body))}const cH=[{code:"en",label:"EN",ariaLabel:"Switch language to English"},{code:"de",label:"DE",ariaLabel:"Switch language to German"}],dH=[{to:"/",label:"Home",icon:s.jsx(n7,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",label:"Discover",icon:s.jsx(HM,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",label:"Dashboard",icon:s.jsx(o7,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",label:"Settings",icon:s.jsx(k7,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",label:"Guild Hub",icon:s.jsx(od,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",label:"Admin",icon:s.jsx(A7,{className:"ico"}),featureId:"main.admin"},{to:"/playground",label:"Playground",icon:s.jsx(Xv,{className:"ico"}),featureId:"main.playground"}],uH=[{to:"/toplists",label:"Toplists",icon:s.jsx(G7,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub-v2",label:"Guide Hub",icon:s.jsx(IM,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",label:"Tools",icon:s.jsx(q7,{className:"ico"}),i18nKey:"nav.tools",featureId:"main.tools"},{to:"/community",label:"Community",icon:s.jsx(h7,{className:"ico"}),featureId:"main.community"},{to:"/scans",label:"Scans",icon:s.jsx(JM,{className:"ico"}),featureId:"main.scans"}],hH={"/guild-hub":[{to:"/guild-hub",label:"Overview"},{to:"/guild-hub/planner",label:"Guild Planner"},{to:"/guild-hub/fusion-planner",label:"Fusion Planner"},{to:"/guild-hub/compare-guilds",label:"Gildenvergleich"},{to:"/guild-hub/waitlist",label:"Waitlist"},{to:"/guild-hub/settings",label:"Settings"}],"/discover":[{to:"/players",label:"Players"},{to:"/sfmagazine",label:"SFMagazine"},{to:"/sfmagazine/historybook",label:"History Book"},{to:"/guilds",label:"Guilds"},{to:"/servers",label:"Servers"},{to:"/scans",label:"Scans"},{to:"/discover/favorites",label:"Favorites"}],"/admin":[{to:"/admin",label:"Overview"},{to:"/admin/errors",label:"Error log"},{to:"/admin/feedback",label:"Feedback"},{to:"/admin/users",label:"Users",minRole:"mod"}],"/settings":[{to:"/settings/profile",label:"Profile"},{to:"/settings/account",label:"Account"},{to:"/settings/appearance",label:"Appearance"}],"/playground":[{to:"/playground/list-views",label:"List Views"},{to:"/playground/rescan-widget",label:"Rescan Widget"},{to:"/playground/upload-sim",label:"Upload Simulator"},{to:"/playground/hud/game-buttons",label:"HUD  Game Buttons"}]};function pH(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function mH(t,e){return t?t.filter(n=>pH(e,n.minRole)):[]}const gH=220;function fH(t=gH){const[e,n]=W.useState(!1),r=W.useRef(null),i=W.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=W.useCallback(()=>{i(),n(!0)},[i]),o=W.useCallback(()=>{i(),r.current=window.setTimeout(()=>n(!1),t)},[i,t]);return W.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:o,setOpen:n}}function ww({text:t,isOpen:e,duration:n=1,step:r=45}){const i=W.useMemo(()=>Array.from(t),[t]);return s.jsx("span",{className:mt.label,children:s.jsx("span",{className:mt.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${n}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,o)=>s.jsx("span",{className:mt.char,style:{"--i":o},"aria-hidden":"true",children:a===" "?"":a},`${t}-${o}`))})})}function vH({it:t,label:e,collapsed:n,allowSubmenus:r,subItems:i,onNavigate:a}){const o=i.length>0,{open:c,onEnter:u,onLeave:h,setOpen:p}=fH(),g=W.useRef(null),y=W.useCallback(()=>{if(!r||!o){p(!1);return}u()},[r,o,u,p]);return s.jsxs("div",{ref:g,className:`${mt.navItemWrap} ${c?mt.isOpen:""}`,onMouseEnter:y,onMouseLeave:h,children:[s.jsxs(Cs,{to:t.to,end:!!t.end,className:({isActive:_})=>`${mt.navBtn} ${_?mt.navBtnActive:""}`,onClick:a,children:[t.icon,s.jsx(ww,{text:e,isOpen:!n}),o&&!n&&s.jsx("span",{className:mt.trailing,"aria-hidden":"true",children:s.jsx(PM,{className:"ico"})})]}),o&&s.jsx(lH,{anchorEl:g.current,open:c,items:i.map(({to:_,label:w})=>({to:_,label:w})),renderLink:_=>s.jsx(Cs,{to:_.to,end:!0,className:({isActive:w})=>`${pp.link} ${w?pp.linkActive:""}`,onClick:a,children:_.label},_.to),onMouseEnter:u,onMouseLeave:h})]})}function Ck({title:t,items:e,collapsed:n,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:o,onNavigate:c}){return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:`${mt.navTitle} ${mt.segTitle}`,children:t}),s.jsx("div",{className:mt.navCol,children:e.map(u=>{if(!o(u))return null;const h=mH(hH[u.to],i),p=u.i18nKey?a(u.i18nKey):u.label;return h.length?s.jsx(vH,{it:u,label:p,collapsed:n,allowSubmenus:r,subItems:h,onNavigate:c},u.to):s.jsxs(Cs,{to:u.to,end:!!u.end,className:({isActive:g})=>`${mt.navBtn} ${g?mt.navBtnActive:""}`,onClick:c,children:[u.icon,s.jsx(ww,{text:p,isOpen:!n})]},u.to)})})]})}const xH=90,yH=180;function Tk({expanded:t,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:i=!0,variant:a="default",onNavigate:o}){var ne;const c=W.useRef(null),u=W.useRef(null),[h,p]=W.useState(!1),g=W.useCallback(()=>{c.current&&(window.clearTimeout(c.current),c.current=null),u.current&&(window.clearTimeout(u.current),u.current=null)},[]),y=W.useCallback(()=>{!i||n||(g(),p(!1),c.current=window.setTimeout(()=>e(!0),xH))},[i,n,g,e]),_=W.useCallback(()=>{!i||n||(g(),u.current=window.setTimeout(()=>{e(!1),p(!1)},yH))},[i,n,g,e]);W.useEffect(()=>()=>g(),[g]),W.useEffect(()=>{n&&p(!0)},[n]);const w=Y=>{Y.propertyName==="width"&&t&&!n&&p(!0)};W.useEffect(()=>{if(t&&!n){const Y=window.setTimeout(()=>p(!0),250);return()=>window.clearTimeout(Y)}},[t,n]);const k=!t,E=n||t&&h,P=Xr(),{t:L,i18n:N}=Hs(),{status:v,user:b,logout:I}=ea(),j=v==="authenticated",S=(ne=b==null?void 0:b.roles)!=null?ne:[],C=W.useMemo(()=>{var Y;return(Y=b==null?void 0:b.linkedPlayers)!=null?Y:[]},[b==null?void 0:b.linkedPlayers]),{isVisibleInSidebar:M}=jx(),[T,D]=W.useState("en");W.useEffect(()=>{var X;if(typeof window=="undefined")return;const Y=window.localStorage.getItem("sf_lang"),G=Y==="en"||Y==="de"?Y:(X=N.language)!=null&&X.startsWith("de")?"de":"en";D(G),N.language!==G&&N.changeLanguage(G)},[N]);const F=W.useCallback(Y=>{D(Y),typeof window!="undefined"&&window.localStorage.setItem("sf_lang",Y),N.language!==Y&&N.changeLanguage(Y)},[N]),V=()=>{j?I():typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):P("/login")},z=Y=>{P(`/player/${Y}`),o==null||o()},q=()=>{C.length>0||(P(j?"/settings/account?tab=connected-characters&openHelp=1":"/help#linking"),o==null||o())},H=j?L("sidebar.connectedCharacters.empty",{defaultValue:"No characters linked yet. Link a character in your account to see it here."}):L("sidebar.connectedCharacters.loginPrompt",{defaultValue:"Sign in to see your linked characters."}),K=j?L("sidebar.connectedCharacters.ctaAuthed",{defaultValue:"Open linked characters guide"}):L("sidebar.connectedCharacters.ctaGuest",{defaultValue:"Open start guide"});return s.jsxs("aside",{id:"sidebar-root",className:`${mt.root} ${t?mt.expanded:""} ${a==="drawer"?mt.drawer:""}`,"data-collapsed":k?"true":"false",onMouseEnter:y,onMouseLeave:_,onTransitionEnd:w,"aria-label":"Navigation",children:[s.jsxs("div",{className:mt.headRow,children:[s.jsxs("div",{className:mt.headTitle,children:[s.jsx("span",{className:mt.headDot})," ",s.jsx("span",{className:mt.headLabel,children:"Navigation"})]}),s.jsx("button",{className:mt.pinBtn,"aria-pressed":n,title:n?"Unpin":"Pin",onClick:()=>r(!n),type:"button",children:n?s.jsx(x7,{className:"ico"}):s.jsx(f7,{className:"ico"})})]}),s.jsx("div",{className:mt.navScroll,children:s.jsxs("div",{className:mt.pad,children:[s.jsx("div",{className:`${mt.segCard} ${mt.mainNavCard}`,children:s.jsx(Ck,{items:dH,collapsed:k,allowSubmenus:E,userRoles:S,translate:L,isItemVisible:Y=>{var G;return M((G=Y.featureId)!=null?G:Y.to)},onNavigate:o})}),s.jsx("div",{className:mt.segTitle,children:"Kategorien"}),s.jsx("div",{className:`${mt.segCard} ${mt.mainNavCard}`,children:s.jsx(Ck,{items:uH,collapsed:k,allowSubmenus:E,userRoles:S,translate:L,isItemVisible:Y=>{var G;return M((G=Y.featureId)!=null?G:Y.to)},onNavigate:o})}),s.jsxs("div",{className:`${mt.segCard} ${mt.mainNavCard} ${mt.connectedCharactersCard}`,children:[s.jsx("div",{className:mt.connectedCharactersTitle,children:L("sidebar.connectedCharacters.title",{defaultValue:"Connected characters"})}),C.length===0?s.jsxs("button",{type:"button",className:mt.connectedCharactersEmpty,onClick:q,children:[s.jsx("span",{className:mt.connectedCharactersEmptyText,children:H}),s.jsx("span",{className:mt.connectedCharactersEmptyCta,children:K})]}):s.jsx("div",{className:mt.connectedCharactersList,"data-collapsed":k?"true":"false",children:C.map(Y=>{var se,Z;const G=[Y.server,Y.class].filter(Boolean).join(" | "),X=(se=Y.playerId)!=null?se:"-",te=`${(Z=Y.server)!=null?Z:"server"}-${X}`;return s.jsxs("button",{type:"button",className:mt.characterChip,onClick:()=>z(X),children:[s.jsx("span",{className:mt.characterChipId,children:X}),G&&s.jsx("span",{className:mt.characterChipMeta,children:G})]},te)})})]})]})}),s.jsxs("div",{className:`${mt.footer} ${mt.segCard} ${mt.mainNavCard}`,children:[s.jsxs("button",{className:mt.login,type:"button",onClick:V,children:[s.jsx(od,{className:"ico"}),s.jsx(ww,{text:j?"Logout":"Login",isOpen:!k})]}),j&&(b!=null&&b.displayName)?s.jsx("div",{className:mt.userMeta,title:b.displayName,children:b.displayName}):null,s.jsxs("div",{className:mt.footerRow,children:[s.jsx("div",{className:mt.footerRowCell,children:s.jsx(Cs,{to:"/help",className:`${mt.footerLink} ${mt.footerRowLink}`,onClick:o,children:L("nav.help",{defaultValue:"Help"})})}),s.jsx("div",{className:mt.footerRowCell,children:s.jsx("div",{className:mt.languageSwitch,role:"group","aria-label":"Sidebar language preference",children:cH.map(Y=>{const G=T===Y.code,X=`${mt.languageSegment} ${Y.code==="de"?mt.languageSegmentDe:mt.languageSegmentEn} ${G?mt.languageSegmentActive:mt.languageSegmentInactive}`;return s.jsx("button",{type:"button",className:X,onClick:()=>F(Y.code),"aria-pressed":G,"aria-label":Y.ariaLabel},Y.code)})})})]}),s.jsxs("div",{className:mt.legal,children:["(c) 2025 ",L("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const Lf="/assets/logo-sfdatahub-CUdhlsEb.png";function bH({src:t,alt:e="",children:n,to:r="/",loading:i="eager",decoding:a="async"}){const o=t!=null?t:Lf;return s.jsxs("div",{className:"logo-dock",children:[s.jsx(Cs,{to:r,"aria-label":"Go to home",children:s.jsx("img",{className:"logo-img",src:o,alt:e,loading:i,decoding:a,onError:c=>{const u=c.currentTarget;u.src!==Lf&&(u.src=Lf)}})}),n]})}const _H="_wrapper_su530_1",wH="_card_su530_19",jH="_logo_su530_45",SH="_heading_su530_61",NH="_subcopy_su530_73",kH="_buttonStack_su530_83",CH="_providerButton_su530_97",TH="_discord_su530_145",IH="_google_su530_153",AH="_errorMessage_su530_161",EH="_diagnostics_su530_183",RH="_diagnosticsBody_su530_195",PH="_disclaimer_su530_215",LH="_status_su530_227",DH="_sessionBlock_su530_237",MH="_logoutButton_su530_251",FH="_linkButton_su530_281",BH="_loading_su530_299",$H="_spinner_su530_315",Pn={wrapper:_H,card:wH,logo:jH,heading:SH,subcopy:NH,buttonStack:kH,providerButton:CH,discord:TH,google:IH,errorMessage:AH,diagnostics:EH,diagnosticsBody:RH,disclaimer:PH,status:LH,sessionBlock:DH,logoutButton:MH,linkButton:FH,loading:BH,spinner:$H},RE=()=>{var P,L,N,v,b,I;const t=Xr(),{status:e,user:n,loginWithDiscord:r,loginWithGoogle:i,logout:a}=ea(),[o,c]=W.useState(null),u=e==="loading"||e==="idle",h=e==="authenticated"&&!!n,p=W.useCallback(()=>{var S;if(typeof window=="undefined")return!1;try{const C=(S=window.localStorage)==null?void 0:S.getItem("sfh:debug:auth");if(C==="1"||C==="true")return!0}catch(C){console.warn("[Login] Failed to read auth debug flag",C)}return!1},[]),g=W.useCallback((j,S)=>{const C=typeof window!="undefined"?window.location.host:"unknown host";switch(j){case"auth/unauthorized-domain":return`This domain is not authorized for login. Please add "${C}" to your Firebase Auth authorized domains or use the correct environment.`;case"auth/popup-blocked":return"The login popup was blocked. Please allow popups for this site or continue with the redirect flow.";case"auth/popup-closed-by-user":return"The login popup was closed before completing sign-in. Please try again.";default:{const M=j?` (code: ${j})`:"";return`${S||"Login failed. Please try again."}${M}`}}},[]),y=async()=>{if(!u){c(null);try{await r()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},_=async()=>{if(!u){c(null);try{await i()}catch(j){const S=typeof(j==null?void 0:j.code)=="string"?j.code:void 0,C=typeof(j==null?void 0:j.message)=="string"?j.message:void 0;c({code:S,message:g(S,C)})}}},w=async()=>{await a()},k=()=>{t("/")};let E;return u?E=s.jsxs("div",{className:Pn.loading,children:[s.jsx("div",{className:Pn.spinner}),s.jsx("div",{children:"Checking session?"})]}):h&&n?E=s.jsxs("div",{className:Pn.sessionBlock,children:[s.jsxs("div",{className:Pn.status,children:["You are logged in as ",n.displayName,"."]}),s.jsx("button",{className:Pn.logoutButton,type:"button",onClick:w,children:"Logout"}),s.jsx("button",{className:Pn.linkButton,type:"button",onClick:k,children:"Back to dashboard"})]}):E=s.jsxs("div",{className:Pn.buttonStack,children:[s.jsx("button",{className:`${Pn.providerButton} ${Pn.discord}`,type:"button",onClick:y,children:"Login with Discord"}),s.jsx("button",{className:`${Pn.providerButton} ${Pn.google}`,type:"button",onClick:_,children:"Login with Google"}),o&&s.jsx("div",{className:Pn.errorMessage,children:o.message}),p()&&s.jsxs("details",{className:Pn.diagnostics,children:[s.jsx("summary",{children:"Auth diagnostics"}),s.jsxs("div",{className:Pn.diagnosticsBody,children:[s.jsxs("div",{children:["Host: ",typeof window!="undefined"?window.location.host:"N/A"]}),s.jsxs("div",{children:["Origin: ",typeof window!="undefined"?window.location.origin:"N/A"]}),s.jsxs("div",{children:["Firebase projectId: ",(N=(L=(P=fa.app)==null?void 0:P.options)==null?void 0:L.projectId)!=null?N:"unknown"]}),s.jsxs("div",{children:["Firebase authDomain: ",(I=(b=(v=fa.app)==null?void 0:v.options)==null?void 0:b.authDomain)!=null?I:"unknown"]})]})]})]}),s.jsx("div",{className:Pn.wrapper,children:s.jsxs("div",{className:Pn.card,children:[s.jsx("img",{className:Pn.logo,src:Lf,alt:"SFDataHub logo"}),s.jsx("h1",{className:Pn.heading,children:"Sign in"}),s.jsx("p",{className:Pn.subcopy,children:"Choose a method to access SFDataHub."}),E,s.jsx("p",{className:Pn.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})},OH="_backdrop_bbe4l_1",VH="_inner_bbe4l_23",Ik={backdrop:OH,inner:VH},UH=({isOpen:t,onClose:e})=>(W.useEffect(()=>{if(!t)return;const n=r=>{r.key==="Escape"&&e()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[t,e]),W.useEffect(()=>{if(!t)return;const n=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=n}},[t]),t?s.jsx("div",{className:Ik.backdrop,role:"dialog","aria-modal":"true","aria-label":"Sign in",onMouseDown:n=>{n.target===n.currentTarget&&e()},children:s.jsx("div",{className:Ik.inner,children:s.jsx(RE,{})})}):null),Ak="sfh:openLoginModal",GH=()=>{const{status:t,user:e}=ea(),n=ir(),[r,i]=W.useState(!1);return W.useEffect(()=>{const a=()=>i(!0);return window.addEventListener(Ak,a),()=>window.removeEventListener(Ak,a)},[]),W.useEffect(()=>{r&&n.pathname==="/login"&&i(!1)},[r,n.pathname]),W.useEffect(()=>{if(!r)return;t==="authenticated"&&!!e&&i(!1)},[r,t,e]),s.jsx(UH,{isOpen:r,onClose:()=>i(!1)})},zH={borderColor:"#2B4C73",background:"#1A2F4A"},Ek="sfh:authNext",HH=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e};function WH(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1),[i,a]=R.useState(()=>typeof window=="undefined"?!1:window.matchMedia("(max-width: 1023px)").matches),[o,c]=R.useState(!1),u=n||t,{t:h}=Hs(),{status:p,user:g}=ea(),y=Xr(),_=ir();R.useEffect(()=>{if(p!=="authenticated"||!g)return;const N=()=>{if(typeof window=="undefined"||!window.sessionStorage)return null;try{return window.sessionStorage.getItem(Ek)}catch(j){return console.warn("[AuthNext] Failed to read auth next from sessionStorage",j),null}},v=()=>{if(!(typeof window=="undefined"||!window.sessionStorage))try{window.sessionStorage.removeItem(Ek)}catch(j){console.warn("[AuthNext] Failed to clear auth next from sessionStorage",j)}},b=HH(N());if(!b){v();return}v(),`${_.pathname}${_.search||""}`!==b&&y(b,{replace:!0})},[p,g,_.pathname,_.search,y]),R.useEffect(()=>{if(typeof window=="undefined")return;const N=window.matchMedia("(max-width: 1023px)"),v=()=>a(N.matches);return v(),N.addEventListener("change",v),()=>N.removeEventListener("change",v)},[]),R.useEffect(()=>{i||c(!1)},[i]),R.useEffect(()=>{if(!o||typeof window=="undefined")return;const N=v=>{v.key==="Escape"&&c(!1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[o]),R.useEffect(()=>{if(!o||typeof document=="undefined")return;const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[o]);const w=R.useMemo(()=>i?"0px":u?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i,u]),k=h("footer.about.body").split(`

`),E=[{key:"tos",to:"/playground/legal/tos",label:h("help.sections.legal.items.tos",{defaultValue:"Terms of Service (ToS)"})},{key:"privacy",to:"/playground/legal/tos",label:h("help.sections.legal.items.privacy",{defaultValue:"Privacy Policy"})},{key:"imprint",to:"/help",label:h("help.sections.legal.items.imprint",{defaultValue:"Imprint / Contact"})}],P=h("nav.open",{defaultValue:"Open navigation"}),L=i?"collapsed":u?"expanded":"collapsed";return s.jsxs("div",{id:"app-shell","data-sidebar":L,style:{"--left":w},children:[s.jsx(bH,{src:"/logo.png"}),s.jsx(oz,{}),s.jsx("div",{className:"logo-fill"}),i?!o&&s.jsx("div",{className:`${mt.headRow} ${mt.mobileTrigger}`,children:s.jsx("button",{className:mt.pinBtn,type:"button","aria-label":P,"aria-expanded":o,onClick:()=>c(!0),children:s.jsx(d7,{className:"ico"})})}):s.jsx(Tk,{expanded:u,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!n}),i&&o?s.jsx("div",{className:mt.mobileOverlay,role:"presentation",onClick:()=>c(!1),children:s.jsx("div",{className:mt.mobileDrawer,onClick:N=>N.stopPropagation(),children:s.jsx(Tk,{expanded:!0,setExpanded:e,pinned:n,setPinned:r,hoverToExpand:!1,variant:"drawer",onNavigate:()=>c(!1)})})}):null,s.jsx("div",{className:"content",children:s.jsx("div",{className:"content-inner",children:s.jsxs("div",{className:"content-body",children:[s.jsx(E3,{}),s.jsx(GH,{}),s.jsx("div",{className:"mt-4 px-4 md:px-6",children:s.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:zH,children:[s.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:h("footer.about.title")}),s.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:k.map((N,v)=>s.jsx("p",{className:"whitespace-pre-line",children:N},`footer-about-${v}`))}),s.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[s.jsx("div",{children:h("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),s.jsx("div",{children:h("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:E.map(N=>s.jsx(As,{to:N.to,className:"underline hover:no-underline",children:N.label},N.key))})]})})]})})})]})}const PE=R.createContext({});function jw(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Sw=R.createContext(null),Nw=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function KH(t=!0){const e=R.useContext(Sw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=R.useId();R.useEffect(()=>{t&&i(a)},[t]);const o=R.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const kw=typeof window!="undefined",LE=kw?R.useLayoutEffect:R.useEffect,Di=t=>t;let DE=Di;function Cw(t){let e;return()=>(e===void 0&&(e=t()),e)}const id=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},qa=t=>t*1e3,Qa=t=>t/1e3,qH={useManualTiming:!1};function QH(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,p=!1,g=!1)=>{const _=g&&r?e:n;return p&&a.add(h),_.has(h)||_.add(h),h},cancel:h=>{n.delete(h),a.delete(h)},process:h=>{if(o=h,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const qg=["read","resolveKeyframes","update","preRender","render","postRender"],YH=40;function ME(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=qg.reduce((P,L)=>(P[L]=QH(a),P),{}),{read:c,resolveKeyframes:u,update:h,preRender:p,render:g,postRender:y}=o,_=()=>{const P=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(P-i.timestamp,YH),1),i.timestamp=P,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},w=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:qg.reduce((P,L)=>{const N=o[L];return P[L]=(v,b=!1,I=!1)=>(n||w(),N.schedule(v,b,I)),P},{}),cancel:P=>{for(let L=0;L<qg.length;L++)o[qg[L]].cancel(P)},state:i,steps:o}}const{schedule:zs,cancel:Ho,state:pr,steps:R0}=ME(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Di,!0),FE=R.createContext({strict:!1}),Rk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Eu={};for(const t in Rk)Eu[t]={isEnabled:e=>Rk[t].some(n=>!!e[n])};function XH(t){for(const e in t)Eu[e]={...Eu[e],...t[e]}}const JH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _v(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JH.has(t)}let BE=t=>!_v(t);function ZH(t){t&&(BE=e=>e.startsWith("on")?!_v(e):t(e))}try{ZH(require("@emotion/is-prop-valid").default)}catch(t){}function eW(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(BE(i)||n===!0&&_v(i)||!e&&!_v(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function tW(t){if(typeof Proxy=="undefined")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Cx=R.createContext({});function Up(t){return typeof t=="string"||Array.isArray(t)}function Tx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Tw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iw=["initial",...Tw];function Ix(t){return Tx(t.animate)||Iw.some(e=>Up(t[e]))}function $E(t){return!!(Ix(t)||t.variants)}function sW(t,e){if(Ix(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Up(n)?n:void 0,animate:Up(r)?r:void 0}}return t.inherit!==!1?e:{}}function nW(t){const{initial:e,animate:n}=sW(t,R.useContext(Cx));return R.useMemo(()=>({initial:e,animate:n}),[Pk(e),Pk(n)])}function Pk(t){return Array.isArray(t)?t.join(" "):t}const rW=Symbol.for("motionComponentSymbol");function lu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function iW(t,e,n){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lu(n)&&(n.current=r))},[e])}const Aw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aW="framerAppearId",OE="data-"+Aw(aW),{schedule:Ew}=ME(queueMicrotask,!1),VE=R.createContext({});function oW(t,e,n,r,i){var a,o;const{visualElement:c}=R.useContext(Cx),u=R.useContext(FE),h=R.useContext(Sw),p=R.useContext(Nw).reducedMotion,g=R.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,_=R.useContext(VE);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&lW(g.current,n,i,_);const w=R.useRef(!1);R.useInsertionEffect(()=>{y&&w.current&&y.update(n,h)});const k=n[OE],E=R.useRef(!!k&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,k))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,k)));return LE(()=>{y&&(w.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),Ew.render(y.render),E.current&&y.animationState&&y.animationState.animateChanges())}),R.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,k)}),E.current=!1))}),y}function lW(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:UE(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&lu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function UE(t){if(t)return t.options.allowProjection!==!1?t.projection:UE(t.parent)}function cW({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,o;t&&XH(t);function c(h,p){let g;const y={...R.useContext(Nw),...h,layoutId:dW(h)},{isStatic:_}=y,w=nW(h),k=r(h,_);if(!_&&kw){uW();const E=hW(y);g=E.MeasureLayout,w.visualElement=oW(i,k,y,e,E.ProjectionNode)}return s.jsxs(Cx.Provider,{value:w,children:[g&&w.visualElement?s.jsx(g,{visualElement:w.visualElement,...y}):null,n(i,h,iW(k,w.visualElement,p),k,_,w.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const u=R.forwardRef(c);return u[rW]=i,u}function dW({layoutId:t}){const e=R.useContext(PE).id;return e&&t!==void 0?e+"-"+t:t}function uW(t,e){R.useContext(FE).strict}function hW(t){const{drag:e,layout:n}=Eu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rw(t){return typeof t!="string"||t.includes("-")?!1:!!(pW.indexOf(t)>-1||/[A-Z]/u.test(t))}function Lk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Pw(t,e,n,r){if(typeof e=="function"){const[i,a]=Lk(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Lk(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const I1=t=>Array.isArray(t),mW=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gW=t=>I1(t)?t[t.length-1]||0:t,nr=t=>!!(t&&t.getVelocity);function Df(t){const e=nr(t)?t.get():t;return mW(e)?e.toValue():e}function fW({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const o={latestValues:vW(r,i,a,t),renderState:e()};return n&&(o.onMount=c=>n({props:r,current:c,...o}),o.onUpdate=c=>n(c)),o}const GE=t=>(e,n)=>{const r=R.useContext(Cx),i=R.useContext(Sw),a=()=>fW(t,e,r,i);return n?a():jw(a)};function vW(t,e,n,r){const i={},a=r(t,{});for(const y in a)i[y]=Df(a[y]);let{initial:o,animate:c}=t;const u=Ix(t),h=$E(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||o===!1;const g=p?c:o;if(g&&typeof g!="boolean"&&!Tx(g)){const y=Array.isArray(g)?g:[g];for(let _=0;_<y.length;_++){const w=Pw(t,y[_]);if(w){const{transitionEnd:k,transition:E,...P}=w;for(const L in P){let N=P[L];if(Array.isArray(N)){const v=p?N.length-1:0;N=N[v]}N!==null&&(i[L]=N)}for(const L in k)i[L]=k[L]}}}return i}const Qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ud=new Set(Qu),zE=t=>e=>typeof e=="string"&&e.startsWith(t),HE=zE("--"),xW=zE("var(--"),Lw=t=>xW(t)?yW.test(t.split("/*")[0].trim()):!1,yW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,WE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Wo=(t,e,n)=>n>e?e:n<t?t:n,Yu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gp={...Yu,transform:t=>Wo(0,1,t)},Qg={...Yu,default:1},xm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kl=xm("deg"),Ya=xm("%"),It=xm("px"),bW=xm("vh"),_W=xm("vw"),Dk={...Ya,parse:t=>Ya.parse(t)/100,transform:t=>Ya.transform(t*100)},wW={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It},jW={rotate:kl,rotateX:kl,rotateY:kl,rotateZ:kl,scale:Qg,scaleX:Qg,scaleY:Qg,scaleZ:Qg,skew:kl,skewX:kl,skewY:kl,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:Gp,originX:Dk,originY:Dk,originZ:It},Mk={...Yu,transform:Math.round},Dw={...wW,...jW,zIndex:Mk,size:It,fillOpacity:Gp,strokeOpacity:Gp,numOctaves:Mk},SW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NW=Qu.length;function kW(t,e,n){let r="",i=!0;for(let a=0;a<NW;a++){const o=Qu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=WE(c,Dw[o]);if(!u){i=!1;const p=SW[o]||o;r+=`${p}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const h=e[u];if(ud.has(u)){o=!0;continue}else if(HE(u)){i[u]=h;continue}else{const p=WE(h,Dw[u]);u.startsWith("origin")?(c=!0,a[u]=p):r[u]=p}}if(e.transform||(o||n?r.transform=kW(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:p=0}=a;r.transformOrigin=`${u} ${h} ${p}`}}const CW={offset:"stroke-dashoffset",array:"stroke-dasharray"},TW={offset:"strokeDashoffset",array:"strokeDasharray"};function IW(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?CW:TW;t[a.offset]=It.transform(-r);const o=It.transform(e),c=It.transform(n);t[a.array]=`${o} ${c}`}function Fk(t,e,n){return typeof t=="string"?t:It.transform(e+n*t)}function AW(t,e,n){const r=Fk(e,t.x,t.width),i=Fk(n,t.y,t.height);return`${r} ${i}`}function Fw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:c=1,pathOffset:u=0,...h},p,g){if(Mw(t,h,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_,dimensions:w}=t;y.transform&&(w&&(_.transform=y.transform),delete y.transform),w&&(i!==void 0||a!==void 0||_.transform)&&(_.transformOrigin=AW(w,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&IW(y,o,c,u,!1)}const Bw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KE=()=>({...Bw(),attrs:{}}),$w=t=>typeof t=="string"&&t.toLowerCase()==="svg";function qE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const QE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YE(t,e,n,r){qE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(QE.has(i)?i:Aw(i),e.attrs[i])}const wv={};function EW(t){Object.assign(wv,t)}function XE(t,{layout:e,layoutId:n}){return ud.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wv[t]||t==="opacity")}function Ow(t,e,n){var r;const{style:i}=t,a={};for(const o in i)(nr(i[o])||e.style&&nr(e.style[o])||XE(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function JE(t,e,n){const r=Ow(t,e,n);for(const i in t)if(nr(t[i])||nr(e[i])){const a=Qu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function RW(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(n){e.dimensions={x:0,y:0,width:0,height:0}}}const Bk=["x","y","width","height","cx","cy","r"],PW={useVisualState:GE({scrapeMotionValuesFromProps:JE,createRenderState:KE,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const c in i)if(ud.has(c)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let c=0;c<Bk.length;c++){const u=Bk[c];t[u]!==e[u]&&(o=!0)}o&&zs.read(()=>{RW(n,r),zs.render(()=>{Fw(r,i,$w(n.tagName),t.transformTemplate),YE(n,r)})})}})},LW={useVisualState:GE({scrapeMotionValuesFromProps:Ow,createRenderState:Bw})};function ZE(t,e,n){for(const r in e)!nr(e[r])&&!XE(r,n)&&(t[r]=e[r])}function DW({transformTemplate:t},e){return R.useMemo(()=>{const n=Bw();return Mw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function MW(t,e){const n=t.style||{},r={};return ZE(r,n,t),Object.assign(r,DW(t,e)),r}function FW(t,e){const n={},r=MW(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function BW(t,e,n,r){const i=R.useMemo(()=>{const a=KE();return Fw(a,e,$w(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ZE(a,t.style,t),i.style={...a,...i.style}}return i}function $W(t=!1){return(n,r,i,{latestValues:a},o)=>{const u=(Rw(n)?BW:FW)(r,a,o,n),h=eW(r,typeof n=="string",t),p=n!==R.Fragment?{...h,...u,ref:i}:{},{children:g}=r,y=R.useMemo(()=>nr(g)?g.get():g,[g]);return R.createElement(n,{...p,children:y})}}function OW(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Rw(r)?PW:LW,preloadedFeatures:t,useRender:$W(i),createVisualElement:e,Component:r};return cW(o)}}function e4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ax(t,e,n){const r=t.getProps();return Pw(r,e,n!==void 0?n:r.custom,t)}const VW=Cw(()=>window.ScrollTimeline!==void 0);class UW{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(VW()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class t4 extends UW{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Vw(t,e){return t?t[e]||t.default||t:void 0}const jv=2e4;function Uw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<jv;)e+=n,r=t.next(e);return e>=jv?1/0:e}function GW(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Uw(r),jv);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Qa(i)}}function Ex(t){return typeof t=="function"}function $k(t,e){t.timeline=e,t.onfinish=null}const Gw=t=>Array.isArray(t)&&typeof t[0]=="number",zW={linearEasing:void 0};function HW(t,e){const n=Cw(t);return()=>{var r;return(r=zW[e])!==null&&r!==void 0?r:n()}}const Sv=HW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),s4=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(id(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function n4(t){return!!(typeof t=="function"&&Sv()||!t||typeof t=="string"&&(t in A1||Sv())||Gw(t)||Array.isArray(t)&&t.every(n4))}const ep=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,A1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ep([0,.65,.55,1]),circOut:ep([.55,0,1,.45]),backIn:ep([.31,.01,.66,-.59]),backOut:ep([.33,1.53,.69,.99])};function r4(t,e){if(t)return typeof t=="function"&&Sv()?s4(t,e):Gw(t)?ep(t):Array.isArray(t)?t.map(n=>r4(n,e)||A1.easeOut):A1[t]}const va={x:!1,y:!1};function i4(){return va.x||va.y}function a4(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=n==null?void 0:n[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function o4(t,e){const n=a4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Ok(t){return e=>{e.pointerType==="touch"||i4()||t(e)}}function WW(t,e,n={}){const[r,i,a]=o4(t,n),o=Ok(c=>{const{target:u}=c,h=e(c);if(typeof h!="function"||!u)return;const p=Ok(g=>{h(g),u.removeEventListener("pointerleave",p)});u.addEventListener("pointerleave",p,i)});return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const l4=(t,e)=>e?t===e?!0:l4(t,e.parentElement):!1,zw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,KW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qW(t){return KW.has(t.tagName)||t.tabIndex!==-1}const tp=new WeakSet;function Vk(t){return e=>{e.key==="Enter"&&t(e)}}function P0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const QW=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Vk(()=>{if(tp.has(n))return;P0(n,"down");const i=Vk(()=>{P0(n,"up")}),a=()=>P0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Uk(t){return zw(t)&&!i4()}function YW(t,e,n={}){const[r,i,a]=o4(t,n),o=c=>{const u=c.currentTarget;if(!Uk(c)||tp.has(u))return;tp.add(u);const h=e(c),p=(_,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),!(!Uk(_)||!tp.has(u))&&(tp.delete(u),typeof h=="function"&&h(_,{success:w}))},g=_=>{p(_,n.useGlobalTarget||l4(u,_.target))},y=_=>{p(_,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return r.forEach(c=>{!qW(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),c.addEventListener("focus",h=>QW(h,i),i)}),a}function XW(t){return t==="x"||t==="y"?va[t]?null:(va[t]=!0,()=>{va[t]=!1}):va.x||va.y?null:(va.x=va.y=!0,()=>{va.x=va.y=!1})}const c4=new Set(["width","height","top","left","right","bottom",...Qu]);let Mf;function JW(){Mf=void 0}const Xa={now:()=>(Mf===void 0&&Xa.set(pr.isProcessing||qH.useManualTiming?pr.timestamp:performance.now()),Mf),set:t=>{Mf=t,queueMicrotask(JW)}};function Hw(t,e){t.indexOf(e)===-1&&t.push(e)}function Rx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ww{constructor(){this.subscriptions=[]}add(e){return Hw(this.subscriptions,e),()=>Rx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function d4(t,e){return e?t*(1e3/e):0}const Gk=30,ZW=t=>!isNaN(parseFloat(t)),mp={current:void 0};class eK{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Xa.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ww);const r=this.events[e].add(n);return e==="change"?()=>{r(),zs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return mp.current&&mp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Xa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Gk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Gk);return d4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ru(t,e){return new eK(t,e)}function tK(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ru(n))}function sK(t,e){const n=Ax(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=gW(a[o]);tK(t,o,c)}}function nK(t){return!!(nr(t)&&t.add)}function E1(t,e){const n=t.getValue("willChange");if(nK(n))return n.add(e)}function u4(t){return t.props[OE]}const h4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rK=1e-7,iK=12;function aK(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=h4(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>rK&&++c<iK);return o}function ym(t,e,n,r){if(t===e&&n===r)return Di;const i=a=>aK(a,0,1,t,n);return a=>a===0||a===1?a:h4(i(a),e,r)}const p4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,m4=t=>e=>1-t(1-e),g4=ym(.33,1.53,.69,.99),Kw=m4(g4),f4=p4(Kw),v4=t=>(t*=2)<1?.5*Kw(t):.5*(2-Math.pow(2,-10*(t-1))),qw=t=>1-Math.sin(Math.acos(t)),x4=m4(qw),y4=p4(qw),b4=t=>/^0[^.\s]+$/u.test(t);function oK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||b4(t):!0}const gp=t=>Math.round(t*1e5)/1e5,Qw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lK(t){return t==null}const cK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yw=(t,e)=>n=>!!(typeof n=="string"&&cK.test(n)&&n.startsWith(t)||e&&!lK(n)&&Object.prototype.hasOwnProperty.call(n,e)),_4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Qw);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},dK=t=>Wo(0,255,t),L0={...Yu,transform:t=>Math.round(dK(t))},Oc={test:Yw("rgb","red"),parse:_4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+L0.transform(t)+", "+L0.transform(e)+", "+L0.transform(n)+", "+gp(Gp.transform(r))+")"};function uK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const R1={test:Yw("#"),parse:uK,transform:Oc.transform},cu={test:Yw("hsl","hue"),parse:_4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ya.transform(gp(e))+", "+Ya.transform(gp(n))+", "+gp(Gp.transform(r))+")"},Tr={test:t=>Oc.test(t)||R1.test(t)||cu.test(t),parse:t=>Oc.test(t)?Oc.parse(t):cu.test(t)?cu.parse(t):R1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oc.transform(t):cu.transform(t)},hK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Qw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hK))===null||n===void 0?void 0:n.length)||0)>0}const w4="number",j4="color",mK="var",gK="var(",zk="${}",fK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(fK,u=>(Tr.test(u)?(r.color.push(a),i.push(j4),n.push(Tr.parse(u))):u.startsWith(gK)?(r.var.push(a),i.push(mK),n.push(u)):(r.number.push(a),i.push(w4),n.push(parseFloat(u))),++a,zk)).split(zk);return{values:n,split:c,indexes:r,types:i}}function S4(t){return zp(t).values}function N4(t){const{split:e,types:n}=zp(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===w4?a+=gp(i[o]):c===j4?a+=Tr.transform(i[o]):a+=i[o]}return a}}const vK=t=>typeof t=="number"?0:t;function xK(t){const e=S4(t);return N4(t)(e.map(vK))}const Ql={test:pK,parse:S4,createTransformer:N4,getAnimatableNone:xK},yK=new Set(["brightness","contrast","saturate","opacity"]);function bK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Qw)||[];if(!r)return t;const i=n.replace(r,"");let a=yK.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const _K=/\b([a-z-]*)\(.*?\)/gu,P1={...Ql,getAnimatableNone:t=>{const e=t.match(_K);return e?e.map(bK).join(" "):t}},wK={...Dw,color:Tr,backgroundColor:Tr,outlineColor:Tr,fill:Tr,stroke:Tr,borderColor:Tr,borderTopColor:Tr,borderRightColor:Tr,borderBottomColor:Tr,borderLeftColor:Tr,filter:P1,WebkitFilter:P1},Xw=t=>wK[t];function k4(t,e){let n=Xw(t);return n!==P1&&(n=Ql),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const jK=new Set(["auto","none","0"]);function SK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!jK.has(a)&&zp(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=k4(n,i)}const Hk=t=>t===Yu||t===It,Wk=(t,e)=>parseFloat(t.split(", ")[e]),Kk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Wk(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?Wk(a[1],t):0}},NK=new Set(["x","y","z"]),kK=Qu.filter(t=>!NK.has(t));function CK(t){const e=[];return kK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Pu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Kk(4,13),y:Kk(5,14)};Pu.translateX=Pu.x;Pu.translateY=Pu.y;const Kc=new Set;let L1=!1,D1=!1;function C4(){if(D1){const t=Array.from(Kc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=CK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}D1=!1,L1=!1,Kc.forEach(t=>t.complete()),Kc.clear()}function T4(){Kc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(D1=!0)})}function TK(){T4(),C4()}class Jw{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Kc.add(this),L1||(L1=!0,zs.read(T4),zs.resolveKeyframes(C4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Kc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Kc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const I4=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),IK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AK(t){const e=IK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n!=null?n:r}`,i]}function A4(t,e,n=1){const[r,i]=AK(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return I4(o)?parseFloat(o):o}return Lw(i)?A4(i,e,n+1):i}const E4=t=>e=>e.test(t),EK={test:t=>t==="auto",parse:t=>t},R4=[Yu,It,Ya,kl,_W,bW,EK],qk=t=>R4.find(E4(t));class P4 extends Jw{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),Lw(h))){const p=A4(h,n.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!c4.has(r)||e.length!==2)return;const[i,a]=e,o=qk(i),c=qk(a);if(o!==c)if(Hk(o)&&Hk(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)oK(e[i])&&r.push(i);r.length&&SK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,c=i[o];i[o]=Pu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{n.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const Qk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ql.test(t)||t==="0")&&!t.startsWith("url("));function RK(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function PK(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=Qk(i,e),c=Qk(a,e);return!o||!c?!1:RK(t)||(n==="spring"||Ex(n))&&r}const LK=t=>t!==null;function Px(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(LK),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const DK=40;class L4{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xa.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DK?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&TK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Xa.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:c,onUpdate:u,isGenerator:h}=this.options;if(!h&&!PK(e,r,i,a))if(o)this.options.duration=0;else{u&&u(Px(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const en=(t,e,n)=>t+(e-t)*n;function D0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function MK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=D0(u,c,t+1/3),a=D0(u,c,t),o=D0(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Nv(t,e){return n=>n>0?e:t}const M0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},FK=[R1,Oc,cu],BK=t=>FK.find(e=>e.test(t));function Yk(t){const e=BK(t);if(!e)return!1;let n=e.parse(t);return e===cu&&(n=MK(n)),n}const Xk=(t,e)=>{const n=Yk(t),r=Yk(e);if(!n||!r)return Nv(t,e);const i={...n};return a=>(i.red=M0(n.red,r.red,a),i.green=M0(n.green,r.green,a),i.blue=M0(n.blue,r.blue,a),i.alpha=en(n.alpha,r.alpha,a),Oc.transform(i))},$K=(t,e)=>n=>e(t(n)),bm=(...t)=>t.reduce($K),M1=new Set(["none","hidden"]);function OK(t,e){return M1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function VK(t,e){return n=>en(t,e,n)}function Zw(t){return typeof t=="number"?VK:typeof t=="string"?Lw(t)?Nv:Tr.test(t)?Xk:zK:Array.isArray(t)?D4:typeof t=="object"?Tr.test(t)?Xk:UK:Nv}function D4(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>Zw(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function UK(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Zw(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function GK(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],u=(n=t.values[c])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const zK=(t,e)=>{const n=Ql.createTransformer(e),r=zp(t),i=zp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?M1.has(t)&&!i.values.length||M1.has(e)&&!r.values.length?OK(t,e):bm(D4(GK(r,i),i.values),n):Nv(t,e)};function M4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?en(t,e,n):Zw(t)(t,e)}const HK=5;function F4(t,e,n){const r=Math.max(e-HK,0);return d4(n-t(r),e-r)}const vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},F0=.001;function WK({duration:t=vn.duration,bounce:e=vn.bounce,velocity:n=vn.velocity,mass:r=vn.mass}){let i,a,o=1-e;o=Wo(vn.minDamping,vn.maxDamping,o),t=Wo(vn.minDuration,vn.maxDuration,Qa(t)),o<1?(i=h=>{const p=h*o,g=p*t,y=p-n,_=F1(h,o),w=Math.exp(-g);return F0-y/_*w},a=h=>{const g=h*o*t,y=g*n+n,_=Math.pow(o,2)*Math.pow(h,2)*t,w=Math.exp(-g),k=F1(Math.pow(h,2),o);return(-i(h)+F0>0?-1:1)*((y-_)*w)/k}):(i=h=>{const p=Math.exp(-h*t),g=(h-n)*t+1;return-F0+p*g},a=h=>{const p=Math.exp(-h*t),g=(n-h)*(t*t);return p*g});const c=5/t,u=qK(i,a,c);if(t=qa(t),isNaN(u))return{stiffness:vn.stiffness,damping:vn.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const KK=12;function qK(t,e,n){let r=n;for(let i=1;i<KK;i++)r=r-t(r)/e(r);return r}function F1(t,e){return t*Math.sqrt(1-e*e)}const QK=["duration","bounce"],YK=["stiffness","damping","mass"];function Jk(t,e){return e.some(n=>t[n]!==void 0)}function XK(t){let e={velocity:vn.velocity,stiffness:vn.stiffness,damping:vn.damping,mass:vn.mass,isResolvedFromDuration:!1,...t};if(!Jk(t,YK)&&Jk(t,QK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Wo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:vn.mass,stiffness:i,damping:a}}else{const n=WK(t);e={...e,...n,mass:vn.mass},e.isResolvedFromDuration=!0}return e}function ej(t=vn.visualDuration,e=vn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:p,duration:g,velocity:y,isResolvedFromDuration:_}=XK({...n,velocity:-Qa(n.velocity||0)}),w=y||0,k=h/(2*Math.sqrt(u*p)),E=o-a,P=Qa(Math.sqrt(u/p)),L=Math.abs(E)<5;r||(r=L?vn.restSpeed.granular:vn.restSpeed.default),i||(i=L?vn.restDelta.granular:vn.restDelta.default);let N;if(k<1){const b=F1(P,k);N=I=>{const j=Math.exp(-k*P*I);return o-j*((w+k*P*E)/b*Math.sin(b*I)+E*Math.cos(b*I))}}else if(k===1)N=b=>o-Math.exp(-P*b)*(E+(w+P*E)*b);else{const b=P*Math.sqrt(k*k-1);N=I=>{const j=Math.exp(-k*P*I),S=Math.min(b*I,300);return o-j*((w+k*P*E)*Math.sinh(S)+b*E*Math.cosh(S))/b}}const v={calculatedDuration:_&&g||null,next:b=>{const I=N(b);if(_)c.done=b>=g;else{let j=0;k<1&&(j=b===0?qa(w):F4(N,b,I));const S=Math.abs(j)<=r,C=Math.abs(o-I)<=i;c.done=S&&C}return c.value=c.done?o:I,c},toString:()=>{const b=Math.min(Uw(v),jv),I=s4(j=>v.next(b*j).value,b,30);return b+"ms "+I}};return v}function Zk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},_=S=>c!==void 0&&S<c||u!==void 0&&S>u,w=S=>c===void 0?u:u===void 0||Math.abs(c-S)<Math.abs(u-S)?c:u;let k=n*e;const E=g+k,P=o===void 0?E:o(E);P!==E&&(k=P-g);const L=S=>-k*Math.exp(-S/r),N=S=>P+L(S),v=S=>{const C=L(S),M=N(S);y.done=Math.abs(C)<=h,y.value=y.done?P:M};let b,I;const j=S=>{_(y.value)&&(b=S,I=ej({keyframes:[y.value,w(y.value)],velocity:F4(N,S,y.value),damping:i,stiffness:a,restDelta:h,restSpeed:p}))};return j(0),{calculatedDuration:null,next:S=>{let C=!1;return!I&&b===void 0&&(C=!0,v(S),j(S)),b!==void 0&&S>=b?I.next(S-b):(!C&&v(S),y)}}}const JK=ym(.42,0,1,1),ZK=ym(0,0,.58,1),B4=ym(.42,0,.58,1),$4=t=>Array.isArray(t)&&typeof t[0]!="number",eq={linear:Di,easeIn:JK,easeInOut:B4,easeOut:ZK,circIn:qw,circInOut:y4,circOut:x4,backIn:Kw,backInOut:f4,backOut:g4,anticipate:v4},eC=t=>{if(Gw(t)){DE(t.length===4);const[e,n,r,i]=t;return ym(e,n,r,i)}else if(typeof t=="string")return eq[t];return t};function tq(t,e,n){const r=[],i=n||M4,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Di:e;c=bm(u,c)}r.push(c)}return r}function O4(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(DE(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=tq(e,r,i),u=c.length,h=p=>{if(o&&p<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=id(t[g],t[g+1],p);return c[g](y)};return n?p=>h(Wo(t[0],t[a-1],p)):h}function V4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=id(0,e,r);t.push(en(n,1,i))}}function U4(t){const e=[0];return V4(e,t.length-1),e}function sq(t,e){return t.map(n=>n*e)}function nq(t,e){return t.map(()=>e||B4).splice(0,t.length-1)}function kv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=$4(r)?r.map(eC):eC(r),a={done:!1,value:e[0]},o=sq(n&&n.length===e.length?n:U4(e),t),c=O4(o,e,{ease:Array.isArray(i)?i:nq(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const rq=t=>{const e=({timestamp:n})=>t(n);return{start:()=>zs.update(e,!0),stop:()=>Ho(e),now:()=>pr.isProcessing?pr.timestamp:Xa.now()}},iq={decay:Zk,inertia:Zk,tween:kv,keyframes:kv,spring:ej},aq=t=>t/100;class tj extends L4{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Jw,c=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new o(a,c,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,c=Ex(n)?n:iq[n]||kv;let u,h;c!==kv&&typeof e[0]!="number"&&(u=bm(aq,M4(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});a==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=Uw(p));const{calculatedDuration:g}=p,y=g+i,_=y*(r+1)-i;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:y,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:h,totalDuration:p,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:y,repeat:_,repeatType:w,repeatDelay:k,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-y*(this.speed>=0?1:-1),L=this.speed>=0?P<0:P>p;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let N=this.currentTime,v=a;if(_){const S=Math.min(this.currentTime,p)/g;let C=Math.floor(S),M=S%1;!M&&S>=1&&(M=1),M===1&&C--,C=Math.min(C,_+1),!!(C%2)&&(w==="reverse"?(M=1-M,k&&(M-=k/g)):w==="mirror"&&(v=o)),N=Wo(0,1,M)*g}const b=L?{done:!1,value:u[0]}:v.next(N);c&&(b.value=c(b.value));let{done:I}=b;!L&&h!==null&&(I=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&i!==void 0&&(b.value=Px(u,this.options,i)),E&&E(b.value),j&&this.finish(),b}get duration(){const{resolved:e}=this;return e?Qa(e.calculatedDuration):0}get time(){return Qa(this.currentTime)}set time(e){e=qa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rq,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const oq=new Set(["opacity","clipPath","filter","transform"]);function lq(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeInOut",times:u}={}){const h={[e]:n};u&&(h.offset=u);const p=r4(c,i);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const cq=Cw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cv=10,dq=2e4;function uq(t){return Ex(t.type)||t.type==="spring"||!n4(t.ease)}function hq(t,e){const n=new tj({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<dq;)r=n.sample(a),i.push(r.value),a+=Cv;return{times:void 0,keyframes:i,duration:a-Cv,ease:"linear"}}const G4={anticipate:v4,backInOut:f4,circInOut:y4};function pq(t){return t in G4}class tC extends L4{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new P4(a,(o,c)=>this.onKeyframesResolved(o,c),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:o,motionValue:c,name:u,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&Sv()&&pq(a)&&(a=G4[a]),uq(this.options)){const{onComplete:g,onUpdate:y,motionValue:_,element:w,...k}=this.options,E=hq(e,k);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,i=E.times,a=E.ease,o="keyframes"}const p=lq(c.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return p.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?($k(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;c.set(Px(e,this.options,n)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Qa(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Qa(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=qa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Di;const{animation:r}=n;$k(r,e)}return Di}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:g,element:y,..._}=this.options,w=new tj({..._,keyframes:r,duration:i,type:a,ease:o,times:c,isGenerator:!0}),k=qa(this.time);h.setWithVelocity(w.sample(k-Cv).value,w.sample(k).value,Cv)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=n.owner.getProps();return cq()&&r&&oq.has(r)&&!u&&!h&&!i&&a!=="mirror"&&o!==0&&c!=="inertia"}}const mq={type:"spring",stiffness:500,damping:25,restSpeed:10},gq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fq={type:"keyframes",duration:.8},vq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xq=(t,{keyframes:e})=>e.length>2?fq:ud.has(t)?t.startsWith("scale")?gq(e[1]):mq:vq;function yq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const sj=(t,e,n,r={},i,a)=>o=>{const c=Vw(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-qa(u);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};yq(c)||(p={...p,...xq(t,p)}),p.duration&&(p.duration=qa(p.duration)),p.repeatDelay&&(p.repeatDelay=qa(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const y=Px(p.keyframes,c);if(y!==void 0)return zs.update(()=>{p.onUpdate(y),p.onComplete()}),new t4([])}return!a&&tC.supports(p)?new tC(p):new tj(p)};function bq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nj(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const h=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),_=u[g];if(_===void 0||p&&bq(p,g))continue;const w={delay:n,...Vw(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const P=u4(t);if(P){const L=window.MotionHandoffAnimation(P,g,zs);L!==null&&(w.startTime=L,k=!0)}}E1(t,g),y.start(sj(g,y,_,t.shouldReduceMotion&&c4.has(g)?{type:!1}:w,t,k));const E=y.animation;E&&h.push(E)}return c&&Promise.all(h).then(()=>{zs.update(()=>{c&&sK(t,c)})}),h}function B1(t,e,n={}){var r;const i=Ax(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(nj(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=a;return _q(t,e,p+h,g,y,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,p]=u==="beforeChildren"?[o,c]:[c,o];return h().then(()=>p())}else return Promise.all([o(),c(n.delay)])}function _q(t,e,n=0,r=0,i=1,a){const o=[],c=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort(wq).forEach((h,p)=>{h.notify("AnimationStart",e),o.push(B1(h,e,{...a,delay:n+u(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function wq(t,e){return t.sortNodePosition(e)}function jq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>B1(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=B1(t,e,n);else{const i=typeof e=="function"?Ax(t,e,n.custom):e;r=Promise.all(nj(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Sq=Iw.length;function z4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?z4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Sq;n++){const r=Iw[n],i=t.props[r];(Up(i)||i===!1)&&(e[r]=i)}return e}const Nq=[...Tw].reverse(),kq=Tw.length;function Cq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>jq(t,n,r)))}function Tq(t){let e=Cq(t),n=sC(),r=!0;const i=u=>(h,p)=>{var g;const y=Ax(t,p,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:_,transitionEnd:w,...k}=y;h={...h,...k,...w}}return h};function a(u){e=u(t)}function o(u){const{props:h}=t,p=z4(t.parent)||{},g=[],y=new Set;let _={},w=1/0;for(let E=0;E<kq;E++){const P=Nq[E],L=n[P],N=h[P]!==void 0?h[P]:p[P],v=Up(N),b=P===u?L.isActive:null;b===!1&&(w=E);let I=N===p[P]&&N!==h[P]&&v;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),L.protectedKeys={..._},!L.isActive&&b===null||!N&&!L.prevProp||Tx(N)||typeof N=="boolean")continue;const j=Iq(L.prevProp,N);let S=j||P===u&&L.isActive&&!I&&v||E>w&&v,C=!1;const M=Array.isArray(N)?N:[N];let T=M.reduce(i(P),{});b===!1&&(T={});const{prevResolvedValues:D={}}=L,F={...D,...T},V=H=>{S=!0,y.has(H)&&(C=!0,y.delete(H)),L.needsAnimating[H]=!0;const K=t.getValue(H);K&&(K.liveStyle=!1)};for(const H in F){const K=T[H],ne=D[H];if(_.hasOwnProperty(H))continue;let Y=!1;I1(K)&&I1(ne)?Y=!e4(K,ne):Y=K!==ne,Y?K!=null?V(H):y.add(H):K!==void 0&&y.has(H)?V(H):L.protectedKeys[H]=!0}L.prevProp=N,L.prevResolvedValues=T,L.isActive&&(_={..._,...T}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(I&&j)||C)&&g.push(...M.map(H=>({animation:H,options:{type:P}})))}if(y.size){const E={};y.forEach(P=>{const L=t.getBaseTarget(P),N=t.getValue(P);N&&(N.liveStyle=!0),E[P]=L!=null?L:null}),g.push({animation:E})}let k=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(g):Promise.resolve()}function c(u,h){var p;if(n[u].isActive===h)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(u,h)}),n[u].isActive=h;const g=o(u);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=sC(),r=!0}}}function Iq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!e4(e,t):!1}function wc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sC(){return{animate:wc(!0),whileInView:wc(),whileHover:wc(),whileTap:wc(),whileDrag:wc(),whileFocus:wc(),exit:wc()}}class Jl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Aq extends Jl{constructor(e){super(e),e.animationState||(e.animationState=Tq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Eq=0;class Rq extends Jl{constructor(){super(...arguments),this.id=Eq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Pq={animation:{Feature:Aq},exit:{Feature:Rq}};function Hp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function _m(t){return{point:{x:t.pageX,y:t.pageY}}}const Lq=t=>e=>zw(e)&&t(e,_m(e));function fp(t,e,n,r){return Hp(t,e,Lq(n),r)}const nC=(t,e)=>Math.abs(t-e);function Dq(t,e){const n=nC(t.x,e.x),r=nC(t.y,e.y);return Math.sqrt(n**2+r**2)}class H4{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=$0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,_=Dq(g.offset,{x:0,y:0})>=3;if(!y&&!_)return;const{point:w}=g,{timestamp:k}=pr;this.history.push({...w,timestamp:k});const{onStart:E,onMove:P}=this.handlers;y||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=B0(y,this.transformPagePoint),zs.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:_,onSessionEnd:w,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=$0(g.type==="pointercancel"?this.lastMoveEventInfo:B0(y,this.transformPagePoint),this.history);this.startEvent&&_&&_(g,E),w&&w(g,E)},!zw(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=_m(e),c=B0(o,this.transformPagePoint),{point:u}=c,{timestamp:h}=pr;this.history=[{...u,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,$0(c,this.history)),this.removeListeners=bm(fp(this.contextWindow,"pointermove",this.handlePointerMove),fp(this.contextWindow,"pointerup",this.handlePointerUp),fp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ho(this.updatePoint)}}function B0(t,e){return e?{point:e(t.point)}:t}function rC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $0({point:t},e){return{point:t,delta:rC(t,W4(e)),offset:rC(t,Mq(e)),velocity:Fq(e,.1)}}function Mq(t){return t[0]}function W4(t){return t[t.length-1]}function Fq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=W4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>qa(e)));)n--;if(!r)return{x:0,y:0};const a=Qa(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const K4=1e-4,Bq=1-K4,$q=1+K4,q4=.01,Oq=0-q4,Vq=0+q4;function Fi(t){return t.max-t.min}function Uq(t,e,n){return Math.abs(t-e)<=n}function iC(t,e,n,r=.5){t.origin=r,t.originPoint=en(e.min,e.max,t.origin),t.scale=Fi(n)/Fi(e),t.translate=en(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Bq&&t.scale<=$q||isNaN(t.scale))&&(t.scale=1),(t.translate>=Oq&&t.translate<=Vq||isNaN(t.translate))&&(t.translate=0)}function vp(t,e,n,r){iC(t.x,e.x,n.x,r?r.originX:void 0),iC(t.y,e.y,n.y,r?r.originY:void 0)}function aC(t,e,n){t.min=n.min+e.min,t.max=t.min+Fi(e)}function Gq(t,e,n){aC(t.x,e.x,n.x),aC(t.y,e.y,n.y)}function oC(t,e,n){t.min=e.min-n.min,t.max=t.min+Fi(e)}function xp(t,e,n){oC(t.x,e.x,n.x),oC(t.y,e.y,n.y)}function zq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?en(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?en(n,t,r.max):Math.min(t,n)),t}function lC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Hq(t,{top:e,left:n,bottom:r,right:i}){return{x:lC(t.x,n,i),y:lC(t.y,e,r)}}function cC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Wq(t,e){return{x:cC(t.x,e.x),y:cC(t.y,e.y)}}function Kq(t,e){let n=.5;const r=Fi(t),i=Fi(e);return i>r?n=id(e.min,e.max-r,t.min):r>i&&(n=id(t.min,t.max-i,e.min)),Wo(0,1,n)}function qq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $1=.35;function Qq(t=$1){return t===!1?t=0:t===!0&&(t=$1),{x:dC(t,"left","right"),y:dC(t,"top","bottom")}}function dC(t,e,n){return{min:uC(t,e),max:uC(t,n)}}function uC(t,e){return typeof t=="number"?t:t[e]||0}const hC=()=>({translate:0,scale:1,origin:0,originPoint:0}),du=()=>({x:hC(),y:hC()}),pC=()=>({min:0,max:0}),gn=()=>({x:pC(),y:pC()});function Qi(t){return[t("x"),t("y")]}function Q4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Yq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Xq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function O0(t){return t===void 0||t===1}function O1({scale:t,scaleX:e,scaleY:n}){return!O0(t)||!O0(e)||!O0(n)}function Lc(t){return O1(t)||Y4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Y4(t){return mC(t.x)||mC(t.y)}function mC(t){return t&&t!=="0%"}function Tv(t,e,n){const r=t-n,i=e*r;return n+i}function gC(t,e,n,r,i){return i!==void 0&&(t=Tv(t,i,r)),Tv(t,n,r)+e}function V1(t,e=0,n=1,r,i){t.min=gC(t.min,e,n,r,i),t.max=gC(t.max,e,n,r,i)}function X4(t,{x:e,y:n}){V1(t.x,e.translate,e.scale,e.originPoint),V1(t.y,n.translate,n.scale,n.originPoint)}const fC=.999999999999,vC=1.0000000000001;function Jq(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&hu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,X4(t,o)),r&&Lc(a.latestValues)&&hu(t,a.latestValues))}e.x<vC&&e.x>fC&&(e.x=1),e.y<vC&&e.y>fC&&(e.y=1)}function uu(t,e){t.min=t.min+e,t.max=t.max+e}function xC(t,e,n,r,i=.5){const a=en(t.min,t.max,i);V1(t,e,n,a,r)}function hu(t,e){xC(t.x,e.x,e.scaleX,e.scale,e.originX),xC(t.y,e.y,e.scaleY,e.scale,e.originY)}function J4(t,e){return Q4(Xq(t.getBoundingClientRect(),e))}function Zq(t,e,n){const r=J4(t,n),{scroll:i}=e;return i&&(uu(r.x,i.offset.x),uu(r.y,i.offset.y)),r}const Z4=({current:t})=>t?t.ownerDocument.defaultView:null,eQ=new WeakMap;class tQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(_m(p).point)},a=(p,g)=>{const{drag:y,dragPropagation:_,onDragStart:w}=this.getProps();if(y&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XW(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qi(E=>{let P=this.getAxisMotionValue(E).get()||0;if(Ya.test(P)){const{projection:L}=this.visualElement;if(L&&L.layout){const N=L.layout.layoutBox[E];N&&(P=Fi(N)*(parseFloat(P)/100))}}this.originPoint[E]=P}),w&&zs.postRender(()=>w(p,g)),E1(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},o=(p,g)=>{const{dragPropagation:y,dragDirectionLock:_,onDirectionLock:w,onDrag:k}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=g;if(_&&this.currentDirection===null){this.currentDirection=sQ(E),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),k&&k(p,g)},c=(p,g)=>this.stop(p,g),u=()=>Qi(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new H4(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:Z4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&zs.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Yg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=zq(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&lu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Hq(i.layoutBox,n):this.constraints=!1,this.elastic=Qq(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=qq(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Zq(r,i.root,this.visualElement.getTransformPagePoint());let o=Wq(i.layout.layoutBox,a);if(n){const c=n(Yq(o));this.hasMutatedConstraints=!!c,c&&(o=Q4(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Qi(p=>{if(!Yg(p,n,this.currentDirection))return;let g=u&&u[p]||{};o&&(g={min:0,max:0});const y=i?200:1e6,_=i?40:1e7,w={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,w)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return E1(this.visualElement,e),r.start(sj(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qi(n=>{const{drag:r}=this.getProps();if(!Yg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-en(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qi(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=Kq({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qi(o=>{if(!Yg(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(en(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;eQ.set(this.visualElement,this);const e=this.visualElement.current,n=fp(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();lu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),zs.read(r);const o=Hp(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Qi(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=u[p].translate,g.set(g.get()+u[p].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=$1,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Yg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nQ extends Jl{constructor(e){super(e),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new tQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}unmount(){this.removeGroupControls(),this.removeListeners()}}const yC=t=>(e,n)=>{t&&zs.postRender(()=>t(e,n))};class rQ extends Jl{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(e){this.session=new H4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:yC(e),onStart:yC(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&zs.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=fp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Mh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(It.test(t))t=parseFloat(t);else return t;const n=bC(t,e.target.x),r=bC(t,e.target.y);return`${n}% ${r}%`}},iQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ql.parse(t);if(i.length>5)return r;const a=Ql.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const h=en(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}};class aQ extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;EW(oQ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||zs.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ew.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eR(t){const[e,n]=KH(),r=R.useContext(PE);return s.jsx(aQ,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(VE),isPresent:e,safeToRemove:n})}const oQ={borderRadius:{...Mh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mh,borderTopRightRadius:Mh,borderBottomLeftRadius:Mh,borderBottomRightRadius:Mh,boxShadow:iQ};function tR(t,e,n){const r=nr(t)?t:Ru(t);return r.start(sj("",r,e,n)),r.animation}function sR(t){return t instanceof SVGElement&&t.tagName!=="svg"}const lQ=(t,e)=>t.depth-e.depth;class cQ{constructor(){this.children=[],this.isDirty=!1}add(e){Hw(this.children,e),this.isDirty=!0}remove(e){Rx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lQ),this.isDirty=!1,this.children.forEach(e)}}function dQ(t,e){const n=Xa.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Ho(r),t(a-e))};return zs.read(r,!0),()=>Ho(r)}const nR=["TopLeft","TopRight","BottomLeft","BottomRight"],uQ=nR.length,_C=t=>typeof t=="string"?parseFloat(t):t,wC=t=>typeof t=="number"||It.test(t);function hQ(t,e,n,r,i,a){i?(t.opacity=en(0,n.opacity!==void 0?n.opacity:1,pQ(r)),t.opacityExit=en(e.opacity!==void 0?e.opacity:1,0,mQ(r))):a&&(t.opacity=en(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<uQ;o++){const c=`border${nR[o]}Radius`;let u=jC(e,c),h=jC(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||wC(u)===wC(h)?(t[c]=Math.max(en(_C(u),_C(h),r),0),(Ya.test(h)||Ya.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=en(e.rotate||0,n.rotate||0,r))}function jC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pQ=rR(0,.5,x4),mQ=rR(.5,.95,Di);function rR(t,e,n){return r=>r<t?0:r>e?1:n(id(t,e,r))}function SC(t,e){t.min=e.min,t.max=e.max}function Wi(t,e){SC(t.x,e.x),SC(t.y,e.y)}function NC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kC(t,e,n,r,i){return t-=e,t=Tv(t,1/n,r),i!==void 0&&(t=Tv(t,1/i,r)),t}function gQ(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ya.test(e)&&(e=parseFloat(e),e=en(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=en(a.min,a.max,r);t===a&&(c-=e),t.min=kC(t.min,e,n,c,i),t.max=kC(t.max,e,n,c,i)}function CC(t,e,[n,r,i],a,o){gQ(t,e[n],e[r],e[i],e.scale,a,o)}const fQ=["x","scaleX","originX"],vQ=["y","scaleY","originY"];function TC(t,e,n,r){CC(t.x,e,fQ,n?n.x:void 0,r?r.x:void 0),CC(t.y,e,vQ,n?n.y:void 0,r?r.y:void 0)}function IC(t){return t.translate===0&&t.scale===1}function iR(t){return IC(t.x)&&IC(t.y)}function AC(t,e){return t.min===e.min&&t.max===e.max}function xQ(t,e){return AC(t.x,e.x)&&AC(t.y,e.y)}function EC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function aR(t,e){return EC(t.x,e.x)&&EC(t.y,e.y)}function RC(t){return Fi(t.x)/Fi(t.y)}function PC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yQ{constructor(){this.members=[]}add(e){Hw(this.members,e),e.scheduleRender()}remove(e){if(Rx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bQ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:y,skewX:_,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),_&&(r+=`skewX(${_}deg) `),w&&(r+=`skewY(${w}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Dc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sp=typeof window!="undefined"&&window.MotionDebug!==void 0,V0=["","X","Y","Z"],_Q={visibility:"hidden"},LC=1e3;let wQ=0;function U0(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function oR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=u4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",zs,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&oR(r)}function lR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e==null?void 0:e()){this.id=wQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sp&&(Dc.totalNodes=Dc.resolvedTargetDeltas=Dc.recalculatedProjection=0),this.nodes.forEach(NQ),this.nodes.forEach(AQ),this.nodes.forEach(EQ),this.nodes.forEach(kQ),sp&&window.MotionDebug.record(Dc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new cQ)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ww),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sR(o),this.instance=o;const{layoutId:u,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=dQ(y,250),Ff.hasAnimatedSinceResize&&(Ff.hasAnimatedSinceResize=!1,this.nodes.forEach(MC))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:_,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||p.getDefaultTransition()||MQ,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=p.getProps(),L=!this.targetLayout||!aR(this.targetLayout,w)||_,N=!y&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||y&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,N);const v={...Vw(k,"layout"),onPlay:E,onComplete:P};(p.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else y||MC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ho(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RQ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DC);return}this.isUpdating||this.nodes.forEach(TQ),this.isUpdating=!1,this.nodes.forEach(IQ),this.nodes.forEach(jQ),this.nodes.forEach(SQ),this.clearAllSnapshots();const c=Xa.now();pr.delta=Wo(0,1e3/60,c-pr.timestamp),pr.timestamp=c,pr.isProcessing=!0,R0.update.process(pr),R0.preRender.process(pr),R0.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ew.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CQ),this.sharedNodes.forEach(PQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!iR(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;o&&(c||Lc(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),FQ(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return gn();const u=c.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(BQ))){const{scroll:p}=this.root;p&&(uu(u.x,p.offset.x),uu(u.y,p.offset.y))}return u}removeElementScroll(o){var c;const u=gn();if(Wi(u,o),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Wi(u,o),uu(u.x,g.offset.x),uu(u.y,g.offset.y))}return u}applyTransform(o,c=!1){const u=gn();Wi(u,o);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&hu(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Lc(p.latestValues)&&hu(u,p.latestValues)}return Lc(this.latestValues)&&hu(u,this.latestValues),u}removeTransform(o){const c=gn();Wi(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Lc(h.latestValues))continue;O1(h.latestValues)&&h.updateSnapshot();const p=gn(),g=h.measurePageBox();Wi(p,g),TC(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Lc(this.latestValues)&&TC(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),xp(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gn(),this.targetWithTransforms=gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wi(this.target,this.layout.layoutBox),X4(this.target,this.targetDelta)):Wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gn(),this.relativeTargetOrigin=gn(),xp(this.relativeTargetOrigin,this.target,_.target),Wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sp&&Dc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||O1(this.parent.latestValues)||Y4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Wi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;Jq(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=gn());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(NC(this.prevProjectionDelta.x,this.projectionDelta.x),NC(this.prevProjectionDelta.y,this.projectionDelta.y)),vp(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!PC(this.projectionDelta.x,this.prevProjectionDelta.x)||!PC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),sp&&Dc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=du(),this.projectionDelta=du(),this.projectionDeltaWithTransform=du()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},g=du();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=gn(),_=u?u.source:void 0,w=this.layout?this.layout.source:void 0,k=_!==w,E=this.getStack(),P=!E||E.members.length<=1,L=!!(k&&!P&&this.options.crossfade===!0&&!this.path.some(DQ));this.animationProgress=0;let N;this.mixTargetDelta=v=>{const b=v/1e3;FC(g.x,o.x,b),FC(g.y,o.y,b),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xp(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LQ(this.relativeTarget,this.relativeTargetOrigin,y,b),N&&xQ(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=gn()),Wi(N,this.relativeTarget)),k&&(this.animationValues=p,hQ(p,h,this.latestValues,b,L,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ho(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zs.update(()=>{Ff.hasAnimatedSinceResize=!0,this.currentAnimation=tR(0,LC,{...o,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:p}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&cR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||gn();const g=Fi(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const y=Fi(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+y}Wi(c,u),hu(c,p),vp(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yQ),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:c}=this.options;return c?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:c}=this.options;return c?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&U0("z",o,h,this.animationValues);for(let p=0;p<V0.length;p++)U0(`rotate${V0[p]}`,o,h,this.animationValues),U0(`skew${V0[p]}`,o,h,this.animationValues);o.render();for(const p in h)o.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);o.scheduleRender()}getProjectionStyles(o){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _Q;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Df(o==null?void 0:o.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Df(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Lc(this.latestValues)&&(k.transform=p?p({},""):"none",this.hasProjected=!1),k}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=bQ(this.projectionDeltaWithTransform,this.treeScale,y),p&&(h.transform=p(y,h.transform));const{x:_,y:w}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${w.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(c=y.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const k in wv){if(y[k]===void 0)continue;const{correct:E,applyTo:P}=wv[k],L=h.transform==="none"?y[k]:E(y[k],g);if(P){const N=P.length;for(let v=0;v<N;v++)h[P[v]]=L}else h[k]=L}return this.options.layoutId&&(h.pointerEvents=g===this?Df(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(DC),this.root.sharedNodes.clear()}}}function jQ(t){t.updateLayout()}function SQ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?Qi(g=>{const y=o?n.measuredBox[g]:n.layoutBox[g],_=Fi(y);y.min=r[g].min,y.max=y.min+_}):cR(a,n.layoutBox,r)&&Qi(g=>{const y=o?n.measuredBox[g]:n.layoutBox[g],_=Fi(r[g]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const c=du();vp(c,r,n.layoutBox);const u=du();o?vp(u,t.applyTransform(i,!0),n.measuredBox):vp(u,r,n.layoutBox);const h=!iR(c);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:_}=g;if(y&&_){const w=gn();xp(w,n.layoutBox,y.layoutBox);const k=gn();xp(k,r,_.layoutBox),aR(w,k)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=w,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function NQ(t){sp&&Dc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kQ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function CQ(t){t.clearSnapshot()}function DC(t){t.clearMeasurements()}function TQ(t){t.isLayoutDirty=!1}function IQ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function MC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AQ(t){t.resolveTargetDelta()}function EQ(t){t.calcProjection()}function RQ(t){t.resetSkewAndRotation()}function PQ(t){t.removeLeadSnapshot()}function FC(t,e,n){t.translate=en(e.translate,0,n),t.scale=en(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function BC(t,e,n,r){t.min=en(e.min,n.min,r),t.max=en(e.max,n.max,r)}function LQ(t,e,n,r){BC(t.x,e.x,n.x,r),BC(t.y,e.y,n.y,r)}function DQ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const MQ={duration:.45,ease:[.4,0,.1,1]},$C=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),OC=$C("applewebkit/")&&!$C("chrome/")?Math.round:Di;function VC(t){t.min=OC(t.min),t.max=OC(t.max)}function FQ(t){VC(t.x),VC(t.y)}function cR(t,e,n){return t==="position"||t==="preserve-aspect"&&!Uq(RC(e),RC(n),.2)}function BQ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const $Q=lR({attachResizeListener:(t,e)=>Hp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G0={current:void 0},dR=lR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!G0.current){const t=new $Q({});t.mount(window),t.setOptions({layoutScroll:!0}),G0.current=t}return G0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),OQ={pan:{Feature:rQ},drag:{Feature:nQ,ProjectionNode:dR,MeasureLayout:eR}};function UC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&zs.postRender(()=>a(e,_m(e)))}class VQ extends Jl{mount(){const{current:e}=this.node;e&&(this.unmount=WW(e,n=>(UC(this.node,n,"Start"),r=>UC(this.node,r,"End"))))}unmount(){}}class UQ extends Jl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(n){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bm(Hp(this.node.current,"focus",()=>this.onFocus()),Hp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GC(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&zs.postRender(()=>a(e,_m(e)))}class GQ extends Jl{mount(){const{current:e}=this.node;e&&(this.unmount=YW(e,n=>(GC(this.node,n,"Start"),(r,{success:i})=>GC(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const U1=new WeakMap,z0=new WeakMap,zQ=t=>{const e=U1.get(t.target);e&&e(t)},HQ=t=>{t.forEach(zQ)};function WQ({root:t,...e}){const n=t||document;z0.has(n)||z0.set(n,{});const r=z0.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(HQ,{root:t,...e})),r[i]}function KQ(t,e,n){const r=WQ(e);return U1.set(t,n),r.observe(t),()=>{U1.delete(t),r.unobserve(t)}}const qQ={some:0,all:1};class QQ extends Jl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:qQ[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=h?p:g;y&&y(u)};return KQ(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YQ(e,n))&&this.startObserver()}unmount(){}}function YQ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const XQ={inView:{Feature:QQ},tap:{Feature:GQ},focus:{Feature:UQ},hover:{Feature:VQ}},JQ={layout:{ProjectionNode:dR,MeasureLayout:eR}},Iv={current:null},rj={current:!1};function uR(){if(rj.current=!0,!!kw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Iv.current=t.matches;t.addListener(e),e()}else Iv.current=!1}const ZQ=[...R4,Tr,Ql],eY=t=>ZQ.find(E4(t)),Lu=new WeakMap;function tY(t,e,n){for(const r in e){const i=e[r],a=n[r];if(nr(i))t.addValue(r,i);else if(nr(a))t.addValue(r,Ru(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ru(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hR{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Xa.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,zs.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:p}=o;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Ix(n),this.isVariantNode=$E(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in y){const w=y[_];u[_]!==void 0&&nr(w)&&w.set(u[_],!1)}}mount(e){this.current=e,Lu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),rj.current||uR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Lu.delete(this.current),this.projection&&this.projection.unmount(),Ho(this.notifyUpdate),Ho(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ud.has(e),i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&zs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Eu){const n=Eu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zC.length;r++){const i=zC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=tY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ru(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(I4(i)||b4(i))?i=parseFloat(i):!eY(i)&&Ql.test(n)&&(i=k4(e,n)),this.setBaseTarget(e,nr(i)?i.get():i)),nr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Pw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!nr(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ww),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class pR extends hR{constructor(){super(...arguments),this.KeyframeResolver=P4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sY(t){return window.getComputedStyle(t)}class mR extends pR{constructor(){super(...arguments),this.type="html",this.renderInstance=qE}readValueFromInstance(e,n){if(ud.has(n)){const r=Xw(n);return r&&r.default||0}else{const r=sY(e),i=(HE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return J4(e,n)}build(e,n,r){Mw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ow(e,n,r)}}class gR extends pR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ud.has(n)){const r=Xw(n);return r&&r.default||0}return n=QE.has(n)?n:Aw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return JE(e,n,r)}build(e,n,r){Fw(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){YE(e,n,r,i)}mount(e){this.isSVGTag=$w(e.tagName),super.mount(e)}}const nY=(t,e)=>Rw(t)?new gR(e):new mR(e,{allowProjection:t!==R.Fragment}),rY=OW({...Pq,...XQ,...OQ,...JQ},nY),fR=tW(rY);function np(t){const e=jw(()=>Ru(t)),{isStatic:n}=R.useContext(Nw);if(n){const[,r]=R.useState(t);R.useEffect(()=>e.on("change",r),[])}return e}function vR(t,e){const n=np(e()),r=()=>n.set(e());return r(),LE(()=>{const i=()=>zs.preRender(r,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),Ho(r)}}),n}const iY=t=>t&&typeof t=="object"&&t.mix,aY=t=>iY(t)?t.mix:void 0;function oY(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],o=t[3+n],c=O4(i,a,{mixer:aY(a[0]),...o});return e?c(r):c}function lY(t){mp.current=[],t();const e=vR(mp.current,t);return mp.current=void 0,e}function Xg(t,e,n,r){if(typeof t=="function")return lY(t);const i=typeof e=="function"?e:oY(e,n,r);return Array.isArray(t)?HC(t,i):HC([t],([a])=>i(a))}function HC(t,e){const n=jw(()=>[]);return vR(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function xR(){!rj.current&&uR();const[t]=R.useState(Iv.current);return t}const cY=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function yR(t,e){return $4(t)?t[cY(0,t.length,e)]:t}function ij(t){return typeof t=="object"&&!Array.isArray(t)}function bR(t,e,n,r){return typeof t=="string"&&ij(e)?a4(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function dY(t,e,n){return t*(e+1)}function WC(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}function uY(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(Rx(t,i),r--)}}function hY(t,e,n,r,i,a){uY(t,i,a);for(let o=0;o<e.length;o++)t.push({value:e[o],at:en(i,a,r[o]),easing:yR(n,o)})}function pY(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function mY(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const gY="easeInOut";function fY(t,{defaultTransition:e={},...n}={},r,i){const a=e.duration||.3,o=new Map,c=new Map,u={},h=new Map;let p=0,g=0,y=0;for(let _=0;_<t.length;_++){const w=t[_];if(typeof w=="string"){h.set(w,g);continue}else if(!Array.isArray(w)){h.set(w.name,WC(g,w.at,p,h));continue}let[k,E,P={}]=w;P.at!==void 0&&(g=WC(g,P.at,p,h));let L=0;const N=(v,b,I,j=0,S=0)=>{const C=vY(v),{delay:M=0,times:T=U4(C),type:D="keyframes",repeat:F,repeatType:V,repeatDelay:z=0,...q}=b;let{ease:H=e.ease||"easeOut",duration:K}=b;const ne=typeof M=="function"?M(j,S):M,Y=C.length,G=Ex(D)?D:i==null?void 0:i[D];if(Y<=2&&G){let Z=100;if(Y===2&&bY(C)){const J=C[1]-C[0];Z=Math.abs(J)}const ve={...q};K!==void 0&&(ve.duration=qa(K));const Se=GW(ve,Z,G);H=Se.ease,K=Se.duration}K!=null||(K=a);const X=g+ne;T.length===1&&T[0]===0&&(T[1]=1);const te=T.length-C.length;if(te>0&&V4(T,te),C.length===1&&C.unshift(null),F){K=dY(K,F);const Z=[...C],ve=[...T];H=Array.isArray(H)?[...H]:[H];const Se=[...H];for(let J=0;J<F;J++){C.push(...Z);for(let ue=0;ue<Z.length;ue++)T.push(ve[ue]+(J+1)),H.push(ue===0?"linear":yR(Se,ue-1))}pY(T,F)}const se=X+K;hY(I,C,H,T,X,se),L=Math.max(ne+K,L),y=Math.max(se,y)};if(nr(k)){const v=KC(k,c);N(E,P,qC("default",v))}else{const v=bR(k,E,r,u),b=v.length;for(let I=0;I<b;I++){E=E,P=P;const j=v[I],S=KC(j,c);for(const C in E)N(E[C],xY(P,C),qC(C,S),I,b)}}p=g,g+=L}return c.forEach((_,w)=>{for(const k in _){const E=_[k];E.sort(mY);const P=[],L=[],N=[];for(let b=0;b<E.length;b++){const{at:I,value:j,easing:S}=E[b];P.push(j),L.push(id(0,y,I)),N.push(S||"easeOut")}L[0]!==0&&(L.unshift(0),P.unshift(P[0]),N.unshift(gY)),L[L.length-1]!==1&&(L.push(1),P.push(null)),o.has(w)||o.set(w,{keyframes:{},transition:{}});const v=o.get(w);v.keyframes[k]=P,v.transition[k]={...e,duration:y,ease:N,times:L,...n}}}),o}function KC(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function qC(t,e){return e[t]||(e[t]=[]),e[t]}function vY(t){return Array.isArray(t)?t:[t]}function xY(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const yY=t=>typeof t=="number",bY=t=>t.every(yY);function _Y(t,e){return t in e}class wY extends hR{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(_Y(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return gn()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function jY(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=sR(t)?new gR(e):new mR(e);n.mount(t),Lu.set(t,n)}function SY(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new wY(e);n.mount(t),Lu.set(t,n)}function NY(t,e){return nr(t)||typeof t=="number"||typeof t=="string"&&!ij(e)}function _R(t,e,n,r){const i=[];if(NY(t,e))i.push(tR(t,ij(e)&&e.default||e,n&&(n.default||n)));else{const a=bR(t,e,r),o=a.length;for(let c=0;c<o;c++){const u=a[c],h=u instanceof Element?jY:SY;Lu.has(u)||h(u);const p=Lu.get(u),g={...n};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(c,o)),i.push(...nj(p,{...e,transition:g},{}))}}return i}function kY(t,e,n){const r=[];return fY(t,e,n,{spring:ej}).forEach(({keyframes:a,transition:o},c)=>{r.push(..._R(c,a,o))}),r}function CY(t){return Array.isArray(t)&&t.some(Array.isArray)}function TY(t){function e(n,r,i){let a=[];return CY(n)?a=kY(n,r,t):a=_R(n,r,i,t),new t4(a)}return e}const Jg=TY(),Ro={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function IY(){return s.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+Ro.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function AY(){return s.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:Ro.icon,stopOpacity:"0.42"}),s.jsx("stop",{offset:"70%",stopColor:Ro.icon,stopOpacity:"0"})]}),s.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[s.jsx("stop",{offset:"0%",stopColor:Ro.icon,stopOpacity:"0.20"}),s.jsx("stop",{offset:"70%",stopColor:Ro.icon,stopOpacity:"0"})]})]}),s.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),s.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function QC({rounded:t="rounded-3xl",padded:e=!0,children:n}){const r=xR();return s.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:Ro.border,background:"var(--nav, "+Ro.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[s.jsx(IY,{}),s.jsx(fR.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),s.jsx(AY,{}),s.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:n})]})}const H0={borderColor:"#2B4C73",background:"#1A2F4A"},Zg={borderColor:"#2B4C73",background:"#152A42"};function Kt({hex:t,title:e,subtitle:n,actions:r,subheader:i,left:a,right:o,children:c,rounded:u="rounded-3xl",padded:h=!0,centerFramed:p=!1,leftWidth:g=0,rightWidth:y=0,stickyRails:_=!0,leftFullHeight:w=!1,mode:k="card",outerPadding:E="px-4 py-3",leftPlacement:P="inside",stickyTopbar:L=!0,stickySubheader:N=!0,shellViewportOffset:v="var(--app-topbar-h,72px)",topbarHeight:b=56}){const I={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof y=="number"?`${y}px`:y},j=s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:H0,children:t}),(e||n||r)&&s.jsxs("div",{className:[L?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:H0,children:[s.jsxs("div",{className:"min-w-0",children:[e&&s.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),n&&s.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:n})]}),r?s.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&s.jsx("div",{className:[N?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...N?{top:L?`${b}px`:0}:{},...H0},children:i})]}),S=k==="card"?({children:M})=>s.jsx(QC,{rounded:u,padded:h,children:M}):({children:M})=>s.jsx("div",{className:`w-full ${E}`,children:M}),C=s.jsx("div",{className:"relative min-h-0 h-full",style:I,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Zg,position:_?"sticky":"static",top:_?"1rem":void 0,alignSelf:w?"stretch":"start",height:w?"100%":"fit-content",minHeight:w?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),p?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:Zg,children:c}):s.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:c}),o?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Zg,position:_?"sticky":"static",top:_?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:o}):y?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"})]})});return P==="bleed"&&k==="card"?s.jsx("div",{className:`w-full ${E}`,children:s.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[j,s.jsx("div",{className:"flex-1 min-h-0",style:I,children:s.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?s.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Zg,position:_?"sticky":"static",top:_?"1rem":void 0,alignSelf:w?"stretch":"start",height:w?"100%":"fit-content",minHeight:w?0:void 0},children:a}):g?s.jsx("div",{}):s.jsx("div",{className:"hidden md:block"}),s.jsx(QC,{rounded:u,padded:h,children:s.jsx("div",{className:"flex-1 min-h-0 h-full",children:C})})]})})]})}):s.jsx(S,{children:s.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${v})`},children:[j,s.jsx("div",{className:"flex-1 min-h-0",children:C})]})})}const EY="_card_z6isy_1",RY="_header_z6isy_19",PY="_headerGroup_z6isy_33",LY="_headerText_z6isy_47",DY="_headerIcon_z6isy_61",MY="_title_z6isy_81",FY="_subtitle_z6isy_93",BY="_previewWrap_z6isy_103",$Y="_previewSurface_z6isy_115",OY="_previewLink_z6isy_134",VY="_previewStatic_z6isy_142",UY="_previewImage_z6isy_168",GY="_previewImageIcon_z6isy_188",zY="_previewImageCover_z6isy_196",HY="_guidehubScale_z6isy_206",Or={card:EY,header:RY,headerGroup:PY,headerText:LY,headerIcon:DY,title:MY,subtitle:FY,previewWrap:BY,previewSurface:$Y,previewLink:OY,previewStatic:VY,previewImage:UY,previewImageIcon:GY,previewImageCover:zY,guidehubScale:HY},ef=({href:t,title:e,subtitle:n,headerIconSrc:r,headerIconAlt:i="",previewImageSrc:a,previewAlt:o,variant:c="icon",previewHeightOverride:u,className:h,i18nScope:p,titleI18nKey:g,subtitleI18nKey:y,previewAltI18nKey:_,linkAriaLabel:w,linkAriaI18nKey:k})=>{const E=[Or.card,h].filter(Boolean).join(" "),P=typeof t=="string"&&t.trim()?t:null,L=P?/^https?:\/\//i.test(P):!1,N=w||e,v=!i,b=u?{"--featured-preview-height-override":u}:void 0,I=[Or.previewImage,c==="cover"?Or.previewImageCover:Or.previewImageIcon].filter(Boolean).join(" "),j=[Or.previewSurface,P?Or.previewLink:Or.previewStatic].filter(Boolean).join(" "),S=P?"true":"false";return s.jsxs("section",{className:E,"data-i18n-scope":p,style:b,children:[s.jsx("div",{className:Or.previewWrap,children:P?L?s.jsx("a",{href:P,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,target:"_blank",rel:"noopener noreferrer",children:s.jsx("img",{src:a,alt:o,"data-i18n":_,className:I,loading:"eager",decoding:"async"})}):s.jsx(As,{to:P,className:j,"aria-label":N,"data-i18n-aria-label":k,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":_,className:I,loading:"eager",decoding:"async"})}):s.jsx("div",{className:j,"data-clickable":S,children:s.jsx("img",{src:a,alt:o,"data-i18n":_,className:I,loading:"eager",decoding:"async"})})}),s.jsx("header",{className:Or.header,children:s.jsxs("div",{className:Or.headerGroup,children:[r&&s.jsx("img",{src:r,alt:i,className:Or.headerIcon,"aria-hidden":v}),s.jsxs("div",{className:Or.headerText,children:[s.jsx("span",{className:Or.title,"data-i18n":g,children:e}),n&&s.jsx("span",{className:Or.subtitle,"data-i18n":y,children:n})]})]})})]})},WY="_row_anakb_1",KY="_viewport_anakb_13",qY="_track_anakb_21",QY="_navBtn_anakb_37",jc={row:WY,viewport:KY,track:qY,navBtn:QY},YY=({children:t,className:e})=>{const n=R.useRef(null),r=R.useRef(null),[i,a]=R.useState(0),[o,c]=R.useState(0),[u,h]=R.useState(0),p=W.Children.count(t);R.useEffect(()=>{const w=()=>{const E=n.current,P=r.current;if(!E||!P)return;const L=P.children;if(!L.length){c(0),h(0),a(0);return}const v=L[0].getBoundingClientRect().width,b=window.getComputedStyle(P),I=parseFloat(b.columnGap||b.gap||"0"),j=Number.isNaN(I)?0:I,S=v+j,C=E.getBoundingClientRect().width,M=S>0?Math.max(1,Math.floor((C+j)/S)):1,T=Math.max(0,L.length-M);h(S),c(T),a(D=>Math.min(D,T))};w();let k=null;return typeof ResizeObserver!="undefined"&&(k=new ResizeObserver(()=>w()),n.current&&k.observe(n.current),r.current&&k.observe(r.current)),window.addEventListener("resize",w),()=>{k==null||k.disconnect(),window.removeEventListener("resize",w)}},[p]);const g=i>0,y=i<o,_=u*i*-1;return s.jsxs("div",{className:[jc.row,e].filter(Boolean).join(" "),children:[s.jsx("button",{className:`${jc.navBtn} ${jc.navPrev}`,onClick:()=>a(w=>Math.max(0,w-1)),disabled:!g,"aria-label":"Previous",children:"<"}),s.jsx("div",{className:jc.viewport,ref:n,children:s.jsx("div",{className:jc.track,ref:r,style:{transform:`translateX(${_}px)`},children:t})}),s.jsx("button",{className:`${jc.navBtn} ${jc.navNext}`,onClick:()=>a(w=>Math.min(o,w+1)),disabled:!y,"aria-label":"Next",children:">"})]})},XY="_row_1ey47_3",JY="_rowSplit_1ey47_17",ZY="_colFull_1ey47_43",eX="_splitMain_1ey47_55",tX="_splitSide_1ey47_57",sX="_rowFeatured_1ey47_107",nX="_card_1ey47_177",rX="_header_1ey47_191",iX="_headerGroup_1ey47_203",aX="_title_1ey47_215",oX="_subtitle_1ey47_217",lX="_empty_1ey47_219",cX="_errorNote_1ey47_221",dX="_linkBtn_1ey47_223",uX="_primaryBtn_1ey47_223",hX="_navBtn_1ey47_223",pX="_closeBtn_1ey47_223",mX="_actionsRight_1ey47_239",gX="_tileGrid_1ey47_245",fX="_tile_1ey47_245",vX="_tileIcon_1ey47_275",xX="_tileIconFallback_1ey47_277",yX="_tileLabel_1ey47_279",bX="_newsList_1ey47_285",_X="_newsCard_1ey47_289",wX="_newsCardWithImage_1ey47_305",jX="_newsBody_1ey47_313",SX="_newsActions_1ey47_315",NX="_newsMeta_1ey47_317",kX="_newsAuthor_1ey47_319",CX="_newsTime_1ey47_321",TX="_newsText_1ey47_323",IX="_newsImage_1ey47_341",AX="_newsSkeleton_1ey47_345",EX="_carouselCtrls_1ey47_383",RX="_carousel_1ey47_383",PX="_slide_1ey47_391",LX="_slideActive_1ey47_393",DX="_slideInactive_1ey47_395",MX="_slideThumb_1ey47_397",FX="_slideFallback_1ey47_399",BX="_slideCaption_1ey47_401",$X="_liveCard_1ey47_407",OX="_liveAvatar_1ey47_409",VX="_liveAvatarFallback_1ey47_411",UX="_liveName_1ey47_413",GX="_liveMeta_1ey47_415",zX="_liveBadge_1ey47_417",HX="_liveViewers_1ey47_419",WX="_modalOverlay_1ey47_425",KX="_modal_1ey47_425",qX="_modalHeader_1ey47_429",QX="_modalTitle_1ey47_431",YX="_modalFilters_1ey47_435",XX="_formRow_1ey47_437",JX="_formRowCheckbox_1ey47_439",ZX="_select_1ey47_441",eJ="_input_1ey47_441",tJ="_tableWrap_1ey47_443",sJ="_table_1ey47_443",ze={row:XY,rowSplit:JY,colFull:ZY,splitMain:eX,splitSide:tX,rowFeatured:sX,card:nX,header:rX,headerGroup:iX,title:aX,subtitle:oX,empty:lX,errorNote:cX,linkBtn:dX,primaryBtn:uX,navBtn:hX,closeBtn:pX,actionsRight:mX,tileGrid:gX,tile:fX,tileIcon:vX,tileIconFallback:xX,tileLabel:yX,newsList:bX,newsCard:_X,newsCardWithImage:wX,newsBody:jX,newsActions:SX,newsMeta:NX,newsAuthor:kX,newsTime:CX,newsText:TX,newsImage:IX,newsSkeleton:AX,carouselCtrls:EX,carousel:RX,slide:PX,slideActive:LX,slideInactive:DX,slideThumb:MX,slideFallback:FX,slideCaption:BX,liveCard:$X,liveAvatar:OX,liveAvatarFallback:VX,liveName:UX,liveMeta:GX,liveBadge:zX,liveViewers:HX,modalOverlay:WX,modal:KX,modalHeader:qX,modalTitle:QX,modalFilters:YX,formRow:XX,formRowCheckbox:JX,select:ZX,input:eJ,tableWrap:tJ,table:sJ},nJ="https://firestore.googleapis.com/v1/projects",rJ="stats_public/news_latestByChannel",iJ=()=>`${nJ}/sfdatahub-staging/databases/(default)/documents/${rJ}?key=AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA`,ko=t=>t&&typeof t.stringValue=="string"?t.stringValue:null,aJ=t=>!t||t.nullValue!==void 0?null:typeof t.stringValue=="string"?t.stringValue:null,YC=t=>{if(!t)return null;if(typeof t.integerValue=="string"){const e=Number(t.integerValue);return Number.isFinite(e)?e:null}if(typeof t.doubleValue=="number")return Number.isFinite(t.doubleValue)?t.doubleValue:null;if(typeof t.timestampValue=="string"){const e=Date.parse(t.timestampValue);return Number.isFinite(e)?e:null}if(typeof t.stringValue=="string"){const e=Number(t.stringValue);return Number.isFinite(e)?e:null}return null},XC=t=>!t||!t.mapValue||!t.mapValue.fields?null:t.mapValue.fields,oJ=t=>{var n;const e=(n=t==null?void 0:t.arrayValue)==null?void 0:n.values;return Array.isArray(e)?e:[]},lJ=t=>{if(!t)return null;const e=ko(t.id),n=ko(t.channelId),r=ko(t.author),i=ko(t.timestamp),a=ko(t.contentText),o=aJ(t.imageUrl),c=ko(t.jumpUrl);return!e||!n||!r||!i||!a||!c?null:{id:e,channelId:n,author:r,timestamp:i,contentText:a,imageUrl:o,jumpUrl:c}},cJ=t=>{const e=XC(t);if(!e)return null;const n=ko(e.channelId),r=ko(e.label);if(!n||!r)return null;const i=XC(e.item);return{channelId:n,label:r,item:i?lJ(i):null}},dJ=t=>t.map(e=>{var n,r,i,a;return`${e.channelId}|${(r=(n=e.item)==null?void 0:n.id)!=null?r:"-"}|${(a=(i=e.item)==null?void 0:i.timestamp)!=null?a:"-"}`}).join(`
`),uJ=t=>{var c;const e=t==null?void 0:t.fields;if(!e||typeof e!="object")return null;const n=oJ(e.items),r=[];for(const u of n){const h=cJ(u);h&&r.push(h)}const i=YC(e.updatedAt),a=YC(e.nextUpdateAt),o=(c=ko(e.hash))!=null?c:dJ(r);return o?{updatedAt:i,nextUpdateAt:a,hash:o,items:r}:null};async function hJ(t){const e=iJ();if(!e)return null;const n=await fetch(e,{cache:"no-store",signal:t});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json();return uJ(r)}const Lx="/assets/logo_guidehub-c4zKGdF-.png";function wR(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function pJ(t){const e=t.filter(Boolean).join(" ");return wR(e)}const mJ={woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",amruneoverview:"1YlAG-4hNVBfXHTBvcMIWXs-h-_8Yz7MS",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",stinkingrich:"1wtKrBGPIhb-c381aRwdFdItZ4bjcQuFs",runemaster:"13jn9YGSj6jwAHAyFgZci7xItANOMLEvb",runeemporer:"1NoV1yiiq3aa-jtUL0F8j0MUG--5sVkDW",capitalist:"1i7276mR37xH9ywdGAf5QqAZmy9ecbeom",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",calendarrewards:"1K9bm0OUtW0_QUg5i9q40N0slV6kg_iTd",calendarskip:"1jOgaf09diVUyCdXWdFoc-kXj4mUHejo7",elementaladvantages:"1wuV_5LJCMKVWA9FkCVILcQ_xF6GS9NM3",petsp2w:"1Smy-lLOCHFd_n4qqhy_mQh1cQEfIfYfW",petsf2p:"1_LfcLaZ9Yte_55iO0jl40KO8ZIvOyzjd",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450",sftaverndiscord:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY",sfmagazine:"1DkwbJdIRSI0DxVJCo9aCDD9FyjZGf-TQ",sftools:"1fcnNhvUliXJU6Fuw95mLrcNowjzZlYSh",step1adg:"1s18qj9thQdvKQySqdgv3jhAZ6WXu4Z_T",step2adg:"1XD6h0xe56G4nfatc4Cs9wFnPveWwyxr8",step3adg:"1FBYaP5H-UhlrMiAhlfxcEyP8PGBWbPO5"};function gJ(t){var n;const e=Array.isArray(t)?pJ(t):wR(t!=null?t:"");return(n=mJ[e])!=null?n:null}function ja(t,e=512){var a,o;const n=gJ(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=rd(n))!=null?a:null,i=r&&(o=vi(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function qc(t,e=512){return ja(t,e).thumb}const fJ="/flipbooks/sf-history-book/history_book_coverpage.png",jR="/guidehub-v2",JC=ja("sftools",512),ZC=ja("sftaverndiscord",512);var d3,u3;const vJ=(u3=(d3=JC.thumb)!=null?d3:JC.url)!=null?u3:"";var h3,p3;const xJ=(p3=(h3=ZC.thumb)!=null?h3:ZC.url)!=null?p3:"",eT="clamp(96px, 22vw, 192px)",yJ=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"],SR="sfh_news_latestByChannel_v1",bJ=600*1e3;async function NR(){const t=[];for(const n of yJ)try{const i=await(await fetch(n,{cache:"no-store"})).text(),a=_J(i);t.push(...a)}catch(r){}const e=new Map;for(const n of t){const r=String(n["Creator Name"]||n.creator_name||n.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,n)}return Array.from(e.values())}function tT(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(n+='"',i++):r=!r:a===","&&!r?(e.push(n),n=""):n+=a}return e.push(n),e}function _J(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const n=tT(e[0]);return e.slice(1).map(r=>{const i=tT(r),a={};return n.forEach((o,c)=>{var u;return a[o.trim()]=((u=i[c])!=null?u:"").trim()}),a})}function wJ(t){try{const e=Date.now(),n=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-n),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const o=Math.floor(a/60);return o<24?`${o}h`:`${Math.floor(o/24)}d`}catch(e){return""}}function jJ(t,e){const n=t.trim();return n.length<=e?n:`${n.slice(0,Math.max(0,e-3)).trimEnd()}...`}function SJ(){try{if(typeof sessionStorage=="undefined")return null;const t=sessionStorage.getItem(SR);if(!t)return null;const e=JSON.parse(t);return!e||typeof e!="object"?null:e}catch(t){return null}}function sT(t){try{if(typeof sessionStorage=="undefined")return;sessionStorage.setItem(SR,JSON.stringify(t))}catch(e){}}function NJ(t){if(!t)return null;const e=Date.now(),n=typeof t.nextUpdateAt=="number"?t.nextUpdateAt:null;return n&&n>e?n:e+bJ}function kJ(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const n=e.pathname.toLowerCase();if(n.startsWith("/shorts/"))return n.split("/")[2]||null}}catch(e){}return null}const CJ=[{to:"/toplists/",labelKey:"nav.toplists"},{to:"/players/",labelKey:"nav.players"},{to:"/guilds/",labelKey:"nav.guilds"},{to:"/community/",labelKey:"nav.community"},{to:"/creator-hub/",labelKey:"nav.creatorHub"},{to:"/help",labelKey:"nav.help"},{to:"/settings/",labelKey:"nav.settings"}],nT={},TJ=()=>{const{t}=Hs();return s.jsxs("section",{className:ze.card,"data-i18n-scope":"home.tiles",children:[s.jsxs("header",{className:ze.header,children:[s.jsx("span",{className:ze.title,"data-i18n":"home.title",children:t("home.title")}),s.jsx("span",{className:ze.subtitle,"data-i18n":"home.subtitle",children:t("home.subtitle")})]}),s.jsx("div",{className:ze.tileGrid,role:"list",children:CJ.map(e=>{const n=t(e.labelKey);return s.jsxs(As,{to:e.to,role:"listitem",className:ze.tile,"aria-label":n,children:[nT[e.to]?s.jsx("img",{src:nT[e.to],alt:"",className:ze.tileIcon}):e.to===jR?s.jsx("img",{src:Lx,alt:"",className:ze.tileIcon}):s.jsx("div",{className:ze.tileIconFallback,"aria-hidden":!0,children:n.slice(0,2).toUpperCase()}),s.jsx("div",{className:ze.tileLabel,"data-i18n":e.labelKey,children:n})]},e.to)})})]})},IJ=()=>{var F,V;const{t}=Hs(),[e,n]=R.useState(0),[r,i]=R.useState(null),[a,o]=R.useState(!0),[c,u]=R.useState(null),h=R.useRef(!1),p=R.useRef(!1),g=R.useRef(null),y=R.useRef(null),_=R.useRef(null),w=R.useRef(null),k=R.useRef(null),E=z=>{var K,ne;let q=-1,H=Number.NEGATIVE_INFINITY;for(let Y=0;Y<z.length;Y++){const G=(ne=(K=z[Y])==null?void 0:K.item)==null?void 0:ne.timestamp;if(!G)continue;const X=Date.parse(G);Number.isNaN(X)||X>H&&(H=X,q=Y)}return q===-1?0:q};R.useEffect(()=>{let z=!0;const q=()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},H=se=>{q();const Z=NJ(se);if(!Z)return;k.current=Z;const ve=Math.max(0,Z-Date.now());g.current=window.setTimeout(()=>{ne()},ve)},K=(se,Z)=>{var J;const ve=se.hash||String((J=se.updatedAt)!=null?J:""),Se=w.current;if(Se&&Se===ve){_.current=se,Z&&sT(se);return}w.current=ve,_.current=se,i(se),Z&&sT(se)},ne=async()=>{var Z;if(!z)return;(Z=y.current)==null||Z.abort();const se=new AbortController;y.current=se,_.current||o(!0);try{const ve=await hJ(se.signal);if(!z||se.signal.aborted)return;ve&&(K(ve,!0),u(null),H(ve))}catch(ve){if(!z||se.signal.aborted)return;u(String((ve==null?void 0:ve.message)||ve||"error"))}finally{z&&!se.signal.aborted&&(o(!1),H(_.current))}},Y=SJ();Y&&(K(Y,!1),o(!1));const G=Date.now();Y&&typeof Y.nextUpdateAt=="number"&&Y.nextUpdateAt>G?H(Y):ne();const te=()=>{if(!z||document.visibilityState!=="visible")return;const se=k.current;typeof se=="number"&&Date.now()>se&&ne()};return document.addEventListener("visibilitychange",te),()=>{var se;z=!1,q(),(se=y.current)==null||se.abort(),document.removeEventListener("visibilitychange",te)}},[]),R.useEffect(()=>{var q;const z=(q=r==null?void 0:r.items)!=null?q:[];if(z.length===0){n(0);return}if(!h.current&&!p.current){n(E(z)),p.current=!0;return}n(H=>Math.min(H,z.length-1))},[r]);const P=(F=r==null?void 0:r.items.length)!=null?F:0,L=P>0?r.items[e]:null,N=(L==null?void 0:L.label)||(L==null?void 0:L.channelId)||"",v=!a&&L&&!L.item,b=(V=L==null?void 0:L.item)!=null?V:null,I=b?wJ(b.timestamp):"",j=(b==null?void 0:b.author)||"Discord",S=b!=null&&b.contentText?jJ(b.contentText,240):"",C=b?`${j} ${I}`.trim():void 0,M=!a&&P===0,T=()=>{P<=1||(h.current=!0,n(z=>(z-1+P)%P))},D=()=>{P<=1||(h.current=!0,n(z=>(z+1)%P))};return s.jsxs("section",{className:ze.card,"data-i18n-scope":"home.news","aria-busy":a,children:[s.jsxs("header",{className:ze.header,children:[s.jsxs("div",{className:ze.headerGroup,children:[s.jsx("span",{className:ze.title,"data-i18n":"home.news.title",children:t("home.news.title")}),N&&s.jsx("span",{className:ze.subtitle,title:N,children:N})]}),s.jsxs("div",{className:ze.carouselCtrls,children:[s.jsx("button",{className:ze.navBtn,onClick:T,disabled:P<=1,"aria-label":t("home.news.prev"),"data-i18n-aria-label":"home.news.prev",children:""}),s.jsx("button",{className:ze.navBtn,onClick:D,disabled:P<=1,"aria-label":t("home.news.next"),"data-i18n-aria-label":"home.news.next",children:""})]})]}),s.jsxs("div",{className:ze.newsList,children:[a&&s.jsx("div",{className:ze.newsSkeleton,"aria-hidden":!0}),b&&s.jsxs("article",{className:[ze.newsCard,b.imageUrl?ze.newsCardWithImage:""].join(" "),tabIndex:0,children:[s.jsxs("div",{className:ze.newsBody,children:[s.jsxs("div",{className:ze.newsMeta,children:[s.jsx("span",{className:ze.newsAuthor,children:j}),s.jsx("span",{className:ze.newsTime,children:I})]}),S&&s.jsx("p",{className:ze.newsText,children:S}),s.jsx("div",{className:ze.newsActions,children:s.jsx("a",{href:b.jumpUrl,target:"_blank",rel:"noreferrer",className:ze.linkBtn,"aria-label":C,"data-i18n":"home.news.openOnDiscord",children:t("home.news.openOnDiscord")})})]}),b.imageUrl&&s.jsx("img",{src:b.imageUrl,alt:"",className:ze.newsImage,loading:"lazy",decoding:"async"})]}),v&&s.jsx("div",{className:ze.empty,"data-i18n":"home.news.emptyChannel",children:t("home.news.emptyChannel")}),M&&s.jsx("div",{className:ze.empty,"data-i18n":"home.news.empty",children:t("home.news.empty")})]}),c&&s.jsx("div",{className:ze.errorNote,"aria-live":"polite",children:c})]})},AJ=()=>{const{t}=Hs(),[e,n]=R.useState([]),[r,i]=R.useState(0),a=R.useRef(null);R.useEffect(()=>{let h=!0;async function p(){try{const y=(await NR()).map(_=>{const w=String(_["Creator Name"]||_.creator_name||_.name||"").trim(),k=String(_["YouTube Link"]||_.youtube||_.YouTube||"").trim();if(!k)return null;const E=kJ(k),P=E?`https://i.ytimg.com/vi/${E}/hqdefault.jpg`:void 0;return{title:w,url:k,thumb:P}}).filter(Boolean).slice(0,12);h&&n(y)}catch(g){h&&n([])}}return p(),()=>{h=!1}},[]),R.useEffect(()=>{if(!(e.length<=1))return a.current=window.setInterval(()=>i(h=>(h+1)%e.length),6e3),()=>{a.current&&window.clearInterval(a.current)}},[e]);const o=()=>i(h=>(h-1+e.length)%Math.max(e.length,1)),c=()=>i(h=>(h+1)%Math.max(e.length,1)),u=h=>{h.key==="ArrowLeft"&&(h.preventDefault(),o()),h.key==="ArrowRight"&&(h.preventDefault(),c())};return s.jsxs("section",{className:ze.card,"data-i18n-scope":"home.youtube",children:[s.jsxs("header",{className:ze.header,children:[s.jsx("span",{className:ze.title,"data-i18n":"home.youtube.title",children:t("home.youtube.title")}),s.jsxs("div",{className:ze.carouselCtrls,children:[s.jsx("button",{className:ze.navBtn,onClick:o,"aria-label":t("home.youtube.prev"),children:""}),s.jsx("button",{className:ze.navBtn,onClick:c,"aria-label":t("home.youtube.next"),children:""})]})]}),s.jsx("div",{className:ze.carousel,tabIndex:0,onKeyDown:u,"aria-roledescription":"carousel",children:e.length===0?s.jsx("div",{className:ze.empty,"data-i18n":"home.youtube.empty",children:t("home.youtube.empty")}):e.map((h,p)=>s.jsxs("a",{href:h.url,target:"_blank",rel:"noreferrer",className:[ze.slide,p===r?ze.slideActive:ze.slideInactive].join(" "),children:[h.thumb?s.jsx("img",{src:h.thumb,alt:"",className:ze.slideThumb}):s.jsx("div",{className:ze.slideFallback,children:h.title.slice(0,2).toUpperCase()}),s.jsx("div",{className:ze.slideCaption,children:h.title})]},h.url))})]})},EJ=({onOpenSchedule:t})=>{var g;const{t:e}=Hs(),[n,r]=R.useState(null),[i,a]=R.useState(new Map),[o,c]=R.useState(0),u=R.useRef(null);if(R.useEffect(()=>{async function y(){{r([]);return}}return y(),()=>{}},[]),R.useEffect(()=>{let y=!0;async function _(){try{const w=await NR(),k=new Map;for(const E of w){const P=String(E["Creator Name"]||E.creator_name||E.name||"").trim(),L=String(E["Twitch Link"]||E.twitch||E.Twitch||"").trim();if(!P||!L)continue;const N=(()=>{try{return new URL(L).pathname.replace(/^\//,"").toLowerCase()}catch(v){return L.toLowerCase()}})();N&&k.set(N,L),k.set(P.toLowerCase(),L)}y&&a(k)}catch(w){y&&a(new Map)}}return _(),()=>{y=!1}},[]),R.useEffect(()=>{if(!(!n||n.length<=1))return u.current=window.setInterval(()=>c(y=>(y+1)%n.length),8e3),()=>{u.current&&window.clearInterval(u.current)}},[n]),!n||n.length===0)return s.jsxs("section",{className:ze.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:ze.header,children:s.jsx("span",{className:ze.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),s.jsx("div",{className:ze.empty,"data-i18n":"home.live.none",children:e("home.live.none")}),s.jsx("div",{className:ze.actionsRight,children:s.jsx("button",{className:ze.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:e("home.schedule.open")})})]});const h=n[o],p=(()=>{const y=((h==null?void 0:h.name)||"").toLowerCase();if(h!=null&&h.url)return h.url;if(y)return i.has(y)?i.get(y):i.has(y.replace(/^@/,""))?i.get(y.replace(/^@/,"")):`https://www.twitch.tv/${y}`})();return s.jsxs("section",{className:ze.card,"data-i18n-scope":"home.live",children:[s.jsx("header",{className:ze.header,children:s.jsx("span",{className:ze.title,"data-i18n":"home.live.title",children:e("home.live.title")})}),s.jsxs("div",{className:ze.liveCard,children:[h!=null&&h.avatar?s.jsx("img",{src:h.avatar,alt:"",className:ze.liveAvatar}):s.jsx("div",{className:ze.liveAvatarFallback,"aria-hidden":!0,children:(g=h==null?void 0:h.name)==null?void 0:g.slice(0,2).toUpperCase()}),s.jsxs("div",{className:ze.liveInfo,children:[s.jsx("div",{className:ze.liveName,children:h==null?void 0:h.name}),s.jsxs("div",{className:ze.liveMeta,children:[s.jsx("span",{className:ze.liveBadge,"data-i18n":"home.live.badge",children:e("home.live.badge")}),typeof(h==null?void 0:h.viewers)=="number"&&s.jsx("span",{className:ze.liveViewers,children:e("home.live.viewers",{viewers:h.viewers.toLocaleString()})})]})]}),p&&s.jsx("a",{href:p,target:"_blank",rel:"noreferrer",className:ze.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:e("home.live.open_on_twitch")})]}),s.jsxs("div",{className:ze.carouselCtrls,children:[s.jsx("button",{className:ze.navBtn,onClick:()=>c(y=>(y-1+n.length)%n.length),"aria-label":e("home.live.prev"),children:""}),s.jsx("button",{className:ze.navBtn,onClick:()=>c(y=>(y+1)%n.length),"aria-label":e("home.live.next"),children:""})]})]})},RJ=({open:t,onClose:e})=>{var w;const{t:n}=Hs(),[r,i]=R.useState(null),[a,o]=R.useState("All"),[c,u]=R.useState(""),[h,p]=R.useState(!1);if(R.useEffect(()=>{if(!t)return;async function k(){{i([]);return}}return k(),()=>{}},[t]),R.useEffect(()=>{const k=E=>{E.key==="Escape"&&e()};return t&&window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[t,e]),!t)return null;const g=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),y=(r||[]).filter(k=>{if(a!=="All"&&k.platform.toLowerCase()!==a.toLowerCase()||h&&k.weekday&&k.weekday.toLowerCase()!==g.toLowerCase())return!1;if(c){const E=c.toLowerCase();if(!`${k.streamer} ${k.title}`.toLowerCase().includes(E))return!1}return!0}),_=((w=r==null?void 0:r.length)!=null?w:0)===0;return s.jsx("div",{className:ze.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:s.jsxs("div",{className:ze.modal,children:[s.jsxs("header",{className:ze.modalHeader,children:[s.jsx("h2",{id:"schedule-title",className:ze.modalTitle,"data-i18n":"home.schedule.title",children:n("home.schedule.title")}),s.jsx("button",{className:ze.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:n("home.schedule.close")})]}),s.jsxs("div",{className:ze.modalFilters,children:[s.jsxs("label",{className:ze.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.platform",children:n("home.schedule.platform")}),s.jsxs("select",{value:a,onChange:k=>o(k.target.value),className:ze.select,children:[s.jsx("option",{value:"All",children:n("home.schedule.platformAll")}),s.jsx("option",{value:"Twitch",children:n("home.schedule.platformTwitch")}),s.jsx("option",{value:"YouTube",children:n("home.schedule.platformYouTube")})]})]}),s.jsxs("label",{className:ze.formRow,children:[s.jsx("span",{"data-i18n":"home.schedule.search",children:n("home.schedule.search")}),s.jsx("input",{value:c,onChange:k=>u(k.target.value),className:ze.input,placeholder:n("home.schedule.searchPlaceholder")})]}),s.jsxs("label",{className:ze.formRowCheckbox,children:[s.jsx("input",{type:"checkbox",checked:h,onChange:k=>p(k.target.checked)}),s.jsx("span",{"data-i18n":"home.schedule.today",children:n("home.schedule.today")})]})]}),s.jsx("div",{className:ze.tableWrap,children:s.jsxs("table",{className:ze.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:n("home.schedule.columns.weekday")}),s.jsx("th",{children:n("home.schedule.columns.start")}),s.jsx("th",{children:n("home.schedule.columns.end")}),s.jsx("th",{children:n("home.schedule.columns.timezone")}),s.jsx("th",{children:n("home.schedule.columns.platform")}),s.jsx("th",{children:n("home.schedule.columns.channel")}),s.jsx("th",{children:n("home.schedule.columns.streamer")}),s.jsx("th",{children:n("home.schedule.columns.title")})]})}),s.jsx("tbody",{children:_?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:ze.empty,children:n("home.schedule.empty")})}):y.map((k,E)=>s.jsxs("tr",{children:[s.jsx("td",{children:k.weekday}),s.jsx("td",{children:k.start_utc}),s.jsx("td",{children:k.end_utc}),s.jsx("td",{children:k.timezone}),s.jsx("td",{children:k.platform}),s.jsx("td",{children:k.channel_url?s.jsx("a",{href:k.channel_url,target:"_blank",rel:"noreferrer",children:n("home.schedule.link")}):""}),s.jsx("td",{children:k.streamer}),s.jsx("td",{children:k.title})]},E))})]})})]})})},PJ=()=>{const{t}=Hs(),[e,n]=R.useState(!1);return s.jsxs(Kt,{title:t("home.title"),subtitle:t("home.subtitle"),children:[s.jsxs("div",{className:`${ze.row} ${ze.rowSplit}`,children:[s.jsx("div",{className:ze.splitMain,children:s.jsx(IJ,{})}),s.jsx("div",{className:ze.splitSide,children:s.jsx(EJ,{onOpenSchedule:()=>n(!0)})})]}),s.jsxs("div",{className:`${ze.row} ${ze.rowSplit} ${ze.rowFeatured}`,children:[s.jsx("div",{className:ze.splitMain,children:s.jsxs(YY,{children:[s.jsx(ef,{href:"/sfmagazine/historybook",title:t("home.historybook.title"),subtitle:t("home.historybook.credit"),previewImageSrc:fJ,previewAlt:t("home.historybook.coverAlt"),variant:"cover",i18nScope:"home.historybook",titleI18nKey:"home.historybook.title",subtitleI18nKey:"home.historybook.credit",previewAltI18nKey:"home.historybook.coverAlt",linkAriaLabel:t("home.historybook.open"),linkAriaI18nKey:"home.historybook.open"}),s.jsx(ef,{href:jR,title:t("home.guidehub.title"),subtitle:t("home.guidehub.subtitle"),previewImageSrc:Lx,previewAlt:t("home.guidehub.previewAlt"),className:Or.guidehubScale,i18nScope:"home.guidehub",titleI18nKey:"home.guidehub.title",subtitleI18nKey:"home.guidehub.subtitle",previewAltI18nKey:"home.guidehub.previewAlt",linkAriaLabel:t("home.guidehub.open"),linkAriaI18nKey:"home.guidehub.open"}),s.jsx(ef,{href:"https://sftools.mar21.eu/",title:t("home.sftools.title"),subtitle:t("home.sftools.subtitle"),previewImageSrc:vJ,previewAlt:t("home.sftools.previewAlt"),previewHeightOverride:eT,i18nScope:"home.sftools",titleI18nKey:"home.sftools.title",subtitleI18nKey:"home.sftools.subtitle",previewAltI18nKey:"home.sftools.previewAlt"}),s.jsx(ef,{href:"https://discord.gg/sftavern",title:t("home.taverndiscord.title"),subtitle:t("home.taverndiscord.subtitle"),previewImageSrc:xJ,previewAlt:t("home.taverndiscord.previewAlt"),previewHeightOverride:eT,i18nScope:"home.taverndiscord",titleI18nKey:"home.taverndiscord.title",subtitleI18nKey:"home.taverndiscord.subtitle",previewAltI18nKey:"home.taverndiscord.previewAlt"})]})}),s.jsx("div",{className:ze.splitSide,children:s.jsx(AJ,{})})]}),s.jsx("div",{className:ze.row,children:s.jsx("div",{className:ze.colFull,children:s.jsx(TJ,{})})}),s.jsx(RJ,{open:e,onClose:()=>n(!1)})]})},rT="sfh:authNext",iT=t=>{if(!t)return null;const e=t.trim();return!e.startsWith("/")||e.startsWith("//")||/^[a-z][a-z0-9+.-]*:/i.test(e)||e.toLowerCase().startsWith("/login")?null:e},LJ=()=>{const t=Xr(),e=ir(),{status:n,user:r}=ea(),i=n==="authenticated"&&!!r,a=W.useMemo(()=>new URLSearchParams(e.search).get("next"),[e.search]),o=W.useMemo(()=>{if(typeof window=="undefined")return null;try{return window.sessionStorage.getItem(rT)}catch(u){return console.warn("[Login] Failed to read auth next from sessionStorage",u),null}},[]),c=W.useMemo(()=>{var u;return(u=iT(a))!=null?u:iT(o)},[a,o]);return W.useEffect(()=>{if(!i)return;const u=c;typeof window!="undefined"&&window.sessionStorage&&window.sessionStorage.removeItem(rT),u&&t(u,{replace:!0})},[i,t,c]),s.jsx(Kt,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:s.jsx(RE,{})})};function DJ(){return s.jsx(Kt,{hex:s.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:s.jsx(MJ,{}),right:s.jsx(FJ,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(W0,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),s.jsx(W0,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),s.jsx(W0,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function MJ(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(K0,{to:"/dashboard/kpis",children:"KPIs"}),s.jsx(K0,{to:"/dashboard/activity",children:"Activity"}),s.jsx(K0,{to:"/dashboard/progression",children:"Progression"})]})]})}function FJ(){return s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),s.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function W0({to:t,title:e,desc:n}){return s.jsxs(As,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function K0({to:t,children:e}){return s.jsx(As,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function BJ(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  KPIs"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(q0,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),s.jsx(q0,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),s.jsx(q0,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function q0({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),s.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function $J(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Activity"}),s.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),s.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[s.jsx("li",{children:" Neues Scan-File hochgeladen"}),s.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),s.jsx("li",{children:" Gilden-Event geplant"})]})]})}function OJ(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Dashboard  Progression"}),s.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Q0,{title:"Scrapbook 100%",progress:72}),s.jsx(Q0,{title:"Fortress Ausbaustufe",progress:48}),s.jsx(Q0,{title:"Underworld Boss",progress:35})]})]})}function Q0({title:t,progress:e}){return s.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),s.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:s.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),s.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function VJ(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Discover"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(Sc,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),s.jsx(Sc,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),s.jsx(Sc,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),s.jsx(Sc,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),s.jsx(Sc,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),s.jsx(Sc,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),s.jsx(Sc,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function Sc({to:t,title:e,desc:n}){return s.jsxs(As,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function UJ({children:t,framed:e=!0}){return e?s.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:Ro.border,backgroundColor:Ro.tile},children:t}):s.jsx("main",{className:"min-w-0",children:t})}function GJ(t,e){if(!t)return"";const n=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return n;const r=n.includes("?")?"&":"?";return`${n}${r}bg=transparent&background=transparent`}const zJ=({srcOrId:t,aspectRatio:e="16/10",height:n,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:o=!1,infoText:c="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[p,g]=R.useState(!1),y=R.useMemo(()=>GJ(t,h),[t,h]),_=i?"lazy":"eager",w={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},k={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},E=n?{position:"relative",width:"100%",height:n,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},P={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return s.jsx("div",{className:a,style:w,children:s.jsx("div",{style:k,children:s.jsxs("div",{style:E,children:[s.jsx("iframe",{src:y,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:_,scrolling:"no",title:"Heyzine Flipbook"}),o&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(L=>!L),style:P,title:"Info",children:"i"}),p&&s.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[c," ",s.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},HJ="#0C1C2E",WJ=()=>s.jsx(Kt,{children:s.jsx(UJ,{children:s.jsxs("div",{style:{position:"relative",width:"100%"},children:[s.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:HJ,borderRadius:16,pointerEvents:"none",zIndex:0}}),s.jsx("div",{style:{position:"relative",zIndex:1},children:s.jsx(zJ,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),KJ="_pageWrap_72re9_7",qJ="_infoLine_72re9_17",QJ="_viewerHost_72re9_43",YJ="_overlay_72re9_99",XJ="_dragZoneLeft_72re9_101",JJ="_dragZoneRight_72re9_103",ZJ="_inbookLink_72re9_105",_l={pageWrap:KJ,infoLine:qJ,viewerHost:QJ,overlay:YJ,dragZoneLeft:XJ,dragZoneRight:JJ,inbookLink:ZJ};var rp={exports:{}},eZ=rp.exports,aT;function tZ(){return aT||(aT=1,(function(t,e){(function(n,r){r(e)})(eZ,(function(n){class r{constructor(v,b){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=b,this.nowDrawingDensity=this.createdDensity,this.render=v}setDensity(v){this.createdDensity=v,this.nowDrawingDensity=v}setDrawingDensity(v){this.nowDrawingDensity=v}setPosition(v){this.state.position=v}setAngle(v){this.state.angle=v}setArea(v){this.state.area=v}setHardDrawingAngle(v){this.state.hardDrawingAngle=v}setHardAngle(v){this.state.hardAngle=v,this.state.hardDrawingAngle=v}setOrientation(v){this.orientation=v}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(v,b,I){super(v,I),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=b}draw(v){const b=this.render.getContext(),I=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;b.save(),b.translate(I.x,I.y),b.beginPath();for(let C of this.state.area)C!==null&&(C=this.render.convertToGlobal(C),b.lineTo(C.x-I.x,C.y-I.y));b.rotate(this.state.angle),b.clip(),this.isLoad?b.drawImage(this.image,0,0,j,S):this.drawLoader(b,{x:0,y:0},j,S),b.restore()}simpleDraw(v){const b=this.render.getRect(),I=this.render.getContext(),j=b.pageWidth,S=b.height,C=v===1?b.left+b.pageWidth:b.left,M=b.top;this.isLoad?I.drawImage(this.image,C,M,j,S):this.drawLoader(I,{x:C,y:M},j,S)}drawLoader(v,b,I,j){v.beginPath(),v.strokeStyle="rgb(200, 200, 200)",v.fillStyle="rgb(255, 255, 255)",v.lineWidth=1,v.rect(b.x+1,b.y+1,I-1,j-1),v.stroke(),v.fill();const S={x:b.x+I/2,y:b.y+j/2};v.beginPath(),v.lineWidth=10,v.arc(S.x,S.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),v.stroke(),v.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(v,b){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=b,this.app=v,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let b=0;b<this.pages.length;b++)this.portraitSpread.push([b]);let v=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([v]),v++);for(let b=v;b<this.pages.length;b+=2)b<this.pages.length-1?this.landscapeSpread.push([b,b+1]):(this.landscapeSpread.push([b]),this.pages[b].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(v){const b=this.getSpread();for(let I=0;I<b.length;I++)if(v===b[I][0]||v===b[I][1])return I;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(v){if(v>=0&&v<this.pages.length)return this.pages[v];throw new Error("Invalid page number")}nextBy(v){const b=this.pages.indexOf(v);return b<this.pages.length-1?this.pages[b+1]:null}prevBy(v){const b=this.pages.indexOf(v);return b>0?this.pages[b-1]:null}getFlippingPage(v){const b=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[b].newTemporaryCopy():this.pages[b-1];{const I=v===0?this.getSpread()[b+1]:this.getSpread()[b-1];return I.length===1||v===0?this.pages[I[0]]:this.pages[I[1]]}}getBottomPage(v){const b=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[b+1]:this.pages[b-1];{const I=v===0?this.getSpread()[b+1]:this.getSpread()[b-1];return I.length===1?this.pages[I[0]]:v===0?this.pages[I[1]]:this.pages[I[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(v=null){if(v===null&&(v=this.currentPageIndex),v<0||v>=this.pages.length)return;const b=this.getSpreadIndexByPage(v);b!==null&&(this.currentSpreadIndex=b,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(v){if(!(v>=0&&v<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=v}showSpread(){const v=this.getSpread()[this.currentSpreadIndex];v.length===2?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(this.pages[v[1]])):this.render.getOrientation()==="landscape"&&v[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[v[0]])),this.currentPageIndex=v[0],this.app.updatePageIndex(this.currentPageIndex)}}class o extends a{constructor(v,b,I){super(v,b),this.imagesHref=I}load(){for(const v of this.imagesHref){const b=new i(this.render,v,"soft");b.load(),this.pages.push(b)}this.createSpread()}}class c{static GetDistanceBetweenTwoPoint(v,b){return v===null||b===null?1/0:Math.sqrt(Math.pow(b.x-v.x,2)+Math.pow(b.y-v.y,2))}static GetSegmentLength(v){return c.GetDistanceBetweenTwoPoint(v[0],v[1])}static GetAngleBetweenTwoLine(v,b){const I=v[0].y-v[1].y,j=b[0].y-b[1].y,S=v[1].x-v[0].x,C=b[1].x-b[0].x;return Math.acos((I*j+S*C)/(Math.sqrt(I*I+S*S)*Math.sqrt(j*j+C*C)))}static PointInRect(v,b){return b===null?null:b.x>=v.left&&b.x<=v.width+v.left&&b.y>=v.top&&b.y<=v.top+v.height?b:null}static GetRotatedPoint(v,b,I){return{x:v.x*Math.cos(I)+v.y*Math.sin(I)+b.x,y:v.y*Math.cos(I)-v.x*Math.sin(I)+b.y}}static LimitPointToCircle(v,b,I){if(c.GetDistanceBetweenTwoPoint(v,I)<=b)return I;const j=v.x,S=v.y,C=I.x,M=I.y;let T=Math.sqrt(Math.pow(b,2)*Math.pow(j-C,2)/(Math.pow(j-C,2)+Math.pow(S-M,2)))+j;I.x<0&&(T*=-1);let D=(T-j)*(S-M)/(j-C)+S;return j-C+S===0&&(D=b),{x:T,y:D}}static GetIntersectBetweenTwoSegment(v,b,I){return c.PointInRect(v,c.GetIntersectBeetwenTwoLine(b,I))}static GetIntersectBeetwenTwoLine(v,b){const I=v[0].y-v[1].y,j=b[0].y-b[1].y,S=v[1].x-v[0].x,C=b[1].x-b[0].x,M=v[0].x*v[1].y-v[1].x*v[0].y,T=b[0].x*b[1].y-b[1].x*b[0].y,D=I*T-j*M,F=S*T-C*M,V=-(M*C-T*S)/(I*C-j*S),z=-(I*T-j*M)/(I*C-j*S);if(isFinite(V)&&isFinite(z))return{x:V,y:z};if(Math.abs(D-F)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(v,b){const I=Math.abs(v.x-b.x),j=Math.abs(v.y-b.y),S=Math.max(I,j),C=[v];function M(T,D,F,V,z){return D>T?T+z*(F/V):D<T?T-z*(F/V):T}for(let T=1;T<=S;T+=1)C.push({x:M(v.x,b.x,I,S,T),y:M(v.y,b.y,j,S,T)});return C}}class u extends r{constructor(v,b,I){super(v,I),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=b,this.element.classList.add("stf__item"),this.element.classList.add("--"+I)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(v){const b=v||this.nowDrawingDensity,I=this.render.convertToGlobal(this.state.position),j=this.render.getRect().pageWidth,S=this.render.getRect().height;this.element.classList.remove("--simple");const C=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${j}px;
            height: ${S}px;
        `;b==="hard"?this.drawHard(C):this.drawSoft(I,C)}drawHard(v=""){const b=this.render.getRect().left+this.render.getRect().width/2,I=this.state.hardDrawingAngle,j=v+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${I}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${b}px, 0, 0) rotateY(${I}deg);`);this.element.style.cssText=j}drawSoft(v,b=""){let I="polygon( ";for(const S of this.state.area)if(S!==null){let C=this.render.getDirection()===1?{x:-S.x+this.state.position.x,y:S.y-this.state.position.y}:{x:S.x-this.state.position.x,y:S.y-this.state.position.y};C=c.GetRotatedPoint(C,{x:0,y:0},this.state.angle),I+=C.x+"px "+C.y+"px, "}I=I.slice(0,-2),I+=")";const j=b+`transform-origin: 0 0; clip-path: ${I}; -webkit-clip-path: ${I};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${v.x}px, ${v.y}px);`:`transform: translate3d(${v.x}px, ${v.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=j}simpleDraw(v){const b=this.render.getRect(),I=b.pageWidth,j=b.height,S=v===1?b.left+b.pageWidth:b.left,C=b.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${j}px; 
            left: ${S}px; 
            top: ${C}px; 
            width: ${I}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(v){super.setOrientation(v),this.element.classList.remove("--left","--right"),this.element.classList.add(v===1?"--right":"--left")}setDrawingDensity(v){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+v),super.setDrawingDensity(v)}}class h extends a{constructor(v,b,I,j){super(v,b),this.element=I,this.pagesElement=j}load(){for(const v of this.pagesElement){const b=new u(this.render,v,v.dataset.density==="hard"?"hard":"soft");b.load(),this.pages.push(b)}this.createSpread()}}class p{constructor(v,b,I,j){this.direction=v,this.corner=b,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(I,10),this.pageHeight=parseInt(j,10)}calc(v){try{return this.position=this.calcAngleAndPosition(v),this.calculateIntersectPoint(this.position),!0}catch(b){return!1}}getFlippingClipArea(){const v=[];let b=!1;return v.push(this.rect.topLeft),v.push(this.topIntersectPoint),this.sideIntersectPoint===null?b=!0:(v.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(b=!1)),v.push(this.bottomIntersectPoint),(b||this.corner==="bottom")&&v.push(this.rect.bottomLeft),v}getBottomClipArea(){const v=[];return v.push(this.topIntersectPoint),this.corner==="top"?v.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&v.push({x:this.pageWidth,y:0}),v.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?c.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&v.push(this.sideIntersectPoint):this.corner==="top"&&v.push({x:this.pageWidth,y:this.pageHeight}),v.push(this.bottomIntersectPoint),v.push(this.topIntersectPoint),v}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const v=c.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?v:Math.PI-v}calcAngleAndPosition(v){let b=v;if(this.updateAngleAndGeometry(b),b=this.corner==="top"?this.checkPositionAtCenterLine(b,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(b,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(b.x-this.pageWidth)<1&&Math.abs(b.y)<1)throw new Error("Point is too small");return b}updateAngleAndGeometry(v){this.angle=this.calculateAngle(v),this.rect=this.getPageRect(v)}calculateAngle(v){const b=this.pageWidth-v.x+1,I=this.corner==="bottom"?this.pageHeight-v.y:v.y;let j=2*Math.acos(b/Math.sqrt(I*I+b*b));I<0&&(j=-j);const S=Math.PI-j;if(!isFinite(j)||S>=0&&S<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(j=-j),j}getPageRect(v){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],v):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],v)}getRectFromBasePoint(v,b){return{topLeft:this.getRotatedPoint(v[0],b),topRight:this.getRotatedPoint(v[1],b),bottomLeft:this.getRotatedPoint(v[2],b),bottomRight:this.getRotatedPoint(v[3],b)}}getRotatedPoint(v,b){return{x:v.x*Math.cos(this.angle)+v.y*Math.sin(this.angle)+b.x,y:v.y*Math.cos(this.angle)-v.x*Math.sin(this.angle)+b.y}}calculateIntersectPoint(v){const b={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[v,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[v,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[v,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=c.GetIntersectBetweenTwoSegment(b,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(v,b,I){let j=v;const S=c.LimitPointToCircle(b,this.pageWidth,j);j!==S&&(j=S,this.updateAngleAndGeometry(j));const C=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let M=this.rect.bottomRight,T=this.rect.topLeft;if(this.corner==="bottom"&&(M=this.rect.topRight,T=this.rect.bottomLeft),M.x<=0){const D=c.LimitPointToCircle(I,C,T);D!==j&&(j=D,this.updateAngleAndGeometry(j))}return j}getSegmentToShadowLine(){const v=this.getShadowStartPoint();return[v,v!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(v,b){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=v,this.app=b}fold(v){this.setState("user_fold"),this.calc===null&&this.start(v),this.do(this.render.convertToPage(v))}flip(v){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(v)||(this.calc!==null&&this.render.finishAnimation(),!this.start(v)))return;const b=this.getBoundsRect();this.setState("flipping");const I=b.height/10,j=this.calc.getCorner()==="bottom"?b.height-I:I,S=this.calc.getCorner()==="bottom"?b.height:0;this.calc.calc({x:b.pageWidth-I,y:j}),this.animateFlippingTo({x:b.pageWidth-I,y:j},{x:-b.pageWidth,y:S},!0)}start(v){this.reset();const b=this.render.convertToBook(v),I=this.getBoundsRect(),j=this.getDirectionByPoint(b),S=b.y>=I.height/2?"bottom":"top";if(!this.checkDirection(j))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(j),this.bottomPage=this.app.getPageCollection().getBottomPage(j),this.render.getOrientation()==="landscape")if(j===1){const C=this.app.getPageCollection().nextBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}else{const C=this.app.getPageCollection().prevBy(this.flippingPage);C!==null&&this.flippingPage.getDensity()!==C.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),C.setDrawingDensity("hard"))}return this.render.setDirection(j),this.calc=new p(j,S,I.pageWidth.toString(10),I.height.toString(10)),!0}catch(C){return!1}}do(v){if(this.calc!==null&&this.calc.calc(v)){const b=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*b)/100):this.flippingPage.setHardAngle(-90*(200-2*b)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),b,this.calc.getDirection())}}flipToPage(v,b){const I=this.app.getPageCollection().getCurrentSpreadIndex(),j=this.app.getPageCollection().getSpreadIndexByPage(v);try{j>I&&(this.app.getPageCollection().setCurrentSpreadIndex(j-1),this.flipNext(b)),j<I&&(this.app.getPageCollection().setCurrentSpreadIndex(j+1),this.flipPrev(b))}catch(S){}}flipNext(v){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:v==="top"?1:this.render.getRect().height-2})}flipPrev(v){this.flip({x:10,y:v==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const v=this.calc.getPosition(),b=this.getBoundsRect(),I=this.calc.getCorner()==="bottom"?b.height:0;v.x<=0?this.animateFlippingTo(v,{x:-b.pageWidth,y:I},!0):this.animateFlippingTo(v,{x:b.pageWidth,y:I},!1)}showCorner(v){if(!this.checkState("read","fold_corner"))return;const b=this.getBoundsRect(),I=b.pageWidth;if(this.isPointOnCorners(v))if(this.calc===null){if(!this.start(v))return;this.setState("fold_corner"),this.calc.calc({x:I-1,y:1});const j=50,S=this.calc.getCorner()==="bottom"?b.height-1:1,C=this.calc.getCorner()==="bottom"?b.height-j:j;this.animateFlippingTo({x:I-1,y:S},{x:I-j,y:C},!1,!1)}else this.do(this.render.convertToPage(v));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(v,b,I,j=!0){const S=c.GetCordsFromTwoPoint(v,b),C=[];for(const T of S)C.push(()=>this.do(T));const M=this.getAnimationDuration(S.length);this.render.startAnimation(C,M,()=>{this.calc&&(I&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),j&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(v){this.state!==v&&(this.app.updateState(v),this.state=v)}getDirectionByPoint(v){const b=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(v.x-b.pageWidth<=b.width/5)return 1}else if(v.x<b.width/2)return 1;return 0}getAnimationDuration(v){const b=this.app.getSettings().flippingTime;return v>=1e3?b:v/1e3*b}checkDirection(v){return v===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...v){for(const b of v)if(this.state===b)return!0;return!1}isPointOnCorners(v){const b=this.getBoundsRect(),I=b.pageWidth,j=Math.sqrt(Math.pow(I,2)+Math.pow(b.height,2))/5,S=this.render.convertToBook(v);return S.x>0&&S.y>0&&S.x<b.width&&S.y<b.height&&(S.x<j||S.x>b.width-j)&&(S.y<j||S.y>b.height-j)}}class y{constructor(v,b){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=b,this.app=v;const I=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=I.exec(window.navigator.userAgent)!==null}render(v){if(this.animation!==null){const b=Math.round((v-this.animation.startedAt)/this.animation.durationFrame);b<this.animation.frames.length?this.animation.frames[b]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=v,this.drawFrame()}start(){this.update();const v=b=>{this.render(b),requestAnimationFrame(v)};requestAnimationFrame(v)}startAnimation(v,b,I){this.finishAnimation(),this.animation={frames:v,duration:b,durationFrame:b/v.length,onAnimateEnd:I,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const v=this.calculateBoundsRect();this.orientation!==v&&(this.orientation=v,this.app.updateOrientation(v))}calculateBoundsRect(){let v="landscape";const b=this.getBlockWidth(),I=b/2,j=this.getBlockHeight()/2,S=this.setting.width/this.setting.height;let C=this.setting.width,M=this.setting.height,T=I-C;return this.setting.size==="stretch"?(b<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(v="portrait"),C=v==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,C>this.setting.maxWidth&&(C=this.setting.maxWidth),M=C/S,M>this.getBlockHeight()&&(M=this.getBlockHeight(),C=M*S),T=v==="portrait"?I-C/2-C:I-C):b<2*C&&this.app.getSettings().usePortrait&&(v="portrait",T=I-C/2-C),this.boundsRect={left:T,top:j-M/2,width:2*C,height:M,pageWidth:C},v}setShadowData(v,b,I,j){if(!this.app.getSettings().drawShadow)return;const S=100*this.getSettings().maxShadowOpacity;this.shadow={pos:v,angle:b,width:3*this.getRect().pageWidth/4*I/100,opacity:(100-I)*S/100/100,direction:j,progress:2*I}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(v){this.pageRect=v}setDirection(v){this.direction=v}setRightPage(v){v!==null&&v.setOrientation(1),this.rightPage=v}setLeftPage(v){v!==null&&v.setOrientation(0),this.leftPage=v}setBottomPage(v){v!==null&&v.setOrientation(this.direction===1?0:1),this.bottomPage=v}setFlippingPage(v){v!==null&&v.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=v}convertToBook(v){const b=this.getRect();return{x:v.x-b.left,y:v.y-b.top}}isSafari(){return this.safari}convertToPage(v,b){b||(b=this.direction);const I=this.getRect();return{x:b===0?v.x-I.left-I.width/2:I.width/2-v.x+I.left,y:v.y-I.top}}convertToGlobal(v,b){if(b||(b=this.direction),v==null)return null;const I=this.getRect();return{x:b===0?v.x+I.left+I.width/2:I.width/2-v.x+I.left,y:v.y+I.top}}convertRectToGlobal(v,b){return b||(b=this.direction),{topLeft:this.convertToGlobal(v.topLeft,b),topRight:this.convertToGlobal(v.topRight,b),bottomLeft:this.convertToGlobal(v.bottomLeft,b),bottomRight:this.convertToGlobal(v.bottomRight,b)}}}class _ extends y{constructor(v,b,I){super(v,b),this.canvas=I,this.ctx=I.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const v=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(v.left+v.pageWidth,v.top,v.width,v.height),this.ctx.clip())}drawBookShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const b=v.width/20;this.ctx.rect(v.left,v.top,v.width,v.height);const I={x:v.left+v.width/2-b/2,y:0};this.ctx.translate(I.x,I.y);const j=this.ctx.createLinearGradient(0,0,b,0);j.addColorStop(0,"rgba(0, 0, 0, 0)"),j.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),j.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),j.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),j.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),j.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=j,this.ctx.fillRect(0,0,b,2*v.height),this.ctx.restore()}drawOuterShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(v.left,v.top,v.width,v.height);const b=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(b.x,b.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const I=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),I.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),I.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),I.addColorStop(0,"rgba(0, 0, 0, 0)"),I.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=I,this.ctx.fillRect(0,0,this.shadow.width,2*v.height),this.ctx.restore()}drawInnerShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const b=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(I.topLeft.x,I.topLeft.y),this.ctx.lineTo(I.topRight.x,I.topRight.y),this.ctx.lineTo(I.bottomRight.x,I.bottomRight.y),this.ctx.lineTo(I.bottomLeft.x,I.bottomLeft.y),this.ctx.translate(b.x,b.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const j=3*this.shadow.width/4,S=this.ctx.createLinearGradient(0,0,j,0);this.shadow.direction===0?(this.ctx.translate(-j,-100),S.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),S.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),S.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),S.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=S,this.ctx.fillRect(0,0,j,2*v.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class w{constructor(v,b,I){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=S=>{if(this.checkTarget(S.target)){const C=this.getMousePos(S.clientX,S.clientY);this.app.startUserTouch(C),S.preventDefault()}},this.onTouchStart=S=>{if(this.checkTarget(S.target)&&S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.touchPoint={point:M,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(M)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||S.preventDefault()}},this.onMouseUp=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userStop(C)},this.onMouseMove=S=>{const C=this.getMousePos(S.clientX,S.clientY);this.app.userMove(C,!1)},this.onTouchMove=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-M.x)>10||this.app.getState()!=="read")&&S.cancelable&&this.app.userMove(M,!0),this.app.getState()!=="read"&&S.preventDefault()):this.app.userMove(M,!0)}},this.onTouchEnd=S=>{if(S.changedTouches.length>0){const C=S.changedTouches[0],M=this.getMousePos(C.clientX,C.clientY);let T=!1;if(this.touchPoint!==null){const D=M.x-this.touchPoint.point.x,F=Math.abs(M.y-this.touchPoint.point.y);Math.abs(D)>this.swipeDistance&&F<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(D>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),T=!0),this.touchPoint=null}this.app.userStop(M,T)}},this.parentElement=v,v.classList.add("stf__parent"),v.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=v.querySelector(".stf__wrapper"),this.app=b;const j=this.app.getSettings().usePortrait?1:2;v.style.minWidth=I.minWidth*j+"px",v.style.minHeight=I.minHeight+"px",I.size==="fixed"&&(v.style.minWidth=I.width*j+"px",v.style.minHeight=I.height+"px"),I.autoSize&&(v.style.width="100%",v.style.maxWidth=2*I.maxWidth+"px"),v.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=I.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(v){this.wrapper.classList.remove("--portrait","--landscape"),v==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(v,b){const I=this.distElement.getBoundingClientRect();return{x:v-I.left,y:b-I.top}}checkTarget(v){return!this.app.getSettings().clickEventForward||!["a","button"].includes(v.tagName.toLowerCase())}}class k extends w{constructor(v,b,I,j){super(v,b,I),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=v.querySelector(".stf__block"),this.items=j;for(const S of j)this.distElement.appendChild(S);this.setHandlers()}clear(){for(const v of this.items)this.parentElement.appendChild(v)}updateItems(v){this.removeHandlers(),this.distElement.innerHTML="";for(const b of v)this.distElement.appendChild(b);this.items=v,this.setHandlers()}update(){this.app.getRender().update()}}class E extends w{constructor(v,b,I){super(v,b,I),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=v.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const v=getComputedStyle(this.canvas),b=parseInt(v.getPropertyValue("width"),10),I=parseInt(v.getPropertyValue("height"),10);this.canvas.width=b,this.canvas.height=I}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class P extends y{constructor(v,b,I){super(v,b),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=I,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const v=this.getRect(),b=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let I=(100-b)*(2.5*v.pageWidth)/100+20;I>v.pageWidth&&(I=v.pageWidth);let j=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${I}px;
            height: ${v.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*b/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;j+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=j}drawHardOuterShadow(){const v=this.getRect();let b=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*v.pageWidth)/100+20;b>v.pageWidth&&(b=v.pageWidth);let I=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${b}px;
            height: ${v.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;I+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=I}drawInnerShadow(){const v=this.getRect(),b=3*this.shadow.width/4,I=this.getDirection()===0?b:0,j=this.getDirection()===0?"to left":"to right",S=this.convertToGlobal(this.shadow.pos),C=this.shadow.angle+3*Math.PI/2,M=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let T="polygon( ";for(const F of M){let V=this.getDirection()===1?{x:-F.x+this.shadow.pos.x,y:F.y-this.shadow.pos.y}:{x:F.x-this.shadow.pos.x,y:F.y-this.shadow.pos.y};V=c.GetRotatedPoint(V,{x:I,y:100},C),T+=V.x+"px "+V.y+"px, "}T=T.slice(0,-2),T+=")";const D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${b}px;
            height: ${2*v.height}px;
            background: linear-gradient(${j},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${I}px 100px;
            transform: translate3d(${S.x-I}px, ${S.y-100}px, 0) rotate(${C}rad);
            clip-path: ${T};
            -webkit-clip-path: ${T};
        `;this.innerShadow.style.cssText=D}drawOuterShadow(){const v=this.getRect(),b=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),I=this.shadow.angle+3*Math.PI/2,j=this.getDirection()===1?this.shadow.width:0,S=this.getDirection()===0?"to right":"to left",C=[{x:0,y:0},{x:v.pageWidth,y:0},{x:v.pageWidth,y:v.height},{x:0,y:v.height}];let M="polygon( ";for(const D of C)if(D!==null){let F=this.getDirection()===1?{x:-D.x+this.shadow.pos.x,y:D.y-this.shadow.pos.y}:{x:D.x-this.shadow.pos.x,y:D.y-this.shadow.pos.y};F=c.GetRotatedPoint(F,{x:j,y:100},I),M+=F.x+"px "+F.y+"px, "}M=M.slice(0,-2),M+=")";const T=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*v.height}px;
            background: linear-gradient(${S}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${j}px 100px;
            transform: translate3d(${b.x-j}px, ${b.y-100}px, 0) rotate(${I}rad);
            clip-path: ${M};
            -webkit-clip-path: ${M};
        `;this.outerShadow.style.cssText=T}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const v=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(v))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const v of this.app.getPageCollection().getPages())v!==this.leftPage&&v!==this.rightPage&&v!==this.flippingPage&&v!==this.bottomPage&&(v.getElement().style.cssText="display: none"),v.getTemporaryCopy()!==this.flippingPage&&v.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class L{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(v){const b=this._default;if(Object.assign(b,v),b.size!=="stretch"&&b.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(b.width<=0||b.height<=0)throw new Error("Invalid width or height");if(b.flippingTime<=0)throw new Error("Invalid flipping time");return b.size==="stretch"?(b.minWidth<=0&&(b.minWidth=100),b.maxWidth<b.minWidth&&(b.maxWidth=2e3),b.minHeight<=0&&(b.minHeight=100),b.maxHeight<b.minHeight&&(b.maxHeight=2e3)):(b.minWidth=b.width,b.maxWidth=b.width,b.minHeight=b.height,b.maxHeight=b.height),b}}(function(N,v){v===void 0&&(v={});var b=v.insertAt;if(typeof document!="undefined"){var I=document.head||document.getElementsByTagName("head")[0],j=document.createElement("style");j.type="text/css",b==="top"&&I.firstChild?I.insertBefore(j,I.firstChild):I.appendChild(j),j.styleSheet?j.styleSheet.cssText=N:j.appendChild(document.createTextNode(N))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),n.PageFlip=class extends class{constructor(){this.events=new Map}on(N,v){return this.events.has(N)?this.events.get(N).push(v):this.events.set(N,[v]),this}off(N){this.events.delete(N)}trigger(N,v,b=null){if(this.events.has(N))for(const I of this.events.get(N))I({data:b,object:v})}}{constructor(N,v){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new L().getSettings(v),this.block=N}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(N){this.ui=new E(this.block,this,this.setting);const v=this.ui.getCanvas();this.render=new _(this,this.setting,v),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(N){this.ui=new k(this.block,this,this.setting,N),this.render=new P(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(N){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,N),this.pages.load(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}updateFromHtml(N){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),N),this.pages.load(),this.ui.updateItems(N),this.render.reload(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(N){this.pages.show(N)}flipNext(N="top"){this.flipController.flipNext(N)}flipPrev(N="top"){this.flipController.flipPrev(N)}flip(N,v="top"){this.flipController.flipToPage(N,v)}updateState(N){this.trigger("changeState",this,N)}updatePageIndex(N){this.trigger("flip",this,N)}updateOrientation(N){this.ui.setOrientationStyle(N),this.update(),this.trigger("changeOrientation",this,N)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(N){return this.pages.getPage(N)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(N){this.mousePosition=N,this.isUserTouch=!0,this.isUserMove=!1}userMove(N,v){this.isUserTouch||v||!this.setting.showPageCorners?this.isUserTouch&&c.GetDistanceBetweenTwoPoint(this.mousePosition,N)>5&&(this.isUserMove=!0,this.flipController.fold(N)):this.flipController.showCorner(N)}userStop(N,v=!1){this.isUserTouch&&(this.isUserTouch=!1,v||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(N)))}},Object.defineProperty(n,"__esModule",{value:!0})}))})(rp,rp.exports)),rp.exports}var sZ=tZ();const nZ="_viewerRoot_hj39c_5",rZ="_stage_hj39c_17",iZ="_host_hj39c_43",aZ="_hud_hj39c_91",oZ="_hBtn_hj39c_125",lZ="_hText_hj39c_153",cZ="_title_hj39c_167",dZ="_sep_hj39c_169",uZ="_spacer_hj39c_171",hZ="_errorBox_hj39c_175",ki={viewerRoot:nZ,stage:rZ,host:iZ,hud:aZ,hBtn:oZ,hText:lZ,title:cZ,sep:dZ,spacer:uZ,errorBox:hZ},pZ="/".endsWith("/")?"/":"//",kR=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${pZ}${e}`.replace(/\/{2,}/g,"/")},mZ=async t=>{const e=kR(`flipbooks/${t}/manifest.json`),n=await fetch(e,{cache:"no-cache"});if(!n.ok)throw new Error(`Manifest not found for slug "${t}"`);return n.json()},gZ=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},fZ=(t,e,n)=>Math.max(e,Math.min(n,t)),Ln={hostEl:null,pf:null,slug:null},ya={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},vZ=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function xZ(t){for(const e of t)e&&(ya.cache.has(e)||ya.inFlight.has(e)||ya.queue.includes(e)||ya.queue.push(e));CR()}function CR(){vZ(()=>{for(;ya.inFlight.size<ya.maxParallel&&ya.queue.length>0;){const t=ya.queue.shift();ya.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{ya.inFlight.delete(t),ya.cache.add(t),CR()},e.src=t}})}const yZ=({slug:t,initialPage:e=1,onReady:n,onPageChange:r,noSound:i=!0})=>{const a=R.useRef(null),o=R.useRef(null),[c,u]=R.useState(null),[h,p]=R.useState(null),g=R.useRef(),y=R.useRef(),_=R.useRef(e);R.useEffect(()=>{g.current=n},[n]),R.useEffect(()=>{y.current=r},[r]),R.useEffect(()=>{_.current=e},[e]);const w=R.useMemo(()=>kR(`flipbooks/${t}`),[t]),k=R.useCallback(N=>{var v,b;if((v=N.srcset)!=null&&v.length){const I=[...N.srcset].sort((S,C)=>S.width-C.width),j=(b=I.find(S=>S.width>=1600))!=null?b:I[I.length-1];return/^https?:\/\//i.test(j.src)||j.src.startsWith("/")?j.src:`${w}/${j.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(N.src)||N.src.startsWith("/")?N.src:`${w}/${N.src}`.replace(/\/{2,}/g,"/")},[w]);R.useEffect(()=>{let N=!0;return p(null),mZ(t).then(v=>{N&&u(v)}).catch(v=>{N&&p(v.message||"Failed to load flipbook manifest.")}),()=>{N=!1}},[t]),R.useEffect(()=>{const N=o.current,v=a.current;if(!N||!v||!c||(Ln.hostEl||(Ln.hostEl=document.createElement("div"),Ln.hostEl.className=ki.host),Ln.hostEl.parentElement!==N&&N.appendChild(Ln.hostEl),!Ln.hostEl.isConnected))return;if(!(!Ln.pf||Ln.slug!==t)){try{Ln.pf.update()}catch(F){}return}if(Ln.pf){try{Ln.pf.destroy()}catch(F){}Ln.pf=null}const I={width:c.pageWidth,height:c.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},j=new sZ.PageFlip(Ln.hostEl,I);Ln.pf=j,Ln.slug=t;const S=c.pages.map(k);j.loadFromImages(S);const C=F=>{const V=[],z=F+1,q=F+2;c.pages[z]&&V.push(k(c.pages[z])),c.pages[q]&&V.push(k(c.pages[q])),xZ(V)},M=()=>{var V;const F=fZ(_.current,1,c.pageCount)-1;j.turnToPage(F,"hard"),setTimeout(()=>C(F),220),(V=g.current)==null||V.call(g,j)};j.on("init",M),j.on("flip",F=>{var z;const V=F.data;(z=y.current)==null||z.call(y,V),setTimeout(()=>C(V),220)});const T=new ResizeObserver(()=>{var F;try{(F=Ln.pf)==null||F.update()}catch(V){}});T.observe(v);const D=F=>{var V,z;F.key==="ArrowLeft"&&(F.preventDefault(),(V=Ln.pf)==null||V.flipPrev()),F.key==="ArrowRight"&&(F.preventDefault(),(z=Ln.pf)==null||z.flipNext())};return window.addEventListener("keydown",D,{passive:!1}),()=>{window.removeEventListener("keydown",D),T.disconnect()}},[c,k,t]);const E=()=>{var N;return(N=Ln.pf)==null?void 0:N.flipPrev()},P=()=>{var N;return(N=Ln.pf)==null?void 0:N.flipNext()},L=()=>{var b;const N=a.current;if(!N)return;const v=N;(b=v.requestFullscreen||v.webkitRequestFullscreen||v.msRequestFullscreen)==null||b.call(v)};return h?s.jsxs("div",{className:ki.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):c?s.jsxs("div",{className:ki.viewerRoot,ref:a,"aria-label":c.title,children:[s.jsx("div",{className:ki.stage,ref:o}),s.jsxs("div",{className:ki.hud,children:[s.jsx("button",{className:ki.hBtn,onClick:E,"aria-label":"Zurck",children:""}),s.jsxs("div",{className:ki.hText,children:[s.jsx("span",{className:ki.title,children:c.title}),s.jsx("span",{className:ki.sep,children:""}),s.jsxs("span",{children:[c.pageCount," Seiten"]})]}),s.jsx("div",{className:ki.spacer}),gZ()&&s.jsx("button",{className:ki.hBtn,onClick:L,"aria-label":"Fullscreen",children:""}),s.jsx("button",{className:ki.hBtn,onClick:P,"aria-label":"Weiter",children:""})]})]}):s.jsx("div",{className:ki.errorBox,children:"Lade Flipbook"})},bZ=W.memo(yZ),_Z={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},wZ=()=>{const t="sf-history-book",[e,n]=R.useState(1),r=R.useRef(null),i=R.useMemo(()=>{var p;return(p=_Z[e])!=null?p:[]},[e]),a=R.useCallback(p=>{r.current=p},[]),o=R.useCallback(p=>{n(p+1)},[]),c=R.useCallback(p=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,p-1))}catch(y){}},[]),u=R.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipPrev()},[]),h=R.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipNext()},[]);return s.jsx(Kt,{title:"SF History Book",children:s.jsxs("div",{className:_l.pageWrap,children:[s.jsx("div",{className:_l.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),s.jsxs("div",{className:_l.viewerHost,children:[s.jsx(bZ,{slug:t,initialPage:1,onReady:a,onPageChange:o,noSound:!0}),s.jsxs("div",{className:_l.overlay,"aria-hidden":!0,children:[s.jsx("div",{className:_l.dragZoneLeft,onClick:u}),s.jsx("div",{className:_l.dragZoneRight,onClick:h}),i.map((p,g)=>{const y={"--t":`${p.t}%`,"--l":`${p.l}%`,"--w":`${p.w}%`,"--h":`${p.h}%`};return p.kind==="goto"?s.jsx("button",{className:_l.inbookLink,style:y,"aria-label":p.label,onClick:()=>c(p.toPage)},g):s.jsx("a",{className:_l.inbookLink,style:y,"aria-label":p.label,href:p.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},jZ="_root_zvspc_1",SZ="_hero_zvspc_15",NZ="_eyebrow_zvspc_47",kZ="_heading_zvspc_63",CZ="_lead_zvspc_77",TZ="_freshnessHint_zvspc_91",IZ="_hintLabel_zvspc_105",AZ="_hintText_zvspc_121",EZ="_grid_zvspc_135",RZ="_card_zvspc_147",PZ="_cardTitle_zvspc_163",LZ="_paragraph_zvspc_177",DZ="_list_zvspc_191",MZ="_listItem_zvspc_207",li={root:jZ,hero:SZ,eyebrow:NZ,heading:kZ,lead:CZ,freshnessHint:TZ,hintLabel:IZ,hintText:AZ,grid:EZ,card:RZ,cardTitle:PZ,paragraph:LZ,list:DZ,listItem:MZ},FZ=()=>{const{t}=Hs(),e=t("help.dataFreshness.body").split(`

`),n=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}];return s.jsx(Kt,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:s.jsxs("div",{className:li.root,children:[s.jsxs("section",{className:li.hero,children:[s.jsxs("div",{children:[s.jsx("p",{className:li.eyebrow,children:t("help.hero.eyebrow")}),s.jsx("h1",{className:li.heading,children:t("help.hero.heading")}),s.jsx("p",{className:li.lead,children:t("help.hero.lead")})]}),s.jsxs("div",{className:li.freshnessHint,children:[s.jsx("div",{className:li.hintLabel,children:t("help.hero.freshnessLabel")}),s.jsx("p",{className:li.hintText,children:t("help.hero.freshnessBody")})]})]}),s.jsx("div",{className:li.grid,children:n.map(r=>{var a;const i=r.key==="login"?"linking":void 0;return s.jsxs("section",{id:i,className:li.card,children:[s.jsx("h2",{className:li.cardTitle,children:r.title}),(a=r.paragraphs)==null?void 0:a.map((o,c)=>s.jsx("p",{className:li.paragraph,children:o},`${r.key}-p-${c}`)),r.bullets&&s.jsx("ul",{className:li.list,children:r.bullets.map(o=>s.jsx("li",{className:li.listItem,children:o},`${r.key}-${o}`))})]},r.key)})})]})})},aj=[{id:"am1",label:"AM 1",region:"NA",active:!0},{id:"eu1",label:"EU 1",region:"EU",active:!0},{id:"eu2",label:"EU 2",region:"EU",active:!0},{id:"eu3",label:"EU 3",region:"EU",active:!0},{id:"eu4",label:"EU 4",region:"EU",active:!0},{id:"eu5",label:"EU 5",region:"EU",active:!0},{id:"eu6",label:"EU 6",region:"EU",active:!0},{id:"eu7",label:"EU 7",region:"EU",active:!0},{id:"eu8",label:"EU 8",region:"EU",active:!0},{id:"eu9",label:"EU 9",region:"EU",active:!0},{id:"eu10",label:"EU 10",region:"EU",active:!0},{id:"eu11",label:"EU 11",region:"EU",active:!0},{id:"eu12",label:"EU 12",region:"EU",active:!0},{id:"eu13",label:"EU 13",region:"EU",active:!0},{id:"eu14",label:"EU 14",region:"EU",active:!0},{id:"eu15",label:"EU 15",region:"EU",active:!0},{id:"eu16",label:"EU 16",region:"EU",active:!0},{id:"eu17",label:"EU 17",region:"EU",active:!0},{id:"eu18",label:"EU 18",region:"EU",active:!0},{id:"eu19",label:"EU 19",region:"EU",active:!0},{id:"eu20",label:"EU 20",region:"EU",active:!0},{id:"eu21",label:"EU 21",region:"EU",active:!0},{id:"eu22",label:"EU 22",region:"EU",active:!0},{id:"eu23",label:"EU 23",region:"EU",active:!0},{id:"eu24",label:"EU 24",region:"EU",active:!0},{id:"eu25",label:"EU 25",region:"EU",active:!0},{id:"f1",label:"F 1",region:"Fusion",active:!0},{id:"f2",label:"F 2",region:"Fusion",active:!0},{id:"f3",label:"F 3",region:"Fusion",active:!0},{id:"f4",label:"F 4",region:"Fusion",active:!0},{id:"f5",label:"F 5",region:"Fusion",active:!0},{id:"f6",label:"F 6",region:"Fusion",active:!0},{id:"f7",label:"F 7",region:"Fusion",active:!0},{id:"f8",label:"F 8",region:"Fusion",active:!0},{id:"f9",label:"F 9",region:"Fusion",active:!0},{id:"f10",label:"F 10",region:"Fusion",active:!0},{id:"f11",label:"F 11",region:"Fusion",active:!0},{id:"f12",label:"F 12",region:"Fusion",active:!0},{id:"f13",label:"F 13",region:"Fusion",active:!0},{id:"f14",label:"F 14",region:"Fusion",active:!0},{id:"f15",label:"F 15",region:"Fusion",active:!0},{id:"f16",label:"F 16",region:"Fusion",active:!0},{id:"f17",label:"F 17",region:"Fusion",active:!0},{id:"f18",label:"F 18",region:"Fusion",active:!0},{id:"f19",label:"F 19",region:"Fusion",active:!0},{id:"f20",label:"F 20",region:"Fusion",active:!0},{id:"f21",label:"F 21",region:"Fusion",active:!0},{id:"f22",label:"F 22",region:"Fusion",active:!0},{id:"f23",label:"F 23",region:"Fusion",active:!0},{id:"f24",label:"F 24",region:"Fusion",active:!0},{id:"f25",label:"F 25",region:"Fusion",active:!0},{id:"f26",label:"F 26",region:"Fusion",active:!0},{id:"f27",label:"F 27",region:"Fusion",active:!0},{id:"f28",label:"F 28",region:"Fusion",active:!0},{id:"mearwynn",label:"MEARWYNN",region:"Fusion",active:!0},{id:"blackforest",label:"BLACKFOREST",region:"Fusion",active:!0},{id:"gnarogrim",label:"GNAROGRIM",region:"Fusion",active:!0}],BZ=Object.fromEntries(aj.map(t=>[t.id,t])),TR="TL_FILTERS_V2",Hr={servers:[],classes:[],guilds:[],days:"all",sortBy:"sum",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function $Z(){var t;try{const e=localStorage.getItem(TR);if(!e)return Hr;const n=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(n.days)?n.days:Hr.days,i=["cards","buttons","table"].includes(n.listView)?n.listView:Hr.listView,a=["hud","sheet"].includes(n.filterMode)?n.filterMode:Hr.filterMode,o=typeof n.quickFav=="boolean"?n.quickFav:!!n.favoritesOnly,c=typeof n.quickActive=="boolean"?n.quickActive:!!n.activeOnly;return{...Hr,...n,servers:Array.isArray(n.servers)?n.servers:[],classes:Array.isArray(n.classes)?n.classes:[],guilds:Array.isArray(n.guilds)?n.guilds:[],favoritesOnly:typeof n.favoritesOnly=="boolean"?n.favoritesOnly:o,activeOnly:typeof n.activeOnly=="boolean"?n.activeOnly:c,quickFav:o,quickActive:c,days:r,listView:i,filterMode:a,bottomFilterOpen:!!n.bottomFilterOpen,serverSheetOpen:!!n.serverSheetOpen,sortBy:typeof n.sortBy=="string"?n.sortBy:Hr.sortBy,searchText:typeof n.searchText=="string"?n.searchText:Hr.searchText}}catch(e){return Hr}}function OZ(t){try{localStorage.setItem(TR,JSON.stringify(t))}catch(e){}}const IR=R.createContext(null),Y0=t=>Array.from(new Set(t));function Fh(t,e){return typeof t=="function"?t(e):t}function VZ({children:t}){const[e,n]=R.useState(()=>$Z());R.useEffect(()=>{OZ(e)},[e]);const r=T=>n(D=>({...D,servers:Y0(Fh(T,D.servers))})),i=T=>n(D=>{const F=new Set(D.servers);return F.has(T)?F.delete(T):F.add(T),{...D,servers:Array.from(F)}}),a=()=>n(T=>({...T,servers:[]})),o=T=>n(D=>({...D,classes:Y0(Fh(T,D.classes))})),c=T=>n(D=>{const F=new Set(D.classes);return F.has(T)?F.delete(T):F.add(T),{...D,classes:Array.from(F)}}),u=()=>n(T=>({...T,classes:[]})),h=T=>n(D=>({...D,guilds:Y0(Fh(T,D.guilds))})),p=T=>n(D=>{const F=new Set(D.guilds);return F.has(T)?F.delete(T):F.add(T),{...D,guilds:Array.from(F)}}),g=()=>n(T=>({...T,guilds:[]})),y=T=>n(D=>({...D,days:T})),_=T=>y(T),w=T=>n(D=>({...D,sortBy:T||"level"})),k=T=>n(D=>({...D,favoritesOnly:!!T,quickFav:!!T})),E=T=>n(D=>({...D,activeOnly:!!T,quickActive:!!T})),P=T=>n(D=>({...D,searchText:T})),L=T=>n(D=>{const F=Fh(T,D.quickFav);return{...D,quickFav:F,favoritesOnly:F}}),N=T=>n(D=>{const F=Fh(T,D.quickActive);return{...D,quickActive:F,activeOnly:F}}),v=T=>n(D=>({...D,filterMode:T})),b=T=>n(D=>({...D,listView:T})),I=T=>n(D=>({...D,bottomFilterOpen:!!T})),j=T=>n(D=>({...D,serverSheetOpen:!!T})),S=()=>n(Hr),C=()=>S(),M=R.useMemo(()=>({servers:e.servers,classes:e.classes,guilds:e.guilds,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:o,toggleClass:c,clearClasses:u,setGuilds:h,toggleGuild:p,clearGuilds:g,setDays:y,setRange:_,setSortBy:w,setFavoritesOnly:k,setActiveOnly:E,setSearchText:P,setQuickFav:L,setQuickActive:N,setFilterMode:v,setListView:b,setBottomFilterOpen:I,setServerSheetOpen:j,resetFilters:S,resetAll:C}),[e]);return s.jsx(IR.Provider,{value:M,children:t})}function wm(){const t=R.useContext(IR);return t||{...Hr,guilds:Hr.guilds,range:Hr.days,searchText:Hr.searchText,quickFav:Hr.quickFav,quickActive:Hr.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setGuilds:()=>{},toggleGuild:()=>{},clearGuilds:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const UZ="_hudWrap_pyu4f_9",GZ="_hudBtn_pyu4f_11",zZ="_hudSubBtn_pyu4f_15",HZ="_iconRow_pyu4f_19",WZ="_sortLabel_pyu4f_27",KZ="_sortSelect_pyu4f_29",qZ="_guildField_pyu4f_43",QZ="_guildLabel_pyu4f_45",YZ="_guildSelect_pyu4f_47",XZ="_guildSummary_pyu4f_49",JZ="_guildSummaryText_pyu4f_53",ZZ="_guildCaret_pyu4f_55",eee="_guildDropdown_pyu4f_57",tee="_guildOption_pyu4f_59",see="_guildEmptyText_pyu4f_63",nee="_guildClear_pyu4f_65",Sn={hudWrap:UZ,hudBtn:GZ,hudSubBtn:zZ,iconRow:HZ,sortLabel:WZ,sortSelect:KZ,guildField:qZ,guildLabel:QZ,guildSelect:YZ,guildSummary:XZ,guildSummaryText:JZ,guildCaret:ZZ,guildDropdown:eee,guildOption:tee,guildEmptyText:see,guildClear:nee};function ree({active:t=!1,title:e,iconUrl:n,fallback:r="",size:i=40,onClick:a}){const o=Math.round(i*.7),c=W.useMemo(()=>{const P=[],L=NE(n,o*2,o*2,"contain");L&&P.push(L);const N=vi(n,o*2);return N&&N!==L&&P.push(N),!P.length&&n&&P.push(n),P},[n,o]),[u,h]=W.useState(0),[p,g]=W.useState(!1),[y,_]=W.useState(!1);W.useEffect(()=>h(0),[c]);const w=c[u]||"",k={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:y||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};p&&(k.background="rgba(255,255,255,.04)"),t&&(k.outline="2px solid #5C8BC6");const E={display:"block",width:o,height:o,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return s.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>_(!0),onBlur:()=>_(!1),style:k,children:w?s.jsx("img",{src:w,alt:e||"class",width:o,height:o,loading:"lazy",style:E,onError:()=>{h(P=>P+1<c.length?P+1:P)}}):s.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}function iee({compareMonth:t,setCompareMonth:e,monthOptions:n,guildOptions:r}){const{t:i}=Hs(),{servers:a,classes:o,setClasses:c,guilds:u,toggleGuild:h,clearGuilds:p,sortBy:g,setSortBy:y,filterMode:_,setBottomFilterOpen:w,serverSheetOpen:k,setServerSheetOpen:E,resetAll:P}=wm(),L=i("toplists.filters.guilds.label","Guilds"),N=i("toplists.filters.guilds.placeholder","All guilds"),v=i("toplists.filters.guilds.empty","No guilds in snapshot"),b=i("toplists.filters.guilds.clear","Clear"),I=u.length?i("toplists.filters.guilds.selected","{{count}} selected",{count:u.length}):N;return s.jsxs("div",{className:Sn.hudWrap,children:[s.jsxs("button",{type:"button",className:Sn.hudBtn,onClick:j=>{j.preventDefault(),j.stopPropagation(),E(!0)},"aria-haspopup":"dialog","aria-expanded":k||!1,"aria-label":`Select servers${a.length?` (${a.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",a.length?`(${a.length})`:""]}),s.jsxs("div",{className:Sn.iconRow,children:[rr.map(j=>s.jsx(ree,{active:o.includes(j.key),title:j.label,iconUrl:j.iconUrl,fallback:j.fallback,size:40,onClick:()=>c(S=>S.includes(j.key)?S.filter(C=>C!==j.key):[...S,j.key])},j.key)),s.jsx("button",{type:"button",className:Sn.hudSubBtn,onClick:()=>c(rr.map(j=>j.key)),children:"All"}),s.jsx("button",{type:"button",className:Sn.hudSubBtn,onClick:()=>c([]),children:"None"})]}),s.jsxs("div",{className:Sn.guildField,children:[s.jsx("span",{className:Sn.guildLabel,children:L}),r.length?s.jsxs("details",{className:Sn.guildSelect,children:[s.jsxs("summary",{className:Sn.guildSummary,"aria-label":L,children:[s.jsx("span",{className:Sn.guildSummaryText,children:I}),s.jsx("span",{className:Sn.guildCaret,"aria-hidden":"true",children:"v"})]}),s.jsxs("div",{className:Sn.guildDropdown,children:[r.map(j=>{const S=u.includes(j.value);return s.jsxs("label",{className:Sn.guildOption,children:[s.jsx("input",{type:"checkbox",checked:S,onChange:()=>h(j.value)}),s.jsx("span",{children:j.label})]},j.value)}),u.length>0&&s.jsx("button",{type:"button",className:Sn.guildClear,onClick:p,children:b})]})]}):s.jsx("span",{className:Sn.guildEmptyText,children:v})]}),s.jsx("label",{className:Sn.sortLabel,htmlFor:"toplists-sort",children:"Sort."}),s.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:g,onChange:j=>y(j.target.value),className:Sn.sortSelect,"aria-label":"Sort",children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]}),s.jsx("label",{className:Sn.sortLabel,htmlFor:"toplists-compare",children:i("toplists.compareMonth","Compare month")}),s.jsxs("select",{id:"toplists-compare",name:"toplists-compare",value:t,onChange:j=>e(j.target.value),className:Sn.sortSelect,"aria-label":i("toplists.compareMonth","Compare month"),children:[s.jsx("option",{value:"",children:i("toplists.compareOff","Off")}),n.map(j=>s.jsx("option",{value:j,children:j},j))]}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{type:"button",className:Sn.hudSubBtn,onClick:P,children:"Reset"}),_==="sheet"&&s.jsx("button",{type:"button",className:Sn.hudBtn,onClick:j=>{j.preventDefault(),j.stopPropagation(),w(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const aee=["EU","US","INT","Fusion"],_r={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"},oee=t=>t.trim().toLowerCase(),oT=t=>{var i;const e=oee(t),n=(i=BZ[e])==null?void 0:i.label;if(n)return n;const r=t.trim().toUpperCase();return r?r.replace(/^([A-Z]+)(\d+)$/,"$1 $2"):t};function lee({open:t,onClose:e,mode:n="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:o,onClearAll:c}){const[u,h]=R.useState(""),p=R.useRef(null);R.useEffect(()=>{if(!t)return;const _=w=>{w.key==="Escape"&&e()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[t,e]),R.useEffect(()=>{if(t&&p.current){const _=p.current.querySelector("#sheet-serversearch");_==null||_.focus()}},[t]);const g=aee,y=_=>{const w=u.trim().toLowerCase();if(!w)return!0;const k=oT(_).toLowerCase();return _.toLowerCase().includes(w)||k.includes(w)};return t?s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:cee,onClick:_=>{_.target===_.currentTarget&&e()},children:s.jsxs("div",{ref:p,style:n==="modal"?AR:dee,className:"sf-server-sheet",children:[s.jsxs("div",{style:uee,children:[s.jsx("h2",{id:"server-dialog-title",style:hee,children:"Select servers"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{type:"button",onClick:c,style:lT,children:"Clear"}),s.jsx("button",{type:"button",onClick:e,style:yee,children:"Done"})]})]}),s.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[s.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),s.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:_=>h(_.target.value),"aria-label":"Search servers",autoComplete:"off",style:mee})]}),s.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(_=>{const w=(r[_]||[]).filter(y);return s.jsxs("section",{"aria-labelledby":`region-${_}`,children:[s.jsxs("div",{style:gee,children:[s.jsx("h3",{id:`region-${_}`,style:pee,children:_}),s.jsx("div",{style:{display:"flex",gap:8},children:s.jsx("button",{type:"button",style:lT,onClick:()=>{o?o(_):w.filter(E=>!i.includes(E)).forEach(a)},children:"Select all"})})]}),s.jsxs("div",{style:fee,children:[w.map(k=>{const E=i.includes(k),P=oT(k);return s.jsx("button",{type:"button",onClick:()=>a(k),"aria-pressed":E,title:P,style:{...vee,...E?xee:null},children:P},k)}),w.length===0&&s.jsx("div",{style:{color:_r.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},_)})})]})}):null}const cee={position:"fixed",inset:0,background:_r.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},AR={width:"min(900px, 100%)",background:_r.tile,border:`1px solid ${_r.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:_r.text},dee={...AR,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},uee={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},hee={fontSize:18,margin:0},pee={fontSize:14,margin:0,color:_r.text2},mee={width:"100%",background:_r.input,color:_r.text,border:`1px solid ${_r.line}`,borderRadius:12,padding:"10px 12px"},gee={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},fee={display:"flex",flexWrap:"wrap",gap:8},vee={background:_r.chip,border:`1px solid ${_r.line}`,padding:"6px 10px",borderRadius:999,color:_r.text},xee={outline:`2px solid ${_r.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},yee={background:"#25456B",color:_r.text,border:`1px solid ${_r.accent}`,borderRadius:10,padding:"8px 12px"},lT={background:"transparent",color:_r.text,border:`1px solid ${_r.line}`,borderRadius:10,padding:"8px 12px"},bee=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=bee,document.head.appendChild(e)}}const yr={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function _ee({open:t,onClose:e}){const{searchText:n,setSearchText:r,range:i,setRange:a,sortBy:o,setSortBy:c,quickFav:u,setQuickFav:h,quickActive:p,setQuickActive:g}=wm(),y=R.useRef(null);if(R.useEffect(()=>{if(!t)return;const w=k=>{k.key==="Escape"&&e()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[t,e]),R.useEffect(()=>{if(t&&y.current){const w=y.current.querySelector("#sheet-search");w==null||w.focus()}},[t]),!t)return null;const _=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:wee,onClick:w=>{w.target===w.currentTarget&&e()},children:s.jsxs("div",{ref:y,style:jee,children:[s.jsxs("div",{style:See,children:[s.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:yr.text},children:"Filters"}),s.jsx("button",{type:"button",onClick:e,style:kee,children:"Done"})]}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),s.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:n,onChange:w=>r(w.target.value),"aria-label":"Search",autoComplete:"off",style:ER})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("span",{style:{color:yr.text2,fontSize:12},children:"Range"}),s.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:_.map(w=>s.jsx("button",{type:"button","aria-pressed":i===w.value,onClick:()=>a(w.value),style:{...X0,...i===w.value?J0:null},children:w.label},w.label))})]}),s.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[s.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:yr.text2,fontSize:12},children:"Sort."}),s.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:o,onChange:w=>c(w.target.value),"aria-label":"Sort",autoComplete:"off",style:Nee,children:[s.jsx("option",{value:"main",children:"Main"}),s.jsx("option",{value:"constitution",children:"Constitution"}),s.jsx("option",{value:"sum",children:"Base Stats"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"mine",children:"Mine"})]})]}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[s.jsx("button",{type:"button",onClick:()=>h(w=>!w),"aria-pressed":u,style:{...X0,...u?J0:null},children:" Favorites"}),s.jsx("button",{type:"button",onClick:()=>g(w=>!w),"aria-pressed":p,style:{...X0,...p?J0:null},children:" Active"})]})]})})}const wee={position:"fixed",inset:0,background:yr.backdrop,zIndex:60,display:"grid",alignItems:"end"},jee={background:yr.tile,borderTop:`1px solid ${yr.line}`,borderLeft:`1px solid ${yr.line}`,borderRight:`1px solid ${yr.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:yr.text,maxHeight:"80vh",overflow:"auto"},See={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},ER={width:"100%",background:yr.input,color:yr.text,border:`1px solid ${yr.line}`,borderRadius:12,padding:"10px 12px"},Nee={...ER,appearance:"none"},X0={background:"#14273E",border:`1px solid ${yr.line}`,padding:"6px 10px",borderRadius:999,color:yr.text},J0={outline:`2px solid ${yr.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},kee={background:"#25456B",color:yr.text,border:`1px solid ${yr.accent}`,borderRadius:10,padding:"8px 12px"},Cee=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Cee,document.head.appendChild(e)}}function Tee(){var i;const t=wm(),e=(i=t==null?void 0:t.listView)!=null?i:"table",n=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:n;return e==="table"?null:s.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:s.jsxs("div",{children:["Showing ",r.length," / ",n.length]})}),e==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var o,c,u,h,p,g,y;return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(o=a.name)!=null?o:""}),s.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(c=a.server)!=null?c:""})]}),s.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",s.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(p=a.scrapbook)!=null?p:""]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[s.jsx(Z0,{children:a.active?"Active":"Idle"}),a.favorite&&s.jsx(Z0,{children:" Fav"}),s.jsx(Z0,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(y=a.id)!=null?y:`${a.name}-${a.server}`)})}),e==="buttons"&&s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var o,c,u,h;return s.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(o=a.name)!=null?o:"",s.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(c=a.server)!=null?c:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function Z0({children:t}){return s.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const Dx="stats_public",RR="toplists_players_v1",Iee="v1",PR=`snapshot:${Iee}`,Av=new Set,Aee=(t,e,n)=>{Av.has(t)||(Av.add(t),n?console.warn(e,n):console.warn(e))},Eee=(t,e,n)=>{Av.has(t)||(Av.add(t),n?console.error(e,n):console.error(e))};async function Ree(){try{const t=await sn(ss(ft,Dx,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const n=(t.data()||{}).servers,r=u=>u.split(/[\n,;]+/g).map(h=>h.replace(/^[\s\["']+|[\s\]"']+$/g,"").trim()).filter(h=>!!h);let i=null,a=null,o;if(Array.isArray(n))i=n;else if(typeof n=="string"){const u=n.trim();if(!u)a="servers string empty";else if(u.startsWith("["))try{const h=JSON.parse(u);Array.isArray(h)?i=h:a="servers JSON parsed but not an array"}catch(h){const p=r(u);p.length?i=p:(a="servers JSON parse failed",o={message:h==null?void 0:h.message})}else{const h=r(u);h.length?i=h:(a="servers string is not a JSON array",o={preview:u.slice(0,120)})}}else n==null?a="servers field missing":a=`servers has unexpected type: ${typeof n}`;if(!Array.isArray(i))return Aee("bundle_invalid","[toplistsFirestore] Server bundle missing/invalid, falling back to static config",o?{reason:a!=null?a:"unknown",...o}:{reason:a!=null?a:"unknown"}),{ok:!1,error:"decode_failed",detail:a!=null?a:"servers missing or invalid"};const c=[];for(const u of i){if(typeof u!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:u});continue}const h=u.trim();h&&c.push(h)}return{ok:!0,servers:c}}catch(t){return Eee("bundle_firestore_error","[toplistsFirestore] Firestore error while loading toplist servers",{code:t==null?void 0:t.code,message:t==null?void 0:t.message}),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}const Bs=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},Wr=t=>typeof t=="string"?t:null,Pee=t=>typeof t=="string"?t:typeof t=="number"&&Number.isFinite(t)?String(t):null,LR=t=>{var i,a;if(!t||typeof t!="object")return null;const e=Wr(t.server),n=Wr(t.name),r=Wr(t.class);return!e||!n||!r?null:{playerId:Pee((a=(i=t.playerId)!=null?i:t.id)!=null?a:t.player_id),flag:Wr(t.flag),deltaRank:Bs(t.deltaRank),server:e,name:n,class:r,level:Bs(t.level),guild:Wr(t.guild),main:Bs(t.main),con:Bs(t.con),sum:Bs(t.sum),ratio:Wr(t.ratio),mainTotal:Bs(t.mainTotal),conTotal:Bs(t.conTotal),sumTotal:Bs(t.sumTotal),xpProgress:Bs(t.xpProgress),xpTotal:Bs(t.xpTotal),mine:Bs(t.mine),treasury:Bs(t.treasury),lastScan:Wr(t.lastScan),deltaSum:Bs(t.deltaSum)}},Lee=t=>{var a,o,c,u;if(!t||typeof t!="object")return null;const e=Wr(t.server),n=(a=Wr(t.name))!=null?a:Wr(t.guildId),r=(o=Wr(t.guildId))!=null?o:n;if(!e||!n||!r)return null;const i=Bs((u=(c=t.sumAvg)!=null?c:t.avgSumBaseTotal)!=null?u:t.sum);return{guildId:r,server:e,name:n,memberCount:Bs(t.memberCount),hofRank:Bs(t.hofRank),lastScan:Wr(t.lastScan),sumAvg:i,avgLevel:Bs(t.avgLevel),avgTreasury:Bs(t.avgTreasury),avgMine:Bs(t.avgMine),avgBaseMain:Bs(t.avgBaseMain),avgConBase:Bs(t.avgConBase),avgSumBaseTotal:Bs(t.avgSumBaseTotal),avgAttrTotal:Bs(t.avgAttrTotal),avgConTotal:Bs(t.avgConTotal),avgTotalStats:Bs(t.avgTotalStats)}};async function Dee(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsPlayers:${e}`;bx(n);const r=In(n);try{const a=ss(ft,Dx,RR,"lists","latest_toplists","servers",e),o=await bn(r,a,()=>sn(a),{label:"ToplistsPlayers"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const p of u){const g=LR(p);if(!g)return console.error("[toplistsFirestore] Latest snapshot row decode failed",p),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=Wr(c.server))!=null?i:e,updatedAt:Bs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{Ys(r),_x(n),wx(n)}}async function Mee(t){var i;const e=(t||"").trim();if(!e)return{ok:!1,error:"decode_error",detail:"missing doc id"};const n=`ToplistsPlayersCompare:${e}`;bx(n);const r=In(n);try{const a=ss(ft,Dx,RR,"lists","latest_toplists","servers",e),o=await bn(r,a,()=>sn(a),{label:`ToplistsPlayersCompare:${e}`});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.players)?c.players:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing players array"};const h=[];for(const p of u){const g=LR(p);if(!g)return console.error("[toplistsFirestore] Snapshot row decode failed",p),{ok:!1,error:"decode_error",detail:"invalid player row"};h.push(g)}return{ok:!0,snapshot:{server:(i=Wr(c.server))!=null?i:e,updatedAt:Bs(c.updatedAt),players:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{Ys(r),_x(n),wx(n)}}const DR=(t,e)=>`${PR}:${t}:${e}`,MR=t=>{const e=new Date(t);return e.setMinutes(0,0,0),e.getTime()<=t&&e.setHours(e.getHours()+1),e.getTime()},oj=t=>{try{if(typeof localStorage=="undefined")return null;const e=localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||typeof n!="object"||typeof n.expiresAt!="number"||!("snapshot"in n)?null:n}catch(e){return null}},Fee=t=>t==null||typeof t=="string"&&t.includes("/"),FR=t=>{const e=t==null?void 0:t.players;return Array.isArray(e)?e.some(n=>n&&!Fee(n.ratio)):!1},lj=(t,e)=>{try{if(typeof localStorage=="undefined")return;localStorage.setItem(t,JSON.stringify(e))}catch(n){}},cj=t=>{try{if(typeof localStorage=="undefined")return;localStorage.removeItem(t)}catch(e){}};async function Bee(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=DR("players",e),r=Date.now(),i=oj(n);if(i){if(r<i.expiresAt&&!FR(i.snapshot))return{ok:!0,snapshot:i.snapshot};cj(n)}const a=await Dee(e);return a.ok&&lj(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:MR(r)}),a}async function $ee(t,e=300*1e3){const n=`${PR}:players-doc:${t}`,r=Date.now(),i=oj(n);if(i){if(r<i.expiresAt&&!FR(i.snapshot))return{ok:!0,snapshot:i.snapshot};cj(n)}const a=await Mee(t);return a.ok&&lj(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:r+e}),a}async function Oee(t){var i;const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=`ToplistsGuilds:${e}`;bx(n);const r=In(n);try{const a=ss(ft,Dx,"toplists_guilds_v1","lists","latest_toplists","servers",e),o=await bn(r,a,()=>sn(a),{label:"ToplistsGuilds"});if(!o.exists())return{ok:!1,error:"not_found"};const c=o.data()||{},u=Array.isArray(c.guilds)?c.guilds:null;if(!u)return{ok:!1,error:"decode_error",detail:"missing guilds array"};const h=[];for(const p of u){const g=Lee(p);if(!g)return console.error("[toplistsFirestore] Latest guild snapshot row decode failed",p),{ok:!1,error:"decode_error",detail:"invalid guild row"};h.push(g)}return{ok:!0,snapshot:{server:(i=Wr(c.server))!=null?i:e,updatedAt:Bs(c.updatedAt),guilds:h}}}catch(a){return console.error("[toplistsFirestore] Firestore error",a),{ok:!1,error:"firestore_error",detail:a==null?void 0:a.message}}finally{Ys(r),_x(n),wx(n)}}async function Vee(t){const e=(t||"").trim().toUpperCase();if(!e)return{ok:!1,error:"decode_error",detail:"missing server code"};const n=DR("guilds",e),r=Date.now(),i=oj(n);if(i){if(r<i.expiresAt)return{ok:!0,snapshot:i.snapshot};cj(n)}const a=await Oee(e);return a.ok&&lj(n,{snapshot:a.snapshot,fetchedAt:r,expiresAt:MR(r)}),a}const Uee={EU:[],US:[],INT:[],Fusion:[]},Gee=["EU","US","INT","Fusion"],zee=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function BR(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=zee(r);e[i].add(r)});const n={...Uee};return Gee.forEach(r=>{n[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),n}const Hee="EU",eb=BR(aj.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),$R=R.createContext(null),cT=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]);function Wee(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&cT(t.servers,e.servers)&&cT(t.classes,e.classes)}function Kee(t,e){return t.key===e.key&&t.dir===e.dir}const OR=t=>t.trim().toUpperCase(),VR=t=>t!=null?t.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/-+/g,"-"):"",qee=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=OR(String(n||""));r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},Qee=t=>{if(!Array.isArray(t))return[];const e=new Set;for(const n of t){const r=VR(n);r&&e.add(r)}return Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},tb=t=>{if(t==null)return null;if(typeof t=="number")return t<1e12?t*1e3:t;const e=String(t).trim();if(!e)return null;if(/^\d{10,13}$/.test(e)){const r=Number(e);return Number.isFinite(r)?r<1e12?r*1e3:r:null}const n=Date.parse(e);return Number.isFinite(n)?n:null};function Yee({children:t}){const[e,n]=R.useState({group:Hee,servers:[],classes:[],timeRange:"all"}),[r,i]=R.useState({key:"sum",dir:"desc"}),[a,o]=R.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),c=R.useRef(new Map),u=null,[h,p]=R.useState(eb),g=R.useMemo(()=>qee(e.servers),[e.servers]),y=R.useMemo(()=>Qee(e.classes),[e.classes]),_=R.useMemo(()=>g,[g]),w=R.useMemo(()=>_.join(","),[_]),k=R.useCallback(N=>{n(v=>{const b=typeof N=="function"?N(v):{...v,...N};return Wee(v,b)?v:b})},[]),E=R.useCallback(N=>{i(v=>{const b=typeof N=="function"?N(v):N;return Kee(v,b)?v:b})},[]);R.useEffect(()=>{let N=!1;return(async()=>{const v=await Ree();if(!N){if(v.ok){const b=BR(v.servers);if(Object.values(b).some(j=>j.length>0)){p(b);return}}p(eb)}})().catch(v=>{N||(console.error("[ToplistsProvider] unexpected error while loading server list",v),p(eb))}),()=>{N=!0}},[]),R.useEffect(()=>{let N=!1;if(!_.length)return o({rows:[],loading:!1,error:An.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."),lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null,rowLimit:null}),()=>{N=!0};const v=S=>{const C=[];let M=null,T=0;for(const D of S){D.updatedAt!=null&&(M=M==null?D.updatedAt:Math.max(M,D.updatedAt));const F=Array.isArray(D.players)?D.players:[];T=Math.max(T,F.length);for(const V of F)C.push(V.server?V:{...V,server:D.server})}return{rows:C,updatedAt:M,rowLimit:T||null}},b=[],I=[];for(const S of _){const C=c.current.get(S);C?b.push(C.snapshot):I.push(S)}const j=v(b);return I.length===0?(o({rows:j.rows,loading:!1,error:null,lastUpdatedAt:j.updatedAt,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:j.rowLimit}),()=>{N=!0}):(o(S=>({...S,rows:j.rows,lastUpdatedAt:j.updatedAt,rowLimit:j.rowLimit,listId:w||null,loading:!0,error:null})),(async()=>{const S=await Promise.all(I.map(F=>Bee(F)));if(N)return;const C=[...b];let M=null,T=null;if(S.forEach((F,V)=>{var q;const z=I[V]||"";F.ok?(c.current.set(z,{snapshot:F.snapshot,cachedAt:Date.now()}),C.push(F.snapshot)):M||(M=F.error,T=(q=F.detail)!=null?q:null)}),!C.length){const F=T?` (${T})`:"";let V="Firestore Fehler";M==="not_found"?V=An.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):M==="decode_error"&&(V="Fehler beim Lesen der Daten"),o({rows:[],loading:!1,error:`${V}${F}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:null});return}const D=v(C);o({rows:D.rows,loading:!1,error:null,lastUpdatedAt:D.updatedAt,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:D.rowLimit})})().catch(S=>{N||(console.error("[ToplistsProvider] unexpected error",S),o({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:w||null,rowLimit:null}))}),()=>{N=!0})},[w]);const P=R.useMemo(()=>{let N=Array.isArray(a.rows)?[...a.rows]:[];if(!N.length)return N;const v=(D,F)=>{const V=typeof D=="number"&&Number.isFinite(D)?D:0,z=typeof F=="number"&&Number.isFinite(F)?F:0,q=V+z;if(!(q>0))return{label:"",mainRatio:null};const H=Math.round(V/q*100),K=100-H;return{label:`${H}/${K}`,mainRatio:H}};N=N.map(D=>{const{label:F,mainRatio:V}=v(D.main,D.con);return{...D,ratio:F,_ratioLabel:F,_ratioMain:V}});const b=g,I=b.length?new Set(b):null,j=y,S=j.length?new Set(j):null,C=e.timeRange==="all"?null:Number(String(e.timeRange).replace("d","")),M=C&&Number.isFinite(C)?Date.now()-C*864e5:null;N=N.filter(D=>{if(I&&!I.has(OR(D.server))||S&&!S.has(VR(D.class)))return!1;if(M!=null){const F=tb(D.lastScan);if(F!=null&&F<M)return!1}return!0}),r.dir;const T=(D,F)=>{if(D==null&&F==null)return 0;if(D==null)return 1;if(F==null)return-1;const V=D-F;return r.dir==="asc"?V:-V};return N.sort((D,F)=>{var V,z;switch(r.key){case"name":{const q=String((V=D.name)!=null?V:""),H=String((z=F.name)!=null?z:""),K=q.localeCompare(H,void 0,{sensitivity:"base"});return r.dir==="asc"?K:-K}case"lastScan":{const q=tb(D.lastScan),H=tb(F.lastScan);return T(q==null?null:q,H==null?null:H)}case"main":return T(D.main,F.main);case"con":return T(D.con,F.con);case"sum":return T(D.sum,F.sum);case"ratio":return T(D._ratioMain,F._ratioMain);case"mine":return T(D.mine,F.mine);case"treasury":return T(D.treasury,F.treasury);case"mainTotal":return T(D.mainTotal,F.mainTotal);case"conTotal":return T(D.conTotal,F.conTotal);case"sumTotal":return T(D.sumTotal,F.sumTotal);case"xpProgress":return T(D.xpProgress,F.xpProgress);case"xpTotal":return T(D.xpTotal,F.xpTotal);case"level":default:return T(D.level,F.level)}}),a.rowLimit!=null&&a.rowLimit>0&&N.length>a.rowLimit&&(N=N.slice(0,a.rowLimit)),N},[a.rows,a.rowLimit,e.timeRange,g,y,r]),L=R.useMemo(()=>({player:a,playerRows:P,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:u,serverGroups:h,filters:e,sort:r,setFilters:k,setSort:E}),[a,P,e,r,h,k,E,u]);return s.jsx($R.Provider,{value:L,children:t})}function UR(){const t=R.useContext($R);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}const Xee=t=>{const e=new Set;return t.forEach(n=>{const r=String(n||"").trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))};function Jee({serverCodes:t}){const[e,n]=R.useState([]),[r,i]=R.useState(!1),[a,o]=R.useState(null),[c,u]=R.useState(null),[h,p]=R.useState(null),g=R.useMemo(()=>{var N;const E=Xee(t!=null?t:[]);if(E.length)return E;const P=((N=aj.find(v=>v.id))==null?void 0:N.id)||"EU1",L=String(P).toUpperCase();return L?[L]:[]},[t]),y=R.useMemo(()=>g.join(","),[g]);R.useEffect(()=>{let E=!0;return i(!0),o(null),g.length?(Promise.all(g.map(P=>Vee(P))).then(P=>{if(!E)return;const L=[];let N=null,v=null;if(P.forEach(S=>{var C,M;if(S.ok)L.push(S.snapshot);else if(!N){const T=S;N=(C=T.error)!=null?C:null,v=(M=T.detail)!=null?M:null}}),!L.length){const S=v?` (${v})`:"";let C="Firestore Fehler";N==="not_found"?C=An.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server."):N==="decode_error"&&(C="Fehler beim Lesen der Daten"),n([]),u(null),p(null),o(`${C}${S}`);return}let b=null,I=0;const j=[];L.forEach(S=>{S.updatedAt!=null&&(b=b==null?S.updatedAt:Math.max(b,S.updatedAt));const C=Array.isArray(S.guilds)?S.guilds:[];I=Math.max(I,C.length),C.forEach(M=>{j.push((M.server,M))})}),n(j),u(b),p(I||null),o(null)}).catch(P=>{E&&(console.error("[GuildToplists] unexpected error",P),n([]),u(null),p(null),o("Unerwarteter Fehler beim Laden"))}).finally(()=>{E&&i(!1)}),()=>{E=!1}):(n([]),u(null),p(null),o(An.t("toplistsPage.errors.noSnapshot","No snapshot yet for this server.")),i(!1),()=>{E=!1})},[y]);const _=E=>E==null?"":new Intl.NumberFormat("en").format(E),w=E=>{if(E==null)return null;const P=E<1e12?E*1e3:E;return new Date(P).toLocaleString()},k=R.useMemo(()=>{let E=Array.isArray(e)?[...e]:[];if(!E.length)return E;const P=(L,N)=>L==null&&N==null?0:L==null?1:N==null?-1:N-L;return E.sort((L,N)=>P(L.sumAvg,N.sumAvg)),h!=null&&h>0&&E.length>h&&(E=E.slice(0,h)),E},[e,h]);return s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12},children:["Guilds - snapshots (latest)",g.length?` - ${g.join(", ")}`:""]}),s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[r?"Loading...":a?"Error":"Ready"," - ",k.length," rows"]}),s.jsx("div",{children:c?`Updated: ${w(c)}`:null})]}),a&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:a}),s.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Members"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Lv"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Avg Sum"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"})]})}),s.jsxs("tbody",{children:[k.map((E,P)=>{var L;return s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("td",{style:{padding:"8px 6px"},children:P+1}),s.jsx("td",{style:{padding:"8px 6px"},children:E.server}),s.jsx("td",{style:{padding:"8px 6px"},children:E.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:_(E.memberCount)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:_(E.avgLevel)}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:_(E.sumAvg)}),s.jsx("td",{style:{padding:"8px 6px"},children:(L=E.lastScan)!=null?L:""})]},`${E.guildId}-${E.server}`)}),r&&k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"Loading..."})}),!r&&!a&&k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,style:{padding:12},children:"No results"})})]})]})})]})}const dT=t=>(t!=null?t:"").split(",").map(e=>e.trim()).filter(Boolean),Ev=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toUpperCase();r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0,sensitivity:"base"}))},G1=t=>{const e=new Set;return t.forEach(n=>{const r=n.trim().toLowerCase().replace(/[\s_]+/g,"-").replace(/-+/g,"-");r&&e.add(r)}),Array.from(e).sort((n,r)=>n.localeCompare(r,void 0,{sensitivity:"base"}))},Bf=t=>(t!=null?t:"").toString().trim().toLowerCase(),uT=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),Zee=t=>t<10?`0${t}`:String(t),ete=t=>`${t.getUTCFullYear()}-${Zee(t.getUTCMonth()+1)}`,tte=t=>{const e=[],n=new Date;n.setUTCDate(1),n.setUTCMonth(n.getUTCMonth()-1);for(let r=0;r<t;r++)e.push(ete(n)),n.setUTCMonth(n.getUTCMonth()-1);return e},ste="2026-01",nte=1440*60*1e3,rte=(t,e)=>{if(!t)return null;const n=new Date(t).getTime();if(!Number.isFinite(n))return null;const r=Math.max(0,Math.floor((e-n)/nte));return r<=0?"#34d399":r===1?"#4ade80":r<=3?"#a3e635":r<=7?"#facc15":r<=14?"#f97316":r<=30?"#ef4444":"#b91c1c"},Nc=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},ite=["#f6e7a6","#f4de89","#f2d56d","#f0cc51","#edc236"],ate=["#ffe4b3","#ffdda0","#ffd68d","#ffcf7a","#ffc867"],ote=["#9ec5ff","#8ab7ff","#76a9ff","#629bff","#4e8dff"],lte={1:"#d8b4fe",2:"#c084fc",3:"#a855f7",4:"#f472b6"},cte="#f59e0b",dte=t=>Math.min(1,Math.max(0,t)),sb=(t,e)=>t&&t>0&&t<=e.length?e[t-1]:null,ute=t=>{var e;return t&&(e=lte[t])!=null?e:null},hte=t=>t?t.statsIsBest?cte:t.statsNorm==null?null:`rgba(34, 197, 94, ${(.2+.6*dte(t.statsNorm)).toFixed(2)})`:null,Bh=t=>t?{boxShadow:`inset 0 0 0 1px ${t}`,borderRadius:6,padding:"0 4px",display:"inline-flex",alignItems:"center"}:void 0;function pte(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"mainTotal":return{key:"mainTotal",dir:"desc"};case"conTotal":return{key:"conTotal",dir:"desc"};case"sumTotal":return{key:"sumTotal",dir:"desc"};case"xpProgress":return{key:"xpProgress",dir:"desc"};case"xpTotal":return{key:"xpTotal",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function mte(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function gte(){return s.jsx(Yee,{children:s.jsx(fte,{})})}function fte(){var me;const t=wm(),{filterMode:e,setFilterMode:n,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:o,serverSheetOpen:c,setServerSheetOpen:u,servers:h,setServers:p,classes:g,setClasses:y,setGuilds:_,range:w,sortBy:k}=t,{serverGroups:E,player:P}=UR();Xr();const[L,N]=fi(),v=L.get("server"),b=L.get("servers"),I=L.get("class"),j=L.get("classes"),C=L.get("tab")==="guilds"?"guilds":"players",[M,T]=W.useState((me=L.get("compare"))!=null?me:""),D=W.useMemo(()=>tte(17).filter(ce=>ce>=ste),[]),F=W.useMemo(()=>Ev(h!=null?h:[]),[h]),V=W.useMemo(()=>G1(g!=null?g:[]),[g]),z=W.useMemo(()=>{const ce=v!=null?v:b;return Ev(dT(ce))},[v,b]),q=W.useMemo(()=>{const ce=I!=null?I:j;return G1(dT(ce))},[I,j]),H=v!=null||b!=null,K=I!=null||j!=null,ne=W.useMemo(()=>L.toString(),[L]),Y=F.join(","),G=V.join(","),X=z.join(","),te=q.join(","),se=W.useRef(null),Z=W.useRef(F),ve=W.useRef(V),Se=W.useRef(p),J=W.useRef(y),ue=W.useRef(null);W.useEffect(()=>{Z.current=F},[F]),W.useEffect(()=>{ve.current=V},[V]),W.useEffect(()=>{Se.current=p},[p]),W.useEffect(()=>{J.current=y},[y]),W.useEffect(()=>{const ce=se.current;se.current=Y,ce!=null&&ce!==Y&&_([])},[Y,_]),R.useEffect(()=>{if(ue.current===ne){ue.current=null;return}if(H){const ce=z;uT(Z.current,ce)||Se.current(ce)}K&&!uT(ve.current,q)&&J.current(q)},[ne,H,K,X,te]),R.useEffect(()=>{const ce=new URLSearchParams(L),he=Y,Ne=G;he?ce.set("server",he):ce.delete("server"),ce.delete("servers"),Ne?ce.set("class",Ne):ce.delete("class"),ce.delete("classes");const Te=ce.toString();Te!==ne&&(ue.current=Te,N(ce,{replace:!0}))},[Y,G,ne,L,N]);const ie=W.useMemo(()=>{const ce=Array.isArray(P==null?void 0:P.rows)?P.rows:[];if(!ce.length)return[];const he=new Map;return ce.forEach(Ne=>{var Xe;const Te=String((Xe=Ne.guild)!=null?Xe:"").trim();if(!Te)return;const xe=Bf(Te);if(!xe)return;const Ie=Ne.server&&String(Ne.server).trim().toUpperCase()||(F.length===1?F[0]:""),$e=Ie?`${Te} (${Ie})`:Te;he.has(xe)||he.set(xe,{value:Te,label:$e})}),Array.from(he.values()).sort((Ne,Te)=>Ne.label.localeCompare(Te.label,void 0,{sensitivity:"base"}))},[P==null?void 0:P.rows,F]);return s.jsxs(s.Fragment,{children:[s.jsxs(Kt,{mode:"card",title:"Top Lists",actions:s.jsx(xte,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?s.jsx(iee,{compareMonth:M,setCompareMonth:T,monthOptions:D,guildOptions:ie}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[s.jsx(Tee,{}),C==="players"&&r==="table"&&s.jsx(vte,{servers:h!=null?h:[],classes:g!=null?g:[],range:w!=null?w:"all",sortKey:k!=null?k:"level",compareMonth:M}),C==="guilds"&&s.jsx(Jee,{serverCodes:h!=null?h:[]})]}),s.jsx(lee,{mode:"modal",open:c,onClose:()=>u(!1),serversByRegion:E,selected:h,onToggle:ce=>p(he=>he.includes(ce)?he.filter(Ne=>Ne!==ce):[...he,ce]),onSelectAllInRegion:ce=>{var he;return p((he=E[ce])!=null?he:[])},onClearAll:()=>p([])}),s.jsx(_ee,{open:e==="sheet"&&a,onClose:()=>o(!1)})]})}function vte({servers:t,classes:e,range:n,sortKey:r,compareMonth:i}){var G,X,te,se;const{t:a}=Hs(),{guilds:o}=wm(),{player:c,playerRows:u,playerLoading:h,playerError:p,playerLastUpdatedAt:g,playerScopeStatus:y,setFilters:_,setSort:w}=UR(),k=Xr(),E=((G=t==null?void 0:t.length)!=null?G:0)>0;R.useEffect(()=>{const Z=n==="all"?"all":n===60?"30d":`${n}d`,ve=Ev(t),Se=G1(e),J=mte(ve);_({servers:ve,classes:Se,timeRange:Z,group:J})},[t,e,n,_]),R.useEffect(()=>{const Z=pte(r);w(Z)},[r,w]);const P=Z=>Z==null?"":new Intl.NumberFormat("en").format(Z),L=Z=>{if(Z==null)return"";const ve=P(Math.abs(Z));return ve?Z>0?`+${ve}`:`-${ve}`:String(Z)},N=Z=>{if(Z==null)return null;const ve=Z<1e12?Z*1e3:Z;return new Date(ve).toLocaleString()},v=Z=>Z?Z.toLocaleString():"",b=u||[],I=W.useMemo(()=>{const Z=(o||[]).map(Bf).filter(Boolean);return Z.length?new Set(Z):null},[o]),j=W.useMemo(()=>(Array.isArray(c==null?void 0:c.rows)?c.rows:[]).some(ve=>!!Bf(ve.guild)),[c==null?void 0:c.rows]),S=W.useMemo(()=>!I||!j?b:b.filter(Z=>{const ve=Bf(Z.guild);return ve?I.has(ve):!1}),[b,I,j]),[C,M]=fi(),[T,D]=W.useState({rows:[],loading:!1,missing:!1,error:null}),F=W.useRef(new Map),V=!!i&&!T.loading&&!T.missing&&T.rows.length>0;R.useEffect(()=>{var Se;const Z=new URLSearchParams(C);i?Z.set("compare",i):Z.delete("compare"),((Se=C.get("compare"))!=null?Se:"")!==i&&M(Z,{replace:!0})},[i,C,M]),R.useEffect(()=>{let Z=!1;if(!i)return D({rows:[],loading:!1,missing:!1,error:null}),()=>{Z=!0};const ve=Ev(t);if(!ve.length)return D({rows:[],loading:!1,missing:!0,error:null}),()=>{Z=!0};const Se=ve.map(me=>`${me}__${i}`),J=[],ue=[];for(const me of Se){const ce=F.current.get(me);ce?J.push(ce):ue.push(me)}const ie=me=>{const ce=[];for(const he of me){const Ne=Array.isArray(he.players)?he.players:[];for(const Te of Ne)ce.push(Te.server?Te:{...Te,server:he.server})}return ce};return ue.length===0?(D({rows:ie(J),loading:!1,missing:!1,error:null}),()=>{Z=!0}):(D(me=>({...me,loading:!0,missing:!1,error:null})),(async()=>{var Ie;const me=await Promise.all(ue.map($e=>$ee($e)));if(Z)return;const ce=[...J];let he=!1,Ne=null,Te=null;me.forEach(($e,Xe)=>{var Be,Ve;const be=ue[Xe];if($e.ok)F.current.set(be,$e.snapshot),ce.push($e.snapshot);else{const nt=$e;he=he||nt.error==="not_found",Ne||(Ne=(Be=nt.error)!=null?Be:null,Te=(Ve=nt.detail)!=null?Ve:null)}});const xe=(Ie=Te!=null?Te:Ne)!=null?Ie:null;D({rows:ce.length?ie(ce):[],loading:!1,missing:he,error:xe})})().catch(me=>{Z||D({rows:[],loading:!1,missing:!0,error:String(me)})}),()=>{Z=!0})},[i,t]);const z=W.useCallback(Z=>`${Z.server||"ALL"}:${Z.name}:${Z.class||""}`,[]),q=W.useMemo(()=>{if(!V)return new Map;const Z=new Map,ve=new Map;return T.rows.forEach(Se=>{const J=Se.server||"ALL",ue=(ve.get(J)||0)+1;ve.set(J,ue);const ie=z(Se);Z.has(ie)||Z.set(ie,{row:Se,rank:ue})}),Z},[V,T.rows,z]),H=W.useMemo(()=>S.map((Z,ve)=>{if(!V)return{...Z,_rank:ve+1};const Se=z(Z),J=q.get(Se),ue=J?J.rank-(ve+1):null,ie=me=>{if(!J||me==="ratio")return null;const ce=Nc(Z[me]),he=Nc(J.row[me]);return he==null?null:(ce!=null?ce:0)-he};return{...Z,_rank:ve+1,_rankDelta:ue,_delta:{level:ie("level"),main:ie("main"),con:ie("con"),sum:ie("sum"),mainTotal:ie("mainTotal"),conTotal:ie("conTotal"),sumTotal:ie("sumTotal"),xpProgress:ie("xpProgress"),xpTotal:ie("xpTotal"),ratio:ie("ratio"),mine:ie("mine"),treasury:ie("treasury")}}}),[S,V,q]),K=W.useMemo(()=>{const Z=new Map,ve=H,Se=me=>{var ce,he;return(he=(ce=me.playerId)!=null?ce:me.id)!=null?he:z(me)},J=me=>{const ce=Se(me);let he=Z.get(ce);return he||(he={},Z.set(ce,he)),he},ue=(me,ce)=>{const he=ve.map((Ne,Te)=>{const xe=me(Ne);return xe==null?null:{row:Ne,value:xe,idx:Te}}).filter(Boolean);he.sort((Ne,Te)=>Te.value-Ne.value||Ne.idx-Te.idx),he.slice(0,5).forEach((Ne,Te)=>{J(Ne.row)[ce]=Te+1})};ue(me=>Nc(me.main),"mainRank"),ue(me=>Nc(me.con),"conRank"),ue(me=>Nc(me.level),"levelRank"),ve.forEach(me=>{const ce=Nc(me.mine);if(ce==null)return;const he=ce>=100?4:ce>=80?3:ce>=65?2:ce>=50?1:null;he&&(J(me).mineTier=he)});const ie=ve.map(me=>{const ce=Nc(me.deltaSum);return ce==null?null:{row:me,value:ce}}).filter(Boolean);if(ie.length){let me=ie[0].value,ce=ie[0].value;ie.forEach(Ne=>{Ne.value<me&&(me=Ne.value),Ne.value>ce&&(ce=Ne.value)});const he=ce-me;ie.forEach(Ne=>{const Te=he===0?.5:(Ne.value-me)/he,xe=J(Ne.row);xe.statsNorm=Te,Ne.value===ce&&(xe.statsIsBest=!0)})}return Z},[H,z]),ne=Date.now(),Y=E?h?"Loading...":p?"Error":"Ready":"No server selected";return s.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[s.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[s.jsxs("div",{children:[Y," - ",H.length," rows"]}),s.jsx("div",{children:g?`Updated: ${N(g)}`:null})]}),i&&T.missing&&s.jsx("div",{style:{fontSize:12,color:"#ffb347"},children:a("toplists.compareMissingSnapshot","No snapshot found for this month.")}),y&&s.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[s.jsxs("span",{children:["Scope ",y.scopeId,"  ",y.changesSinceLastRebuild,"/",(X=y.minChanges)!=null?X:"?"," changes since last rebuild"]}),s.jsxs("span",{children:["Auto rebuild at ",(te=y.minChanges)!=null?te:"?"," changes or after ",(se=y.maxAgeDays)!=null?se:"?"," days"]}),s.jsxs("span",{children:["Last rebuild: ",v(y.lastRebuildAt)]})]}),E&&p&&s.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[s.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),s.jsx("div",{style:{wordBreak:"break-all"},children:p}),s.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),E?s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{className:"toplists-table",style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{padding:"8px 6px"},children:"#"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Flag"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Delta Rank"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"center",width:60},children:"Class"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),s.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"}),s.jsx("th",{style:{padding:"8px 6px"},children:"Stats+"})]})}),s.jsxs("tbody",{children:[H.map((Z,ve)=>{var be,Be,Ve,nt,ht,Ue,Ee,He,St,Ct,ns,Rt,Gt,Ps,_t,Ae;const Se=V?Z._rankDelta:null,J=Z._delta||{},ue=rte(Z.lastScan,ne),ie=kx(Z.class,48),me=(Be=(be=Z.playerId)!=null?be:Z.id)!=null?Be:null,ce=me!=null?me:z(Z),he=K.get(ce),Ne=sb(he==null?void 0:he.mainRank,ite),Te=sb(he==null?void 0:he.conRank,ate),xe=sb(he==null?void 0:he.levelRank,ote),Ie=ute(he==null?void 0:he.mineTier),$e=hte(he),Xe=ks=>V?s.jsx("div",{style:{fontSize:11,opacity:.8},children:ks==null?a("toplists.deltaNew","NEW"):L(ks)}):null;return s.jsxs("tr",{className:"toplists-row",style:{borderBottom:"1px solid #2C4A73",cursor:me?"pointer":void 0},onClick:()=>{me&&k(`/player/${encodeURIComponent(me)}`)},children:[s.jsx("td",{style:{padding:"8px 6px"},children:ve+1}),s.jsx("td",{style:{padding:"8px 6px"},children:(Ve=Z.flag)!=null?Ve:""}),s.jsx("td",{style:{padding:"8px 6px"},children:Se==null?"":L(Se)}),s.jsx("td",{style:{padding:"8px 6px"},children:Z.server}),s.jsx("td",{style:{padding:"8px 6px"},children:Z.name}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"center"},children:s.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:ie?s.jsx("img",{src:ie,alt:(nt=Z.class)!=null?nt:"class",width:20,height:20,loading:"lazy",style:{display:"block",objectFit:"contain"}}):s.jsx("span",{children:(ht=Z.class)!=null?ht:""})})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Bh(xe),children:P(Z.level)}),Xe((Ue=J.level)!=null?Ue:null)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:(Ee=Z.guild)!=null?Ee:""}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Bh(Ne),children:P(Z.main)}),Xe((He=J.main)!=null?He:null)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Bh(Te),children:P(Z.con)}),Xe((St=J.con)!=null?St:null)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:P(Z.sum)}),Xe((Ct=J.sum)!=null?Ct:null)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[s.jsx("span",{children:(Rt=(ns=Z._ratioLabel)!=null?ns:Z.ratio)!=null?Rt:""}),J.ratio==null?null:Xe(J.ratio)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{style:Bh(Ie),children:P(Z.mine)}),Xe((Gt=J.mine)!=null?Gt:null)]})}),s.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[s.jsx("span",{children:P(Z.treasury)}),Xe((Ps=J.treasury)!=null?Ps:null)]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[s.jsx("span",{children:(_t=Z.lastScan)!=null?_t:""}),ue&&s.jsx("span",{"aria-hidden":!0,style:{width:8,height:8,borderRadius:"50%",background:ue,boxShadow:"0 0 6px rgba(0, 0, 0, 0.35)"}})]})}),s.jsx("td",{style:{padding:"8px 6px"},children:s.jsx("span",{style:Bh($e),children:L(Z.deltaSum)})})]},`${Z.name}__${Z.server}__${(Ae=Z.class)!=null?Ae:""}`)}),h&&H.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:16,style:{padding:12},children:"Loading..."})}),!h&&!p&&H.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:16,style:{padding:12},children:"No results"})})]})]})}):s.jsx("div",{style:{padding:12,color:"#B0C4D9"},children:"Please select at least one server."})]})}function xte(){const[t,e]=fi(),r=t.get("tab")==="guilds"?"guilds":"players",i=a=>{const o=new URLSearchParams(t);o.set("tab",a),e(o)};return s.jsx("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:s.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[s.jsx(hT,{active:r==="players",onClick:()=>i("players"),label:"Players"}),s.jsx(hT,{active:r==="guilds",onClick:()=>i("guilds"),label:"Guilds"})]})})}function hT({active:t,onClick:e,label:n}){return s.jsx("button",{type:"button",onClick:e,className:["rounded-lg px-3 py-1.5 text-sm text-white border",t?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:n})}function yte(){return s.jsx(VZ,{children:s.jsx(gte,{})})}function bte(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Browse"})})}function _te(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Rankings"})})}function wte(){return s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Players  Stats"})})}const jte="/assets/demo-avatar-special.png",pT={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!1,background:"gradient",frame:"",mirrorHorizontal:!0},Ste={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},ci=(t,e)=>Math.min(Math.max(Math.round(t),0),e),Nte=t=>{var n;const e={...pT,...t||{}};return{...e,class:ci(e.class,15),race:ci(e.race,8),mouth:ci(e.mouth,30),hair:ci(e.hair,40),hairColor:ci(e.hairColor,12),horn:ci(e.horn,10),hornColor:ci(e.hornColor,10),brows:ci(e.brows,10),eyes:ci(e.eyes,20),beard:ci(e.beard,15),nose:ci(e.nose,10),ears:ci(e.ears,10),extra:ci(e.extra,20),special:ci(e.special,200),showBorder:!1,background:"",frame:"",mirrorHorizontal:(n=e.mirrorHorizontal)!=null?n:pT.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function GR({config:t,label:e,fallbackImage:n,fallbackLabel:r}){const i=R.useRef(null),a=R.useRef(null),[o,c]=R.useState("idle"),u=R.useMemo(()=>!t||Object.keys(t||{}).length===0?null:Nte(t),[JSON.stringify(t||{})]);R.useEffect(()=>{let _=!1;if(!u){c("idle");return}c("loading");try{const w=i.current;if(!w){c("error");return}const k=new m3(w,u);a.current=k,c("ready")}catch(w){console.error("[PortraitMaker] failed to initialize",w),_||c("error")}return()=>{var w,k;_=!0;try{(k=(w=a.current)==null?void 0:w.dispose)==null||k.call(w)}catch(E){}a.current=null}},[u]);const h=u&&o!=="ready"?Ste[o]:null,p=n||jte,g=r||e,y=!u||o==="error";return s.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[s.jsxs("div",{className:"avatar-portrait__canvas-shell",children:[!y&&s.jsx("canvas",{ref:i,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`}),y&&s.jsx("img",{src:p,alt:g,className:"avatar-portrait__fallback",draggable:!1,width:240,height:240})]}),h&&s.jsx("span",{className:"avatar-portrait__status",children:h})]})}const nb=[{key:"str",label:"STR",name:"Strength"},{key:"dex",label:"DEX",name:"Dexterity"},{key:"int",label:"INT",name:"Intelligence"},{key:"con",label:"CON",name:"Constitution"},{key:"lck",label:"LCK",name:"Luck"}],kte=8,rb=t=>typeof t=="number"&&Number.isFinite(t)?t.toLocaleString("de-DE"):"-",ib=(t,e)=>e<=0?0:Math.min(100,Math.max(0,t/e*100)),mT=t=>typeof t=="number"&&Number.isFinite(t);function Cte({baseStats:t,totalStats:e,benchmarks:n,mode:r,onModeChange:i}){const[a,o]=R.useState("base"),[c,u]=R.useState(!1),[h,p]=R.useState(!1);R.useEffect(()=>{let v=null,b=null;return v=requestAnimationFrame(()=>{b=requestAnimationFrame(()=>u(!0))}),()=>{v!=null&&cancelAnimationFrame(v),b!=null&&cancelAnimationFrame(b)}},[]),R.useEffect(()=>{c&&!h&&p(!0)},[c,h]);const g=nb.some(v=>mT(e==null?void 0:e[v.key])),_=(r!=null?r:a)==="total"&&g?"total":"base",w=v=>{v==="total"&&!g||(i?i(v):o(v))},k=nb.map(v=>{const b=_==="total"?e:t,I=b==null?void 0:b[v.key];return mT(I)?I:0}),E=Math.max(...k,0),P=E>0?E*1.05:1,L=_==="base",N=_==="base"?"Base Stats":"Total Stats";return s.jsxs("div",{className:"player-profile__attribute-bars",children:[s.jsxs("div",{className:"player-profile__attribute-bars-head",children:[s.jsx("div",{className:"player-profile__card-label",children:N}),s.jsxs("div",{className:"player-profile__attribute-toggle",role:"group","aria-label":"Attribute Ansicht",children:[s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${_==="base"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":_==="base",onClick:()=>w("base"),children:"Base"}),s.jsx("button",{type:"button",className:`player-profile__attribute-toggle-btn${_==="total"?" player-profile__attribute-toggle-btn--active":""}`,"aria-pressed":_==="total",onClick:()=>w("total"),disabled:!g,children:"Total"})]})]}),s.jsx("div",{className:"player-profile__attribute-bars-list",children:nb.map(v=>{var Y,G,X;const b=_==="total"?e:t,I=Number(b==null?void 0:b[v.key])||0,j=L?(Y=n==null?void 0:n.serverAvg)==null?void 0:Y[v.key]:void 0,S=L?(G=n==null?void 0:n.guildAvg)==null?void 0:G[v.key]:void 0,C=L?(X=n==null?void 0:n.scaleMax)==null?void 0:X[v.key]:void 0,M=Number(j)||0,T=Number(S)||0,D=typeof C=="number"&&Number.isFinite(C),F=Math.max(D?Number(C):P,I,M,T,1),V=ib(I,F),z=ib(M,F),q=ib(T,F),H=Math.min(1,Math.max(0,V/100)),K=c?H:0,ne=h?void 0:"500ms";return s.jsxs("div",{className:"player-profile__attribute-bar-row",children:[s.jsxs("div",{className:"player-profile__attribute-bar-label","aria-hidden":!0,children:[s.jsx("span",{className:"player-profile__attribute-bar-icon",children:v.label}),s.jsx("span",{className:"player-profile__attribute-bar-name",children:v.name})]}),s.jsxs("div",{className:"player-profile__attribute-bar-track",role:"presentation",children:[s.jsx("div",{className:"player-profile__attribute-bar-fill",style:{transform:`scaleX(${K})`,minWidth:I>0&&V<100?kte:void 0,transitionDuration:ne},"aria-hidden":!0}),Number.isFinite(j)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--server",style:{left:`${z}%`},"aria-hidden":!0}),Number.isFinite(S)&&s.jsx("span",{className:"player-profile__attribute-bar-marker player-profile__attribute-bar-marker--guild",style:{left:`${q}%`},"aria-hidden":!0})]}),s.jsxs("div",{className:"player-profile__attribute-bar-values",children:[s.jsx("div",{className:"player-profile__attribute-bar-value",children:rb(I)}),Number.isFinite(j)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Server ",rb(j)]}),Number.isFinite(S)&&s.jsxs("div",{className:"player-profile__attribute-bar-subvalue",children:["Gilde ",rb(S)]})]})]},v.key)})})]})}const Tte="_tooltipWrapper_cc7ym_1",Ite="_bottom_cc7ym_13",Ate="_bubble_cc7ym_13",Ete="_tail_cc7ym_25",Rte="_trigger_cc7ym_39",Pte="_card_cc7ym_89",Yd={tooltipWrapper:Tte,bottom:Ite,bubble:Ate,tail:Ete,trigger:Rte,card:Pte},dj=({content:t,children:e,className:n,placement:r="top"})=>{if(!t)return s.jsx(s.Fragment,{children:e});const i=r==="bottom"?` ${Yd.bottom}`:"";return s.jsxs("div",{className:`${Yd.tooltipWrapper}${i}${n?` ${n}`:""}`,children:[s.jsx("div",{className:Yd.trigger,children:e}),s.jsxs("div",{className:Yd.bubble,role:"tooltip",children:[s.jsx("div",{className:Yd.card,children:t}),s.jsx("div",{className:Yd.tail})]})]})},Lte=t=>{if(t==null||!Number.isFinite(t))return{level:"unknown",label:"Unknown",hint:"Scan history unavailable"};const e=Math.max(0,Math.floor(t));return e===0?{level:0,label:"Scanned today",hint:"No rescan needed"}:e===1?{level:1,label:"Very fresh",hint:"No rescan needed"}:e<=3?{level:2,label:"Fresh",hint:"No rescan needed"}:e<=7?{level:3,label:"Recent",hint:"Rescan recommended"}:e<=14?{level:4,label:"Aging",hint:"Rescan recommended"}:e<=30?{level:5,label:"Outdated",hint:"Rescan strongly recommended"}:{level:6,label:"Stale",hint:"Rescan strongly recommended"}},Dte=t=>{if(t==null||!Number.isFinite(t))return null;const e=Math.max(0,Math.floor(t));return e===0?"today":e===1?"1 day ago":`${e} days ago`};function Mte({label:t,size:e=40}){const n=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return s.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:n||"?"})}function Fte({className:t,label:e,size:n=40}){const r=c=>c.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=rr.find(c=>r(c.label)===i)||rr.find(c=>r(c.label).startsWith(i)||i.startsWith(r(c.label))),o=a?vi(a.iconUrl,n*2):null;return o?s.jsx("div",{className:"player-profile__class-avatar",style:{width:n,height:n},children:s.jsx("img",{src:o,alt:"",draggable:!1})}):s.jsx(Mte,{label:e,size:n})}function Bte({data:t,loading:e,onAction:n}){const[r,i]=R.useState("base"),a=w=>w.toLowerCase().replace(/[^a-z0-9]+/g,""),o=R.useMemo(()=>Lte(t.lastScanDays),[t.lastScanDays]),c=R.useMemo(()=>{const w=[];t.lastScanAtLabel&&w.push(`Last scan: ${t.lastScanAtLabel}`);const k=Dte(t.lastScanDays);return k&&w.push(`Age: ${k}`),o.hint&&w.push(o.hint),w.join(" | ")},[t.lastScanAtLabel,t.lastScanDays,o.hint]),u=rr.find(w=>a(w.label)===a(t.className||""))||rr.find(w=>a(w.label).startsWith(a(t.className||""))||a(t.className||"").startsWith(a(w.label))),h=t.portraitFallbackUrl||(u?vi(u.iconUrl,420):void 0)||"/assets/demo-avatar-special.png",p=t.portraitFallbackLabel||t.className||t.playerName,g=t.hasPortrait===!1?void 0:t.portrait,y=w=>typeof w=="number"&&Number.isFinite(w)?w.toLocaleString("de-DE"):"-",_=R.useMemo(()=>t.metrics.map(w=>{if(w.label==="Total Base Stats"&&r==="total"){const k=t.totalStats;if(k){const E=(Number(k.str)||0)+(Number(k.dex)||0)+(Number(k.int)||0)+(Number(k.con)||0)+(Number(k.lck)||0);return{...w,label:"Total Stats",value:y(E)}}}return w}),[t.metrics,t.totalStats,r]);return s.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[s.jsxs("div",{className:"player-profile__hero-portrait",children:[s.jsxs("div",{className:"player-profile__identity player-profile__identity--overlay",children:[s.jsx(Fte,{className:t.className,label:t.playerName,size:48}),s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__player-name",children:t.playerName}),s.jsxs("div",{className:"player-profile__player-meta",children:[s.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&s.jsxs("span",{children:[" ",t.guild]}),t.server&&s.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&s.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),s.jsx(dj,{content:c,children:s.jsxs("div",{className:"player-profile__freshness",children:[s.jsx("span",{"aria-hidden":!0,className:`player-profile__freshness-dot player-profile__freshness-dot--${o.level}`}),s.jsx("span",{className:"player-profile__freshness-label",children:o.label}),s.jsx("span",{"aria-hidden":!0,className:"player-profile__freshness-info",children:""})]})})]})]}),s.jsx(GR,{config:g,label:t.playerName,fallbackImage:h,fallbackLabel:p})]}),s.jsxs("div",{className:"player-profile__hero-body",children:[s.jsx("div",{className:"player-profile__hero-metrics",children:_.map(w=>s.jsxs("div",{className:"player-profile__hero-metric",children:[s.jsx("div",{className:"player-profile__hero-metric-label",children:w.label}),s.jsx("div",{className:"player-profile__hero-metric-value",children:w.value}),w.hint&&s.jsx("div",{className:"player-profile__hero-metric-hint",children:w.hint})]},w.label))}),t.baseStats&&s.jsx(Cte,{baseStats:t.baseStats,totalStats:t.totalStats,benchmarks:t.baseStatBenchmarks,mode:r,onModeChange:i}),t.badges.length>0&&s.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(w=>s.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${w.tone||"neutral"}`,title:w.hint,children:[w.icon&&s.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:w.icon}),s.jsx("span",{children:w.label}),s.jsx("strong",{children:w.value})]},w.label))}),t.actions.length>0&&s.jsx("div",{className:"player-profile__hero-actions",children:t.actions.map(w=>s.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||w.disabled,title:w.title,onClick:()=>n==null?void 0:n(w.key),children:w.label},w.key))})]})]})}const $te=W.memo(Bte),ab=600,$f=240,Ote=[80,160,240,320,400,480,560],Vte=[40,80,120,160,200],Xd=40,Ute=560,ob=40,gT=200,tf=$f,Gte=(t,e,n)=>Math.max(e,Math.min(n,t));function zte({points:t,avgValue:e=null,showAvg:n=!0,showFill:r=!0,showDots:i=!0,showXLabels:a=!0,className:o}){const c=R.useId(),u=Ute-Xd,h=gT-ob,{linePath:p,areaPath:g,dots:y,avgY:_,labels:w}=R.useMemo(()=>{if(!t.length)return{linePath:"",areaPath:"",dots:[],avgY:null,labels:[]};let k=Math.min(...t),E=Math.max(...t);const L=Math.max(1,E-k)*.1;k-=L,E+=L;const N=Math.max(1,E-k),v=D=>t.length>1?Xd+D/(t.length-1)*u:Xd,b=D=>Gte(ob+(1-(D-k)/N)*h,ob,gT);if(t.length===1){const D=Xd,F=Xd+u*.1,V=b(t[0]),z=`${[`M${D},${V}`,`L${F},${V}`,`L${F},${tf}`,`L${D},${tf}`,"Z"].join(" ")}`;return{linePath:`M${D},${V} L${F},${V}`,areaPath:z,dots:i?[{x:(D+F)/2,y:V}]:[],avgY:n&&e!=null?b(e):null,labels:[{x:Xd,text:"t0"}]}}const I=t.map((D,F)=>({x:v(F),y:b(D)})),j=I.map((D,F)=>`${F===0?"M":"L"}${D.x},${D.y}`).join(" "),S=`${j} L${I[I.length-1].x},${tf} L${I[0].x},${tf} Z`,C=i?I:[],M=n&&e!=null?b(e):null,T=t.map((D,F)=>({x:v(F),text:`t${F}`}));return{linePath:j,areaPath:S,dots:C,avgY:M,labels:T}},[t,e,n,i,u,h]);return s.jsxs("svg",{viewBox:`0 0 ${ab} ${$f}`,preserveAspectRatio:"none",className:`player-profile__trend-chart ${o!=null?o:""}`.trim(),role:"img","aria-label":"Anchored trend",children:[s.jsxs("g",{className:"player-profile__trend-grid",opacity:"0.55",stroke:"rgba(43,76,115,0.55)",strokeWidth:1,children:[Ote.map((k,E)=>s.jsx("line",{x1:k,x2:k,y1:0,y2:$f},`gv-${E}`)),Vte.map((k,E)=>s.jsx("line",{x1:0,x2:ab,y1:k,y2:k},`gh-${E}`))]}),n&&_!=null&&s.jsxs("g",{className:"player-profile__trend-avg",children:[s.jsx("text",{x:12,y:20,className:"player-profile__trend-avg-label",children:"Avg"}),s.jsx("line",{x1:0,x2:ab,y1:_,y2:_})]}),r&&g&&s.jsx("defs",{children:s.jsxs("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(92, 139, 198, 0.28)"}),s.jsx("stop",{offset:"100%",stopColor:"rgba(92, 139, 198, 0)"})]})}),r&&g&&s.jsx("path",{d:g,className:"player-profile__trend-area",fill:`url(#${c})`}),p&&s.jsx("path",{d:p,className:"player-profile__trend-line",fill:"none"}),y.map((k,E)=>s.jsx("circle",{cx:k.x,cy:k.y,r:4,className:"player-profile__trend-dot"},`dot-${E}`)),a&&s.jsx("g",{className:"player-profile__trend-xlabels",children:w.map((k,E)=>s.jsx("text",{x:k.x,y:$f-8,textAnchor:"middle",children:k.text},`lbl-${E}`))})]})}const lb=t=>t==null?"-":t.toLocaleString("de-DE");function Hte({title:t,subtitle:e,badgeLabel:n="Line + Avg marker",series:r,className:i}){const{latest:a,start:o,delta:c,deltaPct:u,avg:h,xLabels:p}=R.useMemo(()=>{const y=Array.isArray(r.points)?r.points:[],_=y.length?y[y.length-1]:null,w=y.length?y[0]:null,k=_!=null&&w!=null?_-w:null,E=k!=null&&w&&Math.abs(w)>0?k/w*100:null,P=y.length?y.reduce((N,v)=>N+v,0)/y.length:null,L=y.map((N,v)=>`t${v}`);return{latest:_,start:w,delta:k,deltaPct:E,avg:P,xLabels:L}},[r.points]),g=u!=null?`${u>=0?"+":""}${u.toFixed(1)}%`:c!=null?`${c>=0?"+":""}${c.toLocaleString("de-DE")}`:"+0";return s.jsxs("article",{className:`anchored-card ${i!=null?i:""}`.trim(),children:[s.jsxs("header",{className:"anchored-card__header",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"anchored-card__title",children:[t,n&&s.jsx("span",{className:"anchored-card__badge",children:n})]}),e&&s.jsx("div",{className:"anchored-card__subtitle",children:e})]}),s.jsxs("div",{className:"anchored-card__delta anchored-card__delta--up","aria-label":"Delta",children:[" ",g]})]}),s.jsx("div",{className:"anchored-card__chart",children:s.jsx(zte,{points:r.points,avgValue:h,showAvg:!0,showDots:!0,showFill:!0,showXLabels:!0})}),s.jsxs("footer",{className:"anchored-card__footer",children:[s.jsxs("div",{className:"anchored-card__kpis",children:[s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:lb(a)}),s.jsx("span",{children:"Base Stats (latest)"})]}),s.jsxs("div",{className:"anchored-card__kpi",children:[s.jsx("strong",{children:lb(o)}),s.jsx("span",{children:"Server  marker"})]}),s.jsxs("div",{className:"anchored-card__pill anchored-card__pill--up",children:[" ",lb(c)]})]}),s.jsxs("div",{className:"anchored-card__legend",children:[s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot"})," Player"]}),s.jsxs("span",{children:[s.jsx("span",{className:"anchored-card__dot anchored-card__dot--muted"})," Average marker"]})]})]})]})}function Wte({data:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>s.jsxs("article",{className:"player-profile__card",children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&s.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),s.jsxs("div",{className:"player-profile__section",children:[s.jsxs("header",{className:"player-profile__section-head",children:[s.jsx("h3",{children:"Attribute"}),s.jsx("span",{children:"Basis vs. Gesamt"})]}),s.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>s.jsxs("div",{className:"player-profile__attr-card",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__attr-label",children:e.label}),s.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&s.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),s.jsxs("div",{className:"player-profile__split",children:[s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Resistenzen"})}),s.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]}),s.jsxs("div",{className:"player-profile__section",children:[s.jsx("header",{className:"player-profile__section-head",children:s.jsx("h3",{children:"konomie"})}),s.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>s.jsxs("li",{children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function Kte({items:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>s.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[s.jsxs("div",{className:"player-profile__progress-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"player-profile__card-label",children:e.label}),s.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),s.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),s.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:s.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&s.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function qte({series:t}){return s.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var n;return s.jsx(Hte,{title:e.label,subtitle:(n=e.subLabel)!=null?n:"Looks natural even when the values are high (no 0-baseline).",series:e},e.label)})})}function Qte({rows:t}){return s.jsxs("div",{className:"player-profile__tab-panel",children:[s.jsx("div",{className:"player-profile__section-head",children:s.jsx("h3",{children:"Serververgleich"})}),s.jsx("div",{className:"player-profile__comparison-wrapper",children:s.jsxs("table",{className:"player-profile__comparison",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Kategorie"}),s.jsx("th",{children:"Spieler"}),s.jsx("th",{children:"Cluster"}),s.jsx("th",{children:""})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.label}),s.jsx("td",{children:e.playerValue}),s.jsx("td",{children:e.benchmark}),s.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function Yte({entries:t}){return s.jsx("div",{className:"player-profile__tab-panel",children:s.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>s.jsxs("li",{children:[s.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),s.jsxs("div",{className:"player-profile__timeline-card",children:[s.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),s.jsx("div",{className:"player-profile__timeline-title",children:e.title}),s.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}const Xte={genderName:"male",class:1,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:1,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},di=(t,e,n=0)=>{if(!Array.isArray(t)||e<0)return n;const r=t[e],i=typeof r=="number"?r:Number(r);return Number.isFinite(i)?i:n},Jte=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}};function fT(t){const e=di(t,18),n=di(t,21),r=di(t,25),i=di(t,705),a=di(t,28)&255,o=Math.floor(e/100),c=Math.max(o,1),u=Math.floor(e/100);return{...Xte,genderName:a===1?"female":"male",class:di(t,29)&65535,race:di(t,27)&65535,mouth:di(t,17),hair:Math.max(e%100,0),brows:Math.max(di(t,19)%100,0),eyes:di(t,20),beard:Math.max(n%100,0),nose:di(t,22),ears:di(t,23),extra:di(t,24),horn:Math.max(r%100,0),special:Math.min(di(t,26),0),hairColor:c,hornColor:a===1?1:u===0?c:u,frame:Jte(i)}}function Zte(t){return typeof t!="string"||!t.trim()?[]:t.split("/").map(e=>{const n=Number(e.trim());return Number.isFinite(n)?n:0})}const ese={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},Ts=(t,e=0)=>{const n=typeof t=="number"?t:Number(t);return Number.isFinite(n)?n:e},tse=t=>t&&typeof t=="object"&&Object.values(t).some(e=>e!=null),vT=t=>{if(typeof t!="string")return[];const e=t.trim();if(!e)return[];const n=e.toLowerCase().replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");return n?[n]:[]},$h=new Map,xT="avatar-cache:",sse=1440*60*1e3,nse=async(t,e,n,r)=>{var L,N;const i=Number(t),a=String(t!=null?t:"").trim(),o=(L=vT(e)[0])!=null?L:"",c=typeof n=="string"&&n.trim()?n.trim():"",h=(v=>{if(!v)return"";const b=v.trim().toLowerCase();if(!b)return"";const I=b.split("/").filter(Boolean).pop()||b,[j,...S]=I.split("__"),C=S.join("__");if(j&&C){const M=vT(C)[0];if(M)return`${j}__${M}`}return a&&o?`${a}__${o}`:I.replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"")})(c)||(a&&o?`${a}__${o}`:"");if(!h)return null;const g=(()=>{var v;if($h.has(h))return(v=$h.get(h))!=null?v:null;try{const b=typeof window!="undefined"?window.localStorage.getItem(`${xT}${h}`):null;if(!b)return null;const I=JSON.parse(b);return!(I!=null&&I.data)||typeof I.savedAt!="number"||!(Date.now()-I.savedAt<sse)?null:I.data}catch(b){return null}})();if(g)return $h.set(h,g),g;const y=await bn(r!=null?r:null,ss(ft,"linked_players","avatars","avatars",h),()=>sn(ss(ft,"linked_players","avatars","avatars",h)));if(!y.exists())return $h.set(h,null),null;const _=y.data(),w=(_==null?void 0:_.portrait)||{},k=tse(w),E={genderName:(w==null?void 0:w.genderName)==="female"?"female":"male",classId:Ts(w==null?void 0:w.classId),raceId:Ts(w==null?void 0:w.raceId),mouth:Ts(w==null?void 0:w.mouth),hair:Ts(w==null?void 0:w.hair),hairColor:Ts(w==null?void 0:w.hairColor),horn:Ts(w==null?void 0:w.horn),hornColor:Ts(w==null?void 0:w.hornColor),brows:Ts(w==null?void 0:w.brows),eyes:Ts(w==null?void 0:w.eyes),beard:Ts(w==null?void 0:w.beard),nose:Ts(w==null?void 0:w.nose),ears:Ts(w==null?void 0:w.ears),extra:Ts(w==null?void 0:w.extra),special:Ts(w==null?void 0:w.special),frameId:Ts(w==null?void 0:w.frameId),frame:typeof(w==null?void 0:w.frame)=="string"?w.frame:void 0,background:typeof(w==null?void 0:w.background)=="string"?w.background:void 0,showBorder:typeof(w==null?void 0:w.showBorder)=="boolean"?w.showBorder:void 0,mirrorHorizontal:typeof(w==null?void 0:w.mirrorHorizontal)=="boolean"?w.mirrorHorizontal:void 0},P={playerId:Ts(_==null?void 0:_.playerId,i),server:typeof(_==null?void 0:_.server)=="string"?_.server:e,portrait:E,updatedAt:(N=_==null?void 0:_.updatedAt)!=null?N:null,hasPortraitData:k};if($h.set(h,P),typeof window!="undefined")try{window.localStorage.setItem(`${xT}${h}`,JSON.stringify({data:P,savedAt:Date.now()}))}catch(v){}return P},rse=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}},ise=["","goldenFrame","twitchFrame","zenFrame","silverFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"],ase=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],ose=(t,e)=>{const n=(t==null?void 0:t.portrait)||{},r={...ese,...e||{}},i=rse(Ts(n.frameId,0)),a=typeof n.frame=="string"&&ise.includes(n.frame)?n.frame:"",o=typeof n.background=="string"&&ase.includes(n.background)?n.background:r.background;return{...r,genderName:n.genderName==="female"?"female":r.genderName,class:Ts(n.classId,r.class),race:Ts(n.raceId,r.race),mouth:Ts(n.mouth,r.mouth),hair:Ts(n.hair,r.hair),hairColor:Ts(n.hairColor,r.hairColor),horn:Ts(n.horn,r.horn),hornColor:Ts(n.hornColor,r.hornColor),brows:Ts(n.brows,r.brows),eyes:Ts(n.eyes,r.eyes),beard:Ts(n.beard,r.beard),nose:Ts(n.nose,r.nose),ears:Ts(n.ears,r.ears),extra:Ts(n.extra,r.extra),special:Ts(n.special,r.special),frame:i||a||r.frame||"",background:o,showBorder:typeof n.showBorder=="boolean"?n.showBorder:r.showBorder,mirrorHorizontal:typeof n.mirrorHorizontal=="boolean"?n.mirrorHorizontal:r.mirrorHorizontal}},lse=["Statistiken","Charts","Fortschritt","Vergleich","Historie"],cse="player-profile-cache:",dse=900*1e3,use="playerProfile:charts:monthly3:",hse=720*60*1e3,zR=3,cb="Last 3 months",z1="history_monthly",HR=["honor","ehre","honour","honorpoints","ehrepunkte"],WR=[{key:"str",label:"Strke",base:["Base Strength","Strke","basestrength"],total:["Strength"]},{key:"dex",label:"Geschick",base:["Base Dexterity","Geschick","basedexterity"],total:["Dexterity"]},{key:"int",label:"Intelligenz",base:["Base Intelligence","Intelligenz","baseintelligence"],total:["Intelligence"]},{key:"con",label:"Konstitution",base:["Base Constitution","Konstitution","baseconstitution"],total:["Constitution"]},{key:"lck",label:"Glck",base:["Base Luck","Glck","baseluck"],total:["Luck"]}];function pse(){const t=Qv(),e=t.id||t.pid||t.playerId||t.player||"",n=Xr(),[r,i]=R.useState(!0),[a,o]=R.useState(null),[c,u]=R.useState(null),[h,p]=R.useState("Statistiken"),[g,y]=R.useState(null),[_,w]=R.useState(null),[,k]=R.useState(!1),[,E]=R.useState(null),[P,L]=R.useState(null),N=R.useRef(!1),v=R.useRef(null),b=R.useRef(null),I=R.useRef(null),j=R.useRef(null);R.useEffect(()=>{let V=!1;const z=In("PlayerProfile:load");async function q(){var Y,G,X,te,se,Z,ve,Se,J,ue,ie,me,ce,he,Ne,Te,xe,Ie,$e,Xe,be,Be,Ve,nt,ht,Ue,Ee,He,St,Ct,ns;i(!0),o(null);const H=`${cse}${e}`,ne=(()=>{try{const Rt=typeof window!="undefined"?window.localStorage.getItem(H):null;if(!Rt)return null;const Gt=JSON.parse(Rt);return!(Gt!=null&&Gt.data)||typeof Gt.timestamp!="number"||!(Date.now()-Gt.timestamp<dse)?null:{data:Gt.data,timestamp:Gt.timestamp,version:typeof Gt.version=="number"?Gt.version:null}}catch(Rt){return null}})();if(ne){u(ne.data),Ys(z),i(!1);return}try{const Rt=(e||"").trim();if(!Rt)throw new Error("Kein Spieler ausgewhlt.");const Gt=ss(ft,`players/${Rt}/latest/latest`),Ps=await bn(z,Gt,()=>sn(Gt));if(!Ps.exists())throw new Error("Spieler nicht gefunden.");const _t=(Y=Ps.data())!=null?Y:{},Ae=typeof _t.values=="object"&&_t.values?_t.values:{};_t.timestampRaw!=null&&Ae.timestampRaw==null&&(Ae.timestampRaw=_t.timestampRaw);const ks=Array.isArray(_t.save)&&_t.save||Array.isArray(Ae==null?void 0:Ae.save)&&Ae.save||Array.isArray(_t.saveArray)&&_t.saveArray||Array.isArray(Ae==null?void 0:Ae.saveArray)&&Ae.saveArray||void 0,Ht=typeof _t.save=="string"&&_t.save||typeof(Ae==null?void 0:Ae.save)=="string"&&Ae.save||typeof _t.saveString=="string"&&_t.saveString||typeof(Ae==null?void 0:Ae.saveString)=="string"&&Ae.saveString||void 0,re=(X=qr((G=_t.level)!=null?G:Ae==null?void 0:Ae.Level))!=null?X:null,qe=((se=(te=_t.className)!=null?te:Ae==null?void 0:Ae.Class)!=null?se:null)||null,tt=((ve=(Z=_t.guildName)!=null?Z:Ae==null?void 0:Ae.Guild)!=null?ve:null)||null,ct=Ae["Guild Identifier"],st=typeof ct=="string"&&ct.trim()||null,Pt=Ae["Guild Joined"],as=typeof Pt=="string"&&Pt.trim()||null,os=(J=(Se=_t.name)!=null?Se:Ae==null?void 0:Ae.Name)!=null?J:Rt,_n=(ie=(ue=_t.server)!=null?ue:Ae==null?void 0:Ae.Server)!=null?ie:null,Vn=typeof _n=="string"?_n.trim().toLowerCase().replace(/\./g,"_"):"",rn=(Ne=(he=(ce=(me=_t.avatarIdentifier)!=null?me:_t.identifier)!=null?ce:Ae==null?void 0:Ae.avatarIdentifier)!=null?he:Ae==null?void 0:Ae.identifier)!=null?Ne:Vn?`${Rt}__${Vn}`:null,Ls=(xe=qr((Te=_t.totalStats)!=null?Te:Ae==null?void 0:Ae["Total Stats"]))!=null?xe:null,js=(St=(He=(Ee=(Ue=(ht=(nt=(Ve=(Be=(be=(Xe=($e=(Ie=_t.scrapbookPct)!=null?Ie:_t.scrapbook)!=null?$e:Ae==null?void 0:Ae.scrapbookPct)!=null?Xe:Ae==null?void 0:Ae.scrapbook)!=null?be:Ae==null?void 0:Ae["Scrapbook %"])!=null?Be:Ae==null?void 0:Ae.Scrapbook)!=null?Ve:Ae==null?void 0:Ae.Album)!=null?nt:Ae==null?void 0:Ae["Album %"])!=null?ht:Ae==null?void 0:Ae.AlbumPct)!=null?Ue:Ae==null?void 0:Ae.AlbumPercent)!=null?Ee:Ae==null?void 0:Ae.AlbumPercentage)!=null?He:Ae==null?void 0:Ae.AlbumCompletion)!=null?St:Ae==null?void 0:Ae.AlbumProgress,ar=(Ct=qr(js))!=null?Ct:null,wn=(ns=qr(_t.timestamp))!=null?ns:qr(Ae==null?void 0:Ae.timestamp),Er=KR(wn),Rr=typeof _t.portrait=="object"?_t.portrait:typeof _t.portraitOptions=="object"?_t.portraitOptions:typeof(Ae==null?void 0:Ae.portraitOptions)=="object"?Ae.portraitOptions:void 0,Pr={id:Rt,name:os,className:qe,level:re,guild:tt,guildIdentifier:st,guildJoined:as,server:_n,avatarIdentifier:rn,scrapbookPct:ar,totalStats:Ls,lastScanDays:Er,values:Ae,portraitConfig:Rr,saveArray:ks,saveString:Ht};if(typeof window!="undefined")try{window.localStorage.setItem(H,JSON.stringify({data:Pr,timestamp:Date.now(),version:wn!=null?wn:null}))}catch(Wn){}V||u(Pr)}catch(Rt){V||(u(null),o((Rt==null?void 0:Rt.message)||"Unbekannter Fehler beim Laden."))}finally{Ys(z),V||i(!1)}}return q(),()=>{V=!0}},[e]),R.useEffect(()=>{L(null),N.current=!1,v.current=null,b.current=null},[e,c==null?void 0:c.server]),R.useEffect(()=>{I.current=P},[P]);const S=V=>{p(V)};R.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),R.useEffect(()=>{let V=!1;return(async()=>{var K,ne;const q=In("PlayerProfile:avatar");if(!(c!=null&&c.id)){w(null),k(!1),E(null),Ys(q);return}const H=qr(c.id);if(H==null){w(null),k(!1),E(null),Ys(q);return}k(!0),E(null);try{const Y=await nse(H,(K=c.server)!=null?K:"",(ne=c.avatarIdentifier)!=null?ne:void 0,q);V||w(Y)}catch(Y){V||(w(null),E(Y instanceof Error?Y:new Error("AvatarSnapshot failed")))}finally{Ys(q),V||k(!1)}})(),()=>{V=!0}},[c==null?void 0:c.id,c==null?void 0:c.server]),R.useEffect(()=>{if(h!=="Charts"||!(c!=null&&c.id))return;const V=`${QR(c.server)}:${c.id}`;if(N.current||b.current===V&&v.current&&I.current)return;const z=gse(c.id,c.server),q=vse(z);if(q){const Y=hb(q.months);L(G=>{const X=sf(G,Y);return X||console.log(`[charts] load set from cache key=${V} months=${q.months.length}`),X?G:Y}),I.current=hb(q.months),v.current="cache",b.current=V;return}let H=!1;N.current=!0,console.log(`[charts] load start key=${V} source=firestore`);const K=In("PlayerProfile:charts");return(async()=>{try{const Y=Go(ft,`players/${c.id}/history_monthly`),G=Tn(Y,Pi(k1(),"desc"),sr(3)),te=(await yn(K,{path:Y.path},()=>xn(G))).docs.map(Z=>fse(Z)).filter(Z=>!!Z);if(!te.length){if(Of(z),!H){const Z=yT(c);I.current=Z,v.current="fallback",b.current=V,L(ve=>sf(ve,Z)?ve:Z),console.log(`[charts] load done key=${V} months=0 (fallback)`)}return}const se=hb(te);H||(I.current=se,v.current="monthly",b.current=V,L(Z=>sf(Z,se)?Z:se),xse(z,te),console.log(`[charts] load done key=${V} months=${te.length}`))}catch(Y){if(!H){const G=yT(c);I.current=G,v.current="fallback",b.current=V,L(X=>sf(X,G)?X:G),console.log(`[charts] load error key=${V}`,Y)}}finally{N.current=!1,Ys(K)}})(),()=>{H=!0}},[h,c==null?void 0:c.id,c==null?void 0:c.server]);const C=R.useMemo(()=>c?_se(c,_,P):null,[c,_,P]),M=R.useCallback(V=>{y(V),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>y(null),3500)},[]),T=R.useCallback(async V=>{if(c){if(V==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const z=`${window.location.origin}/players/profile/${c.id}`;try{await navigator.clipboard.writeText(z),M("Profil-Link wurde kopiert.")}catch(q){M("Konnte Link nicht kopieren.")}}return}if(V==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:c.name,text:`Shakes & Fidget Charakter ${c.name}`,url:window.location.href}),M("Profil geteilt.")}catch(z){M("Teilen abgebrochen.")}return}if(V==="guild"){c.guildIdentifier&&n(`/guild/${c.guildIdentifier}`);return}if(V==="rescan"){M("Rescan-Queue folgt aktuell noch Platzhalter.");return}}},[n,M,c]),D=()=>{if(!C)return null;switch(h){case"Statistiken":return s.jsx(Wte,{data:C.stats});case"Charts":return s.jsx(qte,{series:C.charts});case"Fortschritt":return s.jsx(Kte,{items:C.progress});case"Vergleich":return s.jsx(Qte,{rows:C.comparison});case"Historie":return s.jsx(Yte,{entries:C.history});default:return null}},F=()=>s.jsxs("div",{className:"player-profile__loading",children:[s.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),s.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>n("/"),style:{marginTop:12},children:"Zur Startseite"})]});return s.jsxs("div",{className:"player-profile",children:[r&&!c&&s.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!c||!C)&&F(),C&&s.jsxs(s.Fragment,{children:[s.jsx($te,{data:C.hero,loading:r,onAction:T}),s.jsx(mse,{message:g}),s.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:lse.map(V=>{const z=h===V;return s.jsx("button",{type:"button",role:"tab","aria-selected":z,className:`player-profile__tab-button ${z?"player-profile__tab-button--active":""}`,onClick:()=>S(V),children:V},V)})}),D()]})]})}const mse=W.memo(({message:t})=>t?s.jsx("p",{className:"player-profile__hero-feedback",role:"status","aria-live":"polite",children:t}):null),qr=t=>{if(t==null||t==="")return null;if(typeof t=="number")return Number.isFinite(t)?t:null;const e=String(t).trim(),n=e.startsWith("-")?-1:1,r=e.replace(/^[+-]/,"").replace(/[\s%]/g,""),i=r.lastIndexOf(","),a=r.lastIndexOf("."),o=Math.max(i,a);let c="";if(o>-1){const h=r.slice(o+1).replace(/[^0-9]/g,""),p=r.slice(0,o).replace(/[^0-9]/g,"");h.length>0&&h.length<=2?c=`${p}.${h}`:c=(p+h).replace(/[^0-9]/g,"")}else c=r.replace(/[^0-9]/g,"");if(!c)return null;const u=Number(c)*n;return Number.isFinite(u)?u:null},KR=t=>{if(!t)return null;const e=Date.now()/1e3,n=Math.max(0,e-t);return Math.floor(n/86400)},db=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),qR=t=>{const e=new Map;return Object.entries(t||{}).forEach(([n,r])=>e.set(db(n),r)),{number(n,r=null){for(const i of n){const a=qr(e.get(db(i)));if(a!=null)return a}return r},text(n,r=null){for(const i of n){const a=e.get(db(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},QR=t=>typeof t!="string"?"unknown":t.trim().toLowerCase().replace(/\./g,"_")||"unknown",gse=(t,e)=>`${use}${QR(e)}:${t}`,Mo=t=>typeof t=="number"&&Number.isFinite(t)?t:0,ub=(t,e=3)=>{var r;const n=t.map(i=>Number.isFinite(i)?i:0);for(n.length||n.push(0);n.length<e;)n.unshift((r=n[0])!=null?r:0);return n.slice(-e)},Rv=(t,e,n)=>[{label:"Level Verlauf",points:ub(t),unit:"",subLabel:cb},{label:"Total Stats",points:ub(e),unit:"",subLabel:cb},{label:"Honor",points:ub(n),unit:"",subLabel:cb}],YR=t=>{const e=qR(t||{}),n=e.number(["level"]),r=e.number(HR);let a=e.number(["totalstats","stats"]);if(a==null){let o=0,c=0;WR.forEach(u=>{var p;const h=(p=e.number(u.total))!=null?p:e.number(u.base);h!=null&&(o+=h,c++)}),a=c?o:null}return{level:n,totalStats:a,honor:r}},hb=t=>{if(!t.length)return Rv([],[],[]);const e=[...t].sort((a,o)=>a.monthId.localeCompare(o.monthId)),n=e.map(a=>Mo(a.values.level)),r=e.map(a=>Mo(a.values.totalStats)),i=e.map(a=>Mo(a.values.honor));return Rv(n,r,i)},sf=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0;n<t.length;n++){if(t[n].label!==e[n].label||t[n].unit!==e[n].unit||t[n].subLabel!==e[n].subLabel||t[n].points.length!==e[n].points.length)return!1;for(let r=0;r<t[n].points.length;r++)if(t[n].points[r]!==e[n].points[r])return!1}return!0},fse=t=>{var i,a,o;const e=typeof t.data=="function"?t.data():{},n=e!=null&&e.values&&typeof e.values=="object"?e.values:{},r=typeof(e==null?void 0:e.monthId)=="string"&&e.monthId?e.monthId:t.id;return r?{monthId:r,lastTs:(o=qr((a=(i=e==null?void 0:e.lastTs)!=null?i:e==null?void 0:e.lastTimestamp)!=null?a:e==null?void 0:e.lastTimestampRaw))!=null?o:null,values:YR(n)}:null},Of=t=>{if(typeof window!="undefined")try{window.localStorage.removeItem(t)}catch(e){}},vse=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e),r=(n==null?void 0:n.source)===z1,i=typeof n.fetchedAt=="number"&&n.version===zR,a=i&&Date.now()-n.fetchedAt<=hse,o=Array.isArray(n.months)?n.months:null;if(!r||!i||!a||!o)return Of(t),null;const c=o.map(u=>{var h,p,g,y,_,w;return!u||typeof u.monthId!="string"?null:{monthId:u.monthId,lastTs:typeof u.lastTs=="number"?u.lastTs:null,values:{level:(p=qr((h=u.values)==null?void 0:h.level))!=null?p:null,totalStats:(y=qr((g=u.values)==null?void 0:g.totalStats))!=null?y:null,honor:(w=qr((_=u.values)==null?void 0:_.honor))!=null?w:null}}}).filter(u=>!!u);return c.length<1?(Of(t),null):{fetchedAt:n.fetchedAt,version:n.version,source:z1,months:c}}catch(e){return Of(t),null}},xse=(t,e)=>{if(typeof window=="undefined"||e.length<1)return;const n={fetchedAt:Date.now(),version:zR,source:z1,months:e.map(r=>{var i,a,o;return{monthId:r.monthId,lastTs:r.lastTs,values:{level:(i=r.values.level)!=null?i:null,totalStats:(a=r.values.totalStats)!=null?a:null,honor:(o=r.values.honor)!=null?o:null}}})};try{window.localStorage.setItem(t,JSON.stringify(n))}catch(r){}},yT=t=>{var r,i,a,o,c;const e=YR(t.values||{}),n={level:(i=(r=e.level)!=null?r:t.level)!=null?i:null,totalStats:(o=(a=e.totalStats)!=null?a:t.totalStats)!=null?o:null,honor:(c=e.honor)!=null?c:null};return Rv([Mo(n.level)],[Mo(n.totalStats)],[Mo(n.honor)])},yse=t=>{let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return()=>{e+=1831565813;let n=Math.imul(e^e>>>15,1|e);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},Xn=(t,e="-")=>t==null?e:t.toLocaleString("de-DE"),Vf=t=>{if(t==null)return"-";const e=Math.floor(t*100)/100,n=e%1!==0;return`${e.toLocaleString("de-DE",{minimumFractionDigits:n?2:0,maximumFractionDigits:2})}%`},bT=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,_T=t=>{if(t==null)return null;const e=new Date(t*1e3);if(Number.isNaN(e.getTime()))return null;const n=r=>String(r).padStart(2,"0");return`${n(e.getDate())}.${n(e.getMonth()+1)}.${e.getFullYear()} ${n(e.getHours())}:${n(e.getMinutes())}`},bse=(t,e)=>{let n;const r=t.portraitConfig&&Object.keys(t.portraitConfig).length>0;if(Array.isArray(t.saveArray)&&t.saveArray.length>0)n=fT(t.saveArray);else if(t.saveString){const i=Zte(t.saveString);n=i.length>0?fT(i):void 0}else r&&(n={...t.portraitConfig});return e!=null&&e.hasPortraitData?{config:ose(e,n),hasData:!0}:n?{config:n,hasData:!0}:{config:void 0,hasData:!1}},_se=(t,e,n)=>{var Xe,be,Be,Ve,nt,ht,Ue,Ee,He,St,Ct,ns,Rt,Gt,Ps,_t,Ae,ks,Ht;const r=t.values||{},i=qR(r),a=yse(t.id),o=bse(t,e),c=wE((Xe=t.className)!=null?Xe:void 0),u=vi(c.url,420)||"/assets/demo-avatar-special.png",h=t.className?`Klassenbild ${t.className}`:"Portrait-Platzhalter",p=["album","album%","albumpct","albumpercent","albumpercentage","albumcompletion","albumprogress","scrapbook","scrapbook%","scrapbookpct","scrapbookpercent"],g=HR,y=["hofrank","halloffamerank","hofposition","halloffameposition","hofplatz","halloffame","hof"],_=["mount","reittier","mountname"],w=["mountpct","mountpercent","mountpercentage","mountspeed","mountbonus","mountvalue"],k=["guildrole","role","guildrank","gildenrolle"],E=(be=t.level)!=null?be:i.number(["level"]),P=(Be=t.scrapbookPct)!=null?Be:i.number(p),L=i.number(g),N=(Ve=t.totalStats)!=null?Ve:i.number(["totalstats","stats"]),v=WR,b={str:0,dex:0,int:0,con:0,lck:0},I={str:0,dex:0,int:0,con:0,lck:0};let j=!1,S=!1;v.forEach(re=>{const qe=i.number(re.base);qe!=null&&(b[re.key]=qe,j=!0);const tt=i.number(re.total);tt!=null&&(I[re.key]=tt,S=!0)});const C=j?Object.values(b).reduce((re,qe)=>re+qe,0):null,M=P!=null?P:null,T=(nt=i.number(["fortresslevel","fortress"]))!=null?nt:Math.round(a()*20)+30,D=(ht=i.number(["underworld","underworldlevel"]))!=null?ht:Math.round(a()*10)+20,F=(Ue=i.number(["tower","towerfloor"]))!=null?Ue:Math.round(a()*90)+10,V=(Ee=i.number(["pets","petprogress"]))!=null?Ee:Math.round(a()*50)+25,z=(E!=null?E:0)*1200+(C!=null?C:0)+Math.round((P!=null?P:0)*3200),q=i.text(_),H=q&&/[a-zA-Z]/.test(q)||q&&/%/.test(q)?q:null,K=(Rt=(ns=(Ct=(St=(He=r==null?void 0:r["Mount %"])!=null?He:r==null?void 0:r["mount %"])!=null?St:r==null?void 0:r.MountPct)!=null?Ct:r==null?void 0:r.mountPct)!=null?ns:r==null?void 0:r.MountBonus)!=null?Rt:r==null?void 0:r.mountBonus,ne=(Gt=qr(K))!=null?Gt:i.number(w),Y=H?qr((H.match(/(\d+)\s*%/)||[])[1]):null,G=ne!=null?ne:Y;let X="-";H?X=G!=null&&!/%/.test(H)?`${H} (${Math.round(G)}%)`:H:G!=null&&(X=`${Math.round(G)}%`);const te=i.text(k),se=qr(r==null?void 0:r.Rank),Z=se!=null?se:i.number(y),ve=i.text(["timestampraw"]),Se=i.number(["timestamp"]),J=ve&&/^\s*\d+\s*$/.test(ve)?(Ps=_T(qr(ve)))!=null?Ps:ve:(_t=ve!=null?ve:_T(Se))!=null?_t:"-",ue=(Ae=t.lastScanDays)!=null?Ae:Se!=null?KR(Se):null,ie=[{label:"Last Scan",value:J},{label:"Level",value:E!=null?`Lvl ${Xn(E)}`:"-"},{label:"Scrapbook",value:Vf(M)},{label:"Total Base Stats",value:C!=null?Xn(C):"-"}],me=[{label:"Mount",value:X!=null?X:"-",tone:"neutral"},{label:"Honor",value:Xn(L),tone:"success"},{label:"Gildenrolle",value:te!=null?te:"-",tone:"warning"},{label:"HoF",value:Z!=null?`#${Xn(Z)}`:"-",tone:"neutral"}],ce=j?b:void 0,he={playerName:t.name,className:t.className,guild:t.guild,server:t.server,guildIdentifier:t.guildIdentifier,guildJoined:t.guildJoined,levelLabel:E?`Level ${Xn(E)}`:void 0,lastScanLabel:(ks=bT(ue))!=null?ks:void 0,lastScanAtLabel:J!=="-"?J:void 0,lastScanDays:ue,status:ue!=null&&ue<=2?"online":"offline",metrics:ie,badges:me,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guildIdentifier,title:t.guildIdentifier?void 0:"No guild linked in latest scan."},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:o.hasData?o.config:void 0,hasPortrait:o.hasData,portraitFallbackUrl:u,portraitFallbackLabel:h,baseStats:ce,totalStats:S?I:void 0},Ne={summary:[{label:"Power Score",value:Xn(z),hint:"Level * SumBase"},{label:"Honor",value:Xn(L)},{label:"HoF Platz",value:Z?`#${Xn(Z)}`:"-"},{label:"Letzter Scan",value:(Ht=bT(ue))!=null?Ht:"-"}],attributes:v.map(re=>({label:re.label,baseLabel:Xn(i.number(re.base)),totalLabel:i.number(re.total)!=null?`Gesamt ${Xn(i.number(re.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(a()*40+40)}%`},{label:"Schatten",value:`${Math.round(a()*40+35)}%`},{label:"Frost",value:`${Math.round(a()*30+30)}%`},{label:"Licht",value:`${Math.round(a()*20+30)}%`}],resources:[{label:"Gold/h",value:`${Xn(Math.round((E!=null?E:1)*(a()*8+3)))}k`},{label:"XP/h",value:`${Xn(Math.round((E!=null?E:1)*(a()*5+2)))}k`},{label:"Mount Bonus",value:X},{label:"Quest Slots",value:`${Math.round(a()*2)+3}`}]},Te=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(M!=null?M:0)/100),targetLabel:`${Vf(M)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:M!=null&&M>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,F/100),targetLabel:`Ebene ${Math.round(F)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudebau",progress:Math.min(1,T/25),targetLabel:`Lvl ${Math.round(T)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,D/30),targetLabel:`Lvl ${Math.round(D)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,V/100),targetLabel:`${Math.round(V)} / 100`,meta:"Habitate offen"}],xe=n!=null?n:Rv([Mo(E)],[Mo(N)],[Mo(L)]),Ie=[{label:"Level",playerValue:E?`Lvl ${Xn(E)}`:"-",benchmark:E?`Lvl ${Xn(Math.round(E*.92))}`:"-",diffLabel:E?`+${Math.round(E*.08)}`:"-",trend:"up"},{label:"Power Score",playerValue:Xn(z),benchmark:Xn(Math.round(z*.9)),diffLabel:`+${Xn(Math.round(z*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:Vf(M),benchmark:`${Math.min(100,Math.round((M!=null?M:60)-8))}%`,diffLabel:M!=null?`+${Math.round(M-60)}%`:"-",trend:M!=null&&M>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(T)}`,benchmark:`Lvl ${Math.round(T-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(D)}`,benchmark:`Lvl ${Math.round(D-2)}`,diffLabel:"+2",trend:"neutral"}],$e=wse(t,i,a);return{hero:he,stats:Ne,progress:Te,charts:xe,comparison:Ie,history:$e}},wse=(t,e,n)=>{var o,c;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:nf(Math.round(n()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:nf(2),title:"Level-Up",description:`Erreichte Level ${Xn(t.level)}`,tag:"Level"}),r.push({dateLabel:nf(10),title:"Scrapbook Meilenstein",description:`${Vf((o=t.scrapbookPct)!=null?o:Math.round(n()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:nf(18),title:"Festung",description:`Fortress Level ${Math.round((c=e.number(["fortress"],Math.round(n()*20+15)))!=null?c:0)}`,tag:"Festung"}),r},nf=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function pb(){return s.jsx(Kt,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx(pse,{})})}function Du(t,e=300){const[n,r]=W.useState(t);return W.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}function Mu(t){const e=W.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[n,r]=W.useState(()=>e());return W.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=o=>r(o.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),n}const jse='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function Fu(t,e){W.useEffect(()=>{var o;if(!e)return;const n=t.current;if(!n)return;const r=()=>n.querySelectorAll(jse);(o=r()[0])==null||o.focus();const a=c=>{if(c.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],p=u[u.length-1];c.shiftKey?document.activeElement===h&&(c.preventDefault(),p.focus()):document.activeElement===p&&(c.preventDefault(),h.focus())};return n.addEventListener("keydown",a),()=>n.removeEventListener("keydown",a)},[t,e])}const Sse="_page_1jzf5_1",Nse="_header_1jzf5_13",kse="_headerStack_1jzf5_25",Cse="_kicker_1jzf5_37",Tse="_title_1jzf5_53",Ise="_subtitle_1jzf5_65",Ase="_headerActions_1jzf5_79",Ese="_secondaryAction_1jzf5_89",Rse="_infoStrip_1jzf5_131",Pse="_infoCard_1jzf5_143",Lse="_infoLabel_1jzf5_163",Dse="_inlineFilters_1jzf5_177",Mse="_filterField_1jzf5_197",Fse="_select_1jzf5_227",Bse="_searchInput_1jzf5_229",$se="_layout_1jzf5_249",Ose="_selectionColumn_1jzf5_261",Vse="_selectionCard_1jzf5_273",Use="_slotHeader_1jzf5_293",Gse="_slotLabel_1jzf5_307",zse="_slotStatus_1jzf5_323",Hse="_clearButton_1jzf5_335",Wse="_slotBody_1jzf5_355",Kse="_resultList_1jzf5_367",qse="_emptyResult_1jzf5_385",Qse="_resultItem_1jzf5_397",Yse="_resultName_1jzf5_421",Xse="_resultMeta_1jzf5_433",Jse="_selectButton_1jzf5_445",Zse="_selectedCard_1jzf5_465",ene="_selectedName_1jzf5_479",tne="_selectedMeta_1jzf5_489",sne="_selectedTagline_1jzf5_491",nne="_comparisonColumn_1jzf5_503",rne="_comparisonCard_1jzf5_515",ine="_comparisonHeader_1jzf5_535",ane="_sectionTitle_1jzf5_551",one="_diffBadge_1jzf5_561",lne="_metricGrid_1jzf5_579",cne="_metricCard_1jzf5_591",dne="_metricLabel_1jzf5_611",une="_metricValues_1jzf5_627",hne="_metricDivider_1jzf5_643",pne="_metricDelta_1jzf5_653",mne="_freshnessRow_1jzf5_665",gne="_freshnessItem_1jzf5_677",fne="_freshnessBadge_1jzf5_685",vne="_freshnessPopover_1jzf5_733",xne="_popoverTitle_1jzf5_757",yne="_classCard_1jzf5_807",bne="_classGrid_1jzf5_827",_ne="_classColumn_1jzf5_837",wne="_classBar_1jzf5_857",jne="_classSlice_1jzf5_873",Sne="_classLegend_1jzf5_907",Nne="_emptyState_1jzf5_931",kne="_supportPanels_1jzf5_947",Cne="_checklistCard_1jzf5_959",Tne="_infoCardExtended_1jzf5_961",Ine="_checklist_1jzf5_959",Ane="_infoNote_1jzf5_1033",Ene="_sheetOverlay_1jzf5_1045",Rne="_sheetOpen_1jzf5_1073",Pne="_sheet_1jzf5_1045",Lne="_sheetHeader_1jzf5_1105",Dne="_sheetBody_1jzf5_1119",pe={page:Sse,header:Nse,headerStack:kse,kicker:Cse,title:Tse,subtitle:Ise,headerActions:Ase,secondaryAction:Ese,infoStrip:Rse,infoCard:Pse,infoLabel:Lse,inlineFilters:Dse,filterField:Mse,select:Fse,searchInput:Bse,layout:$se,selectionColumn:Ose,selectionCard:Vse,slotHeader:Use,slotLabel:Gse,slotStatus:zse,clearButton:Hse,slotBody:Wse,resultList:Kse,emptyResult:qse,resultItem:Qse,resultName:Yse,resultMeta:Xse,selectButton:Jse,selectedCard:Zse,selectedName:ene,selectedMeta:tne,selectedTagline:sne,comparisonColumn:nne,comparisonCard:rne,comparisonHeader:ine,sectionTitle:ane,diffBadge:one,metricGrid:lne,metricCard:cne,metricLabel:dne,metricValues:une,metricDivider:hne,metricDelta:pne,freshnessRow:mne,freshnessItem:gne,freshnessBadge:fne,freshnessPopover:vne,popoverTitle:xne,classCard:yne,classGrid:bne,classColumn:_ne,classBar:wne,classSlice:jne,classLegend:Sne,emptyState:Nne,supportPanels:kne,checklistCard:Cne,infoCardExtended:Tne,checklist:Ine,infoNote:Ane,sheetOverlay:Ene,sheetOpen:Rne,sheet:Pne,sheetHeader:Lne,sheetBody:Dne},XR=["Ari","Borin","Celeste","Doran","Lena","Nix"],Mne={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},uj={raid:"Raid",event:"Event",task:"Task"},hj={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},wT={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},jT={urgent:4,high:3,medium:2,low:1},Fne={"7d":7,"30d":30,"90d":90,all:null},mb={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},Bne=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:kc(5,20),createdAt:$r(2,14),updatedAt:$r(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:af(3),nextUpdateAt:rf(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:kc(2,12),createdAt:$r(4,9),updatedAt:$r(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:af(8),nextUpdateAt:rf(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:kc(7,17),createdAt:$r(1,10),updatedAt:$r(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:af(22),nextUpdateAt:rf(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:$r(1,19),createdAt:$r(9,10),updatedAt:$r(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:$r(1,19),nextUpdateAt:kc(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:kc(12,18),createdAt:$r(6,15),updatedAt:$r(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:af(1),nextUpdateAt:rf(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:kc(18,13),createdAt:$r(12,18),updatedAt:$r(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:$r(2,16),nextUpdateAt:kc(4,9)}];function kc(t,e=12){const n=new Date;return n.setDate(n.getDate()+t),n.setHours(e,0,0,0),n.toISOString()}function rf(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function $r(t,e=12){const n=new Date;return n.setDate(n.getDate()-t),n.setHours(e,0,0,0),n.toISOString()}function af(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function ST(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function $ne(t,e,n){const r=Date.now(),i=Fne[e.range];return t.filter(a=>{const o=n===""||a.title.toLowerCase().includes(n.toLowerCase())||a.description.toLowerCase().includes(n.toLowerCase()),c=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let p=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),y=r+i*24*60*60*1e3;p=g<=y}return o&&c&&u&&h&&p})}function One(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"dueAt":o=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":o=jT[i.priority]-jT[a.priority];break;case"title":o=i.title.localeCompare(a.title);break;default:o=0}return n==="asc"?o:-o}),r}function Vne(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function to(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function jm(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function Wp(t,e){const n=new Date(t).getTime()-e;if(n<=0)return"faellig";const r=Math.floor(n/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function Une(t){return t.length===0?null:t.reduce((e,n)=>e?wT[n.freshness]>wT[e.freshness]?n:e:n,null)}const H1=["EU-01","EU-02","US-01","US-02","ASIA-01"],yp=new Intl.NumberFormat("de-DE");function Gne(){const t=Mu("(min-width: 768px)"),[e,n]=W.useState("all"),[r,i]=W.useState(null),[a,o]=W.useState(null),[c,u]=W.useState(null),[h,p]=W.useState(null),g=[r,a].filter(Boolean).length,y=W.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const D=T.reduce((F,V)=>{var z;return F+((z=V.level)!=null?z:0)},0);return Math.round(D/T.length)},[c,h]),[_,w]=W.useState(null),[k,E]=W.useState(!1),P=W.useRef(null);Fu(P,k&&!t),W.useEffect(()=>{t&&E(!1)},[t]),W.useEffect(()=>{if(!_)return;const T=F=>{const V=F.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||w(null))},D=F=>{F.key==="Escape"&&w(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",D),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",D)}},[_]);const L=W.useMemo(()=>c?Wp(c.nextUpdateAt,Date.now()):"",[c]),N=W.useMemo(()=>h?Wp(h.nextUpdateAt,Date.now()):"",[h]),v=()=>E(!0),b=()=>E(!1),I=T=>{n(T)},j=(T,D)=>{T==="playerA"?(i(D.id),u(D)):(o(D.id),p(D))},S=T=>{T==="playerA"?(i(null),u(null)):(o(null),p(null))},C=T=>{w(D=>D===T?null:T)},M=c&&h;return s.jsxs(Kt,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Players"}),s.jsx("h1",{className:pe.title,children:"Spieler vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:v,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Slots gefuellt"}),s.jsxs("strong",{children:[yp.format(g)," Spieler"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnittslevel"}),s.jsx("strong",{children:yp.format(y)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>I(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),H1.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(NT,{title:"Spieler A",slot:"playerA",selectedPlayer:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:I}),s.jsx(NT,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:I})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Level: ",yp.format(c.level-h.level)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(kT,{label:"Level",aValue:c.level,bValue:h.level}),s.jsx(kT,{label:"Scrapbook (%)",aValue:c.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),s.jsx(zne,{playerA:c,playerB:h,countdownA:L,countdownB:N,activePopover:_,onToggle:C})]}),s.jsx(Hne,{playerA:c,playerB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(Wne,{}),s.jsx(Kne,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:P,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:b,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>I(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),H1.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function NT({title:t,slot:e,selectedPlayer:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=W.useState(""),p=Du(u,300);W.useEffect(()=>{h("")},[n,o]);const{results:g,loading:y}=qne(p,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:_=>c(_.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),H1.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:_=>h(_.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[y&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!y&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Kein Spieler gefunden."}),!y&&g.map(_=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:_.name}),s.jsxs("p",{className:pe.resultMeta,children:[_.server," - Level ",_.level," - ",_.className]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,_),children:"Waehlen"})]},_.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - Level ",n.level," - ",n.className," -"," ",n.guildName||"ohne Gilde"]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function kT({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):yp.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):yp.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Spieler A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Spieler B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function zne({playerA:t,playerB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:jm(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:hj[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:to(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[to(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function Hne({playerA:t,playerB:e}){const n=W.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:i.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(o=>s.jsxs("span",{style:{width:`${o.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:o.label}),s.jsxs("strong",{children:[o.percent,"%"]})]},`${i.id}-${o.label}`))})]})};return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Stat-Verteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r)}),n.length>0&&s.jsx("ul",{className:pe.classLegend,children:n.map(i=>s.jsx("li",{children:i},i))})]})}function Wne(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function Kne(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Matchup-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function qne(t,e,n){const[r,i]=W.useState([]),[a,o]=W.useState(!1);return W.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const p=In("PlayersCompare:search");o(!0);try{const g=c.toLowerCase(),y=hm(ft,"latest"),_=await yn(p,{path:"players/latest (collectionGroup)"},()=>xn(Tn(y,Pi("nameFold"),Dl(g),Ml(g+""),sr(15)))),w=await yn(p,{path:"players/latest (collectionGroup)"},()=>xn(Tn(y,gi("nameNgrams","array-contains",g),sr(15)))),k=new Set,E=[],P=L=>{var K,ne,Y,G,X,te,se,Z,ve,Se,J,ue,ie,me,ce,he,Ne,Te,xe,Ie,$e,Xe,be,Be,Ve,nt,ht,Ue,Ee;const N=L.data(),b=(K=L.ref.parent)==null?void 0:K.parent,I=b==null?void 0:b.parent;if((I==null?void 0:I.id)!=="players")return;const S=(Y=(ne=b==null?void 0:b.id)!=null?ne:N.playerIdentifier)!=null?Y:L.id;if(!S||k.has(S)||n&&S===n)return;const C=(te=(X=N.name)!=null?X:(G=N.values)==null?void 0:G.Name)!=null?te:"Unbekannter Spieler",M=(ve=(Z=N.server)!=null?Z:(se=N.values)==null?void 0:se.Server)!=null?ve:"Unknown";if(e!=="all"&&M!==e)return;const T=(me=(ie=(J=N.className)!=null?J:(Se=N.values)==null?void 0:Se.Class)!=null?ie:(ue=N.values)==null?void 0:ue.Class)!=null?me:"Unbekannte Klasse",D=(Ne=(he=N.guildName)!=null?he:(ce=N.values)==null?void 0:ce.Guild)!=null?Ne:"",F=Cl(N.level)||Cl((Te=N.values)==null?void 0:Te.Level)||Cl((xe=N.values)==null?void 0:xe.Level),V=Cl(N.scrapbookPct)||Cl((Ie=N.values)==null?void 0:Ie["Album %"])||Cl(($e=N.values)==null?void 0:$e.AlbumPct)||Cl((Xe=N.values)==null?void 0:Xe["Scrapbook %"]),z=(Ve=(Be=N.updatedAt)!=null?Be:(be=N.values)==null?void 0:be.UpdatedAt)!=null?Ve:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString(),q=(nt=N.nextUpdateAt)!=null?nt:Yne(12),H=Qne((ht=N.values)!=null?ht:N.stats);k.add(S),E.push({id:S,name:C,tagline:(Ue=N.tagline)!=null?Ue:D?`Mitglied in ${D}`:T,server:M,className:T,guildName:D,level:F||0,scrapbookPct:V,lastScanAt:z,updatedAt:z,nextUpdateAt:q,freshness:(Ee=N.freshness)!=null?Ee:"unknown",stats:H})};_.forEach(P),w.forEach(P),u||(E.sort((L,N)=>L.name.localeCompare(N.name)),i(E))}catch(g){console.error("[Players Compare] player search failed",g),u||i([])}finally{Ys(p),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const CT={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function Qne(t={}){const e=Object.keys(CT).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:CT[r],value:Cl(i)}}).filter(r=>r.value>0),n=e.reduce((r,i)=>r+i.value,0);return n?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/n*100))})):[]}function Cl(t){const e=Number(t);return Number.isFinite(e)?e:0}function Yne(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function Xne(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(TT,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),s.jsx(TT,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function TT({to:t,title:e,desc:n}){return s.jsxs(As,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Jne(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function Zne(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Guilds  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}function ere(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}const tre={freedom:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59",weltenimwandel:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",poenacapitis:"1L9RiqzxQumXOZ3e-GlG6RCGVAN1kFFBG",thevoid:"13Ud0Wap5YiSAe4tHALOS7JvpLl1g471t",legionz:"",dielegion:"1NiEnFnOglOvvhV1c-kRwIs083zETmDWIp",asylum:"1YWhfhmS6U4IPc0ydJ3ctSsXJrpKD7fg",imperium:"1Ma_Pm-ed6qgRf-4prgzC71DWn5u2nJ79",sladkydomov:"1kQkgEgpzSzi4QPwD1atWs8DNS3mcHRbE",exils1eu:"16UdoSWWP3s9xrB8qFTKDEabDsOrCHFL7"};function sre(t){var n;const e=ere(t);return(n=tre[e])!=null?n:null}function nre(t,e=128){var a,o;const n=sre(t);if(!n)return{id:null,url:null,thumb:null,fallback:""};const r=(a=rd(n))!=null?a:null,i=r&&(o=vi(r,e))!=null?o:null;return{id:n,url:r,thumb:i,fallback:""}}function Kp(t,e=128){return nre(t,e).thumb}const hd={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},Mx=(t,e)=>({...t||{},...e||{}}),IT=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),n=Math.floor((Date.now()-e.getTime())/864e5);return n<=0?"today":n===1?"yesterday":`${n}d ago`},rre=t=>Object.values(t||{}).reduce((e,n)=>e+(n||0),0),hr=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function ire(t){var y,_,w,k,E,P,L,N;const e=hr(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const n=hr(t==null?void 0:t.baseMain),r=hr(t==null?void 0:t.conBase);if(n!=null&&r!=null)return n+r;const i=(t==null?void 0:t.baseStats)||{},a=hr(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const o=hr(i==null?void 0:i.main),c=hr(i==null?void 0:i.con);if(o!=null&&c!=null)return o+c;const u=(t==null?void 0:t.values)||{},h=(_=(y=hr(u==null?void 0:u.SumBaseTotal))!=null?y:hr(u==null?void 0:u.sumBaseTotal))!=null?_:hr(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const p=(E=(k=(w=hr(u==null?void 0:u.Main))!=null?w:hr(u==null?void 0:u.main))!=null?k:hr(u==null?void 0:u.BaseMain))!=null?E:hr(u==null?void 0:u.baseMain),g=(N=(L=(P=hr(u==null?void 0:u.Con))!=null?P:hr(u==null?void 0:u.con))!=null?L:hr(u==null?void 0:u.ConBase))!=null?N:hr(u==null?void 0:u.conBase);return p!=null&&g!=null?p+g:null}function Cc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function are(t,e=56){if(!t)return;const n=Cc(t),r=rr.find(i=>Cc(i.label)===n||Cc(i.key)===n)||rr.find(i=>Cc(i.label).startsWith(n)||n.startsWith(Cc(i.label))||Cc(i.key).startsWith(n)||n.startsWith(Cc(i.key)));return r?vi(r.iconUrl,e):void 0}function ore({name:t,memberClass:e,online:n,theme:r=hd}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=are(e,56);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const lre={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},cre=({role:t})=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(lre[t]||""),children:t});function AT(t,e){const n=(t!=null?t:"").trim();if(n)return n;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function dre(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,n=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:n!=null&&r!=null?n+r:null;return i!=null?i.toLocaleString("de-DE"):""}function of({label:t,value:e,theme:n=hd}){return s.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:n.border,background:n.tile},children:[s.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),s.jsx("div",{className:"text-lg font-semibold",style:{color:n.title},children:e})]})}function ure({member:t,theme:e,actions:n,extraKPIs:r}){var p,g,y,_,w,k,E,P,L;if(!t)return null;const i=Mx(hd,e),a=t,o=AT((g=(p=a.guildJoined)!=null?p:a.joinedAt)!=null?g:null,(y=a.guildJoinedMs)!=null?y:null),c=AT((_=a.lastActivity)!=null?_:null,(w=a.lastActivityMs)!=null?w:typeof a.lastOnline=="number"?a.lastOnline:null),u=dre(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return s.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),s.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[s.jsx("div",{className:"shrink-0",children:s.jsx(ore,{name:t.name,memberClass:(P=(E=a.class)!=null?E:(k=a.values)==null?void 0:k.Class)!=null?P:null,online:a.online,theme:i})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&s.jsx(cre,{role:a.role})]}),s.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",o,"  Last ",c]})]}),s.jsx("div",{className:"ml-auto",children:n})]}),s.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(of,{label:"Level",value:(L=a.level)!=null?L:"",theme:i}),typeof a.scrapbook=="number"&&s.jsx(of,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),s.jsx(of,{label:"Sum Base",value:u,theme:i}),s.jsx(of,{label:"Total Stats",value:h,theme:i}),r]})]})}function Tc(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function hre(t,e=40){if(!t)return;const n=Tc(t);let r=rr.find(i=>Tc(i.label)===n||Tc(i.key)===n)||rr.find(i=>Tc(i.label).startsWith(n)||n.startsWith(Tc(i.label))||Tc(i.key).startsWith(n)||n.startsWith(Tc(i.key)));return r?vi(r.iconUrl,e):void 0}function pre({name:t,memberClass:e,online:n,theme:r=hd}){const i=t.split("_").map(o=>o[0]).join("").slice(0,2).toUpperCase(),a=hre(e,40);return s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:o=>{const c=o.currentTarget.parentElement;c&&(c.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),n&&s.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const mre=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function gre({rows:t,selId:e,onSelect:n,rightCols:r,theme:i}){const a=Mx(hd,i);return s.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[s.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),s.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[s.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((o,c)=>{var u,h,p;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(c%2?"bg-slate-800/10":"")+(o.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[s.jsx(pre,{name:o.name,memberClass:(p=(h=o.class)!=null?h:(u=o.values)==null?void 0:u.Class)!=null?p:null,online:o.online,theme:a}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[o.class,o.server?`  ${o.server}`:""]})]}),s.jsx("div",{className:"justify-self-end",children:s.jsx(mre,{role:o.role})}),r(o)]},o.id)})]})]})}function Ic(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function fre(t,e=40){if(!t)return;const n=Ic(t);let r=rr.find(i=>Ic(i.label)===n||Ic(i.key)===n)||rr.find(i=>Ic(i.label).startsWith(n)||n.startsWith(Ic(i.label))||Ic(i.key).startsWith(n)||n.startsWith(Ic(i.key)));return r?vi(r.iconUrl,e):void 0}function vre({rows:t,selId:e,onSelect:n,footer:r,theme:i}){const a=Mx(hd,i);return s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(o=>{var y,_,w,k,E,P,L,N,v;const c=o,u=o.name.slice(0,2).toUpperCase(),h=fre((w=(_=c.class)!=null?_:(y=c.values)==null?void 0:y.Class)!=null?w:null,40),p=typeof c.level=="number"?c.level:typeof((k=c.values)==null?void 0:k.Level)=="number"?c.values.Level:"",g=typeof c.scrapbook=="number"?`${c.scrapbook}%`:typeof((E=c.values)==null?void 0:E.Scrapbook)=="number"?`${c.values.Scrapbook}%`:null;return s.jsxs("button",{onClick:()=>n(o.id),"aria-pressed":o.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(o.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:o.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h?s.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:b=>{const I=b.currentTarget.parentElement;I&&(I.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):s.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:o.name}),s.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(N=(L=c.class)!=null?L:(P=c.values)==null?void 0:P.Class)!=null?N:"",c.server?`  ${c.server}`:""]})]}),s.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(v=c.role)!=null?v:""})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:p})]}),g&&s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),s.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),s.jsx("div",{className:"mt-3",children:r(o)})]},o.id)})})}const xre=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(n=>{const r=t[n];typeof r=="number"&&(e[n]=r)}),Object.keys(e).length?e:void 0};function yre({members:t,defaultView:e="list",defaultQuery:n="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:o,renderActions:c,renderKPIs:u,theme:h}){var M;const p=R.useMemo(()=>Mx(hd,h),[h]),[g,y]=R.useState(e),[_,w]=R.useState(n),[k,E]=R.useState(r.key),[P,L]=R.useState(r.dir),[N,v]=R.useState((M=t[0])==null?void 0:M.id),b=a!=null?a:N,I=T=>{a||v(T);const D=t.find(F=>F.id===T);D&&o&&o(D)},j=R.useMemo(()=>{const T=_.trim().toLowerCase();return T?t.filter(D=>D.name.toLowerCase().includes(T)||D.class.toLowerCase().includes(T)||String(D.role).toLowerCase().includes(T)):t},[t,_]),S=R.useMemo(()=>{const T=P==="asc"?1:-1,D=F=>{var V,z;switch(k){case"sumBaseStats":{const q=ire(F);return q==null?-1/0:q}case"totalStats":return(z=(V=F.totalStats)!=null?V:rre(xre(F.baseStats)))!=null?z:-1/0;default:return F[k]}};return[...j].sort((F,V)=>{const z=D(F),q=D(V);return z===q?0:z>q?T:-T})},[j,k,P]),C=R.useMemo(()=>S.find(T=>T.id===b)||S[0],[S,b]);return s.jsxs("div",{children:[i&&s.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:p.tile,borderColor:p.border},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"View"}),s.jsxs("select",{value:g,onChange:T=>y(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[s.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),s.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Search"}),s.jsx("input",{value:_,onChange:T=>w(T.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:p.border}})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Sort by"}),s.jsxs("select",{value:String(k),onChange:T=>E(T.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[s.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),s.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),s.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),s.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),s.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),s.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),s.jsx("button",{onClick:()=>L(T=>T==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:p.border},children:P==="asc"?"":""})]})]}),s.jsx(ure,{member:C,actions:C&&(c?c(C):s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Profile"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Compare"}),s.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Message"})]})),extraKPIs:C&&u?u(C):null,theme:p}),g==="list"?s.jsx(gre,{rows:S,selId:b,onSelect:I,theme:p,rightCols:T=>{var D;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-right text-sm",children:(D=T.level)!=null?D:""}),s.jsx("div",{className:"text-right text-xs",style:{color:p.sub},children:IT(T.lastOnline)})]})}}):s.jsx(vre,{rows:S,selId:b,onSelect:I,theme:p,footer:T=>s.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:p.sub},children:s.jsxs("span",{children:["Last ",IT(T.lastOnline)]})})})]})}function bre({guildName:t,server:e,emblemUrl:n,lastScanISO:r,members:i,avgLevel:a,totalPower:o,activity7d:c,topClasses:u,tickerItems:h,href:p,onClick:g,className:y}){const _=!!xR(),w=R.useMemo(()=>{if(!r)return null;const D=Date.now()-new Date(r).getTime(),F=Math.max(0,Math.floor(D/6e4));if(F<60)return`${F}m`;const V=Math.floor(F/60);return V<24?`${V}h`:`${Math.floor(V/24)}d`},[r]),k=np(0),E=np(0),P=np(0),L=np(0),N=Xg(k,D=>Math.round(D).toString()),v=Xg(E,D=>Math.round(D).toString()),b=Xg(P,D=>Math.round(D).toLocaleString()),I=Xg(L,D=>`${Math.round(D)}%`);R.useEffect(()=>{const D=_?0:.6;if(D===0){k.set(i),E.set(a),P.set(o!=null?o:0),L.set(c!=null?c:0);return}const F=[Jg(k,i,{duration:D}),Jg(E,a,{duration:D}),Jg(P,o!=null?o:0,{duration:D}),Jg(L,c!=null?c:0,{duration:D})];return()=>F.forEach(V=>V.stop())},[i,a,o,c,_]);const j=R.useRef(null);R.useEffect(()=>{if(_||!j.current)return;const D=j.current;let F=0,V=0;const z=()=>{V+=.016;const q=V*14%140-20;D.style.setProperty("--s-x",`${q}%`),F=requestAnimationFrame(z)};return F=requestAnimationFrame(z),()=>cancelAnimationFrame(F)},[_]);const S={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},C=100,M=p?"a":"div",T=p?{href:p}:{onClick:g};return s.jsxs(M,{...T,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",y!=null?y:""].join(" "),style:{background:`linear-gradient(135deg, ${S.bgFrom}, ${S.bgTo})`},children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),s.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[s.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[n?s.jsx("img",{src:n,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):s.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:s.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),s.jsx("div",{ref:j,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),w&&s.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:S.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${S.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",w]}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${C}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),s.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${C}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${C}deg, transparent 0 46px, ${S.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),s.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[s.jsx("h3",{className:"truncate font-extrabold",style:{color:S.title,fontSize:22},children:t}),s.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:S.soft,border:`1px solid ${S.border}`},children:e})]}),s.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[s.jsx(lf,{label:"Members",value:N}),s.jsx(lf,{label:" Level",value:v}),s.jsx(lf,{label:"Total Power",value:b}),typeof c=="number"&&s.jsx(lf,{label:"Activity (7d)",value:I})]}),u!=null&&u.length?s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:S.soft},children:"Top Classes"}),u.slice(0,3).map(D=>s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${S.border}`,color:S.text},children:[D.iconUrl?s.jsx("img",{src:D.iconUrl,alt:D.key,className:"h-4 w-4 object-contain"}):s.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:S.accent,opacity:.85}}),s.jsxs("span",{className:"text-xs",children:[D.key," ",s.jsxs("span",{className:"opacity-70",children:["(",Math.round(D.percent),"%)"]})]})]},D.key))]}):null]})]})]}),h!=null&&h.length?s.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${S.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:s.jsx(_re,{items:h,muted:_,color:S.soft})}):null]})}function lf({label:t,value:e}){return s.jsxs("div",{className:"relative z-10 min-w-0",children:[s.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),s.jsx(fR.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function _re({items:t,muted:e,color:n}){const r=R.useRef(null);return R.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,o=0;const c=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,o=requestAnimationFrame(c)};return o=requestAnimationFrame(c),()=>cancelAnimationFrame(o)},[e]),s.jsx("div",{className:"overflow-hidden",children:s.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:n},children:t.concat(t).map((i,a)=>s.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const wre="_wrap_q5gkc_53",jre="_banner_q5gkc_59",Sre="_bannerRowTop_q5gkc_61",Nre="_bannerStripe_q5gkc_71",kre="_bannerTitle_q5gkc_79",Cre="_bannerRowBottom_q5gkc_93",Tre="_bannerSub_q5gkc_95",Ire="_monthPickerWrap_q5gkc_101",Are="_monthPickerLabel_q5gkc_113",Ere="_monthPicker_q5gkc_101",Rre="_monthButton_q5gkc_131",Pre="_monthButtonText_q5gkc_159",Lre="_chev_q5gkc_161",Dre="_monthList_q5gkc_165",Mre="_monthOption_q5gkc_195",Fre="_monthBadge_q5gkc_221",Bre="_gridRow_q5gkc_237",$re="_gridRowBottom_q5gkc_239",Ore="_sideImage_q5gkc_253",Vre="_sideImagePh_q5gkc_271",Ure="_emblemPanel_q5gkc_275",Gre="_emblemFrame_q5gkc_295",zre="_emblemImg_q5gkc_297",Hre="_emblemPlaceholder_q5gkc_299",Wre="_emblemShimmer_q5gkc_307",Kre="_emblemCaption_q5gkc_315",qre="_card_q5gkc_319",Qre="_cardHeader_q5gkc_331",Yre="_cardTitle_q5gkc_339",Xre="_cardSubtitle_q5gkc_341",Jre="_headerRight_q5gkc_343",Zre="_cardBody_q5gkc_345",eie="_tableWrap_q5gkc_349",tie="_tableTitle_q5gkc_351",sie="_table_q5gkc_349",nie="_th_q5gkc_355",rie="_td_q5gkc_355",iie="_tdEmpty_q5gkc_365",aie="_sectionDivider_q5gkc_375",oie="_sectionStripe_q5gkc_389",lie="_sectionTitle_q5gkc_397",zt={wrap:wre,banner:jre,bannerRowTop:Sre,bannerStripe:Nre,bannerTitle:kre,bannerRowBottom:Cre,bannerSub:Tre,monthPickerWrap:Ire,monthPickerLabel:Are,monthPicker:Ere,monthButton:Rre,monthButtonText:Pre,chev:Lre,monthList:Dre,monthOption:Mre,monthBadge:Fre,gridRow:Bre,gridRowBottom:$re,sideImage:Ore,sideImagePh:Vre,emblemPanel:Ure,emblemFrame:Gre,emblemImg:zre,emblemPlaceholder:Hre,emblemShimmer:Wre,emblemCaption:Kre,card:qre,cardHeader:Qre,cardTitle:Yre,cardSubtitle:Xre,headerRight:Jre,cardBody:Zre,tableWrap:eie,tableTitle:tie,table:sie,th:nie,td:rie,tdEmpty:iie,sectionDivider:aie,sectionStripe:oie,sectionTitle:lie};function cie(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function ET(t,e="de-DE"){const n=new Date(t);return Number.isNaN(n.getTime())?"":n.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const RT=({title:t,subtitle:e,children:n,rightBadge:r})=>s.jsxs("section",{className:zt.card,children:[(t||e||r)&&s.jsxs("header",{className:zt.cardHeader,children:[s.jsxs("div",{className:zt.headerTitles,children:[t&&s.jsx("h3",{className:zt.cardTitle,children:t}),e&&s.jsx("div",{className:zt.cardSubtitle,children:e})]}),r&&s.jsx("div",{className:zt.headerRight,children:r})]}),s.jsx("div",{className:zt.cardBody,children:n})]}),PT=({block:t})=>{var r,i;const e=t.columns,n=(r=t.rows)!=null?r:[];return s.jsxs("div",{className:zt.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&s.jsx("div",{className:zt.tableTitle,children:t.title}),s.jsxs("table",{className:zt.table,children:[s.jsx("thead",{children:s.jsx("tr",{children:e.map(a=>s.jsx("th",{className:zt.th,style:{width:a.width},children:a.label},a.key))})}),s.jsx("tbody",{children:n.length===0?s.jsx("tr",{children:s.jsx("td",{className:zt.tdEmpty,colSpan:e.length,children:"No data"})}):n.map((a,o)=>{var c;return s.jsx("tr",{children:e.map(u=>{var y;const h=a[u.key],p=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?cie(p):p;return s.jsx("td",{className:zt.td,"data-align":(y=u.align)!=null?y:"left",children:u.render?u.render(a):g},u.key)})},(c=a.id)!=null?c:o)})})]}),t.footer&&s.jsx("div",{className:zt.tableFooter,children:t.footer})]})},die=(t,e)=>{R.useEffect(()=>{function n(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[t,e])},uie=({months:t,currentKey:e,onChange:n,fallbackDate:r})=>{var p;if(!(Array.isArray(t)&&t.length>0&&e))return s.jsx("div",{className:zt.bannerSub,children:r!=null?r:""});const a=R.useRef(null),[o,c]=R.useState(!1);die(a,()=>c(!1));const u=t.find(g=>g.key===e),h=u?`${ET(u.fromISO)}${ET(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return s.jsxs("div",{className:zt.monthPickerWrap,children:[s.jsx("div",{className:zt.monthPickerLabel,children:"Monat"}),s.jsxs("div",{className:zt.monthPicker,ref:a,children:[s.jsxs("button",{type:"button",className:zt.monthButton,onClick:()=>c(g=>!g),"aria-haspopup":"listbox","aria-expanded":o,children:[s.jsx("span",{className:zt.monthButtonText,children:(p=u==null?void 0:u.label)!=null?p:""}),s.jsx("svg",{className:zt.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),o&&s.jsx("ul",{className:zt.monthList,role:"listbox",children:t.map(g=>s.jsx("li",{children:s.jsx("button",{type:"button",className:zt.monthOption,onClick:()=>{c(!1),n==null||n(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&s.jsx("span",{className:zt.monthBadge,children:h})]})},hie=({title:t,monthRange:e,months:n,currentMonthKey:r,onMonthChange:i})=>s.jsxs("div",{className:zt.banner,children:[s.jsxs("div",{className:zt.bannerRowTop,children:[s.jsx("div",{className:zt.bannerStripe}),s.jsx("div",{className:zt.bannerTitle,children:t}),s.jsx("div",{className:zt.bannerStripe})]}),s.jsx("div",{className:zt.bannerRowBottom,children:s.jsx(uie,{months:n,currentKey:r,onChange:i,fallbackDate:e})})]}),pie=({emblemUrl:t,caption:e})=>s.jsxs("div",{className:zt.emblemPanel,children:[s.jsxs("div",{className:zt.emblemFrame,children:[t?s.jsx("img",{src:t,alt:"Guild Emblem",className:zt.emblemImg}):s.jsx("div",{className:zt.emblemPlaceholder,children:"Emblem"}),s.jsx("div",{className:zt.emblemShimmer})]}),e&&s.jsx("div",{className:zt.emblemCaption,children:e})]}),LT=({imgUrl:t,alt:e})=>s.jsx("div",{className:zt.sideImage,children:t?s.jsx("img",{src:t,alt:e!=null?e:"side"}):s.jsx("div",{className:zt.sideImagePh,children:"Image"})}),gb=({children:t,className:e})=>s.jsx("div",{className:`${zt.gridRow} ${e!=null?e:""}`,children:t}),mie=({children:t})=>s.jsxs("div",{className:zt.sectionDivider,children:[s.jsx("div",{className:zt.sectionStripe}),s.jsx("div",{className:zt.sectionTitle,children:t}),s.jsx("div",{className:zt.sectionStripe})]}),gie=({data:t,onMonthChange:e})=>{const{header:n,panels:r,tablesTop:i,tablesBottom:a}=t;return s.jsxs("div",{className:zt.wrap,children:[s.jsx(hie,{title:n.title,monthRange:n.monthRange,months:n.months,currentMonthKey:n.currentMonthKey,onMonthChange:e}),s.jsxs(gb,{children:[s.jsx(LT,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),s.jsx(pie,{emblemUrl:n.emblemUrl,caption:n.centerCaption}),s.jsx(LT,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),s.jsx(gb,{children:i.map((o,c)=>s.jsx(RT,{title:o.title,subtitle:o.subtitle,children:s.jsx(PT,{block:o})},c))}),s.jsx(mie,{children:"Guild Overview"}),s.jsx(gb,{className:zt.gridRowBottom,children:a.map((o,c)=>s.jsx(RT,{title:o.title,subtitle:o.subtitle,children:s.jsx(PT,{block:o})},c))})]})},fie=({guildId:t,guildName:e,guildServer:n})=>{const[r,i]=R.useState(!0),[a,o]=R.useState(null),[c,u]=R.useState(void 0),h=R.useRef({}),[p,g]=R.useState(()=>cf(e,n));R.useEffect(()=>{let _=!1;async function w(){var E,P,L,N,v;const k=In("GuildMonthly:months");i(!0);try{const b=Go(ft,`guilds/${t}/history_monthly`),I=await yn(k,{path:b.path},()=>xn(b)),j=[];for(const M of I.docs){const T=M.id,D=M.data();if(!D)continue;h.current[T]=D;const F=(E=D==null?void 0:D.meta)!=null?E:{},V=F.fromISO||F.baselineISO||F.firstISO||"",z=F.toISO||F.latestISO||F.nowISO||"",q=Number((P=F.daysSpan)!=null?P:Math.floor((+new Date(z)-+new Date(V))/864e5))||0,H=!!((N=(L=D==null?void 0:D.status)==null?void 0:L.available)!=null?N:V&&z&&q<=40),K=F.label||new Date(T+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});j.push({key:T,label:K,fromISO:V||new Date(T+"-01").toISOString(),toISO:z||new Date(T+"-28").toISOString(),daysSpan:q,available:H,reason:H||(v=D==null?void 0:D.status)==null?void 0:v.reason})}if(j.sort((M,T)=>M.key<T.key?1:-1),_)return;if(j.length===0){o(null),u(void 0),g(cf(e,n)),i(!1);return}o(j);const S=j[0].key;u(S);const C=h.current[S];g(DT(C,{guildName:e,guildServer:n,currentMonthKey:S,months:j}))}catch(b){console.error(b),o(null),u(void 0),g(cf(e,n))}finally{Ys(k),_||i(!1)}}return w(),()=>{_=!0}},[t,e,n]);async function y(_){u(_);let w=h.current[_];if(!w){const k=In("GuildMonthly:monthDoc");try{const E=ss(ft,`guilds/${t}/history_monthly/${_}`),P=await bn(k,E,()=>sn(E));P.exists()?(w=P.data(),h.current[_]=w):w=null}catch(E){console.error(E),w=null}finally{Ys(k)}}if(!w){g(cf(e,n,{currentMonthKey:_,months:a!=null?a:void 0}));return}g(DT(w,{guildName:e,guildServer:n,currentMonthKey:_,months:a!=null?a:void 0}))}return s.jsx(gie,{data:p,onMonthChange:y})};function cf(t,e,n){return{header:{title:`${t}  Monthly Progress`,monthRange:"-",emblemUrl:Kp(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:n==null?void 0:n.currentMonthKey,months:n==null?void 0:n.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[Ac("Most Base Stats gained",e?`Server ${e}`:void 0),Ac("Sum Base Stats"),Ac("Highest Base Stats")],tablesBottom:[Ac("Main & Con"),Ac("Sum Base Stats"),Ac("Highest Base Stats"),Ac("Highest Total Stats")]}}function Ac(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function DT(t,e){var o,c,u,h,p,g,y,_;(o=t==null?void 0:t.meta)!=null;const n={title:`${e.guildName}  Monthly Progress`,monthRange:void 0,emblemUrl:Kp(e.guildName,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"",width:70,align:"right",format:"num"}],rows:((c=t==null?void 0:t.mostBaseGained)!=null?c:[]).map((w,k)=>{var E,P,L,N,v,b,I,j;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",level:(N=(L=w.levelLatest)!=null?L:w.level)!=null?N:null,base:(b=(v=w.baseLatest)!=null?v:w.base)!=null?b:null,delta:(j=(I=w.baseDelta)!=null?I:w.delta)!=null?j:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((w,k)=>{var E,P,L,N,v,b,I;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",base:(L=w.base)!=null?L:null,stam:(v=(N=w.stamDelta)!=null?N:w.staminaDelta)!=null?v:null,sho:(I=(b=w.shoDelta)!=null?b:w.shootingDelta)!=null?I:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((w,k)=>{var E,P,L,N,v;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",stats:(N=(L=w.stats)!=null?L:w.base)!=null?N:null,delta:(v=w.delta)!=null?v:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((p=t==null?void 0:t.mainAndCon)!=null?p:[]).map((w,k)=>{var E,P,L,N,v,b;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",class:(N=(L=w.class)!=null?L:w.className)!=null?N:"",stats:(v=w.stats)!=null?v:null,delta:(b=w.delta)!=null?b:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((w,k)=>{var E,P,L,N,v;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",base:(L=w.base)!=null?L:null,stam:(N=w.stamDelta)!=null?N:null,sho:(v=w.shoDelta)!=null?v:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((y=t==null?void 0:t.highestBaseStats)!=null?y:[]).map((w,k)=>{var E,P,L,N;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",stats:(L=w.stats)!=null?L:null,delta:(N=w.delta)!=null?N:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((_=t==null?void 0:t.highestTotalStats)!=null?_:[]).map((w,k)=>{var E,P,L,N;return{id:(E=w.playerId)!=null?E:k,rank:k+1,name:(P=w.name)!=null?P:"-",total:(L=w.total)!=null?L:null,delta:(N=w.delta)!=null?N:null}})}];return{header:n,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const vie="_root_r1uj3_5",xie="_sectionDivider_r1uj3_17",yie="_sectionStripe_r1uj3_31",bie="_sectionTitle_r1uj3_33",Oh={root:vie,sectionDivider:xie,sectionStripe:yie,sectionTitle:bie},_ie="_root_4jywc_1",wie="_accent_4jywc_31",MT={root:_ie,default:"_default_4jywc_29",accent:wie};function Yl({text:t,tone:e="default",className:n}){return s.jsx("div",{className:`${MT.root} ${MT[e]} ${n!=null?n:""}`.trim(),children:t})}const jie="_card_vvv3s_3",Sie="_wrap_vvv3s_31",Nie="_divider_vvv3s_45",kie="_rows_vvv3s_77",Cie="_row_vvv3s_77",Tie="_left_vvv3s_109",Iie="_label_vvv3s_111",Aie="_avgHead_vvv3s_113",Eie="_avgNum_vvv3s_115",Rie="_top3_vvv3s_121",Pie="_chip_vvv3s_123",Lie="_badge_vvv3s_151",Die="_name_vvv3s_159",Mie="_score_vvv3s_161",Fie="_headerSpacer_vvv3s_167",Gr={card:jie,wrap:Sie,divider:Nie,rows:kie,row:Cie,left:Tie,label:Iie,avgHead:Aie,avgNum:Eie,top3:Rie,chip:Pie,badge:Lie,name:Die,score:Mie,headerSpacer:Fie};function Bie({name:t,value:e,classLabel:n,colors:r}){const i=kx(n,64);return s.jsxs("div",{className:Gr.chip,children:[s.jsx("span",{className:Gr.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:Gr.name,children:t!=null?t:""}),s.jsx("span",{className:Gr.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function $ie({snapshot:t,colors:e,title:n="Base Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var p,g;return((p=h[c])!=null?p:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return s.jsxs("div",{className:Gr.card,children:[s.jsx(Yl,{text:n}),s.jsx("div",{className:Gr.headerSpacer}),s.jsxs("div",{className:Gr.wrap,children:[s.jsx("div",{className:Gr.divider}),s.jsx("div",{className:Gr.rows,children:a.map((c,u)=>s.jsxs("div",{className:Gr.row,children:[s.jsxs("div",{className:Gr.left,children:[s.jsx("div",{className:Gr.label,children:c.label}),s.jsx("div",{className:Gr.avgHead,children:""}),s.jsx("div",{className:Gr.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:Gr.top3,children:c.list.map((h,p)=>s.jsx(Bie,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}const Oie="_card_1enwc_1",Vie="_wrap_1enwc_1",Uie="_divider_1enwc_1",Gie="_rows_1enwc_1",zie="_row_1enwc_1",Hie="_left_1enwc_1",Wie="_label_1enwc_1",Kie="_avgHead_1enwc_1",qie="_avgNum_1enwc_1",Qie="_top3_1enwc_1",Yie="_chip_1enwc_1",Xie="_badge_1enwc_1",Jie="_name_1enwc_1",Zie="_score_1enwc_1",eae="_headerSpacer_1enwc_1",zr={card:Oie,wrap:Vie,divider:Uie,rows:Gie,row:zie,left:Hie,label:Wie,avgHead:Kie,avgNum:qie,top3:Qie,chip:Yie,badge:Xie,name:Jie,score:Zie,headerSpacer:eae};function tae({name:t,value:e,classLabel:n,colors:r}){const i=kx(n,64);return s.jsxs("div",{className:zr.chip,children:[s.jsx("span",{className:zr.badge,children:i?s.jsx("img",{src:i,alt:""}):null}),s.jsx("span",{className:zr.name,children:t!=null?t:""}),s.jsx("span",{className:zr.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function sae({snapshot:t,colors:e,title:n="Total Stats"}){var o;const r=(o=t==null?void 0:t.members)!=null?o:[],i=c=>[...r].filter(u=>typeof u[c]=="number").sort((u,h)=>{var p,g;return((p=h[c])!=null?p:0)-((g=u[c])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return s.jsxs("div",{className:zr.card,children:[s.jsx(Yl,{text:n}),s.jsx("div",{className:zr.headerSpacer}),s.jsxs("div",{className:zr.wrap,children:[s.jsx("div",{className:zr.divider}),s.jsx("div",{className:zr.rows,children:a.map((c,u)=>s.jsxs("div",{className:zr.row,children:[s.jsxs("div",{className:zr.left,children:[s.jsx("div",{className:zr.label,children:c.label}),s.jsx("div",{className:zr.avgHead,children:""}),s.jsx("div",{className:zr.avgNum,style:{color:e.title},children:typeof c.avg=="number"?c.avg.toLocaleString("de-DE"):""})]}),s.jsx("div",{className:zr.top3,children:c.list.map((h,p)=>s.jsx(tae,{name:h.name,value:h[c.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}function nae({guild:t,snapshot:e,colors:n}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(Yl,{text:"General Info"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function rae({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(Yl,{text:"Fortress"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function iae({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(Yl,{text:"Rankings"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function aae({colors:t}){return s.jsxs("div",{style:{background:"transparent"},children:[s.jsx(Yl,{text:"Serververgleich"}),s.jsx("div",{style:{height:6}}),s.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const oae=R.memo(function({guild:e,snapshot:n,emblemUrl:r,colors:i}){const a=i.icon,o=({text:c})=>s.jsxs("div",{className:Oh.sectionDivider,children:[s.jsx("div",{className:Oh.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),s.jsx("div",{className:Oh.sectionTitle,style:{color:i.soft},children:c}),s.jsx("div",{className:Oh.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return s.jsxs("div",{className:Oh.root+" space-y-4",children:[s.jsx(o,{text:"GUILD OVERVIEW"}),s.jsx("div",{style:{marginTop:6,marginBottom:10},children:s.jsx(o,{text:"AVERAGE PLAYER STATS"})}),s.jsx(nae,{guild:e,snapshot:n,colors:i}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx($ie,{snapshot:n,colors:i}),s.jsx(sae,{snapshot:n,colors:i})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[s.jsx(rae,{colors:i}),s.jsx(iae,{colors:i})]}),s.jsx("div",{className:"mt-4",children:s.jsx(aae,{colors:i})})]})}),lae="_wrapper_zqchq_3",cae="_grid_zqchq_9",dae="_tile_zqchq_13",uae="_disabled_zqchq_37",hae="_crestWrap_zqchq_41",pae="_crest_zqchq_41",mae="_ring_zqchq_53",gae="_badge_zqchq_55",fae="_meta_zqchq_67",vae="_nameRow_zqchq_69",xae="_name_zqchq_69",yae="_share_zqchq_73",bae="_sub_zqchq_75",_ae="_tileButton_zqchq_79",wae="_donutCard_zqchq_85",jae="_donutHeader_zqchq_87",Sae="_legend_zqchq_91",Nae="_legendItem_zqchq_93",kae="_legendSwatch_zqchq_95",Cae="_legendRight_zqchq_97",Tae="_centerLabel_zqchq_101",cn={wrapper:lae,grid:cae,tile:dae,disabled:uae,crestWrap:hae,crest:pae,ring:mae,badge:gae,meta:fae,nameRow:vae,name:xae,share:yae,sub:bae,tileButton:_ae,donutCard:wae,donutHeader:jae,legend:Sae,legendItem:Nae,legendSwatch:kae,legendRight:Cae,centerLabel:Tae},W1=56;function Pv(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function FT(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const Iae=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function Aae(t){return t?/drive\.google\.com/.test(t):!1}function BT(t,e=W1){if(t)return Aae(t)?vi(t,e):t}function Eae(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const n={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return n[e]?n[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function Rae(t){var p,g,y,_,w,k;if(!t)return null;const e=t,n=t,r=(p=e.key)!=null?p:n.id,i=(g=e.label)!=null?g:n.name,a=(_=(y=n.crestUrl)!=null?y:e.iconUrl)!=null?_:n.iconUrl,o=(w=e.iconUrl)!=null?w:n.iconUrl,c=(k=e.fallback)!=null?k:n.fallback;if(!r||!i)return null;const u=BT(a,W1),h=BT(o,W1);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:c?String(c):void 0}}function JR(t,e){var p,g,y,_,w,k,E,P,L,N,v,b,I,j,S,C,M,T,D,F,V;const n={},r={},i={},a={},o=e.map(z=>z.id);for(const z of o)n[z]=0,r[z]=0,i[z]=0,a[z]=null;for(const z of Array.isArray(t)?t:[]){const q=(b=(N=(P=(k=(_=(y=(g=(p=z.classId)!=null?p:z.class)!=null?g:z.klass)!=null?y:z.playerClass)!=null?_:z.cls)!=null?k:(w=z.values)==null?void 0:w.Class)!=null?P:(E=z.values)==null?void 0:E.class)!=null?N:(L=z.values)==null?void 0:L.Klasse)!=null?b:(v=z.values)==null?void 0:v.klasse,H=Eae(q);if(!H||!o.includes(H))continue;n[H]+=1;const K=Iae((C=(j=z.level)!=null?j:(I=z.values)==null?void 0:I.Level)!=null?C:(S=z.values)==null?void 0:S.level);K!=null&&(r[H]+=K,i[H]+=1,(!a[H]||((T=(M=a[H])==null?void 0:M.level)!=null?T:-1/0)<K)&&(a[H]={id:z.id,name:(V=(F=z.name)!=null?F:(D=z.values)==null?void 0:D.Name)!=null?V:null,level:K}))}const c=Object.values(n).reduce((z,q)=>z+q,0),u={},h={};return o.forEach(z=>{u[z]=c>0?n[z]/c*100:0,h[z]=i[z]>0?r[z]/i[z]:null}),{counts:n,shares:u,avg:h,top:a}}const Pae=({valuePct:t})=>{const n=2*Math.PI*28,r=n*(1-Math.max(0,Math.min(100,t))/100);return s.jsxs("svg",{className:cn.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),s.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:n,strokeDashoffset:r,strokeLinecap:"round"})]})},Lae=({data:t,classMeta:e,onPickClass:n})=>{const[r,i]=R.useState({}),a=Array.isArray(t)?t:[],o=Array.isArray(e)?e:[],{counts:c,shares:u,avg:h,top:p}=R.useMemo(()=>JR(a,o),[a,o]);return s.jsx("section",{className:cn.wrapper,children:s.jsx("div",{className:cn.grid,style:{gridTemplateColumns:"1fr"},children:o.map(g=>{var L,N,v;const y=(L=c[g.id])!=null?L:0,_=(N=u[g.id])!=null?N:0,w=h[g.id],k=p[g.id],E=y<=0,P=r[g.id]?void 0:g.crestUrl||g.iconUrl;return s.jsxs("div",{className:`${cn.tile} ${E?cn.disabled:""}`,title:E?`${g.name}: kein Mitglied`:`${g.name}  ${FT(y)}  ${Pv(_)}${w?`   ${w.toFixed(1)}`:""}`,children:[s.jsxs("div",{className:cn.crestWrap,children:[P?s.jsx("img",{className:cn.crest,src:P,alt:g.name,onError:()=>i(b=>({...b,[g.id]:!0}))}):s.jsx("div",{className:cn.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(v=g.fallback)!=null?v:""}),s.jsx(Pae,{valuePct:_}),s.jsx("div",{className:cn.badge,children:FT(y)})]}),s.jsxs("div",{className:cn.meta,children:[s.jsxs("div",{className:cn.nameRow,children:[s.jsx("div",{className:cn.name,children:g.name}),s.jsx("div",{className:cn.share,children:Pv(_)})]}),s.jsxs("div",{className:cn.sub,children:[w?` Lvl ${w.toFixed(1)}`:"",k?`  Top: ${k.name}${k.level?` (Lv ${k.level})`:""}`:""]})]}),!E&&n&&s.jsx("button",{className:cn.tileButton,onClick:()=>n(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},Dae=({data:t,classMeta:e})=>{const n=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=R.useMemo(()=>JR(n,r),[n,r]),o=R.useMemo(()=>Object.values(a).reduce((c,u)=>c+u,0),[a]);return s.jsxs("div",{className:cn.donutCard,children:[s.jsxs("div",{className:cn.donutHeader,children:[s.jsx("div",{children:"Klassen-Verteilung"}),s.jsxs("div",{className:cn.legendRight,children:["Gesamt: ",o]})]}),s.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[s.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[s.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,y=r.map((w,k)=>{var E;return{id:w.id,pct:(E=i[w.id])!=null?E:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*k)} 60% 55%)`}});let _=0;return y.map(w=>{const k=(w.pct||0)/100;if(k<=0)return null;const E=_,P=_+g*k;_=P;const L=P-E>Math.PI?1:0,N=130+100*Math.cos(E),v=130+100*Math.sin(E),b=130+100*Math.cos(P),I=130+100*Math.sin(P),j=130+64*Math.cos(P),S=130+64*Math.sin(P),C=130+64*Math.cos(E),M=130+64*Math.sin(E),T=`M ${N} ${v} A 100 100 0 ${L} 1 ${b} ${I} L ${j} ${S} A 64 64 0 ${L} 0 ${C} ${M} Z`;return s.jsx("path",{d:T,fill:w.color,opacity:.95},w.id)})})()]}),s.jsx("div",{className:cn.legend,children:r.map((c,u)=>{var g,y;const h=(g=i[c.id])!=null?g:0,p=(y=a[c.id])!=null?y:0;return s.jsxs("div",{className:cn.legendItem,title:`${c.name}: ${p}  ${Pv(h)}`,children:[s.jsx("span",{className:cn.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),s.jsx("span",{children:c.name}),s.jsxs("span",{className:cn.legendRight,children:[p,"  ",Pv(h)]})]},c.id)})})]}),s.jsx("div",{className:cn.centerLabel,children:"Anteile je Klasse"})]})},Fn={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},Mae=t=>{var e,n,r,i,a,o,c,u,h,p,g,y,_,w,k;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(n=t.class)!=null?n:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(o=t.baseMain)!=null?o:void 0,con:(c=t.conBase)!=null?c:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(p=t.treasury)!=null?p:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(y=t.attrTotal)!=null?y:void 0,conTotal:(_=t.conTotal)!=null?_:void 0,lastScan:(w=t.lastScan)!=null?w:void 0,lastActivity:(k=t.lastActivity)!=null?k:void 0}}},fb=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Fae=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function ZR({title:t,right:e,children:n}){return s.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:Fn.tile,border:`1px solid ${Fn.line}`},children:[(t||e)&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:Fn.line},children:[s.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:Fn.soft},children:t}),e]}),s.jsx("div",{className:"p-4",children:n})]})}function Vh({k:t,v:e}){return s.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[s.jsx("span",{className:"opacity-80",children:t}),s.jsx("span",{className:"font-semibold",style:{color:Fn.title},children:e})]})}function Bae({guild:t}){var n,r;const e=Kp(t.name,800);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:s.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?s.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):s.jsx("div",{className:"text-6xl",children:""})})}),s.jsx(ZR,{title:"GILDEN INFO",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsx(Vh,{k:"Mitglieder",v:(n=t.memberCount)!=null?n:""}),s.jsx(Vh,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:""}),s.jsx(Vh,{k:"Server",v:(r=t.server)!=null?r:""}),s.jsx(Vh,{k:"Inaktiv",v:"0"}),s.jsx(Vh,{k:"Aktivitt",v:"100%"})]})})]})}function vb(){var E,P,L,N,v,b;const t=Qv(),e=t.id||t.gid||t.guildId||t.guild||"",n=Xr(),[r,i]=R.useState(!0),[a,o]=R.useState(null),[c,u]=R.useState(null),[h,p]=R.useState(null),[g,y]=R.useState("grid"),_=R.useMemo(()=>(Array.isArray(rr)?rr:[]).map(Rae).filter(Boolean),[]);R.useEffect(()=>{let I=!1;async function j(){var C,M,T,D,F,V,z,q,H,K,ne,Y,G,X,te,se,Z,ve,Se,J,ue,ie,me,ce,he,Ne,Te,xe,Ie,$e,Xe,be,Be,Ve,nt,ht,Ue;const S=In("GuildProfile:load");i(!0),o(null);try{const Ee=e.trim();if(!Ee){o("Keine Gilde gewhlt."),i(!1);return}const He=ss(ft,`guilds/${Ee}/latest/latest`),St=await bn(S,He,()=>sn(He));if(!St.exists()){o("Gilde nicht gefunden."),i(!1);return}const Ct=St.data(),ns=(T=(M=Ct.name)!=null?M:(C=Ct.values)==null?void 0:C.Name)!=null?T:Ee,Rt=(V=(F=Ct.server)!=null?F:(D=Ct.values)==null?void 0:D.Server)!=null?V:null,Gt=(ne=fb((K=(q=Ct.memberCount)!=null?q:(z=Ct.values)==null?void 0:z["Guild Member Count"])!=null?K:(H=Ct.values)==null?void 0:H.GuildMemberCount))!=null?ne:null,Ps=(J=fb((Se=(Z=(te=(G=Ct.hofRank)!=null?G:(Y=Ct.values)==null?void 0:Y["Hall of Fame Rank"])!=null?te:(X=Ct.values)==null?void 0:X.HoF)!=null?Z:(se=Ct.values)==null?void 0:se.Rank)!=null?Se:(ve=Ct.values)==null?void 0:ve["Guild Rank"]))!=null?J:null,_t=Fae(fb(Ct.timestamp));I||u({id:Ee,name:ns,server:Rt,memberCount:Gt,hofRank:Ps,lastScanDays:_t});const ks=ss(ft,`guilds/${Ee}/snapshots/members_summary`),Ht=await bn(S,ks,()=>sn(ks));if(Ht.exists()&&!I){const re=Ht.data(),qe={guildId:String((ue=re.guildId)!=null?ue:Ee),updatedAt:String((ce=(me=re.updatedAt)!=null?me:(ie=Ct.values)==null?void 0:ie.Timestamp)!=null?ce:""),updatedAtMs:Number((Ne=(he=re.updatedAtMs)!=null?he:Ct.timestamp*1e3)!=null?Ne:0),count:Number((Te=re.count)!=null?Te:0),hash:String((xe=re.hash)!=null?xe:""),avgLevel:(Ie=re.avgLevel)!=null?Ie:null,avgTreasury:($e=re.avgTreasury)!=null?$e:null,avgMine:(Xe=re.avgMine)!=null?Xe:null,avgBaseMain:(be=re.avgBaseMain)!=null?be:null,avgConBase:(Be=re.avgConBase)!=null?Be:null,avgSumBaseTotal:(Ve=re.avgSumBaseTotal)!=null?Ve:null,avgAttrTotal:(nt=re.avgAttrTotal)!=null?nt:null,avgConTotal:(ht=re.avgConTotal)!=null?ht:null,avgTotalStats:(Ue=re.avgTotalStats)!=null?Ue:null,members:Array.isArray(re.members)?re.members:[]};p(qe)}}catch(Ee){I||o((Ee==null?void 0:Ee.message)||"Fehler beim Laden.")}finally{Ys(S),I||i(!1)}}return j(),()=>{I=!0}},[e]);const w=R.useMemo(()=>{var I;return((I=h==null?void 0:h.members)!=null?I:[]).map(j=>Mae(j))},[h]);if(r)return s.jsx(Kt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsx("div",{className:"text-sm",style:{color:Fn.soft},children:"Lade Gildenprofil"})});if(!c)return s.jsx(Kt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:s.jsxs("div",{className:"text-sm",style:{color:Fn.soft},children:[a!=null?a:"Unbekannter Fehler.",s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>n("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const k=s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"px-6",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${Fn.line}`,position:"relative",zIndex:2},children:[s.jsx("div",{className:"min-w-[120px]",children:s.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:Fn.tile,border:`1px solid ${Fn.line}`,color:Fn.title},children:(E=c.server)!=null?E:"S?.EU"})}),s.jsx("div",{className:"flex-1 text-center",children:s.jsx("div",{className:"font-extrabold",style:{color:Fn.title,fontSize:26,lineHeight:1.15},children:c.name})}),s.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:Fn.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:""," ",s.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),s.jsx("div",{style:{height:1,background:Fn.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return s.jsxs(Kt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[k,s.jsx("div",{className:"px-6 pb-8",children:s.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[s.jsx("div",{className:"col-span-12 md:col-span-3",children:s.jsx(Bae,{guild:c})}),s.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[s.jsx(oae,{guild:c,snapshot:h,emblemUrl:Kp(c.name,512)||void 0,colors:Fn}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-full max-w-[980px]",children:s.jsx(bre,{guildName:c.name,server:(P=c.server)!=null?P:"",emblemUrl:Kp(c.name,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(L=c.memberCount)!=null?L:0,avgLevel:(N=h==null?void 0:h.avgLevel)!=null?N:0,totalPower:(v=h==null?void 0:h.avgTotalStats)!=null?v:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(b=c.memberCount)!=null?b:0}`]:void 0})})}),s.jsx($ae,{members:w,guildId:c.id,guildName:c.name,guildServer:c.server})]}),s.jsxs("div",{className:"col-span-12 md:col-span-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("button",{onClick:()=>y("grid"),"aria-label":"Klassenbersicht",children:s.jsx(Yl,{text:"Klassenbersicht",tone:g==="grid"?"accent":"default"})}),s.jsx("button",{onClick:()=>y("donut"),"aria-label":"Klassenverteilung",children:s.jsx(Yl,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?s.jsx(Lae,{data:w,classMeta:_,onPickClass:I=>{const j=new URL(window.location.href);j.searchParams.set("tab","bersicht"),j.searchParams.set("class",I),window.location.href=j.toString()}}):s.jsx(Dae,{data:w,classMeta:_})]})]})})]})}function $ae({members:t,guildId:e,guildName:n,guildServer:r}){const[i,a]=R.useState("bersicht");return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:Fn.line},role:"tablist",children:["bersicht","Rankings","Monthly Progress","Historie"].map(o=>{const c=o===i;return s.jsx("button",{role:"tab","aria-selected":c,onClick:()=>a(o),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${c?Fn.header:"transparent"}`,background:c?"rgba(45,78,120,0.35)":"transparent",color:Fn.title},children:o},o)})}),s.jsxs(ZR,{children:[i==="bersicht"&&s.jsx(yre,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&s.jsxs("div",{className:"text-sm",style:{color:Fn.soft},children:["Platzhalter ",s.jsx("b",{children:"Rankings"}),"  Inhalt folgt."]}),i==="Monthly Progress"&&s.jsx(fie,{guildId:e,guildName:n,guildServer:r}),i==="Historie"&&s.jsxs("div",{className:"text-sm",style:{color:Fn.soft},children:["Platzhalter ",s.jsx("b",{children:"Historie"}),"  Inhalt folgt."]})]})]})}function Oae(){const{t}=Hs();return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsx(xb,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),s.jsx(xb,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"}),s.jsx(xb,{to:"/servers/overview",title:t("servers.tiles.overview.title"),desc:t("servers.tiles.overview.subtitle")})]})]})}function xb({to:t,title:e,desc:n}){return s.jsxs(As,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),n?s.jsx("div",{style:{opacity:.75,marginTop:4},children:n}):null]})}function Vae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Rankings"}),s.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function Uae(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Servers  Stats"}),s.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const Gae="_card_1rxdx_21",zae="_hoverLift_1rxdx_51",Hae="_title_1rxdx_63",Wae="_body_1rxdx_89",Kae="_iconStack_1rxdx_99",Uh={card:Gae,hoverLift:zae,title:Hae,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:Wae,iconStack:Kae};function Fo({title:t,padding:e="md",hover:n=!0,className:r="",children:i}){return s.jsxs("div",{className:[Uh.card,Uh[`pad-${e}`],n?Uh.hoverLift:"",r].join(" "),children:[t?s.jsx("div",{className:Uh.title,children:t}):null,s.jsx("div",{className:Uh.body,children:i})]})}const qae="_page_frkd2_1",Qae="_controlsRow_frkd2_13",Yae="_controls_frkd2_13",Xae="_controlButton_frkd2_33",Jae="_entryGrid_frkd2_63",Zae="_entryItem_frkd2_75",eoe="_nodeList_frkd2_89",toe="_nodeChildren_frkd2_91",soe="_nodeItem_frkd2_121",noe="_nodeButton_frkd2_129",roe="_nodeCard_frkd2_149",ioe="_nodeTitleRow_frkd2_157",aoe="_nodeTitle_frkd2_157",ooe="_nodeToggle_frkd2_181",loe="_nodeMeta_frkd2_207",coe="_nodeCode_frkd2_225",doe="_placeholder_frkd2_233",uoe="_desktopOnly_frkd2_245",Hn={page:qae,controlsRow:Qae,controls:Yae,controlButton:Xae,entryGrid:Jae,entryItem:Zae,nodeList:eoe,nodeChildren:toe,nodeItem:soe,nodeButton:noe,nodeCard:roe,nodeTitleRow:ioe,nodeTitle:aoe,nodeToggle:ooe,nodeMeta:loe,nodeCode:coe,placeholder:doe,desktopOnly:uoe};function xt(t,e,n){const r=[];for(let i=e;i<=n;i+=1)r.push(`${t}${i}`);return r}function hoe(t){const e=/^([A-Z]+)(\d+)$/.exec(t);return e?`${e[1]} ${e[2]}`:t}function poe(t){return{code:t,displayName:hoe(t),type:"origin",tier:0,mergedFrom:[]}}function moe(t,e){return{code:t,displayName:e!=null?e:t,type:"other",tier:0,mergedFrom:[]}}function Rs(t,e,n,r){return{code:t,displayName:r!=null?r:t,type:"fusion",tier:n,mergedFrom:e}}const ws={};function pn(t){for(const e of t)ws[e]=poe(e)}function goe(t){for(const e of t)ws[e]=moe(e)}pn(xt("EU",1,23));pn(xt("US",1,10));pn(xt("BR",1,2));pn(xt("CL",1,2));pn(["CA1","MX1"]);pn(xt("AE",1,2));pn(xt("DK",1,2));pn(xt("NL",1,3));pn(xt("SE",1,2));pn(xt("UK",1,2));pn(["IN1","JP1","RO1","RU1"]);pn(xt("IT",1,8));pn(xt("GR",1,6));pn(xt("PT",1,8));pn(xt("TR",1,6));pn(xt("ES",1,12));pn(xt("FR",1,15));pn(xt("PL",1,40));pn(xt("DE",1,43));pn(xt("INT",1,60));pn(xt("CZ",1,35));pn(xt("SK",1,3));pn(xt("HU",1,20));goe(["tv2","123playgames","minijuegos","rtl","rtl2","sevengames","wp","buffed","gamona","xchar","ingame"]);ws.F1=Rs("F1",[...xt("BR",1,2),"CA1",...xt("CL",1,2),"MX1",...xt("US",1,10)],1);ws.F2=Rs("F2",[...xt("AE",1,2),...xt("DK",1,2),"tv2","IN1","JP1",...xt("NL",1,3),"RO1","RU1",...xt("SE",1,2),...xt("UK",1,2)],1);ws.F3=Rs("F3",[...xt("IT",1,8)],1);ws.F4=Rs("F4",[...xt("GR",1,6),"123playgames",...xt("PT",1,8),...xt("TR",1,6)],1);ws.F5=Rs("F5",[...xt("ES",1,12),"minijuegos"],1);ws.F6=Rs("F6",[...xt("FR",1,13)],1);ws.F7=Rs("F7",[...xt("PL",7,17)],1);ws.F8=Rs("F8",[...xt("DE",5,12)],1);ws.F9=Rs("F9",[...xt("DE",25,37)],1);ws.F10=Rs("F10",[...xt("PL",18,33)],1);ws.F11=Rs("F11",[...xt("DE",13,24),"rtl","sevengames"],1);ws.F12=Rs("F12",[...xt("INT",1,5)],1);ws.F13=Rs("F13",[...xt("PL",1,6),"wp"],1);ws.F14=Rs("F14",[...xt("INT",15,21)],1);ws.F15=Rs("F15",[...xt("CZ",17,28),"SK2","SK3"],1);ws.F16=Rs("F16",[...xt("CZ",6,16),"SK1"],1);ws.F17=Rs("F17",[...xt("DE",1,4),"buffed","rtl2","gamona","xchar","ingame"],1);ws.F18=Rs("F18",[...xt("CZ",1,5)],1);ws.F19=Rs("F19",[...xt("HU",1,15)],1);ws.F20=Rs("F20",[...xt("INT",6,14),"CZ29","HU16","PL34"],1);ws.F21=Rs("F21",[...xt("INT",22,30),"CZ30","DE38","PL35"],1);ws.F22=Rs("F22",[...xt("INT",31,37),"CZ31","CZ32","DE39","DE40","HU17","PL36","PL37"],1);ws.F23=Rs("F23",[...xt("INT",38,45),"FR14","FR15","CZ33","CZ34","DE41","DE42","HU18","HU19","PL38","PL39"],1);ws.F24=Rs("F24",[...xt("INT",46,50)],1);ws.F25=Rs("F25",[...xt("INT",51,52),"CZ35","DE43","HU20","PL40"],1);ws.F26=Rs("F26",[...xt("INT",53,56)],1);ws.F27=Rs("F27",[...xt("INT",57,60)],1);ws.MAERWYNN=Rs("MAERWYNN",["F1","F2","F3","F4","F5"],2,"Maerwynn");ws.BLACK_FOREST=Rs("BLACK_FOREST",["F7","F10","F13"],2,"Black Forest");ws.GRANOGRIM=Rs("GRANOGRIM",["F15","F16","F18"],2,"Granogrim");const foe=["MAERWYNN","BLACK_FOREST","GRANOGRIM",...xt("F",1,27),...xt("EU",1,23)],voe={entrypoints:foe,nodes:ws},$T=(t,e)=>{const n=e[t];return n?{node:n,isPlaceholder:!1,key:n.code}:{node:{code:t,displayName:t,type:"other",tier:0,mergedFrom:[]},isPlaceholder:!0,key:`placeholder:${t}`}},xoe=(t,e)=>{var i,a;const n=new Set,r=[...t];for(;r.length;){const o=r.pop();if(!o||n.has(o))continue;n.add(o),((a=(i=e[o])==null?void 0:i.mergedFrom)!=null?a:[]).forEach(u=>{n.has(u)||r.push(u)})}return n};function OT({node:t,hasChildren:e,isExpanded:n,isPlaceholder:r,onToggle:i}){return s.jsx("button",{type:"button",onClick:i,className:Hn.nodeButton,"aria-expanded":e?n:void 0,children:s.jsxs(Fo,{hover:!0,className:[Hn.nodeCard,r?Hn.placeholder:""].join(" "),children:[s.jsxs("div",{className:Hn.nodeTitleRow,children:[s.jsx("div",{className:Hn.nodeTitle,children:t.displayName||t.code}),e?s.jsx("span",{className:Hn.nodeToggle,"aria-hidden":!0,children:n?"-":"+"}):null]}),s.jsx("div",{className:Hn.nodeMeta,children:s.jsx("span",{className:Hn.nodeCode,children:t.code})})]})})}function yoe(){const{t}=Hs(),{entrypoints:e,nodes:n}=voe,[r,i]=W.useState(()=>new Set),a=h=>{i(p=>{const g=new Set(p);return g.has(h)?g.delete(h):g.add(h),g})},o=()=>{i(xoe(e,n))},c=()=>{i(new Set)},u=(h,p)=>{var E;if(p.has(h))return null;const g=$T(h,n),y=(E=g.node.mergedFrom)!=null?E:[],_=y.length>0,w=r.has(h),k=new Set(p);return k.add(h),s.jsxs("li",{className:Hn.nodeItem,children:[s.jsx(OT,{node:g.node,hasChildren:_,isExpanded:w,isPlaceholder:g.isPlaceholder,onToggle:()=>a(h)}),_&&w?s.jsx("ul",{className:Hn.nodeChildren,children:y.map(P=>u(P,k))}):null]},g.key)};return s.jsxs("div",{className:Hn.page,children:[s.jsx("div",{className:Hn.controlsRow,children:s.jsxs("div",{className:`${Hn.controls} ${Hn.desktopOnly}`,children:[s.jsx("button",{type:"button",onClick:o,className:Hn.controlButton,children:t("servers.overview.expandAll")}),s.jsx("button",{type:"button",onClick:c,className:Hn.controlButton,children:t("servers.overview.collapseAll")})]})}),s.jsx("div",{className:Hn.entryGrid,children:e.map(h=>{var w;const p=$T(h,n),g=(w=p.node.mergedFrom)!=null?w:[],y=g.length>0,_=r.has(h);return s.jsxs("div",{className:Hn.entryItem,children:[s.jsx(OT,{node:p.node,hasChildren:y,isExpanded:_,isPlaceholder:p.isPlaceholder,onToggle:()=>a(h)}),y&&_?s.jsx("ul",{className:Hn.nodeList,children:g.map(k=>u(k,new Set([h])))}):null]},p.key)})})]})}function boe(){const{t}=Hs();return s.jsx(Kt,{title:t("servers.overview.pageTitle"),centerFramed:!1,padded:!0,children:s.jsx(yoe,{})})}const Jn={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function VT({children:t,style:e}){return s.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function _oe({size:t=36}){return s.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:s.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function Jd({label:t,value:e}){return s.jsxs("div",{style:{background:Jn.tileAlt,border:`1px solid ${Jn.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsx("div",{style:{fontSize:12,color:Jn.textSoft,marginBottom:4},children:t}),s.jsx("div",{style:{fontSize:22,color:Jn.title,fontWeight:700},children:e})]})}function woe(t){const e=t.trim(),n=e.toUpperCase(),r=e.toLowerCase(),i=n.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let o="";const c=n.match(/^([A-Z]{2})(\d{1,3})$/);if(c){const u=c[1],h=String(parseInt(c[2],10)),p=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();o=`s${h}.sfgame.${p}`}return Array.from(new Set([e,n,r,i,a,o].filter(Boolean)))}function yb(){var k,E,P,L;const t=Qv(),e=Xr(),n=ir(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=R.useState(!0),[o,c]=R.useState(null),[u,h]=R.useState(null),[p,g]=R.useState(null);R.useEffect(()=>{let N=!1;async function v(){const b=In("ServerProfile:load");a(!0),c(null),h(null),g(null);try{const I=r.trim();if(!I)throw new Error("Kein Server gewhlt.");const j=ss(ft,`servers/${I}`),S=await bn(b,j,()=>sn(j));if(S.exists()){N||(h(S.id),g(S.data()));return}const C=Go(ft,"servers"),M=woe(I),T=[];for(const z of M)T.push(yn(b,C,()=>xn(Tn(C,gi("code","==",z),sr(1))))),T.push(yn(b,C,()=>xn(Tn(C,gi("displayName","==",z),sr(1))))),T.push(yn(b,C,()=>xn(Tn(C,gi("host","==",z),sr(1)))));const D=await Promise.allSettled(T);let F=null,V=null;for(const z of D){if(z.status!=="fulfilled")continue;const q=z.value;if(!q.empty){const H=q.docs[0];F=H.id,V=H.data();break}}if(!F||!V)throw new Error("Server nicht gefunden.");N||(h(F),g(V),F!==I&&e(`/server/${encodeURIComponent(F)}`,{replace:!0,state:{from:n.pathname}}))}catch(I){N||c((I==null?void 0:I.message)||"Fehler beim Laden.")}finally{Ys(b),N||a(!1)}}return v(),()=>{N=!0}},[r,e,n.pathname]);const y=R.useMemo(()=>s.jsxs("div",{style:{padding:24,color:Jn.textSoft},children:[o!=null?o:"Unbekannter Fehler.",s.jsx("div",{style:{marginTop:12},children:s.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:Jn.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[o,e]);if(i)return s.jsx(Kt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:s.jsx("div",{style:{padding:16,color:Jn.textSoft},children:"Lade Serverprofil"})});if(!p)return s.jsx(Kt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:y});const _=p.displayName||p.code||u||r,w=p.active===!0?"Aktiv":p.active===!1?"Inaktiv":"";return s.jsxs(Kt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[s.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${Jn.line}`},children:s.jsxs(VT,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[s.jsx(_oe,{size:36}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:18,color:Jn.title,fontWeight:700},children:_}),s.jsxs("div",{style:{fontSize:12,color:Jn.textSoft},children:[p.host||"","  ",p.region||"","  ",((k=p.type)==null?void 0:k.toUpperCase())||""]})]})]})}),s.jsxs(VT,{style:{paddingTop:12,paddingBottom:24},children:[s.jsxs("div",{style:{background:Jn.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${Jn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:Jn.title,fontSize:24,fontWeight:800},children:_}),s.jsxs("div",{style:{marginTop:6,color:Jn.textSoft,fontSize:13},children:[p.host||"","  ",p.region||"","  ",((E=p.type)==null?void 0:E.toUpperCase())||""]})]}),s.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[s.jsxs("span",{style:{color:Jn.textSoft},children:["Status: ",w]}),s.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:p.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[s.jsx(Jd,{label:"Code",value:p.code||""}),s.jsx(Jd,{label:"Host",value:p.host||""}),s.jsx(Jd,{label:"Region",value:p.region||""}),s.jsx(Jd,{label:"Typ",value:((P=p.type)==null?void 0:P.toUpperCase())||""}),s.jsx(Jd,{label:"Numeric ID",value:(L=p.numericId)!=null?L:""}),s.jsx(Jd,{label:"Status",value:w})]}),s.jsxs("div",{style:{marginTop:16,background:Jn.tileAlt,padding:15,borderRadius:12,border:`1px solid ${Jn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:Jn.textSoft},children:["Platzhalter ",s.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const joe="_page_177kv_1",Soe="_sectionCard_177kv_15",Noe="_identityCard_177kv_29",koe="_identityGrid_177kv_39",Coe="_profileName_177kv_63",Toe="_identityMeta_177kv_77",Ioe="_mainCharacter_177kv_95",Aoe="_characterHeader_177kv_117",Eoe="_characterTitle_177kv_131",Roe="_characterSubtitle_177kv_143",Poe="_classIcon_177kv_153",Loe="_metaGrid_177kv_181",Doe="_metaLabel_177kv_193",Moe="_metaValue_177kv_207",Foe="_portrait_177kv_217",Boe="_sectionHeader_177kv_245",$oe="_sectionHint_177kv_265",Ooe="_bioText_177kv_275",Voe="_tagGroups_177kv_295",Uoe="_tagGroupLabel_177kv_309",Goe="_tagList_177kv_323",zoe="_tag_177kv_295",Hoe="_showcaseGrid_177kv_353",Woe="_characterCard_177kv_365",Koe="_characterCardHeader_177kv_385",qoe="_characterName_177kv_399",Qoe="_badge_177kv_411",Yoe="_characterMeta_177kv_433",Xoe="_characterStats_177kv_449",Joe="_statGrid_177kv_465",Zoe="_statTile_177kv_477",ele="_statLabel_177kv_491",tle="_statValue_177kv_505",sle="_statSubtext_177kv_519",nle="_emptyState_177kv_531",rle="_recordsHighlights_177kv_551",ile="_highlightCard_177kv_565",ale="_recordType_177kv_579",ole="_recordTitle_177kv_593",lle="_timeline_177kv_607",cle="_timelineItem_177kv_625",dle="_timelineBullet_177kv_635",ule="_timelineContent_177kv_653",hle="_timelineTitle_177kv_661",ple="_timelineMeta_177kv_673",mle="_achievementsHighlights_177kv_685",gle="_achievementCard_177kv_699",fle="_achievementIcon_177kv_723",vle="_achievementName_177kv_747",xle="_achievementDesc_177kv_759",yle="_achievementTier_177kv_771",ble="_achievementDate_177kv_785",_le="_achievementsGrid_177kv_795",wle="_achievementBadge_177kv_807",jle="_tierGold_177kv_831",Sle="_tierSilver_177kv_839",Nle="_tierBronze_177kv_847",Qe={page:joe,sectionCard:Soe,identityCard:Noe,identityGrid:koe,profileName:Coe,identityMeta:Toe,mainCharacter:Ioe,characterHeader:Aoe,characterTitle:Eoe,characterSubtitle:Roe,classIcon:Poe,metaGrid:Loe,metaLabel:Doe,metaValue:Moe,portrait:Foe,sectionHeader:Boe,sectionHint:$oe,bioText:Ooe,tagGroups:Voe,tagGroupLabel:Uoe,tagList:Goe,tag:zoe,showcaseGrid:Hoe,characterCard:Woe,characterCardHeader:Koe,characterName:qoe,badge:Qoe,characterMeta:Yoe,characterStats:Xoe,statGrid:Joe,statTile:Zoe,statLabel:ele,statValue:tle,statSubtext:sle,emptyState:nle,recordsHighlights:rle,highlightCard:ile,recordType:ale,recordTitle:ole,timeline:lle,timelineItem:cle,timelineBullet:dle,timelineContent:ule,timelineTitle:hle,timelineMeta:ple,achievementsHighlights:mle,achievementCard:gle,achievementIcon:fle,achievementName:vle,achievementDesc:xle,achievementTier:yle,achievementDate:ble,achievementsGrid:_le,achievementBadge:wle,tierGold:jle,tierSilver:Sle,tierBronze:Nle},kle={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},Cle=1e3*60*60*24,UT={gold:3,silver:2,bronze:1};function Tle(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const n=Date.now()-e;return n<0?0:Math.floor(n/Cle)}function df(t){const e=new Date(t);return Number.isNaN(e.getTime())?Ft("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function Ile(){const{profileId:t}=Qv(),e=kle,n=Tle(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(p=>p.type==="record").slice(0,3),a=[...e.achievements].sort((p,g)=>UT[g.tier]-UT[p.tier]).slice(0,3),o=[{label:Ft("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:Ft("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:Ft("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:Ft("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],c=n==null?Ft("profile.public.identity.dateUnknown"):n===0?Ft("profile.public.identity.lastScanToday"):`${n} ${Ft("profile.public.identity.daysAgoSuffix")}`,u=Ft("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):Ft("profile.public.identity.unknownValue");return s.jsx(Kt,{title:Ft("profile.public.title"),subtitle:Ft("profile.public.subtitle"),centerFramed:!1,padded:!0,children:s.jsxs("div",{className:Qe.page,children:[s.jsx("section",{className:`${Qe.sectionCard} ${Qe.identityCard}`,children:s.jsxs("div",{className:Qe.identityGrid,children:[s.jsxs("div",{children:[s.jsx("h1",{className:Qe.profileName,children:e.profileUser.displayName}),s.jsxs("div",{className:Qe.identityMeta,children:[s.jsxs("span",{children:[Ft("profile.public.identity.profileIdLabel"),": ",t!=null?t:Ft("profile.public.identity.unknownValue")]}),s.jsxs("span",{children:[Ft("profile.public.identity.lastScanLabel"),": ",c]})]}),s.jsxs("article",{className:Qe.mainCharacter,children:[s.jsxs("div",{className:Qe.characterHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:Qe.metaLabel,children:Ft("profile.public.identity.mainCharacterLabel")}),s.jsx("div",{className:Qe.characterTitle,children:e.mainCharacter.name}),s.jsxs("div",{className:Qe.characterSubtitle,children:[e.mainCharacter.class,"  ",Ft("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),s.jsx("div",{className:Qe.classIcon,children:e.mainCharacter.class.charAt(0)})]}),s.jsxs("div",{className:Qe.metaGrid,children:[s.jsxs("div",{children:[s.jsx("div",{className:Qe.metaLabel,children:Ft("profile.public.identity.serverLabel")}),s.jsx("div",{className:Qe.metaValue,children:e.mainCharacter.server})]}),s.jsxs("div",{children:[s.jsx("div",{className:Qe.metaLabel,children:Ft("profile.public.identity.guildLabel")}),s.jsx("div",{className:Qe.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),s.jsx("div",{className:Qe.portrait,children:u})]})}),s.jsxs("section",{className:Qe.sectionCard,children:[s.jsx("div",{className:Qe.sectionHeader,children:s.jsx("span",{children:Ft("profile.public.bio.title")})}),s.jsx("p",{className:Qe.bioText,children:e.bio}),s.jsxs("div",{className:Qe.tagGroups,children:[s.jsxs("div",{children:[s.jsx("div",{className:Qe.tagGroupLabel,children:Ft("profile.public.bio.languagesLabel")}),s.jsx("div",{className:Qe.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(p=>s.jsx("span",{className:Qe.tag,children:p.toUpperCase()},p)):s.jsx("span",{className:Qe.tag,children:Ft("profile.public.identity.unknownValue")})})]}),s.jsxs("div",{children:[s.jsx("div",{className:Qe.tagGroupLabel,children:Ft("profile.public.bio.rolesLabel")}),s.jsx("div",{className:Qe.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(p=>s.jsx("span",{className:Qe.tag,children:Ft(`profile.public.roles.${p}`)},p)):s.jsx("span",{className:Qe.tag,children:Ft("profile.public.identity.unknownValue")})})]})]})]}),s.jsxs("section",{className:Qe.sectionCard,children:[s.jsxs("div",{className:Qe.sectionHeader,children:[s.jsx("span",{children:Ft("profile.public.showcase.title")}),s.jsx("span",{className:Qe.sectionHint,children:Ft("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?s.jsx("div",{className:Qe.emptyState,children:Ft("profile.public.showcase.empty")}):s.jsx("div",{className:Qe.showcaseGrid,children:e.showcaseCharacters.map(p=>s.jsxs("article",{className:Qe.characterCard,children:[s.jsxs("div",{className:Qe.characterCardHeader,children:[s.jsxs("div",{children:[s.jsx("div",{className:Qe.characterName,children:p.name}),s.jsxs("div",{className:Qe.characterMeta,children:[s.jsx("span",{children:p.class}),s.jsxs("span",{children:[Ft("profile.public.identity.levelShort")," ",p.level]})]})]}),s.jsx("span",{className:Qe.badge,children:Ft(`profile.public.showcase.tags.${p.tag}`)})]}),s.jsxs("div",{className:Qe.characterMeta,children:[s.jsx("span",{children:p.server}),s.jsx("span",{children:p.guildName})]}),s.jsxs("div",{className:Qe.characterStats,children:[s.jsxs("span",{children:[Ft("profile.public.showcase.scrapbookLabel")," ",p.scrapbookPercent,"%"]}),s.jsxs("span",{children:[Ft("profile.public.showcase.highlightLabel"),": ",p.highlightProgress]})]})]},p.id))})]}),s.jsxs("section",{className:Qe.sectionCard,children:[s.jsx("div",{className:Qe.sectionHeader,children:s.jsx("span",{children:Ft("profile.public.stats.title")})}),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Qe.statGrid,children:o.map(p=>s.jsxs("article",{className:Qe.statTile,children:[s.jsx("div",{className:Qe.statLabel,children:p.label}),s.jsx("div",{className:Qe.statValue,children:p.value})]},p.label))}),s.jsxs("div",{className:Qe.statSubtext,children:[Ft("profile.public.stats.topServersLabel"),": ",h]}),s.jsxs("div",{className:Qe.statSubtext,children:[Ft("profile.public.stats.firstScanLabel"),": ",df(e.scanStats.firstScanAt)]})]})]}),s.jsxs("section",{className:Qe.sectionCard,children:[s.jsx("div",{className:Qe.sectionHeader,children:s.jsx("span",{children:Ft("profile.public.records.title")})}),e.recordsAndMilestones.length===0?s.jsx("div",{className:Qe.emptyState,children:Ft("profile.public.records.empty")}):s.jsxs(s.Fragment,{children:[i.length>0&&s.jsx("div",{className:Qe.recordsHighlights,children:i.map(p=>s.jsxs("article",{className:Qe.highlightCard,children:[s.jsx("div",{className:Qe.recordType,children:Ft(`profile.public.records.type.${p.type}`)}),s.jsx("div",{className:Qe.recordTitle,children:p.title}),s.jsxs("div",{className:Qe.timelineMeta,children:[df(p.when),"  ",p.context]})]},p.id))}),s.jsx("ul",{className:Qe.timeline,children:e.recordsAndMilestones.map(p=>s.jsxs("li",{className:Qe.timelineItem,children:[s.jsx("div",{className:Qe.timelineBullet}),s.jsxs("div",{className:Qe.timelineContent,children:[s.jsx("div",{className:Qe.timelineTitle,children:p.title}),s.jsxs("div",{className:Qe.timelineMeta,children:[df(p.when),"  ",p.context]})]})]},p.id))})]})]}),s.jsxs("section",{className:Qe.sectionCard,children:[s.jsxs("div",{className:Qe.sectionHeader,children:[s.jsx("span",{children:Ft("profile.public.achievements.title")}),e.achievements.length>0&&s.jsx("span",{className:Qe.sectionHint,children:Ft("profile.public.achievements.highlights")})]}),e.achievements.length===0?s.jsx("div",{className:Qe.emptyState,children:Ft("profile.public.achievements.empty")}):s.jsxs(s.Fragment,{children:[a.length>0&&s.jsx("div",{className:Qe.achievementsHighlights,children:a.map(p=>s.jsxs("article",{className:Qe.achievementCard,children:[s.jsx("div",{className:[Qe.achievementIcon,p.tier==="gold"?Qe.tierGold:p.tier==="silver"?Qe.tierSilver:Qe.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:Qe.achievementTier,children:Ft(`profile.public.achievements.tiers.${p.tier}`)}),s.jsx("div",{className:Qe.achievementName,children:Ft(p.nameKey)}),s.jsx("div",{className:Qe.achievementDesc,children:Ft(p.descriptionKey)}),p.unlockedAt&&s.jsx("div",{className:Qe.achievementDate,children:df(p.unlockedAt)})]},p.id))}),s.jsx("div",{className:Qe.achievementsGrid,children:e.achievements.map(p=>s.jsxs("article",{className:Qe.achievementBadge,children:[s.jsx("div",{className:[Qe.achievementIcon,p.tier==="gold"?Qe.tierGold:p.tier==="silver"?Qe.tierSilver:Qe.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),s.jsx("div",{className:Qe.achievementName,children:Ft(p.nameKey)}),s.jsx("div",{className:Qe.achievementDesc,children:Ft(p.descriptionKey)})]},p.id))})]})]})]})})}const Ale="_wrap_k6pqt_1",Ele="_centerLogoWrap_k6pqt_21",Rle="_centerLogoLink_k6pqt_37",Ple="_centerLogo_k6pqt_21",Lle="_arc_k6pqt_55",Dle="_left_k6pqt_57",Mle="_right_k6pqt_59",Fle="_sub_k6pqt_61",Ble="_full_k6pqt_63",$le="_arcItem_k6pqt_65",Ole="_iconBtn_k6pqt_71",Vle="_active_k6pqt_125",Ule="_iconImg_k6pqt_135",Gle="_placeholderIcon_k6pqt_139",zle="_placeholderText_k6pqt_157",Hle="_iconLabel_k6pqt_161",gr={wrap:Ale,centerLogoWrap:Ele,centerLogoLink:Rle,centerLogo:Ple,arc:Lle,left:Dle,right:Mle,sub:Fle,full:Ble,arcItem:$le,iconBtn:Ole,active:Vle,iconImg:Ule,placeholderIcon:Gle,placeholderText:zle,iconLabel:Hle},Wle=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),h=o.get("sub2"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),y=p.get("sub"),_=p.get("sub2");r==="main"?a=c===g:r==="sub"?a=c===g&&!!y&&u===y:a=c===g&&!!y&&u===y&&!!_&&h===_}catch(o){a=!1}return s.jsxs(As,{to:t,"aria-label":e,className:[gr.iconBtn,a?gr.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:gr.iconImg}):s.jsx("div",{className:gr.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:gr.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:gr.iconLabel,children:e})]})},uf=({items:t,side:e,anchorSide:n,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440,superOffset:c=660})=>{if((e==="sub"||e==="sub2")&&!n)return null;const u=R.useMemo(()=>{const g=t.length;if(g===0)return[];let y=-90,_=90;e==="left"?(y=90,_=270):e==="sub"||e==="sub2"?n==="left"?(y=90,_=270):(y=-90,_=90):e==="full"&&(y=0,_=360);const w=(_-y)/(g+1),k=r?190:250;return t.map((E,P)=>{const N=(y+w*(P+1))*Math.PI/180;return{it:E,x:Math.cos(N)*k,y:Math.sin(N)*k}})},[t,e,n,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`:e==="sub2"&&(g.left=n==="left"?`calc(50% - ${c}px)`:`calc(50% + ${c}px)`),g})(),p=e==="sub"?"sub":e==="sub2"?"sub2":"main";return s.jsx("div",{className:[gr.arc,e==="left"?gr.left:"",e==="right"?gr.right:"",e==="sub"?gr.sub:"",e==="sub2"?gr.sub2:"",e==="full"?gr.full:""].join(" "),style:h,children:u.map(({it:g,x:y,y:_})=>s.jsx("div",{className:gr.arcItem,style:{transform:`translate(${y}px, ${_}px)`},children:s.jsx(Wle,{to:g.to,label:g.label,icon:g.icon,variant:p})},g.key))})},Kle=({logoSrc:t,categories:e})=>{const[n]=fi(),r=n.get("tab")||null,i=n.get("sub")||null;n.get("sub2");const a=R.useMemo(()=>e.find(N=>N.key===r)||null,[e,r]),o=(a==null?void 0:a.sub)||[],c=R.useMemo(()=>o.find(N=>N.key===i)||null,[o,i]),u=(c==null?void 0:c.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",p=R.useRef(null),[g,y]=R.useState(!1),[_,w]=R.useState(220),[k,E]=R.useState(440),[P,L]=R.useState(660);return R.useLayoutEffect(()=>{(()=>{var M,T;const b=((T=(M=p.current)==null?void 0:M.getBoundingClientRect().width)!=null?T:380)/2,j=Math.round(b+60),S=Math.round(j+220),C=Math.round(S+220);w(j),E(S),L(C),y(!0)})()},[]),R.useEffect(()=>{let N=0,v=null,b={main:_,out:k,sup:P};const I=()=>{v!=null&&window.clearTimeout(v),v=window.setTimeout(()=>{N=requestAnimationFrame(()=>{var q,H;const S=((H=(q=p.current)==null?void 0:q.getBoundingClientRect().width)!=null?H:380)/2,M=Math.round(S+60),T=Math.round(M+220),D=Math.round(T+220),F=Math.abs(M-b.main),V=Math.abs(T-b.out),z=Math.abs(D-b.sup);F>1&&w(M),V>1&&E(T),z>1&&L(D),b={main:M,out:T,sup:D}})},120)};return window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),v!=null&&window.clearTimeout(v),N&&cancelAnimationFrame(N)}},[_,k,P]),s.jsxs("div",{className:gr.wrap,children:[s.jsx("div",{className:gr.centerLogoWrap,children:s.jsx(As,{to:"/guidehub",className:gr.centerLogoLink,"aria-label":"Guide Hub Home",children:s.jsx("img",{ref:p,src:t,alt:"Guide Hub",className:gr.centerLogo})})}),g&&s.jsxs(s.Fragment,{children:[s.jsx(uf,{items:e.filter(N=>N.side==="left").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"left",variant:"main",arcOffset:_}),s.jsx(uf,{items:e.filter(N=>N.side==="right").map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"right",variant:"main",arcOffset:_}),h&&o.length>0&&s.jsx(uf,{items:o.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:k,compact:!0}),h&&u.length>0&&s.jsx(uf,{items:u.map(N=>({key:N.key,to:N.to,label:N.label,icon:N.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:P,compact:!0})]})]})},Qc=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"event-list",label:"Event List",to:"/guidehub?tab=events&sub=event-list"},{key:"event-cycle",label:"Event Cycle",to:"/guidehub?tab=events&sub=event-cycle"},{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=progression&sub=early&sub2=max-item-stats-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=fortress-package-skip-order"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=underworld-pro-package-skip-order"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=early&sub2=gem-calculator"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=progression&sub=early&sub2=fortress-attack-duplication"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]},{key:"class-book",label:"Class book",to:"/guidehub?tab=class-book",side:"right",sub:[]}],qle="_topWrap_1vr4p_1",Qle="_divider_1vr4p_19",Yle="_contentArea_1vr4p_53",Xle="_placeholder_1vr4p_65",Jle="_placeholderTitle_1vr4p_79",Zle="_placeholderText_1vr4p_93",Zd={topWrap:qle,divider:Qle,contentArea:Yle,placeholder:Xle,placeholderTitle:Jle,placeholderText:Zle};function pd({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const ece=()=>s.jsx(pd,{title:"Game Features"});function nn({title:t}){return s.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[s.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),s.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const tce=()=>s.jsx(nn,{title:"Progression"}),sce=()=>s.jsx(nn,{title:"Hellevator"}),nce=()=>s.jsx(nn,{title:"Legendary Dungeon"}),rce=()=>s.jsx(nn,{title:"Events"}),ice=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],ace="_grid_1amcc_3",oce="_tileBtn_1amcc_45",lce="_wrap_1amcc_87",cce="_headerBar_1amcc_99",dce="_title_1amcc_117",Gh={grid:ace,tileBtn:oce,wrap:lce,headerBar:cce,title:dce};function uce(){const[t,e]=fi(),n=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return s.jsxs("div",{className:Gh.wrap,children:[s.jsx("div",{className:Gh.headerBar,children:s.jsx("h2",{className:Gh.title,children:"Calculators"})}),s.jsx("div",{className:Gh.grid,children:ice.map(r=>s.jsx("button",{className:Gh.tileBtn,onClick:()=>n(r.slug),"aria-label":r.title,children:s.jsx(Fo,{title:r.title,padding:"md",hover:!0,children:s.jsx(s.Fragment,{children:" "})})},r.slug))})]})}const hce=()=>s.jsx(nn,{title:"Infographics (Dropdown inside page)"}),pce=()=>s.jsx(nn,{title:"Class book"}),mce=()=>s.jsx(nn,{title:"Dungeons"}),gce=()=>s.jsx(pd,{title:"Fortress"}),fce=()=>s.jsx(pd,{title:"Fortress Calculator"}),vce="_wrap_1skhh_7",xce="_headerBar_1skhh_21",yce="_title_1skhh_39",bce="_meta_1skhh_55",_ce="_description_1skhh_67",wce="_contentWrapper_1skhh_83",jce="_tableSection_1skhh_97",Sce="_table_1skhh_97",Nce="_infoBox_1skhh_151",kce="_sectionTitle_1skhh_165",Cce="_divider_1skhh_181",ui={wrap:vce,headerBar:xce,title:yce,meta:bce,description:_ce,contentWrapper:wce,tableSection:jce,table:Sce,infoBox:Nce,sectionTitle:kce,divider:Cce};function eP(){return s.jsxs("section",{className:ui.tableSection,children:[s.jsx("h3",{className:ui.sectionTitle,children:"Fortress Build Order"}),s.jsxs("table",{className:ui.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Building"}),s.jsx("th",{children:"Level"}),s.jsx("th",{children:"Gold Cost"}),s.jsx("th",{children:"Shroom Cost"}),s.jsx("th",{children:"Wood Cost"}),s.jsx("th",{children:"Stone Cost"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"10"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"35"}),s.jsx("td",{children:"12"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"20"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"150"}),s.jsx("td",{children:"50"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"10"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"138"}),s.jsx("td",{children:"46"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"30"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"440"}),s.jsx("td",{children:"140"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"15"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"406"}),s.jsx("td",{children:"129"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"40"}),s.jsx("td",{children:"12"}),s.jsx("td",{children:"1,100"}),s.jsx("td",{children:"333"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"20"}),s.jsx("td",{children:"12"}),s.jsx("td",{children:"1,015"}),s.jsx("td",{children:"308"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"50"}),s.jsx("td",{children:"24"}),s.jsx("td",{children:"2,500"}),s.jsx("td",{children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"25"}),s.jsx("td",{children:"24"}),s.jsx("td",{children:"2,308"}),s.jsx("td",{children:"738"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"60"}),s.jsx("td",{children:"36"}),s.jsx("td",{children:"6,000"}),s.jsx("td",{children:"2,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Laborer's Quarter"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"30"}),s.jsx("td",{children:"36"}),s.jsx("td",{children:"5,538"}),s.jsx("td",{children:"1,849"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"7"}),s.jsx("td",{children:"70"}),s.jsx("td",{children:"48"}),s.jsx("td",{children:"13,417"}),s.jsx("td",{children:"4,433"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress"}),s.jsx("td",{children:"8"}),s.jsx("td",{children:"80"}),s.jsx("td",{children:"78"}),s.jsx("td",{children:"27,200"}),s.jsx("td",{children:"9,280"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"720"}),s.jsx("td",{children:"240"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"1,408"}),s.jsx("td",{children:"448"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"2,640"}),s.jsx("td",{children:"800"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"4,800"}),s.jsx("td",{children:"1,536"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"9,600"}),s.jsx("td",{children:"3,200"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Hall of Knight"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"18,400"}),s.jsx("td",{children:"6,080"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Gem Mine"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"15"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"50"}),s.jsx("td",{children:"17"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Treasury"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"25"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"40"}),s.jsx("td",{children:"13"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Woodcutter"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"0"}),s.jsx("td",{children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Woodcutter"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"30"}),s.jsx("td",{children:"20"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Woodcutter"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"88"}),s.jsx("td",{children:"56"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Woodcutter"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"8"}),s.jsx("td",{children:"10"}),s.jsx("td",{children:"220"}),s.jsx("td",{children:"133"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Woodcutter"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"10"}),s.jsx("td",{children:"21"}),s.jsx("td",{children:"500"}),s.jsx("td",{children:"320"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Quarry"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"22"}),s.jsx("td",{children:"0"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Quarry"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"6"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"90"}),s.jsx("td",{children:"16"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Quarry"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"9"}),s.jsx("td",{children:"5"}),s.jsx("td",{children:"264"}),s.jsx("td",{children:"45"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Quarry"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"12"}),s.jsx("td",{children:"10"}),s.jsx("td",{children:"660"}),s.jsx("td",{children:"107"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Barracks"}),s.jsx("td",{children:"1"}),s.jsx("td",{children:"4"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"20"}),s.jsx("td",{children:"14"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Barracks"}),s.jsx("td",{children:"2"}),s.jsx("td",{children:"8"}),s.jsx("td",{children:"3"}),s.jsx("td",{children:"82"}),s.jsx("td",{children:"55"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Total cost"}),s.jsx("td",{children:"-"}),s.jsx("td",{children:"577"}),s.jsx("td",{children:"363"}),s.jsx("td",{children:"99,881"}),s.jsx("td",{children:"33,218"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Fortress Pack ressources"}),s.jsx("td",{children:"-"}),s.jsx("td",{children:"-"}),s.jsx("td",{children:"300"}),s.jsx("td",{children:"100,000"}),s.jsx("td",{children:"50,000"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Left over"}),s.jsx("td",{children:"-"}),s.jsx("td",{children:"-577"}),s.jsx("td",{children:"-63"}),s.jsx("td",{children:"119"}),s.jsx("td",{children:"16,782"})]})]})]})]})}function Tce(){return s.jsxs("div",{className:ui.wrap,children:[s.jsxs("div",{className:ui.headerBar,children:[s.jsx("h2",{className:ui.title,children:"Fortress Package skip order"}),s.jsx("span",{className:ui.meta,children:"Last updated: 21.02.2025"})]}),s.jsx("p",{className:ui.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),s.jsxs("div",{className:ui.contentWrapper,children:[s.jsx(eP,{}),s.jsxs("section",{className:ui.infoBox,children:[s.jsx("h3",{className:ui.sectionTitle,children:"Important"}),s.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Archery Guild"}),s.jsx("li",{children:"Mage's Tower"}),s.jsx("li",{children:"Fortifications"})]}),s.jsx("div",{className:ui.divider}),s.jsx("h3",{className:ui.sectionTitle,children:"Total Costs"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Gold:"})," 577 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Shrooms:"})," 363 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Wood:"})," 99,881 ",s.jsx("br",{}),s.jsx("strong",{children:"Total Stone:"})," 33,218 ",s.jsx("br",{})]}),s.jsx("h3",{className:ui.sectionTitle,children:"Remaining Resources"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Remaining Gold:"})," -577 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Wood:"})," 119 ",s.jsx("br",{}),s.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const Ice=()=>s.jsx(pd,{title:"Fortress attack duplication guide"}),Ace=()=>s.jsx(pd,{title:"Underworld"}),Ece=()=>s.jsx(pd,{title:"Underworld Calculator"}),Rce=()=>s.jsx(pd,{title:"Underworld Pro Package skip order"}),Pce=()=>s.jsx(nn,{title:"Arena / AM"}),Lce="_wrap_13u9w_5",Dce="_description_13u9w_63",Mce="_controls_13u9w_79",Fce="_search_13u9w_83",Bce="_tableWrap_13u9w_119",$ce="_table_13u9w_119",Oce="_thead_13u9w_143",Vce="_th_13u9w_143",Uce="_td_13u9w_167",Gce="_tierCell_13u9w_179",zce="_amountCell_13u9w_181",Hce="_bonusCell_13u9w_183",Wce="_tags_13u9w_185",Kce="_tierBox_13u9w_191",qce="_tierIcon_13u9w_193",Qce="_tierTexts_13u9w_203",Yce="_tierName_13u9w_215",Xce="_badge_13u9w_221",Jce="_badgeMax_13u9w_241",Zce="_badgeAchiev_13u9w_243",ede="_badgeX2_13u9w_245",tde="_badgeX12_13u9w_247",sde="_badgeX60_13u9w_249",nde="_iconHead_13u9w_255",rde="_achievTooltip_13u9w_271",ide="_achiev_13u9w_271",ade="_achievImg_13u9w_275",ode="_dataRow_13u9w_303",lde="_tierCellHover_13u9w_323",ot={wrap:Lce,description:Dce,controls:Mce,search:Fce,tableWrap:Bce,table:$ce,thead:Oce,th:Vce,td:Uce,tierCell:Gce,amountCell:zce,bonusCell:Hce,tags:Wce,tierBox:Kce,tierIcon:qce,tierTexts:Qce,tierName:Yce,badge:Xce,badgeMax:Jce,badgeAchiev:Zce,badgeX2:ede,badgeX12:tde,badgeX60:sde,iconHead:nde,achievTooltip:rde,achiev:ide,achievImg:ade,dataRow:ode,tierCellHover:lde},wl={gold:"goldrune",xp:"xprune",hp:"healthrune",totalRes:"totalresrune",singleRes:"lightresrune",elem:"lightdmgrune",item:"itemqualrune",epics:"epicrune"},zh=44,bb=72,cde={Quintillion:"capitalist",Septillion:"stinkingrich",Decillion:"runemaster"};function jl({keyName:t,label:e}){const n=ja(t,zh);return s.jsx(dj,{content:e,placement:"bottom",children:s.jsx("div",{className:ot.iconHead,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:zh,height:zh,style:{borderRadius:6,border:"1px solid #2B4C73"}}):s.jsx("div",{style:{width:zh,height:zh,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(n.fallback||e).slice(0,1).toUpperCase()})})})}function dde(){return s.jsx(tP,{})}function ude({id:t,label:e}){const n=ja(t,bb);return s.jsx(dj,{content:e,placement:"bottom",className:ot.achievTooltip,children:s.jsx("div",{className:ot.achiev,children:n.thumb?s.jsx("img",{src:n.thumb,alt:e,width:bb,height:bb,style:{borderRadius:3,border:"1px solid #2C4A73"}}):s.jsx("div",{className:ot.achievImg})})})}const Lv=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1%",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",elemDmg:"11%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",totalRes:"5%",singleRes:"14%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",elemDmg:"12%",itemQuality:"+2%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%"},{tier:"Sextillion",amount:"1 E21",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"10 E22",gold:"11%",singleRes:"17%",elemDmg:"14%",epics:"11%"},{tier:"Sextillion",amount:"100 E23",hp:"4%",totalRes:"6%",singleRes:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",elemDmg:"15%",epics:"12%"},{tier:"Septillion",amount:"10 E25",gold:"13%",xp:"3%",singleRes:"19%",elemDmg:"16%"},{tier:"Septillion",amount:"100 E26",singleRes:"20%",epics:"13%"},{tier:"Octillion",amount:"1 E27",totalRes:"7%",singleRes:"21%",elemDmg:"17%"},{tier:"Octillion",amount:"10 E28",gold:"14%",singleRes:"22%",epics:"14%"},{tier:"Octillion",amount:"100 E29",gold:"15%",elemDmg:"18%"},{tier:"Nonillion",amount:"1 E30",hp:"5%",singleRes:"23%",epics:"15%"},{tier:"Nonillion",amount:"10 E31",totalRes:"8%",singleRes:"24%",elemDmg:"19%"},{tier:"Nonillion",amount:"100 E32",gold:"16%",singleRes:"25%",elemDmg:"20%",epics:"16%"},{tier:"Decillion",amount:"1 E33",xp:"4%",singleRes:"26%"},{tier:"Decillion",amount:"10 E34",gold:"17%",totalRes:"9%",elemDmg:"21%",epics:"17%"},{tier:"Decillion",amount:"100 E35",singleRes:"27%",elemDmg:"22%"},{tier:"Undecillion",amount:"1 E36",gold:"18%",hp:"6%",singleRes:"28%",epics:"18%"},{tier:"Undecillion",amount:"10 E37",elemDmg:"23%"},{tier:"Undecillion",amount:"100 E38",gold:"19%",totalRes:"10%",singleRes:"29%",epics:"19%"},{tier:"Duodecillion",amount:"1 E39",elemDmg:"24%",note:"x2 Boost"},{tier:"Duodecillion",amount:"10 E40",gold:"20%",singleRes:"30%",elemDmg:"25%",epics:"20%"},{tier:"Duodecillion",amount:"100 E41",singleRes:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",totalRes:"11%",singleRes:"32%",elemDmg:"26%",epics:"21%"},{tier:"Tredecillion",amount:"10 E43",hp:"7%",singleRes:"33%"},{tier:"Tredecillion",amount:"100 E44",gold:"22%",singleRes:"34%",elemDmg:"27%",epics:"22%"},{tier:"Quattuordecillion",amount:"1 E45",xp:"5%",elemDmg:"28%"},{tier:"Quattuordecillion",amount:"10 E46",gold:"23%",totalRes:"12%",singleRes:"35%",epics:"23%"},{tier:"Quattuordecillion",amount:"100 E47",singleRes:"36%",elemDmg:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",epics:"24%",note:"x12 Boost"},{tier:"Quindecillion",amount:"10 E49",singleRes:"37%",elemDmg:"30%"},{tier:"Quindecillion",amount:"100 E50",gold:"25%",hp:"8%",totalRes:"13%",singleRes:"38%",itemQuality:"+3%",epics:"25%"},{tier:"Sexdecillion",amount:"1 E51",singleRes:"39%",elemDmg:"31%"},{tier:"Sexdecillion",amount:"10 E52",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"100 E53",singleRes:"40%",elemDmg:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",totalRes:"14%",singleRes:"41%",elemDmg:"33%",epics:"27%"},{tier:"Septendecillion",amount:"10 E55",xp:"6%"},{tier:"Septendecillion",amount:"100 E56",gold:"28%",hp:"9%",singleRes:"42%",elemDmg:"34%",epics:"28%"},{tier:"Octodecillion",amount:"1 E57",singleRes:"43%",elemDmg:"35%",note:"x8 Boost"},{tier:"Octodecillion",amount:"10 E58",gold:"29%",totalRes:"15%",singleRes:"44%",epics:"29%"},{tier:"Octodecillion",amount:"100 E59",singleRes:"45%",elemDmg:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",epics:"30%"},{tier:"Novendecillion",amount:"10 E61",singleRes:"46%",elemDmg:"37%"},{tier:"Novendecillion",amount:"100 E62",gold:"31%",totalRes:"19%",singleRes:"47%",epics:"31%"},{tier:"Vigintillion",amount:"1 E63",hp:"10%",singleRes:"48%",elemDmg:"38%"},{tier:"Vigintillion",amount:"10 E64",gold:"32%",singleRes:"49%",epics:"32%"},{tier:"Vigintillion",amount:"100 E65",xp:"7%",elemDmg:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",totalRes:"17%",elemDmg:"40%",epics:"33%"},{tier:"Unvigintillion",amount:"10 E67",singleRes:"50%"},{tier:"Unvigintillion",amount:"100 E68",gold:"34%",singleRes:"51%",epics:"34%"},{tier:"Duovigintillion",amount:"1 E69",singleRes:"52%",elemDmg:"41%"},{tier:"Duovigintillion",amount:"10 E70",gold:"35%",hp:"11%",totalRes:"18%",singleRes:"53%",elemDmg:"42%",itemQuality:"+4%",epics:"35%",note:"x60 Boost"},{tier:"Duovigintillion",amount:"100 E71",singleRes:"54%",elemDmg:"43%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"55%",elemDmg:"44%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"19%",elemDmg:"45%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",xp:"8%",singleRes:"56%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",singleRes:"57%",elemDmg:"46%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",hp:"12%",singleRes:"58%",elemDmg:"47%"},{tier:"Quinquavigintillion",amount:"1 E78",gold:"39%",totalRes:"20%",elemDmg:"48%",epics:"39%"},{tier:"Quinquavigintillion",amount:"10 E79",singleRes:"59%",elemDmg:"49%"},{tier:"Quinquavigintillion",amount:"100 E80",gold:"40%",singleRes:"60%",elemDmg:"50%",epics:"40%"},{tier:"Sesvigintillion",amount:"1 E81",singleRes:"61%"},{tier:"Sesvigintillion",amount:"10 E82",gold:"41%",totalRes:"21%",singleRes:"62%",elemDmg:"51%",epics:"41%"},{tier:"Sesvigintillion",amount:"100 E83"},{tier:"Septemvigintillion",amount:"1 E84",gold:"42%",hp:"13%",singleRes:"63%",elemDmg:"52%",epics:"42%"},{tier:"Septemvigintillion",amount:"10 E85",xp:"9%",singleRes:"64%"},{tier:"Septemvigintillion",amount:"100 E86",gold:"43%",totalRes:"22%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"65%",elemDmg:"53%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",singleRes:"66%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",totalRes:"23%",singleRes:"67%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",hp:"14%",singleRes:"68%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",itemQuality:"+5%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"69%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",totalRes:"24%",singleRes:"70%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",xp:"10%",singleRes:"71%",elemDmg:"56%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"72%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",hp:"15%",totalRes:"25%",singleRes:"73%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"74%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",singleRes:"75%",elemDmg:"60%",epics:"50%",note:"MAX"},{tier:"Duotrigintillion",amount:"100 E101"},{tier:"Trestrigintillion",amount:"1 E102"},{tier:"Trestrigintillion",amount:"10 E103"},{tier:"Trestrigintillion",amount:"100 E104"},{tier:"Quattuortrigintillion",amount:"1 E105"},{tier:"Quattuortrigintillion",amount:"10 E106"},{tier:"Quattuortrigintillion",amount:"100 E107"},{tier:"Quinquatrigintillion",amount:"1 E108"},{tier:"Quinquatrigintillion",amount:"10 E109"},{tier:"Quinquatrigintillion",amount:"100 E110"},{tier:"Sextrigintillion",amount:"1 E111"},{tier:"Sextrigintillion",amount:"10 E112"},{tier:"Sextrigintillion",amount:"100 E113"},{tier:"Septentrigintillion",amount:"1 E114"},{tier:"Septentrigintillion",amount:"10 E115"},{tier:"Septentrigintillion",amount:"100 E116"},{tier:"Octotrigintillion",amount:"1 E117"},{tier:"Octotrigintillion",amount:"10 E118"},{tier:"Octotrigintillion",amount:"100 E119"},{tier:"Noventrigintillion",amount:"1 E120"},{tier:"Noventrigintillion",amount:"10 E121"},{tier:"Noventrigintillion",amount:"100 E122"},{tier:"Quadragintillion",amount:"1 E123"},{tier:"Quadragintillion",amount:"10 E124"},{tier:"Quadragintillion",amount:"100 E125"},{tier:"Unquadragintillion",amount:"1 E126"},{tier:"Unquadragintillion",amount:"10 E127"},{tier:"Unquadragintillion",amount:"100 E128"},{tier:"Duoquadragintillion",amount:"1 E129"},{tier:"Duoquadragintillion",amount:"10 E130"},{tier:"Duoquadragintillion",amount:"100 E131"},{tier:"Trequadragintillion",amount:"1 E132"},{tier:"Trequadragintillion",amount:"10 E133"},{tier:"Trequadragintillion",amount:"100 E134"},{tier:"Quattuorquadragintillion",amount:"1 E135"},{tier:"Quattuorquadragintillion",amount:"10 E136"},{tier:"Quattuorquadragintillion",amount:"100 E137"},{tier:"Quinquadragintillion",amount:"1 E138"},{tier:"Quinquadragintillion",amount:"10 E139"},{tier:"Quinquadragintillion",amount:"100 E140"},{tier:"Sexquadragintillion",amount:"1 E141"},{tier:"Sexquadragintillion",amount:"10 E142"},{tier:"Sexquadragintillion",amount:"100 E143"},{tier:"Septenquadragintillion",amount:"1 E144"},{tier:"Septenquadragintillion",amount:"10 E145"},{tier:"Septenquadragintillion",amount:"100 E146"},{tier:"Octoquadragintillion",amount:"1 E147"},{tier:"Octoquadragintillion",amount:"10 E148"},{tier:"Octoquadragintillion",amount:"100 E149"},{tier:"Novenquadragintillion",amount:"1 E150"},{tier:"Novenquadragintillion",amount:"10 E151"},{tier:"Novenquadragintillion",amount:"100 E152"}];function _b(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function hde(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function pde(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}function mde(t){const e=t.trim().toLowerCase();return e?Lv.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):Lv}function tP(){const{t}=Hs(),[e,n]=R.useState(""),[r,i]=R.useState(null),a=mde(e),o=R.useMemo(()=>Math.max(...Lv.map(u=>_b(u.amount))),[]),c=R.useMemo(()=>{const u=new Map;for(const p of a)u.has(p.tier)||u.set(p.tier,[]),u.get(p.tier).push(p);const h=Array.from(new Set(Lv.map(p=>p.tier)));return Array.from(u.entries()).sort((p,g)=>h.indexOf(p[0])-h.indexOf(g[0]))},[a]);return s.jsxs("div",{className:ot.wrap,children:[s.jsx("p",{className:ot.description,children:t("guidehub.arenaManager.amRuneBonuses.description")}),s.jsx("div",{className:ot.controls,children:s.jsx("input",{className:ot.search,placeholder:t("guidehub.arenaManager.amRuneBonuses.searchPlaceholder"),value:e,onChange:u=>n(u.target.value)})}),s.jsx("div",{className:ot.tableWrap,children:s.jsxs("table",{className:ot.table,children:[s.jsx("thead",{className:ot.thead,children:s.jsxs("tr",{className:ot.headRow,children:[s.jsx("th",{className:`${ot.th} ${ot.tierCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.tier")}),s.jsx("th",{className:`${ot.th} ${ot.amountCell}`,children:t("guidehub.arenaManager.amRuneBonuses.table.amount")}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.gold,label:t("guidehub.arenaManager.amRuneBonuses.table.goldBonus")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.xp,label:t("guidehub.arenaManager.amRuneBonuses.table.xpBonus")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.hp,label:t("guidehub.arenaManager.amRuneBonuses.table.hpBonus")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.totalRes,label:t("guidehub.arenaManager.amRuneBonuses.table.totalResistance")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.singleRes,label:t("guidehub.arenaManager.amRuneBonuses.table.singleResistance")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.elem,label:t("guidehub.arenaManager.amRuneBonuses.table.elementalDamage")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.item,label:t("guidehub.arenaManager.amRuneBonuses.table.improvedItemQuality")})}),s.jsx("th",{className:ot.th,children:s.jsx(jl,{keyName:wl.epics,label:t("guidehub.arenaManager.amRuneBonuses.table.chancesOfEpics")})}),s.jsx("th",{className:ot.th,children:t("guidehub.arenaManager.amRuneBonuses.table.tags")})]})}),s.jsx("tbody",{children:c.map(([u,h])=>{const p=Math.max(...h.map(w=>_b(w.amount))),g=t(`guidehub.arenaManager.amRuneBonuses.tiers.${u.toLowerCase()}`),y=cde[u],_=y?t(`guidehub.arenaManager.amRuneBonuses.achievements.${y}`):null;return h.map((w,k)=>{var L,N,v,b,I,j,S,C;const E=Math.abs(_b(w.amount)-o)<1e-6,P=pde(w.note);return s.jsxs("tr",{className:ot.dataRow,onMouseEnter:()=>i(u),onMouseLeave:()=>i(null),children:[k===0&&s.jsx("td",{className:`${ot.td} ${ot.tierCell} ${Math.abs(p-o)<1e-6?ot.tierMax:""} ${r===u?ot.tierCellHover:""}`,rowSpan:h.length,children:s.jsxs("div",{className:ot.tierBox,children:[s.jsx("div",{className:ot.tierIcon,children:g.slice(0,1).toUpperCase()}),s.jsxs("div",{className:ot.tierTexts,children:[s.jsx("div",{className:ot.tierName,children:g}),y&&_&&s.jsx(ude,{id:y,label:_})]})]})}),s.jsx("td",{className:`${ot.td} ${ot.amountCell}`,children:w.amount}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(L=w.gold)!=null?L:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(N=w.xp)!=null?N:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(v=w.hp)!=null?v:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(b=w.totalRes)!=null?b:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(I=w.singleRes)!=null?I:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(j=w.elemDmg)!=null?j:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(S=w.itemQuality)!=null?S:""}),s.jsx("td",{className:`${ot.td} ${ot.bonusCell}`,children:(C=w.epics)!=null?C:""}),s.jsxs("td",{className:`${ot.td} ${ot.tags}`,children:[E&&s.jsx("span",{className:`${ot.badge} ${ot.badgeMax}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.max")}),hde(w.note)&&s.jsx("span",{className:`${ot.badge} ${ot.badgeAchiev}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.achievement")}),P==="x2"&&s.jsx("span",{className:`${ot.badge} ${ot.badgeX2}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x2")}),P==="x12"&&s.jsx("span",{className:`${ot.badge} ${ot.badgeX12}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x12")}),P==="x60"&&s.jsx("span",{className:`${ot.badge} ${ot.badgeX60}`,children:t("guidehub.arenaManager.amRuneBonuses.badges.x60")}),P==="x8"&&s.jsx("span",{className:ot.badge,children:t("guidehub.arenaManager.amRuneBonuses.badges.x8")})]})]},`${u}-${k}`)})})})]})})]})}const gde="_wrap_zrza7_11",fde="_headerBar_zrza7_15",vde="_title_zrza7_31",xde="_meta_zrza7_33",yde="_centerCol_zrza7_37",bde="_text_zrza7_53",_de="_imageBox_zrza7_55",wde="_imageFallback_zrza7_57",jde="_credit_zrza7_59",xo={wrap:gde,headerBar:fde,title:vde,meta:xde,centerCol:yde,text:bde,imageBox:_de,imageFallback:wde,credit:jde};function Sde(){const t=ja("ambuildorder"),e=R.useMemo(()=>t.id?`https://drive.google.com/thumbnail?id=${t.id}&sz=w1024`:null,[t.id]),n=R.useMemo(()=>t.id?`https://drive.google.com/uc?export=view&id=${t.id}`:null,[t.id]),r=t.thumb||null,i=e||n||r;return s.jsxs("div",{className:xo.wrap,children:[s.jsxs("div",{className:xo.headerBar,children:[s.jsx("h2",{className:xo.title,children:"Arena Manager  Build Order"}),s.jsx("span",{className:xo.meta,children:"Last updated: 30.11.2024"})]}),s.jsxs("div",{className:xo.centerCol,children:[s.jsxs("div",{className:xo.text,children:[s.jsx("p",{children:"Build your Attractions according to the picture below for maximum efficiency."}),s.jsxs("p",{children:["Upgrading to full Platinum on all Attractions will cost you ",s.jsx("strong",{children:"4300 Mushrooms"}),"."]})]}),i?s.jsx("div",{className:xo.imageBox,children:s.jsx("img",{src:i,alt:"Arena Manager build order",loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):s.jsx("div",{className:xo.imageFallback,children:""}),s.jsxs("p",{className:xo.credit,children:["Credit to ",s.jsx("em",{children:"SF Tavern Discord"}),"."]})]})]})}const Nde=()=>s.jsx(nn,{title:"Hellevator Guide"}),kde=()=>s.jsx(nn,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),Cde=()=>s.jsx(nn,{title:"Event List"}),Tde=()=>s.jsx(nn,{title:"Event Cycle"}),Ide="_foCalc_18a5w_3",Ade="_panel_18a5w_211",Ede="_panelHead_18a5w_227",Rde="_panelTitle_18a5w_241",Pde="_controls_18a5w_243",Lde="_ctrlLabel_18a5w_245",Dde="_ctrlSelect_18a5w_249",Mde="_tableWrap_18a5w_291",Fde="_table_18a5w_291",Bde="_th_18a5w_305",$de="_td_18a5w_321",Ode="_row_18a5w_333",Vde="_note_18a5w_335",ln={foCalc:Ide,panel:Ade,panelHead:Ede,panelTitle:Rde,controls:Pde,ctrlLabel:Lde,ctrlSelect:Dde,tableWrap:Mde,table:Fde,th:Bde,td:$de,row:Ode,note:Vde},sP={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Nn=(t,e=0)=>t*3600+e*60,de=[Nn(0,15),Nn(0,31),Nn(1,6),Nn(2,20),Nn(5,0),Nn(8,0),Nn(11,25),Nn(18,27),Nn(40,0),Nn(87,16),Nn(190,46),Nn(320,0),Nn(480,0),Nn(615,33),Nn(800,0)],hs=[Nn(1054,17),Nn(1122,51),Nn(1245,42),Nn(1343,20),Nn(1440,0)],Ude={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:de[0]},{level:2,wood:150,stone:50,gold:20,timeSec:de[1]},{level:3,wood:440,stone:140,gold:30,timeSec:de[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:de[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:de[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:de[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:de[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:de[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:de[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:de[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:de[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:de[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:de[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:de[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:de[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:hs[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:hs[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:hs[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:hs[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:hs[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:de[0]},{level:2,wood:138,stone:46,gold:10,timeSec:de[1]},{level:3,wood:406,stone:129,gold:15,timeSec:de[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:de[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:de[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:de[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:de[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:de[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:de[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:de[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:de[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:de[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:de[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:de[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:de[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:de[0]},{level:2,wood:28,stone:37,gold:14,timeSec:de[1]},{level:3,wood:81,stone:103,gold:21,timeSec:de[2]},{level:4,wood:203,stone:246,gold:28,timeSec:de[3]},{level:5,wood:462,stone:591,gold:35,timeSec:de[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:de[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:de[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:de[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:de[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:de[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:de[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:de[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:de[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:de[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:de[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:hs[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:hs[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:hs[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:hs[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:hs[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:de[0]},{level:2,wood:160,stone:53,gold:50,timeSec:de[1]},{level:3,wood:469,stone:149,gold:75,timeSec:de[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:de[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:de[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:de[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:de[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:de[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:de[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:de[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:de[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:de[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:de[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:de[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:de[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:de[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:de[0]},{level:2,wood:200,stone:67,gold:30,timeSec:de[1]},{level:3,wood:587,stone:187,gold:45,timeSec:de[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:de[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:de[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:de[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:de[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:de[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:de[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:de[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:de[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:de[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:de[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:de[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:de[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:hs[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:hs[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:hs[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:hs[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:hs[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Nn(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:de[0]},{level:2,wood:30,stone:20,gold:4,timeSec:de[1]},{level:3,wood:88,stone:56,gold:6,timeSec:de[2]},{level:4,wood:220,stone:133,gold:8,timeSec:de[3]},{level:5,wood:500,stone:320,gold:10,timeSec:de[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:de[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:de[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:de[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:de[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:de[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:de[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:de[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:de[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:de[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:de[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:hs[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:hs[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:hs[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:hs[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:hs[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:de[0]},{level:2,wood:90,stone:16,gold:6,timeSec:de[1]},{level:3,wood:264,stone:45,gold:9,timeSec:de[2]},{level:4,wood:660,stone:107,gold:12,timeSec:de[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:de[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:de[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:de[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:de[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:de[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:de[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:de[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:de[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:de[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:de[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:de[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:hs[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:hs[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:hs[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:hs[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:hs[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:de[0]},{level:2,wood:82,stone:55,gold:8,timeSec:de[1]},{level:3,wood:240,stone:153,gold:12,timeSec:de[2]},{level:4,wood:600,stone:364,gold:16,timeSec:de[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:de[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:de[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:de[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:de[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:de[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:de[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:de[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:de[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:de[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:de[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:de[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:de[0]},{level:2,wood:100,stone:33,gold:8,timeSec:de[1]},{level:3,wood:293,stone:93,gold:12,timeSec:de[2]},{level:4,wood:733,stone:222,gold:16,timeSec:de[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:de[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:de[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:de[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:de[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:de[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:de[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:de[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:de[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:de[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:de[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:de[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:hs[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:hs[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:hs[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:hs[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:hs[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:de[0]},{level:2,wood:240,stone:61,gold:12,timeSec:de[1]},{level:3,wood:675,stone:205,gold:18,timeSec:de[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:de[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:de[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:de[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:de[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:de[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:de[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:de[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:de[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:de[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:de[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:de[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:de[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:de[0]},{level:2,wood:164,stone:27,gold:10,timeSec:de[1]},{level:3,wood:480,stone:76,gold:15,timeSec:de[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:de[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:de[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:de[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:de[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:de[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:de[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:de[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:de[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:de[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:de[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:de[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:de[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:de[0]},{level:2,wood:120,stone:53,gold:30,timeSec:de[1]},{level:3,wood:352,stone:149,gold:45,timeSec:de[2]},{level:4,wood:880,stone:356,gold:60,timeSec:de[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:de[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:de[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:de[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:de[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:de[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:de[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:de[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:de[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:de[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:de[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:de[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:hs[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:hs[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:hs[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:hs[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:hs[4]}]}},Gde=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],zde="fortress",Hde={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function Wde(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function GT(t){const e=Math.max(0,Math.round(t)),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=o=>o.toString().padStart(2,"0");return`${a(n)}:${a(r)}:${a(i)}`}const nP=()=>{const[t,e]=R.useState(zde),[n,r]=R.useState(1),i=R.useMemo(()=>{var p;const c=Hde[t],u=sP[c],h=(p=u==null?void 0:u.id)!=null?p:u;return rd.gifProxy(h)||rd.gif(h)||""},[t]),a=R.useMemo(()=>{var c,u;return(u=(c=Ude[t])==null?void 0:c.costs)!=null?u:[]},[t]),o=R.useMemo(()=>Wde(n),[n]);return s.jsxs("div",{className:`${ln.foCalc}`,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:"Select building"}),s.jsx("select",{className:"tabSelect",value:t,onChange:c=>e(c.target.value),children:Gde.map(c=>s.jsx("option",{value:c.key,children:c.label},c.key))})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:i?s.jsx("img",{src:i,alt:t}):null}),s.jsxs("div",{className:ln.panel,children:[s.jsxs("div",{className:ln.panelHead,children:[s.jsxs("div",{className:ln.panelTitle,children:["Fortress  ",t]}),s.jsxs("div",{className:ln.controls,children:[s.jsx("span",{className:ln.ctrlLabel,children:"L2 (Laborers)"}),s.jsx("select",{className:ln.ctrlSelect,value:n,onChange:c=>r(parseInt(c.target.value,10)),children:Array.from({length:16},(c,u)=>u).map(c=>s.jsx("option",{value:c,children:c},c))})]})]}),s.jsx("div",{className:ln.tableWrap,children:s.jsxs("table",{className:ln.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:ln.th,children:"Level"}),s.jsx("th",{className:ln.th,children:"Wood"}),s.jsx("th",{className:ln.th,children:"Stone"}),s.jsx("th",{className:ln.th,children:"Build Time"}),s.jsx("th",{className:ln.th,children:"Build Time (L2)"}),s.jsx("th",{className:ln.th,children:"Skip (Mushr.)"})]})}),s.jsx("tbody",{children:a.map(c=>{var g,y,_,w,k,E,P;const u=(g=c.timeSec)!=null?g:0,h=Math.round(u*(1-o)),p=Math.ceil(Math.ceil(h/60)/10);return s.jsxs("tr",{className:ln.row,children:[s.jsx("td",{className:ln.td,children:c.level}),s.jsx("td",{className:ln.td,children:(w=(_=(y=c.wood)==null?void 0:y.toLocaleString)==null?void 0:_.call(y))!=null?w:c.wood}),s.jsx("td",{className:ln.td,children:(P=(E=(k=c.stone)==null?void 0:k.toLocaleString)==null?void 0:E.call(k))!=null?P:c.stone}),s.jsx("td",{className:ln.td,children:GT(u)}),s.jsx("td",{className:ln.td,children:GT(h)}),s.jsx("td",{className:ln.td,children:p.toLocaleString()})]},c.level)})})]})}),s.jsx("div",{className:ln.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},Kde="_uwCalc_64lws_3",qde="_panel_64lws_211",Qde="_panelHead_64lws_227",Yde="_panelTitle_64lws_241",Xde="_controls_64lws_243",Jde="_ctrlLabel_64lws_245",Zde="_ctrlSelect_64lws_251",eue="_tableWrap_64lws_295",tue="_table_64lws_295",sue="_th_64lws_309",nue="_td_64lws_325",rue="_row_64lws_337",iue="_note_64lws_339",qs={uwCalc:Kde,panel:qde,panelHead:Qde,panelTitle:Yde,controls:Xde,ctrlLabel:Jde,ctrlSelect:Zde,tableWrap:eue,table:tue,th:sue,td:nue,row:rue,note:iue},aue={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},oue={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function lue(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function cue(t){const e=Math.max(0,t),n=Math.round(e),r=Math.floor(n/3600),i=Math.floor(n%3600/60),a=n%60;return{h:r,m:i,s:a}}function zT(t){const{h:e,m:n,s:r}=cue(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(n)}:${i(r)}`}function due(t,e){var i,a;const n=lue(e);return((a=(i=oue[t])==null?void 0:i.costs)!=null?a:[]).map(o=>{const c=o.timeSec*(1-n),u=Math.ceil(Math.ceil(c/60)/10);return{...o,timeAdjSec:c,skipMushroomsAdj:u}})}const uue=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],rP=()=>{const[t,e]=R.useState("hearthofdarkngif"),[n,r]=R.useState(1),i=R.useMemo(()=>{var h;const c=sP[t],u=(h=c==null?void 0:c.id)!=null?h:c;return rd.gifProxy(u)||rd.gif(u)||""},[t]),a=R.useMemo(()=>{var c;return(c=aue[t])!=null?c:"hearthofdarkn"},[t]),o=R.useMemo(()=>due(a,n),[a,n]);return s.jsxs("div",{className:qs.uwCalc,children:[s.jsxs("div",{className:"tabs",children:[s.jsx("span",{className:"tabSelectLabel",children:"Select building"}),s.jsx("select",{className:"tabSelect",value:t,onChange:c=>e(c.target.value),children:uue.map(c=>s.jsx("option",{value:c,children:c.replace(/gif$/i,"")},c))})]}),s.jsxs("div",{className:"mediaRow",children:[s.jsx("div",{className:"media",children:i?s.jsx("img",{src:i,alt:t}):null}),s.jsxs("div",{className:qs.panel,children:[s.jsxs("div",{className:qs.panelHead,children:[s.jsxs("div",{className:qs.panelTitle,children:["Underworld  ",a]}),s.jsxs("div",{className:qs.controls,children:[s.jsx("label",{htmlFor:"uw-l2",className:qs.ctrlLabel,children:"L2 (Laborers)"}),s.jsx("select",{id:"uw-l2",className:qs.ctrlSelect,value:n,onChange:c=>r(parseInt(c.target.value,10)),children:Array.from({length:15},(c,u)=>u+1).map(c=>s.jsx("option",{value:c,children:c},c))})]})]}),s.jsx("div",{className:qs.tableWrap,children:s.jsxs("table",{className:qs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:qs.th,children:"Level"}),s.jsx("th",{className:qs.th,children:"Soul"}),s.jsx("th",{className:qs.th,children:"Gold"}),s.jsx("th",{className:qs.th,children:"Build Time"}),s.jsx("th",{className:qs.th,children:"Build Time (L2)"}),s.jsx("th",{className:qs.th,children:"Skip (Mushr.)"})]})}),s.jsx("tbody",{children:o.length===0?s.jsx("tr",{className:qs.row,children:s.jsx("td",{className:qs.td,colSpan:6,children:"No data for this building yet."})}):o.map(c=>s.jsxs("tr",{className:qs.row,children:[s.jsx("td",{className:qs.td,children:c.level}),s.jsx("td",{className:qs.td,children:c.soul}),s.jsx("td",{className:qs.td,children:c.gold}),s.jsx("td",{className:qs.td,children:zT(c.timeSec)}),s.jsx("td",{className:qs.td,children:zT(c.timeAdjSec)}),s.jsx("td",{className:qs.td,children:c.skipMushroomsAdj})]},c.level))})]})}),s.jsx("p",{className:qs.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},hue=()=>s.jsx(nn,{title:"Max Item Stats Calculator"}),pue="_wrap_mnr0g_1",mue="_card_mnr0g_13",gue="_title_mnr0g_33",fue="_form_mnr0g_45",vue="_field_mnr0g_57",xue="_input_mnr0g_71",yue="_gemsRow_mnr0g_87",bue="_gemBox_mnr0g_101",_ue="_disabled_mnr0g_127",wue="_gemImg_mnr0g_135",jue="_gemFallback_mnr0g_149",Sue="_normalGem_mnr0g_165",Nue="_blackGem_mnr0g_173",kue="_legendaryGem_mnr0g_181",Cue="_gemLabel_mnr0g_189",Tue="_gemValue_mnr0g_199",Iue="_hint_mnr0g_211",ys={wrap:pue,card:mue,title:gue,form:fue,field:vue,input:xue,gemsRow:yue,gemBox:bue,disabled:_ue,gemImg:wue,gemFallback:jue,normalGem:Sue,blackGem:Nue,legendaryGem:kue,gemLabel:Cue,gemValue:Tue,hint:Iue},Aue={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},Eue=.25,Dv=t=>Math.round(Number.isFinite(t)?t:0);function Rue(t){const e=Number(t.charLevel),n=Number(t.mineLevel),r=Number(t.guildHoK);if(n<25){const E=e*Eue*(1+(n-1)*.25)+r/3;return Dv(E)}const{A:i,B:a,C:o,D:c,E:u,F:h,G:p,H:g,I:y,J:_}=Aue,k=i+a*e+o/n+c*e**2+u/n**2+h*e/n+p*e**3+g/n**3+y*e/n**2+_*e**2/n+r/3;return Dv(k)}function Pue(t){return Dv(t*(2/3))}function Lue(t){return Dv(t)}const wb={char:1e3,mine:100,hok:1e3},iP=({initialState:t,onStateChange:e})=>{var k,E,P;const[n,r]=R.useState((k=t==null?void 0:t.charLevel)!=null?k:""),[i,a]=R.useState((E=t==null?void 0:t.mineLevel)!=null?E:""),[o,c]=R.useState((P=t==null?void 0:t.guildHoKLevel)!=null?P:""),u=(L,N,v)=>{e&&(typeof L!="number"||typeof N!="number"||typeof v!="number"||e({charLevel:L,mineLevel:N,guildHoKLevel:v}))},h=R.useMemo(()=>n===""||i===""||o===""?null:Rue({charLevel:Number(n),mineLevel:Number(i),guildHoK:Number(o)}),[n,i,o]),p=R.useMemo(()=>h==null?null:Pue(h),[h]),g=R.useMemo(()=>h==null?null:Lue(h),[h]),y=qc("luckbig"),_=qc("blackbig"),w=qc("legendarybig");return s.jsx("div",{className:ys.wrap,children:s.jsxs("div",{className:ys.card,children:[s.jsx("h2",{className:ys.title,children:"Gem Calculator"}),s.jsxs("div",{className:ys.form,children:[s.jsxs("label",{className:ys.field,children:[s.jsx("span",{children:"Char Level"}),s.jsx("input",{type:"number",inputMode:"numeric",className:ys.input,placeholder:"e.g., 360",value:n,onChange:L=>{const N=L.currentTarget.value;if(N===""){r("");return}const v=Number(N),b=Number.isFinite(v)?v:"";r(b),u(b,i,o)},max:wb.char})]}),s.jsxs("label",{className:ys.field,children:[s.jsx("span",{children:"Mine Level"}),s.jsx("input",{type:"number",inputMode:"numeric",className:ys.input,placeholder:"e.g., 10",value:i,onChange:L=>{const N=L.currentTarget.value;if(N===""){a("");return}const v=Number(N),b=Number.isFinite(v)?v:"";a(b),u(n,b,o)},max:wb.mine})]}),s.jsxs("label",{className:ys.field,children:[s.jsx("span",{children:"Guild HoK"}),s.jsx("input",{type:"number",inputMode:"numeric",className:ys.input,placeholder:"e.g., 840",value:o,onChange:L=>{const N=L.currentTarget.value;if(N===""){c("");return}const v=Number(N),b=Number.isFinite(v)?v:"";c(b),u(n,i,b)},max:wb.hok})]})]}),s.jsxs("div",{className:ys.gemsRow,children:[s.jsxs("div",{className:`${ys.gemBox} ${h==null?ys.disabled:""}`,children:[y?s.jsx("img",{className:ys.gemImg,src:y,alt:"Normal Gem"}):s.jsx("div",{className:`${ys.gemFallback} ${ys.normalGem}`}),s.jsx("div",{className:ys.gemLabel,children:"Normal"}),s.jsx("div",{className:ys.gemValue,children:h!=null?h:"-"})]}),s.jsxs("div",{className:`${ys.gemBox} ${p==null?ys.disabled:""}`,children:[_?s.jsx("img",{className:ys.gemImg,src:_,alt:"Black Gem"}):s.jsx("div",{className:`${ys.gemFallback} ${ys.blackGem}`}),s.jsx("div",{className:ys.gemLabel,children:"Black"}),s.jsx("div",{className:ys.gemValue,children:p!=null?p:"-"})]}),s.jsxs("div",{className:`${ys.gemBox} ${g==null?ys.disabled:""}`,children:[w?s.jsx("img",{className:ys.gemImg,src:w,alt:"Legendary Gem"}):s.jsx("div",{className:`${ys.gemFallback} ${ys.legendaryGem}`}),s.jsx("div",{className:ys.gemLabel,children:"Legendary"}),s.jsx("div",{className:ys.gemValue,children:g!=null?g:"-"})]})]}),s.jsxs("p",{className:ys.hint,children:["The values are approximations and represent the ",s.jsx("em",{children:"max possible"})," you can find. Actual results may vary slightly."]})]})})},Due="_container_19zdf_1",Mue="_headerBar_19zdf_13",Fue="_title_19zdf_31",Bue="_meta_19zdf_47",$ue="_description_19zdf_59",Hh={container:Due,headerBar:Mue,title:Fue,meta:Bue,description:$ue},aP=({title:t,meta:e,description:n})=>s.jsxs("header",{className:Hh.container,children:[s.jsxs("div",{className:Hh.headerBar,children:[s.jsx("h2",{className:Hh.title,children:t}),e&&s.jsx("span",{className:Hh.meta,children:e})]}),n&&s.jsx("p",{className:Hh.description,children:n})]}),Oue=()=>s.jsxs(s.Fragment,{children:[s.jsx(aP,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:s.jsxs(s.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",s.jsx("em",{children:"max possible"})," you can find."]})}),s.jsx(iP,{})]}),Vue="_wrapper_67xyv_1",Uue="_panel_67xyv_11",Gue="_header_67xyv_27",zue="_title_67xyv_41",Hue="_resetBtn_67xyv_53",Wue="_table_67xyv_73",Kue="_row_67xyv_99",que="_name_67xyv_115",Que="_selectCell_67xyv_125",Yue="_sumCell_67xyv_143",Xue="_footer_67xyv_155",Jue="_footerLine_67xyv_175",Zue="_note_67xyv_187",kn={wrapper:Vue,panel:Uue,header:Gue,title:zue,resetBtn:Hue,table:Wue,row:Kue,name:que,selectCell:Que,sumCell:Yue,footer:Xue,footerLine:Jue,note:Zue};function bp(t,e,n){var o;if(!Array.isArray(t)||e<=0||n<=0)return 0;const r=Math.min(e,n),i=Math.max(e,n);let a=0;for(let c=r;c<=i;c++)a+=(o=t[c])!=null?o:0;return a}function ehe(t){const e=[0];for(let n=1;n<=t;n++)e.push(n);return e}function Yt(t,e){const n=[0,...t.map(r=>Number(r)||0)];if(e&&n.length<e+1)for(;n.length<e+1;)n.push(0);return n}const the=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:Yt([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:Yt([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:Yt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:Yt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:Yt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"light_19_easteros",name:"19 Easteros",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:Yt([0,0,0,9e8,0,0,0,0,0,0],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:Yt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:Yt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:Yt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)}],she=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:Yt([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:Yt([165631756,175491135,186285917,197984244,210662291,224327317,239040847,254786681,271632931,301959487],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:Yt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:Yt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:Yt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"shadow_19_easteros",name:"Easteros",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:Yt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:Yt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:Yt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:Yt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:Yt([0,0,0,0,0,0,0,0,0,0],10)}],HT=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],nhe=(()=>{const t=[0,...HT],e=1e3-HT.length;for(let n=0;n<e;n++)t.push(3e7);return t})(),rhe=Yt([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),ihe=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),Co={light:the.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:she.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:nhe,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:rhe,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:ihe,specialType:"sandstorm"}]},Mv=t=>t.toLocaleString("en-US");function WT(){const t={},e={},n={};return Co.light.forEach(r=>t[r.key]={from:0,to:0}),Co.shadow.forEach(r=>e[r.key]={from:0,to:0}),Co.special.forEach(r=>{r.specialType==="twister"?n[r.key]={from:486,to:1e3}:r.specialType==="cloi"?n[r.key]={from:2,to:11}:n[r.key]={from:0,to:0}}),{light:t,shadow:e,special:n}}function oP({row:t,range:e,onChange:n}){var c,u;const r=R.useMemo(()=>ehe(t.maxLevel),[t.maxLevel]),i=(c=e.from)!=null?c:0,a=(u=e.to)!=null?u:0,o=R.useMemo(()=>i===0||a===0?0:bp(t.levels,i,a),[t.levels,i,a]);return s.jsxs("tr",{className:kn.row,children:[s.jsx("td",{className:kn.name,children:t.name}),s.jsx("td",{className:kn.selectCell,children:s.jsx("select",{value:i,onChange:h=>n({from:Number(h.target.value),to:a}),children:r.map(h=>s.jsx("option",{value:h,children:h===0?"":h},h))})}),s.jsx("td",{className:kn.selectCell,children:s.jsx("select",{value:a,onChange:h=>n({from:i,to:Number(h.target.value)}),children:r.map(h=>s.jsx("option",{value:h,children:h===0?"":h},h))})}),s.jsxs("td",{className:kn.sumCell,children:[Mv(o)," XP"]})]})}function KT({title:t,rows:e,ranges:n,setRanges:r}){const i=R.useMemo(()=>e.reduce((a,o)=>{const c=n[o.key]||{from:0,to:0};return a+bp(o.levels,c.from,c.to)},0),[e,n]);return s.jsxs("div",{className:kn.panel,children:[s.jsx("div",{className:kn.header,children:s.jsx("div",{className:kn.title,children:t})}),s.jsxs("table",{className:kn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum XP"})]})}),s.jsx("tbody",{children:e.map(a=>{var o;return s.jsx(oP,{row:a,range:(o=n[a.key])!=null?o:{from:0,to:0},onChange:c=>r(a.key,c)},a.key)})})]}),s.jsx("div",{className:kn.footer,children:s.jsxs("div",{className:kn.footerLine,children:[s.jsxs("span",{children:["Sum Total ",t]}),s.jsxs("span",{children:[Mv(i)," XP"]})]})})]})}function lP({initialState:t,onStateChange:e}){var L,N,v;const n=R.useMemo(()=>WT(),[]),[r,i]=R.useState((L=t==null?void 0:t.light)!=null?L:n.light),[a,o]=R.useState((N=t==null?void 0:t.shadow)!=null?N:n.shadow),[c,u]=R.useState((v=t==null?void 0:t.special)!=null?v:n.special),h=(b,I,j)=>{e&&e({light:b,shadow:I,special:j})},p=(b,I)=>{i(j=>{const S={...j,[b]:I};return h(S,a,c),S})},g=(b,I)=>{o(j=>{const S={...j,[b]:I};return h(r,S,c),S})},y=(b,I)=>{u(j=>{const S={...j,[b]:I};return h(r,a,S),S})};R.useEffect(()=>{var b,I,j;if(t){i((b=t.light)!=null?b:n.light),o((I=t.shadow)!=null?I:n.shadow),u((j=t.special)!=null?j:n.special);return}i(n.light),o(n.shadow),u(n.special)},[t,n]);const _=R.useMemo(()=>Co.light.reduce((b,I)=>{const j=r[I.key];return b+(j?bp(I.levels,j.from,j.to):0)},0),[r]),w=R.useMemo(()=>Co.shadow.reduce((b,I)=>{const j=a[I.key];return b+(j?bp(I.levels,j.from,j.to):0)},0),[a]),k=R.useMemo(()=>Co.special.reduce((b,I)=>{const j=c[I.key];return b+(j?bp(I.levels,j.from,j.to):0)},0),[c]),E=_+w+k,P=()=>{const b=WT();i(b.light),o(b.shadow),u(b.special),h(b.light,b.shadow,b.special)};return s.jsxs("div",{className:kn.wrapper,children:[s.jsx(KT,{title:"Light World",rows:Co.light,ranges:r,setRanges:p}),s.jsx(KT,{title:"Shadow World",rows:Co.shadow,ranges:a,setRanges:g}),s.jsxs("div",{className:kn.panel,children:[s.jsxs("div",{className:kn.header,children:[s.jsx("div",{className:kn.title,children:"Special Dungeons"}),s.jsx("button",{className:kn.resetBtn,onClick:P,children:"RESET"})]}),s.jsxs("table",{className:kn.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Dungeon"}),s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum"})]})}),s.jsx("tbody",{children:Co.special.map(b=>{var I;return s.jsx(oP,{row:b,range:(I=c[b.key])!=null?I:{from:0,to:0},onChange:j=>y(b.key,j)},b.key)})})]}),s.jsxs("div",{className:kn.footer,children:[s.jsxs("div",{className:kn.footerLine,children:[s.jsx("span",{children:"Sum Total Special"}),s.jsxs("span",{children:[Mv(k)," XP"]})]}),s.jsxs("div",{className:kn.footerLine,children:[s.jsx("span",{children:"Total XP"}),s.jsxs("span",{children:[Mv(E)," XP"]})]}),s.jsxs("div",{className:kn.note,children:["Flle die XP-Arrays in ",s.jsx("code",{children:"src/lib/calculators/dungeonPauseOpenXP/data.ts"}),", dann rechnet es 1:1 wie im Sheet."]})]})]})]})}function ahe(){return s.jsx("div",{style:{padding:12},children:s.jsx(lP,{})})}const ohe=()=>s.jsx(nn,{title:"Progression  Early Game"}),lhe="_wrap_n2poq_31",che="_title_n2poq_33",dhe="_infoBox_n2poq_39",uhe="_infoTitle_n2poq_63",hhe="_infoList_n2poq_73",phe="_section_n2poq_89",mhe="_h2_n2poq_101",ghe="_h3_n2poq_103",fhe="_intro_n2poq_105",vhe="_ul_n2poq_107",xhe="_img_n2poq_113",Vs={wrap:lhe,title:che,infoBox:dhe,infoTitle:uhe,infoList:hhe,section:phe,h2:mhe,h3:ghe,intro:fhe,ul:vhe,img:xhe},yhe=()=>{fi();const t=[qc("first-weekend-guide-day1",900),qc("first-weekend-guide-day2",900),qc("first-weekend-guide-day3",900)];return s.jsxs("div",{className:Vs.wrap,children:[s.jsx("h1",{className:Vs.title,children:"First Weekend Guide"}),s.jsxs("aside",{className:Vs.infoBox,role:"note","aria-label":"Important Level Tips",children:[s.jsx("div",{className:Vs.infoTitle,children:"Important Level Tips"}),s.jsxs("ul",{className:Vs.infoList,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),s.jsx("p",{className:Vs.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),s.jsxs("div",{className:Vs.section,children:[s.jsx("h2",{className:Vs.h2,children:"Preparation before launch"}),s.jsxs("ul",{className:Vs.ul,children:[s.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),s.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),s.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),s.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),s.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),s.jsxs("div",{className:Vs.section,children:[s.jsx("h2",{className:Vs.h2,children:"Day 1"}),s.jsx("h3",{className:Vs.h3,children:"Level 13"}),s.jsxs("ul",{className:Vs.ul,children:[s.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),s.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&s.jsx("img",{className:Vs.img,src:t[0],alt:"Day 1 overview"})]}),s.jsxs("div",{className:Vs.section,children:[s.jsx("h3",{className:Vs.h3,children:"Level 410"}),s.jsxs("ul",{className:Vs.ul,children:[s.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),s.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),s.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),s.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),s.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),s.jsxs("div",{className:Vs.section,children:[s.jsx("h2",{className:Vs.h2,children:"Day 2"}),s.jsx("h3",{className:Vs.h3,children:"Level 1015"}),s.jsxs("ul",{className:Vs.ul,children:[s.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),s.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),s.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),s.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&s.jsx("img",{className:Vs.img,src:t[1],alt:"Day 2 overview"})]}),s.jsxs("div",{className:Vs.section,children:[s.jsx("h2",{className:Vs.h2,children:"Day 3"}),s.jsx("h3",{className:Vs.h3,children:"Level 1520"}),s.jsxs("ul",{className:Vs.ul,children:[s.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),s.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&s.jsx("img",{className:Vs.img,src:t[2],alt:"Day 3 overview"})]})]})},bhe=()=>s.jsx(nn,{title:"Max Item Stats Calculator"}),_he=()=>s.jsx(nn,{title:"Fortress Package skip order (Early)"}),whe=()=>s.jsx(nn,{title:"Underworld Pro Package skip order (Early)"}),jhe=()=>s.jsx(nn,{title:"Gem Calculator (Early)"}),She=()=>s.jsx(nn,{title:"Fortress attack duplication guide (Early)"}),Nhe=()=>s.jsx(nn,{title:"Progression  Mid Game"}),khe="_wrap_1x7jo_31",Che="_header_1x7jo_35",The="_titles_1x7jo_55",Ihe="_h1_1x7jo_57",Ahe="_lead_1x7jo_59",Ehe="_ctaRow_1x7jo_63",Rhe="_cta_1x7jo_63",Phe="_section_1x7jo_85",Lhe="_sectionGrid_1x7jo_87",Dhe="_card_1x7jo_99",Mhe="_h2_1x7jo_103",Fhe="_h3_1x7jo_105",Bhe="_p_1x7jo_107",$he="_ul_1x7jo_111",Ohe="_ol_1x7jo_111",Vhe="_figure_1x7jo_117",Uhe="_figureNarrow_1x7jo_139",Ghe="_img_1x7jo_149",zhe="_fallbackImg_1x7jo_151",Hhe="_figCaption_1x7jo_159",Whe="_tableWrap_1x7jo_163",Khe="_table_1x7jo_163",qhe="_footer_1x7jo_217",Qhe="_tools_1x7jo_219",Yhe="_toolBtn_1x7jo_221",ls={wrap:khe,header:Che,titles:The,h1:Ihe,lead:Ahe,ctaRow:Ehe,cta:Rhe,section:Phe,sectionGrid:Lhe,card:Dhe,h2:Mhe,h3:Fhe,p:Bhe,ul:$he,ol:Ohe,figure:Vhe,figureNarrow:Uhe,img:Ghe,fallbackImg:zhe,figCaption:Hhe,tableWrap:Whe,table:Khe,footer:qhe,tools:Qhe,toolBtn:Yhe},Xhe=1400;function Jhe(){const t=R.useMemo(()=>qc("goldxpcurve",Xhe),[]);return s.jsxs("div",{className:ls.wrap,children:[s.jsxs("header",{className:ls.header,children:[s.jsxs("div",{className:ls.titles,children:[s.jsx("h1",{className:ls.h1,children:"Dungeon Pause"}),s.jsx("p",{className:ls.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),s.jsxs("div",{className:ls.ctaRow,children:[s.jsx(As,{className:ls.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),s.jsx(As,{className:ls.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),s.jsxs("section",{className:ls.section,children:[s.jsx("h2",{className:ls.h2,children:"Worum gehts?"}),s.jsxs("p",{className:ls.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",s.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",s.jsx("strong",{children:"Level 370"})," und endet um ",s.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),s.jsxs("section",{className:ls.section,children:[s.jsx("h3",{className:ls.h3,children:"XP & Gold  Verlauf"}),s.jsxs("div",{className:`${ls.figure} ${ls.figureNarrow}`,children:[t?s.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:ls.img}):s.jsx("div",{className:ls.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),s.jsx("div",{className:ls.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),s.jsxs("section",{className:ls.sectionGrid,children:[s.jsxs("div",{className:ls.card,children:[s.jsx("h3",{className:ls.h3,children:"Start & Ende"}),s.jsxs("ul",{className:ls.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",s.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",s.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),s.jsxs("div",{className:ls.card,children:[s.jsx("h3",{className:ls.h3,children:"Twister & Light/Shadow"}),s.jsxs("ul",{className:ls.ul,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Twister:"})," bei ca. ",s.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),s.jsxs("li",{children:["Whrend der Pause weiterhin ",s.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",s.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",s.jsx("em",{children:"Devilsatt"})," &"," ",s.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),s.jsxs("section",{className:ls.section,children:[s.jsx("h3",{className:ls.h3,children:"Vorgehen"}),s.jsxs("ol",{className:ls.ol,children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",s.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",s.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",s.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),s.jsxs("section",{className:ls.section,children:[s.jsx("h3",{className:ls.h3,children:"Kompaktbersicht"}),s.jsx("div",{className:ls.tableWrap,children:s.jsxs("table",{className:ls.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Aspekt"}),s.jsx("th",{children:"Empfehlung"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{children:"Start (Faustregel)"}),s.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Ende (Faustregel)"}),s.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Open XP vor Eintritt"}),s.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Twister"}),s.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Light/Shadow"}),s.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Whrend der Pause"}),s.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Pets"}),s.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),s.jsxs("tr",{children:[s.jsx("td",{children:"Optimaler Exit"}),s.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),s.jsx("footer",{className:ls.footer,children:s.jsxs("div",{className:ls.tools,children:[s.jsx(As,{className:ls.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),s.jsx(As,{className:ls.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const Zhe=()=>s.jsx(nn,{title:"Dungeon Pause open XP Calculator"}),epe="_wrap_1uhww_3",tpe="_headerBar_1uhww_15",spe="_title_1uhww_33",npe="_meta_1uhww_45",rpe="_description_1uhww_55",ipe="_section_1uhww_69",ape="_sectionTitle_1uhww_77",ope="_steps_1uhww_87",$a={wrap:epe,headerBar:tpe,title:spe,meta:npe,description:rpe,section:ipe,sectionTitle:ape,steps:ope};function lpe(){return s.jsxs("div",{className:$a.wrap,children:[s.jsxs("div",{className:$a.headerBar,children:[s.jsx("h2",{className:$a.title,children:"Dungeon Pause Exit"}),s.jsx("span",{className:$a.meta,children:"Last updated: 28.03.2025"})]}),s.jsx("p",{className:$a.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),s.jsxs("section",{className:$a.section,children:[s.jsx("h3",{className:$a.sectionTitle,children:"Sequence for the Exit"}),s.jsxs("ol",{className:$a.steps,children:[s.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),s.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),s.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),s.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),s.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),s.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),s.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),s.jsxs("section",{className:$a.section,children:[s.jsx("h3",{className:$a.sectionTitle,children:"Extra Tip"}),s.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const cpe=()=>s.jsx(nn,{title:"Gem Calculator (Mid)"}),dpe=()=>s.jsx(nn,{title:"Calendar Skip"}),upe=()=>s.jsx(nn,{title:"Progression  Late Game"}),hpe="_layout_13sgm_29",ppe="_side_13sgm_49",mpe="_sideHead_13sgm_61",gpe="_search_13sgm_71",fpe="_spotBtn_13sgm_89",vpe="_sideList_13sgm_109",xpe="_sideItem_13sgm_111",ype="_active_13sgm_119",bpe="_sideTitle_13sgm_121",_pe="_ico_13sgm_123",wpe="_badge_13sgm_125",jpe="_detail_13sgm_139",Spe="_detailInner_13sgm_141",Npe="_detailHead_13sgm_143",kpe="_detailTitle_13sgm_145",Cpe="_empty_13sgm_147",Tpe="_grid_13sgm_151",Ipe="_card_13sgm_157",Ape="_cardHead_13sgm_175",Epe="_btnGrid_13sgm_177",Rpe="_itemBtn_13sgm_179",Ppe="_spotWrap_13sgm_203",Lpe="_spot_13sgm_89",Dpe="_spotHead_13sgm_227",Mpe="_spotSearch_13sgm_235",Fpe="_spotClose_13sgm_243",Bpe="_spotList_13sgm_253",$pe="_spotItem_13sgm_255",Ope="_spotItemEmpty_13sgm_259",Vpe="_spotCat_13sgm_261",Upe="_spotLabel_13sgm_263",Gpe="_mark_13sgm_267",ts={layout:hpe,side:ppe,sideHead:mpe,search:gpe,spotBtn:fpe,sideList:vpe,sideItem:xpe,active:ype,sideTitle:bpe,ico:_pe,badge:wpe,detail:jpe,detailInner:Spe,detailHead:Npe,detailTitle:kpe,empty:Cpe,grid:Tpe,card:Ipe,cardHead:Ape,btnGrid:Epe,itemBtn:Rpe,spotWrap:Ppe,spot:Lpe,spotHead:Dpe,spotSearch:Mpe,spotClose:Fpe,spotList:Bpe,spotItem:$pe,spotItemEmpty:Ope,spotCat:Vpe,spotLabel:Upe,mark:Gpe};function zpe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wh(t,e){if(!e)return t;const n=new RegExp(`(${zpe(e)})`,"ig");return t.replace(n,`<mark class="${ts.mark}">$1</mark>`)}function qT(t){if(!t||!t.length)return 0;let e=0;for(const n of t)if(n.sub2&&n.sub2.length)if(n.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of n.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=n.sub2.length;else e+=1;return e}function Hpe(t){const e=[];for(const n of t){const r=n.label;if(!(!n.sub||!n.sub.length))for(const i of n.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(o=>o.sub2&&o.sub2.length))for(const o of i.sub2)if(o.sub2&&o.sub2.length)for(const c of o.sub2)e.push({full:`${r}  ${i.label}  ${o.label}  ${c.label}`,catKey:n.key,subKey:i.key,sub2Key:c.key});else e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else for(const o of i.sub2)e.push({full:`${r}  ${i.label}  ${o.label}`,catKey:n.key,subKey:i.key,sub2Key:o.key});else e.push({full:`${r}  ${i.label}`,catKey:n.key,subKey:i.key})}return e}function Wpe(t,e){var n;return e&&t.some(r=>r.key===e)?e:((n=t==null?void 0:t[0])==null?void 0:n.key)||""}const Kpe=({categories:t,onNavigate:e,autoFocusSearch:n})=>{const[r,i]=R.useState(()=>{var L;return((L=t==null?void 0:t[0])==null?void 0:L.key)||""}),[a,o]=R.useState(""),[c,u]=R.useState(!1),h=R.useRef(null),p=R.useMemo(()=>{const L=a.trim().toLowerCase();if(!L)return t;const N=v=>v.toLowerCase().includes(L);return t.map(v=>{const b=N(v.label),I=[];for(const j of v.sub||[]){const S=N(j.label);if(j.sub2&&j.sub2.length)if(j.sub2.some(M=>M.sub2&&M.sub2.length)){const M=[];for(const T of j.sub2)if(T.sub2&&T.sub2.length){const D=T.sub2.filter(F=>N(F.label));D.length&&M.push({...T,sub2:D})}else N(T.label)&&M.push(T);(S||M.length)&&I.push({...j,sub2:M})}else{const M=j.sub2.filter(T=>N(T.label));(S||M.length)&&I.push({...j,sub2:M})}else S&&I.push(j)}return b||I.length?{...v,sub:I.length?I:v.sub}:null}).filter(Boolean)},[t,a]),g=R.useMemo(()=>{const L=p.length?p:t,N=Wpe(L,r);return L.find(v=>v.key===N)||L[0]||null},[p,t,r]),y=R.useMemo(()=>Hpe(t),[t]),[_,w]=R.useState(""),k=R.useMemo(()=>{const L=_.trim().toLowerCase();return L?y.filter(N=>N.full.toLowerCase().includes(L)):y},[y,_]);R.useEffect(()=>{const L=N=>{const v=N.key.toLowerCase()==="k";(N.metaKey||N.ctrlKey)&&v&&(N.preventDefault(),u(!0),setTimeout(()=>{var b;return(b=h.current)==null?void 0:b.focus()},0)),N.key==="Escape"&&u(!1)};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[]);const E=R.useRef(null);R.useEffect(()=>{var L;n&&((L=E.current)==null||L.focus())},[n]);const P=()=>{var I;const L=a.trim().toLowerCase(),N=(L?y.find(j=>j.full.toLowerCase().includes(L)):y[0])||null;if(N){e({tab:N.catKey,sub:N.subKey,sub2:N.sub2Key});return}const v=g,b=(I=v==null?void 0:v.sub)==null?void 0:I[0];if(!(!v||!b))if(b.sub2&&b.sub2.length)if(b.sub2.some(S=>S.sub2&&S.sub2.length)){const S=b.sub2[0];S.sub2&&S.sub2.length?e({tab:v.key,sub:b.key,sub2:S.sub2[0].key}):e({tab:v.key,sub:b.key,sub2:S.key})}else e({tab:v.key,sub:b.key,sub2:b.sub2[0].key});else e({tab:v.key,sub:b.key})};return s.jsxs("div",{className:ts.layout,children:[s.jsxs("div",{className:ts.side,children:[s.jsxs("div",{className:ts.sideHead,children:[s.jsx("input",{ref:E,className:ts.search,type:"search",placeholder:"Suche",value:a,onChange:L=>o(L.target.value),onKeyDown:L=>{L.key==="Enter"&&P()}}),s.jsx("button",{className:ts.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var L;return(L=h.current)==null?void 0:L.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),s.jsx("div",{className:ts.sideList,children:(p.length?p:t).map(L=>s.jsxs("div",{className:`${ts.sideItem} ${(g==null?void 0:g.key)===L.key?ts.active:""}`,onClick:()=>i(L.key),children:[s.jsxs("span",{className:ts.sideTitle,children:[L.icon?s.jsx("span",{className:ts.ico,"aria-hidden":!0,children:L.icon}):null,L.label]}),s.jsx("span",{className:ts.badge,children:qT(L.sub)})]},L.key))})]}),s.jsx("div",{className:ts.detail,children:g?s.jsxs("div",{className:ts.detailInner,children:[s.jsxs("div",{className:ts.detailHead,children:[s.jsxs("h3",{className:ts.detailTitle,children:[g.icon?s.jsx("span",{className:ts.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),s.jsxs("div",{className:ts.badge,children:[qT(g.sub)," Eintrge"]})]}),s.jsx("div",{className:ts.grid,children:(g.sub||[]).map(L=>{const N=L.sub2&&L.sub2.length>0,v=N&&L.sub2.some(b=>b.sub2&&b.sub2.length);return s.jsxs("div",{className:ts.card,children:[s.jsx("div",{className:ts.cardHead,dangerouslySetInnerHTML:{__html:Wh(L.label,a)}}),N?s.jsx("div",{className:ts.btnGrid,children:v?L.sub2.flatMap(b=>b.sub2&&b.sub2.length?b.sub2.map(I=>s.jsx("button",{className:ts.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:I.key}),dangerouslySetInnerHTML:{__html:Wh(`${b.label}  ${I.label}`,a)}},`${b.key}__${I.key}`)):[s.jsx("button",{className:ts.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:b.key}),dangerouslySetInnerHTML:{__html:Wh(b.label,a)}},b.key)]):L.sub2.map(b=>s.jsx("button",{className:ts.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:b.key}),dangerouslySetInnerHTML:{__html:Wh(b.label,a)}},b.key))}):s.jsx("div",{className:ts.btnGrid,children:s.jsx("button",{className:ts.itemBtn,onClick:()=>e({tab:g.key,sub:L.key}),dangerouslySetInnerHTML:{__html:Wh(L.label,a)}})})]},L.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(L=>!L.sub2||!L.sub2.length?!L.label.toLowerCase().includes(a.trim().toLowerCase()):L.sub2.some(v=>v.sub2&&v.sub2.length)?L.sub2.every(v=>v.sub2&&v.sub2.length?v.sub2.every(b=>!b.label.toLowerCase().includes(a.trim().toLowerCase())):!v.label.toLowerCase().includes(a.trim().toLowerCase())):L.sub2.every(v=>!v.label.toLowerCase().includes(a.trim().toLowerCase())))?s.jsxs("div",{className:ts.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):s.jsx("div",{className:ts.empty,children:"Keine Kategorie gefunden."})}),c&&s.jsx("div",{className:ts.spotWrap,onClick:()=>u(!1),children:s.jsxs("div",{className:ts.spot,onClick:L=>L.stopPropagation(),children:[s.jsxs("div",{className:ts.spotHead,children:[s.jsx("input",{ref:h,className:ts.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:_,onChange:L=>w(L.target.value)}),s.jsx("button",{className:ts.spotClose,onClick:()=>u(!1),children:"Esc"})]}),s.jsx("div",{className:ts.spotList,children:k.length===0?s.jsx("div",{className:ts.spotItemEmpty,children:"Keine Treffer"}):k.map((L,N)=>s.jsxs("div",{className:ts.spotItem,onClick:()=>{u(!1),e({tab:L.catKey,sub:L.subKey,sub2:L.sub2Key})},children:[s.jsx("div",{className:ts.spotCat,children:L.catKey}),s.jsx("div",{className:ts.spotLabel,children:L.full})]},N))})]})})]})},qpe={gamefeatures:ece,progression:tce,hellevator:sce,"legendary-dungeon":nce,events:rce,calculators:uce,infographics:hce,"class-book":pce,dungeons:mce},QT={gamefeatures:{fortress:gce,underworld:Ace,arenaam:Pce},hellevator:{"hellevator-guide":Nde},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":kde},events:{"event-list":Cde,"event-cycle":Tde},calculators:{"fortress-calculator":nP,"underworld-calculator":rP,"max-item-stats-calculator":hue,"gem-calculator":Oue,"dungeon-pause-open-xp-calculator":ahe},progression:{early:ohe,mid:Nhe,late:upe}},jb={gamefeatures:{arenaam:{"am-rune-bonuses":dde,"am-build-order":Sde},underworld:{"underworld-calculator":Ece,"underworld-pro-package-skip-order":Rce},fortress:{"fortress-calculator":fce,"fortress-package-skip-order":Tce,"fortress-attack-duplication":Ice}},progression:{early:{"first-weekend-guide":yhe,"max-item-stats-calculator":bhe,"fortress-package-skip-order":_he,"underworld-pro-package-skip-order":whe,"gem-calculator":jhe,"fortress-attack-duplication":She},mid:{"dungeon-pause":Jhe,"dungeon-pause-open-xp-calculator":Zhe,"dungeon-pause-exit":lpe,"gem-calculator":cpe,"calendar-skip":dpe}}};function Qpe(){const[t,e]=fi(),n=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;n?n&&!r?a=qpe[n]||null:n&&r&&!i?a=QT[n]&&QT[n][r]||null:n&&r&&i&&(a=jb[n]&&jb[n][r]&&jb[n][r][i]||null):a=null;const o=c=>{const u=new URLSearchParams(t);u.set("tab",c.tab),c.sub?u.set("sub",c.sub):u.delete("sub"),c.sub2?u.set("sub2",c.sub2):u.delete("sub2"),e(u,{replace:!1})};return s.jsxs(Kt,{children:[s.jsx("div",{className:Zd.topWrap,children:s.jsx(Kle,{logoSrc:Lx,categories:Qc,titleI18nKey:"guides.index.title"})}),s.jsx("div",{className:Zd.divider}),s.jsx("div",{className:Zd.contentArea,children:a?s.jsx(a,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Zd.placeholder,children:[s.jsx("h2",{className:Zd.placeholderTitle,children:"Guides"}),s.jsx("p",{className:Zd.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),s.jsx(Kpe,{categories:Qc,onNavigate:o,autoFocusSearch:!1})]})})]})}const Ype="modulepreload",Xpe=function(t){return"/"+t},YT={},et=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=u(n.map(h=>{if(h=Xpe(h),h in YT)return;YT[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Ype,p||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((_,w)=>{y.addEventListener("load",_),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Sb=Object.assign({"../../content/guidehub-v2/de/calculators/dungeon-pause-open-xp-calculator/index.md":()=>et(()=>import("./index-BD-aOE8D.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/fortress-calculator/index.md":()=>et(()=>import("./index-BoLXPKlQ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/gem-calculator/index.md":()=>et(()=>import("./index-Q5YJTyOZ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/index.md":()=>et(()=>import("./index-Cwb4rYh7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/max-item-stats-calculator/index.md":()=>et(()=>import("./index-DWgpFHu6.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/calculators/underworld-calculator/index.md":()=>et(()=>import("./index-_86ExND3.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/class-book/index.md":()=>et(()=>import("./index-COcvGUmJ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/event-cycle/index.md":()=>et(()=>import("./index-B9lV2Iwr.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/event-list/index.md":()=>et(()=>import("./index-CnZW9bvn.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/hellevator-guide.md":()=>et(()=>import("./hellevator-guide-BulnXD24.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/hellevator/index.md":()=>et(()=>import("./index-lhg_qIFn.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/index.md":()=>et(()=>import("./index-BwAQ_Gok.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/index.md":()=>et(()=>import("./index-BzPse3tN.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>et(()=>import("./legendary-dungeon-guide-epics-legendaries-lSwm34AL.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-build-order.md":()=>et(()=>import("./am-build-order-Dy_tQNja.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/am-rune-bonuses.md":()=>et(()=>import("./am-rune-bonuses-BcTszbcp.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/arenaam/index.md":()=>et(()=>import("./index-jPFoekPK.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-attack-duplication.md":()=>et(()=>import("./fortress-attack-duplication-I8SCZjVp.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-calculator.md":()=>et(()=>import("./fortress-calculator-DFvS_3Ev.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/fortress-package-skip-order.md":()=>et(()=>import("./fortress-package-skip-order-BvIletlU.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/fortress/index.md":()=>et(()=>import("./index-DHLCSduz.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/index.md":()=>et(()=>import("./index-Boc-SgkY.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/index.md":()=>et(()=>import("./index-Btsw6gjQ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-calculator.md":()=>et(()=>import("./underworld-calculator-GTPzaBcl.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>et(()=>import("./underworld-pro-package-skip-order-oXnuNGJu.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/home.md":()=>et(()=>import("./home-Y4rYyXA7.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/infographics/index.md":()=>et(()=>import("./index-SkQloDUR.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/first-weekend-guide.md":()=>et(()=>import("./first-weekend-guide-75AZeoqK.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-attack-duplication.md":()=>et(()=>import("./fortress-attack-duplication-D2L3UPUy.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/fortress-package-skip-order.md":()=>et(()=>import("./fortress-package-skip-order-DVkFtmvX.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/gem-calculator.md":()=>et(()=>import("./gem-calculator-Q5YJTyOZ.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/index.md":()=>et(()=>import("./index-EXWiQp1e.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/max-item-stats-calculator.md":()=>et(()=>import("./max-item-stats-calculator-DWgpFHu6.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/early/underworld-pro-package-skip-order.md":()=>et(()=>import("./underworld-pro-package-skip-order-B-6sK7ea.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/index.md":()=>et(()=>import("./index-DfphJdV5.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/late/index.md":()=>et(()=>import("./index-B-ZehDFd.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/calendar-skip.md":()=>et(()=>import("./calendar-skip-BneKc0uM.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-exit.md":()=>et(()=>import("./dungeon-pause-exit-D0xk8VAt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/dungeon-pause-open-xp-calculator.md":()=>et(()=>import("./dungeon-pause-open-xp-calculator-BD-aOE8D.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/gem-calculator.md":()=>et(()=>import("./gem-calculator-z4Swzckq.js"),[]).then(t=>t.default),"../../content/guidehub-v2/de/progression/mid/index.md":()=>et(()=>import("./index-CtBla6Ns.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/dungeon-pause-open-xp-calculator/index.md":()=>et(()=>import("./index-B8_z4M72.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/fortress-calculator/index.md":()=>et(()=>import("./index-CWeVDYli.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/gem-calculator/index.md":()=>et(()=>import("./index-z4Swzckq.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/index.md":()=>et(()=>import("./index-D4zBFaIK.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/max-item-stats-calculator/index.md":()=>et(()=>import("./index-BOtOwNZ8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/calculators/underworld-calculator/index.md":()=>et(()=>import("./index-Btd0kGqq.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/class-book/index.md":()=>et(()=>import("./index-CZ3sHN2T.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/event-cycle/index.md":()=>et(()=>import("./index-BMIDVoUo.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/event-list/index.md":()=>et(()=>import("./index-BpbHTeer.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/hellevator-guide.md":()=>et(()=>import("./hellevator-guide-B8x64JWw.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/hellevator/index.md":()=>et(()=>import("./index-CHnpDZ9n.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/index.md":()=>et(()=>import("./index-CW5j4WWB.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/index.md":()=>et(()=>import("./index-DsYGGVxe.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/events/legendary-dungeon/legendary-dungeon-guide-epics-legendaries.md":()=>et(()=>import("./legendary-dungeon-guide-epics-legendaries-BUa3WliX.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-build-order.md":()=>et(()=>import("./am-build-order-7VqYOoKX.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/am-rune-bonuses.md":()=>et(()=>import("./am-rune-bonuses-JkqnumD6.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/arenaam/index.md":()=>et(()=>import("./index-DaC1dSnH.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-attack-duplication.md":()=>et(()=>import("./fortress-attack-duplication-D657XOzO.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-calculator.md":()=>et(()=>import("./fortress-calculator-6pn8Pa5Y.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/fortress-package-skip-order.md":()=>et(()=>import("./fortress-package-skip-order-CPbql6lc.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/fortress/index.md":()=>et(()=>import("./index-Dj3IEW0J.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/index.md":()=>et(()=>import("./index-px4V_8pA.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/index.md":()=>et(()=>import("./index-dWCKu2ym.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-calculator.md":()=>et(()=>import("./underworld-calculator-dqzBx-_L.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/gamefeatures/underworld/underworld-pro-package-skip-order.md":()=>et(()=>import("./underworld-pro-package-skip-order-DEyzATP2.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/home.md":()=>et(()=>import("./home-DdLr3rwW.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/infographics/index.md":()=>et(()=>import("./index-CqsM8MIT.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/first-weekend-guide.md":()=>et(()=>import("./first-weekend-guide-CMTcPA4j.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-attack-duplication.md":()=>et(()=>import("./fortress-attack-duplication-BPeHt_ok.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/fortress-package-skip-order.md":()=>et(()=>import("./fortress-package-skip-order-DLCCqF01.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/gem-calculator.md":()=>et(()=>import("./gem-calculator-j8CnAoSg.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/index.md":()=>et(()=>import("./index-6Se8t2-m.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/max-item-stats-calculator.md":()=>et(()=>import("./max-item-stats-calculator-BOtOwNZ8.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/early/underworld-pro-package-skip-order.md":()=>et(()=>import("./underworld-pro-package-skip-order-cPzCzyAA.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/index.md":()=>et(()=>import("./index-D8N7Xg-_.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/late/index.md":()=>et(()=>import("./index-Hbv5m9lj.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/calendar-skip.md":()=>et(()=>import("./calendar-skip-ClT7EsPD.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-exit.md":()=>et(()=>import("./dungeon-pause-exit-Ckr_Fdzt.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/dungeon-pause-open-xp-calculator.md":()=>et(()=>import("./dungeon-pause-open-xp-calculator-B8_z4M72.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/gem-calculator.md":()=>et(()=>import("./gem-calculator-Cd7yemY0.js"),[]).then(t=>t.default),"../../content/guidehub-v2/en/progression/mid/index.md":()=>et(()=>import("./index-BnsmNO5Q.js"),[]).then(t=>t.default)}),Nb=new Map,XT={title:"",category:"",createdAt:"",updatedAt:"",gallery:[]};function Fv(t){const e=t.trim();return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}function Jpe(t){const e=t.trim();return e?e.startsWith("[")&&e.endsWith("]")?e.slice(1,-1).split(",").map(r=>Fv(r).trim()).filter(Boolean):[Fv(e)].filter(Boolean):[]}function Zpe(t){var c;const e=t.replace(/^\uFEFF/,""),n=e.match(/^---\r?\n([\s\S]*?)\r?\n---\r?\n?/);if(!n)return{frontmatter:{...XT},body:e};const r={...XT},i=n[1].split(/\r?\n/);let a=null;for(const u of i){const h=u.trim();if(!h)continue;const p=h.match(/^-+\s+(.*)$/);if(a==="gallery"&&p){r.gallery.push(Fv(p[1]));continue}const g=h.match(/^([a-zA-Z0-9_]+)\s*:\s*(.*)$/);if(!g)continue;const y=g[1],_=(c=g[2])!=null?c:"";if(a=y,y==="gallery"){r.gallery=Jpe(_);continue}(y==="title"||y==="category"||y==="createdAt"||y==="updatedAt")&&(r[y]=Fv(_))}const o=e.slice(n[0].length);return{frontmatter:r,body:o}}function JT(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kb(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Cb(t){let e=JT(t);return e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,i)=>{const a=kb(String(r!=null?r:""));return`<img src="${kb(String(i!=null?i:""))}" alt="${a}" />`}),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(n,r,i)=>{const a=JT(String(r!=null?r:""));return`<a href="${kb(String(i!=null?i:""))}" target="_blank" rel="noopener noreferrer">${a}</a>`}),e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*([^*]+)\*/g,"<em>$1</em>"),e}function eme(t){return t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function tme(t){const e=t.split(/\r?\n/),n=[],r=[],i=new Set;let a=!1;const o=()=>{a&&(n.push("</ul>"),a=!1)},c=h=>{let p=h,g=1;for(;i.has(p);)p=`${h}-${g}`,g+=1;return i.add(p),p},u=h=>{const p=h.match(/\s*\{#([a-zA-Z0-9\-_]+)\}\s*$/);return p?{text:h.replace(p[0],"").trimEnd(),anchor:p[1]}:{text:h,anchor:null}};for(const h of e){const p=h.trim();if(!p){o();continue}const g=p.match(/^\[\[embed:([a-z0-9-_]+)\]\]$/i);if(g){o();const k=g[1].toLowerCase();n.push(`<div data-embed="${k}"></div>`);continue}const y=p.match(/^\[\[asset:([a-z0-9-_]+)\]\]$/i);if(y){o();const k=y[1].toLowerCase();n.push(`<div data-asset="${k}"></div>`);continue}if(p==="---"||p==="***"){o(),n.push("<hr />");continue}const _=p.match(/^(#{1,3})\s+(.*)$/);if(_){o();const k=_[1].length,E=_[2].trim(),{text:P,anchor:L}=u(E),N=Cb(P),v=L||eme(P)||"section";if(k===2){const b=c(v);r.push({id:b,text:P}),n.push(`<h2 id="${b}">${N}</h2>`)}else if(k===1)if(L){const b=c(v);n.push(`<h1 id="${b}">${N}</h1>`)}else n.push(`<h1>${N}</h1>`);else if(L){const b=c(v);n.push(`<h3 id="${b}">${N}</h3>`)}else n.push(`<h3>${N}</h3>`);continue}const w=p.match(/^-+\s+(.*)$/);if(w){a||(n.push("<ul>"),a=!0),n.push(`<li>${Cb(w[1])}</li>`);continue}o(),n.push(`<p>${Cb(p)}</p>`)}return o(),{html:n.join(`
`),toc:r}}function ZT(t,e){const{tab:n,sub:r,sub2:i}=e;return!n&&!r&&!i?`../../content/guidehub-v2/${t}/home.md`:n&&!r&&!i?`../../content/guidehub-v2/${t}/${n}/index.md`:n&&r&&!i?`../../content/guidehub-v2/${t}/${n}/${r}/index.md`:n&&r&&i?`../../content/guidehub-v2/${t}/${n}/${r}/${i}.md`:`../../content/guidehub-v2/${t}/home.md`}async function sme(t,e){var i,a,o;const n=`${e}:${(i=t.tab)!=null?i:""}:${(a=t.sub)!=null?a:""}:${(o=t.sub2)!=null?o:""}`;if(Nb.has(n))return Nb.get(n);const r=(async()=>{const c=ZT(e,t),u=ZT("en",t),h=Sb[c]||Sb[u];if(!h)return null;const p=await h(),{frontmatter:g,body:y}=Zpe(p),{html:_,toc:w}=tme(y),k=Sb[c]?e:"en";return{id:t.sub2||t.sub||t.tab||"home",lang:k,frontmatter:g,body:y,html:_,toc:w}})();return Nb.set(n,r),r}const hf=[{key:"gold-xp-curve",title:"Gold & XP Curve",assetKey:"goldxpcurve",filterA:"Economy",filterB:"Curve"},{key:"calendar-rewards",title:"Calendar Rewards",assetKey:"calendarrewards",filterA:"Calendar",filterB:"Rewards"},{key:"calendar-skip",title:"Calendar Skip",assetKey:"calendarskip",filterA:"Calendar",filterB:"Skip"},{key:"pet-elemental-advantages",title:"Elemental Advantages",assetKey:"elementaladvantages",filterA:"Pets",filterB:"Advantages"},{key:"pets-p2w",title:"Pets P2W",assetKey:"petsp2w",filterA:"Pets",filterB:"Pet Paths"},{key:"pets-f2p",title:"Pets F2P",assetKey:"petsf2p",filterA:"Pets",filterB:"Pet Paths"},{key:"ice-dmg-rune",title:"Ice Damage Rune",assetKey:"icedmgrune",filterA:"Runes",filterB:"Damage"},{key:"fire-res-rune",title:"Fire Resistance Rune",assetKey:"fireresrune",filterA:"Runes",filterB:"Resistance"},{key:"fire-dmg-rune",title:"Fire Damage Rune",assetKey:"firedmgrune",filterA:"Runes",filterB:"Damage"},{key:"health-rune",title:"Health Rune",assetKey:"healthrune",filterA:"Runes",filterB:"Utility"},{key:"xp-rune",title:"XP Rune",assetKey:"xprune",filterA:"Runes",filterB:"Utility"},{key:"gold-rune",title:"Gold Rune",assetKey:"goldrune",filterA:"Runes",filterB:"Utility"},{key:"item-quality-rune",title:"Item Quality Rune",assetKey:"itemqualrune",filterA:"Runes",filterB:"Quality"},{key:"epic-rune",title:"Epic Rune",assetKey:"epicrune",filterA:"Runes",filterB:"Quality"},{key:"single-rune",title:"Single Rune",assetKey:"singlerune",filterA:"Runes",filterB:"Other"},{key:"double-rune",title:"Double Rune",assetKey:"doublerune",filterA:"Runes",filterB:"Other"},{key:"luck-gem",title:"Lucky Gem",assetKey:"luckbig",filterA:"Gems",filterB:"Stat"},{key:"black-gem",title:"Black Gem",assetKey:"blackbig",filterA:"Gems",filterB:"Stat"},{key:"legendary-gem",title:"Legendary Gem",assetKey:"legendarybig",filterA:"Gems",filterB:"Stat"},{key:"sf-tavern-discord",title:"SF Tavern Discord",assetKey:"sftaverndiscord",filterA:"Credits",filterB:"Community"},{key:"sf-magazine",title:"SF Magazine",assetKey:"sfmagazine",filterA:"Credits",filterB:"Community"},{key:"sf-tools",title:"SF Tools",assetKey:"sftools",filterA:"Credits",filterB:"Community"},{key:"attack-duplication-step-1",title:"Attack Duplication Step 1",assetKey:"step1adg",filterA:"Guides",filterB:"Steps"},{key:"attack-duplication-step-2",title:"Attack Duplication Step 2",assetKey:"step2adg",filterA:"Guides",filterB:"Steps"},{key:"attack-duplication-step-3",title:"Attack Duplication Step 3",assetKey:"step3adg",filterA:"Guides",filterB:"Steps"}],nme="_viewerWrap_eyo19_1",rme="_nav_eyo19_21",ime="_navCard_eyo19_37",ame="_navHeader_eyo19_59",ome="_logoWrap_eyo19_73",lme="_logoImg_eyo19_85",cme="_divider_eyo19_99",dme="_navHomeWrap_eyo19_133",ume="_navScroller_eyo19_141",hme="_searchInput_eyo19_195",pme="_navSection_eyo19_221",mme="_navSubTitle_eyo19_251",gme="_navRow_eyo19_265",fme="_navRowLabel_eyo19_281",vme="_navRowChevron_eyo19_291",xme="_navRowChevronOpen_eyo19_319",yme="_categoryRow_eyo19_327",bme="_entryList_eyo19_355",_me="_entryListClosed_eyo19_369",wme="_entryListOpen_eyo19_377",jme="_subSection_eyo19_385",Sme="_subRow_eyo19_397",Nme="_subEntryList_eyo19_423",kme="_subGroup_eyo19_437",Cme="_navItem_eyo19_449",Tme="_navItemIndented_eyo19_475",Ime="_navItemActive_eyo19_505",Ame="_viewer_eyo19_1",Eme="_viewerCard_eyo19_525",Rme="_viewerHeader_eyo19_543",Pme="_viewerTitle_eyo19_561",Lme="_metaRow_eyo19_575",Dme="_metaLabel_eyo19_591",Mme="_categoryPill_eyo19_601",Fme="_tocRow_eyo19_623",Bme="_tocLabel_eyo19_637",$me="_tocPills_eyo19_651",Ome="_tocPill_eyo19_651",Vme="_contentGrid_eyo19_695",Ume="_contentGridHasGallery_eyo19_707",Gme="_markdown_eyo19_715",zme="_hudButtonGrid_eyo19_809",Hme="_hudButton_eyo19_809",Wme="_hudButtonLink_eyo19_849",Kme="_hudButtonBox_eyo19_871",qme="_hudButtonText_eyo19_879",Qme="_infoBlock_eyo19_923",Yme="_infoFilters_eyo19_931",Xme="_infoSelect_eyo19_947",Jme="_infoLabel_eyo19_959",Zme="_infoSelectField_eyo19_973",ege="_infoGalleryGrid_eyo19_1001",tge="_infoCard_eyo19_1013",sge="_infoThumb_eyo19_1059",nge="_infoThumbFallback_eyo19_1077",rge="_infoTitle_eyo19_1101",ige="_infoEmpty_eyo19_1115",age="_markdownHome_eyo19_1131",oge="_galleryCard_eyo19_1161",lge="_galleryTitle_eyo19_1175",cge="_galleryGrid_eyo19_1191",dge="_galleryThumb_eyo19_1203",uge="_galleryEmpty_eyo19_1217",hge="_loadingState_eyo19_1229",pge="_missingState_eyo19_1231",mge="_emptyTitle_eyo19_1249",gge="_viewerLoadingOverlay_eyo19_1263",fge="_viewerLoadingOverlayVisible_eyo19_1291",vge="_loadingOverlayContent_eyo19_1299",xge="_loadingSpinner_eyo19_1311",yge="_overlay_eyo19_1341",bge="_overlayPanel_eyo19_1359",_ge="_overlayImage_eyo19_1385",wge="_overlayClose_eyo19_1415",jge="_overlayNav_eyo19_1437",Sge="_overlayNavLeft_eyo19_1495",Nge="_overlayNavRight_eyo19_1503",Ce={viewerWrap:nme,nav:rme,navCard:ime,navHeader:ame,logoWrap:ome,logoImg:lme,divider:cme,navHomeWrap:dme,navScroller:ume,searchInput:hme,navSection:pme,navSubTitle:mme,navRow:gme,navRowLabel:fme,navRowChevron:vme,navRowChevronOpen:xme,categoryRow:yme,entryList:bme,entryListClosed:_me,entryListOpen:wme,subSection:jme,subRow:Sme,subEntryList:Nme,subGroup:kme,navItem:Cme,navItemIndented:Tme,navItemActive:Ime,viewer:Ame,viewerCard:Eme,viewerHeader:Rme,viewerTitle:Pme,metaRow:Lme,metaLabel:Dme,categoryPill:Mme,tocRow:Fme,tocLabel:Bme,tocPills:$me,tocPill:Ome,contentGrid:Vme,contentGridHasGallery:Ume,markdown:Gme,hudButtonGrid:zme,hudButton:Hme,hudButtonLink:Wme,hudButtonBox:Kme,hudButtonText:qme,infoBlock:Qme,infoFilters:Yme,infoSelect:Xme,infoLabel:Jme,infoSelectField:Zme,infoGalleryGrid:ege,infoCard:tge,infoThumb:sge,infoThumbFallback:nge,infoTitle:rge,infoEmpty:ige,markdownHome:age,galleryCard:oge,galleryTitle:lge,galleryGrid:cge,galleryThumb:dge,galleryEmpty:uge,loadingState:hge,missingState:pge,emptyTitle:mge,viewerLoadingOverlay:gge,viewerLoadingOverlayVisible:fge,loadingOverlayContent:vge,loadingSpinner:xge,overlay:yge,overlayPanel:bge,overlayImage:_ge,overlayClose:wge,overlayNav:jge,overlayNavLeft:Sge,overlayNavRight:Nge},yo="__all__";function kge(){var I;const{t}=Hs(),e=W.useMemo(()=>Array.from(new Set(hf.map(j=>j.filterA))).sort((j,S)=>j.localeCompare(S)),[]),n=W.useMemo(()=>{const j=new Map;return hf.forEach(S=>{var M;const C=(M=j.get(S.filterA))!=null?M:[];C.includes(S.filterB)||C.push(S.filterB),j.set(S.filterA,C)}),j.forEach((S,C)=>{j.set(C,S.sort((M,T)=>M.localeCompare(T)))}),j},[]),r=W.useMemo(()=>Array.from(new Set(hf.map(j=>j.filterB))).sort((j,S)=>j.localeCompare(S)),[]),[i,a]=W.useState(yo),[o,c]=W.useState(yo),[u,h]=W.useState(null),p=i===yo?r:(I=n.get(i))!=null?I:[];W.useEffect(()=>{o!==yo&&(p.includes(o)||c(yo))},[p,o]);const g=W.useMemo(()=>hf.filter(j=>!(i!==yo&&j.filterA!==i||o!==yo&&j.filterB!==o)),[i,o]),y=t("guides.v2.infographics.allLabel",{defaultValue:"All"}),_=t("guides.v2.infographics.filterA.label",{defaultValue:"Category"}),w=t("guides.v2.infographics.filterB.label",{defaultValue:"Type"}),k=t("guides.v2.infographics.empty",{defaultValue:"No images found."}),E=t("guides.v2.closeLabel",{defaultValue:"Close"}),P=W.useCallback(j=>{var V,z,q,H;const S=ja(j.assetKey,1200),C=ja(j.assetKey,640),M=(z=(V=S.thumb)!=null?V:S.url)!=null?z:null,T=(H=(q=C.thumb)!=null?q:C.url)!=null?H:null,D=M!=null?M:T;if(!D)return null;const F=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return{key:j.key,src:D,fallback:D&&T&&D!==T?T:void 0,label:F}},[t]),L=W.useMemo(()=>u?g.findIndex(j=>j.key===u.key):-1,[u,g]),N=g.length>1&&L>=0,v=W.useCallback(()=>{if(!N)return;const j=(L-1+g.length)%g.length,S=g[j],C=P(S);C&&h(C)},[L,P,N,g]),b=W.useCallback(()=>{if(!N)return;const j=(L+1)%g.length,S=g[j],C=P(S);C&&h(C)},[L,P,N,g]);return W.useEffect(()=>{if(!u)return;g.some(S=>S.key===u.key)||h(null)},[u,g]),W.useEffect(()=>{if(!u)return;const j=S=>{S.key==="Escape"&&h(null)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[u]),s.jsxs("div",{className:Ce.infoBlock,children:[s.jsxs("div",{className:Ce.infoFilters,children:[s.jsxs("label",{className:Ce.infoSelect,children:[s.jsx("span",{className:Ce.infoLabel,children:_}),s.jsxs("select",{className:Ce.infoSelectField,value:i,onChange:j=>a(j.target.value),children:[s.jsx("option",{value:yo,children:y}),e.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterA.${j}`,{defaultValue:j})},j))]})]}),s.jsxs("label",{className:Ce.infoSelect,children:[s.jsx("span",{className:Ce.infoLabel,children:w}),s.jsxs("select",{className:Ce.infoSelectField,value:o,onChange:j=>c(j.target.value),children:[s.jsx("option",{value:yo,children:y}),p.map(j=>s.jsx("option",{value:j,children:t(`guides.v2.infographics.filterB.${j}`,{defaultValue:j})},j))]})]})]}),g.length===0?s.jsx("div",{className:Ce.infoEmpty,children:k}):s.jsx("div",{className:Ce.infoGalleryGrid,children:g.map(j=>{var T;const S=ja(j.assetKey,640),C=(T=S.thumb)!=null?T:S.url,M=t(`guides.v2.infographics.item.${j.key}`,{defaultValue:j.title});return s.jsxs("button",{className:Ce.infoCard,type:"button",onClick:()=>{const D=P(j);D&&h(D)},children:[C?s.jsx("img",{className:Ce.infoThumb,src:C,alt:M}):s.jsx("div",{className:Ce.infoThumbFallback,children:(M||"I").slice(0,1).toUpperCase()}),s.jsx("div",{className:Ce.infoTitle,children:M})]},j.key)})}),u&&s.jsx("div",{className:Ce.overlay,onClick:()=>h(null),children:s.jsxs("div",{className:Ce.overlayPanel,onClick:j=>j.stopPropagation(),children:[N&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`${Ce.overlayNav} ${Ce.overlayNavLeft}`,type:"button",onClick:v,"aria-label":t("guides.v2.galleryPrev",{defaultValue:"Previous image"}),children:"<"}),s.jsx("button",{className:`${Ce.overlayNav} ${Ce.overlayNavRight}`,type:"button",onClick:b,"aria-label":t("guides.v2.galleryNext",{defaultValue:"Next image"}),children:">"})]}),s.jsx("button",{className:Ce.overlayClose,onClick:()=>h(null),type:"button",children:E}),s.jsx("img",{className:Ce.overlayImage,src:u.src,alt:u.label,onError:()=>{!u.fallback||u.fallback===u.src||h({key:u.key,src:u.fallback,label:u.label})}})]})})]})}const Cge=()=>{const[t,e]=fi(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","fortress"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:Ce.hudButtonGrid,children:[s.jsx("button",{type:"button",className:Ce.hudButton,onClick:()=>n("fortress-attack-duplication"),children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:"Fortress attack duplication guide"})})}),s.jsx("button",{type:"button",className:Ce.hudButton,onClick:()=>n("fortress-calculator"),children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:"Fortress Calculator"})})}),s.jsx("button",{type:"button",className:Ce.hudButton,onClick:()=>n("fortress-package-skip-order"),children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:"Fortress Package skip order"})})})]})},Tge=()=>{const[t,e]=fi(),n=r=>{const i=new URLSearchParams(t);i.set("tab","gamefeatures"),i.set("sub","arenaam"),i.set("sub2",r),e(i,{replace:!1,preventScrollReset:!0})};return s.jsxs("div",{className:Ce.hudButtonGrid,children:[s.jsx("button",{type:"button",className:Ce.hudButton,onClick:()=>n("am-rune-bonuses"),children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:"Rune Bonuses"})})}),s.jsx("button",{type:"button",className:Ce.hudButton,onClick:()=>n("am-build-order"),children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:"Build Order"})})})]})},Ige=()=>{var r;const{i18n:t}=Hs(),e=(r=t.language)==null?void 0:r.startsWith("de"),n=[{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410382981562542"},{label:"SF Tools",href:"https://sftools.mar21.eu/idle.html"},{label:"SF Coaching",href:e?"https://discord.com/channels/1381647290606817452/1420471280284733491":"https://discord.com/channels/1381647290606817452/1420473511364923432"}];return s.jsx("div",{className:Ce.hudButtonGrid,children:n.map(i=>s.jsx("a",{className:`${Ce.hudButton} ${Ce.hudButtonLink}`,href:i.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:i.label})})},i.href))})},Age=()=>{const t=[{label:"SF Coaching",href:"https://discord.com/channels/1381647290606817452/1420473231256850584"},{label:"SF Tavernen Discord FAQ",href:"https://discord.com/channels/551152314329858048/1415410624606896279"},{label:"SF Tools",href:"https://sftools.mar21.eu/fortress.html"}];return s.jsx("div",{className:Ce.hudButtonGrid,children:t.map(e=>s.jsx("a",{className:`${Ce.hudButton} ${Ce.hudButtonLink}`,href:e.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Fo,{padding:"md",hover:!0,className:Ce.hudButtonBox,children:s.jsx("span",{className:Ce.hudButtonText,children:e.label})})},e.href))})};function Ege(){const t=[];return Qc.forEach(e=>{(e.sub||[]).forEach(n=>{n.sub2&&n.sub2.length?n.sub2.some(i=>i.sub2&&i.sub2.length)?n.sub2.forEach(i=>{i.sub2&&i.sub2.length&&i.sub2.forEach(a=>{t.push({id:a.key,label:a.label,tab:e.key,sub:n.key,sub2:a.key,categoryLabel:e.label})})}):n.sub2.forEach(i=>{t.push({id:i.key,label:i.label,tab:e.key,sub:n.key,sub2:i.key,categoryLabel:e.label})}):t.push({id:n.key,label:n.label,tab:e.key,sub:n.key,categoryLabel:e.label})})}),t}function Rge(t){return t!=null&&t.startsWith("de")?"de":"en"}const Pge=330,Lge=({tab:t,sub:e,sub2:n,isHome:r,openTabs:i,openSubs:a,onToggleTab:o,onToggleSub:c,onNavigate:u,onNavigateHome:h,onNavigateCategory:p,onNavigateSub:g,t:y})=>{const[_,w]=W.useState(""),k=_.trim().toLowerCase(),E=W.useMemo(()=>{const N=Qc.find(v=>v.key==="gamefeatures");return N?[N,...Qc.filter(v=>v.key!=="gamefeatures")]:Qc},[]),P=W.useCallback(N=>!k||N.toLowerCase().includes(k),[k]),L=()=>E.map(N=>{const v=P(N.label),I=(N.sub||[]).map(C=>{var V;const M=v||P(C.label);let T=[];C.sub2&&C.sub2.length&&(C.sub2.some(q=>q.sub2&&q.sub2.length)?T=C.sub2.map(q=>{if(!q.sub2||!q.sub2.length)return null;const H=M||P(q.label),K=q.sub2.filter(ne=>H||P(ne.label));return K.length?s.jsxs("div",{className:Ce.subGroup,children:[s.jsx("div",{className:Ce.navSubTitle,children:q.label}),K.map(ne=>s.jsx("button",{className:`${Ce.navItem} ${Ce.navItemIndented} ${t===N.key&&e===C.key&&n===ne.key?Ce.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:ne.key}),type:"button",children:ne.label},`${N.key}-${C.key}-${ne.key}`))]},`${N.key}-${C.key}-${q.key}`):null}).filter(Boolean):T=C.sub2.filter(H=>M||P(H.label)).map(H=>s.jsx("button",{className:`${Ce.navItem} ${Ce.navItemIndented} ${t===N.key&&e===C.key&&n===H.key?Ce.navItemActive:""}`,onClick:()=>u({tab:N.key,sub:C.key,sub2:H.key}),type:"button",children:H.label},`${N.key}-${C.key}-${H.key}`)));const D=T.length>0;if(!M&&!D)return null;const F=!!((V=a[N.key])!=null&&V[C.key])||!!k&&D;return s.jsxs("div",{className:Ce.subSection,children:[s.jsxs("button",{className:`${Ce.navRow} ${Ce.subRow} ${t===N.key&&e===C.key&&!n?Ce.navItemActive:""}`,onClick:()=>{c(N.key,C.key),g(N.key,C.key)},"aria-expanded":F,type:"button",children:[s.jsx("span",{className:Ce.navRowLabel,children:C.label}),s.jsx("span",{className:`${Ce.navRowChevron} ${F?Ce.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${Ce.subEntryList} ${F?Ce.entryListOpen:Ce.entryListClosed}`,children:F?T:null})]},`${N.key}-${C.key}`)}).filter(Boolean),j=I.length>0;if(!v&&!j&&k)return null;const S=!!i[N.key]||!!k&&(v||j);return s.jsxs("div",{className:Ce.navSection,children:[s.jsxs("button",{className:`${Ce.navRow} ${Ce.categoryRow} ${t===N.key&&!e&&!n?Ce.navItemActive:""}`,onClick:()=>{o(N.key),p(N.key)},"aria-expanded":S,type:"button",children:[s.jsx("span",{className:Ce.navRowLabel,children:N.label}),s.jsx("span",{className:`${Ce.navRowChevron} ${S?Ce.navRowChevronOpen:""}`})]}),s.jsx("div",{className:`${Ce.entryList} ${S?Ce.entryListOpen:Ce.entryListClosed}`,children:S?I:null})]},N.key)});return s.jsx("div",{className:Ce.nav,children:s.jsxs("div",{className:Ce.navCard,children:[s.jsxs("div",{className:Ce.navHeader,children:[s.jsx("div",{className:Ce.logoWrap,children:s.jsx("img",{src:Lx,alt:"Guide Hub",className:Ce.logoImg})}),s.jsx("div",{className:Ce.divider}),s.jsx("input",{className:Ce.searchInput,type:"search",value:_,onChange:N=>w(N.target.value),placeholder:y("guides.v2.searchPlaceholder",{defaultValue:"Search guides"}),"aria-label":y("guides.v2.searchLabel",{defaultValue:"Search guides"})})]}),s.jsxs("div",{className:Ce.navScroller,children:[s.jsx("div",{className:Ce.navHomeWrap,children:s.jsx("button",{className:`${Ce.navItem} ${r?Ce.navItemActive:""}`,onClick:h,type:"button",children:y("guides.v2.navHomeLabel",{defaultValue:"Home"})})}),L()]})]})})},Dge=()=>{const[t,e]=fi(),{t:n,i18n:r}=Hs(),i=Rge(r.language),a=t.get("tab")||"",o=t.get("sub")||"",c=t.get("sub2")||"",u=W.useMemo(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0}),[a,o,c]),[h,p]=W.useState(()=>({tab:a||void 0,sub:o||void 0,sub2:c||void 0})),g=h.tab||"",y=h.sub||"",_=h.sub2||"",w=!g&&!y&&!_,k=g==="infographics"&&!y&&!_,E=W.useMemo(()=>Ege(),[]),P=W.useMemo(()=>E.find(xe=>{var Ie;return xe.tab===g&&xe.sub===y&&((Ie=xe.sub2)!=null?Ie:"")===_})||null,[E,g,y,_]),L=W.useMemo(()=>Qc.find(xe=>xe.key===g)||null,[g]),N=W.useMemo(()=>{var xe;return((xe=L==null?void 0:L.sub)==null?void 0:xe.find(Ie=>Ie.key===y))||null},[L,y]),[v,b]=W.useState({}),[I,j]=W.useState({}),[S,C]=W.useState(null),[M,T]=W.useState("idle"),[D,F]=W.useState(!1),V=W.useRef(0),z=W.useRef(0),q=W.useRef(null),H=W.useCallback(()=>{q.current&&(window.clearTimeout(q.current),q.current=null)},[]);W.useEffect(()=>{let xe=!1;const Ie=V.current+1;return V.current=Ie,H(),z.current=Date.now(),F(!0),sme(u,i).then($e=>{if(xe||V.current!==Ie)return;const Xe=$e?"ready":"missing",be=()=>{xe||V.current!==Ie||(C($e),T(Xe),p(u),F(!1))},Be=Date.now()-z.current,Ve=Pge-Be;Ve<=0?be():q.current=window.setTimeout(be,Ve)}),()=>{xe=!0,H()}},[u,i,H]),W.useEffect(()=>{a&&b(xe=>xe[a]?xe:{...xe,[a]:!0})},[a]),W.useEffect(()=>{!a||!o||j(xe=>{const Ie=xe[a]||{};return Ie[o]?xe:{...xe,[a]:{...Ie,[o]:!0}}})},[a,o]);const K=W.useCallback(xe=>{const Ie=new URLSearchParams(t);Ie.set("tab",xe.tab),xe.sub?Ie.set("sub",xe.sub):Ie.delete("sub"),xe.sub2?Ie.set("sub2",xe.sub2):Ie.delete("sub2"),e(Ie,{replace:!1,preventScrollReset:!0})},[t,e]),ne=W.useCallback(()=>{const xe=new URLSearchParams(t);xe.delete("tab"),xe.delete("sub"),xe.delete("sub2"),e(xe,{replace:!1,preventScrollReset:!0})},[t,e]),Y=W.useCallback(xe=>{b(Ie=>({...Ie,[xe]:!Ie[xe]}))},[]),G=W.useCallback(xe=>{const Ie=new URLSearchParams(t);Ie.set("tab",xe),Ie.delete("sub"),Ie.delete("sub2"),e(Ie,{replace:!1,preventScrollReset:!0})},[t,e]),X=W.useCallback((xe,Ie)=>{j($e=>{const Xe=$e[xe]||{};return{...$e,[xe]:{...Xe,[Ie]:!Xe[Ie]}}})},[]),te=W.useCallback((xe,Ie)=>{const $e=new URLSearchParams(t);$e.set("tab",xe),$e.set("sub",Ie),$e.delete("sub2"),e($e,{replace:!1,preventScrollReset:!0})},[t,e]),se=W.useCallback(xe=>{const Ie=document.getElementById(xe);if(!Ie)return;const $e=Ie.closest("main");if($e){const Xe=$e.getBoundingClientRect(),Be=Ie.getBoundingClientRect().top-Xe.top+$e.scrollTop-12;$e.scrollTo({top:Be,behavior:"smooth"});return}Ie.scrollIntoView({behavior:"smooth",block:"start"})},[]),Z=(S==null?void 0:S.frontmatter.title)||(P==null?void 0:P.label)||(N==null?void 0:N.label)||(L==null?void 0:L.label)||"",ve=(S==null?void 0:S.frontmatter.category)||(L==null?void 0:L.label)||(P==null?void 0:P.categoryLabel)||"",Se=W.useMemo(()=>((S==null?void 0:S.toc)||[]).filter(xe=>xe.id!=="overview"),[S]),J=W.useMemo(()=>!(S!=null&&S.frontmatter.gallery)||S.frontmatter.gallery.length===0?[]:S.frontmatter.gallery.map(xe=>{if(!xe)return null;if(/^https?:\/\//i.test(xe))return{key:xe,thumb:xe,full:xe};const $e=ja(xe,640),Xe=$e.thumb||$e.url,be=$e.url||$e.thumb;return!Xe||!be?null:{key:xe,thumb:Xe,full:be}}).filter(Boolean),[S]),[ue,ie]=W.useState(null);W.useEffect(()=>{if(!ue)return;const xe=Ie=>{Ie.key==="Escape"&&ie(null)};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[ue]);const me=J.length?`${Ce.contentGrid} ${Ce.contentGridHasGallery}`:Ce.contentGrid,ce=w?`${Ce.markdown} ${Ce.markdownHome}`:Ce.markdown,he=()=>s.jsxs("div",{className:Ce.tocRow,children:[s.jsx("div",{className:Ce.tocLabel,children:n("guides.v2.sectionsLabel",{defaultValue:"Sections"})}),s.jsx("div",{className:Ce.tocPills,children:Se.length===0?s.jsx("span",{className:Ce.galleryEmpty,children:n("guides.v2.noSections",{defaultValue:"No sections"})}):Se.map(xe=>s.jsx("button",{className:Ce.tocPill,onClick:()=>se(xe.id),type:"button",children:xe.text},xe.id))})]}),Ne=()=>{if(!S)return null;const xe=k?s.jsx(kge,{}):null,Ie={"am-rune-bonuses-table":tP,"arenaam-link-buttons":Tge,"arenaam-related-buttons":Ige,"fortress-link-buttons":Cge,"fortress-related-buttons":Age,"fortress-package-skip-order-table":eP,"fortress-calculator":nP,"underworld-calculator":rP},$e=Object.keys(Ie).some(He=>S.html.includes(`data-embed="${He}"`)),Xe=S.html.includes('data-asset="'),be=$e||Xe,Be=He=>{if(!be)return s.jsx("div",{dangerouslySetInnerHTML:{__html:He}});const St=/<div data-(embed|asset)="([a-z0-9-_]+)"><\/div>/g;let Ct=0,ns,Rt=0;const Gt=[];for(;ns=St.exec(He);){const _t=He.slice(Ct,ns.index);_t&&(Gt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:_t}},`html-${Rt}`)),Rt+=1);const Ae=ns[1],ks=ns[2];if(Ae==="embed"){const Ht=Ie[ks];Ht?(Gt.push(s.jsx(Ht,{},`embed-${ks}-${Rt}`)),Rt+=1):(Gt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:ns[0]}},`html-${Rt}`)),Rt+=1)}else{const Ht=ja(ks,960),re=Ht.thumb||Ht.url;re?(Gt.push(s.jsx("img",{src:re,alt:ks},`asset-${ks}-${Rt}`)),Rt+=1):(Gt.push(s.jsx("div",{},`asset-${ks}-${Rt}`)),Rt+=1)}Ct=ns.index+ns[0].length}const Ps=He.slice(Ct);return Ps&&Gt.push(s.jsx("div",{dangerouslySetInnerHTML:{__html:Ps}},`html-${Rt}`)),Gt.length===0?s.jsx("div",{dangerouslySetInnerHTML:{__html:He}}):s.jsx(s.Fragment,{children:Gt})},nt=S.html.indexOf('<h2 id="overview">');if(nt===-1)return be?s.jsxs("div",{className:ce,children:[Be(S.html),xe]}):s.jsxs("div",{className:ce,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),xe]});const ht=S.html.indexOf("</h2>",nt);if(ht===-1)return be?s.jsxs("div",{className:ce,children:[Be(S.html),xe]}):s.jsxs("div",{className:ce,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:S.html}}),xe]});const Ue=S.html.slice(0,ht+5),Ee=S.html.slice(ht+5);return be?s.jsxs("div",{className:ce,children:[Be(Ue),he(),xe,Be(Ee)]}):s.jsxs("div",{className:ce,children:[s.jsx("div",{dangerouslySetInnerHTML:{__html:Ue}}),he(),xe,s.jsx("div",{dangerouslySetInnerHTML:{__html:Ee}})]})},Te=s.jsx(Lge,{tab:a,sub:o,sub2:c,isHome:w,openTabs:v,openSubs:I,onToggleTab:Y,onToggleSub:X,onNavigate:K,onNavigateHome:ne,onNavigateCategory:G,onNavigateSub:te,t:n});return s.jsxs(Kt,{left:Te,leftWidth:280,leftFullHeight:!0,children:[s.jsx("div",{className:Ce.viewerWrap,children:s.jsx("section",{className:Ce.viewer,children:s.jsxs("div",{className:Ce.viewerCard,children:[M==="missing"&&s.jsxs("div",{className:Ce.missingState,children:[s.jsx("div",{className:Ce.emptyTitle,children:n("guides.v2.missingTitle",{defaultValue:"Guide not available yet"})}),s.jsx("div",{children:n("guides.v2.missingBody",{defaultValue:"This guide does not have markdown content yet."})})]}),S&&M!=="missing"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Ce.viewerHeader,children:[s.jsxs("div",{children:[s.jsx("h1",{className:Ce.viewerTitle,children:Z}),s.jsxs("div",{className:Ce.metaRow,children:[s.jsxs("span",{children:[s.jsxs("span",{className:Ce.metaLabel,children:[n("guides.v2.createdLabel",{defaultValue:"Created"}),":"]}),S.frontmatter.createdAt||"-"]}),s.jsxs("span",{children:[s.jsxs("span",{className:Ce.metaLabel,children:[n("guides.v2.updatedLabel",{defaultValue:"Last edited"}),":"]}),S.frontmatter.updatedAt||"-"]})]})]}),ve&&s.jsx("div",{className:Ce.categoryPill,children:ve})]}),s.jsxs("div",{className:me,children:[Ne(),J.length>0&&s.jsxs("aside",{className:Ce.galleryCard,children:[s.jsx("div",{className:Ce.galleryTitle,children:n("guides.v2.galleryLabel",{defaultValue:"Gallery"})}),s.jsx("div",{className:Ce.galleryGrid,children:J.map(xe=>s.jsx("img",{src:xe.thumb,alt:xe.key,className:Ce.galleryThumb,onClick:()=>ie(xe.full)},xe.key))})]})]})]}),s.jsx("div",{className:`${Ce.viewerLoadingOverlay} ${D?Ce.viewerLoadingOverlayVisible:""}`,children:s.jsx("div",{className:Ce.loadingState,children:s.jsxs("div",{className:Ce.loadingOverlayContent,children:[s.jsx("span",{className:Ce.loadingSpinner,"aria-hidden":!0}),s.jsx("span",{children:n("guides.v2.loading",{defaultValue:"Loading guide..."})})]})})})]})})}),ue&&s.jsx("div",{className:Ce.overlay,onClick:()=>ie(null),children:s.jsxs("div",{className:Ce.overlayPanel,onClick:xe=>xe.stopPropagation(),children:[s.jsx("button",{className:Ce.overlayClose,onClick:()=>ie(null),type:"button",children:n("guides.v2.closeLabel",{defaultValue:"Close"})}),s.jsx("img",{className:Ce.overlayImage,src:ue,alt:"Guide preview"})]})})]})},Mge="_wrap_1353r_1",Fge="_centerLogoWrap_1353r_21",Bge="_centerLogoLink_1353r_37",$ge="_centerLogo_1353r_21",Oge="_arc_1353r_71",Vge="_left_1353r_73",Uge="_right_1353r_75",Gge="_sub_1353r_77",zge="_full_1353r_79",Hge="_arcItem_1353r_81",Wge="_iconBtn_1353r_87",Kge="_active_1353r_141",qge="_iconImg_1353r_151",Qge="_placeholderIcon_1353r_155",Yge="_placeholderText_1353r_173",Xge="_iconLabel_1353r_177",fr={wrap:Mge,centerLogoWrap:Fge,centerLogoLink:Bge,centerLogo:$ge,arc:Oge,left:Vge,right:Uge,sub:Gge,full:zge,arcItem:Hge,iconBtn:Wge,active:Kge,iconImg:qge,placeholderIcon:Qge,placeholderText:Yge,iconLabel:Xge},Jge=({to:t,label:e,icon:n,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const o=new URLSearchParams(i),c=o.get("tab"),u=o.get("sub"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),y=p.get("sub");a=r==="sub"?c===g&&!!y&&u===y:c===g}catch(o){a=!1}return s.jsxs(As,{to:t,"aria-label":e,className:[fr.iconBtn,r==="sub"?fr.muted:"",a?fr.active:""].join(" "),title:e,replace:!1,children:[n?s.jsx("img",{src:n,alt:"",className:fr.iconImg}):s.jsx("div",{className:fr.placeholderIcon,"aria-hidden":"true",children:s.jsx("span",{className:fr.placeholderText,children:e.slice(0,2).toUpperCase()})}),s.jsx("div",{className:fr.iconLabel,children:e})]})},Tb=({items:t,side:e,anchorSide:n="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:o=440})=>{const c=R.useMemo(()=>{const h=t.length;if(h===0)return[];let p=-90,g=90;e==="left"?(p=90,g=270):e==="sub"?n==="left"?(p=90,g=270):(p=-90,g=90):e==="full"&&(p=0,g=360);const y=(g-p)/(h+1),_=r?190:250;return t.map((w,k)=>{const P=(p+y*(k+1))*Math.PI/180;return{it:w,x:Math.cos(P)*_,y:Math.sin(P)*_}})},[t,e,n,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=n==="left"?`calc(50% - ${o}px)`:`calc(50% + ${o}px)`),h})();return s.jsx("div",{className:[fr.arc,e==="left"?fr.left:"",e==="right"?fr.right:"",e==="sub"?fr.sub:"",e==="full"?fr.full:""].join(" "),style:u,children:c.map(({it:h,x:p,y:g})=>s.jsx("div",{className:fr.arcItem,style:{transform:`translate(${p}px, ${g}px)`},children:s.jsx(Jge,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},Zge=["creators","scans","predictions","news","records","feedback"],K1=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],efe={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},tfe=new Set(Zge),sfe=K1.reduce((t,e)=>(t[e.key]=e,t),{}),nfe=t=>typeof t=="string"&&tfe.has(t),rfe=({logoSrc:t})=>{const[e]=fi(),n=e.get("tab")||null,r=R.useMemo(()=>K1.filter(_=>_.side==="left"),[]),i=R.useMemo(()=>K1.filter(_=>_.side==="right"),[]),a=nfe(n)?n:null,o=a?efe[a]:[],c=a?sfe[a].side:"right",u=R.useRef(null),[h,p]=R.useState(220),[g,y]=R.useState(440);return R.useEffect(()=>{const _=()=>{var N,v;const k=((v=(N=u.current)==null?void 0:N.offsetWidth)!=null?v:380)/2,P=Math.round(k+60),L=Math.round(P+220);p(P),y(L)};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),s.jsxs("div",{className:fr.wrap,children:[s.jsx("div",{className:fr.centerLogoWrap,children:s.jsx(As,{to:"/community",className:fr.centerLogoLink,"aria-label":"Community Hub Home",children:s.jsx("img",{ref:u,src:t,alt:"Community Hub",className:fr.centerLogo})})}),s.jsx(Tb,{items:r.map(_=>({key:_.key,to:_.to,label:_.label,icon:_.icon})),side:"left",variant:"main",arcOffset:h}),s.jsx(Tb,{items:i.map(_=>({key:_.key,to:_.to,label:_.label,icon:_.icon})),side:"right",variant:"main",arcOffset:h}),o.length>0&&s.jsx(Tb,{items:o.map(_=>({key:_.key,to:_.to,label:_.label,icon:_.icon})),side:"sub",anchorSide:c,compact:!0,variant:"sub",outerOffset:g})]})},ife="_topWrap_1rivx_1",afe="_divider_1rivx_19",ofe="_contentArea_1rivx_53",lfe="_placeholder_1rivx_63",cfe="_placeholderTitle_1rivx_77",dfe="_placeholderText_1rivx_91",eu={topWrap:ife,divider:afe,contentArea:ofe,placeholder:lfe,placeholderTitle:cfe,placeholderText:dfe},ufe="/assets/logo_communityhub-LVMLHRD6.png",hfe=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function cP(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function pfe(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(o=>parseInt(o,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const n=new Date(t);return Number.isNaN(n.getTime())?new Date().toISOString():n.toISOString()}function Ib(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function mfe(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function gfe(t){return t.avatar?t.avatar:`/avatars/${cP(t.code||t.name||"creator")}.png`}function ffe(t){const e=cP(t.code||t.name||"creator"),n=[],r=Ib(t.youtube);r&&n.push({type:"YouTube",url:r});const i=Ib(t.twitch);i&&n.push({type:"Twitch",url:i});const a=Ib(t.discord);return a&&n.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:gfe(t),description:mfe(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:pfe(t.latestActivity),platforms:n}}function vfe(t){var n,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(n=t==null?void 0:t.generatedAt)!=null?n:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function dP(t="/data/creators-live.json"){const[e,n]=R.useState(null),[r,i]=R.useState(""),[a,o]=R.useState(!1),[c,u]=R.useState(0);return R.useEffect(()=>{let h=!1;async function p(){o(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const y=await g.json();h||n(vfe(y))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),n(null))}finally{h||o(!1)}}return p(),()=>{h=!0}},[t,c]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const xfe=hfe,yfe=xfe.map(ffe),bfe=[...yfe];function uP(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function Fl(t,e,n=uP){if(t<=0)return"";const r=n(t);return e?`${r} ${e}`:r}function qp(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function _fe(t,e){const n=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*n;case"views":return(r.totalViews-i.totalViews)*n;case"activity":return(qp(r.lastActive)-qp(i.lastActive))*n*-1;case"language":return r.language.localeCompare(i.language)*n;default:return 0}}}function wfe(t){const e={width:16,height:16};switch(t){case"YouTube":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),s.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[s.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),s.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),s.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[s.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),s.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),s.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return s.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[s.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),s.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),s.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function eI({c:t}){return s.jsxs("article",{className:"cc-card",children:[s.jsxs("header",{className:"cc-card-head",children:[s.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const n=e.currentTarget;n.onerror=null,n.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),s.jsxs("div",{className:"cc-card-title",children:[s.jsx("h3",{className:"cc-name",children:t.name}),s.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[wfe(e.type),s.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),s.jsx("p",{className:"cc-desc",children:t.description}),s.jsxs("div",{className:"cc-stats",children:[s.jsx("span",{title:"Subscribers",children:Fl(t.subscribers,"subs")}),s.jsx("span",{title:"Total views",children:Fl(t.totalViews,"views")}),s.jsx("span",{title:"Weekly views",children:Fl(t.weeklyViews,"/wk")}),s.jsx("span",{title:"Weekly posts",children:Fl(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),s.jsxs("footer",{className:"cc-meta",children:[s.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),s.jsxs("span",{className:"cc-meta-right",children:["active ",qp(t.lastActive),"d ago"]})]})]},t.id)}function jfe({data:t}){return s.jsx("div",{className:"cc-table-wrap",children:s.jsxs("table",{className:"cc-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Lang"}),s.jsx("th",{children:"Subs"}),s.jsx("th",{children:"Total Views"}),s.jsx("th",{children:"Weekly Views"}),s.jsx("th",{children:"Weekly Posts"}),s.jsx("th",{children:"Active"})]})}),s.jsx("tbody",{children:t.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"cc-table-name",children:[s.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),s.jsx("span",{children:e.name})]})}),s.jsx("td",{children:e.language.toUpperCase()}),s.jsx("td",{children:Fl(e.subscribers)}),s.jsx("td",{children:Fl(e.totalViews)}),s.jsx("td",{children:Fl(e.weeklyViews)}),s.jsx("td",{children:Fl(e.weeklyPosts,void 0,n=>`${n}`)}),s.jsxs("td",{children:[qp(e.lastActive),"d"]})]},e.id))})]})})}function hP(){var X,te;const[t,e]=R.useState("static"),[n,r]=R.useState("cards"),[i,a]=R.useState("subs"),[o,c]=R.useState("desc"),[u,h]=R.useState("all"),[p,g]=R.useState("all"),[y,_]=R.useState(0),[w,k]=R.useState(365),[E,P]=R.useState(null),[L,N]=R.useState(""),[v,b]=R.useState(!1),[I,j]=R.useState(""),[S,C]=R.useState(null),{snapshot:M,error:T}=dP(),D=(X=M==null?void 0:M.data)!=null&&X.length?M.data:null,F=D!=null?D:bfe,V=t==="static"?F:(te=S!=null?S:D)!=null?te:[],z=R.useMemo(()=>{const se=new Set(V.map(Z=>Z.language));return Array.from(se).sort()},[V]),q=R.useMemo(()=>V.filter(se=>u==="all"?!0:se.language===u).filter(se=>p==="all"?!0:se.platforms.some(Z=>Z.type===p)).filter(se=>se.subscribers>=y).filter(se=>qp(se.lastActive)<=w).slice().sort(_fe(i,o)),[V,u,p,y,w,i,o]);R.useEffect(()=>{if(!E&&q.length){const se=q[Math.floor(Math.random()*q.length)];P(se.id)}},[q,E]);const H=R.useMemo(()=>q.find(se=>se.id===E)||null,[q,E]),K=R.useMemo(()=>q.slice().sort((se,Z)=>Z.weeklyViews-se.weeklyViews).slice(0,5),[q]),ne=R.useMemo(()=>q.slice().sort((se,Z)=>Z.weeklyPosts-se.weeklyPosts).slice(0,5),[q]);async function Y(){j(""),b(!0);try{const se=await fetch(L,{headers:{Accept:"application/json"}});if(!se.ok)throw new Error(`HTTP ${se.status}`);const Z=await se.json(),ve=Array.isArray(Z)?Z:Array.isArray(Z==null?void 0:Z.data)?Z.data:[];C(ve)}catch(se){j((se==null?void 0:se.message)||"Fetch failed")}finally{b(!1)}}const G=q.length===0;return s.jsxs("section",{className:"cc-wrap",children:[s.jsxs("div",{className:"cc-heading",children:[s.jsx("h1",{children:"Content Creator Hub"}),s.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),M&&s.jsxs("p",{className:"cc-sync",children:[s.jsxs("span",{children:["Live stats synced ",new Date(M.generatedAt).toLocaleString()]}),s.jsxs("span",{children:[M.data.length," profiles"]})]}),T&&s.jsx("p",{className:"cc-sync-error",children:T})]}),s.jsxs("div",{className:"cc-toolbar",children:[s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Data"}),s.jsxs("select",{value:t,onChange:se=>e(se.target.value),children:[s.jsx("option",{value:"static",children:"Static"}),s.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"View"}),s.jsxs("select",{value:n,onChange:se=>r(se.target.value),children:[s.jsx("option",{value:"cards",children:"Cards"}),s.jsx("option",{value:"table",children:"Table"}),s.jsx("option",{value:"json",children:"JSON"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Sort by"}),s.jsxs("select",{value:i,onChange:se=>a(se.target.value),children:[s.jsx("option",{value:"subs",children:"Subs"}),s.jsx("option",{value:"views",children:"Views"}),s.jsx("option",{value:"activity",children:"Activity"}),s.jsx("option",{value:"language",children:"Language"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Dir"}),s.jsxs("select",{value:o,onChange:se=>c(se.target.value),children:[s.jsx("option",{value:"desc",children:"Desc"}),s.jsx("option",{value:"asc",children:"Asc"})]})]})]}),s.jsxs("div",{className:"cc-toolbar-row",children:[s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Language"}),s.jsxs("select",{value:u,onChange:se=>h(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),z.map(se=>s.jsx("option",{value:se,children:se.toUpperCase()},se))]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Platform"}),s.jsxs("select",{value:p,onChange:se=>g(se.target.value),children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"YouTube",children:"YouTube"}),s.jsx("option",{value:"Twitch",children:"Twitch"}),s.jsx("option",{value:"TikTok",children:"TikTok"}),s.jsx("option",{value:"Discord",children:"Discord"})]})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Min subs"}),s.jsx("input",{type:"number",min:0,value:y,onChange:se=>_(Number(se.target.value||0)),placeholder:"0"})]}),s.jsxs("label",{className:"cc-field",children:[s.jsx("span",{children:"Active within"}),s.jsxs("select",{value:w,onChange:se=>k(Number(se.target.value)),children:[s.jsx("option",{value:7,children:"7 days"}),s.jsx("option",{value:30,children:"30 days"}),s.jsx("option",{value:90,children:"90 days"}),s.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&s.jsxs("div",{className:"cc-api",children:[s.jsxs("div",{className:"cc-api-ctrls",children:[s.jsxs("label",{className:"cc-field cc-field-grow",children:[s.jsx("span",{children:"API URL"}),s.jsx("input",{type:"url",value:L,onChange:se=>N(se.target.value),placeholder:"https://api.example.com/creators"})]}),s.jsx("button",{className:"cc-btn",onClick:Y,disabled:!L||v,children:v?"Loading":"Fetch"})]}),I&&s.jsx("div",{className:"cc-api-error",children:I}),s.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),H&&s.jsxs("div",{className:"cc-spotlight",children:[s.jsxs("div",{className:"cc-spot-head",children:[s.jsx("h2",{children:"Random CC Spotlight"}),s.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!q.length)return;const se=q[Math.floor(Math.random()*q.length)];P(se.id)},children:"Shuffle"})]}),s.jsx(eI,{c:H})]}),s.jsxs("div",{className:"cc-main",children:[s.jsxs("div",{className:"cc-main-left",children:[G&&s.jsxs("div",{className:"cc-empty",children:[s.jsx("h3",{children:"No creators match the filters"}),s.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!G&&n==="cards"&&s.jsx("div",{className:"cc-grid",children:q.map(se=>s.jsx(eI,{c:se},se.id))}),!G&&n==="table"&&s.jsx(jfe,{data:q}),n==="json"&&s.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(q,null,2)})]}),s.jsxs("aside",{className:"cc-main-right",children:[s.jsxs("div",{className:"cc-side",children:[s.jsx("h3",{children:"Weekly Toplists"}),s.jsxs("div",{className:"cc-toplist",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Views"}),s.jsx("ol",{children:K.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:uP(se.weeklyViews)})]},se.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"By Weekly Posts"}),s.jsx("ol",{children:ne.map(se=>s.jsxs("li",{children:[s.jsx("span",{children:se.name}),s.jsx("span",{className:"cc-top-val",children:se.weeklyPosts})]},se.id))})]})]})]}),s.jsxs("div",{className:"cc-side cc-legal",children:[s.jsx("h3",{children:"Legal & Disclaimer"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Only public data; no embedding without permission."}),s.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),s.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function pP(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Scans"}),s.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function mP(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Predictions"}),s.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function gP(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  News"}),s.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function fP(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Community  Feedback"}),s.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const Sfe=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],Ab=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],Nfe={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},kfe=t=>Nfe[t],Cfe=(t,e=64)=>{var i;const n=kfe(t),r=rd(n);return r&&(i=vi(r,e))!=null?i:null},Tfe="_recordsPage_kdw96_1",Ife="_navArea_kdw96_15",Afe="_tabList_kdw96_27",Efe="_tabButton_kdw96_55",Rfe="_tabButtonActive_kdw96_101",Pfe="_sectionContent_kdw96_115",Lfe="_placeholderPanel_kdw96_127",Dfe="_placeholderTitle_kdw96_143",Mfe="_placeholderText_kdw96_157",Ffe="_milestoneSection_kdw96_171",Bfe="_sectionHeader_kdw96_183",$fe="_filterBar_kdw96_197",Ofe="_filterButtons_kdw96_231",Vfe="_filterButton_kdw96_231",Ufe="_filterButtonActive_kdw96_295",Gfe="_filterSelectWrapper_kdw96_309",zfe="_filterLabel_kdw96_321",Hfe="_filterSelect_kdw96_309",Wfe="_emptyFilterMessage_kdw96_355",Kfe="_currentSection_kdw96_369",qfe="_currentGrid_kdw96_381",Qfe="_currentCard_kdw96_393",Yfe="_categoryLabel_kdw96_419",Xfe="_recordTitle_kdw96_433",Jfe="_currentDetails_kdw96_445",Zfe="_notes_kdw96_457",eve="_infoPanel_kdw96_469",tve="_infoCard_kdw96_481",sve="_disclaimerCard_kdw96_483",nve="_infoHeader_kdw96_525",rve="_infoAuthor_kdw96_539",ive="_authorName_kdw96_557",ave="_authorBadge_kdw96_565",ove="_infoAuthorIcon_kdw96_591",lve="_infoDate_kdw96_623",cve="_infoBody_kdw96_633",dve="_infoTitle_kdw96_645",uve="_infoLink_kdw96_665",hve="_milestoneGrid_kdw96_719",pve="_milestoneCard_kdw96_731",mve="_milestoneCategory_kdw96_757",gve="_milestoneTitle_kdw96_771",fve="_milestoneDetails_kdw96_785",vve="_detailRow_kdw96_797",xve="_detailLabel_kdw96_809",yve="_detailValue_kdw96_823",bve="_sourceLink_kdw96_833",_ve="_emptyState_kdw96_855",rt={recordsPage:Tfe,navArea:Ife,tabList:Afe,tabButton:Efe,tabButtonActive:Rfe,sectionContent:Pfe,placeholderPanel:Lfe,placeholderTitle:Dfe,placeholderText:Mfe,milestoneSection:Ffe,sectionHeader:Bfe,filterBar:$fe,filterButtons:Ofe,filterButton:Vfe,filterButtonActive:Ufe,filterSelectWrapper:Gfe,filterLabel:zfe,filterSelect:Hfe,emptyFilterMessage:Wfe,currentSection:Kfe,currentGrid:qfe,currentCard:Qfe,categoryLabel:Yfe,recordTitle:Xfe,currentDetails:Jfe,notes:Zfe,infoPanel:eve,infoCard:tve,disclaimerCard:sve,infoHeader:nve,infoAuthor:rve,authorName:ive,authorBadge:ave,infoAuthorIcon:ove,infoDate:lve,infoBody:cve,infoTitle:dve,infoLink:uve,milestoneGrid:hve,milestoneCard:pve,milestoneCategory:mve,milestoneTitle:gve,milestoneDetails:fve,detailRow:vve,detailLabel:xve,detailValue:yve,sourceLink:bve,emptyState:_ve},wve=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],jve={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},Sve=({title:t,description:e,hint:n})=>s.jsxs("article",{className:rt.placeholderPanel,children:[s.jsx("h2",{className:rt.placeholderTitle,children:t}),s.jsx("p",{className:rt.placeholderText,children:e}),n&&s.jsx("p",{className:rt.emptyState,children:n})]}),Nve=()=>{const[t,e]=R.useState("all"),n=R.useMemo(()=>{const a=new Set,o=[];for(const c of Ab)a.has(c.category)||(a.add(c.category),o.push(c.category));return["all",...o]},[]),r=t==="all"?Ab:Ab.filter(a=>a.category===t),i=a=>{e(a)};return s.jsxs("section",{className:rt.milestoneSection,"aria-label":"Records milestones",children:[s.jsxs("div",{className:rt.sectionHeader,children:[s.jsx("p",{children:"Milestones"}),s.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),s.jsxs("div",{className:rt.filterBar,children:[s.jsx("div",{className:rt.filterButtons,children:n.map(a=>s.jsx("button",{type:"button",className:[rt.filterButton,t===a&&rt.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),s.jsxs("label",{className:rt.filterSelectWrapper,children:[s.jsx("span",{className:rt.filterLabel,children:"Category"}),s.jsx("select",{value:t,onChange:a=>i(a.target.value),className:rt.filterSelect,children:n.map(a=>s.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?s.jsx("p",{className:rt.emptyFilterMessage,children:"No milestones fall into this category yet."}):s.jsx("div",{className:rt.milestoneGrid,children:r.map(a=>s.jsxs("article",{className:rt.milestoneCard,children:[s.jsx("span",{className:rt.milestoneCategory,children:a.category}),s.jsx("h3",{className:rt.milestoneTitle,children:a.achievement}),s.jsxs("div",{className:rt.milestoneDetails,children:[s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Name"}),s.jsx("span",{className:rt.detailValue,children:a.name})]}),s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Server"}),s.jsx("span",{className:rt.detailValue,children:a.server})]}),s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Date"}),s.jsx("span",{className:rt.detailValue,children:a.date})]}),a.notes&&s.jsx("p",{className:rt.notes,children:a.notes}),a.source&&s.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:rt.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},kve=()=>s.jsxs("section",{className:rt.currentSection,"aria-label":"Current community records",children:[s.jsxs("div",{className:rt.sectionHeader,children:[s.jsx("p",{children:"Current Records"}),s.jsx("h2",{children:"The latest verified achievements"})]}),s.jsx("div",{className:rt.currentGrid,children:Sfe.map((t,e)=>s.jsxs("article",{className:rt.currentCard,children:[s.jsx("span",{className:rt.categoryLabel,children:t.category}),s.jsx("h3",{className:rt.recordTitle,children:t.record}),s.jsxs("div",{className:rt.currentDetails,children:[s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Class"}),s.jsx("span",{className:rt.detailValue,children:t.classType})]}),s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Player"}),s.jsx("span",{className:rt.detailValue,children:t.playerName})]}),s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Server"}),s.jsx("span",{className:rt.detailValue,children:t.server})]}),s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Days"}),s.jsx("span",{className:rt.detailValue,children:t.days})]}),t.release&&s.jsxs("div",{className:rt.detailRow,children:[s.jsx("span",{className:rt.detailLabel,children:"Release"}),s.jsx("span",{className:rt.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&s.jsxs("p",{className:rt.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&s.jsx("p",{className:rt.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),Kh={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function vP(){const[t,e]=R.useState("current"),n=Cfe("infoCard",32),r=()=>{if(t==="current")return s.jsx(kve,{});if(t==="milestones")return s.jsx(Nve,{});const i=jve[t];return s.jsx(Sve,{title:i.title,description:i.description,hint:i.hint})};return s.jsxs("section",{className:rt.recordsPage,children:[s.jsx(aP,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),s.jsxs("div",{className:rt.infoPanel,children:[s.jsxs("div",{className:rt.infoCard,children:[s.jsxs("div",{className:rt.infoHeader,children:[s.jsxs("div",{className:rt.infoAuthor,children:[n?s.jsx("img",{src:n,alt:"Community Data",className:rt.infoAuthorIcon}):null,s.jsx("span",{className:rt.authorName,children:"S&F Tavern Info"}),s.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:rt.authorBadge,children:"Discord"})]}),s.jsx("span",{className:rt.infoDate,children:"11.12.2020 14:08"})]}),s.jsxs("div",{className:rt.infoBody,children:[s.jsx("h3",{className:rt.infoTitle,children:Kh.title}),Kh.paragraphs.map(i=>s.jsx("p",{children:i},i))]}),s.jsxs("div",{className:rt.infoLink,children:[s.jsx("span",{children:Kh.linkLabel}),s.jsx("a",{href:Kh.linkUrl,target:"_blank",rel:"noreferrer",children:Kh.linkUrl})]})]}),s.jsxs("div",{className:rt.disclaimerCard,children:[s.jsx("h3",{className:rt.infoTitle,children:"Disclaimer"}),s.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),s.jsx("div",{className:rt.navArea,children:s.jsx("nav",{className:rt.tabList,"aria-label":"Records navigation",children:wve.map(i=>s.jsx("button",{type:"button",className:`${rt.tabButton} ${t===i.key?rt.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),s.jsx("div",{className:rt.sectionContent,children:r()})]})}const Cve={creators:hP,scans:pP,predictions:mP,news:gP,records:vP,feedback:fP};function Tve(){const[t]=fi(),e=t.get("tab")||"",n=Cve[e];return s.jsxs(Kt,{children:[s.jsx("div",{className:eu.topWrap,children:s.jsx(rfe,{logoSrc:ufe})}),s.jsx("div",{className:eu.divider}),s.jsx("div",{className:eu.contentArea,children:n?s.jsx(n,{}):s.jsxs("div",{className:eu.placeholder,children:[s.jsx("h2",{className:eu.placeholderTitle,children:"Community"}),s.jsx("p",{className:eu.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function Ive(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[s.jsxs(As,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),s.jsxs(As,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),s.jsxs(As,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[s.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),s.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function Ave(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Letzter Scan"}),s.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function Eve(){return s.jsxs("section",{style:{padding:16},children:[s.jsx("h1",{children:"Scans  Archiv"}),s.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function Rve(){return s.jsx(Kt,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:s.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:s.jsx(Pve,{}),right:s.jsx(Lve,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[s.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsx(As,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),s.jsx(As,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(pf,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),s.jsx(pf,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),s.jsx(pf,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),s.jsx(pf,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function Pve(){return s.jsxs("nav",{className:"space-y-2 text-sm",children:[s.jsx(qh,{to:"/guild-hub/planner",children:"Planner"}),s.jsx(qh,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),s.jsx(qh,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),s.jsx(qh,{to:"/guild-hub/waitlist",children:"Waitlist"}),s.jsx(qh,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function Lve(){return s.jsxs("aside",{className:"space-y-3 text-sm",children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),s.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function pf({to:t,title:e,desc:n}){return s.jsxs(As,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),n?s.jsx("div",{className:"mt-1 text-sm opacity-75",children:n}):null]})}function qh({to:t,children:e}){return s.jsx(Cs,{to:t,className:({isActive:n})=>`block rounded-lg border px-3 py-2 no-underline ${n?"font-semibold":""}`,style:({isActive:n})=>({borderColor:n?"#2B6DE0":"#2B4C73",background:n?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:n?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const Dve="_page_1mlmy_1",Mve="_header_1mlmy_13",Fve="_headerStack_1mlmy_25",Bve="_kicker_1mlmy_37",$ve="_title_1mlmy_53",Ove="_headerActions_1mlmy_65",Vve="_primaryAction_1mlmy_77",Uve="_secondaryAction_1mlmy_79",Gve="_infoStrip_1mlmy_127",zve="_infoBlock_1mlmy_147",Hve="_infoLabel_1mlmy_161",Wve="_freshnessWrapper_1mlmy_181",Kve="_freshnessBadge_1mlmy_189",qve="_badge_f0_1mlmy_213",Qve="_badge_f1_1mlmy_215",Yve="_badge_f2_1mlmy_217",Xve="_badge_f3_1mlmy_219",Jve="_badge_f4_1mlmy_221",Zve="_badge_f5_1mlmy_223",exe="_badge_f6_1mlmy_225",txe="_badge_f7_1mlmy_227",sxe="_badge_unknown_1mlmy_229",nxe="_popover_1mlmy_233",rxe="_popoverLabel_1mlmy_265",ixe="_filterToolbar_1mlmy_275",axe="_filterSheetButton_1mlmy_285",oxe="_inlineFilters_1mlmy_303",lxe="_searchInput_1mlmy_315",cxe="_select_1mlmy_317",dxe="_ownerGroup_1mlmy_335",uxe="_ownerChip_1mlmy_347",hxe="_ownerChipActive_1mlmy_365",pxe="_sortGroup_1mlmy_375",mxe="_sortLabel_1mlmy_387",gxe="_directionButton_1mlmy_397",fxe="_listBody_1mlmy_415",vxe="_tableWrapper_1mlmy_427",xxe="_table_1mlmy_427",yxe="_stickyColumn_1mlmy_481",bxe="_rowTitleButton_1mlmy_495",_xe="_tableStatus_1mlmy_513",wxe="_cardList_1mlmy_533",jxe="_card_1mlmy_533",Sxe="_cardHeader_1mlmy_565",Nxe="_cardTitle_1mlmy_577",kxe="_cardMeta_1mlmy_595",Cxe="_cardDescription_1mlmy_611",Txe="_cardFooter_1mlmy_623",Ixe="_cardLabel_1mlmy_639",Axe="_scanBadge_1mlmy_649",Exe="_emptyState_1mlmy_665",Rxe="_sheetBackdrop_1mlmy_681",Pxe="_sheet_1mlmy_681",Lxe="_sheetHandle_1mlmy_721",Dxe="_sheetBody_1mlmy_739",Mxe="_sheetLabel_1mlmy_755",Fxe="_sheetActions_1mlmy_793",Bxe="_overlay_1mlmy_807",$xe="_panel_1mlmy_825",Oxe="_modal_1mlmy_851",Vxe="_drawer_1mlmy_861",Uxe="_panelHeader_1mlmy_869",Gxe="_panelControls_1mlmy_883",zxe="_panelDescription_1mlmy_913",Hxe="_detailGrid_1mlmy_925",Wxe="_panelFooter_1mlmy_957",Kxe="_formOverlay_1mlmy_969",qxe="_formPanel_1mlmy_991",Qxe="_formGrid_1mlmy_1017",Yxe="_menuWrapper_1mlmy_1029",Xxe="_dotsButton_1mlmy_1037",Jxe="_menu_1mlmy_1029",Zxe="_pagination_1mlmy_1109",De={page:Dve,header:Mve,headerStack:Fve,kicker:Bve,title:$ve,headerActions:Ove,primaryAction:Vve,secondaryAction:Uve,infoStrip:Gve,infoBlock:zve,infoLabel:Hve,freshnessWrapper:Wve,freshnessBadge:Kve,badge_f0:qve,badge_f1:Qve,badge_f2:Yve,badge_f3:Xve,badge_f4:Jve,badge_f5:Zve,badge_f6:exe,badge_f7:txe,badge_unknown:sxe,popover:nxe,popoverLabel:rxe,filterToolbar:ixe,filterSheetButton:axe,inlineFilters:oxe,searchInput:lxe,select:cxe,ownerGroup:dxe,ownerChip:uxe,ownerChipActive:hxe,sortGroup:pxe,sortLabel:mxe,directionButton:gxe,listBody:fxe,tableWrapper:vxe,table:xxe,stickyColumn:yxe,rowTitleButton:bxe,tableStatus:_xe,cardList:wxe,card:jxe,cardHeader:Sxe,cardTitle:Nxe,cardMeta:kxe,cardDescription:Cxe,cardFooter:Txe,cardLabel:Ixe,scanBadge:Axe,emptyState:Exe,sheetBackdrop:Rxe,sheet:Pxe,sheetHandle:Lxe,sheetBody:Dxe,sheetLabel:Mxe,sheetActions:Fxe,overlay:Bxe,panel:$xe,modal:Oxe,drawer:Vxe,panelHeader:Uxe,panelControls:Gxe,panelDescription:zxe,detailGrid:Hxe,panelFooter:Wxe,formOverlay:Kxe,formPanel:qxe,formGrid:Qxe,menuWrapper:Yxe,dotsButton:Xxe,menu:Jxe,pagination:Zxe};function eye(){var Y;const[t,e]=W.useState(Bne),[n,r]=W.useState(mb),[i,a]=W.useState(mb),o=Du(n.q,300),c=W.useMemo(()=>{const G=$ne(t,n,o);return One(G,n.sort,n.dir)},[t,n,o]),u=W.useMemo(()=>Vne(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),p=W.useMemo(()=>Array.from(new Set(t.map(G=>G.owner))),[t]),g=Mu("(min-width: 768px)"),y=Mu("(min-width: 1024px)"),[_,w]=W.useState(!1),[k,E]=W.useState(null),P=(Y=t.find(G=>G.id===k))!=null?Y:null,L=W.useRef(null);Fu(L,!!P&&!y);const[N,v]=W.useState(null),[b,I]=W.useState(!1),j=W.useRef(null);Fu(j,b);const S=W.useMemo(()=>Une(t),[t]),C=W.useMemo(()=>S?Wp(S.nextUpdateAt,Date.now()):"",[S]),M=g,T=y,D=s.jsxs("div",{className:De.headerActions,children:[s.jsx("button",{type:"button",className:De.primaryAction,onClick:()=>{v(null),I(!0)},children:"Neuer Eintrag"}),!g&&s.jsx("button",{type:"button",className:De.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>w(!0),children:"Filter"})]}),F=G=>{const X=ST(G);r(X),a(X)},V=(G,X)=>{const te=ST({...n,[G]:X,page:G==="page"||G==="pageSize"?X:1});F(te)},z=()=>{F(i),w(!1)},q=()=>{F(mb),w(!1)},H=(G,X=!1)=>{if(X)a(te=>{const Z=te.owner.includes(G)?te.owner.filter(ve=>ve!==G):[...te.owner,G];return{...te,owner:Z}});else{const se=n.owner.includes(G)?n.owner.filter(Z=>Z!==G):[...n.owner,G];V("owner",se)}},K=(G,X)=>{e(te=>te.map(se=>se.id===G?{...se,status:X,updatedAt:new Date().toISOString()}:se))},ne=G=>{e(X=>X.some(se=>se.id===G.id)?X.map(se=>se.id===G.id?G:se):[G,...X]),I(!1)};return s.jsxs(Kt,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[s.jsxs("div",{className:De.page,children:[s.jsxs("header",{className:De.header,children:[s.jsxs("div",{className:De.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:De.kicker,children:"Deployment"}),s.jsx("h1",{className:De.title,children:"Planer"})]}),D]}),s.jsxs("div",{className:De.infoStrip,children:[s.jsxs("div",{className:De.infoBlock,children:[s.jsx("span",{className:De.infoLabel,children:"Offen"}),s.jsx("strong",{children:c.filter(G=>G.status==="open").length})]}),s.jsxs("div",{className:De.infoBlock,children:[s.jsx("span",{className:De.infoLabel,children:"In Arbeit"}),s.jsx("strong",{children:c.filter(G=>G.status==="in_progress").length})]}),S&&s.jsx(tye,{code:S.freshness,label:hj[S.freshness],updatedAt:S.lastScanAt,nextUpdateAt:S.nextUpdateAt,countdown:C})]})]}),s.jsx("section",{className:De.filterToolbar,children:g?s.jsx(sye,{filters:n,owners:p,onChange:V,onOwnerToggle:G=>H(G,!1)}):s.jsx("button",{type:"button",className:De.filterSheetButton,onClick:()=>w(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),s.jsx("section",{className:De.listBody,children:M?s.jsx(nye,{items:u,sort:n.sort,dir:n.dir,onSortChange:G=>{const X=n.sort===G&&n.dir==="asc"?"desc":"asc";V("sort",G),V("dir",X)},onSelect:G=>E(G.id),onStatusChange:K,onEdit:G=>{v(G),I(!0)}}):s.jsx(rye,{items:u,onSelect:G=>E(G.id),onStatusChange:K,onEdit:G=>{v(G),I(!0)}})}),s.jsx(aye,{page:n.page,totalPages:h,onChange:G=>V("page",G)})]}),_&&s.jsx(iye,{filters:i,owners:p,onChange:a,onOwnerToggle:G=>H(G,!0),onClose:()=>w(!1),onApply:z,onReset:q}),P&&s.jsx(yP,{ref:L,item:P,mode:T?"drawer":"modal",onClose:()=>E(null),onEdit:()=>{v(P),I(!0),E(null)},onStatusChange:K}),b&&s.jsx(bP,{ref:j,owners:p.length?p:XR,item:N,onClose:()=>I(!1),onSubmit:ne})]})}function tye({code:t,label:e,updatedAt:n,nextUpdateAt:r,countdown:i}){var c;const[a,o]=W.useState(!1);return s.jsxs("div",{className:De.freshnessWrapper,children:[s.jsx("button",{type:"button",className:`${De.freshnessBadge} ${(c=De[`badge_${t}`])!=null?c:""}`,"aria-label":`Freshness ${e}`,onClick:()=>o(u=>!u),children:e}),a&&s.jsxs("div",{className:De.popover,role:"dialog","aria-label":"Freshness Details",children:[s.jsxs("div",{children:[s.jsx("span",{className:De.popoverLabel,children:"Zuletzt gescannt"}),s.jsx("strong",{children:to(n)})]}),s.jsxs("div",{children:[s.jsx("span",{className:De.popoverLabel,children:"Naechster Scan"}),s.jsx("strong",{children:to(r)})]}),s.jsxs("div",{children:[s.jsx("span",{className:De.popoverLabel,children:"Countdown"}),s.jsx("strong",{children:i})]})]})]})}function sye({filters:t,owners:e,onChange:n,onOwnerToggle:r}){return s.jsxs("div",{className:De.inlineFilters,children:[s.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:De.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>n("q",i.target.value)}),s.jsxs("select",{className:De.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>n("type",i.target.value),children:[s.jsx("option",{value:"all",children:"Typ (alle)"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]}),s.jsxs("select",{className:De.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>n("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("select",{className:De.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>n("range",i.target.value),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]}),s.jsx("div",{className:De.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return s.jsx("button",{type:"button",className:`${De.ownerChip} ${a?De.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:De.sortGroup,children:[s.jsx("label",{htmlFor:"planner-sort",className:De.sortLabel,children:"Sortieren"}),s.jsxs("select",{id:"planner-sort",name:"plannerSort",className:De.select,value:t.sort,onChange:i=>n("sort",i.target.value),children:[s.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),s.jsx("option",{value:"priority",children:"Prioritaet"}),s.jsx("option",{value:"title",children:"Titel"})]}),s.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:De.directionButton,onClick:()=>n("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function nye({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:o}){const c=u=>e===u?n==="asc"?" ":" ":"";return t.length===0?s.jsx(xP,{}):s.jsx("div",{className:De.tableWrapper,children:s.jsxs("table",{className:De.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:De.stickyColumn,onClick:()=>r("title"),children:["Titel",c("title")]}),s.jsx("th",{children:"Typ"}),s.jsx("th",{children:"Owner"}),s.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",c("dueAt")]}),s.jsx("th",{children:"Status"}),s.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",c("updatedAt")]}),s.jsx("th",{})]})}),s.jsx("tbody",{children:t.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:De.stickyColumn,children:s.jsx("button",{type:"button",className:De.rowTitleButton,onClick:()=>i(u),children:u.title})}),s.jsx("td",{children:uj[u.type]}),s.jsx("td",{children:u.owner}),s.jsx("td",{children:to(u.dueAt)}),s.jsx("td",{children:s.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:De.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),s.jsx("td",{children:jm(u.updatedAt)}),s.jsx("td",{children:s.jsx(_P,{onEdit:()=>o(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function rye({items:t,onSelect:e,onStatusChange:n,onEdit:r}){return t.length===0?s.jsx(xP,{}):s.jsx("div",{className:De.cardList,children:t.map(i=>s.jsxs("article",{className:De.card,children:[s.jsxs("div",{className:De.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:De.cardTitle,onClick:()=>e(i),children:i.title}),s.jsxs("div",{className:De.cardMeta,children:[s.jsx("span",{children:uj[i.type]}),s.jsx("span",{children:Mne[i.status]}),s.jsxs("span",{children:["Due ",to(i.dueAt)]})]})]}),s.jsx(_P,{onEdit:()=>r(i),onComplete:()=>n(i.id,"done")})]}),s.jsx("p",{className:De.cardDescription,children:i.description}),s.jsxs("div",{className:De.cardFooter,children:[s.jsxs("div",{children:[s.jsx("span",{className:De.cardLabel,children:"Owner"}),s.jsx("strong",{children:i.owner})]}),s.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:De.tableStatus,value:i.status,onChange:a=>n(i.id,a.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),s.jsxs("span",{className:De.scanBadge,children:["Letzter Scan ",jm(i.lastScanAt)]})]})]},i.id))})}function xP(){return s.jsx("div",{className:De.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function iye({filters:t,owners:e,onChange:n,onOwnerToggle:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:De.sheetBackdrop,role:"presentation",onClick:i,children:s.jsxs("div",{className:De.sheet,role:"dialog","aria-label":"Filter",onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:De.sheetHandle}),s.jsxs("div",{className:De.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:De.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:c=>n(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:De.sheetLabel,children:["Typ",s.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:c=>n(u=>({...u,type:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{className:De.sheetLabel,children:["Status",s.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:c=>n(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{className:De.sheetLabel,children:["Zeitraum",s.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:c=>n(u=>({...u,range:c.target.value})),children:[s.jsx("option",{value:"7d",children:"7 Tage"}),s.jsx("option",{value:"30d",children:"30 Tage"}),s.jsx("option",{value:"90d",children:"90 Tage"}),s.jsx("option",{value:"all",children:"Alle"})]})]}),s.jsxs("div",{className:De.sheetLabel,children:["Owner",s.jsx("div",{className:De.ownerGroup,children:e.map(c=>{const u=t.owner.includes(c);return s.jsx("button",{type:"button",className:`${De.ownerChip} ${u?De.ownerChipActive:""}`,onClick:()=>r(c),children:c},c)})})]})]}),s.jsxs("div",{className:De.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:De.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const yP=W.forwardRef(({item:t,mode:e,onClose:n,onEdit:r,onStatusChange:i},a)=>s.jsx("div",{className:De.overlay,children:s.jsxs("div",{ref:a,className:`${De.panel} ${e==="drawer"?De.drawer:De.modal}`,children:[s.jsxs("header",{className:De.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:De.cardLabel,children:uj[t.type]}),s.jsx("h2",{children:t.title})]}),s.jsx("button",{type:"button",className:De.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("div",{className:De.panelControls,children:[s.jsxs("label",{children:["Status",s.jsxs("select",{value:t.status,onChange:o=>i(t.id,o.target.value),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{disabled:!0,value:t.priority,children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsx("p",{className:De.panelDescription,children:t.description}),s.jsxs("dl",{className:De.detailGrid,children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Owner"}),s.jsx("dd",{children:t.owner})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Assignees"}),s.jsx("dd",{children:t.assignees.join(", ")})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Termin"}),s.jsx("dd",{children:to(t.dueAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt aktualisiert"}),s.jsx("dd",{children:jm(t.updatedAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Erstellt"}),s.jsx("dd",{children:to(t.createdAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Tags"}),s.jsx("dd",{children:t.tags.join(", ")})]})]}),s.jsxs("div",{className:De.panelFooter,children:[s.jsx("button",{type:"button",className:De.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:De.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));yP.displayName="DetailPanel";const bP=W.forwardRef(({owners:t,item:e,onClose:n,onSubmit:r},i)=>{const[a,o]=W.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:XR[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});W.useEffect(()=>{e&&o(e)},[JSON.stringify(e)]);const c=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{o(p=>{const y=p.tags.includes(h)?p.tags.filter(_=>_!==h):[...p.tags,h];return{...p,tags:y}})};return s.jsx("div",{className:De.formOverlay,children:s.jsxs("form",{ref:i,className:De.formPanel,onSubmit:c,children:[s.jsxs("header",{className:De.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:De.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),s.jsx("h2",{children:e?e.title:"Planner Task"})]}),s.jsx("button",{type:"button",className:De.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("label",{className:De.sheetLabel,children:["Titel",s.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>o(p=>({...p,title:h.target.value})),required:!0})]}),s.jsxs("label",{className:De.sheetLabel,children:["Beschreibung",s.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>o(p=>({...p,description:h.target.value})),rows:4})]}),s.jsxs("div",{className:De.formGrid,children:[s.jsxs("label",{children:["Typ",s.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>o(p=>({...p,type:h.target.value})),children:[s.jsx("option",{value:"raid",children:"Raid"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"task",children:"Task"})]})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>o(p=>({...p,status:h.target.value})),children:[s.jsx("option",{value:"open",children:"Offen"}),s.jsx("option",{value:"in_progress",children:"In Arbeit"}),s.jsx("option",{value:"done",children:"Erledigt"}),s.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),s.jsxs("label",{children:["Owner",s.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>o(p=>({...p,owner:h.target.value})),children:t.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Prioritaet",s.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>o(p=>({...p,priority:h.target.value})),children:[s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"high",children:"Hoch"}),s.jsx("option",{value:"medium",children:"Mittel"}),s.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),s.jsxs("label",{className:De.sheetLabel,children:["Termin",s.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>o(p=>({...p,dueAt:new Date(h.target.value).toISOString()}))})]}),s.jsxs("div",{className:De.sheetLabel,children:["Tags",s.jsx("div",{className:De.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const p=a.tags.includes(h);return s.jsx("button",{type:"button",className:`${De.ownerChip} ${p?De.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),s.jsxs("footer",{className:De.panelFooter,children:[s.jsx("button",{type:"button",className:De.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:De.primaryAction,children:"Speichern"})]})]})})});bP.displayName="PlannerFormOverlay";function _P({onEdit:t,onComplete:e}){const[n,r]=W.useState(!1),i=W.useRef(null);return W.useEffect(()=>{if(!n)return;const a=o=>{var c;(c=i.current)!=null&&c.contains(o.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[n]),s.jsxs("div",{className:De.menuWrapper,ref:i,children:[s.jsx("button",{type:"button",className:De.dotsButton,"aria-haspopup":"menu","aria-expanded":n,onClick:()=>r(a=>!a),children:"..."}),n&&s.jsxs("div",{className:De.menu,role:"menu",children:[s.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),s.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),s.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function aye({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:De.pagination,children:[s.jsx("button",{type:"button",className:De.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:De.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const oye="_page_1cvuk_1",lye="_header_1cvuk_13",cye="_headerLeading_1cvuk_29",dye="_backLink_1cvuk_41",uye="_headerStack_1cvuk_77",hye="_kicker_1cvuk_89",pye="_title_1cvuk_105",mye="_subtitle_1cvuk_117",gye="_headerActions_1cvuk_129",fye="_plannerNotice_1cvuk_141",vye="_noticeItem_1cvuk_163",xye="_noticeWarning_1cvuk_185",yye="_noticeDot_1cvuk_197",bye="_tabSection_1cvuk_213",_ye="_tabBar_1cvuk_225",wye="_tabItem_1cvuk_239",jye="_tabItemActive_1cvuk_279",Sye="_tabLabel_1cvuk_291",Nye="_tabHelper_1cvuk_301",kye="_tabPanel_1cvuk_311",Cye="_tabBadge_1cvuk_331",Tye="_primaryAction_1cvuk_1331",Iye="_secondaryAction_1cvuk_1333",Aye="_infoStrip_1cvuk_1383",Eye="_infoBlock_1cvuk_1403",Rye="_infoLabel_1cvuk_1415",Pye="_infoHint_1cvuk_1441",Lye="_stageGrid_1cvuk_1453",Dye="_panel_1cvuk_1465",Mye="_panelHeader_1cvuk_1487",Fye="_panelKicker_1cvuk_1501",Bye="_panelTitle_1cvuk_1517",$ye="_panelLead_1cvuk_1529",Oye="_badge_1cvuk_1541",Vye="_panelBody_1cvuk_1563",Uye="_placeholderGrid_1cvuk_1575",Gye="_placeholderCard_1cvuk_1587",zye="_placeholderTitle_1cvuk_1609",Hye="_placeholderText_1cvuk_1619",Wye="_helperSection_1cvuk_1631",Kye="_helperCard_1cvuk_1639",qye="_helperKicker_1cvuk_1661",Qye="_helperTitle_1cvuk_1677",Yye="_helperText_1cvuk_1689",Xye="_helperActions_1cvuk_1701",bt={page:oye,header:lye,headerLeading:cye,backLink:dye,headerStack:uye,kicker:hye,title:pye,subtitle:mye,headerActions:gye,plannerNotice:fye,noticeItem:vye,noticeWarning:xye,noticeDot:yye,tabSection:bye,tabBar:_ye,tabItem:wye,tabItemActive:jye,tabLabel:Sye,tabHelper:Nye,tabPanel:kye,tabBadge:Cye,primaryAction:Tye,secondaryAction:Iye,infoStrip:Aye,infoBlock:Eye,infoLabel:Rye,infoHint:Pye,stageGrid:Lye,panel:Dye,panelHeader:Mye,panelKicker:Fye,panelTitle:Bye,panelLead:$ye,badge:Oye,panelBody:Vye,placeholderGrid:Uye,placeholderCard:Gye,placeholderTitle:zye,placeholderText:Hye,helperSection:Wye,helperCard:Kye,helperKicker:qye,helperTitle:Qye,helperText:Yye,helperActions:Xye},Jye="_setupGrid_rdp6l_1",Zye="_setupLeft_rdp6l_13",e0e="_setupRight_rdp6l_15",t0e="_card_rdp6l_27",s0e="_cardHeader_rdp6l_49",n0e="_cardKicker_rdp6l_61",r0e="_cardTitle_rdp6l_77",i0e="_cardText_rdp6l_89",a0e="_toggleGroup_rdp6l_101",o0e="_toggleButton_rdp6l_113",l0e="_toggleButtonActive_rdp6l_143",c0e="_modeHint_rdp6l_155",d0e="_formGrid_rdp6l_167",u0e="_formField_rdp6l_179",h0e="_formLabel_rdp6l_191",p0e="_input_rdp6l_201",m0e="_suggestions_rdp6l_231",g0e="_suggestionBtn_rdp6l_257",f0e="_suggestionName_rdp6l_297",v0e="_suggestionMeta_rdp6l_305",x0e="_partnerActions_rdp6l_315",y0e="_primaryAction_rdp6l_329",b0e="_secondaryAction_rdp6l_331",_0e="_partnerList_rdp6l_381",w0e="_partnerRow_rdp6l_393",j0e="_partnerName_rdp6l_413",S0e="_partnerMeta_rdp6l_423",N0e="_removeButton_rdp6l_433",k0e="_emptyState_rdp6l_463",C0e="_previewBlock_rdp6l_473",T0e="_previewLabel_rdp6l_485",I0e="_previewValue_rdp6l_499",A0e="_previewCard_rdp6l_509",E0e="_previewTitle_rdp6l_523",R0e="_previewMeta_rdp6l_533",P0e="_previewList_rdp6l_543",L0e="_previewItem_rdp6l_555",D0e="_setupInfo_rdp6l_569",M0e="_setupWarning_rdp6l_593",F0e="_setupInfoIcon_rdp6l_605",B0e="_setupInfoTitle_rdp6l_629",$0e="_setupInfoText_rdp6l_639",Ye={setupGrid:Jye,setupLeft:Zye,setupRight:e0e,card:t0e,cardHeader:s0e,cardKicker:n0e,cardTitle:r0e,cardText:i0e,toggleGroup:a0e,toggleButton:o0e,toggleButtonActive:l0e,modeHint:c0e,formGrid:d0e,formField:u0e,formLabel:h0e,input:p0e,suggestions:m0e,suggestionBtn:g0e,suggestionName:f0e,suggestionMeta:v0e,partnerActions:x0e,primaryAction:y0e,secondaryAction:b0e,partnerList:_0e,partnerRow:w0e,partnerName:j0e,partnerMeta:S0e,removeButton:N0e,emptyState:k0e,previewBlock:C0e,previewLabel:T0e,previewValue:I0e,previewCard:A0e,previewTitle:E0e,previewMeta:R0e,previewList:P0e,previewItem:L0e,setupInfo:D0e,setupWarning:M0e,setupInfoIcon:F0e,setupInfoTitle:B0e,setupInfoText:$0e};function O0e({setupState:t,onChangeMode:e,onChangeBaseGuild:n,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var E,P,L,N,v,b,I,j,S,C;const[a,o]=W.useState(()=>{var M,T,D,F;return{name:(T=(M=t.baseGuild)==null?void 0:M.name)!=null?T:"",server:(F=(D=t.baseGuild)==null?void 0:D.server)!=null?F:""}}),[c,u]=W.useState({id:void 0,name:"",server:""}),h=Du(a.name,250),p=Du(c.name,250),g=tI(h,a.server||"all"),y=tI(p,c.server||"all"),_=!!((P=(E=t.baseGuild)==null?void 0:E.name)!=null&&P.trim()&&((N=(L=t.baseGuild)==null?void 0:L.server)!=null&&N.trim())),w=t.partnerGuilds.length>0;W.useEffect(()=>{var T,D,F,V;const M={name:(D=(T=t.baseGuild)==null?void 0:T.name)!=null?D:"",server:(V=(F=t.baseGuild)==null?void 0:F.server)!=null?V:""};(M.name!==a.name||M.server!==a.server)&&o(M)},[(v=t.baseGuild)==null?void 0:v.name,(b=t.baseGuild)==null?void 0:b.server]);const k=()=>{!c.name.trim()||!c.server.trim()||(r(c),u({id:void 0,name:"",server:""}))};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Ye.setupGrid,children:[s.jsxs("div",{className:Ye.setupLeft,children:[s.jsxs("div",{className:Ye.card,children:[s.jsx("div",{className:Ye.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:Ye.cardKicker,children:"Modus"}),s.jsx("h3",{className:Ye.cardTitle,children:"Scan-based oder manuell"}),s.jsx("p",{className:Ye.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),s.jsxs("div",{className:Ye.toggleGroup,role:"group","aria-label":"Setup Modus",children:[s.jsx("button",{type:"button",className:`${Ye.toggleButton} ${t.mode==="scan"?Ye.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),s.jsx("button",{type:"button",className:`${Ye.toggleButton} ${t.mode==="manual"?Ye.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),s.jsx("p",{className:Ye.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),s.jsxs("div",{className:Ye.card,children:[s.jsx("div",{className:Ye.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:Ye.cardKicker,children:"Base Guild"}),s.jsx("h3",{className:Ye.cardTitle,children:"Stammdaten"}),s.jsx("p",{className:Ye.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),s.jsxs("div",{className:Ye.formGrid,children:[s.jsxs("label",{className:Ye.formField,children:[s.jsx("span",{className:Ye.formLabel,children:"Guild name"}),s.jsx("input",{type:"text",className:Ye.input,value:a.name,onChange:M=>{const T=M.target.value;o(D=>({...D,name:T}))},onBlur:()=>n({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&s.jsx("div",{className:Ye.suggestions,children:g.map(M=>s.jsxs("button",{type:"button",className:Ye.suggestionBtn,onClick:()=>{o({name:M.name,server:M.server}),n({id:M.id,name:M.name,server:M.server})},children:[s.jsx("span",{className:Ye.suggestionName,children:M.name}),s.jsx("span",{className:Ye.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:Ye.formField,children:[s.jsx("span",{className:Ye.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:Ye.input,value:a.server,onChange:M=>{const T=M.target.value;o(D=>({...D,server:T}))},onBlur:()=>n({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),s.jsxs("div",{className:Ye.card,children:[s.jsx("div",{className:Ye.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:Ye.cardKicker,children:"Partner Guilds"}),s.jsx("h3",{className:Ye.cardTitle,children:"Partner hinzufuegen"}),s.jsx("p",{className:Ye.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),s.jsxs("div",{className:Ye.formGrid,children:[s.jsxs("label",{className:Ye.formField,children:[s.jsx("span",{className:Ye.formLabel,children:"Name"}),s.jsx("input",{type:"text",className:Ye.input,value:c.name,onChange:M=>u(T=>({...T,name:M.target.value})),placeholder:"z.B. Nova Alliance"}),y.length>0&&s.jsx("div",{className:Ye.suggestions,children:y.map(M=>s.jsxs("button",{type:"button",className:Ye.suggestionBtn,onClick:()=>u({id:M.id,name:M.name,server:M.server}),children:[s.jsx("span",{className:Ye.suggestionName,children:M.name}),s.jsx("span",{className:Ye.suggestionMeta,children:M.server})]},M.id))})]}),s.jsxs("label",{className:Ye.formField,children:[s.jsx("span",{className:Ye.formLabel,children:"Server"}),s.jsx("input",{type:"text",className:Ye.input,value:c.server,onChange:M=>u(T=>({...T,server:M.target.value})),placeholder:"z.B. EU-02"})]})]}),s.jsxs("div",{className:Ye.partnerActions,children:[s.jsx("button",{type:"button",className:Ye.primaryAction,onClick:k,children:"Add partner guild"}),s.jsx("button",{type:"button",className:Ye.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),s.jsx("div",{className:Ye.partnerList,children:t.partnerGuilds.length===0?s.jsx("div",{className:Ye.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:Ye.partnerRow,children:[s.jsxs("div",{children:[s.jsx("div",{className:Ye.partnerName,children:M.name||"Unbenannt"}),s.jsx("div",{className:Ye.partnerMeta,children:M.server||"Server n/a"})]}),s.jsx("button",{type:"button",className:Ye.removeButton,onClick:()=>i(M.id),children:"Remove"})]},M.id))})]})]}),s.jsx("aside",{className:Ye.setupRight,children:s.jsxs("div",{className:Ye.card,children:[s.jsx("div",{className:Ye.cardHeader,children:s.jsxs("div",{children:[s.jsx("p",{className:Ye.cardKicker,children:"Preview"}),s.jsx("h3",{className:Ye.cardTitle,children:"Uebersicht"}),s.jsx("p",{className:Ye.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),s.jsxs("div",{className:Ye.previewBlock,children:[s.jsx("div",{className:Ye.previewLabel,children:"Modus"}),s.jsx("div",{className:Ye.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),s.jsxs("div",{className:Ye.previewBlock,children:[s.jsx("div",{className:Ye.previewLabel,children:"Base Guild"}),s.jsx("div",{className:Ye.previewCard,children:(I=t.baseGuild)!=null&&I.name||(j=t.baseGuild)!=null&&j.server?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ye.previewTitle,children:((S=t.baseGuild)==null?void 0:S.name)||"Unbenannt"}),s.jsx("div",{className:Ye.previewMeta,children:((C=t.baseGuild)==null?void 0:C.server)||"Server n/a"})]}):s.jsx("div",{className:Ye.emptyState,children:"No base guild selected yet."})})]}),s.jsxs("div",{className:Ye.previewBlock,children:[s.jsx("div",{className:Ye.previewLabel,children:"Partner Guilds"}),s.jsx("div",{className:Ye.previewList,children:t.partnerGuilds.length===0?s.jsx("div",{className:Ye.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(M=>s.jsxs("div",{className:Ye.previewItem,children:[s.jsx("div",{className:Ye.previewTitle,children:M.name||"Unbenannt"}),s.jsx("div",{className:Ye.previewMeta,children:M.server||"Server n/a"})]},M.id))})]})]})})]}),_?w?null:s.jsxs("div",{className:Ye.setupInfo,role:"status","aria-live":"polite",children:[s.jsx("span",{className:Ye.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:Ye.setupInfoTitle,children:"Optional: add partner guilds."}),s.jsx("p",{className:Ye.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):s.jsxs("div",{className:`${Ye.setupInfo} ${Ye.setupWarning}`,role:"status","aria-live":"polite",children:[s.jsx("span",{className:Ye.setupInfoIcon,"aria-hidden":!0,children:"i"}),s.jsxs("div",{children:[s.jsx("div",{className:Ye.setupInfoTitle,children:"No base guild selected yet."}),s.jsx("p",{className:Ye.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function tI(t,e){const[n,r]=W.useState([]);return W.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function o(){const c=In("FusionSetup:guildSearch");try{const u=hm(ft,"latest"),h=await yn(c,{path:"guilds/latest (collectionGroup)"},()=>xn(Tn(u,Pi("nameFold"),Dl(i),Ml(i+""),sr(12)))),p=await yn(c,{path:"guilds/latest (collectionGroup)"},()=>xn(Tn(u,gi("nameNgrams","array-contains",i),sr(12)))),g=new Set,y=[],_=w=>{var I,j,S,C,M,T,D,F,V,z;const k=w.data(),P=(I=w.ref.parent)==null?void 0:I.parent;if(((j=P==null?void 0:P.parent)==null?void 0:j.id)!=="guilds")return;const N=(C=(S=P==null?void 0:P.id)!=null?S:k.guildIdentifier)!=null?C:w.id;if(!N||g.has(N))return;const v=(D=(T=k.server)!=null?T:(M=k.values)==null?void 0:M.Server)!=null?D:"Unknown";if(e!=="all"&&v!==e)return;const b=(z=(V=k.name)!=null?V:(F=k.values)==null?void 0:F.Name)!=null?z:"Unbekannte Gilde";g.add(N),y.push({id:N,name:b,server:v})};h.forEach(_),p.forEach(_),a||(y.sort((w,k)=>w.name.localeCompare(k.name)),r(y))}catch(u){console.error("[FusionPlanner] guild search failed",u),a||r([])}finally{Ys(c)}}return o(),()=>{a=!0}},[t,e]),n}const V0e="_membersContainer_1ctw8_1",U0e="_scenarioSwitcher_1ctw8_13",G0e="_scenarioButton_1ctw8_25",z0e="_scenarioButtonActive_1ctw8_63",H0e="_scenarioButtonName_1ctw8_75",W0e="_scenarioButtonDesc_1ctw8_83",K0e="_setupInfo_1ctw8_93",q0e="_setupInfoHeader_1ctw8_113",Q0e="_setupInfoTitle_1ctw8_127",Y0e="_setupInfoMode_1ctw8_139",X0e="_setupInfoRow_1ctw8_163",J0e="_setupInfoLabel_1ctw8_175",Z0e="_setupInfoValue_1ctw8_189",ebe="_setupInfoMeta_1ctw8_199",tbe="_setupInfoPartners_1ctw8_209",sbe="_setupInfoBadge_1ctw8_221",nbe="_setupInfoEmpty_1ctw8_245",rbe="_membersSummary_1ctw8_255",ibe="_membersSummaryItem_1ctw8_275",abe="_membersSummaryLabel_1ctw8_287",obe="_membersSummaryValue_1ctw8_301",lbe="_maxSlotsInput_1ctw8_313",cbe="_membersTable_1ctw8_331",dbe="_membersRow_1ctw8_349",ube="_membersHead_1ctw8_375",hbe="_membersCell_1ctw8_385",pbe="_memberName_1ctw8_395",mbe="_memberBadge_1ctw8_403",gbe="_assignmentCell_1ctw8_427",fbe="_assignmentBadge_1ctw8_439",vbe="_assignmentBadgeMain_1ctw8_463",xbe="_assignmentBadgePartner_1ctw8_475",ybe="_assignmentBadgeWatch_1ctw8_487",bbe="_assignmentBadgeIdle_1ctw8_499",_be="_assignmentActions_1ctw8_507",wbe="_assignmentButton_1ctw8_519",jbe="_assignmentButtonActive_1ctw8_551",Sbe="_decisionGroup_1ctw8_563",Nbe="_decisionButton_1ctw8_575",kbe="_decisionButtonActive_1ctw8_607",Cbe="_emptyWrap_1ctw8_619",Tbe="_emptyTitle_1ctw8_633",Ibe="_emptyText_1ctw8_641",Abe="_contextMenuBackdrop_1ctw8_651",Ebe="_contextMenu_1ctw8_651",Rbe="_contextMenuItem_1ctw8_693",Pbe="_partnerPickerCell_1ctw8_725",Lbe="_partnerLabel_1ctw8_737",Dbe="_partnerSelect_1ctw8_751",Ge={membersContainer:V0e,scenarioSwitcher:U0e,scenarioButton:G0e,scenarioButtonActive:z0e,scenarioButtonName:H0e,scenarioButtonDesc:W0e,setupInfo:K0e,setupInfoHeader:q0e,setupInfoTitle:Q0e,setupInfoMode:Y0e,setupInfoRow:X0e,setupInfoLabel:J0e,setupInfoValue:Z0e,setupInfoMeta:ebe,setupInfoPartners:tbe,setupInfoBadge:sbe,setupInfoEmpty:nbe,membersSummary:rbe,membersSummaryItem:ibe,membersSummaryLabel:abe,membersSummaryValue:obe,maxSlotsInput:lbe,membersTable:cbe,membersRow:dbe,membersHead:ube,membersCell:hbe,memberName:pbe,memberBadge:mbe,assignmentCell:gbe,assignmentBadge:fbe,assignmentBadgeMain:vbe,assignmentBadgePartner:xbe,assignmentBadgeWatch:ybe,assignmentBadgeIdle:bbe,assignmentActions:_be,assignmentButton:wbe,assignmentButtonActive:jbe,decisionGroup:Sbe,decisionButton:Nbe,decisionButtonActive:kbe,emptyWrap:Cbe,emptyTitle:Tbe,emptyText:Ibe,contextMenuBackdrop:Abe,contextMenu:Ebe,contextMenuItem:Rbe,partnerPickerCell:Pbe,partnerLabel:Lbe,partnerSelect:Dbe};function Mbe({members:t,scenario:e,onChangeScenarioDecision:n,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var j,S,C,M,T,D;const[o,c]=W.useState(null),u=W.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map((F,V)=>({id:F.id,label:F.name||`Partner ${V+1}`})):[{id:"partner-default",label:"Partner guild"}],p=W.useCallback((F,V)=>{c({memberId:F,...V})},[]),g=W.useCallback(()=>{c(null)},[]),y=W.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),_=W.useCallback((F,V,z)=>{y(),u.current=window.setTimeout(()=>{p(F,{x:V,y:z})},550)},[y,p]);W.useEffect(()=>()=>y(),[y]);const w=W.useCallback((F,V,z)=>{if(V==="main")n(F,"take"),r(F,"main");else if(V==="partner"){const q=z?`partner:${z}`:"partner";n(F,"take"),r(F,q)}else n(F,"bench"),r(F,"none");g()},[g,n,r]),k=W.useCallback((F,V)=>{n(F,V),V==="take"?r(F,"main"):r(F,"none")},[n,r]);if(!!!((S=(j=a.baseGuild)==null?void 0:j.name)!=null&&S.trim()&&((M=(C=a.baseGuild)==null?void 0:C.server)!=null&&M.trim())))return s.jsxs("div",{className:Ge.emptyWrap,children:[s.jsx("h3",{className:Ge.emptyTitle,children:"No base guild configured"}),s.jsx("p",{className:Ge.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return s.jsxs("div",{className:Ge.emptyWrap,children:[s.jsx("h3",{className:Ge.emptyTitle,children:"Members & Slots"}),s.jsx("p",{className:Ge.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return s.jsxs("div",{className:Ge.emptyWrap,children:[s.jsx("h3",{className:Ge.emptyTitle,children:"No members found"}),s.jsx("p",{className:Ge.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const P=(T=e.decisions)!=null?T:{},L=(D=e.targetGuildAssignments)!=null?D:{},N=t.filter(F=>P[F.id]==="take").length,v=t.filter(F=>P[F.id]==="bench").length,b=t.filter(F=>P[F.id]==="drop").length,I=Math.max(0,e.maxSlots-e.reservedSlots-N);return s.jsxs("div",{className:Ge.membersContainer,children:[s.jsx("div",{className:Ge.scenarioSwitcher,children:s.jsxs("div",{className:`${Ge.scenarioButton} ${Ge.scenarioButtonActive}`,children:[s.jsx("span",{className:Ge.scenarioButtonName,children:e.name}),e.description?s.jsx("span",{className:Ge.scenarioButtonDesc,children:e.description}):null]})}),s.jsxs("div",{className:Ge.setupInfo,children:[s.jsxs("div",{className:Ge.setupInfoHeader,children:[s.jsx("div",{className:Ge.setupInfoTitle,children:"Planning for"}),s.jsx("span",{className:Ge.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?s.jsxs("div",{className:Ge.setupInfoRow,children:[s.jsx("span",{className:Ge.setupInfoLabel,children:"Base Guild"}),s.jsxs("span",{className:Ge.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:Ge.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):s.jsx("div",{className:Ge.setupInfoEmpty,children:"No base guild selected in Setup tab."}),s.jsxs("div",{className:Ge.setupInfoRow,children:[s.jsx("span",{className:Ge.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?s.jsx("div",{className:Ge.setupInfoPartners,children:a.partnerGuilds.map(F=>s.jsxs("span",{className:Ge.setupInfoBadge,children:[F.name||"Unbenannt",s.jsxs("span",{className:Ge.setupInfoMeta,children:[" (",F.server||"Server n/a",")"]})]},F.id))}):s.jsx("span",{className:Ge.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),s.jsxs("div",{className:Ge.membersSummary,children:[s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Selected"}),s.jsxs("div",{className:Ge.membersSummaryValue,children:[N," / ",e.maxSlots]})]}),s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Free slots"}),s.jsx("div",{className:Ge.membersSummaryValue,children:I})]}),s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Bench"}),s.jsx("div",{className:Ge.membersSummaryValue,children:v})]}),s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Drop"}),s.jsx("div",{className:Ge.membersSummaryValue,children:b})]}),s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Reserved"}),s.jsx("div",{className:Ge.membersSummaryValue,children:e.reservedSlots})]}),s.jsxs("div",{className:Ge.membersSummaryItem,children:[s.jsx("div",{className:Ge.membersSummaryLabel,children:"Max slots"}),s.jsx("input",{type:"number",className:Ge.maxSlotsInput,value:e.maxSlots,min:0,onChange:F=>i(Number(F.target.value))})]})]}),s.jsxs("div",{className:Ge.membersTable,children:[s.jsxs("div",{className:`${Ge.membersRow} ${Ge.membersHead}`,children:[s.jsx("div",{className:Ge.membersCell,children:"Name"}),s.jsx("div",{className:Ge.membersCell,children:"Level"}),s.jsx("div",{className:Ge.membersCell,children:"Guild"}),s.jsx("div",{className:Ge.membersCell,children:"Class"}),s.jsx("div",{className:Ge.membersCell,children:"Plan"}),s.jsx("div",{className:Ge.membersCell,children:"Decision"}),s.jsx("div",{className:Ge.membersCell,children:"Partner"})]}),t.map(F=>{var Y,G,X,te,se,Z,ve,Se,J;const V=(Y=P[F.id])!=null?Y:"undecided",z=(G=L[F.id])!=null?G:"none",q=z&&z.toString().startsWith("partner:")?z.split(":")[1]:null,H=(Z=(X=h.find(ue=>ue.id===q))==null?void 0:X.label)!=null?Z:z==="partner"?(se=(te=h[0])==null?void 0:te.label)!=null?se:"Partner guild":null,K=V==="take"&&z==="main"?"main":V==="take"&&(z==="partner"||q)?"partner":V==="bench"?"watch":"unassigned",ne=K==="main"?"Main guild":K==="partner"?H||"Partner guild":K==="watch"?"Watchlist":"Not planned";return s.jsxs("div",{className:Ge.membersRow,onContextMenu:ue=>{ue.preventDefault(),p(F.id,{x:ue.clientX,y:ue.clientY})},onTouchStart:ue=>{const ie=ue.touches[0];ie&&_(F.id,ie.clientX,ie.clientY)},onTouchEnd:y,onTouchCancel:y,children:[s.jsx("div",{className:Ge.membersCell,children:s.jsx("div",{className:Ge.memberName,children:F.name})}),s.jsx("div",{className:Ge.membersCell,children:s.jsxs("span",{className:Ge.memberBadge,children:["Lvl ",F.level]})}),s.jsx("div",{className:Ge.membersCell,children:F.guildName}),s.jsx("div",{className:Ge.membersCell,children:(Se=(ve=F.className)!=null?ve:F.class)!=null?Se:"?"}),s.jsxs("div",{className:`${Ge.membersCell} ${Ge.assignmentCell}`,children:[s.jsx("span",{className:`${Ge.assignmentBadge} ${K==="main"?Ge.assignmentBadgeMain:K==="partner"?Ge.assignmentBadgePartner:K==="watch"?Ge.assignmentBadgeWatch:Ge.assignmentBadgeIdle}`,children:ne}),s.jsxs("div",{className:Ge.assignmentActions,role:"group","aria-label":"Target guild selection",children:[s.jsx("button",{type:"button",className:`${Ge.assignmentButton} ${K==="main"?Ge.assignmentButtonActive:""}`,onClick:()=>w(F.id,"main"),children:"Main"}),s.jsx("button",{type:"button",className:`${Ge.assignmentButton} ${K==="watch"?Ge.assignmentButtonActive:""}`,onClick:()=>w(F.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",className:`${Ge.assignmentButton} ${K==="partner"?Ge.assignmentButtonActive:""}`,onClick:()=>w(F.id,"partner"),children:"Partner"})]})]}),s.jsx("div",{className:Ge.membersCell,children:s.jsx("div",{className:Ge.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(ue=>s.jsx("button",{type:"button",className:`${Ge.decisionButton} ${V===ue?Ge.decisionButtonActive:""}`,onClick:()=>k(F.id,ue),children:ue==="take"?"Take":ue==="bench"?"Bench":ue==="drop"?"Drop":"?"},ue))})}),s.jsxs("div",{className:`${Ge.membersCell} ${Ge.partnerPickerCell}`,children:[s.jsx("label",{className:Ge.partnerLabel,htmlFor:`partner-select-${F.id}`,children:"Partner"}),s.jsx("select",{id:`partner-select-${F.id}`,className:Ge.partnerSelect,value:q!=null?q:(J=h[0])==null?void 0:J.id,onChange:ue=>w(F.id,"partner",ue.target.value),children:h.map(ue=>s.jsx("option",{value:ue.id,children:ue.label},ue.id))})]})]},F.id)})]}),o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Ge.contextMenuBackdrop,onClick:g}),s.jsxs("div",{className:Ge.contextMenu,style:{top:o.y,left:o.x},children:[s.jsx("button",{type:"button",className:Ge.contextMenuItem,onClick:()=>w(o.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:Ge.contextMenuItem,onClick:()=>w(o.memberId,"watch"),children:"Move to Watchlist"}),h.map(F=>s.jsxs("button",{type:"button",className:Ge.contextMenuItem,onClick:()=>w(o.memberId,"partner",F.id),children:["Move to ",F.label]},F.id))]})]}):null]})}const Fbe="_overview_6ytw3_1",Bbe="_contextBox_6ytw3_15",$be="_contextKicker_6ytw3_35",Obe="_contextTitle_6ytw3_51",Vbe="_contextText_6ytw3_61",Ube="_contextDetails_6ytw3_71",Gbe="_detailItem_6ytw3_85",zbe="_detailLabel_6ytw3_99",Hbe="_detailValue_6ytw3_113",Wbe="_kpiGrid_6ytw3_121",Kbe="_kpiCard_6ytw3_133",qbe="_kpiLabel_6ytw3_153",Qbe="_kpiValue_6ytw3_167",Ybe="_columnsWrapper_6ytw3_177",Xbe="_column_6ytw3_177",Jbe="_columnDropTarget_6ytw3_213",Zbe="_columnHeader_6ytw3_223",e1e="_columnKicker_6ytw3_235",t1e="_columnTitle_6ytw3_251",s1e="_columnCount_6ytw3_259",n1e="_columnBody_6ytw3_281",r1e="_memberCard_6ytw3_293",i1e="_memberTop_6ytw3_337",a1e="_memberName_6ytw3_349",o1e="_memberMeta_6ytw3_357",l1e="_memberBadge_6ytw3_369",c1e="_memberBottom_6ytw3_395",d1e="_memberGuild_6ytw3_409",u1e="_memberServer_6ytw3_419",h1e="_memberActions_6ytw3_427",p1e="_emptyList_6ytw3_469",m1e="_emptyWrap_6ytw3_487",g1e="_emptyTitle_6ytw3_501",f1e="_emptyText_6ytw3_509",v1e="_addPartnerCard_6ytw3_519",x1e="_contextMenuBackdrop_6ytw3_559",y1e="_contextMenu_6ytw3_559",b1e="_contextMenuItem_6ytw3_601",pt={overview:Fbe,contextBox:Bbe,contextKicker:$be,contextTitle:Obe,contextText:Vbe,contextDetails:Ube,detailItem:Gbe,detailLabel:zbe,detailValue:Hbe,kpiGrid:Wbe,kpiCard:Kbe,kpiLabel:qbe,kpiValue:Qbe,columnsWrapper:Ybe,column:Xbe,columnDropTarget:Jbe,columnHeader:Zbe,columnKicker:e1e,columnTitle:t1e,columnCount:s1e,columnBody:n1e,memberCard:r1e,memberTop:i1e,memberName:a1e,memberMeta:o1e,memberBadge:l1e,memberBottom:c1e,memberGuild:d1e,memberServer:u1e,memberActions:h1e,emptyList:p1e,emptyWrap:m1e,emptyTitle:g1e,emptyText:f1e,addPartnerCard:v1e,contextMenuBackdrop:x1e,contextMenu:y1e,contextMenuItem:b1e};function _1e({members:t,scenario:e,setupState:n,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var z,q,H;const o=(z=e==null?void 0:e.decisions)!=null?z:{},c=(q=e==null?void 0:e.targetGuildAssignments)!=null?q:{},u=n.partnerGuilds.length>0?n.partnerGuilds.map((K,ne)=>({id:K.id,label:K.name||`Partner ${ne+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(K=>o[K.id]==="take"&&c[K.id]==="main"),p=t.filter(K=>o[K.id]==="bench"),g=u.reduce((K,ne)=>(K[ne.id]=t.filter(Y=>{const G=c[Y.id];return o[Y.id]==="take"&&(G===`partner:${ne.id}`||G==="partner")}),K),{}),y=t.filter(K=>!h.includes(K)&&!p.includes(K)&&!Object.values(g).some(ne=>ne.includes(K))),[_,w]=W.useState(null),[k,E]=W.useState(null),P=W.useRef(null),L=t.length,N=h.length,v=p.length,b=Object.values(g).reduce((K,ne)=>K+ne.length,0),I=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-N-b):0,j=W.useCallback((K,ne,Y)=>{K&&(ne==="main"?(r(K,"take"),i(K,"main")):ne==="partner"?(r(K,"take"),i(K,Y?`partner:${Y}`:"partner")):ne==="unassigned"?(r(K,"undecided"),i(K,"none")):(r(K,"bench"),i(K,"none")),E(null))},[r,i]),S=W.useCallback((K,ne)=>Y=>{Y.preventDefault();const G=Y.dataTransfer.getData("text/plain");G&&j(G,K,ne),w(null)},[j]),C=W.useCallback(K=>ne=>{ne.preventDefault(),w(K)},[]),M=W.useCallback(()=>w(null),[]),T=W.useCallback((K,ne)=>{E({memberId:K,...ne})},[]),D=W.useCallback(()=>{P.current!==null&&(window.clearTimeout(P.current),P.current=null)},[]),F=W.useCallback((K,ne,Y)=>{D(),P.current=window.setTimeout(()=>{T(K,{x:ne,y:Y})},550)},[D,T]);if(W.useEffect(()=>()=>D(),[D]),!e)return s.jsxs("div",{className:pt.emptyWrap,children:[s.jsx("h3",{className:pt.emptyTitle,children:"Overview"}),s.jsx("p",{className:pt.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return s.jsxs("div",{className:pt.emptyWrap,children:[s.jsx("h3",{className:pt.emptyTitle,children:"No members loaded"}),s.jsx("p",{className:pt.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const V=(K,ne,Y,G,X)=>s.jsxs("div",{className:`${pt.column} ${_===K?pt.columnDropTarget:""}`,onDragOver:C(K),onDragEnter:C(K),onDragLeave:M,onDrop:S(K,X),children:[s.jsxs("div",{className:pt.columnHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pt.columnKicker,children:Y}),s.jsx("h4",{className:pt.columnTitle,children:ne})]}),s.jsx("span",{className:pt.columnCount,children:G.length})]}),s.jsx("div",{className:pt.columnBody,children:G.length?G.map(te=>{var se,Z,ve,Se;return s.jsxs("div",{className:pt.memberCard,draggable:!0,onDragStart:J=>J.dataTransfer.setData("text/plain",te.id),onContextMenu:J=>{J.preventDefault(),T(te.id,{x:J.clientX,y:J.clientY})},onTouchStart:J=>{const ue=J.touches[0];ue&&F(te.id,ue.clientX,ue.clientY)},onTouchEnd:D,onTouchCancel:D,children:[s.jsxs("div",{className:pt.memberTop,children:[s.jsxs("div",{children:[s.jsx("div",{className:pt.memberName,children:te.name}),s.jsxs("p",{className:pt.memberMeta,children:[(Z=(se=te.className)!=null?se:te.class)!=null?Z:"Unknown","  ",(ve=te.role)!=null?ve:"Unknown"]})]}),s.jsxs("span",{className:pt.memberBadge,children:["Lvl ",(Se=te.level)!=null?Se:"?"]})]}),s.jsxs("div",{className:pt.memberBottom,children:[s.jsxs("span",{className:pt.memberGuild,children:[te.guildName," ",s.jsxs("span",{className:pt.memberServer,children:["(",te.server||"Server n/a",")"]})]}),s.jsxs("div",{className:pt.memberActions,children:[s.jsx("button",{type:"button",onClick:()=>j(te.id,"main"),children:"Main"}),s.jsx("button",{type:"button",onClick:()=>j(te.id,"watch"),children:"Watch"}),s.jsx("button",{type:"button",onClick:()=>j(te.id,"partner"),children:"Partner"})]})]})]},te.id)}):s.jsx("div",{className:pt.emptyList,children:"No players in this list yet."})})]});return s.jsxs("div",{className:pt.overview,children:[s.jsxs("div",{className:pt.contextBox,children:[s.jsxs("div",{children:[s.jsx("p",{className:pt.contextKicker,children:"Setup"}),s.jsx("h3",{className:pt.contextTitle,children:"Fusion Overview"}),s.jsx("p",{className:pt.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),s.jsxs("div",{className:pt.contextDetails,children:[s.jsxs("div",{className:pt.detailItem,children:[s.jsx("span",{className:pt.detailLabel,children:"Base Guild"}),s.jsx("strong",{className:pt.detailValue,children:((H=n.baseGuild)==null?void 0:H.name)||"Unbenannt"})]}),s.jsxs("div",{className:pt.detailItem,children:[s.jsx("span",{className:pt.detailLabel,children:"Partner Guilds"}),s.jsx("strong",{className:pt.detailValue,children:n.partnerGuilds.length})]}),s.jsxs("div",{className:pt.detailItem,children:[s.jsx("span",{className:pt.detailLabel,children:"Max Slots"}),s.jsx("strong",{className:pt.detailValue,children:e.maxSlots})]})]})]}),s.jsxs("div",{className:pt.kpiGrid,children:[s.jsxs("div",{className:pt.kpiCard,children:[s.jsx("span",{className:pt.kpiLabel,children:"Total players"}),s.jsx("strong",{className:pt.kpiValue,children:L})]}),s.jsxs("div",{className:pt.kpiCard,children:[s.jsx("span",{className:pt.kpiLabel,children:"Main guild"}),s.jsx("strong",{className:pt.kpiValue,children:N})]}),s.jsxs("div",{className:pt.kpiCard,children:[s.jsx("span",{className:pt.kpiLabel,children:"Watchlist"}),s.jsx("strong",{className:pt.kpiValue,children:v})]}),s.jsxs("div",{className:pt.kpiCard,children:[s.jsx("span",{className:pt.kpiLabel,children:"Partner guild"}),s.jsx("strong",{className:pt.kpiValue,children:b})]}),s.jsxs("div",{className:pt.kpiCard,children:[s.jsx("span",{className:pt.kpiLabel,children:"Free slots"}),s.jsx("strong",{className:pt.kpiValue,children:I})]})]}),s.jsxs("div",{className:pt.columnsWrapper,children:[V("unassigned","Unassigned","Noch ohne Planung",y),V("main","Main guild","Take & Assign main",h),V("watch","Watchlist","Bench for review",p),u.map(K=>{var ne;return V("partner",K.label,"Take & Assign partner",(ne=g[K.id])!=null?ne:[],K.id)}),s.jsx("button",{type:"button",className:pt.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:pt.contextMenuBackdrop,onClick:()=>E(null)}),s.jsxs("div",{className:pt.contextMenu,style:{top:k.y,left:k.x},children:[s.jsx("button",{type:"button",className:pt.contextMenuItem,onClick:()=>j(k.memberId,"main"),children:"Move to Main guild"}),s.jsx("button",{type:"button",className:pt.contextMenuItem,onClick:()=>j(k.memberId,"watch"),children:"Move to Watchlist"}),u.map(K=>s.jsxs("button",{type:"button",className:pt.contextMenuItem,onClick:()=>j(k.memberId,"partner",K.id),children:["Move to ",K.label]},K.id))]})]}):null]})}const w1e="_scenariosTab_3v4iw_1",j1e="_scenariosHeader_3v4iw_13",S1e="_scenariosTitle_3v4iw_35",N1e="_scenariosText_3v4iw_45",k1e="_scenarioInfo_3v4iw_57",C1e="_headerActions_3v4iw_71",T1e="_createButton_3v4iw_81",I1e="_scenarioList_3v4iw_115",A1e="_scenarioCard_3v4iw_127",E1e="_scenarioCardActive_3v4iw_147",R1e="_scenarioCardTop_3v4iw_157",P1e="_cardKicker_3v4iw_169",L1e="_cardTitle_3v4iw_185",D1e="_cardText_3v4iw_197",M1e="_scenarioActiveBadge_3v4iw_209",F1e="_scenarioMeta_3v4iw_231",B1e="_scenarioMetaLabel_3v4iw_243",$1e="_scenarioMetaValue_3v4iw_259",O1e="_scenarioStats_3v4iw_269",V1e="_scenarioStatItem_3v4iw_281",U1e="_scenarioStatLabel_3v4iw_295",G1e="_scenarioStatValue_3v4iw_311",z1e="_scenarioActions_3v4iw_321",H1e="_scenarioActionButton_3v4iw_337",W1e="_scenarioActionActive_3v4iw_367",K1e="_scenarioActionGroup_3v4iw_377",q1e="_secondaryActionButton_3v4iw_389",Q1e="_deleteActionButton_3v4iw_391",Y1e="_deleteActionDisabled_3v4iw_443",Xt={scenariosTab:w1e,scenariosHeader:j1e,scenariosTitle:S1e,scenariosText:N1e,scenarioInfo:k1e,headerActions:C1e,createButton:T1e,scenarioList:I1e,scenarioCard:A1e,scenarioCardActive:E1e,scenarioCardTop:R1e,cardKicker:P1e,cardTitle:L1e,cardText:D1e,scenarioActiveBadge:M1e,scenarioMeta:F1e,scenarioMetaLabel:B1e,scenarioMetaValue:$1e,scenarioStats:O1e,scenarioStatItem:V1e,scenarioStatLabel:U1e,scenarioStatValue:G1e,scenarioActions:z1e,scenarioActionButton:H1e,scenarioActionActive:W1e,scenarioActionGroup:K1e,secondaryActionButton:q1e,deleteActionButton:Q1e,deleteActionDisabled:Y1e};function X1e({scenarios:t,activeScenarioId:e,onSetActiveScenario:n,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:o}){const c=W.useCallback(p=>{const g=Object.values(p.decisions),y=g.filter(E=>E==="take").length,_=g.filter(E=>E==="bench").length,w=g.filter(E=>E==="drop").length,k=Math.max(0,p.maxSlots-p.reservedSlots-y);return{selected:y,bench:_,drop:w,free:k}},[]),u=p=>{const g=window.prompt("Neuer Szenario-Name",p.name);g!==null&&a(p.id,g)},h=p=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&o(p.id)};return s.jsxs("div",{className:Xt.scenariosTab,children:[s.jsxs("div",{className:Xt.scenariosHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Xt.cardKicker,children:"Scenarios"}),s.jsx("h3",{className:Xt.scenariosTitle,children:"Fusion Plans verwalten"}),s.jsx("p",{className:Xt.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),s.jsx("div",{className:Xt.headerActions,children:s.jsx("button",{type:"button",className:Xt.createButton,onClick:r,children:"Neues Szenario"})})]}),s.jsx("p",{className:Xt.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),s.jsx("div",{className:Xt.scenarioList,children:t.map(p=>{const g=c(p),y=p.id===e,_=t.length<=1;return s.jsxs("article",{className:`${Xt.scenarioCard} ${y?Xt.scenarioCardActive:""}`,children:[s.jsxs("div",{className:Xt.scenarioCardTop,children:[s.jsxs("div",{children:[s.jsx("p",{className:Xt.cardKicker,children:"Scenario"}),s.jsx("h3",{className:Xt.cardTitle,children:p.name}),p.description?s.jsx("p",{className:Xt.cardText,children:p.description}):null]}),y?s.jsx("span",{className:Xt.scenarioActiveBadge,children:"Active"}):null]}),s.jsxs("div",{className:Xt.scenarioMeta,children:[s.jsxs("div",{children:[s.jsx("span",{className:Xt.scenarioMetaLabel,children:"Max slots"}),s.jsx("span",{className:Xt.scenarioMetaValue,children:p.maxSlots})]}),s.jsxs("div",{children:[s.jsx("span",{className:Xt.scenarioMetaLabel,children:"Reserved"}),s.jsx("span",{className:Xt.scenarioMetaValue,children:p.reservedSlots})]})]}),s.jsxs("div",{className:Xt.scenarioStats,children:[s.jsxs("div",{className:Xt.scenarioStatItem,children:[s.jsx("span",{className:Xt.scenarioStatLabel,children:"Selected"}),s.jsx("strong",{className:Xt.scenarioStatValue,children:g.selected})]}),s.jsxs("div",{className:Xt.scenarioStatItem,children:[s.jsx("span",{className:Xt.scenarioStatLabel,children:"Free"}),s.jsx("strong",{className:Xt.scenarioStatValue,children:g.free})]}),s.jsxs("div",{className:Xt.scenarioStatItem,children:[s.jsx("span",{className:Xt.scenarioStatLabel,children:"Bench"}),s.jsx("strong",{className:Xt.scenarioStatValue,children:g.bench})]}),s.jsxs("div",{className:Xt.scenarioStatItem,children:[s.jsx("span",{className:Xt.scenarioStatLabel,children:"Drop"}),s.jsx("strong",{className:Xt.scenarioStatValue,children:g.drop})]})]}),s.jsxs("div",{className:Xt.scenarioActions,children:[s.jsx("button",{type:"button",className:`${Xt.scenarioActionButton} ${y?Xt.scenarioActionActive:""}`,onClick:()=>n(p.id),children:"Set active"}),s.jsxs("div",{className:Xt.scenarioActionGroup,children:[s.jsx("button",{type:"button",className:Xt.secondaryActionButton,onClick:()=>i(p.id),children:"Duplicate"}),s.jsx("button",{type:"button",className:Xt.secondaryActionButton,onClick:()=>u(p),children:"Rename"}),s.jsx("button",{type:"button",className:`${Xt.deleteActionButton} ${_?Xt.deleteActionDisabled:""}`,onClick:()=>h(p),disabled:_,children:"Delete"})]})]})]},p.id)})})]})}const J1e="_resultWrap_179wi_1",Z1e="_emptyState_179wi_13",e_e="_emptyTitle_179wi_35",t_e="_emptyText_179wi_43",s_e="_resultHeader_179wi_55",n_e="_resultKicker_179wi_79",r_e="_resultTitle_179wi_95",i_e="_resultText_179wi_107",a_e="_emptyNote_179wi_119",o_e="_setupSummary_179wi_131",l_e="_setupSummaryTitle_179wi_149",c_e="_setupSummaryRow_179wi_159",d_e="_setupSummaryLabel_179wi_171",u_e="_setupSummaryValue_179wi_185",h_e="_setupSummaryMeta_179wi_195",p_e="_setupSummaryTags_179wi_205",m_e="_setupSummaryTag_179wi_205",g_e="_classDistribution_179wi_241",f_e="_resultStats_179wi_253",v_e="_resultStatBadge_179wi_267",x_e="_resultStatBadgeMuted_179wi_269",y_e="_group_179wi_307",b_e="_groupHeader_179wi_327",__e="_groupTitle_179wi_341",w_e="_groupHint_179wi_351",j_e="_groupBadge_179wi_361",S_e="_badgeSuccess_179wi_387",N_e="_badgeMuted_179wi_399",k_e="_badgeDanger_179wi_409",C_e="_groupEmpty_179wi_421",T_e="_groupTable_179wi_437",I_e="_groupRow_179wi_455",A_e="_groupHead_179wi_327",E_e="_groupCell_179wi_491",R_e="_memberName_179wi_501",P_e="_memberBadge_179wi_509",vt={resultWrap:J1e,emptyState:Z1e,emptyTitle:e_e,emptyText:t_e,resultHeader:s_e,resultKicker:n_e,resultTitle:r_e,resultText:i_e,emptyNote:a_e,setupSummary:o_e,setupSummaryTitle:l_e,setupSummaryRow:c_e,setupSummaryLabel:d_e,setupSummaryValue:u_e,setupSummaryMeta:h_e,setupSummaryTags:p_e,setupSummaryTag:m_e,classDistribution:g_e,resultStats:f_e,resultStatBadge:v_e,resultStatBadgeMuted:x_e,group:y_e,groupHeader:b_e,groupTitle:__e,groupHint:w_e,groupBadge:j_e,badgeSuccess:S_e,badgeMuted:N_e,badgeDanger:k_e,groupEmpty:C_e,groupTable:T_e,groupRow:I_e,groupHead:A_e,groupCell:E_e,memberName:R_e,memberBadge:P_e};function L_e({members:t,scenario:e,setupState:n}){var w;if(!e)return s.jsxs("div",{className:vt.emptyState,children:[s.jsx("h3",{className:vt.emptyTitle,children:"No scenario selected"}),s.jsx("p",{className:vt.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return s.jsxs("div",{className:vt.emptyState,children:[s.jsx("h3",{className:vt.emptyTitle,children:"No members available"}),s.jsx("p",{className:vt.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:o}=W.useMemo(()=>{const k=[],E=[],P=[],L=[];return t.forEach(N=>{var b;const v=(b=e.decisions[N.id])!=null?b:"undecided";v==="take"?k.push(N):v==="bench"?E.push(N):v==="drop"?P.push(N):L.push(N)}),{takeMembers:k,benchMembers:E,dropMembers:P,undecidedMembers:L}},[t,e.decisions]),c=r.length,u=i.length,h=a.length,p=Math.max(0,e.maxSlots-c),g=e.maxSlots?Math.round(c/e.maxSlots*100):0,y=W.useMemo(()=>{const k=r.reduce((P,L)=>{var v,b;const N=(v=L.className)!=null?v:L.class;return N&&(P[N]=((b=P[N])!=null?b:0)+1),P},{});return Object.entries(k).map(([P,L])=>`${P}: ${L}`).join(" | ")},[r]),_=(k,E,P,L)=>s.jsxs("div",{className:vt.group,children:[s.jsxs("div",{className:vt.groupHeader,children:[s.jsxs("div",{children:[s.jsx("h4",{className:vt.groupTitle,children:k}),s.jsx("span",{className:vt.groupHint,children:E})]}),s.jsx("span",{className:`${vt.groupBadge} ${L}`,children:P.length})]}),P.length===0?s.jsx("div",{className:vt.groupEmpty,children:"No players in this group."}):s.jsxs("div",{className:vt.groupTable,role:"table",children:[s.jsxs("div",{className:`${vt.groupRow} ${vt.groupHead}`,role:"row",children:[s.jsx("div",{className:vt.groupCell,role:"columnheader",children:"Name"}),s.jsx("div",{className:vt.groupCell,role:"columnheader",children:"Level"}),s.jsx("div",{className:vt.groupCell,role:"columnheader",children:"Guild"}),s.jsx("div",{className:vt.groupCell,role:"columnheader",children:"Class"})]}),P.map(N=>{var v,b;return s.jsxs("div",{className:vt.groupRow,role:"row",children:[s.jsx("div",{className:vt.groupCell,role:"cell",children:s.jsx("span",{className:vt.memberName,children:N.name})}),s.jsx("div",{className:vt.groupCell,role:"cell",children:s.jsxs("span",{className:vt.memberBadge,children:["Lvl ",N.level]})}),s.jsx("div",{className:vt.groupCell,role:"cell",children:N.guildName}),s.jsx("div",{className:vt.groupCell,role:"cell",children:(b=(v=N.className)!=null?v:N.class)!=null?b:"-"})]},N.id)})]})]});return s.jsxs("div",{className:vt.resultWrap,children:[s.jsxs("div",{className:vt.resultHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:vt.resultKicker,children:"Final Plan"}),s.jsx("h3",{className:vt.resultTitle,children:e.name}),s.jsx("p",{className:vt.resultText,children:(w=e.description)!=null?w:"Zusammenfassung des aktuellen Plans."}),r.length===0?s.jsx("p",{className:vt.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,y?s.jsxs("p",{className:vt.classDistribution,children:["Class distribution: ",y]}):null,s.jsxs("div",{className:vt.setupSummary,children:[s.jsx("div",{className:vt.setupSummaryTitle,children:"Fusion plan between"}),n.baseGuild?s.jsxs("div",{className:vt.setupSummaryRow,children:[s.jsx("span",{className:vt.setupSummaryLabel,children:"Base"}),s.jsxs("span",{className:vt.setupSummaryValue,children:[n.baseGuild.name||"Unbenannt"," ",s.jsxs("span",{className:vt.setupSummaryMeta,children:["(",n.baseGuild.server||"Server n/a",")"]})]})]}):s.jsxs("div",{className:vt.setupSummaryRow,children:[s.jsx("span",{className:vt.setupSummaryLabel,children:"Base"}),s.jsx("span",{className:vt.setupSummaryMeta,children:"No base guild selected."})]}),s.jsxs("div",{className:vt.setupSummaryRow,children:[s.jsx("span",{className:vt.setupSummaryLabel,children:"Partners"}),n.partnerGuilds.length?s.jsx("div",{className:vt.setupSummaryTags,children:n.partnerGuilds.map(k=>s.jsxs("span",{className:vt.setupSummaryTag,children:[k.name||"Unbenannt"," ",s.jsxs("span",{className:vt.setupSummaryMeta,children:["(",k.server||"Server n/a",")"]})]},k.id))}):s.jsx("span",{className:vt.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),s.jsxs("div",{className:vt.resultStats,children:[s.jsxs("span",{className:vt.resultStatBadge,children:["Members selected: ",c," / ",e.maxSlots]}),s.jsxs("span",{className:vt.resultStatBadge,children:["Bench: ",u]}),s.jsxs("span",{className:vt.resultStatBadge,children:["Drop: ",h]}),s.jsxs("span",{className:vt.resultStatBadge,children:["Free slots: ",p]}),s.jsxs("span",{className:vt.resultStatBadge,children:["Utilization: ",g,"%"]}),o.length>0?s.jsxs("span",{className:vt.resultStatBadgeMuted,children:["Undecided: ",o.length]}):null]})]}),_("Final roster (selected)","Take",r,vt.badgeSuccess),_("Bench (waiting list)","Bench",i,vt.badgeMuted),_("Not included","Drop",a,vt.badgeDanger)]})}const mf=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],sI=t=>t.reduce((e,n)=>(e[n.id]="undecided",e),{}),nI=t=>t.reduce((e,n)=>(e[n.id]="none",e),{}),D_e=(t,e,n)=>{var r,i,a,o,c,u,h,p,g,y,_,w,k,E,P,L;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(o=t.role)!=null?o:"Unknown",level:(c=t.level)!=null?c:void 0,guildName:e,server:n,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(p=t.conBase)!=null?p:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(y=t.totalStats)!=null?y:void 0,values:{treasury:(_=t.treasury)!=null?_:void 0,mine:(w=t.mine)!=null?w:void 0,attrTotal:(k=t.attrTotal)!=null?k:void 0,conTotal:(E=t.conTotal)!=null?E:void 0,lastScan:(P=t.lastScan)!=null?P:void 0,lastActivity:(L=t.lastActivity)!=null?L:void 0}}},M_e=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const n=(i=t.name)==null?void 0:i.trim();return n||null},rI=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,iI=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],F_e=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function B_e(){var F;const[t,e]=W.useState("setup"),[n,r]=W.useState(mf),[i,a]=W.useState(!1),[o,c]=W.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=W.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:sI(mf),targetGuildAssignments:nI(mf),isDefault:!0}]),[p,g]=W.useState("plan-a"),y=W.useMemo(()=>{var V,z;return(z=(V=u.find(q=>q.id===p))!=null?V:u[0])!=null?z:null},[p,u]),_=W.useMemo(()=>{var H,K;const V=o.baseGuild,z=(H=V==null?void 0:V.name)==null?void 0:H.trim(),q=(K=V==null?void 0:V.server)==null?void 0:K.trim();return!!(z&&q)},[o.baseGuild]),w=W.useMemo(()=>n.length>0,[n.length]),k=W.useMemo(()=>u.length>0,[u.length]),E=W.useMemo(()=>{const V=[];return _||V.push("Setup incomplete - no base guild selected."),_&&!w&&V.push("No members loaded yet. Check scans or setup."),k||V.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),V},[_,w,k]),P=(V,z)=>{h(q=>q.map(H=>H.id===p?{...H,decisions:{...H.decisions,[V]:z}}:H))},L=(V,z)=>{h(q=>q.map(H=>{var K;return H.id===p?{...H,targetGuildAssignments:{...(K=H.targetGuildAssignments)!=null?K:{},[V]:z}}:H}))},N=V=>{const z=Number(V)||0;h(q=>q.map(H=>H.id===p?{...H,maxSlots:Math.max(0,z)}:H))},v=()=>{h(V=>{const z={id:rI(),name:`Plan ${V.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:sI(n),targetGuildAssignments:nI(n)};return g(z.id),[...V,z]})},b=V=>{h(z=>{var K;const q=z.find(ne=>ne.id===V);if(!q)return z;const H={...q,id:rI(),name:`${q.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...q.decisions},targetGuildAssignments:{...(K=q.targetGuildAssignments)!=null?K:{}}};return g(H.id),[...z,H]})},I=(V,z)=>{const q=z.trim();q&&h(H=>H.map(K=>K.id===V?{...K,name:q}:K))},j=V=>{h(z=>{if(z.length<=1)return z;const q=z.filter(H=>H.id!==V);return q.length?(p===V&&g(q[0].id),q):z})};W.useEffect(()=>{if(o.mode!=="scan"){a(!1),r(mf);return}const V=[o.baseGuild,...o.partnerGuilds].filter(Boolean);if(V.length===0){a(!1),r([]);return}let z=!1;async function q(){var K,ne,Y,G,X,te,se,Z,ve,Se;const H=In("FusionPlanner:loadMembers");a(!0);try{const J=[];for(const ue of V){const ie=M_e(ue);if(!ie)continue;const me=ss(ft,`guilds/${ie}/latest/latest`),ce=await bn(H,me,()=>sn(me)),he=ce.exists()?ce.data():null,Ne=(X=(G=(ne=(K=ue.name)==null?void 0:K.trim())!=null?ne:he==null?void 0:he.name)!=null?G:(Y=he==null?void 0:he.values)==null?void 0:Y.Name)!=null?X:ie,Te=(Se=(ve=(se=(te=ue.server)==null?void 0:te.trim())!=null?se:he==null?void 0:he.server)!=null?ve:(Z=he==null?void 0:he.values)==null?void 0:Z.Server)!=null?Se:null,xe=ss(ft,`guilds/${ie}/snapshots/members_summary`),Ie=await bn(H,xe,()=>sn(xe));if(!Ie.exists())continue;const $e=Ie.data();(Array.isArray($e.members)?$e.members:[]).forEach(be=>{J.push(D_e(be,Ne,Te))})}z||r(J)}catch(J){console.error("[FusionPlanner] Failed to load members",J),z||r([])}finally{z||a(!1),Ys(H)}}return r([]),q(),()=>{z=!0}},[o.baseGuild,o.partnerGuilds,o.mode]),W.useEffect(()=>{i||h(V=>V.map(z=>{var ne;const q=new Set(n.map(Y=>Y.id)),H={...z.decisions},K={...(ne=z.targetGuildAssignments)!=null?ne:{}};return n.forEach(Y=>{H[Y.id]||(H[Y.id]="undecided"),K[Y.id]||(K[Y.id]="none")}),Object.keys(H).forEach(Y=>{q.has(Y)||delete H[Y]}),Object.keys(K).forEach(Y=>{q.has(Y)||delete K[Y]}),{...z,decisions:H,targetGuildAssignments:K}}))},[n,i]);const S=V=>{c(z=>({...z,mode:V}))},C=V=>{c(z=>{var H,K,ne;const q=(H=z.baseGuild)!=null?H:{id:"base-1",kind:"base",name:"",server:""};return{...z,baseGuild:{...q,...V.id?{id:V.id}:{},name:(K=V.name)!=null?K:q.name,server:(ne=V.server)!=null?ne:q.server}}})},M=V=>{var K;if(!V.name.trim()||!V.server.trim())return;const z=V.name.trim(),q=V.server.trim(),H=(K=V.id)==null?void 0:K.trim();c(ne=>({...ne,partnerGuilds:[...ne.partnerGuilds,{id:H&&!H.startsWith("partner-")?H:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:z,server:q,kind:"partner"}]}))},T=V=>{c(z=>({...z,partnerGuilds:z.partnerGuilds.filter(q=>q.id!==V)}))},D=()=>{switch(t){case"setup":return s.jsx(O0e,{setupState:o,onChangeMode:S,onChangeBaseGuild:C,onAddPartnerGuild:M,onRemovePartnerGuild:T});case"members":return s.jsx(Mbe,{members:n,scenario:y,onChangeScenarioDecision:P,onChangeScenarioTargetGuild:L,onChangeScenarioMaxSlots:N,setupState:o});case"overview":return s.jsx(_1e,{members:n,scenario:y,setupState:o,onChangeScenarioDecision:P,onChangeScenarioTargetGuild:L,onAddPartnerGuild:V=>M({name:V,server:"tbd"})});case"scenarios":return s.jsx(X1e,{scenarios:u,activeScenarioId:p,onSetActiveScenario:g,onCreateScenario:v,onDuplicateScenario:b,onRenameScenario:I,onDeleteScenario:j});case"result":return s.jsx(L_e,{members:n,scenario:y,setupState:o});default:return null}};return s.jsx(Kt,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:s.jsxs("div",{className:bt.page,children:[s.jsxs("header",{className:bt.header,children:[s.jsxs("div",{className:bt.headerLeading,children:[s.jsx(As,{to:"/guild-hub",className:bt.backLink,children:"Back to Guild Hub"}),s.jsxs("div",{className:bt.headerStack,children:[s.jsx("p",{className:bt.kicker,children:"Guild Hub"}),s.jsx("h1",{className:bt.title,children:"Fusion Planner"}),s.jsx("p",{className:bt.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),s.jsxs("div",{className:bt.headerActions,children:[s.jsx("button",{type:"button",className:bt.primaryAction,children:"Neues Setup"}),s.jsx("button",{type:"button",className:bt.secondaryAction,children:"Checkliste"})]})]}),E.length?s.jsx("div",{className:bt.plannerNotice,role:"status","aria-live":"polite",children:E.map(V=>s.jsxs("div",{className:`${bt.noticeItem} ${V.toLowerCase().includes("no base guild")?bt.noticeWarning:""}`,children:[s.jsx("span",{className:bt.noticeDot,"aria-hidden":!0}),s.jsx("span",{children:V})]},V))}):null,s.jsxs("section",{className:bt.tabSection,"aria-label":"Fusion Planner Tabs",children:[s.jsx("div",{className:bt.tabBar,children:iI.map(V=>{const z=V.key===t;return s.jsxs("button",{type:"button",className:`${bt.tabItem} ${z?bt.tabItemActive:""}`,onClick:()=>e(V.key),"aria-pressed":z,children:[s.jsx("span",{className:bt.tabLabel,children:V.label}),s.jsx("span",{className:bt.tabHelper,children:V.helper})]},V.key)})}),s.jsxs("div",{className:bt.tabPanel,children:[s.jsx("span",{className:bt.tabBadge,children:(F=iI.find(V=>V.key===t))==null?void 0:F.label}),D()]})]}),s.jsxs("section",{className:bt.infoStrip,children:[s.jsxs("div",{className:bt.infoBlock,children:[s.jsx("span",{className:bt.infoLabel,children:"Status"}),s.jsx("strong",{children:"Entwurf"}),s.jsx("p",{className:bt.infoHint,children:"Bereit fuer weitere Eingaben."})]}),s.jsxs("div",{className:bt.infoBlock,children:[s.jsx("span",{className:bt.infoLabel,children:"Slots geplant"}),s.jsx("strong",{children:"0 / 40"}),s.jsx("p",{className:bt.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),s.jsxs("div",{className:bt.infoBlock,children:[s.jsx("span",{className:bt.infoLabel,children:"Szenarien"}),s.jsx("strong",{children:"3"}),s.jsx("p",{className:bt.infoHint,children:"Baseline, Optimistic, Risiko."})]}),s.jsxs("div",{className:bt.infoBlock,children:[s.jsx("span",{className:bt.infoLabel,children:"Letztes Update"}),s.jsx("strong",{children:"vor wenigen Minuten"}),s.jsx("p",{className:bt.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),s.jsx("section",{className:bt.stageGrid,children:F_e.map(V=>s.jsxs("article",{className:bt.panel,children:[s.jsxs("div",{className:bt.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:bt.panelKicker,children:V.step}),s.jsx("h2",{className:bt.panelTitle,children:V.title}),s.jsx("p",{className:bt.panelLead,children:V.description})]}),V.badge?s.jsx("span",{className:bt.badge,children:V.badge}):null]}),s.jsx("div",{className:bt.panelBody,children:s.jsx("div",{className:bt.placeholderGrid,children:V.placeholders.map(z=>s.jsxs("div",{className:bt.placeholderCard,children:[s.jsx("div",{className:bt.placeholderTitle,children:z}),s.jsx("p",{className:bt.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},z))})})]},V.key))}),s.jsx("section",{className:bt.helperSection,children:s.jsxs("div",{className:bt.helperCard,children:[s.jsxs("div",{children:[s.jsx("p",{className:bt.helperKicker,children:"Result"}),s.jsx("h3",{className:bt.helperTitle,children:"Finaler Merge-Plan"}),s.jsx("p",{className:bt.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),s.jsxs("div",{className:bt.helperActions,children:[s.jsx("button",{type:"button",className:bt.secondaryAction,children:"Teilen"}),s.jsx("button",{type:"button",className:bt.primaryAction,children:"Review starten"})]})]})})]})})}const q1=["EU-01","EU-02","US-01","US-02","ASIA-01"],_p=new Intl.NumberFormat("de-DE");function $_e(){const t=Mu("(min-width: 768px)"),[e,n]=W.useState("all"),[r,i]=W.useState(null),[a,o]=W.useState(null),[c,u]=W.useState(null),[h,p]=W.useState(null),g=[r,a].filter(Boolean).length,y=W.useMemo(()=>{const T=[c,h].filter(Boolean);if(!T.length)return 0;const D=T.reduce((F,V)=>{var z;return F+((z=V.members)!=null?z:0)},0);return Math.round(D/T.length)},[c,h]),[_,w]=W.useState(null),[k,E]=W.useState(!1),P=W.useRef(null);Fu(P,k&&!t),W.useEffect(()=>{t&&E(!1)},[t]),W.useEffect(()=>{if(!_)return;const T=F=>{const V=F.target;V&&(V.closest(`.${pe.freshnessBadge}`)||V.closest(`.${pe.freshnessPopover}`)||w(null))},D=F=>{F.key==="Escape"&&w(null)};return document.addEventListener("pointerdown",T),document.addEventListener("keydown",D),()=>{document.removeEventListener("pointerdown",T),document.removeEventListener("keydown",D)}},[_]);const L=W.useMemo(()=>c?Wp(c.nextUpdateAt,Date.now()):"",[c]),N=W.useMemo(()=>h?Wp(h.nextUpdateAt,Date.now()):"",[h]),v=()=>E(!0),b=()=>E(!1),I=T=>{n(T)},j=(T,D)=>{T==="guildA"?(i(D.id),u(D)):(o(D.id),p(D))},S=T=>{T==="guildA"?(i(null),u(null)):(o(null),p(null))},C=T=>{w(D=>D===T?null:T)},M=c&&h;return s.jsxs(Kt,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[s.jsxs("div",{className:pe.page,children:[s.jsxs("header",{className:pe.header,children:[s.jsxs("div",{className:pe.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Guild Hub"}),s.jsx("h1",{className:pe.title,children:"Gilden vergleichen"}),s.jsx("p",{className:pe.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),s.jsx("div",{className:pe.headerActions,children:!t&&s.jsx("button",{type:"button",className:pe.secondaryAction,onClick:v,children:"Filter"})})]}),s.jsxs("div",{className:pe.infoStrip,children:[s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Pool"}),s.jsxs("strong",{children:[_p.format(g)," Gilden"]})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Durchschnitt Mitglieder"}),s.jsx("strong",{children:_p.format(y)})]}),s.jsxs("div",{className:pe.infoCard,children:[s.jsx("span",{className:pe.infoLabel,children:"Serverfilter"}),s.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&s.jsx("div",{className:pe.inlineFilters,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>I(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),q1.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]}),s.jsxs("div",{className:pe.layout,children:[s.jsxs("section",{className:pe.selectionColumn,children:[s.jsx(aI,{title:"Gilde A",slot:"guildA",selectedGuild:c,excludeId:a,onSelect:j,onClear:S,serverFilter:e,onServerChange:I}),s.jsx(aI,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:j,onClear:S,serverFilter:e,onServerChange:I})]}),s.jsxs("section",{className:pe.comparisonColumn,children:[s.jsxs("div",{className:pe.comparisonCard,children:[s.jsxs("div",{className:pe.comparisonHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.kicker,children:"Vergleich"}),s.jsx("h2",{className:pe.sectionTitle,children:"Kennzahlen"})]}),M&&s.jsxs("span",{className:pe.diffBadge,children:["Delta Mitglieder:"," ",_p.format(c.members-h.members)]})]}),M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:pe.metricGrid,children:[s.jsx(oI,{label:"Mitglieder",aValue:c.members,bValue:h.members}),s.jsx(oI,{label:"Durchschnittslevel",aValue:c.avgLevel,bValue:h.avgLevel,isDecimal:!0}),s.jsx(O_e,{guildA:c,guildB:h,countdownA:L,countdownB:N,activePopover:_,onToggle:C})]}),s.jsx(V_e,{guildA:c,guildB:h})]}):s.jsx("div",{className:pe.emptyState,children:s.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),s.jsxs("div",{className:pe.supportPanels,children:[s.jsx(U_e,{}),s.jsx(G_e,{})]})]})]})]}),!t&&s.jsx("div",{className:`${pe.sheetOverlay} ${k?pe.sheetOpen:""}`,children:s.jsxs("div",{className:pe.sheet,role:"dialog","aria-modal":"true",ref:P,children:[s.jsxs("header",{className:pe.sheetHeader,children:[s.jsx("h3",{children:"Filter"}),s.jsx("button",{type:"button",className:pe.clearButton,onClick:b,children:"Schliessen"})]}),s.jsx("div",{className:pe.sheetBody,children:s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:e,onChange:T=>I(T.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),q1.map(T=>s.jsx("option",{value:T,children:T},T))]})]})})]})})]})}function aI({title:t,slot:e,selectedGuild:n,excludeId:r,onSelect:i,onClear:a,serverFilter:o,onServerChange:c}){const[u,h]=W.useState(""),p=Du(u,300);W.useEffect(()=>{h("")},[n,o]);const{results:g,loading:y}=z_e(p,o,r);return s.jsxs("article",{className:pe.selectionCard,children:[s.jsxs("div",{className:pe.slotHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.slotLabel,children:t}),s.jsx("p",{className:pe.slotStatus,children:n?"Ausgewaehlt":"Noch keine Auswahl"})]}),n&&s.jsx("button",{type:"button",className:pe.clearButton,onClick:()=>a(e),children:"Reset"})]}),s.jsxs("div",{className:pe.slotBody,children:[s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Server"}),s.jsxs("select",{className:pe.select,value:o,onChange:_=>c(_.target.value),children:[s.jsx("option",{value:"all",children:"Alle Server"}),q1.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("label",{className:pe.filterField,children:[s.jsx("span",{children:"Suchen"}),s.jsx("input",{className:pe.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:_=>h(_.target.value)})]}),s.jsxs("div",{className:pe.resultList,role:"list",children:[y&&s.jsx("div",{className:pe.emptyResult,children:"Lade..."}),!y&&g.length===0&&s.jsx("div",{className:pe.emptyResult,children:"Keine Gilde gefunden."}),!y&&g.map(_=>s.jsxs("div",{className:pe.resultItem,children:[s.jsxs("div",{children:[s.jsx("p",{className:pe.resultName,children:_.name}),s.jsxs("p",{className:pe.resultMeta,children:[_.server," - ",_.members," Mitglieder"]})]}),s.jsx("button",{type:"button",className:pe.selectButton,onClick:()=>i(e,_),children:"Waehlen"})]},_.id))]}),n&&s.jsxs("div",{className:pe.selectedCard,children:[s.jsx("p",{className:pe.selectedName,children:n.name}),s.jsxs("p",{className:pe.selectedMeta,children:[n.server," - ",n.members," Mitglieder - Durchschnittslevel"," ",n.avgLevel.toFixed(1)]}),s.jsx("p",{className:pe.selectedTagline,children:n.tagline})]})]})]})}function oI({label:t,aValue:e,bValue:n,isDecimal:r=!1}){const i=c=>r?c.toFixed(1).replace(".",","):_p.format(c),a=e-n;let o="gleich";if(a!==0){const c=r?Math.abs(a).toFixed(1).replace(".",","):_p.format(Math.abs(a));o=a>0?`+${c}`:`-${c}`}return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:t}),s.jsxs("div",{className:pe.metricValues,children:[s.jsx("span",{"aria-label":"Gilde A",children:i(e)}),s.jsx("span",{className:pe.metricDivider,children:"vs"}),s.jsx("span",{"aria-label":"Gilde B",children:i(n)})]}),s.jsx("p",{className:pe.metricDelta,children:o})]})}function O_e({guildA:t,guildB:e,countdownA:n,countdownB:r,activePopover:i,onToggle:a}){return s.jsxs("div",{className:pe.metricCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Freshness"}),s.jsx("div",{className:pe.freshnessRow,children:[t,e].map(o=>{const c=o.id===t.id?n:r,u=`fresh-${o.id}`,h=i===u;return s.jsxs("div",{className:pe.freshnessItem,children:[s.jsxs("button",{type:"button",className:pe.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[s.jsx("span",{children:o.freshness.toUpperCase()}),s.jsx("small",{children:jm(o.lastScanAt)})]}),h&&s.jsxs("div",{className:pe.freshnessPopover,role:"dialog",children:[s.jsx("p",{className:pe.popoverTitle,children:o.name}),s.jsxs("dl",{children:[s.jsxs("div",{children:[s.jsx("dt",{children:"Status"}),s.jsx("dd",{children:hj[o.freshness]})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Zuletzt gescannt"}),s.jsx("dd",{children:to(o.lastScanAt)})]}),s.jsxs("div",{children:[s.jsx("dt",{children:"Naechstes Update"}),s.jsxs("dd",{children:[to(o.nextUpdateAt)," (",c,")"]})]})]})]})]},o.id)})})]})}function V_e({guildA:t,guildB:e}){const n=W.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return s.jsxs("div",{className:pe.classCard,children:[s.jsx("p",{className:pe.metricLabel,children:"Klassenverteilung"}),s.jsx("div",{className:pe.classGrid,children:[t,e].map(r=>s.jsxs("div",{className:pe.classColumn,children:[s.jsx("h3",{children:r.name}),s.jsx("div",{className:pe.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>s.jsxs("span",{style:{width:`${i.percent}%`},className:pe.classSlice,children:[s.jsx("small",{children:i.label}),s.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),s.jsx("ul",{className:pe.classLegend,children:n.map(r=>s.jsx("li",{children:r},r))})]})}function U_e(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return s.jsxs("section",{className:pe.checklistCard,children:[s.jsx("h3",{children:"Vor dem Vergleich pruefen"}),s.jsx("ul",{className:pe.checklist,children:t.map(e=>s.jsx("li",{children:e},e))})]})}function G_e(){return s.jsxs("section",{className:pe.infoCardExtended,children:[s.jsx("h3",{children:"Transfers-Diff"}),s.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",s.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),s.jsx("p",{className:pe.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),s.jsx("button",{type:"button",className:pe.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function z_e(t,e,n){const[r,i]=W.useState([]),[a,o]=W.useState(!1);return W.useEffect(()=>{const c=t.trim();if(c.length===0){i([]),o(!1);return}let u=!1;async function h(){const p=In("CompareGuilds:search");o(!0);try{const g=c.toLowerCase(),y=hm(ft,"latest"),_=await yn(p,{path:"guilds/latest (collectionGroup)"},()=>xn(Tn(y,Pi("nameFold"),Dl(g),Ml(g+""),sr(15)))),w=await yn(p,{path:"guilds/latest (collectionGroup)"},()=>xn(Tn(y,gi("nameNgrams","array-contains",g),sr(15)))),k=new Set,E=[],P=L=>{var F,V,z,q,H,K,ne,Y,G,X,te,se,Z,ve,Se,J,ue,ie,me,ce,he;const N=L.data(),b=(F=L.ref.parent)==null?void 0:F.parent,I=b==null?void 0:b.parent;if((I==null?void 0:I.id)!=="guilds")return;const S=(z=(V=b==null?void 0:b.id)!=null?V:N.guildIdentifier)!=null?z:L.id;if(!S||k.has(S)||n&&S===n)return;const C=(K=(H=N.name)!=null?H:(q=N.values)==null?void 0:q.Name)!=null?K:"Unbekannte Gilde",M=(G=(Y=N.server)!=null?Y:(ne=N.values)==null?void 0:ne.Server)!=null?G:"Unknown";if(e!=="all"&&M!==e)return;const T=(ve=(Z=(te=N.memberCount)!=null?te:(X=N.values)==null?void 0:X["Guild Member Count"])!=null?Z:(se=N.values)==null?void 0:se.GuildMemberCount)!=null?ve:0,D=(ue=(J=N.updatedAt)!=null?J:(Se=N.values)==null?void 0:Se.UpdatedAt)!=null?ue:N.timestamp?new Date(N.timestamp*1e3).toISOString():new Date().toISOString();k.add(S),E.push({id:S,name:C,tagline:(ie=N.tagline)!=null?ie:"",server:M,members:T,avgLevel:(he=(ce=N.avgLevel)!=null?ce:(me=N.values)==null?void 0:me.AvgLevel)!=null?he:0,lastScanAt:D,updatedAt:D,nextUpdateAt:D,freshness:"unknown",classes:[]})};_.forEach(P),w.forEach(P),u||(E.sort((L,N)=>L.name.localeCompare(N.name)),i(E))}catch(g){console.error("[GuildHub CompareGuilds] guild search failed",g),u||i([])}finally{Ys(p),u||o(!1)}}return h(),()=>{u=!0}},[t,e,n]),{results:r,loading:a}}const H_e="_page_o27vc_1",W_e="_header_o27vc_13",K_e="_headerStack_o27vc_25",q_e="_kicker_o27vc_37",Q_e="_title_o27vc_53",Y_e="_headerActions_o27vc_65",X_e="_primaryAction_o27vc_77",J_e="_secondaryAction_o27vc_79",Z_e="_infoStrip_o27vc_109",ewe="_infoPill_o27vc_129",twe="_freshnessWrapper_o27vc_163",swe="_freshnessBadge_o27vc_171",nwe="_popover_o27vc_191",rwe="_popoverLabel_o27vc_221",iwe="_filterToolbar_o27vc_231",awe="_filterSheetButton_o27vc_241",owe="_inlineFilters_o27vc_259",lwe="_searchInput_o27vc_271",cwe="_select_o27vc_273",dwe="_chipGroup_o27vc_295",uwe="_chip_o27vc_295",hwe="_chipActive_o27vc_325",pwe="_levelRow_o27vc_335",mwe="_sortControls_o27vc_363",gwe="_sortLabel_o27vc_375",fwe="_directionButton_o27vc_385",vwe="_listBody_o27vc_403",xwe="_tableWrapper_o27vc_415",ywe="_table_o27vc_415",bwe="_cardFooter_o27vc_459",_we="_panel_o27vc_461",wwe="_formPanel_o27vc_463",jwe="_statusSelect_o27vc_481",Swe="_stickyColumn_o27vc_515",Nwe="_rowButton_o27vc_529",kwe="_scanBadge_o27vc_545",Cwe="_cardList_o27vc_561",Twe="_card_o27vc_459",Iwe="_cardHeader_o27vc_593",Awe="_cardTitle_o27vc_605",Ewe="_cardMeta_o27vc_623",Rwe="_cardNotes_o27vc_635",Pwe="_emptyState_o27vc_659",Lwe="_sheetBackdrop_o27vc_675",Dwe="_sheet_o27vc_675",Mwe="_sheetHandle_o27vc_717",Fwe="_sheetBody_o27vc_733",Bwe="_sheetLabel_o27vc_749",$we="_sheetActions_o27vc_785",Owe="_overlay_o27vc_797",Vwe="_drawer_o27vc_837",Uwe="_modal_o27vc_845",Gwe="_panelHeader_o27vc_853",zwe="_section_o27vc_867",Hwe="_tagRow_o27vc_899",Wwe="_historyList_o27vc_913",Kwe="_panelFooter_o27vc_943",qwe="_formOverlay_o27vc_955",Qwe="_formGrid_o27vc_1003",Ywe="_warning_o27vc_1015",Xwe="_pagination_o27vc_1033",Me={page:H_e,header:W_e,headerStack:K_e,kicker:q_e,title:Q_e,headerActions:Y_e,primaryAction:X_e,secondaryAction:J_e,infoStrip:Z_e,infoPill:ewe,freshnessWrapper:twe,freshnessBadge:swe,popover:nwe,popoverLabel:rwe,filterToolbar:iwe,filterSheetButton:awe,inlineFilters:owe,searchInput:lwe,select:cwe,chipGroup:dwe,chip:uwe,chipActive:hwe,levelRow:pwe,sortControls:mwe,sortLabel:gwe,directionButton:fwe,listBody:vwe,tableWrapper:xwe,table:ywe,cardFooter:bwe,panel:_we,formPanel:wwe,statusSelect:jwe,stickyColumn:Swe,rowButton:Nwe,scanBadge:kwe,cardList:Cwe,card:Twe,cardHeader:Iwe,cardTitle:Awe,cardMeta:Ewe,cardNotes:Rwe,emptyState:Pwe,sheetBackdrop:Lwe,sheet:Dwe,sheetHandle:Mwe,sheetBody:Fwe,sheetLabel:Bwe,sheetActions:$we,overlay:Owe,drawer:Vwe,modal:Uwe,panelHeader:Gwe,section:zwe,tagRow:Hwe,historyList:Wwe,panelFooter:Kwe,formOverlay:qwe,formGrid:Qwe,warning:Ywe,pagination:Xwe},Bv=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],$v=["EU-01","EU-02","US-01","US-02","ASIA-01"],pj={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},lI={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},Eb={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},Jwe=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:Sl(2),updatedAt:Sl(3),freshness:"f1",history:[{date:Ci(1),message:"Interview abgeschlossen"},{date:Ci(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:Sl(10),updatedAt:Sl(11),freshness:"f3",history:[{date:Ci(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:Sl(20),updatedAt:Sl(5),freshness:"f4",history:[{date:Ci(4),message:"Probe erfolgreich"},{date:Ci(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Ci(2),updatedAt:Ci(2),freshness:"f5",history:[{date:Ci(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Ci(3),updatedAt:Ci(1),freshness:"f6",history:[{date:Ci(1),message:"Bewerbung zurueckgezogen"},{date:Ci(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:Sl(5),updatedAt:Sl(5),freshness:"f2",history:[{date:Ci(1),message:"Profil verifiziert"}]}];function cI(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function Zwe(t,e,n){const r=n.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),o=e.status==="all"||i.status===e.status,c=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&o&&c&&u&&h})}function eje(t,e,n){const r=[...t];return r.sort((i,a)=>{let o=0;switch(e){case"name":o=i.name.localeCompare(a.name);break;case"level":o=i.level-a.level;break;case"status":o=i.status.localeCompare(a.status);break;case"lastScan":o=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:o=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return n==="asc"?o:-o}),r}function tje(t,e,n){const r=(e-1)*n;return t.slice(r,r+n)}function Uf(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function sje(t){const e=Date.now()-new Date(t).getTime(),n=Math.round(e/6e4);if(n<60)return`${n} min`;const r=Math.round(n/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function nje(t){return t.length?t.reduce((e,n)=>e?lI[n.freshness]>lI[e.freshness]?n:e:n,null):null}function Ci(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function Sl(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function rje(){var z;const[t,e]=W.useState(Jwe),[n,r]=W.useState(Eb),[i,a]=W.useState(Eb),o=Du(n.q,300),c=W.useMemo(()=>{const q=Zwe(t,n,o);return eje(q,n.sort,n.dir)},[t,n,o]),u=W.useMemo(()=>tje(c,n.page,n.pageSize),[c,n.page,n.pageSize]),h=Math.max(1,Math.ceil(c.length/n.pageSize)),p=Mu("(min-width: 768px)"),g=Mu("(min-width: 1024px)"),[y,_]=W.useState(!1),[w,k]=W.useState(null),E=(z=t.find(q=>q.id===w))!=null?z:null,P=W.useRef(null);Fu(P,!!E&&!g);const[L,N]=W.useState(null),[v,b]=W.useState(!1),I=W.useRef(null);Fu(I,v);const j=W.useMemo(()=>nje(t),[t]),S=j&&j.lastScanAt?sje(j.lastScanAt):"unbekannt",C=q=>{const H=cI(q);r(H),a(H)},M=(q,H)=>{const K=cI({...n,[q]:H,page:q==="page"?H:1});C(K)},T=()=>{C(i),_(!1)},D=()=>{C(Eb),_(!1)},F=(q,H)=>{e(K=>K.map(ne=>ne.id===q?{...ne,status:H,updatedAt:new Date().toISOString()}:ne))},V=q=>{e(H=>H.some(ne=>ne.id===q.id)?H.map(ne=>ne.id===q.id?q:ne):[q,...H]),b(!1)};return s.jsxs(Kt,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[s.jsxs("div",{className:Me.page,children:[s.jsxs("header",{className:Me.header,children:[s.jsxs("div",{className:Me.headerStack,children:[s.jsxs("div",{children:[s.jsx("p",{className:Me.kicker,children:"Recruiting"}),s.jsx("h1",{className:Me.title,children:"Waitlist"})]}),s.jsxs("div",{className:Me.headerActions,children:[s.jsx("button",{type:"button",className:Me.primaryAction,onClick:()=>{N(null),b(!0)},children:"Neuer Eintrag"}),!p&&s.jsx("button",{type:"button",className:Me.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>_(!0),children:"Filter"})]})]}),s.jsxs("div",{className:Me.infoStrip,children:[s.jsx(Rb,{label:"Neu",value:c.filter(q=>q.status==="new").length}),s.jsx(Rb,{label:"In Review",value:c.filter(q=>q.status==="in_review").length}),s.jsx(Rb,{label:"Zugesagt",value:c.filter(q=>q.status==="accepted").length}),j&&s.jsx(ije,{label:pj[j.freshness],updatedAt:j.lastScanAt,countdown:S})]})]}),s.jsx("section",{className:Me.filterToolbar,children:p?s.jsx(aje,{filters:n,onChange:M,onToggleClass:q=>{const H=n.classes.includes(q)?n.classes.filter(K=>K!==q):[...n.classes,q];M("classes",H)},onToggleServer:q=>{const H=n.servers.includes(q)?n.servers.filter(K=>K!==q):[...n.servers,q];M("servers",H)}}):s.jsx("button",{type:"button",className:Me.filterSheetButton,onClick:()=>_(!0),children:"Filter & Sortierung"})}),s.jsx("section",{className:Me.listBody,children:p?s.jsx(oje,{items:u,sort:n.sort,dir:n.dir,onSortChange:q=>{const H=n.sort===q&&n.dir==="asc"?"desc":"asc";M("sort",q),M("dir",H)},onSelect:k,onStatusChange:F}):s.jsx(lje,{items:u,onSelect:k,onStatusChange:F})}),s.jsx(dje,{page:n.page,totalPages:h,onChange:q=>M("page",q)})]}),y&&s.jsx(cje,{filters:i,onChange:a,onToggleClass:q=>a(H=>({...H,classes:H.classes.includes(q)?H.classes.filter(K=>K!==q):[...H.classes,q]})),onToggleServer:q=>a(H=>({...H,servers:H.servers.includes(q)?H.servers.filter(K=>K!==q):[...H.servers,q]})),onClose:()=>_(!1),onApply:T,onReset:D}),E&&s.jsx(jP,{ref:P,item:E,mode:g?"drawer":"modal",onClose:()=>k(null),onEdit:()=>{N(E),b(!0),k(null)}}),v&&s.jsx(SP,{ref:I,item:L,entries:t,onClose:()=>b(!1),onSubmit:V})]})}function Rb({label:t,value:e}){return s.jsxs("div",{className:Me.infoPill,children:[s.jsx("span",{children:t}),s.jsx("strong",{children:e})]})}function ije({label:t,updatedAt:e,countdown:n}){const[r,i]=W.useState(!1);return s.jsxs("div",{className:Me.freshnessWrapper,children:[s.jsx("button",{type:"button",className:Me.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&s.jsxs("div",{className:Me.popover,children:[s.jsxs("div",{children:[s.jsx("span",{className:Me.popoverLabel,children:"Letzter Scan"}),s.jsx("strong",{children:Uf(e)})]}),s.jsxs("div",{children:[s.jsx("span",{className:Me.popoverLabel,children:"Aktualisiert"}),s.jsx("strong",{children:n})]})]})]})}function aje({filters:t,onChange:e,onToggleClass:n,onToggleServer:r}){return s.jsxs("div",{className:Me.inlineFilters,children:[s.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:Me.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),s.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:Me.select,value:t.status,onChange:i=>e("status",i.target.value),children:[s.jsx("option",{value:"all",children:"Status (alle)"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("div",{className:Me.chipGroup,children:Bv.map(i=>{const a=t.classes.includes(i);return s.jsx("button",{type:"button",className:`${Me.chip} ${a?Me.chipActive:""}`,onClick:()=>n(i),children:i},i)})}),s.jsx("div",{className:Me.chipGroup,children:$v.map(i=>{const a=t.servers.includes(i);return s.jsx("button",{type:"button",className:`${Me.chip} ${a?Me.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),s.jsxs("div",{className:Me.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),s.jsxs("div",{className:Me.sortControls,children:[s.jsx("label",{className:Me.sortLabel,children:"Sortieren"}),s.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"level",children:"Level"}),s.jsx("option",{value:"status",children:"Status"}),s.jsx("option",{value:"lastScan",children:"Letzter Scan"}),s.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),s.jsx("button",{type:"button",className:Me.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function oje({items:t,sort:e,dir:n,onSortChange:r,onSelect:i,onStatusChange:a}){const o=c=>e===c?n==="asc"?" ":" ":"";return t.length?s.jsx("div",{className:Me.tableWrapper,children:s.jsxs("table",{className:Me.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:Me.stickyColumn,onClick:()=>r("name"),children:["Name",o("name")]}),s.jsx("th",{children:"Klasse"}),s.jsxs("th",{onClick:()=>r("level"),children:["Level",o("level")]}),s.jsx("th",{children:"Server"}),s.jsxs("th",{onClick:()=>r("status"),children:["Status",o("status")]}),s.jsx("th",{children:"Notizen"}),s.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",o("lastScan")]})]})}),s.jsx("tbody",{children:t.map(c=>s.jsxs("tr",{children:[s.jsx("td",{className:Me.stickyColumn,children:s.jsx("button",{type:"button",className:Me.rowButton,onClick:()=>i(c.id),children:c.name})}),s.jsx("td",{children:c.classRole}),s.jsx("td",{children:c.level}),s.jsx("td",{children:c.server}),s.jsx("td",{children:s.jsxs("select",{className:Me.statusSelect,name:`waitlistStatus-${c.id}`,"aria-label":`Status fuer ${c.name}`,value:c.status,onChange:u=>a(c.id,u.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),s.jsxs("td",{children:[c.notes.slice(0,64),"..."]}),s.jsx("td",{children:s.jsx("span",{className:Me.scanBadge,children:pj[c.freshness]})})]},c.id))})]})}):s.jsx(wP,{})}function lje({items:t,onSelect:e,onStatusChange:n}){return t.length?s.jsx("div",{className:Me.cardList,children:t.map(r=>s.jsxs("article",{className:Me.card,children:[s.jsxs("div",{className:Me.cardHeader,children:[s.jsxs("div",{children:[s.jsx("button",{type:"button",className:Me.cardTitle,onClick:()=>e(r.id),children:r.name}),s.jsxs("p",{className:Me.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),s.jsx("span",{className:Me.scanBadge,children:pj[r.freshness]})]}),s.jsxs("p",{className:Me.cardNotes,children:[r.notes.slice(0,160),"..."]}),s.jsxs("div",{className:Me.cardFooter,children:[s.jsxs("select",{className:Me.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>n(r.id,i.target.value),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):s.jsx(wP,{})}function wP(){return s.jsx("div",{className:Me.emptyState,children:s.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function cje({filters:t,onChange:e,onToggleClass:n,onToggleServer:r,onClose:i,onApply:a,onReset:o}){return s.jsx("div",{className:Me.sheetBackdrop,onClick:i,children:s.jsxs("div",{className:Me.sheet,onClick:c=>c.stopPropagation(),children:[s.jsx("div",{className:Me.sheetHandle}),s.jsxs("div",{className:Me.sheetBody,children:[s.jsx("h2",{children:"Filter"}),s.jsxs("label",{className:Me.sheetLabel,children:["Suche",s.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:c=>e(u=>({...u,q:c.target.value}))})]}),s.jsxs("label",{className:Me.sheetLabel,children:["Status",s.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:c=>e(u=>({...u,status:c.target.value})),children:[s.jsx("option",{value:"all",children:"Alle"}),s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),s.jsxs("div",{className:Me.sheetLabel,children:["Klassen",s.jsx("div",{className:Me.chipGroup,children:Bv.map(c=>{const u=t.classes.includes(c);return s.jsx("button",{type:"button",className:`${Me.chip} ${u?Me.chipActive:""}`,"aria-label":`Klasse ${c}`,onClick:()=>n(c),children:c},c)})})]}),s.jsxs("div",{className:Me.sheetLabel,children:["Server",s.jsx("div",{className:Me.chipGroup,children:$v.map(c=>{const u=t.servers.includes(c);return s.jsx("button",{type:"button",className:`${Me.chip} ${u?Me.chipActive:""}`,"aria-label":`Server ${c}`,onClick:()=>r(c),children:c},c)})})]}),s.jsxs("div",{className:Me.levelRow,children:[s.jsxs("label",{children:["Lv min",s.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:c=>e(u=>({...u,lvMin:Number(c.target.value)}))})]}),s.jsxs("label",{children:["Lv max",s.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:c=>e(u=>({...u,lvMax:Number(c.target.value)}))})]})]})]}),s.jsxs("div",{className:Me.sheetActions,children:[s.jsx("button",{type:"button",onClick:o,children:"Zuruecksetzen"}),s.jsx("button",{type:"button",className:Me.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const jP=W.forwardRef(({item:t,mode:e,onClose:n,onEdit:r},i)=>s.jsx("div",{className:Me.overlay,children:s.jsxs("div",{ref:i,className:`${Me.panel} ${e==="drawer"?Me.drawer:Me.modal}`,children:[s.jsxs("header",{className:Me.panelHeader,children:[s.jsxs("div",{children:[s.jsxs("p",{className:Me.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),s.jsx("h2",{children:t.name})]}),s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:n,children:"Schliessen"})]}),s.jsxs("section",{className:Me.section,children:[s.jsx("h3",{children:"Kontakt"}),s.jsx("p",{children:t.contact}),s.jsxs("p",{children:["Quelle: ",t.source]})]}),s.jsxs("section",{className:Me.section,children:[s.jsx("h3",{children:"Notizen"}),s.jsx("p",{children:t.notes})]}),s.jsxs("section",{className:Me.section,children:[s.jsx("h3",{children:"Tags"}),s.jsx("div",{className:Me.tagRow,children:t.tags.length?t.tags.map(a=>s.jsx("span",{children:a},a)):s.jsx("span",{children:"Keine"})})]}),s.jsxs("section",{className:Me.section,children:[s.jsx("h3",{children:"Historie"}),s.jsx("ul",{className:Me.historyList,children:t.history.map(a=>s.jsxs("li",{children:[s.jsx("span",{children:Uf(a.date)}),s.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),s.jsxs("section",{className:Me.section,children:[s.jsx("h3",{children:"Scan-Infos"}),s.jsxs("p",{children:["Letzter Scan: ",Uf(t.lastScanAt)]}),s.jsxs("p",{children:["Aktualisiert: ",Uf(t.updatedAt)]})]}),s.jsxs("footer",{className:Me.panelFooter,children:[s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:r,children:"Bearbeiten"}),s.jsx("button",{type:"button",className:Me.primaryAction,onClick:n,children:"Schliessen"})]})]})}));jP.displayName="DetailPanel";const SP=W.forwardRef(({item:t,entries:e,onClose:n,onSubmit:r},i)=>{const[a,o]=W.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:Bv[0],level:1,server:$v[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});W.useEffect(()=>{t&&o(t)},[JSON.stringify(t)]);const c=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return s.jsx("div",{className:Me.formOverlay,children:s.jsxs("form",{ref:i,className:Me.formPanel,onSubmit:c,children:[s.jsxs("header",{className:Me.panelHeader,children:[s.jsxs("div",{children:[s.jsx("p",{className:Me.cardMeta,children:t?"Bearbeiten":"Neu"}),s.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:n,children:"Schliessen"})]}),u&&s.jsx("div",{className:Me.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),s.jsxs("label",{className:Me.sheetLabel,children:["Name",s.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>o(p=>({...p,name:h.target.value}))})]}),s.jsxs("div",{className:Me.formGrid,children:[s.jsxs("label",{children:["Klasse",s.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>o(p=>({...p,classRole:h.target.value})),children:Bv.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Level",s.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>o(p=>({...p,level:Number(h.target.value)}))})]}),s.jsxs("label",{children:["Server",s.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>o(p=>({...p,server:h.target.value})),children:$v.map(h=>s.jsx("option",{value:h,children:h},h))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>o(p=>({...p,status:h.target.value})),children:[s.jsx("option",{value:"new",children:"Neu"}),s.jsx("option",{value:"in_review",children:"In Review"}),s.jsx("option",{value:"accepted",children:"Zugesagt"}),s.jsx("option",{value:"declined",children:"Abgelehnt"}),s.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),s.jsxs("label",{className:Me.sheetLabel,children:["Kontakt",s.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>o(p=>({...p,contact:h.target.value}))})]}),s.jsxs("label",{className:Me.sheetLabel,children:["Quelle",s.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>o(p=>({...p,source:h.target.value}))})]}),s.jsxs("label",{className:Me.sheetLabel,children:["Notizen",s.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>o(p=>({...p,notes:h.target.value})),rows:4})]}),s.jsxs("footer",{className:Me.panelFooter,children:[s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:n,children:"Abbrechen"}),s.jsx("button",{type:"submit",className:Me.primaryAction,children:"Speichern"})]})]})})});SP.displayName="WaitlistForm";function dje({page:t,totalPages:e,onChange:n}){return s.jsxs("div",{className:Me.pagination,children:[s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),s.jsxs("span",{children:["Seite ",t," / ",e]}),s.jsx("button",{type:"button",className:Me.secondaryAction,onClick:()=>n(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const uje=["tab","sub","sub2","q","sort","dir","page","pageSize"];function Xu(t=[]){const[e,n]=fi(),r=W.useMemo(()=>[...t].sort().join("|"),[t]),i=W.useMemo(()=>{const p=new Set([...uje]);return t.forEach(g=>p.add(g)),Array.from(p)},[r]),a=W.useMemo(()=>{const p={};return i.forEach(g=>{const y=e.get(g);y!==null&&(p[g]=y)}),p},[e,i]),o=W.useCallback((p,g)=>{var _;const y=new URLSearchParams(e);Object.entries(p).forEach(([w,k])=>{k==null||k===""?y.delete(w):y.set(w,String(k))}),n(y,{replace:(_=g==null?void 0:g.replace)!=null?_:!1})},[e,n]),c=W.useCallback(p=>{const g=new URLSearchParams(e);(p&&p.length>0?p:i).forEach(_=>g.delete(_)),n(g,{replace:!0})},[e,n,i]),u=W.useCallback((p,g="")=>{var y;return(y=a[p])!=null?y:g},[a]),h=W.useCallback((p,g=0)=>{const y=a[p],_=y?Number(y):NaN;return Number.isFinite(_)?_:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:o,resetParams:c}}function hje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Activity"})})}function pje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Imports"})})}function mje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Announcements"})})}function gje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Events"})})}function fje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Roles"})})}function vje(){return Xu(),s.jsx("section",{style:{padding:16},children:s.jsx("h1",{children:"Guild Hub - Settings"})})}const xje=[{icon:s.jsx(Zv,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:s.jsx(L7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:s.jsx(S7,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],yje=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],bje=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function _je(){return s.jsx(Kt,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(As,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:s.jsx(wje,{}),right:s.jsx(jje,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:xje.map(t=>s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),s.jsx(As,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),s.jsx("ul",{className:"space-y-3",children:yje.map(t=>s.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[s.jsx(m_,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),s.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),s.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function wje(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsx(As,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),s.jsx(As,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),s.jsx(As,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),s.jsx(As,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),s.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[s.jsx("li",{children:" Pager rotation: Ops Team"}),s.jsx("li",{children:" Slack channel: #sf-alerts"}),s.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function jje(){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),s.jsx("ul",{className:"mt-3 space-y-2",children:bje.map(t=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),s.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),s.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const Sje=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function Nje(){return s.jsx(Kt,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:s.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[s.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Time"}),s.jsx("span",{children:"Service"}),s.jsx("span",{className:"text-right",children:"Severity"})]}),s.jsx("ul",{children:Sje.map(t=>s.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),s.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:kje(t.severity)},children:t.severity})]},t.id))})]})})}function kje(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const _a={background:"#152A42",borderColor:"#2B4C73"},pu={background:"#1A2F4A",borderColor:"#2B4C73"},Pb=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function Cje(){const{data:t,loading:e,refreshing:n,error:r,refresh:i}=Eje(),a=W.useMemo(()=>[{label:"Total uploads",value:Yi(t.metrics.totalUploads),hint:`${Yi(t.metrics.last24h)} in the last 24h`,icon:s.jsx(GM,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:Qp(t.metrics.successRate),hint:`${Yi(t.metrics.failed)} failed`,icon:s.jsx(EM,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?Lb(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${Lb(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:s.jsx(VM,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:dI(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:s.jsx(KM,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:Yi(t.metrics.uniqueUploaders),hint:`${Yi(t.metrics.uniqueGuilds)} guilds represented`,icon:s.jsx(Zv,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:Yi(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:s.jsx(V3,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return s.jsx(Kt,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:s.jsx(Tje,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:n}),right:s.jsx(Ije,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(o=>s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[o.icon,o.label]}),s.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:o.value})]})}),s.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:o.hint})]},o.label))}),s.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:pu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:mu(o.status)},"aria-hidden":"true"}),mj(o.status)]}),s.jsx("span",{className:"font-semibold",children:Yi(o.count)})]}),s.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:s.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(o.share*100,100).toFixed(1)}%`,backgroundColor:mu(o.status)}})}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[Qp(o.share)," of window"]})]},o.status))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),s.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(o=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:pu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-semibold",children:o.hourLabel}),s.jsxs("span",{children:[Yi(o.total)," uploads"]})]}),s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:mu("success")},"aria-hidden":"true"}),"Success ",Yi(o.success)]}),s.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[s.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:mu("failed")},"aria-hidden":"true"}),"Failed ",Yi(o.failed)]})]})]},o.hourLabel))})]})]}),s.jsxs("section",{className:"rounded-2xl border",style:_a,children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Ol,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?s.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[s.jsx(m_,{className:"h-3.5 w-3.5"}),r]}):s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(jM,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),s.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[s.jsx("span",{children:"ID"}),s.jsx("span",{children:"Status"}),s.jsx("span",{children:"Uploader"}),s.jsx("span",{children:"Guild"}),s.jsx("span",{className:"text-right",children:"Processing"}),s.jsx("span",{className:"text-right",children:"File size"})]}),s.jsx("ul",{children:t.recentUploads.map(o=>{var c,u,h,p;return s.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:o.id}),s.jsx("span",{children:s.jsx(Aje,{status:o.status})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(c=o.uploaderName)!=null?c:o.uploaderId)!=null?u:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.uploadedAt?o.uploadedAt.toLocaleString():"Timestamp missing"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(p=(h=o.guildName)!=null?h:o.guildId)!=null?p:""}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:o.errorCode?`Issue: ${o.errorCode}`:"Healthy"})]}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.processingMs?Lb(o.processingMs):"Pending"}),s.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:o.fileSizeBytes?dI(o.fileSizeBytes):""})]},o.id)})})]})]})})}function Tje({breakdown:t,onRefresh:e,loading:n,refreshing:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("div",{className:"rounded-2xl border p-4",style:_a,children:[s.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[s.jsx("span",{children:"Controls"}),s.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[s.jsx(Jv,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),s.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:_a,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>s.jsxs("li",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:mu(i.status)},"aria-hidden":"true"}),mj(i.status)]}),s.jsx("span",{children:Qp(i.share)})]},i.status))}),n&&s.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[s.jsx(Ol,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),s.jsxs("div",{className:"rounded-2xl border p-4",style:_a,children:[s.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),s.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(jf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(jf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(jf,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function Ije({issues:t,failures:e,uploaders:n,guilds:r}){return s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(V3,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),s.jsx("span",{children:"Top failure signatures"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:pu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{children:i.code}),s.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),s.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(m_,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("span",{children:"Latest failed uploads"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?s.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return s.jsxs("li",{className:"rounded-xl border px-3 py-2",style:pu,children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[s.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),s.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),s.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(Zv,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Uploader leaderboard"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:n.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:pu,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Qp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Yi(i.count)})]},i.id))})]}),s.jsxs("article",{className:"rounded-2xl border p-4",style:_a,children:[s.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[s.jsx(YM,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),s.jsx("span",{children:"Guild spotlight"})]}),s.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>s.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:pu,children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),s.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Qp(i.successRate)]})]}),s.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Yi(i.count)})]},i.id))})]})]})}function Aje({status:t}){const e=mu(t);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[s.jsx(jf,{className:"h-3 w-3","aria-hidden":"true"}),mj(t)]})}function Eje(){const[t,e]=W.useState(Pb),[n,r]=W.useState(!0),[i,a]=W.useState(!1),[o,c]=W.useState(null),u=W.useCallback(async(p=!1)=>{const g=In("AdminScansUploaded:overview");p?a(!0):r(!0);try{const y=Go(ft,"scanUploads"),_=Tn(y,Pi("uploadedAt","desc"),sr(100)),k=(await yn(g,y,()=>xn(_))).docs.map(E=>Rje(E.id,E.data()));k.length>0?(e(k),c(null)):(e(Pb),c("No uploads in window - showing fallback snapshot"))}catch(y){console.error("[ScansUploaded] Failed to load Firestore data",y),c("Live data unavailable - fallback snapshot active"),e(Pb)}finally{Ys(g),p?a(!1):r(!1)}},[]);W.useEffect(()=>{u(!1)},[u]);const h=W.useMemo(()=>Lje(t),[t]);return{loading:n,refreshing:i,error:o,data:h,refresh:W.useCallback(()=>u(!0),[u])}}function Rje(t,e){const n=Pje(e.status);return{id:t,status:n,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof Xs?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function Pje(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function Lje(t){var C,M;const e=new Map,n=new Map,r=new Map,i=new Map,a=[];let o=0,c=0;const h=Date.now()-1440*60*1e3,p=new Map;t.forEach(T=>{var z,q,H,K,ne,Y,G,X,te,se,Z,ve,Se,J,ue,ie,me;const D=(z=e.get(T.status))!=null?z:0;if(e.set(T.status,D+1),T.uploadedAt&&T.uploadedAt.getTime()>=h&&(c+=1),T.processingMs!=null&&a.push(T.processingMs),T.fileSizeBytes!=null&&(o+=T.fileSizeBytes),T.status==="failed"&&T.errorCode){const ce=(q=n.get(T.errorCode))!=null?q:{count:0,lastSeen:null};n.set(T.errorCode,{count:ce.count+1,lastSeen:!ce.lastSeen||T.uploadedAt&&ce.lastSeen<T.uploadedAt?T.uploadedAt:ce.lastSeen})}const F=(K=(H=T.uploaderId)!=null?H:T.uploaderName)!=null?K:`anon-${T.id}`,V=(G=r.get(F))!=null?G:{name:(Y=(ne=T.uploaderName)!=null?ne:T.uploaderId)!=null?Y:"Unknown",success:0,total:0};if(r.set(F,{name:(te=(X=T.uploaderName)!=null?X:T.uploaderId)!=null?te:"Unknown",success:V.success+(T.status==="success"?1:0),total:V.total+1}),T.guildId||T.guildName){const ce=(Z=(se=T.guildId)!=null?se:T.guildName)!=null?Z:`guild-${T.id}`,he=(J=i.get(ce))!=null?J:{name:(Se=(ve=T.guildName)!=null?ve:T.guildId)!=null?Se:"Unknown",success:0,total:0};i.set(ce,{name:(ie=(ue=T.guildName)!=null?ue:T.guildId)!=null?ie:"Unknown",success:he.success+(T.status==="success"?1:0),total:he.total+1})}if(T.uploadedAt){const ce=new Date(T.uploadedAt);ce.setMinutes(0,0,0);const he=ce.toISOString(),Ne=(me=p.get(he))!=null?me:{hourLabel:Mje(ce),timestamp:ce,total:0,success:0,failed:0};p.set(he,{hourLabel:Ne.hourLabel,timestamp:Ne.timestamp,total:Ne.total+1,success:Ne.success+(T.status==="success"?1:0),failed:Ne.failed+(T.status==="failed"?1:0)})}});const g=t.length,y=(C=e.get("success"))!=null?C:0,_=(M=e.get("failed"))!=null?M:0,w=a.length?a.reduce((T,D)=>T+D,0)/a.length:null,k=a.length?Dje(a,95):null,E=r.size,P=i.size,L=Array.from(e.entries()).map(([T,D])=>({status:T,count:D,share:g?D/g:0})).sort((T,D)=>D.count-T.count),N=Array.from(p.values()).sort((T,D)=>D.timestamp.getTime()-T.timestamp.getTime()).slice(0,12),v=Array.from(n.entries()).map(([T,D])=>({code:T,...D})).sort((T,D)=>D.count-T.count).slice(0,6),b=[...t].sort((T,D)=>{var F,V,z,q;return((V=(F=D.uploadedAt)==null?void 0:F.getTime())!=null?V:0)-((q=(z=T.uploadedAt)==null?void 0:z.getTime())!=null?q:0)}).slice(0,12),I=t.filter(T=>T.status==="failed").sort((T,D)=>{var F,V,z,q;return((V=(F=D.uploadedAt)==null?void 0:F.getTime())!=null?V:0)-((q=(z=T.uploadedAt)==null?void 0:z.getTime())!=null?q:0)}),j=Array.from(r.entries()).map(([T,D])=>({id:T,name:D.name,count:D.total,successRate:D.total?D.success/D.total:0})).sort((T,D)=>D.count-T.count).slice(0,5),S=Array.from(i.entries()).map(([T,D])=>({id:T,name:D.name,count:D.total,successRate:D.total?D.success/D.total:0})).sort((T,D)=>D.count-T.count).slice(0,5);return{metrics:{totalUploads:g,last24h:c,successRate:g?y/g:0,failed:_,avgProcessingMs:w,p95ProcessingMs:k,uniqueUploaders:E,uniqueGuilds:P,totalFileSizeBytes:o},statusBreakdown:L,timeline:N,issues:v,recentFailures:I,recentUploads:b,topUploaders:j,topGuilds:S}}function Dje(t,e){const n=[...t].sort((c,u)=>c-u);if(n.length===0)return 0;const r=e/100*(n.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return n[i];const o=r-i;return n[i]*(1-o)+n[a]*o}function Yi(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function Qp(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function Lb(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function dI(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r+=1;return`${n.toFixed(n>=10?0:1)} ${e[r]}`}function mu(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function mj(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function Mje(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function Db({label:t,value:e,hint:n}){return s.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),s.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),n&&s.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:n})]})}function Fje(){var c,u,h,p,g,y;const{snapshot:t,error:e,loading:n,refresh:r}=dP(),i=(c=t==null?void 0:t.warnings)!=null?c:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,o=(p=t==null?void 0:t.stats)!=null?p:{};return s.jsx(Kt,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:n,children:n?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[s.jsx(Db,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),s.jsx(Db,{label:"Creators tracked",value:a?a.toString():"0"}),s.jsx(Db,{label:"API lookups",value:`${(g=o.youtubeLookups)!=null?g:0}  ${(y=o.twitchLookups)!=null?y:0}`,hint:"YouTube  Twitch"})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?s.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):s.jsx("ul",{className:"space-y-2",children:i.map((_,w)=>s.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[s.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[_.creator,"  ",_.scope]}),s.jsx("div",{className:"text-xs text-[#B0C4D9]",children:_.message}),_.source&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:_.source})]},`${_.scope}-${w}`))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[s.jsxs("header",{className:"mb-3",children:[s.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),s.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),s.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[s.jsxs("li",{children:["Add the following environment variables (e.g. in ",s.jsx("code",{children:".env.local"}),"):",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),s.jsxs("li",{children:["Execute the sync script:",s.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),s.jsxs("li",{children:["Commit/deploy the generated ",s.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&s.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const Fx=`${ka}/admin/users`,Bje=25,gj=()=>{if(!Fx)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},uI=t=>typeof t!="number"?null:Xs.fromMillis(t),fj=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:uI(t.createdAt),lastLoginAt:uI(t.lastLoginAt),status:t.status,notes:t.notes}},$je=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:Bje)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const n=e.toString();return n?`?${n}`:""},vj=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function hI(t={}){var r;gj();const e=$je(t),n=`${Fx}${e}`;try{const i=await fetch(n,{credentials:"include"});if(!i.ok)throw await vj(i);const a=await i.json();return{users:a.users.map(fj),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function Oje(t){gj();const e=await fetch(`${Fx}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await vj(e);const n=await e.json();return fj(n.user)}async function Vje(t,e){gj();const n=await fetch(`${Fx}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw await vj(n);const r=await n.json();return fj(r.user)}const NP=`${ka}/admin/audit-events`,Uje=50,Gje=()=>{if(!NP)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},zje=t=>typeof t!="number"?null:Xs.fromMillis(t),Hje=t=>{var e,n;return{id:t.id,createdAt:zje(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(n=t.changes)!=null?n:{},context:t.context}},Wje=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:Uje)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const n=e.toString();return n?`?${n}`:""},Kje=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function Q1(t={}){var i;Gje();const e=`${NP}${Wje(t)}`,n=await fetch(e,{credentials:"include"});if(!n.ok)throw await Kje(n);const r=await n.json();return{events:r.events.map(Hje),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function qje(t,e=10){return Q1({targetUserId:t,limit:e})}const Qje=20,Yje=50,wp={borderColor:"#2B4C73",background:"#152A42"},kP={background:"#1A2F4A"};function Xje(){var c;const{status:t,user:e}=ea(),n=(c=e==null?void 0:e.roles)!=null?c:[],r=n.includes("admin"),i=r||n.includes("mod"),[a,o]=R.useState("users");return t==="loading"||t==="idle"?s.jsx(Kt,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[s.jsx(Ol,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?s.jsx(Kt,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:s.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[s.jsx(od,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:s.jsx(Jje,{activeTab:a,onChange:o}),children:a==="users"?s.jsx(Zje,{isAdmin:r}):s.jsx(e2e,{isAdmin:r,onSelectUser:u=>{o("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):s.jsx(Kt,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[s.jsx(U3,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),s.jsxs("p",{children:["You need at least the ",s.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function Jje({activeTab:t,onChange:e}){const n=[{key:"users",label:"Users",icon:s.jsx(Zv,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:s.jsx(_7,{className:"h-4 w-4"})}];return s.jsx("div",{className:"flex gap-2",children:n.map(r=>s.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function Zje({isAdmin:t}){const[e,n]=R.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=R.useState(""),a=X1(r,350);R.useEffect(()=>{n(ie=>ie.search===a?ie:{...ie,search:a})},[a]);const[o,c]=R.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=R.useState(0),p=R.useMemo(()=>({pageSize:Qje,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);R.useEffect(()=>{let ie=!1;return c(me=>({...me,loading:!0,error:null})),hI(p).then(me=>{ie||c({items:me.users,cursor:me.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(me=>{ie||c(ce=>({...ce,loading:!1,loadingMore:!1,error:me instanceof Error?me.message:"Failed to load users"}))}),()=>{ie=!0}},[p,u]);const g=()=>h(ie=>ie+1),y=async()=>{if(o.cursor){c(ie=>({...ie,loadingMore:!0,error:null}));try{const ie=await hI({...p,cursor:o.cursor});c(me=>({items:[...me.items,...ie.users],cursor:ie.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(ie){c(me=>{var ce;return{...me,loadingMore:!1,error:(ce=ie==null?void 0:ie.message)!=null?ce:"Failed to load additional users"}})}}},[_,w]=R.useState(null),[k,E]=R.useState(null),[P,L]=R.useState(!1),[N,v]=R.useState(null),[b,I]=R.useState(""),[j,S]=R.useState(!1),[C,M]=R.useState(null),[T,D]=R.useState(!1),[F,V]=R.useState(!1),[z,q]=R.useState([]),[H,K]=R.useState(!1),[ne,Y]=R.useState(null),G=R.useRef(null);R.useEffect(()=>{G.current=_},[_]);const X=R.useRef(!1);R.useEffect(()=>{X.current=j},[j]);const te=R.useCallback(async ie=>{var me;K(!0),Y(null);try{const ce=await qje(ie,12);G.current===ie&&q(ce.events)}catch(ce){G.current===ie&&Y((me=ce==null?void 0:ce.message)!=null?me:"Failed to load audit history")}finally{G.current===ie&&K(!1)}},[]);R.useEffect(()=>{var he;if(!_){E(null),I(""),S(!1),q([]),Y(null),V(!1);return}const ie=_,me=o.items.find(Ne=>Ne.id===ie);me?(E(me),I((he=me.notes)!=null?he:"")):(E(null),I("")),S(!1),L(!0),v(null);let ce=!1;return Oje(ie).then(Ne=>{var Te;ce||G.current!==ie||(E(Ne),I((Te=Ne.notes)!=null?Te:""),S(!1),L(!1))}).catch(Ne=>{var Te;ce||G.current!==ie||(L(!1),v((Te=Ne==null?void 0:Ne.message)!=null?Te:"Failed to load user"))}),te(ie),()=>{ce=!0}},[_,o.items,te]),R.useEffect(()=>{var me;if(!_)return;const ie=o.items.find(ce=>ce.id===_);ie&&(E(ce=>ce&&ce.id===ie.id?{...ce,...ie}:ie),X.current||I((me=ie.notes)!=null?me:""))},[o.items,_]);const se=R.useCallback(ie=>{c(me=>({...me,items:me.items.map(ce=>ce.id===ie.id?ie:ce)}))},[]),Z=R.useCallback(async ie=>{var me,ce;if(k){D(!0),M(null);try{const he=await Vje(k.id,ie);E(he),se(he),"notes"in ie&&(S(!1),I((me=he.notes)!=null?me:"")),await te(he.id)}catch(he){M((ce=he==null?void 0:he.message)!=null?ce:"Failed to update user")}finally{D(!1)}}},[k,te,se]),ve=ie=>{if(!k||!t||ie==="user")return;const me=new Set(k.roles);me.has(ie)?me.delete(ie):me.add(ie),me.add("user"),Z({roles:Array.from(me)})},Se=ie=>{!k||!t||Y1(k.status)===ie||ie==="banned"&&!window.confirm(`Ban ${jp(k)}? They will lose access to the control panel.`)||Z({status:ie})},J=ie=>{I(ie),S(!0)},ue=()=>{!k||!t||!j||Z({notes:b.trim().length?b:null})};return R.useEffect(()=>{if(typeof window=="undefined")return;const ie=me=>{const ce=me.detail;ce!=null&&ce.userId&&w(ce.userId)};return window.addEventListener("sf-admin-open-user",ie),()=>{window.removeEventListener("sf-admin-open-user",ie)}},[]),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:wp,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Zf,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:ie=>i(ie.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(Gf,{label:"Role",value:e.role,onChange:ie=>n(me=>({...me,role:ie})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),s.jsx(Gf,{label:"Status",value:e.status,onChange:ie=>n(me=>({...me,status:ie})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),s.jsx(Gf,{label:"Provider",value:e.provider,onChange:ie=>n(me=>({...me,provider:ie})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Jv,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[s.jsxs("div",{className:"rounded-2xl border",style:wp,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#B0C4D9]",children:[o.items.length," users ",e.search?"filtered":""]}),o.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(Ol,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:kP,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"User ID"}),s.jsx("th",{className:"px-4 py-2",children:"Display name"}),s.jsx("th",{className:"px-4 py-2",children:"Role"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Providers"}),s.jsx("th",{className:"px-4 py-2",children:"Created"}),s.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),s.jsx("tbody",{children:o.items.map(ie=>{var ce,he,Ne;const me=ie.id===_;return s.jsxs("tr",{onClick:()=>w(ie.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${me?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:ie.userId}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(TP,{url:EP(ie),name:jp(ie)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:jp(ie)}),(ce=ie.profile)!=null&&ce.displayName&&ie.profile.displayName!==ie.displayName?s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:ie.profile.displayName}):null]})]})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(IP,{role:AP(ie.roles)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(s2e,{status:Y1(ie.status)})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ov,{provider:"discord",active:!!((he=ie.providers)!=null&&he.discord)}),s.jsx(Ov,{provider:"google",active:!!((Ne=ie.providers)!=null&&Ne.google)})]})}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:wu(ie.createdAt)}),s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:wu(ie.lastLoginAt)})]},ie.id)})})]}),!o.loading&&!o.items.length&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),o.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(ap,{className:"h-3.5 w-3.5"}),o.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:o.cursor?"More users available":"End of list"}),s.jsx("button",{type:"button",onClick:y,disabled:!o.cursor||o.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:o.loadingMore?"Loading...":"Load more"})]})]}),s.jsx("aside",{className:"rounded-2xl border p-3",style:wp,children:k?s.jsx(t2e,{user:k,isAdmin:t,detailLoading:P,detailError:N,notesValue:b,notesDirty:j,onNotesChange:J,onNotesSave:ue,onRoleToggle:ve,onStatusChange:Se,actionError:C,actionPending:T,auditEntries:z,auditLoading:H,auditError:ne,onRefreshAudit:()=>k&&te(k.id),showRawJson:F,toggleRawJson:()=>V(ie=>!ie)}):s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[s.jsx($M,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function e2e({isAdmin:t,onSelectUser:e}){const[n,r]=R.useState({actor:"",target:"",action:"all"}),[i,a]=R.useState(""),[o,c]=R.useState(""),u=X1(i,350),h=X1(o,350);R.useEffect(()=>{r(P=>P.actor===u&&P.target===h?P:{...P,actor:u,target:h})},[u,h]);const[p,g]=R.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[y,_]=R.useState(0),w=R.useMemo(()=>{const P=n.action==="all"?void 0:n.action,L=n.actor.includes(":")?n.actor:void 0,N=n.target.includes(":")?n.target:void 0;return{limit:Yje,action:P,actorUserId:L,targetUserId:N}},[n]);R.useEffect(()=>{let P=!1;return g(L=>({...L,loading:!0,error:null})),Q1(w).then(L=>{P||g({items:L.events,cursor:L.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(L=>{P||g(N=>{var v;return{...N,loading:!1,loadingMore:!1,error:(v=L==null?void 0:L.message)!=null?v:"Failed to load audit log"}})}),()=>{P=!0}},[w,y]);const k=async()=>{if(p.cursor){g(P=>({...P,loadingMore:!0,error:null}));try{const P=await Q1({...w,cursor:p.cursor});g(L=>({items:[...L.items,...P.events],cursor:P.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(P){g(L=>{var N;return{...L,loadingMore:!1,error:(N=P==null?void 0:P.message)!=null?N:"Failed to load more events"}})}}},E=R.useMemo(()=>{const P=n.actor.trim().toLowerCase(),L=n.target.trim().toLowerCase();return p.items.filter(N=>{var I;const v=!P||N.actorUserId.toLowerCase().includes(P)||((I=N.actorDisplayName)!=null?I:"").toLowerCase().includes(P),b=!L||N.targetUserId.toLowerCase().includes(L);return v&&b})},[p.items,n.actor,n.target]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:wp,children:[s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Zf,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:P=>a(P.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[s.jsx(Zf,{className:"h-4 w-4 text-[#5C8BC6]"}),s.jsx("input",{type:"text",placeholder:"Target user id",value:o,onChange:P=>c(P.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),s.jsx(Gf,{label:"Action",value:n.action,onChange:P=>r(L=>({...L,action:P})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("button",{type:"button",onClick:()=>_(P=>P+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[s.jsx(Jv,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),s.jsxs("div",{className:"rounded-2xl border",style:wp,children:[s.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsxs("span",{className:"text-[#8AA5C4]",children:[E.length," events"]}),p.loading&&s.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[s.jsx(Ol,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[s.jsx("thead",{style:kP,children:s.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[s.jsx("th",{className:"px-4 py-2",children:"Time"}),s.jsx("th",{className:"px-4 py-2",children:"Actor"}),s.jsx("th",{className:"px-4 py-2",children:"Target User"}),s.jsx("th",{className:"px-4 py-2",children:"Action"}),s.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),s.jsx("tbody",{children:E.map(P=>{var L;return s.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[s.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:wu(P.createdAt)}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("div",{className:"text-white",children:(L=P.actorDisplayName)!=null?L:"N/A"}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:P.actorUserId})]}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(P.targetUserId),children:P.targetUserId})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx(CP,{action:P.action})}),s.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:P.summary})]},P.id)})})]}),!E.length&&!p.loading&&s.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),p.error&&s.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[s.jsx(ap,{className:"h-3.5 w-3.5"}),p.error]}),s.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[s.jsx("span",{className:"text-[#8AA5C4]",children:p.cursor?"More events available":"End of audit log"}),s.jsx("button",{type:"button",onClick:k,disabled:!p.cursor||p.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:p.loadingMore?"Loading...":"Load more"})]})]}),!t&&s.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function t2e({user:t,isAdmin:e,detailLoading:n,detailError:r,notesValue:i,notesDirty:a,onNotesChange:o,onNotesSave:c,onRoleToggle:u,onStatusChange:h,actionError:p,actionPending:g,auditEntries:y,auditLoading:_,auditError:w,onRefreshAudit:k,showRawJson:E,toggleRawJson:P}){var N,v;const L=AP(t.roles);return s.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[n&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[s.jsx(Ol,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&s.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[s.jsx(ap,{className:"h-3.5 w-3.5"}),r]}),s.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(TP,{url:EP(t),name:jp(t),size:56}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"truncate text-base text-white",children:jp(t)}),s.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),s.jsxs("div",{className:"mt-1 flex gap-1",children:[s.jsx(IP,{role:L}),s.jsx(Ov,{provider:"discord",active:!!((N=t.providers)!=null&&N.discord)}),s.jsx(Ov,{provider:"google",active:!!((v=t.providers)!=null&&v.google)})]})]})]})}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(b=>s.jsx("button",{type:"button",onClick:()=>u(b),disabled:!e||b==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(b)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:b},b))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),s.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(b=>s.jsx("button",{type:"button",onClick:()=>h(b),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${Y1(t.status)===b?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:b},b))})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&s.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),s.jsx("textarea",{value:i,onChange:b=>o(b.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),s.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ol,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&s.jsx("button",{type:"button",onClick:c,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),p&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(ap,{className:"h-3 w-3"}),p]})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),s.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsx(Jv,{className:"h-3 w-3"}),"Refresh"]})]}),_&&s.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[s.jsx(Ol,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),w&&s.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[s.jsx(ap,{className:"h-3 w-3"}),w]}),!_&&!y.length&&s.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),s.jsx("ul",{className:"space-y-2",children:y.map(b=>{var I;return s.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[s.jsx("span",{children:wu(b.createdAt)}),s.jsx(CP,{action:b.action})]}),s.jsx("div",{className:"mt-1 text-white",children:(I=b.actorDisplayName)!=null?I:b.actorUserId}),s.jsx("div",{className:"text-[#C8D6EC]",children:b.summary})]},b.id)})})]}),s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),s.jsxs("button",{type:"button",onClick:P,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[s.jsx(B7,{className:"h-3 w-3"}),E?"Hide raw JSON":"Show raw JSON"]})]}),s.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[s.jsx(gf,{label:"Created",value:wu(t.createdAt)}),s.jsx(gf,{label:"Last login",value:wu(t.lastLoginAt)}),s.jsx(gf,{label:"Primary provider",value:t.primaryProvider}),s.jsx(gf,{label:"Roles",value:t.roles.join(", ")})]}),E&&s.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function CP({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return s.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function gf({label:t,value:e}){return e?s.jsxs("div",{className:"flex justify-between gap-2",children:[s.jsx("span",{className:"text-[#6E86A6]",children:t}),s.jsx("span",{className:"text-white",children:e})]}):null}function Gf({label:t,value:e,options:n,onChange:r}){return s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[#8AA5C4]",children:t}),s.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:n.map(i=>s.jsx("option",{value:i.value,children:i.label},i.value))})]})}function TP({url:t,name:e,size:n=32}){return t?s.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:n,height:n,borderColor:"#2B4C73"}}):s.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:n,height:n,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function IP({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return s.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function s2e({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:s.jsx(MM,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:s.jsx(od,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:s.jsx(NM,{className:"h-3 w-3"})}},{label:n,color:r,icon:i}=e[t];return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,n]})}function Ov({provider:t,active:e}){const n=t==="discord"?"D":"G";return s.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:n})}function AP(t){const e=["admin","mod","creator","user"];for(const n of e)if(t.includes(n))return n;return"user"}function jp(t){var e,n,r,i,a,o,c,u,h;return(h=(u=(a=(n=t.displayName)!=null?n:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(c=(o=t.providers)==null?void 0:o.google)==null?void 0:c.displayName)!=null?h:t.userId}function EP(t){var e,n,r,i,a,o,c;return(c=(o=(r=t.avatarUrl)!=null?r:(n=(e=t.providers)==null?void 0:e.discord)==null?void 0:n.avatarUrl)!=null?o:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?c:null}function Y1(t){return t!=null?t:"active"}function wu(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function X1(t,e){const[n,r]=R.useState(t);return R.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),n}function n2e(){return s.jsx(Kt,{title:"Einstellungen",subtitle:"Profil, Sicherheit, Anzeige",centerFramed:!0,children:s.jsx("div",{className:"space-y-4",children:s.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42"},children:[s.jsx("h3",{className:"mb-2 text-sm",style:{color:"#F5F9FF"},children:"Profil"}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["Anzeigename",s.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]}),s.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["E-Mail",s.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]})]})]})})})}const r2e="_page_rpt6g_1",i2e="_tabs_rpt6g_17",a2e="_tab_rpt6g_17",o2e="_tabActive_rpt6g_71",l2e="_banner_rpt6g_87",c2e="_bannerSuccess_rpt6g_101",d2e="_bannerError_rpt6g_113",u2e="_card_rpt6g_125",h2e="_cardTitle_rpt6g_145",p2e="_settingsForm_rpt6g_159",m2e="_formRow_rpt6g_173",g2e="_selectInput_rpt6g_185",f2e="_checkboxRow_rpt6g_203",v2e="_settingsFooter_rpt6g_227",x2e="_inlineStatus_rpt6g_245",y2e="_helperText_rpt6g_259",b2e="_secondaryButton_rpt6g_271",_2e="_cardSubtitle_rpt6g_297",w2e="_identityHeader_rpt6g_309",j2e="_identityAvatar_rpt6g_323",S2e="_identityName_rpt6g_337",N2e="_identityProvider_rpt6g_351",k2e="_identityForm_rpt6g_363",C2e="_nameInputWrap_rpt6g_379",T2e="_nameLabel_rpt6g_395",I2e="_nameInput_rpt6g_379",A2e="_nameSaveButton_rpt6g_427",E2e="_feedbackError_rpt6g_471",R2e="_feedbackSuccess_rpt6g_483",P2e="_metaGrid_rpt6g_495",L2e="_metaItem_rpt6g_507",D2e="_metaLabel_rpt6g_521",M2e="_metaValue_rpt6g_535",F2e="_serviceList_rpt6g_549",B2e="_serviceRow_rpt6g_559",$2e="_serviceName_rpt6g_587",O2e="_serviceStatus_rpt6g_601",V2e="_serviceAction_rpt6g_613",U2e="_securityText_rpt6g_645",G2e="_securityNote_rpt6g_657",z2e="_logoutButton_rpt6g_669",H2e="_loadingState_rpt6g_701",W2e="_emptyState_rpt6g_703",K2e="_emptyStateTitle_rpt6g_721",q2e="_emptyStateText_rpt6g_733",Q2e="_primaryButton_rpt6g_745",Ke={page:r2e,tabs:i2e,tab:a2e,tabActive:o2e,banner:l2e,bannerSuccess:c2e,bannerError:d2e,card:u2e,cardTitle:h2e,settingsForm:p2e,formRow:m2e,selectInput:g2e,checkboxRow:f2e,settingsFooter:v2e,inlineStatus:x2e,helperText:y2e,secondaryButton:b2e,cardSubtitle:_2e,identityHeader:w2e,identityAvatar:j2e,identityName:S2e,identityProvider:N2e,identityForm:k2e,nameInputWrap:C2e,nameLabel:T2e,nameInput:I2e,nameSaveButton:A2e,feedbackError:E2e,feedbackSuccess:R2e,metaGrid:P2e,metaItem:L2e,metaLabel:D2e,metaValue:M2e,serviceList:F2e,serviceRow:B2e,serviceName:$2e,serviceStatus:O2e,serviceAction:V2e,securityText:U2e,securityNote:G2e,logoutButton:z2e,loadingState:H2e,emptyState:W2e,emptyStateTitle:K2e,emptyStateText:q2e,primaryButton:Q2e},Y2e="_header_t1aqh_1",X2e="_headerTexts_t1aqh_17",J2e="_tableWrap_t1aqh_31",Z2e="_table_t1aqh_31",eSe="_tableRow_t1aqh_87",tSe="_dateCell_t1aqh_95",sSe="_actionsHeader_t1aqh_103",nSe="_actionCell_t1aqh_111",rSe="_unlinkButton_t1aqh_119",iSe="_unlinkIcon_t1aqh_175",aSe="_muted_t1aqh_185",oSe="_emptyState_t1aqh_193",lSe="_emptyTitle_t1aqh_209",cSe="_emptyDescription_t1aqh_221",dSe="_emptyCta_t1aqh_233",uSe="_helpAccordion_t1aqh_277",hSe="_helpToggle_t1aqh_291",pSe="_helpToggleOpen_t1aqh_331",mSe="_helpToggleAction_t1aqh_339",gSe="_helpBody_t1aqh_351",fSe="_helpList_t1aqh_359",vSe="_helpListItem_t1aqh_377",xSe="_helpFootnote_t1aqh_385",ySe="_confirmBackdrop_t1aqh_397",bSe="_confirmDialog_t1aqh_419",_Se="_confirmTitle_t1aqh_443",wSe="_confirmText_t1aqh_457",jSe="_confirmName_t1aqh_473",SSe="_confirmMeta_t1aqh_483",NSe="_errorText_t1aqh_491",kSe="_confirmActions_t1aqh_503",CSe="_cancelButton_t1aqh_517",TSe="_confirmButton_t1aqh_519",cs={header:Y2e,headerTexts:X2e,tableWrap:J2e,table:Z2e,tableRow:eSe,dateCell:tSe,actionsHeader:sSe,actionCell:nSe,unlinkButton:rSe,unlinkIcon:iSe,muted:aSe,emptyState:oSe,emptyTitle:lSe,emptyDescription:cSe,emptyCta:dSe,helpAccordion:uSe,helpToggle:hSe,helpToggleOpen:pSe,helpToggleAction:mSe,helpBody:gSe,helpList:fSe,helpListItem:vSe,helpFootnote:xSe,confirmBackdrop:ySe,confirmDialog:bSe,confirmTitle:_Se,confirmText:wSe,confirmName:jSe,confirmMeta:SSe,errorText:NSe,confirmActions:kSe,cancelButton:CSe,confirmButton:TSe},ISe=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},Mb=t=>{var n;const e=(n=t.name)==null?void 0:n.trim();return e||(t.playerId!==void 0&&t.playerId!==null?`#${t.playerId}`:"-")},ASe=({user:t,refreshSession:e,openHelp:n=!1})=>{const{t:r}=Hs(),i=R.useMemo(()=>{var C;return(C=t.linkedPlayers)!=null?C:[]},[t.linkedPlayers]),[a,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(null),[g,y]=R.useState(null),[_,w]=R.useState(()=>n||i.length===0),k=R.useMemo(()=>`${ka}/user/unlink-character`,[]);W.useEffect(()=>{n&&w(!0)},[n]),W.useEffect(()=>{i.length===0&&w(!0)},[i.length]);const E=async()=>{o(!0);try{await e({silent:!0})}catch(C){console.error("[Account] Failed to refresh linked players",C)}finally{o(!1)}},P=C=>{p(C),y(null)},L=()=>{c||(p(null),y(null))},N=async()=>{var C;if(h){if(!k){y(r("account.connectedCharacters.errors.serviceUnavailable","Auth service is not configured for unlinking."));return}u(!0),o(!0),y(null);try{const M=await fetch(k,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:h.playerId,server:h.server})});if(!M.ok){const T=await M.json().catch(()=>null),D=(T==null?void 0:T.error)||(T==null?void 0:T.message)||r("account.connectedCharacters.errors.unlink","Could not unlink character.");throw new Error(D)}await e({silent:!0}),p(null)}catch(M){const T=(C=M==null?void 0:M.message)!=null?C:r("account.connectedCharacters.errors.unlink","Could not unlink character.");y(T)}finally{u(!1),o(!1)}}},v=C=>C?C.startsWith("discord_")?r("account.connectedCharacters.method.discord","Discord bot"):C:"-",b=R.useMemo(()=>[r("account.connectedCharacters.help.steps.link",'Link a character via the Discord bot using the "!connect char" command.'),r("account.connectedCharacters.help.steps.verify","We match the character to your latest verified scan; keep your game data up to date."),r("account.connectedCharacters.help.steps.refresh","After linking, click Refresh here to sync the latest characters from the auth service."),r("account.connectedCharacters.help.steps.unlink","You can unlink any character in the Actions column; the source column shows how it was linked.")],[r]),I=()=>{const C="connected-characters-help";return s.jsxs("div",{className:cs.helpAccordion,children:[s.jsxs("button",{type:"button",className:`${cs.helpToggle} ${_?cs.helpToggleOpen:""}`,"aria-expanded":_,"aria-controls":C,onClick:()=>w(M=>!M),children:[s.jsx("span",{children:r("account.connectedCharacters.help.title","How does linking work?")}),s.jsx("span",{className:cs.helpToggleAction,children:_?r("account.connectedCharacters.help.hide","Hide"):r("account.connectedCharacters.help.show","Show")})]}),_&&s.jsxs("div",{id:C,className:cs.helpBody,children:[s.jsx("ul",{className:cs.helpList,children:b.map((M,T)=>s.jsx("li",{className:cs.helpListItem,children:M},`help-step-${T}`))}),s.jsx("p",{className:cs.helpFootnote,children:r("account.connectedCharacters.help.footnote","Tip: Click Refresh after linking or unlinking to update this table.")})]})]})},j=()=>s.jsx("div",{className:cs.tableWrap,children:s.jsxs("table",{className:cs.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:r("account.connectedCharacters.columns.character","Character")}),s.jsx("th",{children:r("account.connectedCharacters.columns.server","Server")}),s.jsx("th",{children:r("account.connectedCharacters.columns.playerId","Player ID")}),s.jsx("th",{children:r("account.connectedCharacters.columns.class","Class")}),s.jsx("th",{children:r("account.connectedCharacters.columns.level","Level")}),s.jsx("th",{children:r("account.connectedCharacters.columns.guild","Guild")}),s.jsx("th",{children:r("account.connectedCharacters.columns.lastVerified","Last linked")}),s.jsx("th",{children:r("account.connectedCharacters.columns.source","Source")}),s.jsx("th",{className:cs.actionsHeader,children:r("account.connectedCharacters.columns.actions","Actions")})]})}),s.jsx("tbody",{children:i.map((C,M)=>{var q,H,K,ne;const T=`${(q=C.server)!=null?q:"unknown"}-${(H=C.playerId)!=null?H:M}`,D=(K=C.level)!=null?K:"-",F=C.guildName||"-",V=C.class||"-",z=v(C.method);return s.jsxs("tr",{className:cs.tableRow,children:[s.jsx("td",{children:Mb(C)}),s.jsx("td",{children:C.server||"-"}),s.jsx("td",{children:(ne=C.playerId)!=null?ne:"-"}),s.jsx("td",{className:C.class?void 0:cs.muted,children:V}),s.jsx("td",{className:typeof C.level!="number"?cs.muted:void 0,children:D}),s.jsx("td",{className:C.guildName?void 0:cs.muted,children:F}),s.jsx("td",{className:cs.dateCell,children:ISe(C.verifiedAt)}),s.jsx("td",{className:C.method?void 0:cs.muted,children:z}),s.jsx("td",{className:cs.actionCell,children:s.jsx("button",{type:"button",className:cs.unlinkButton,onClick:()=>P(C),title:r("account.connectedCharacters.actions.unlink","Disconnect character"),"aria-label":`${r("account.connectedCharacters.actions.unlink","Disconnect character")} ${Mb(C)}`,disabled:c||a,children:s.jsx("svg",{className:cs.unlinkIcon,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M9 4h6a1 1 0 0 1 1 1v2h5v2h-2.1l-1.05 11.2A2 2 0 0 1 15.86 22H8.14a2 2 0 0 1-1.99-1.8L5.1 9H3V7h5V5a1 1 0 0 1 1-1Zm5 2V6H10v2h4Zm-6.93 3 1.02 10.8a1 1 0 0 0 1 .9h7.72a1 1 0 0 0 1-.9L18.83 9ZM10 11v7h2v-7Zm4 0v7h2v-7Z"})})})})]},T)})})]})}),S=()=>{var M;if(!h)return null;const C="unlink-dialog-title";return s.jsx("div",{className:cs.confirmBackdrop,role:"dialog","aria-modal":"true","aria-labelledby":C,children:s.jsxs("div",{className:cs.confirmDialog,children:[s.jsx("h3",{id:C,className:cs.confirmTitle,children:r("account.connectedCharacters.confirmation.title","Are you sure you want to unlink this character?")}),s.jsxs("p",{className:cs.confirmText,children:[s.jsx("span",{className:cs.confirmName,children:Mb(h)}),s.jsxs("span",{className:cs.confirmMeta,children:[h.server||"-"," - #",(M=h.playerId)!=null?M:"-"]})]}),g&&s.jsx("p",{className:cs.errorText,children:g}),s.jsxs("div",{className:cs.confirmActions,children:[s.jsx("button",{type:"button",className:cs.cancelButton,onClick:L,disabled:c,children:r("account.connectedCharacters.confirmation.cancel","Cancel")}),s.jsx("button",{type:"button",className:cs.confirmButton,onClick:N,disabled:c,children:c?r("account.connectedCharacters.confirmation.confirming","Unlinking..."):r("account.connectedCharacters.confirmation.confirm","Yes, unlink")})]})]})})};return t?s.jsxs("section",{className:Ke.card,children:[s.jsxs("div",{className:cs.header,children:[s.jsxs("div",{className:cs.headerTexts,children:[s.jsx("h2",{className:Ke.cardTitle,children:r("account.connectedCharacters.title","Connected characters")}),s.jsx("p",{className:Ke.cardSubtitle,children:r("account.connectedCharacters.subtitle","These game characters are linked to your SFDataHub account.")})]}),s.jsx("button",{type:"button",className:Ke.secondaryButton,onClick:E,disabled:a,children:a?r("account.connectedCharacters.actions.refreshing","Refreshing..."):r("account.connectedCharacters.actions.refresh","Refresh")})]}),a&&s.jsx("p",{className:Ke.helperText,children:r("account.connectedCharacters.loading","Refreshing characters...")}),I(),!a&&i.length===0&&s.jsxs("div",{className:cs.emptyState,children:[s.jsx("p",{className:cs.emptyTitle,children:r("account.connectedCharacters.empty.title","No characters linked yet")}),s.jsx("p",{className:cs.emptyDescription,children:r("account.connectedCharacters.empty.description",'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.')}),s.jsx("button",{type:"button",className:cs.emptyCta,onClick:()=>w(!0),children:r("account.connectedCharacters.empty.cta","Click to learn how linking works")})]}),i.length>0&&j(),S()]}):null},RP="user_settings";async function pI(t){if(!t)return null;try{const e=ss(ft,RP,t),n=await sn(e);if(!n.exists())return null;const r=n.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function ESe(t,e){if(t)try{const n=ss(ft,RP,t);await zo(n,e,{merge:!0})}catch(n){throw console.error("[UserSettings] Failed to update settings",n),n}}const PP="user_tools_state";async function RSe(t){var e;if(!t)return null;try{const n=ss(ft,PP,t),r=await sn(n);return r.exists()&&(e=r.data())!=null?e:null}catch(n){return console.warn("[UserToolsSettings] Failed to load tools settings",n),null}}async function PSe(t,e){if(t)try{const n=ss(ft,PP,t),r={...e,updatedAt:new Date().toISOString()};await zo(n,r,{merge:!0})}catch(n){throw console.error("[UserToolsSettings] Failed to save tools settings",n),n}}const LSe="https://i.pravatar.cc/72",ff=`${ka}/auth/account/profile`,Fb=`${ka}/auth/google/link/start`,mI=3,gI=32,DSe=["overview","settings","tools","connected-characters"],fI=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},MSe=()=>{const{status:t,user:e,logout:n,refreshSession:r}=ea(),i=Xr(),a=ir(),{t:o,i18n:c}=Hs(),[u,h]=R.useState("overview"),[p,g]=R.useState(null),[y,_]=R.useState(null),[w,k]=R.useState(!1),[E,P]=R.useState(null),[L,N]=R.useState(!1),[v,b]=R.useState(!1),[I,j]=R.useState(null),[S,C]=R.useState(null),[M,T]=R.useState(!0),[D,F]=R.useState(!1),[V,z]=R.useState(null),[q,H]=R.useState(!1),K=R.useMemo(()=>{const Ue=new URLSearchParams(a.search);return Ue.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:Ue.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),ne=t==="loading"||t==="idle",Y=t==="authenticated"&&!!e,G=e==null?void 0:e.id,X=R.useMemo(()=>new URLSearchParams(a.search),[a.search]),te=X.get("tab"),se=X.get("openHelp")==="1",Z=R.useMemo(()=>({language:c.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[c.language]);R.useEffect(()=>{if(!G){g(null),_(null),P(null),k(!1),j(null),C(null),T(!1),F(!1),z(null),H(!1);return}let Ue=!0;return(async()=>{k(!0),P(null),b(!1);try{const He=await pI(G),St=He?{...Z,...He}:Z;if(!Ue)return;g(St),_(St)}catch(He){if(!Ue)return;P(o("account.settings.error","Could not load settings."))}finally{Ue&&k(!1)}})(),()=>{Ue=!1}},[G,Z,o]),R.useEffect(()=>{if(!G)return;let Ue=!0;const Ee={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{T(!0),z(null),H(!1);try{const St=await RSe(G);if(!Ue)return;const Ct=St?{...Ee,...St}:Ee;j(Ct),C(Ct)}catch(St){if(!Ue)return;z(o("account.tools.loadError","Could not load tools settings."))}finally{Ue&&T(!1)}})(),()=>{Ue=!1}},[G,o]),R.useEffect(()=>{te&&DSe.includes(te)&&te!==u&&h(te)},[te,u]);const ve=(Ue,Ee)=>{const He=new URLSearchParams(a.search);He.set("tab",Ue),Ee!=null&&Ee.openHelp?He.set("openHelp","1"):He.delete("openHelp");const St=He.toString();i({pathname:a.pathname,search:St?`?${St}`:""},{replace:!0})},Se=()=>{typeof window!="undefined"?window.dispatchEvent(new CustomEvent("sfh:openLoginModal")):i("/login")},J=async()=>{await n(),i("/")},ue=()=>{if(!Fb){window.alert("Auth service is not configured for Google linking.");return}window.location.href=Fb},ie=()=>s.jsx("div",{className:Ke.loadingState,children:"Checking session..."}),me=()=>s.jsxs("div",{className:Ke.emptyState,children:[s.jsx("p",{className:Ke.emptyStateTitle,children:"You are not signed in."}),s.jsx("p",{className:Ke.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),s.jsx("button",{type:"button",className:Ke.primaryButton,onClick:Se,children:"Go to sign-in"})]}),ce=()=>{if(!K)return null;const Ue=K.type==="success"?`${Ke.banner} ${Ke.bannerSuccess}`:`${Ke.banner} ${Ke.bannerError}`;return s.jsx("div",{className:Ue,children:K.message})},he=()=>{var Gt,Ps,_t;if(!e)return null;const Ue=(Gt=e.providers)==null?void 0:Gt.discord,Ee=(Ps=e.providers)==null?void 0:Ps.google,He=!!Ue,St=!!Ee,Ct=!!Fb,ns=Ct?St?Ee!=null&&Ee.displayName?`Connected as ${Ee.displayName}`:"Connected":"Not connected":"Auth service not configured",Rt=[{key:"discord",name:"Discord",status:He?`Connected as ${(_t=Ue==null?void 0:Ue.displayName)!=null?_t:e.displayName}`:"Not connected",actionLabel:He?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:ns,actionLabel:St?"Connected":"Connect",disabled:St||!Ct,onClick:St||!Ct?void 0:ue},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return s.jsxs("section",{className:Ke.card,children:[s.jsx("h2",{className:Ke.cardTitle,children:"Connected services"}),s.jsx("p",{className:Ke.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),s.jsx("div",{className:Ke.serviceList,children:Rt.map(Ae=>s.jsxs("div",{className:Ke.serviceRow,children:[s.jsxs("div",{children:[s.jsx("p",{className:Ke.serviceName,children:Ae.name}),s.jsx("p",{className:Ke.serviceStatus,children:Ae.status})]}),s.jsx("button",{type:"button",className:Ke.serviceAction,disabled:Ae.disabled,onClick:Ae.onClick,children:Ae.actionLabel})]},Ae.key))})]})},Ne=()=>s.jsxs("section",{className:Ke.card,children:[s.jsx("h2",{className:Ke.cardTitle,children:"Security & session"}),s.jsx("p",{className:Ke.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),s.jsx("p",{className:Ke.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),s.jsx("button",{type:"button",className:Ke.logoutButton,onClick:J,children:"Log out from this device"}),s.jsx("p",{className:Ke.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),Te=(Ue,Ee)=>{p&&(g(He=>({...He!=null?He:Z,[Ue]:Ee})),b(!1))},xe=!!(p&&y&&JSON.stringify(p)!==JSON.stringify(y)),Ie=!!(I&&S&&JSON.stringify(I)!==JSON.stringify(S)),$e=async()=>{if(!(!G||!p||L||!xe))try{N(!0),P(null),await ESe(G,p),_(p),b(!0)}catch(Ue){P(o("account.settings.saveError","Could not save settings. Please try again."))}finally{N(!1)}},Xe=(Ue,Ee)=>{I&&(j(He=>({...He!=null?He:{},[Ue]:Ee})),H(!1))},be=async()=>{if(!(!G||!I||D||!Ie))try{F(!0),z(null),await PSe(G,I),C(I),H(!0)}catch(Ue){z(o("account.tools.save.error","Could not save settings. Please try again."))}finally{F(!1)}},Be=()=>{var Ue,Ee;return s.jsxs("section",{className:Ke.card,children:[s.jsx("h2",{className:Ke.cardTitle,children:o("account.settings.title","Settings")}),s.jsx("p",{className:Ke.cardSubtitle,children:o("account.settings.subtitle","Configure your personal preferences.")}),w&&s.jsx("p",{className:Ke.helperText,children:o("account.settings.loading","Loading settings...")}),E&&s.jsxs("div",{className:Ke.feedbackError,children:[s.jsx("p",{children:E}),s.jsx("button",{type:"button",className:Ke.secondaryButton,onClick:()=>{G&&(P(null),b(!1),k(!0),pI(G).then(He=>{const St=He?{...Z,...He}:Z;g(St),_(St)}).catch(()=>{P(o("account.settings.error","Could not load settings."))}).finally(()=>k(!1)))},children:o("account.settings.retry","Retry")})]}),p&&!w&&s.jsxs("div",{className:Ke.settingsForm,children:[s.jsxs("div",{className:Ke.formRow,children:[s.jsx("label",{className:Ke.nameLabel,htmlFor:"settings-language",children:o("account.settings.language.label","Preferred language")}),s.jsxs("select",{id:"settings-language",className:Ke.selectInput,value:(Ue=p.language)!=null?Ue:Z.language,onChange:He=>Te("language",He.target.value),children:[s.jsx("option",{value:"en",children:o("topbar.lang_en","English")}),s.jsx("option",{value:"de",children:o("topbar.lang_de","Deutsch")})]})]}),s.jsxs("div",{className:Ke.formRow,children:[s.jsx("label",{className:Ke.nameLabel,htmlFor:"settings-section",children:o("account.settings.defaultSection.label","Default section")}),s.jsxs("select",{id:"settings-section",className:Ke.selectInput,value:(Ee=p.defaultSection)!=null?Ee:Z.defaultSection,onChange:He=>Te("defaultSection",He.target.value),children:[s.jsx("option",{value:"home",children:o("nav.home","Home")}),s.jsx("option",{value:"toplists",children:o("nav.toplists","Top Lists")}),s.jsx("option",{value:"guilds",children:o("nav.guilds","Guilds")}),s.jsx("option",{value:"tools",children:o("nav.tools","Tools")}),s.jsx("option",{value:"community",children:o("nav.community","Community")})]})]}),s.jsxs("label",{className:Ke.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!p.compactTables,onChange:He=>Te("compactTables",He.target.checked)}),s.jsx("span",{children:o("account.settings.compactTables.label","Use compact table layout")})]}),s.jsxs("label",{className:Ke.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!p.showExperimentalFeatures,onChange:He=>Te("showExperimentalFeatures",He.target.checked)}),s.jsx("span",{children:o("account.settings.experimental.label","Enable experimental features")})]})]}),s.jsxs("div",{className:Ke.settingsFooter,children:[s.jsxs("div",{className:Ke.inlineStatus,children:[v?s.jsx("span",{className:Ke.feedbackSuccess,children:o("account.settings.saved","Settings saved.")}):xe?null:s.jsx("span",{className:Ke.helperText,children:o("account.settings.noChanges","No changes to save.")}),L&&s.jsx("span",{className:Ke.helperText,children:o("account.settings.saving","Saving...")})]}),s.jsx("button",{type:"button",className:Ke.primaryButton,disabled:!xe||L||!p,onClick:$e,children:o("account.settings.save","Save settings")})]})]})},Ve=()=>{const Ue=[{key:"overview",label:o("account.tabs.overview","Overview")},{key:"settings",label:o("account.tabs.settings","Settings")},{key:"tools",label:o("account.tabs.tools","Tools")},{key:"connected-characters",label:o("account.tabs.connectedCharacters","Connected characters")}];return s.jsx("div",{className:Ke.tabs,role:"tablist","aria-label":"Account sections",children:Ue.map(Ee=>{const He=u===Ee.key;return s.jsx("button",{type:"button",className:`${Ke.tab} ${He?Ke.tabActive:""}`,onClick:()=>{h(Ee.key),ve(Ee.key,{openHelp:Ee.key==="connected-characters"&&se})},role:"tab","aria-selected":He,children:Ee.label},Ee.key)})})},nt=()=>{var Ue;if(!e)return null;switch(u){case"overview":return s.jsxs(s.Fragment,{children:[s.jsx(FSe,{user:e,refreshSession:r}),he(),Ne()]});case"settings":return Be();case"tools":return s.jsxs("section",{className:Ke.card,children:[s.jsx("h2",{className:Ke.cardTitle,children:o("account.tools.title","Tools settings")}),s.jsx("p",{className:Ke.cardSubtitle,children:o("account.tools.subtitle","Configure how tools behave for your account.")}),M&&s.jsx("p",{className:Ke.helperText,children:o("account.tools.loading","Loading tools settings...")}),V&&s.jsx("p",{className:Ke.feedbackError,children:V}),I&&!M&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Ke.settingsForm,children:[s.jsxs("div",{className:Ke.formRow,children:[s.jsx("label",{className:Ke.nameLabel,htmlFor:"tools-default-set",children:o("account.tools.defaultSet.label","Default set ID")}),s.jsx("input",{id:"tools-default-set",type:"text",className:Ke.nameInput,value:(Ue=I.defaultSetId)!=null?Ue:"",onChange:Ee=>Xe("defaultSetId",Ee.target.value),placeholder:o("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),s.jsxs("label",{className:Ke.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!I.showToolsIntro,onChange:Ee=>Xe("showToolsIntro",Ee.target.checked)}),s.jsx("span",{children:o("account.tools.showIntro.label","Show tools intro")})]}),s.jsxs("label",{className:Ke.checkboxRow,children:[s.jsx("input",{type:"checkbox",checked:!!I.enableExperimentalTools,onChange:Ee=>Xe("enableExperimentalTools",Ee.target.checked)}),s.jsx("span",{children:o("account.tools.experimental.label","Enable experimental tools")})]})]}),s.jsxs("div",{className:Ke.settingsFooter,children:[s.jsxs("div",{className:Ke.inlineStatus,children:[q?s.jsx("span",{className:Ke.feedbackSuccess,children:o("account.tools.save.success","Settings saved.")}):Ie?null:s.jsx("span",{className:Ke.helperText,children:o("account.tools.save.noChanges","No changes to save.")}),D&&s.jsx("span",{className:Ke.helperText,children:o("account.tools.save.saving","Saving...")})]}),s.jsx("button",{type:"button",className:Ke.primaryButton,disabled:M||D||!Ie||!I,onClick:be,children:o("account.tools.save.cta","Save settings")})]})]})]});case"connected-characters":return s.jsx(ASe,{user:e,refreshSession:r,openHelp:se});default:return null}},ht=()=>ne?ie():Y?s.jsxs(s.Fragment,{children:[Ve(),nt()]}):me();return s.jsx(Kt,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:s.jsxs("div",{className:Ke.page,children:[ce(),ht()]})})};function FSe({user:t,refreshSession:e}){var I;const[n,r]=R.useState(()=>{var j;return(j=t==null?void 0:t.displayName)!=null?j:""}),[i,a]=R.useState(!1),[o,c]=R.useState(null),[u,h]=R.useState(!1),p=(t==null?void 0:t.avatarUrl)||LSe,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",y=(I=t==null?void 0:t.displayName)!=null?I:"",_=n.trim(),w=_.length===0||_.length>=mI&&_.length<=gI,k=!!t&&_.length>0&&_!==y,E=!!(ff&&w&&k&&!i),P=_.length>0&&!w?`Name must be between ${mI} and ${gI} characters.`:null;R.useEffect(()=>{var j;r((j=t==null?void 0:t.displayName)!=null?j:""),h(!1),c(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const L=R.useMemo(()=>{var j;return t?[{label:"SFDataHub ID",value:t.id},(j=t.roles)!=null&&j.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:fI(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:fI(t.lastLoginAt)}:null].filter(S=>!!(S!=null&&S.value)):[]},[t]),N=async()=>{var j,S;if(!E||!ff){ff||c("Auth service is not configured.");return}try{a(!0),c(null),h(!1);const C=await fetch(ff,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:_})});if(!C.ok){const M=await C.json().catch(()=>null);throw new Error((j=M==null?void 0:M.error)!=null?j:"Failed to update name.")}await e(),h(!0),r(_)}catch(C){const M=(S=C==null?void 0:C.message)!=null?S:"Failed to update name.";c(M)}finally{a(!1)}},v=j=>{j.key==="Enter"&&(j.preventDefault(),E&&N())},b=()=>{E&&N()};return t?s.jsxs("section",{className:Ke.card,children:[s.jsxs("div",{className:Ke.identityHeader,children:[s.jsx("img",{src:p,alt:"",className:Ke.identityAvatar}),s.jsxs("div",{children:[s.jsx("p",{className:Ke.identityName,children:t.displayName||"Unbenannter Nutzer"}),s.jsxs("p",{className:Ke.identityProvider,children:[g," sign-in"]})]}),s.jsx("span",{className:Ke.statusBadge,children:"Verified"})]}),s.jsxs("div",{className:Ke.identityForm,children:[s.jsxs("div",{className:Ke.nameInputWrap,children:[s.jsx("label",{className:Ke.nameLabel,children:"Display name"}),s.jsx("input",{type:"text",className:Ke.nameInput,value:n,onChange:j=>r(j.target.value),onKeyDown:v,onBlur:b,placeholder:"Enter your display name"})]}),s.jsx("button",{type:"button",className:Ke.nameSaveButton,disabled:!E,onClick:N,children:i?"Saving...":"Save"})]}),P&&s.jsx("p",{className:Ke.feedbackError,children:P}),o&&s.jsx("p",{className:Ke.feedbackError,children:o}),u&&s.jsx("p",{className:Ke.feedbackSuccess,children:"Name updated."}),L.length>0&&s.jsx("div",{className:Ke.metaGrid,children:L.map(j=>s.jsxs("div",{className:Ke.metaItem,children:[s.jsx("span",{className:Ke.metaLabel,children:j.label}),s.jsx("span",{className:Ke.metaValue,children:j.value})]},j.label))})]}):null}const jt={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function BSe(){const{t}=Hs();return s.jsx("div",{style:jt.wrap,children:s.jsxs("div",{style:jt.grid,children:[s.jsxs("aside",{style:jt.tile,children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),s.jsx("p",{style:jt.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),s.jsxs("nav",{children:[s.jsx("div",{style:jt.groupLabel,children:"Allgemein"}),s.jsx(Cs,{to:"list-views",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"List-View Switcher"}),s.jsx(Cs,{to:"rescan-widget",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Rescan Widget (auto)"}),s.jsx(Cs,{to:"upload-sim",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Upload Simulator"}),s.jsx(Cs,{to:"hud/game-buttons",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"HUD  Game Buttons"}),s.jsx(Cs,{to:"theme-maker",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Theme / Template Maker"}),s.jsx(Cs,{to:"theme-maker-pro",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Theme / Template Maker  Pro"}),s.jsx(Cs,{to:"gamified",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified",{defaultValue:"Gamified"})}),s.jsx(Cs,{to:"gamified-2",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified2",{defaultValue:"Gamified 2"})}),s.jsx(Cs,{to:"gamified-3",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified3",{defaultValue:"Gamified 3"})}),s.jsx(Cs,{to:"gamified-4",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified4",{defaultValue:"Gamified 4"})}),s.jsx(Cs,{to:"gamified-5",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified5",{defaultValue:"Gamified 5"})}),s.jsx(Cs,{to:"gamified-6",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified6",{defaultValue:"Gamified 6"})}),s.jsx(Cs,{to:"gamified-7",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified7",{defaultValue:"Gamified 7"})}),s.jsx(Cs,{to:"gamified-8",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:t("playground.tabs.gamified8",{defaultValue:"Gamified 8"})}),s.jsx("div",{style:jt.groupLabel,children:"Templates"}),s.jsx(Cs,{to:"templates/content-shell",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"ContentShell Template"}),s.jsx(Cs,{to:"templates/blank",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Leere Vorlage"}),s.jsx(Cs,{to:"templates/blank-alt",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Leere Vorlage (Neu)"}),s.jsx(Cs,{to:"templates/blank-layout-2",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Leere Vorlage  Layout 2"}),s.jsx(Cs,{to:"templates/blank-layout-3",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Leere Vorlage  Layout 3"}),s.jsx(Cs,{to:"templates/blank-layout-4",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"Leere Vorlage  Layout 4"}),s.jsx("div",{style:jt.groupLabel,children:"Guide Hub Demos"}),s.jsx(Cs,{to:"am-rune-bonuses-demos",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),s.jsx("div",{style:jt.groupLabel,children:"Graphics / Portraits"}),s.jsx(Cs,{to:"portrait-maker",style:({isActive:e})=>({...jt.link,...e?jt.active:{}}),children:"PortraitMaker Demo"})]})]}),s.jsx("section",{style:jt.tile,children:s.jsx(E3,{})})]})})}const $Se="_page_1kokx_1",OSe="_topBar_1kokx_17",VSe="_tabs_1kokx_31",USe="_tab_1kokx_31",GSe="_tabActive_1kokx_63",zSe="_searchWrap_1kokx_73",HSe="_input_1kokx_85",WSe="_stickyIcons_1kokx_105",KSe="_iconBtn_1kokx_129",qSe="_tableWrap_1kokx_161",QSe="_table_1kokx_161",YSe="_th_1kokx_181",XSe="_td_1kokx_181",JSe="_row_1kokx_201",ZSe="_chips_1kokx_219",eNe="_chip_1kokx_219",tNe="_badges_1kokx_249",sNe="_badge_1kokx_249",nNe="_badgeMax_1kokx_275",rNe="_badgeAchiev_1kokx_277",iNe="_badgeX2_1kokx_279",aNe="_badgeX12_1kokx_281",oNe="_badgeX60_1kokx_283",lNe="_section_1kokx_289",cNe="_sectionHeader_1kokx_297",dNe="_cardList_1kokx_315",uNe="_card_1kokx_315",hNe="_cardMax_1kokx_353",pNe="_iconXL_1kokx_355",mNe="_split_1kokx_369",gNe="_left_1kokx_379",fNe="_leftBtn_1kokx_399",vNe="_leftBtnActive_1kokx_411",xNe="_detail_1kokx_413",yNe="_grid_1kokx_433",bNe="_tile_1kokx_443",_Ne="_drawer_1kokx_457",wNe="_timeline_1kokx_487",jNe="_node_1kokx_493",SNe="_dot_1kokx_501",Lt={page:$Se,topBar:OSe,tabs:VSe,tab:USe,tabActive:GSe,searchWrap:zSe,input:HSe,stickyIcons:WSe,iconBtn:KSe,tableWrap:qSe,table:QSe,th:YSe,td:XSe,row:JSe,chips:ZSe,chip:eNe,badges:tNe,badge:sNe,badgeMax:nNe,badgeAchiev:rNe,badgeX2:iNe,badgeX12:aNe,badgeX60:oNe,section:lNe,sectionHeader:cNe,cardList:dNe,card:uNe,cardMax:hNe,iconXL:pNe,split:mNe,left:gNe,leftBtn:fNe,leftBtnActive:vNe,detail:xNe,grid:yNe,tile:bNe,drawer:_Ne,timeline:wNe,node:jNe,dot:SNe},vI=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function Ji(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const n=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(n)+r}function NNe(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function kNe(t){var n,r;const e=(r=(n=t.note)==null?void 0:n.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function Vv({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Lt.iconBtn,title:t||"Rune",children:e})}function xj({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return s.jsx("div",{className:Lt.iconXL,title:t||"Rune",children:e})}function CNe(t){const e=new Map;for(const n of t){const r=n.tier&&n.tier.trim()!==""?n.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(n)}return Array.from(e.entries())}function Sm({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),s.jsx("div",{className:Lt.chips,children:e.map((n,r)=>s.jsx("span",{className:Lt.chip,children:n},r))})}function Nm({r:t,isMax:e}){const n=[];e&&n.push({label:"MAX",cls:Lt.badgeMax}),NNe(t)&&n.push({label:"Achievement",cls:Lt.badgeAchiev});const r=kNe(t);return r==="x2"&&n.push({label:"x2",cls:Lt.badgeX2}),r==="x12"&&n.push({label:"x12",cls:Lt.badgeX12}),r==="x60"&&n.push({label:"x60",cls:Lt.badgeX60}),n.length===0?null:s.jsx("div",{className:Lt.badges,children:n.map((i,a)=>{var o;return s.jsx("span",{className:`${Lt.badge} ${(o=i.cls)!=null?o:""}`,children:i.label},a)})})}function TNe(t){const e=t.trim().toLowerCase();return e?vI.filter(n=>{var r;return`${n.tier} ${n.amount} ${(r=n.note)!=null?r:""}`.toLowerCase().includes(e)}):vI}function INe({data:t}){const e=Math.max(...t.map(i=>Ji(i.amount))),n=R.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Lt.stickyIcons,children:n.map((i,a)=>s.jsx("div",{onClick:()=>r(i),children:s.jsx(Vv,{label:i||"(no tier)"})},a))}),s.jsx("div",{className:Lt.tableWrap,children:s.jsxs("table",{className:Lt.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:Lt.th,style:{width:42}}),s.jsx("th",{className:Lt.th,style:{width:120},children:"Amount"}),s.jsx("th",{className:Lt.th,children:"Bonuses"}),s.jsx("th",{className:Lt.th,style:{width:220},children:"Tags"})]})}),s.jsx("tbody",{children:t.map((i,a)=>{const o=Math.abs(Ji(i.amount)-e)<1e-6;return s.jsxs("tr",{className:Lt.row,"data-tier":i.tier||"(no tier)",children:[s.jsx("td",{className:Lt.td,children:s.jsx(Vv,{label:i.tier||""})}),s.jsx("td",{className:Lt.td,children:i.amount}),s.jsx("td",{className:Lt.td,children:s.jsx(Sm,{r:i})}),s.jsx("td",{className:Lt.td,children:s.jsx(Nm,{r:i,isMax:o})})]},a)})})]})})]})}function ANe({data:t}){const e=CNe(t),n=Math.max(...t.map(r=>Ji(r.amount)));return s.jsx(s.Fragment,{children:e.map(([r,i])=>s.jsxs("section",{className:Lt.section,children:[s.jsx("div",{className:Lt.sectionHeader,children:r}),s.jsx("div",{className:Lt.cardList,children:i.map((a,o)=>{const c=Math.abs(Ji(a.amount)-n)<1e-6;return s.jsxs("div",{className:`${Lt.card} ${c?Lt.cardMax:""}`,children:[s.jsx(xj,{label:r}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:a.amount}),s.jsx(Nm,{r:a,isMax:c})]}),s.jsx(Sm,{r:a})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},o)})})]},r))})}function ENe({data:t}){var o;const e=Array.from(new Set(t.map(c=>c.tier||"(no tier)"))),[n,r]=R.useState((o=e[0])!=null?o:""),i=t.filter(c=>(c.tier||"(no tier)")===n),a=Math.max(...t.map(c=>Ji(c.amount)));return s.jsxs("div",{className:Lt.split,children:[s.jsx("div",{className:Lt.left,children:e.map(c=>s.jsxs("button",{className:`${Lt.leftBtn} ${c===n?Lt.leftBtnActive:""}`,onClick:()=>r(c),children:[s.jsx(Vv,{label:c}),s.jsx("span",{children:c})]},c))}),s.jsxs("div",{className:Lt.detail,children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(xj,{label:n}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:n}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((c,u)=>{const h=Math.abs(Ji(c.amount)-a)<1e-6;return s.jsxs("div",{className:Lt.card,style:{gridTemplateColumns:"1fr auto"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx("strong",{children:c.amount}),s.jsx(Nm,{r:c,isMax:h})]}),s.jsx(Sm,{r:c})]}),s.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function RNe({data:t}){const[e,n]=R.useState(null),r=Math.max(...t.map(i=>Ji(i.amount)));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Lt.grid,children:t.map((i,a)=>s.jsx("div",{className:Lt.tile,onClick:()=>n(i),title:i.tier||"",children:s.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[s.jsx(Vv,{label:i.tier||""}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&s.jsxs("div",{className:Lt.drawer,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[s.jsx(xj,{label:e.tier||""}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:e.amount}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),s.jsx("button",{className:Lt.tab,onClick:()=>n(null),children:"Close"})]}),s.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:s.jsx(Nm,{r:e,isMax:Math.abs(Ji(e.amount)-r)<1e-6})}),s.jsx(Sm,{r:e})]})]})}function PNe({data:t}){const e=Math.max(...t.map(r=>Ji(r.amount))),n=[...t].sort((r,i)=>Ji(r.amount)-Ji(i.amount));return s.jsx("div",{className:Lt.timeline,children:n.map((r,i)=>{const a=Math.abs(Ji(r.amount)-e)<1e-6;return s.jsxs("div",{className:Lt.node,children:[s.jsx("div",{className:Lt.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("strong",{children:r.amount}),s.jsx(Nm,{r,isMax:a})]}),s.jsx(Sm,{r})]}),s.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const LNe=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function DNe(){const[t,e]=R.useState("A: Compact Table"),[n,r]=R.useState(""),i=TNe(n);return s.jsxs("div",{className:Lt.page,children:[s.jsxs("div",{className:Lt.topBar,children:[s.jsx("div",{className:Lt.tabs,children:LNe.map(a=>s.jsx("button",{onClick:()=>e(a),className:`${Lt.tab} ${t===a?Lt.tabActive:""}`,children:a},a))}),s.jsx("div",{className:Lt.searchWrap,children:s.jsx("input",{className:Lt.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:n,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&s.jsx(INe,{data:i}),t==="B: Card Track"&&s.jsx(ANe,{data:i}),t==="C: Two-Pane"&&s.jsx(ENe,{data:i}),t==="D: Icon Grid + Drawer"&&s.jsx(RNe,{data:i}),t==="E: Timeline"&&s.jsx(PNe,{data:i})]})}function MNe(){return s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),s.jsx("div",{className:"mt-4 grid gap-3",children:s.jsx(Cs,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const Re={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},FNe=()=>s.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),Mc={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function BNe(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function Ju(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",BNe(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function LP(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",n={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},o={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},c={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},p={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},y={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},_={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:n,crystal:r,carbon:i,chrome:a,gold:o,obsidian:c,neon:u,plasma:h,aurora:p,satin:g,matte:y,holo:_}[t.material]}function Zl(t){const e={color:Re.title,borderColor:Re.border,...LP(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const km=({children:t})=>s.jsx("span",{className:"relative z-10",children:t});function Zu({fx:t,clip:e}){return s.jsxs(s.Fragment,{children:[t.shine&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:s.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&s.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&s.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&s.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&s.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&s.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((n,r)=>s.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&s.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function $Ne({fx:t,children:e}){const n=Ju(t),r=Zl(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),s.jsx(Zu,{fx:t,clip:i}),t.withIcon&&s.jsx(B3,{size:16,className:"relative z-10"}),s.jsx(km,{children:e})]})}function ONe({fx:t,children:e}){const n=Ju(t),r=Zl(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(Zu,{fx:t,clip:i}),t.withIcon&&s.jsx($3,{size:16,className:"relative z-10"}),s.jsx(km,{children:e})]})}function VNe({fx:t,children:e}){const n=Ju(t),r=Zl(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),s.jsx(Zu,{fx:t,clip:i}),t.withIcon&&s.jsx(od,{size:16,className:"relative z-10"}),s.jsx(km,{children:e})]})}function UNe({fx:t,children:e}){const n=Ju(t),r=Zl(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return s.jsxs("button",{disabled:t.disabled,className:`${n} overflow-hidden`,style:r,children:[s.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${Re.tile}, ${Re.active})`}}),s.jsx(Zu,{fx:t,clip:i}),t.withIcon&&s.jsx(O3,{size:16,className:"relative z-10"}),s.jsx(km,{children:e})]})}function GNe({fx:t,children:e}){const n=Ju(t),r=Zl(t);return s.jsxs("button",{disabled:t.disabled,className:`${n} rounded-full overflow-hidden`,style:r,children:[s.jsx(Zu,{fx:t}),t.withIcon&&s.jsx(Xv,{size:16,className:"relative z-10"}),s.jsx(km,{children:e})]})}function zNe({fx:t,tabs:e}){const[n,r]=R.useState(0);return s.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:e.map((i,a)=>s.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===n?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===n?Re.active:"transparent",border:a===n&&t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[t.withIcon&&a===n&&s.jsx(Xv,{size:14,className:"inline mr-1"}),i]},a))})}function HNe({fx:t}){const e=Ju(t),n=Zl(t);return s.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:n,"aria-label":"Icon action",children:s.jsx(G3,{})})}const J1={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function WNe({fx:t,setFx:e}){const n=(c,u)=>e(h=>({...h,[c]:u})),r=c=>e(u=>({...u,[c]:!u[c]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],o=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return s.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Re.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:Re.title},children:"Presets"}),Object.keys(J1).map(c=>s.jsx("button",{onClick:()=>e(u=>J1[c](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:Re.btn,borderColor:Re.border,color:Re.title},children:c},c))]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Re.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:Re.title},children:"Material"}),i.map(c=>s.jsx("button",{onClick:()=>n("material",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===c?"":"opacity-70"}`,style:{backgroundColor:t.material===c?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:c},c)),s.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:Re.title},children:"Size"}),["sm","md","lg"].map(c=>s.jsx("button",{onClick:()=>n("size",c),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===c?"":"opacity-70"}`,style:{backgroundColor:t.size===c?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:c.toUpperCase()},c)),s.jsx("button",{onClick:()=>e(c=>({...c,withIcon:!c.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:"Icon"}),s.jsx("button",{onClick:()=>e(c=>({...c,disabled:!c.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:"Disabled"})]}),s.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${Re.border}`:"0"},children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:Re.title},children:"Core FX"}),a.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:u},c))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold",style:{color:Re.title},children:"Advanced"}),o.map(([c,u])=>s.jsx("button",{onClick:()=>r(c),className:`px-2.5 py-1 rounded-md border text-xs ${t[c]?"":"opacity-70"}`,style:{backgroundColor:t[c]?Re.active:Re.btn,borderColor:Re.border,color:Re.title},children:u},c))]}),s.jsx("button",{onClick:()=>e(Mc),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:Re.btn,borderColor:Re.border,color:Re.title},children:"Reset"})]})}function Gs({fx:t,className:e="",style:n={},children:r,clip:i}){const a=Zl(t);return s.jsxs("div",{className:`relative ${e}`,style:{...a,...n},children:[s.jsx(Zu,{fx:t,clip:i}),s.jsx("div",{className:"relative z-10",children:r})]})}function Jr({fx:t,className:e="",children:n}){return s.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:n})}function KNe({fx:t}){const[e,n]=R.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Toggle Chips"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return s.jsx(Gs,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:Re.border},children:s.jsx("button",{onClick:()=>n(o=>a?o.filter(c=>c!==i):[...o,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function qNe({fx:t}){return s.jsxs(Jr,{fx:t,className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",style:{color:Re.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>s.jsx(Gs,{fx:t,className:"rounded-xl border p-2",style:{borderColor:Re.border},children:s.jsxs("button",{className:"relative",children:[s.jsx(G3,{size:16}),e===3&&s.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function QNe({fx:t}){return s.jsxs(Gs,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Breadcrumb HUD"}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>s.jsx(Gs,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:Re.border},children:e},e))})]})}function YNe({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Stat Tiles"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(n=>s.jsxs(Gs,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:Re.border},children:[s.jsx("div",{className:"text-[10px] opacity-80",children:n.k}),s.jsx("div",{className:"text-sm",children:n.v}),s.jsx("div",{className:"text-[11px] opacity-80",children:n.d})]},n.k))})]})}function XNe({fx:t}){const[e,n]=R.useState(.66);return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Meter / Energy Bar"}),s.jsx(Gs,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:Re.border},children:s.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),s.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsxs("button",{onClick:()=>n(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function JNe({fx:t}){return s.jsxs(Jr,{fx:t,className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-sm",style:{color:Re.title},children:"Badge / Medal"}),s.jsxs(Gs,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:Re.border},children:[s.jsx(od,{size:16}),s.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function ZNe({fx:t}){const[e,n]=R.useState(!1);return s.jsxs(Jr,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:Re.title},children:"Toast / Notification"}),s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&s.jsxs(Gs,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:Re.border},children:[s.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),s.jsx("button",{onClick:()=>n(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function eke({fx:t}){const[e,n]=R.useState(!0);return s.jsxs(Jr,{fx:t,className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:Re.title},children:"Toggle Switch"}),s.jsxs(Gs,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:Re.border},children:[s.jsx("button",{onClick:()=>n(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),s.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function tke({fx:t}){const[e,n]=R.useState(!1),r=["Overview","Stats","Activity","Hydra"];return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Dropdown HUD"}),s.jsx(Gs,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:Re.border},children:s.jsx("button",{onClick:()=>n(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&s.jsx(Gs,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:Re.border},children:r.map(i=>s.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function ske({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Radial Menu (Preview)"}),s.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[s.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"}}),e.map((n,r)=>{const i=r/e.length*Math.PI*2,a=56,o=56+Math.cos(i)*a,c=56+Math.sin(i)*a;return s.jsx(Gs,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:o,top:c,borderColor:Re.border},children:n},n)}),s.jsx(Gs,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:Re.border},children:"Menu"})]})]})}function nke({fx:t}){const e=[1,2,3,4,5],[n,r]=R.useState(2);return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Pagination HUD"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>s.jsx(Gs,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===n?"":"opacity-80"}`,style:{borderColor:Re.border},children:s.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function rke({fx:t}){const[e,n]=R.useState(!1);return s.jsxs(Jr,{fx:t,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm",style:{color:Re.title},children:"Modal HUD"}),s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&s.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:s.jsxs(Gs,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:Re.border},children:[s.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),s.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>n(!1),children:"Cancel"})}),s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function ike({fx:t}){const[e,n]=R.useState("");return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Search HUD"}),s.jsx(Gs,{fx:t,className:"rounded-lg border p-2",style:{borderColor:Re.border},children:s.jsx("input",{value:e,onChange:r=>n(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function ake({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[n,r]=R.useState("Bravo");return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"List Selectable"}),s.jsx("div",{className:"space-y-2",children:e.map(i=>s.jsx(Gs,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${n===i?"":"opacity-80"}`,style:{borderColor:Re.border},children:s.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function oke({fx:t}){const e=["Init","Scan","Verify","Done"],[n,r]=R.useState(1);return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Steps"}),s.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>s.jsxs(W.Fragment,{children:[s.jsx(Gs,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=n?"":"opacity-70"}`,style:{borderColor:Re.border},children:a+1}),a<e.length-1&&s.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,n-1)),children:"Back"})}),s.jsx(Gs,{fx:t,className:"rounded-md border",style:{borderColor:Re.border},children:s.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,n+1)),children:"Next"})})]})]})}function lke({fx:t}){const e=["","","","","",""];return s.jsxs(Jr,{fx:t,children:[s.jsx("div",{className:"text-sm mb-2",style:{color:Re.title},children:"Dock Bar"}),s.jsx("div",{className:"flex items-center gap-2",children:e.map((n,r)=>s.jsx(Gs,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:Re.border},children:n},r))})]})}function cke(){const[t,e]=R.useState(Mc);return s.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:Re.bg,color:Re.txt},children:[s.jsx(FNe,{}),s.jsxs("header",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i7,{}),s.jsx("h1",{className:"text-xl font-bold",style:{color:Re.title},children:"Game Buttons Playground"}),s.jsx("span",{className:"text-xs",style:{color:Re.txt2},children:"(Materials + FX extended + Presets)"})]})}),s.jsx(WNe,{fx:t,setFx:e})]}),s.jsxs("section",{className:"grid gap-4",children:[s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:Re.title},children:"Shapes"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs($Ne,{fx:t,children:[s.jsx(B3,{size:16})," Diamond"]}),s.jsxs(ONe,{fx:t,children:[s.jsx($3,{size:16})," Hex"]}),s.jsxs(VNe,{fx:t,children:[s.jsx(od,{size:16})," Octagon/Shield"]}),s.jsxs(UNe,{fx:t,children:[s.jsx(O3,{size:16})," Shard"]}),s.jsxs(GNe,{fx:t,children:[s.jsx(Xv,{size:16})," Pill/Chip"]}),s.jsx(HNe,{fx:t})]})]}),s.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold",style:{color:Re.title},children:"Tabs"}),s.jsx(zNe,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),s.jsx("section",{className:"grid gap-4",children:s.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:Re.tile,border:t.baseBorder?`1px solid ${Re.border}`:"0 solid transparent"},children:[s.jsx("h2",{className:"font-semibold mb-3",style:{color:Re.title},children:"More HUD Patterns"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[s.jsx(KNe,{fx:t}),s.jsx(qNe,{fx:t}),s.jsx(QNe,{fx:t}),s.jsx(YNe,{fx:t}),s.jsx(XNe,{fx:t}),s.jsx(JNe,{fx:t}),s.jsx(ZNe,{fx:t}),s.jsx(eke,{fx:t}),s.jsx(tke,{fx:t}),s.jsx(ske,{fx:t}),s.jsx(nke,{fx:t}),s.jsx(rke,{fx:t}),s.jsx(ike,{fx:t}),s.jsx(ake,{fx:t}),s.jsx(oke,{fx:t}),s.jsx(lke,{fx:t})]})]})}),s.jsx(dke,{}),s.jsx("footer",{className:"text-center text-xs",style:{color:Re.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function dke(){return R.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(Mc.material),"Material type present");const e=Zl(Mc);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=LP({...Mc,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof Mc[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries(J1).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...Mc});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const Sp={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},xI={Arcade:{...Sp,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...Sp,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},tu={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},DP={display:"grid",gap:8,alignItems:"center"};function bo({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...DP,gridTemplateColumns:"120px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function Bb({label:t,value:e,min:n,max:r,onChange:i}){return s.jsxs("label",{style:{...DP,gridTemplateColumns:"120px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),s.jsx("input",{type:"number",min:n,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function yI(){const[t,e]=W.useState(Sp),n=W.useRef(null),r=u=>{const h=n.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};W.useEffect(()=>{r(t)},[t]);const i=u=>e(xI[u]),a=()=>e(Sp),o=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},c=async u=>{const h=await u.text();e({...Sp,...JSON.parse(h)})};return s.jsxs("div",{ref:n,style:{color:"var(--text, #FFFFFF)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(xI).map(u=>s.jsx("button",{style:tu,onClick:()=>i(u),children:u},u)),s.jsx("button",{style:tu,onClick:a,children:"Default"}),s.jsx("button",{style:tu,onClick:o,children:"Export JSON"}),s.jsxs("label",{style:{...tu,display:"inline-block"},children:["Import JSON",s.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&c(u.target.files[0]),style:{display:"none"}})]})]}),s.jsx(bo,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),s.jsx(bo,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),s.jsx(bo,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),s.jsx(bo,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),s.jsx(bo,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),s.jsx(bo,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),s.jsx(bo,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),s.jsx(bo,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),s.jsx(bo,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),s.jsx(Bb,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),s.jsx(Bb,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),s.jsx(Bb,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),s.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[s.jsx("button",{style:{...tu,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),s.jsx("button",{style:tu,children:"Secondary"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>s.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[s.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),s.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const Z1={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},bI={"SFDataHub (Default)":{...Z1},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},Bx={display:"grid",gap:8,alignItems:"center"},Ec={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},Rc={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function Ki({label:t,value:e,onChange:n}){return s.jsxs("label",{style:{...Bx,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value)})]})}function _o({label:t,value:e,min:n,max:r,step:i=1,onChange:a,suffix:o}){return s.jsxs("label",{style:{...Bx,gridTemplateColumns:"140px 1fr 70px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"range",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value))}),s.jsx("input",{type:"number",min:n,max:r,step:i,value:e,onChange:c=>a(parseFloat(c.target.value||"0"))})]})}function uke({label:t,checked:e,onChange:n}){return s.jsxs("label",{style:{...Bx,gridTemplateColumns:"1fr 46px"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),s.jsx("input",{type:"checkbox",checked:e,onChange:r=>n(r.target.checked)})]})}function _I(){const[t,e]=W.useState(Z1),n=W.useRef(null),r=h=>{const p=n.current;p&&(p.style.setProperty("--page",h.page),p.style.setProperty("--tile",h.tile),p.style.setProperty("--tile-hover",h.tileHover),p.style.setProperty("--nav",h.nav),p.style.setProperty("--active",h.active),p.style.setProperty("--text",h.text),p.style.setProperty("--text-soft",h.textSoft),p.style.setProperty("--title",h.title),p.style.setProperty("--line",h.line),p.style.setProperty("--accent",h.accent),p.style.setProperty("--success",h.success),p.style.setProperty("--warning",h.warning),p.style.setProperty("--danger",h.danger),p.style.setProperty("--radius",`${h.radius}px`),p.style.setProperty("--border",`${h.border}px`),p.style.setProperty("--gap",`${h.gap}px`),p.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),p.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),p.style.setProperty("--noise",`${h.noise}%`),p.style.setProperty("--font",h.fontFamily),p.style.setProperty("--font-size",`${h.fontSize}px`),p.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),p.style.setProperty("--glow",`${h.glow}`),p.style.setProperty("--scanlines",`${h.scanlines}`))};W.useEffect(()=>{r(t)},[t]);const i=(h,p)=>e(g=>({...g,[h]:p})),a=h=>e(p=>({...p,...bI[h]})),o=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download="sfdatahub-theme-pro.json",p.click()},c=async h=>{try{const p=await h.text(),g=JSON.parse(p);e({...t,...g})}catch(p){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return s.jsxs("div",{ref:n,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[s.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(bI).map(h=>s.jsx("button",{style:Ec,onClick:()=>a(h),children:h},h)),s.jsx("button",{style:Ec,onClick:()=>e(Z1),children:"Reset"}),s.jsx("button",{style:Ec,onClick:o,children:"Export"}),s.jsxs("label",{style:{...Ec,display:"inline-block"},children:["Import",s.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&c(h.target.files[0])})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(Ki,{label:"Page",value:t.page,onChange:h=>i("page",h)}),s.jsx(Ki,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),s.jsx(Ki,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),s.jsx(Ki,{label:"Active",value:t.active,onChange:h=>i("active",h)}),s.jsx(Ki,{label:"Text",value:t.text,onChange:h=>i("text",h)}),s.jsx(Ki,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),s.jsx(Ki,{label:"Title",value:t.title,onChange:h=>i("title",h)}),s.jsx(Ki,{label:"Line",value:t.line,onChange:h=>i("line",h)}),s.jsx(Ki,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[s.jsx(Ki,{label:"Success",value:t.success,onChange:h=>i("success",h)}),s.jsx(Ki,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),s.jsx(Ki,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(_o,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),s.jsx(_o,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),s.jsx(_o,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),s.jsx(_o,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),s.jsx(_o,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),s.jsx(_o,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("label",{style:{...Bx,gridTemplateColumns:"140px 1fr"},children:[s.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),s.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),s.jsx(_o,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),s.jsx(uke,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),s.jsxs("details",{open:!0,children:[s.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx(_o,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),s.jsx(_o,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),s.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[s.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[s.jsxs("span",{style:Rc,children:[s.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),s.jsx("span",{style:{...Rc,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),s.jsx("span",{style:{...Rc,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),s.jsx("span",{style:{...Rc,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),s.jsxs("span",{style:Rc,children:["Radius: ",t.radius]}),s.jsxs("span",{style:Rc,children:["Shadow: ",t.shadow]}),s.jsxs("span",{style:Rc,children:["Noise: ",t.noise,"%"]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),s.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",s.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),s.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,p)=>s.jsxs("div",{style:{display:"grid",gap:4},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[s.jsx("span",{children:h.label}),s.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),s.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:s.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},p))}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[s.jsx("button",{style:{...Ec,background:"var(--tile-hover)"},children:"Open Profile"}),s.jsx("button",{style:{...Ec,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),s.jsxs("div",{style:{display:"grid",gap:12},children:[s.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,p)=>s.jsx("button",{style:{...Ec,background:p===0?"var(--tile-hover)":"transparent",borderColor:p===0?"var(--active)":"var(--line)",boxShadow:p===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,p)=>s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),s.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),s.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},p))}),s.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[s.jsx("div",{style:{padding:10},children:"Attribute"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,p)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:p%2?"rgba(255,255,255,.025)":"transparent"},children:[s.jsx("div",{style:{padding:10},children:h[0]}),s.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),s.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},p))]})]})]}),s.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const Wt={wrap:{color:"#F5F9FF"},intro:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginBottom:14},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:14},card:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)",minHeight:160,display:"flex",flexDirection:"column",gap:10},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},sub:{color:"#B0C4D9",fontSize:13,lineHeight:1.4},badgeRow:{display:"flex",gap:6,flexWrap:"wrap"}},xa=(t,e="#1E3A5C")=>s.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",fontSize:11,borderRadius:999,background:e,border:"1px solid rgba(255,255,255,.12)",color:"#D9E7FF",textTransform:"uppercase",letterSpacing:.4},children:t}),Ti=()=>s.jsxs("div",{style:Wt.badgeRow,children:[xa("mock"),xa("concept","#234569"),xa("ui","#1F4D67")]}),wI={common:"#1f3b5d",rare:"#234f7a",epic:"#3c2f6d",legendary:"#6b3b0f"};function hke(){const t=[{title:"Data Whisperer",rarity:"epic",status:"Unlocked"},{title:"Perfect Sync",rarity:"rare",status:"Unlocked"},{title:"Zero Downtime",rarity:"legendary",status:"Locked"},{title:"Scout Elite",rarity:"common",status:"Unlocked"},{title:"API Ranger",rarity:"rare",status:"Locked"},{title:"Schema Sleuth",rarity:"epic",status:"Unlocked"}],e=[{title:"Scan 10 servers",status:"Done",reward:"+250 XP"},{title:"Fix 3 warnings",status:"In progress",reward:"+1 reroll"},{title:"Share a dashboard",status:"Ready",reward:"Title shard"},{title:"Hit uptime streak",status:"Locked",reward:"Glow badge"}],n=[{tier:"Mythic",delta:"+2",trend:"up"},{tier:"Diamond",delta:"-1",trend:"down"},{tier:"Platinum",delta:"+4",trend:"up"},{tier:"Gold",delta:"0",trend:"flat"}],r=[{label:"Level 12",done:!0},{label:"Sync Master",done:!0},{label:"API Adept",done:!1},{label:"Data Virtuoso",done:!1}],i=[{level:1,reward:"Theme Skin",unlocked:!0},{level:4,reward:"Badge Token",unlocked:!0},{level:7,reward:"Loot Cache",unlocked:!1},{level:10,reward:"Mythic Frame",unlocked:!1}],a=[{label:"Common",value:32,color:"#1e3b5d"},{label:"Rare",value:28,color:"#1f5d77"},{label:"Epic",value:22,color:"#3c2f6d"},{label:"Legendary",value:18,color:"#6b3b0f"}],o=[{name:"Link Speed",state:"active"},{name:"Alert Vision",state:"active"},{name:"Schema Insight",state:"locked"},{name:"API Armor",state:"active"},{name:"Sync Surge",state:"active"},{name:"Data Forge",state:"locked"},{name:"Audit Ghost",state:"locked"},{name:"Chronicle",state:"locked"}];return s.jsxs("div",{style:Wt.wrap,children:[s.jsxs("div",{style:Wt.intro,children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,color:"#F5F9FF"},children:"Gamified Visuals"}),s.jsx("p",{style:Wt.sub,children:"Static showcase of badges, streaks, ladders, and tracks in SFDataHub styling."})]}),Ti()]}),s.jsxs("div",{style:Wt.grid,children:[s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Achievement Badges"}),s.jsx("div",{style:Wt.sub,children:"Unlocked vs. locked set with rarity color tags."})]}),Ti()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:10},children:t.map(c=>s.jsxs("div",{style:{border:"1px dashed rgba(255,255,255,.15)",borderRadius:12,padding:10,background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700,marginBottom:6},children:c.title}),s.jsxs("div",{style:Wt.badgeRow,children:[xa(c.status,c.status==="Unlocked"?"#1f4f62":"#422b2b"),xa(c.rarity,wI[c.rarity])]})]},c.title))})]}),s.jsxs("div",{style:{...Wt.card,background:"linear-gradient(145deg, #143257, #0f243d)"},children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Scan Streak"}),s.jsx("div",{style:Wt.sub,children:"Keep the flame alive with consistent daily scans."})]}),Ti()]}),s.jsxs("div",{style:{background:"rgba(0,0,0,.25)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Current streak"}),s.jsx("div",{style:{fontSize:32,fontWeight:800},children:"12 days "})]}),s.jsxs("div",{style:{textAlign:"right"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Best streak"}),s.jsx("div",{style:{fontWeight:700},children:"21 days"}),s.jsx("div",{style:{marginTop:6,background:"#0e1e33",borderRadius:999,padding:"4px 10px"},children:"+3d buffer"})]})]}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next reward: Ember Frame at 14 days."})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Quest Log"}),s.jsx("div",{style:Wt.sub,children:"Short mission stack with rewards."})]}),Ti()]}),s.jsx("div",{style:{display:"grid",gap:8},children:e.map(c=>s.jsxs("div",{style:{borderRadius:10,padding:10,background:"rgba(255,255,255,.03)",border:"1px solid rgba(255,255,255,.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:c.title}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.reward})]}),xa(c.status,c.status==="Done"?"#1f4f62":c.status==="In progress"?"#4f3b1f":"#3a2f4f")]},c.title))})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Trophy Podium"}),s.jsx("div",{style:Wt.sub,children:"Top 3 snapshot with podium heights."})]}),Ti()]}),s.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:10,justifyContent:"space-around",paddingTop:8},children:[{rank:2,height:60},{rank:1,height:90},{rank:3,height:45}].map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["#",c.rank]}),s.jsxs("div",{style:{width:70,height:c.height,background:c.rank===1?"linear-gradient(180deg,#f5d26b,#b87b1a)":"linear-gradient(180deg,#345a8a,#203752)",borderRadius:10,border:"1px solid rgba(255,255,255,.2)",display:"grid",placeItems:"center",fontWeight:800,color:c.rank===1?"#1a1a1a":"#F5F9FF"},children:["S",c.rank]}),s.jsxs("div",{style:{marginTop:4,fontSize:12},children:["Squad ",c.rank]})]},c.rank))})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Rank Ladder"}),s.jsx("div",{style:Wt.sub,children:"League rungs with movement delta."})]}),Ti()]}),s.jsx("div",{style:{display:"grid",gap:8},children:n.map(c=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",borderRadius:10,border:"1px solid rgba(255,255,255,.08)",background:"rgba(255,255,255,.02)"},children:[s.jsx("div",{style:{fontWeight:700},children:c.tier}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:c.delta}),s.jsx("span",{style:{color:c.trend==="up"?"#5AD8A6":c.trend==="down"?"#E06C75":"#B0C4D9"},children:c.trend==="up"?"":c.trend==="down"?"":""})]})]},c.tier))})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Milestone Timeline"}),s.jsx("div",{style:Wt.sub,children:"Linear track with unlocked markers."})]}),Ti()]}),s.jsxs("div",{style:{position:"relative",padding:"10px 4px 0"},children:[s.jsx("div",{style:{position:"absolute",top:22,left:0,right:0,height:2,background:"rgba(255,255,255,.12)"}}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r.length}, 1fr)`,gap:6,position:"relative"},children:r.map(c=>s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{width:22,height:22,margin:"0 auto",borderRadius:"50%",background:c.done?"#2d7f5f":"#2f415e",border:"2px solid rgba(255,255,255,.1)",display:"grid",placeItems:"center",fontSize:11,fontWeight:700},children:c.done?"":""}),s.jsx("div",{style:{marginTop:6,fontSize:12},children:c.label})]},c.label))})]})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Collection Ring"}),s.jsx("div",{style:Wt.sub,children:"Donut visualization for scrapbook completion."})]}),Ti()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[s.jsx("div",{style:{width:120,height:120,borderRadius:"50%",background:"conic-gradient(#3c7bd9 0% 68%, #1d3051 68% 100%)",display:"grid",placeItems:"center",border:"1px solid rgba(255,255,255,.08)"},children:s.jsx("div",{style:{width:78,height:78,borderRadius:"50%",background:"#0f1e33",display:"grid",placeItems:"center",color:"#F5F9FF",fontWeight:800},children:"68%"})}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:Wt.badgeRow,children:[xa("Unlocked 45/66","#1f4f62"),xa("Sets: 6","#2a3f68")]}),s.jsx("div",{style:{marginTop:10,fontSize:12,color:"#B0C4D9"},children:"Next reward at 75%: Chronicle stencil frame."})]})]})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Boss HP  Goal Bar"}),s.jsx("div",{style:Wt.sub,children:"Progress toward the next major unlock."})]}),Ti()]}),s.jsxs("div",{style:{background:"#0f1f33",borderRadius:12,padding:10,border:"1px solid rgba(255,255,255,.08)"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#B0C4D9"},children:[s.jsx("span",{children:"Phase 2/3"}),s.jsx("span",{children:"82% to go"})]}),s.jsx("div",{style:{height:22,borderRadius:10,overflow:"hidden",marginTop:6,border:"1px solid rgba(255,255,255,.1)"},children:s.jsx("div",{style:{width:"18%",height:"100%",background:"linear-gradient(90deg, #d95f5f, #f2a45d)",boxShadow:"0 0 12px rgba(242,164,93,.4)"}})}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Next shield break at 25% HP."})]})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Skill Tree Mini"}),s.jsx("div",{style:Wt.sub,children:"Node states with locked paths."})]}),Ti()]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:8},children:o.map(c=>s.jsxs("div",{style:{background:"rgba(255,255,255,.03)",borderRadius:10,border:`1px solid ${c.state==="active"?"rgba(90,216,166,.4)":"rgba(255,255,255,.08)"}`,padding:10,boxShadow:c.state==="active"?"0 0 12px rgba(90,216,166,.25)":"none"},children:[s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:c.state==="active"?"Unlocked":"Locked"}),s.jsx("div",{style:{fontWeight:700,marginTop:4},children:c.name})]},c.name))}),s.jsx("div",{style:{marginTop:6,fontSize:12,color:"#B0C4D9"},children:"Path glow = active; darker cells stay locked."})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Season Pass Track"}),s.jsx("div",{style:Wt.sub,children:"Horizontal progression with staged rewards."})]}),Ti()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginTop:4},children:[s.jsx("div",{style:{flex:1,height:10,borderRadius:999,background:"#0f1f33",position:"relative",overflow:"hidden"},children:s.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"45%",background:"linear-gradient(90deg,#2a7bbd,#54c9e7)"}})}),xa("45%","#1f4f62")]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:10,overflowX:"auto"},children:i.map(c=>s.jsxs("div",{style:{minWidth:120,background:"rgba(255,255,255,.03)",borderRadius:12,padding:10,border:`1px solid ${c.unlocked?"rgba(84,201,231,.4)":"rgba(255,255,255,.08)"}`},children:[s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Level ",c.level]}),s.jsx("div",{style:{fontWeight:700},children:c.reward}),s.jsx("div",{style:{marginTop:6},children:xa(c.unlocked?"Claimed":"Locked",c.unlocked?"#1f4f62":"#2f2f4f")})]},c.level))})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Title Plates"}),s.jsx("div",{style:Wt.sub,children:"Unlockable nameplates with rarity glow."})]}),Ti()]}),s.jsx("div",{style:{display:"grid",gap:10},children:[{name:"Data Pioneer",tone:"linear-gradient(90deg,#2f5b90,#1f3d68)",rarity:"rare"},{name:"Mythic Cartographer",tone:"linear-gradient(90deg,#6b3b0f,#b87b1a)",rarity:"legendary"},{name:"Night Runner",tone:"linear-gradient(90deg,#28354f,#1a2335)",rarity:"common"}].map(c=>s.jsxs("div",{style:{borderRadius:12,padding:12,background:c.tone,border:"1px solid rgba(255,255,255,.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:800},children:c.name}),xa(c.rarity,wI[c.rarity]||"#234569")]},c.name))})]}),s.jsxs("div",{style:Wt.card,children:[s.jsxs("div",{style:Wt.header,children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:700},children:"Loot / Rarity Mix"}),s.jsx("div",{style:Wt.sub,children:"Stacked distribution snapshot."})]}),Ti()]}),s.jsx("div",{style:{height:24,borderRadius:12,overflow:"hidden",display:"flex",border:"1px solid rgba(255,255,255,.08)"},children:a.map(c=>s.jsxs("div",{style:{width:`${c.value}%`,background:c.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:11,color:"#DAE8FF",borderRight:"1px solid rgba(255,255,255,.05)"},children:[c.value,"%"]},c.label))}),s.jsx("div",{style:Wt.badgeRow,children:a.map(c=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"2px 8px",borderRadius:999,background:"rgba(255,255,255,.04)",border:"1px solid rgba(255,255,255,.08)",fontSize:12},children:[s.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:c.color,display:"inline-block"}}),c.label]},c.label))})]})]})]})}const jI=[{id:"quests",title:"Quests & Objectives",description:"Logs, chains, rewards, and difficulty chips.",items:[{id:"11",categoryId:"quests",title:"Quest Log (3 steps)",subtitle:"Ordered checklist",tags:["mock"],previewId:"pv_quest_steps"},{id:"12",categoryId:"quests",title:"Daily Objectives Board",subtitle:"Checkbox grid",tags:["ui"],previewId:"pv_daily_checklist"},{id:"13",categoryId:"quests",title:"Weekly Contract Card",subtitle:"Timer + tear edge",tags:["concept"],previewId:"pv_contract_timer"},{id:"14",categoryId:"quests",title:"Bounty Card",subtitle:"Target + reward tag",tags:["mock"],previewId:"pv_bounty_target"},{id:"15",categoryId:"quests",title:"Multi-Objective Chips",subtitle:"3 tagged goals",tags:["ui"],previewId:"pv_objective_chips"},{id:"16",categoryId:"quests",title:"Quest Chain Path",subtitle:"Linked nodes",tags:["mock"],previewId:"pv_quest_chain_nodes"},{id:"17",categoryId:"quests",title:"Reward Preview Panel",subtitle:"XP + coins bundle",tags:["ui"],previewId:"pv_reward_bundle"},{id:"18",categoryId:"quests",title:"Side Quest Mini",subtitle:"Compact lane",tags:["mock"],previewId:"pv_sidequest_compact"},{id:"19",categoryId:"quests",title:"Claim Reward States",subtitle:"Enabled vs locked",tags:["ui"],previewId:"pv_claim_states"},{id:"20",categoryId:"quests",title:"Difficulty Tags",subtitle:"Easy / Hard / Insane",tags:["mock"],previewId:"pv_difficulty_tags"}]},{id:"progress",title:"Progress Bars & Gauges",description:"Boss phases, dual progress, rings, and risk arcs.",items:[{id:"21",categoryId:"progress",title:"Boss HP Goal Bar",subtitle:"Segmented phases",tags:["mock"],previewId:"pv_boss_hp_segmented"},{id:"22",categoryId:"progress",title:"Dual Progress vs Avg",subtitle:"Overlay marker",tags:["ui"],previewId:"pv_dual_progress_marker"},{id:"23",categoryId:"progress",title:"Segmented Track (10)",subtitle:"10 stops rail",tags:["concept"],previewId:"pv_segment_track_10"},{id:"24",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"pv_donut_completion"},{id:"25",categoryId:"progress",title:"Battery Gauge",subtitle:"Energy level",tags:["ui"],previewId:"pv_battery_gauge"},{id:"26",categoryId:"progress",title:"Thermometer Vertical",subtitle:"Heat column",tags:["mock"],previewId:"pv_thermo_vertical"},{id:"27",categoryId:"progress",title:"Level XP Bar + ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"pv_xp_ticks"},{id:"28",categoryId:"progress",title:"Multi-Stat Mini Bars",subtitle:"STR/DEX/INT/CON/LCK",tags:["mock"],previewId:"pv_multibar_stats5"},{id:"29",categoryId:"progress",title:"Risk Meter",subtitle:"Arc pointer",tags:["concept"],previewId:"pv_risk_meter"},{id:"30",categoryId:"progress",title:"Perfect Run Bar",subtitle:"Checklist + bar",tags:["ui"],previewId:"pv_perfect_run"}]},{id:"rankings",title:"Rankings & Leagues",description:"Podiums, ladders, deltas, and history.",items:[{id:"31",categoryId:"rankings",title:"Trophy Podium Top 3",subtitle:"Height podium",tags:["mock"],previewId:"pv_podium_top3"},{id:"32",categoryId:"rankings",title:"Rank Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"pv_ladder_rungs"},{id:"33",categoryId:"rankings",title:"League Tier Card",subtitle:"Bronze -> Diamond",tags:["concept"],previewId:"pv_league_tiers"},{id:"34",categoryId:"rankings",title:"Rank Delta Chip",subtitle:"Up/down pill",tags:["ui"],previewId:"pv_delta_chip"},{id:"35",categoryId:"rankings",title:"Percentile Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"pv_percentile_gauge"},{id:"36",categoryId:"rankings",title:"Rival Slot (nearest)",subtitle:"You vs nearest",tags:["concept"],previewId:"pv_rival_slot"},{id:"37",categoryId:"rankings",title:"Promotion Zone Highlight",subtitle:"Green band",tags:["ui"],previewId:"pv_promo_zone"},{id:"38",categoryId:"rankings",title:"Relegation Warning",subtitle:"Red band",tags:["mock"],previewId:"pv_relegation_zone"},{id:"39",categoryId:"rankings",title:"Top 5 Mini List",subtitle:"Ranked list",tags:["ui"],previewId:"pv_top5_list"},{id:"40",categoryId:"rankings",title:"Rank History Step",subtitle:"Step chart",tags:["mock"],previewId:"pv_rank_step_history"}]},{id:"duels",title:"Comparisons & Duels",description:"Splits, overlays, and matchup meters.",items:[{id:"41",categoryId:"duels",title:"Stat Split Compare",subtitle:"Two columns",tags:["mock"],previewId:"pv_split_compare"},{id:"42",categoryId:"duels",title:"You vs Avg Bars",subtitle:"Overlay bars",tags:["ui"],previewId:"pv_you_vs_avg_bars"},{id:"43",categoryId:"duels",title:"Best of 3 Dots",subtitle:"Round tracker",tags:["mock"],previewId:"pv_bestof3_dots"},{id:"44",categoryId:"duels",title:"Duel Outcome Card",subtitle:"Win/Loss plate",tags:["ui"],previewId:"pv_duel_outcome"},{id:"45",categoryId:"duels",title:"Advantage Meter",subtitle:"Arrow to winner",tags:["concept"],previewId:"pv_advantage_meter"},{id:"46",categoryId:"duels",title:"KPI Side-by-side",subtitle:"Four KPI tiles",tags:["mock"],previewId:"pv_kpi_tiles_4"},{id:"47",categoryId:"duels",title:"Delta Breakdown Chips",subtitle:"Pos/neg split",tags:["ui"],previewId:"pv_delta_chips_breakdown"},{id:"48",categoryId:"duels",title:"Mirror Match",subtitle:"Symmetric view",tags:["mock"],previewId:"pv_mirror_neutral"},{id:"49",categoryId:"duels",title:"Radar Mock",subtitle:"Polygon radar",tags:["concept"],previewId:"pv_radar_polygon"},{id:"50",categoryId:"duels",title:"Gap to Next",subtitle:"Distance marker",tags:["ui"],previewId:"pv_gap_to_next"}]},{id:"guild",title:"Guild & Social",description:"Roles, readiness, and alliance visuals.",items:[{id:"61",categoryId:"guild",title:"Guild Role Badges",subtitle:"Role chips",tags:["mock"],previewId:"pv_guild_roles"},{id:"62",categoryId:"guild",title:"Contribution Per Member",subtitle:"Member bars",tags:["ui"],previewId:"pv_contrib_bars"},{id:"63",categoryId:"guild",title:"Member Spotlight",subtitle:"Highlight lane",tags:["concept"],previewId:"pv_spotlight_card"},{id:"64",categoryId:"guild",title:"Guild Power Composite",subtitle:"Gauge blend",tags:["mock"],previewId:"pv_guild_power_meter"},{id:"65",categoryId:"guild",title:"Recruitment Slots",subtitle:"Open vs filled",tags:["ui"],previewId:"pv_slots_open_filled"},{id:"66",categoryId:"guild",title:"War Readiness Panel",subtitle:"Status chips",tags:["mock"],previewId:"pv_war_readiness"},{id:"67",categoryId:"guild",title:"Activity Pulse Spark",subtitle:"Pulse waveform",tags:["concept"],previewId:"pv_activity_pulse"},{id:"68",categoryId:"guild",title:"Alliance Link Card",subtitle:"Linked hubs",tags:["mock"],previewId:"pv_alliance_link"},{id:"69",categoryId:"guild",title:"Pinned Announcement",subtitle:"Pinned note",tags:["ui"],previewId:"pv_pinned_announcement"},{id:"70",categoryId:"guild",title:"Trophy Shelf",subtitle:"Shelf icons",tags:["mock"],previewId:"pv_trophy_shelf"}]}],Zt=({label:t})=>s.jsx("span",{className:"g2-pill",children:t}),Bt=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g2-bar tone-${e}`,style:{width:t,height:n}}),SI={pv_quest_steps:()=>s.jsx("div",{className:"g2-preview g2-steps",children:[1,2,3].map(t=>s.jsxs("div",{className:"g2-step-row",children:[s.jsx("span",{className:"g2-step-dot"}),s.jsx(Bt,{width:`${70-t*10}%`,tone:t===3?"muted":"accent"})]},t))}),pv_daily_checklist:()=>s.jsx("div",{className:"g2-preview g2-checklist",children:["Login","Scan","Share","Claim"].map((t,e)=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:`g2-checkbox ${e<2?"checked":""}`}),s.jsx("span",{className:"g2-check-label",children:t}),s.jsx(Bt,{width:`${40+e*10}%`,tone:"accent",height:5})]},t))}),pv_contract_timer:()=>s.jsxs("div",{className:"g2-preview g2-contract",children:[s.jsxs("div",{className:"g2-contract-top",children:[s.jsx(Bt,{width:"80%",tone:"accent"}),s.jsx(Zt,{label:"7d"})]}),s.jsxs("div",{className:"g2-contract-body",children:[s.jsx(Bt,{width:"100%",tone:"muted",height:6}),s.jsx(Bt,{width:"65%",tone:"warning",height:6})]}),s.jsx("div",{className:"g2-contract-tear"})]}),pv_bounty_target:()=>s.jsxs("div",{className:"g2-preview g2-row",children:[s.jsxs("div",{className:"g2-target",children:[s.jsx("div",{className:"g2-target-ring"}),s.jsx("div",{className:"g2-target-dot"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"60%",tone:"accent"}),s.jsx(Bt,{width:"45%",tone:"success"}),s.jsx(Zt,{label:"Reward"})]})]}),pv_objective_chips:()=>s.jsxs("div",{className:"g2-preview g2-chip-stack",children:[s.jsx(Zt,{label:"Win 2 matches"}),s.jsx(Zt,{label:"Scan 3"}),s.jsx(Zt,{label:"Share once"})]}),pv_quest_chain_nodes:()=>s.jsx("div",{className:"g2-preview g2-node-chain",children:[0,1,2,3,4].map(t=>s.jsxs(W.Fragment,{children:[s.jsx("div",{className:`g2-node ${t<3?"active":""}`}),t<4?s.jsx("div",{className:"g2-node-connector"}):null]},t))}),pv_reward_bundle:()=>s.jsxs("div",{className:"g2-preview g2-row g2-space-between",children:[s.jsx("div",{className:"g2-loot g2-loot-gem"}),s.jsx("div",{className:"g2-loot g2-loot-coin"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"+250 XP"}),s.jsx(Zt,{label:"+2 keys"})]})]})]}),pv_sidequest_compact:()=>s.jsxs("div",{className:"g2-preview g2-row g2-sidequest",children:[s.jsx("div",{className:"g2-sidequest-tag",children:"Side"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"60%",tone:"accent"}),s.jsx(Bt,{width:"35%",tone:"muted"})]}),s.jsx("div",{className:"g2-arrow-right"})]}),pv_claim_states:()=>s.jsxs("div",{className:"g2-preview g2-claims",children:[s.jsx("div",{className:"g2-claim-btn enabled",children:"Claim"}),s.jsx("div",{className:"g2-claim-btn disabled",children:"Locked"})]}),pv_difficulty_tags:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(Zt,{label:"Easy"}),s.jsx(Zt,{label:"Hard"}),s.jsx(Zt,{label:"Insane"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"40%",tone:"success"}),s.jsx(Bt,{width:"60%",tone:"warning"}),s.jsx(Bt,{width:"80%",tone:"danger"})]})]}),pv_boss_hp_segmented:()=>s.jsxs("div",{className:"g2-preview g2-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g2-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g2-marker",style:{left:"72%"}})]}),pv_dual_progress_marker:()=>s.jsxs("div",{className:"g2-preview g2-col g2-gap-xs",children:[s.jsx(Bt,{width:"85%",tone:"accent",height:10}),s.jsxs("div",{className:"g2-dual-overlay",children:[s.jsx(Bt,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"60%"}}),s.jsx("div",{className:"g2-marker muted",style:{left:"85%"}})]})]}),pv_segment_track_10:()=>s.jsx("div",{className:"g2-preview g2-segment-track",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g2-segment ${e<6?"active":""}`},e))}),pv_donut_completion:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-donut",children:[s.jsx("div",{className:"g2-donut-fill"}),s.jsx("div",{className:"g2-donut-hole",children:"72%"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"50%",tone:"accent"}),s.jsx(Bt,{width:"40%",tone:"muted"})]})]}),pv_battery_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsxs("div",{className:"g2-battery",children:[s.jsx("div",{className:"g2-battery-cap"}),s.jsx("div",{className:"g2-battery-fill"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Zt,{label:"82%"}),s.jsx(Bt,{width:"70%",tone:"accent"})]})]}),pv_thermo_vertical:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-thermo",children:s.jsx("div",{className:"g2-thermo-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"40%",tone:"warning"}),s.jsx(Bt,{width:"30%",tone:"muted"})]})]}),pv_xp_ticks:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-xpbar",children:[s.jsx("div",{className:"g2-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g2-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(Zt,{label:"Level 42"})]}),pv_multibar_stats5:()=>s.jsx("div",{className:"g2-preview g2-stats5",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g2-stat-row",children:[s.jsx("span",{className:"g2-stat-label",children:t}),s.jsx(Bt,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_risk_meter:()=>s.jsxs("div",{className:"g2-preview g2-risk",children:[s.jsx("div",{className:"g2-risk-arc",children:s.jsx("div",{className:"g2-risk-pointer"})}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"Risk"}),s.jsx(Zt,{label:"68%"})]})]}),pv_perfect_run:()=>s.jsxs("div",{className:"g2-preview g2-perfect",children:[s.jsx(Bt,{width:"100%",tone:"success",height:12}),s.jsx("div",{className:"g2-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g2-check-row",children:[s.jsx("span",{className:"g2-checkbox checked"}),s.jsx("span",{className:"g2-check-label",children:t})]},t))})]}),pv_podium_top3:()=>s.jsx("div",{className:"g2-preview g2-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g2-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),pv_ladder_rungs:()=>s.jsx("div",{className:"g2-preview g2-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g2-rung ${e===2?"active":""}`},e))}),pv_league_tiers:()=>s.jsxs("div",{className:"g2-preview g2-row g2-league",children:[s.jsx("div",{className:"g2-league-shield"}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"70%",tone:"accent"}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"Bronze"}),s.jsx(Zt,{label:"Diamond"})]})]})]}),pv_delta_chip:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(Zt,{label:"^ +12"}),s.jsx(Zt,{label:"v -3"}),s.jsx(Bt,{width:"50%",tone:"accent"})]}),pv_percentile_gauge:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-percent-gauge",children:s.jsx("div",{className:"g2-percent-needle"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Zt,{label:"Top 5%"}),s.jsx(Bt,{width:"40%",tone:"accent"})]})]}),pv_rival_slot:()=>s.jsxs("div",{className:"g2-preview g2-rival",children:[s.jsxs("div",{className:"g2-vs-block",children:[s.jsx(Bt,{width:"60%",tone:"accent"}),s.jsx(Zt,{label:"You"})]}),s.jsx("div",{className:"g2-vs-mid",children:"VS"}),s.jsxs("div",{className:"g2-vs-block rival",children:[s.jsx(Bt,{width:"55%",tone:"warning"}),s.jsx(Zt,{label:"Rival"})]})]}),pv_promo_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone promo",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Promotion Zone"})]}),pv_relegation_zone:()=>s.jsxs("div",{className:"g2-preview g2-zone danger",children:[s.jsx("div",{className:"g2-zone-band"}),s.jsx("div",{className:"g2-zone-label",children:"Relegation"})]}),pv_top5_list:()=>s.jsx("div",{className:"g2-preview g2-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g2-list-row",children:[s.jsx("span",{className:"g2-list-num",children:e+1}),s.jsx(Bt,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6})]},t))}),pv_rank_step_history:()=>s.jsxs("div",{className:"g2-preview g2-rank-history",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g2-rank-node",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g2-rank-line"})]}),pv_split_compare:()=>s.jsxs("div",{className:"g2-preview g2-split",children:[s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"70%",tone:"accent"}),s.jsx(Bt,{width:"40%",tone:"accent"})]}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"60%",tone:"warning"}),s.jsx(Bt,{width:"50%",tone:"warning"})]})]}),pv_you_vs_avg_bars:()=>s.jsxs("div",{className:"g2-preview g2-col",children:[s.jsxs("div",{className:"g2-overlay-bars",children:[s.jsx(Bt,{width:"80%",tone:"accent",height:10}),s.jsx(Bt,{width:"55%",tone:"muted",height:10})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"You"}),s.jsx(Zt,{label:"Server Avg"})]})]}),pv_bestof3_dots:()=>s.jsx("div",{className:"g2-preview g2-row g2-gap-sm",children:[0,1,2].map(t=>s.jsx("div",{className:`g2-round-dot ${t<2?"won":""}`},t))}),pv_duel_outcome:()=>s.jsxs("div",{className:"g2-preview g2-duel",children:[s.jsx("div",{className:"g2-shield win",children:"Win"}),s.jsx("div",{className:"g2-shield loss",children:"Loss"})]}),pv_advantage_meter:()=>s.jsxs("div",{className:"g2-preview g2-meter",children:[s.jsxs("div",{className:"g2-meter-track",children:[s.jsx("div",{className:"g2-meter-fill"}),s.jsx("div",{className:"g2-meter-pointer",style:{left:"62%"}})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"Advantage"}),s.jsx(Zt,{label:"+12%"})]})]}),pv_kpi_tiles_4:()=>s.jsx("div",{className:"g2-preview g2-kpi-grid",children:["KPI","CTR","UPT","LTV"].map((t,e)=>s.jsxs("div",{className:"g2-kpi-tile",children:[s.jsx("div",{className:"g2-kpi-label",children:t}),s.jsx(Bt,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_delta_chips_breakdown:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(Zt,{label:"+18"}),s.jsx(Zt,{label:"-5"}),s.jsx(Zt,{label:"+2"}),s.jsx(Zt,{label:"-1"})]}),pv_mirror_neutral:()=>s.jsxs("div",{className:"g2-preview g2-mirror",children:[s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Bt,{width:"60%",tone:"accent"})}),s.jsx("div",{className:"g2-divider"}),s.jsx("div",{className:"g2-mirror-half",children:s.jsx(Bt,{width:"60%",tone:"warning"})})]}),pv_radar_polygon:()=>s.jsx("div",{className:"g2-preview g2-radar",children:s.jsxs("svg",{viewBox:"0 0 120 120",children:[s.jsx("polygon",{points:"60,15 100,50 90,105 30,105 20,50",className:"g2-radar-bg"}),s.jsx("polygon",{points:"60,30 90,55 80,90 40,90 30,55",className:"g2-radar-fill"})]})}),pv_gap_to_next:()=>s.jsxs("div",{className:"g2-preview g2-gap-bar",children:[s.jsx(Bt,{width:"80%",tone:"accent",height:8}),s.jsx("div",{className:"g2-marker",style:{left:"65%"}}),s.jsx("div",{className:"g2-gap-label",children:"Gap: 12 pts"})]}),pv_guild_roles:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(Zt,{label:"Leader"}),s.jsx(Zt,{label:"Officer"}),s.jsx(Zt,{label:"Member"})]}),pv_contrib_bars:()=>s.jsx("div",{className:"g2-preview g2-col g2-gap-xs",children:["Ava","Ben","Caro"].map((t,e)=>s.jsxs("div",{className:"g2-contrib-row",children:[s.jsx("span",{className:"g2-contrib-name",children:t}),s.jsx(Bt,{width:`${50+e*15}%`,tone:"accent",height:6})]},t))}),pv_spotlight_card:()=>s.jsxs("div",{className:"g2-preview g2-spotlight",children:[s.jsx("div",{className:"g2-spotlight-glow"}),s.jsx(Bt,{width:"70%",tone:"accent"}),s.jsx(Zt,{label:"Spotlight"})]}),pv_guild_power_meter:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-power-donut",children:s.jsx("div",{className:"g2-power-fill"})}),s.jsxs("div",{className:"g2-col",children:[s.jsx(Bt,{width:"60%",tone:"success"}),s.jsx(Bt,{width:"40%",tone:"warning"})]})]}),pv_slots_open_filled:()=>s.jsx("div",{className:"g2-preview g2-slots",children:[0,1,2,3].map(t=>s.jsx("div",{className:`g2-slot-card ${t<2?"open":"filled"}`},t))}),pv_war_readiness:()=>s.jsxs("div",{className:"g2-preview g2-row g2-gap-sm",children:[s.jsx(Zt,{label:"Ready"}),s.jsx(Zt,{label:"Armor"}),s.jsx(Zt,{label:"Supplies"}),s.jsx(Bt,{width:"50%",tone:"accent"})]}),pv_activity_pulse:()=>s.jsx("div",{className:"g2-preview g2-pulse",children:Array.from({length:14}).map((t,e)=>s.jsx("div",{className:"g2-pulse-bar",style:{height:`${10+e%5*8}px`}},e))}),pv_alliance_link:()=>s.jsxs("div",{className:"g2-preview g2-row g2-center",children:[s.jsx("div",{className:"g2-link-node"}),s.jsx("div",{className:"g2-link-chain"}),s.jsx("div",{className:"g2-link-node"})]}),pv_pinned_announcement:()=>s.jsxs("div",{className:"g2-preview g2-pinned",children:[s.jsx("div",{className:"g2-pin"}),s.jsx(Bt,{width:"70%",tone:"accent"}),s.jsx(Bt,{width:"40%",tone:"muted"})]}),pv_trophy_shelf:()=>s.jsxs("div",{className:"g2-preview g2-shelf",children:[s.jsx("div",{className:"g2-trophies",children:[0,1,2].map(t=>s.jsx("div",{className:"g2-trophy"},t))}),s.jsx("div",{className:"g2-shelf-wood"})]})},pke=t=>SI[t]?SI[t]():s.jsx("div",{className:"g2-preview",children:s.jsx(Bt,{width:"60%",tone:"accent"})});function mke(){return s.jsxs("div",{className:"g2-root",children:[s.jsxs("header",{className:"g2-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 2"}),s.jsx("p",{className:"g2-sub",children:"50 unique mock widgets mapped to the original playground list. All static and scoped."})]}),s.jsxs("div",{className:"g2-pill-row",children:[s.jsx(Zt,{label:"mock"}),s.jsx(Zt,{label:"concept"}),s.jsx(Zt,{label:"ui"})]})]}),s.jsx("nav",{className:"g2-toc",children:jI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g2-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g2-sections",children:jI.map(t=>s.jsxs("details",{className:"g2-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g2-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-section-title",children:t.title}),s.jsx("div",{className:"g2-section-sub",children:t.description})]}),s.jsxs("span",{className:"g2-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g2-grid",children:t.items.map(e=>s.jsxs("div",{className:"g2-card",children:[s.jsxs("div",{className:"g2-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g2-card-title",children:e.title}),s.jsx("div",{className:"g2-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g2-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(Zt,{label:n},n))})]}),pke(e.previewId)]},e.id))})]},t.id))})]})}const NI=[{id:"badges",title:"Badges & Titles",description:"Unlocks, nameplates, and medal visuals.",items:[{id:"1",categoryId:"badges",title:"Achievement Unlocked",subtitle:"Shimmer check",tags:["mock","ui"],previewId:"g3_badge_unlock_ring"},{id:"2",categoryId:"badges",title:"Locked Badge Mask",subtitle:"Silhouette lock",tags:["mock"],previewId:"g3_badge_lock_mask"},{id:"3",categoryId:"badges",title:"Rarity Fan",subtitle:"Common to mythic fan",tags:["concept"],previewId:"g3_rarity_fan"},{id:"4",categoryId:"badges",title:"Mastery Tiers",subtitle:"I-V concentric",tags:["ui"],previewId:"g3_mastery_tiers"},{id:"5",categoryId:"badges",title:"Title Plate Frame",subtitle:"Nameplate glow",tags:["mock"],previewId:"g3_title_plate"},{id:"6",categoryId:"badges",title:"Medal Banner",subtitle:"Bronze/Silver/Gold bar",tags:["ui"],previewId:"g3_medal_banner"},{id:"7",categoryId:"badges",title:"Badge Glow Card",subtitle:"Starburst pop",tags:["concept"],previewId:"g3_badge_glow"},{id:"8",categoryId:"badges",title:"Approved Stamp",subtitle:"Circular stamp",tags:["mock"],previewId:"g3_stamp_card"},{id:"9",categoryId:"badges",title:"Showcase Strip",subtitle:"Static carousel",tags:["ui"],previewId:"g3_showcase_strip"},{id:"10",categoryId:"badges",title:"First Scan Popover",subtitle:"Speech bubble",tags:["mock"],previewId:"g3_first_popover"}]},{id:"progress",title:"Progress & Gauges",description:"Bars, gauges, and segmented tracks.",items:[{id:"11",categoryId:"progress",title:"Boss Segments",subtitle:"Phase chunks",tags:["mock"],previewId:"g3_boss_segments"},{id:"12",categoryId:"progress",title:"Dual Progress",subtitle:"You vs avg marker",tags:["ui"],previewId:"g3_dual_progress"},{id:"13",categoryId:"progress",title:"Segment Rail",subtitle:"10-block rail",tags:["concept"],previewId:"g3_segment_rail"},{id:"14",categoryId:"progress",title:"Donut Completion",subtitle:"Ring percent",tags:["mock"],previewId:"g3_donut_completion"},{id:"15",categoryId:"progress",title:"Battery Meter",subtitle:"Energy cell",tags:["ui"],previewId:"g3_battery_meter"},{id:"16",categoryId:"progress",title:"Thermo Column",subtitle:"Vertical fill",tags:["mock"],previewId:"g3_thermo_column"},{id:"17",categoryId:"progress",title:"XP With Ticks",subtitle:"Micro ticks",tags:["ui"],previewId:"g3_xp_ticks"},{id:"18",categoryId:"progress",title:"Stat Stack",subtitle:"Five attributes",tags:["mock"],previewId:"g3_stat_stack"},{id:"19",categoryId:"progress",title:"Risk Arc",subtitle:"Arc meter",tags:["concept"],previewId:"g3_risk_arc"},{id:"20",categoryId:"progress",title:"Perfect Run",subtitle:"Checklist + bar",tags:["ui"],previewId:"g3_perfect_run"}]},{id:"rankings",title:"Rankings & Competitive",description:"Podiums, ladders, deltas, and rivals.",items:[{id:"21",categoryId:"rankings",title:"Podium Trio",subtitle:"Top 3 heights",tags:["mock"],previewId:"g3_podium_trio"},{id:"22",categoryId:"rankings",title:"Ladder Rungs",subtitle:"Rung climb",tags:["ui"],previewId:"g3_ladder_rungs"},{id:"23",categoryId:"rankings",title:"League Shield",subtitle:"Tier shield",tags:["concept"],previewId:"g3_league_shield"},{id:"24",categoryId:"rankings",title:"Delta Chips",subtitle:"Up/Down pills",tags:["ui"],previewId:"g3_delta_chips"},{id:"25",categoryId:"rankings",title:"Percent Gauge",subtitle:"Needle gauge",tags:["mock"],previewId:"g3_percent_gauge"},{id:"26",categoryId:"rankings",title:"Rival Split",subtitle:"You vs rival",tags:["concept"],previewId:"g3_rival_split"},{id:"27",categoryId:"rankings",title:"Promotion Band",subtitle:"Green band",tags:["ui"],previewId:"g3_promo_band"},{id:"28",categoryId:"rankings",title:"Relegation Band",subtitle:"Red band",tags:["mock"],previewId:"g3_relegation_band"},{id:"29",categoryId:"rankings",title:"Top Five Rows",subtitle:"Ranked rows",tags:["ui"],previewId:"g3_top_five"},{id:"30",categoryId:"rankings",title:"Rank Steps",subtitle:"Step chart",tags:["mock"],previewId:"g3_rank_steps"}]},{id:"collections",title:"Collections & Inventory",description:"Binders, stickers, and milestones.",items:[{id:"31",categoryId:"collections",title:"Binder Slots",subtitle:"Grid slots",tags:["mock"],previewId:"g3_binder_slots"},{id:"32",categoryId:"collections",title:"Set Progress",subtitle:"3 of 5 lit",tags:["ui"],previewId:"g3_set_progress"},{id:"33",categoryId:"collections",title:"Missing Checklist",subtitle:"Remaining shards",tags:["mock"],previewId:"g3_missing_list"},{id:"34",categoryId:"collections",title:"Rarity Rows",subtitle:"Tier lines",tags:["concept"],previewId:"g3_rarity_rows"},{id:"35",categoryId:"collections",title:"Legendary Spread",subtitle:"Book spread",tags:["ui"],previewId:"g3_legendary_spread"},{id:"36",categoryId:"collections",title:"Pet Album",subtitle:"Avatar minis",tags:["mock"],previewId:"g3_pet_album"},{id:"37",categoryId:"collections",title:"Sticker Sheet",subtitle:"Sticker grid",tags:["concept"],previewId:"g3_sticker_sheet"},{id:"38",categoryId:"collections",title:"Duplicate Dial",subtitle:"Count dial",tags:["ui"],previewId:"g3_duplicate_dial"},{id:"39",categoryId:"collections",title:"Trade/Lock Tags",subtitle:"State chips",tags:["mock"],previewId:"g3_trade_lock"},{id:"40",categoryId:"collections",title:"Collection Timeline",subtitle:"Milestone nodes",tags:["ui"],previewId:"g3_collection_timeline"}]},{id:"micro",title:"Micro Interactions",description:"Toasts, tabs, ribbons, and overlays.",items:[{id:"41",categoryId:"micro",title:"Unlock Glow",subtitle:"Glowing card",tags:["mock"],previewId:"g3_unlock_glow"},{id:"42",categoryId:"micro",title:"Inspect Tooltip",subtitle:"Hover tip",tags:["ui"],previewId:"g3_inspect_tooltip"},{id:"43",categoryId:"micro",title:"Confetti Burst",subtitle:"Sprinkled dots",tags:["concept"],previewId:"g3_confetti_burst"},{id:"44",categoryId:"micro",title:"Corner Ribbon",subtitle:"New ribbon",tags:["mock"],previewId:"g3_corner_ribbon"},{id:"45",categoryId:"micro",title:"Locked Blur",subtitle:"Frosted overlay",tags:["ui"],previewId:"g3_locked_blur"},{id:"46",categoryId:"micro",title:"Pulse Progress",subtitle:"Animated pulse",tags:["concept"],previewId:"g3_pulse_progress"},{id:"47",categoryId:"micro",title:"Mini Tabs",subtitle:"Inline tab pills",tags:["ui"],previewId:"g3_mini_tabs"},{id:"48",categoryId:"micro",title:"Expandable Block",subtitle:"Details reveal",tags:["mock"],previewId:"g3_expand_block"},{id:"49",categoryId:"micro",title:"Toast Message",subtitle:"Inline toast",tags:["ui"],previewId:"g3_toast_message"},{id:"50",categoryId:"micro",title:"Quest Failed",subtitle:"Warning slab",tags:["mock"],previewId:"g3_quest_failed"}]}],Zn=({label:t})=>s.jsx("span",{className:"g3-pill",children:t}),bs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g3-bar tone-${e}`,style:{width:t,height:n}}),vf=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g3-dot tone-${t}`,style:{width:e,height:e}}),gke=t=>{const e=fke[t];return e?e():s.jsx("div",{className:"g3-preview g3-fallback"})},fke={g3_badge_unlock_ring:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring success",children:s.jsx("span",{className:"g3-checkmark"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(bs,{width:"80%",tone:"success"}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(Zn,{label:"Unlocked"}),s.jsx(Zn,{label:"+150 XP"})]})]})]}),g3_badge_lock_mask:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-icon ring muted",children:s.jsx("div",{className:"g3-lock-hole"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx("div",{className:"g3-mask-figure"}),s.jsx(bs,{width:"60%",tone:"muted"})]})]}),g3_rarity_fan:()=>s.jsx("div",{className:"g3-preview g3-row g3-gap-sm",children:["muted","accent","success","warning","danger"].map(t=>s.jsx("div",{className:`g3-diamond tone-${t}`},t))}),g3_mastery_tiers:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-ring-stack",children:[1,2,3].map(t=>s.jsx("div",{className:`g3-ring-${t}`},t))}),s.jsxs("div",{className:"g3-col",children:[s.jsx(bs,{width:"65%"}),s.jsxs("div",{className:"g3-dot-row",children:[s.jsx(vf,{}),s.jsx(vf,{tone:"success"}),s.jsx(vf,{tone:"warning"})]})]})]}),g3_title_plate:()=>s.jsxs("div",{className:"g3-preview g3-plate",children:[s.jsx("div",{className:"g3-plate-left"}),s.jsx("div",{className:"g3-plate-text",children:"Title"}),s.jsx("div",{className:"g3-plate-right"})]}),g3_medal_banner:()=>s.jsxs("div",{className:"g3-preview g3-row g3-space-between",children:[s.jsx("div",{className:"g3-medal bronze"}),s.jsx("div",{className:"g3-medal silver"}),s.jsx("div",{className:"g3-medal gold"})]}),g3_badge_glow:()=>s.jsxs("div",{className:"g3-preview g3-row",children:[s.jsx("div",{className:"g3-starburst"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(bs,{width:"70%"}),s.jsx(bs,{width:"45%",tone:"success"})]})]}),g3_stamp_card:()=>s.jsxs("div",{className:"g3-preview g3-stamp-card",children:[s.jsx("div",{className:"g3-stamp-ring",children:"APPROVED"}),s.jsx(bs,{width:"60%"})]}),g3_showcase_strip:()=>s.jsxs("div",{className:"g3-preview g3-carousel",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-slide ${t===1?"active":""}`},t)),s.jsx("div",{className:"g3-dot-row",children:[0,1,2,3].map(t=>s.jsx(vf,{tone:t===1?"accent":"muted"},t))})]}),g3_first_popover:()=>s.jsxs("div",{className:"g3-preview g3-pop",children:[s.jsxs("div",{className:"g3-pop-bubble",children:[s.jsx("div",{className:"g3-pop-title",children:"First scan"}),s.jsx(bs,{width:"70%"})]}),s.jsx("div",{className:"g3-pop-arrow"})]}),g3_boss_segments:()=>s.jsxs("div",{className:"g3-preview g3-bossbar",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g3-boss-segment ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g3-marker",style:{left:"72%"}})]}),g3_dual_progress:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsx(bs,{width:"85%"}),s.jsxs("div",{className:"g3-dual",children:[s.jsx(bs,{width:"60%",tone:"success",height:8}),s.jsx("div",{className:"g3-marker",style:{left:"60%"}}),s.jsx("div",{className:"g3-marker muted",style:{left:"85%"}})]})]}),g3_segment_rail:()=>s.jsx("div",{className:"g3-preview g3-rail",children:Array.from({length:10}).map((t,e)=>s.jsx("div",{className:`g3-rail-segment ${e<6?"active":""}`},e))}),g3_donut_completion:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-donut",children:[s.jsx("div",{className:"g3-donut-fill"}),s.jsx("div",{className:"g3-donut-hole",children:"72%"})]}),s.jsx(bs,{width:"50%"})]}),g3_battery_meter:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsxs("div",{className:"g3-battery",children:[s.jsx("div",{className:"g3-battery-cap"}),s.jsx("div",{className:"g3-battery-fill"})]}),s.jsx(Zn,{label:"82%"})]}),g3_thermo_column:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-thermo",children:s.jsx("div",{className:"g3-thermo-fill"})}),s.jsxs("div",{className:"g3-col",children:[s.jsx(bs,{width:"40%",tone:"warning"}),s.jsx(bs,{width:"30%",tone:"muted"})]})]}),g3_xp_ticks:()=>s.jsxs("div",{className:"g3-preview g3-col",children:[s.jsxs("div",{className:"g3-xpbar",children:[s.jsx("div",{className:"g3-xp-fill"}),Array.from({length:8}).map((t,e)=>s.jsx("span",{className:"g3-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsx(Zn,{label:"Lvl 42"})]}),g3_stat_stack:()=>s.jsx("div",{className:"g3-preview g3-stats",children:["STR","DEX","INT","CON","LCK"].map((t,e)=>s.jsxs("div",{className:"g3-stat-row",children:[s.jsx("span",{className:"g3-stat-label",children:t}),s.jsx(bs,{width:`${40+e*10}%`,tone:e%2===0?"accent":"success"})]},t))}),g3_risk_arc:()=>s.jsxs("div",{className:"g3-preview g3-risk",children:[s.jsx("div",{className:"g3-risk-arc",children:s.jsx("div",{className:"g3-risk-pointer"})}),s.jsx(Zn,{label:"68%"})]}),g3_perfect_run:()=>s.jsxs("div",{className:"g3-preview g3-perfect",children:[s.jsx(bs,{width:"100%",tone:"success"}),s.jsx("div",{className:"g3-checklist tiny",children:["No deaths","No errors","All chests"].map(t=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:"g3-checkbox checked"}),s.jsx("span",{className:"g3-check-label",children:t})]},t))})]}),g3_podium_trio:()=>s.jsx("div",{className:"g3-preview g3-podium",children:[{h:50,tone:"silver"},{h:70,tone:"gold"},{h:40,tone:"bronze"}].map((t,e)=>s.jsxs("div",{className:`g3-podium-col ${t.tone}`,style:{height:t.h},children:["#",e+1]},e))}),g3_ladder_rungs:()=>s.jsx("div",{className:"g3-preview g3-ladder",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-rung ${e===2?"active":""}`},e))}),g3_league_shield:()=>s.jsxs("div",{className:"g3-preview g3-row g3-league",children:[s.jsx("div",{className:"g3-league-shield"}),s.jsx(bs,{width:"70%"})]}),g3_delta_chips:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(Zn,{label:"^ +12"}),s.jsx(Zn,{label:"v -3"}),s.jsx(bs,{width:"50%"})]}),g3_percent_gauge:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-percent",children:s.jsx("div",{className:"g3-percent-needle"})}),s.jsx(Zn,{label:"Top 5%"})]}),g3_rival_split:()=>s.jsxs("div",{className:"g3-preview g3-rival",children:[s.jsxs("div",{className:"g3-vs",children:[s.jsx(bs,{width:"60%"}),s.jsx(Zn,{label:"You"})]}),s.jsx("div",{className:"g3-vs-mid",children:"VS"}),s.jsxs("div",{className:"g3-vs rival",children:[s.jsx(bs,{width:"55%",tone:"warning"}),s.jsx(Zn,{label:"Rival"})]})]}),g3_promo_band:()=>s.jsxs("div",{className:"g3-preview g3-zone promo",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Promotion"})]}),g3_relegation_band:()=>s.jsxs("div",{className:"g3-preview g3-zone danger",children:[s.jsx("div",{className:"g3-zone-band"}),s.jsx("div",{className:"g3-zone-label",children:"Relegation"})]}),g3_top_five:()=>s.jsx("div",{className:"g3-preview g3-list",children:["Alpha","Bravo","Charlie","Delta","Echo"].map((t,e)=>s.jsxs("div",{className:"g3-list-row",children:[s.jsx("span",{className:"g3-list-num",children:e+1}),s.jsx(bs,{width:`${70-e*8}%`,tone:e<2?"accent":"muted"})]},t))}),g3_rank_steps:()=>s.jsxs("div",{className:"g3-preview g3-rank-steps",children:[Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g3-step-dot",style:{bottom:`${e*8}%`,left:`${e*16}%`}},e)),s.jsx("div",{className:"g3-step-line"})]}),g3_binder_slots:()=>s.jsx("div",{className:"g3-preview g3-grid-cards",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g3-slot ${e<3?"filled":""}`},e))}),g3_set_progress:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g3-piece ${e<3?"active":""}`},e)),s.jsx(Zn,{label:"3 / 5"})]}),g3_missing_list:()=>s.jsx("div",{className:"g3-preview g3-checklist",children:["Shard A","Shard B","Shard C"].map((t,e)=>s.jsxs("div",{className:"g3-check-row",children:[s.jsx("span",{className:`g3-checkbox ${e===2?"":"checked"}`}),s.jsx("span",{className:"g3-check-label",children:t})]},t))}),g3_rarity_rows:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsx(bs,{width:"90%",tone:"muted"}),s.jsx(bs,{width:"70%",tone:"accent"}),s.jsx(bs,{width:"50%",tone:"success"}),s.jsx(bs,{width:"40%",tone:"warning"}),s.jsx(bs,{width:"30%",tone:"danger"})]}),g3_legendary_spread:()=>s.jsxs("div",{className:"g3-preview g3-book",children:[s.jsx("div",{className:"g3-book-page left"}),s.jsx("div",{className:"g3-book-page right"})]}),g3_pet_album:()=>s.jsx("div",{className:"g3-preview g3-pet-grid",children:Array.from({length:6}).map((t,e)=>s.jsxs("div",{className:"g3-pet-avatar",children:[s.jsx("span",{className:"g3-pet-ear"}),s.jsx("span",{className:"g3-pet-ear"})]},e))}),g3_sticker_sheet:()=>s.jsx("div",{className:"g3-preview g3-sticker-sheet",children:Array.from({length:4}).map((t,e)=>s.jsx("div",{className:"g3-sticker"},e))}),g3_duplicate_dial:()=>s.jsxs("div",{className:"g3-preview g3-row g3-center",children:[s.jsx("div",{className:"g3-counter",children:s.jsx("div",{className:"g3-counter-needle"})}),s.jsx(Zn,{label:"x4"})]}),g3_trade_lock:()=>s.jsxs("div",{className:"g3-preview g3-row g3-gap-sm",children:[s.jsx(Zn,{label:"Tradeable"}),s.jsx(Zn,{label:"Locked"}),s.jsx(bs,{width:"40%"})]}),g3_collection_timeline:()=>s.jsxs("div",{className:"g3-preview g3-timeline",children:[[10,25,50,100].map((t,e)=>s.jsx("div",{className:"g3-timeline-node",style:{left:`${e*25}%`},children:s.jsx("span",{className:"g3-timeline-label",children:t})},t)),s.jsx("div",{className:"g3-timeline-line"})]}),g3_unlock_glow:()=>s.jsx("div",{className:"g3-preview g3-glow-card",children:s.jsx(bs,{width:"60%",tone:"success"})}),g3_inspect_tooltip:()=>s.jsxs("div",{className:"g3-preview g3-tooltip-card",children:[s.jsx("div",{className:"g3-tooltip-box",children:"Inspect"}),s.jsx("div",{className:"g3-tooltip-tail"})]}),g3_confetti_burst:()=>s.jsx("div",{className:"g3-preview g3-confetti",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g3-confetti-dot"},e))}),g3_corner_ribbon:()=>s.jsxs("div",{className:"g3-preview g3-corner",children:[s.jsx("div",{className:"g3-corner-ribbon",children:"New"}),s.jsx(bs,{width:"60%"})]}),g3_locked_blur:()=>s.jsxs("div",{className:"g3-preview g3-locked",children:[s.jsx("div",{className:"g3-locked-mask"}),s.jsx("div",{className:"g3-lock-hole"})]}),g3_pulse_progress:()=>s.jsx("div",{className:"g3-preview g3-pulse-bar",children:s.jsx("div",{className:"g3-pulse-fill"})}),g3_mini_tabs:()=>s.jsxs("div",{className:"g3-preview g3-col g3-gap-xs",children:[s.jsxs("div",{className:"g3-tabs",children:[s.jsx("div",{className:"g3-tab active",children:"One"}),s.jsx("div",{className:"g3-tab",children:"Two"}),s.jsx("div",{className:"g3-tab",children:"Three"})]}),s.jsx(bs,{width:"70%"})]}),g3_expand_block:()=>s.jsxs("div",{className:"g3-preview g3-details",children:[s.jsx("div",{className:"g3-details-summary",children:"Details"}),s.jsxs("div",{className:"g3-details-body",children:[s.jsx(bs,{width:"60%",tone:"muted"}),s.jsx(bs,{width:"40%",tone:"muted"})]})]}),g3_toast_message:()=>s.jsxs("div",{className:"g3-preview g3-toast",children:[s.jsx("div",{className:"g3-toast-dot"}),s.jsx(bs,{width:"70%"})]}),g3_quest_failed:()=>s.jsxs("div",{className:"g3-preview g3-failed",children:[s.jsx("div",{className:"g3-warning-icon"}),s.jsxs("div",{className:"g3-col",children:[s.jsx(bs,{width:"60%",tone:"danger"}),s.jsx(bs,{width:"40%",tone:"muted"})]})]})};function vke(){return s.jsxs("div",{className:"g3-root",children:[s.jsxs("header",{className:"g3-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 3"}),s.jsx("p",{className:"g3-sub",children:"50 unique mock previews across 5 categories. All static and scoped to this page."})]}),s.jsxs("div",{className:"g3-pill-row",children:[s.jsx(Zn,{label:"mock"}),s.jsx(Zn,{label:"concept"}),s.jsx(Zn,{label:"ui"})]})]}),s.jsx("nav",{className:"g3-toc",children:NI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g3-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g3-sections",children:NI.map(t=>s.jsxs("details",{className:"g3-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g3-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-section-title",children:t.title}),s.jsx("div",{className:"g3-section-sub",children:t.description})]}),s.jsxs("span",{className:"g3-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g3-grid",children:t.items.map(e=>s.jsxs("div",{className:"g3-card",children:[s.jsxs("div",{className:"g3-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g3-card-title",children:e.title}),s.jsx("div",{className:"g3-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g3-pill-row",children:(e.tags||["mock"]).map(n=>s.jsx(Zn,{label:n},n))})]}),gke(e.previewId)]},e.id))})]},t.id))})]})}const kI=[{id:"controls",title:"Controls & Navigation",description:"Chips, toggles, sliders, and small navigation rails.",items:[{id:"1",categoryId:"controls",title:"Segmented Toggle Bar",subtitle:"3 states, active glow",tags:["UI"],previewId:"pv_ui_seg_toggle_3"},{id:"2",categoryId:"controls",title:"Icon Tab Rail",subtitle:"mini tabs with badges",tags:["UI"],previewId:"pv_ui_icon_tabs_badges"},{id:"3",categoryId:"controls",title:"Filter Chips Row",subtitle:"wrap + selected state",tags:["UI"],previewId:"pv_ui_filter_chips_wrap"},{id:"4",categoryId:"controls",title:"Sort Pill Switch",subtitle:"ASC/DESC pill",tags:["UI"],previewId:"pv_ui_sort_pill"},{id:"5",categoryId:"controls",title:"Search Field + Hint",subtitle:"inline hint + icon",tags:["UI"],previewId:"pv_ui_search_hint"},{id:"6",categoryId:"controls",title:"Dropdown Menu Stack",subtitle:"3 options + separators",tags:["UI"],previewId:"pv_ui_dropdown_stack"},{id:"7",categoryId:"controls",title:"Range Slider Track",subtitle:"ticks + thumb",tags:["UI"],previewId:"pv_ui_slider_ticks"},{id:"8",categoryId:"controls",title:"Stepper Control",subtitle:"prev/next + step dots",tags:["UI"],previewId:"pv_ui_stepper_dots"},{id:"9",categoryId:"controls",title:"Compact Pagination",subtitle:"1..5 + next",tags:["UI"],previewId:"pv_ui_pagination_compact"},{id:"10",categoryId:"controls",title:"Sticky Subnav",subtitle:"active underline",tags:["UI"],previewId:"pv_ui_sticky_subnav"}]},{id:"cards",title:"Cards, Frames, Overlays",description:"Mini cards, ribbons, overlays, and tooltip shells.",items:[{id:"11",categoryId:"cards",title:"Card Header Ribbon",subtitle:"angled label",tags:["UI"],previewId:"pv_ui_ribbon_header"},{id:"12",categoryId:"cards",title:"Corner Tag Overlay",subtitle:"top-right chip",tags:["UI"],previewId:"pv_ui_corner_tag"},{id:"13",categoryId:"cards",title:"Locked Overlay Blur",subtitle:"frosted lock",tags:["UI"],previewId:"pv_ui_locked_blur2"},{id:"14",categoryId:"cards",title:"Tooltip Bubble",subtitle:"arrow + shadow",tags:["UI"],previewId:"pv_ui_tooltip_bubble"},{id:"15",categoryId:"cards",title:"Popover Panel",subtitle:"title + actions",tags:["UI"],previewId:"pv_ui_popover_panel"},{id:"16",categoryId:"cards",title:"Modal Mini Mock",subtitle:"header/body/footer",tags:["UI"],previewId:"pv_ui_modal_mini"},{id:"17",categoryId:"cards",title:"Drawer Slide Mock",subtitle:"right drawer",tags:["UI"],previewId:"pv_ui_drawer_right"},{id:"18",categoryId:"cards",title:"Toast Stack",subtitle:"3 toasts",tags:["UI"],previewId:"pv_ui_toast_stack3"},{id:"19",categoryId:"cards",title:"Inline Callout",subtitle:"info box",tags:["UI"],previewId:"pv_ui_callout_inline"},{id:"20",categoryId:"cards",title:"Badge Cluster",subtitle:"3 badge styles",tags:["UI"],previewId:"pv_ui_badge_cluster"}]},{id:"progress",title:"Progress & Meters",description:"Bars, dials, ladders, and dual markers.",items:[{id:"21",categoryId:"progress",title:"XP Bar with Ticks",subtitle:"level ticks",tags:["UI"],previewId:"pv_ui_xp_ticks2"},{id:"22",categoryId:"progress",title:"Dual Marker Bar",subtitle:"avg marker line",tags:["UI"],previewId:"pv_ui_dual_marker_bar"},{id:"23",categoryId:"progress",title:"Donut + Label",subtitle:"% inside ring",tags:["UI"],previewId:"pv_ui_donut_label"},{id:"24",categoryId:"progress",title:"Segmented Track 12",subtitle:"filled segments",tags:["UI"],previewId:"pv_ui_segment_track_12"},{id:"25",categoryId:"progress",title:"Vertical Thermometer",subtitle:"fill + cap",tags:["UI"],previewId:"pv_ui_thermo_cap"},{id:"26",categoryId:"progress",title:"Battery Gauge",subtitle:"4 cells",tags:["UI"],previewId:"pv_ui_battery_cells"},{id:"27",categoryId:"progress",title:"Multi Stat Microbars",subtitle:"5 bars",tags:["UI"],previewId:"pv_ui_microbars_5"},{id:"28",categoryId:"progress",title:"Streak Chain Meter",subtitle:"linked dots",tags:["UI"],previewId:"pv_ui_streak_chain"},{id:"29",categoryId:"progress",title:"Risk Dial",subtitle:"semi arc gauge",tags:["UI"],previewId:"pv_ui_risk_semi_dial"},{id:"30",categoryId:"progress",title:"Goal Ladder",subtitle:"milestones steps",tags:["UI"],previewId:"pv_ui_goal_ladder"}]},{id:"lists",title:"Lists & Tables",description:"Leaderboard rows, KPIs, timelines, and accordions.",items:[{id:"31",categoryId:"lists",title:"Mini Leaderboard",subtitle:"top 5 rows",tags:["UI"],previewId:"pv_ui_leaderboard_5"},{id:"32",categoryId:"lists",title:"Two-Column KPI List",subtitle:"label/value",tags:["UI"],previewId:"pv_ui_kpi_list_2col"},{id:"33",categoryId:"lists",title:"Table Row Hover",subtitle:"highlight row mock",tags:["UI"],previewId:"pv_ui_table_hover"},{id:"34",categoryId:"lists",title:"Rank Delta Row",subtitle:" chips in row",tags:["UI"],previewId:"pv_ui_rank_delta_row"},{id:"35",categoryId:"lists",title:"Avatar List Compact",subtitle:"3 entries",tags:["UI"],previewId:"pv_ui_avatar_list3"},{id:"36",categoryId:"lists",title:"Timeline Row",subtitle:"dots + text",tags:["UI"],previewId:"pv_ui_timeline_row"},{id:"37",categoryId:"lists",title:"Split Panel List",subtitle:"left labels, right values",tags:["UI"],previewId:"pv_ui_split_panel_list"},{id:"38",categoryId:"lists",title:"Chip List with Counts",subtitle:"chips + numbers",tags:["UI"],previewId:"pv_ui_chip_counts"},{id:"39",categoryId:"lists",title:"Accordion List",subtitle:"3 items expanded",tags:["UI"],previewId:"pv_ui_accordion3"},{id:"40",categoryId:"lists",title:"Activity Spark Row",subtitle:"sparkline + value",tags:["UI"],previewId:"pv_ui_spark_row"}]},{id:"animated",title:"Animated/Interactive UI",description:"Pulses, flips, shimmer, and motion stripes.",items:[{id:"41",categoryId:"animated",title:"Pulse Progress",subtitle:"subtle animated fill",tags:["UI"],previewId:"pv_ui_pulse_progress2"},{id:"42",categoryId:"animated",title:"Unlock Glow",subtitle:"animated border glow",tags:["UI"],previewId:"pv_ui_unlock_glow2"},{id:"43",categoryId:"animated",title:"Shimmer Skeleton",subtitle:"loading skeleton",tags:["UI"],previewId:"pv_ui_skeleton_shimmer"},{id:"44",categoryId:"animated",title:"Confetti Dots",subtitle:"sprinkle burst",tags:["UI"],previewId:"pv_ui_confetti_dots2"},{id:"45",categoryId:"animated",title:"Hover Lift Card",subtitle:"lift + shadow",tags:["UI"],previewId:"pv_ui_hover_lift"},{id:"46",categoryId:"animated",title:"Scan Ping Indicator",subtitle:"radial ping",tags:["UI"],previewId:"pv_ui_ping_indicator"},{id:"47",categoryId:"animated",title:"Badge Pop Animation",subtitle:"scale pop",tags:["UI"],previewId:"pv_ui_badge_pop"},{id:"48",categoryId:"animated",title:"Toggle Flip",subtitle:"switch animation",tags:["UI"],previewId:"pv_ui_toggle_flip"},{id:"49",categoryId:"animated",title:"Progress Stripe Motion",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui_stripe_motion"},{id:"50",categoryId:"animated",title:"Notification Bell Pulse",subtitle:"tiny pulse ring",tags:["UI"],previewId:"pv_ui_bell_pulse"}]}],Vr=({label:t})=>s.jsx("span",{className:"g4-pill",children:t}),qt=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g4-bar tone-${e}`,style:{width:t,height:n}}),xke={pv_ui_seg_toggle_3:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:["Stats","Roster","Logs"].map((t,e)=>s.jsx("div",{className:`g4-seg ${e===1?"active":""}`,children:t},t))}),pv_ui_icon_tabs_badges:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm",children:[{icon:"",badge:2},{icon:"",badge:4,active:!0},{icon:"",badge:1}].map(t=>s.jsxs("div",{className:`g4-icon-tab ${t.active?"active":""}`,children:[s.jsx("span",{className:"g4-icon",children:t.icon}),s.jsx("span",{className:"g4-badge",children:t.badge})]},t.icon))}),pv_ui_filter_chips_wrap:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:["All","PVE","PVP","Guild","Trades","Events"].map((t,e)=>s.jsx("span",{className:`g4-chip ${e===2?"active":""}`,children:t},t))}),pv_ui_sort_pill:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-space-between",children:[s.jsxs("div",{className:"g4-pill-toggle",children:[s.jsx("span",{className:"on",children:"ASC"}),s.jsx("span",{className:"off",children:"DESC"})]}),s.jsxs("div",{className:"g4-sort-arrows",children:[s.jsx("div",{className:"g4-arrow up"}),s.jsx("div",{className:"g4-arrow down"})]})]}),pv_ui_search_hint:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsxs("div",{className:"g4-search",children:[s.jsx("span",{className:"g4-search-icon",children:""}),s.jsx("input",{className:"g4-search-input",value:"search players",readOnly:!0})]}),s.jsx("span",{className:"g4-hint",children:"Press / to focus"})]}),pv_ui_dropdown_stack:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Newest","Top Rated","Favorites"].map((t,e)=>s.jsxs("div",{className:"g4-menu-row",children:[s.jsx("span",{children:t}),e===0&&s.jsx("span",{className:"g4-check",children:""})]},t))}),pv_ui_slider_ticks:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-slider",children:[s.jsxs("div",{className:"g4-slider-track",children:[s.jsx("div",{className:"g4-slider-fill",style:{width:"64%"}}),s.jsx("div",{className:"g4-slider-thumb",style:{left:"64%"}})]}),s.jsx("div",{className:"g4-slider-ticks",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{},e))})]}),s.jsxs("div",{className:"g4-slider-labels",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"64"}),s.jsx("span",{children:"100"})]})]}),pv_ui_stepper_dots:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("button",{className:"g4-btn ghost",children:"Prev"}),s.jsx("div",{className:"g4-row g4-gap-xs g4-center",children:Array.from({length:5}).map((t,e)=>s.jsx("span",{className:`g4-step-dot ${e<2?"done":e===2?"active":""}`},e))}),s.jsx("button",{className:"g4-btn solid",children:"Next"})]}),pv_ui_pagination_compact:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs g4-center",children:[[1,2,3,4,5].map(t=>s.jsx("span",{className:`g4-page ${t===3?"active":""}`,children:t},t)),s.jsx("span",{className:"g4-page ghost",children:"Next"})]}),pv_ui_sticky_subnav:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-sticky",children:["Overview","Teams","History","Files"].map((t,e)=>s.jsxs("div",{className:`g4-subtab ${e===1?"active":""}`,children:[t,e===1&&s.jsx("div",{className:"g4-underline"})]},t))}),pv_ui_ribbon_header:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-ribbon",children:"NEW"}),s.jsxs("div",{className:"g4-col g4-gap-xs",children:[s.jsx(qt,{width:"70%"}),s.jsx(qt,{width:"50%",tone:"muted"})]})]}),pv_ui_corner_tag:()=>s.jsxs("div",{className:"g4-preview g4-card-slab",children:[s.jsx("div",{className:"g4-corner-tag",children:"UI"}),s.jsx(qt,{width:"60%"}),s.jsx(qt,{width:"40%",tone:"muted"})]}),pv_ui_locked_blur2:()=>s.jsxs("div",{className:"g4-preview g4-locked",children:[s.jsx("div",{className:"g4-locked-blur"}),s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(qt,{width:"50%",tone:"muted"})]}),pv_ui_tooltip_bubble:()=>s.jsxs("div",{className:"g4-preview g4-tooltip",children:[s.jsxs("div",{className:"g4-tooltip-body",children:[s.jsx(qt,{width:"70%"}),s.jsx(qt,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g4-tooltip-arrow"})]}),pv_ui_popover_panel:()=>s.jsxs("div",{className:"g4-preview g4-popover",children:[s.jsxs("div",{className:"g4-popover-head",children:[s.jsx(qt,{width:"50%"}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx("span",{className:"g4-dot tone-muted"}),s.jsx("span",{className:"g4-dot tone-muted"})]})]}),s.jsx(qt,{width:"80%",tone:"muted"}),s.jsx(qt,{width:"60%",tone:"muted"})]}),pv_ui_modal_mini:()=>s.jsxs("div",{className:"g4-preview g4-modal",children:[s.jsxs("div",{className:"g4-modal-head",children:[s.jsx(qt,{width:"50%"}),s.jsx("span",{className:"g4-close",children:""})]}),s.jsxs("div",{className:"g4-modal-body",children:[s.jsx(qt,{width:"90%",tone:"muted"}),s.jsx(qt,{width:"70%",tone:"muted"})]}),s.jsxs("div",{className:"g4-modal-foot",children:[s.jsx("button",{className:"g4-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g4-btn solid",children:"Save"})]})]}),pv_ui_drawer_right:()=>s.jsxs("div",{className:"g4-preview g4-drawer",children:[s.jsxs("div",{className:"g4-drawer-body",children:[s.jsx(qt,{width:"65%"}),s.jsx(qt,{width:"40%",tone:"muted"})]}),s.jsxs("div",{className:"g4-drawer-panel",children:[s.jsx("div",{className:"g4-panel-handle"}),s.jsx(qt,{width:"70%"}),s.jsx(qt,{width:"50%",tone:"muted"})]})]}),pv_ui_toast_stack3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Synced","New invite","Warning"].map((t,e)=>s.jsxs("div",{className:`g4-toast ${e===2?"warn":""}`,children:[s.jsx("span",{className:"g4-dot tone-success"}),s.jsx("span",{children:t})]},t))}),pv_ui_callout_inline:()=>s.jsxs("div",{className:"g4-preview g4-callout",children:[s.jsx("div",{className:"g4-callout-icon",children:"i"}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"60%"}),s.jsx(qt,{width:"40%",tone:"muted"})]})]}),pv_ui_badge_cluster:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-xs",children:[s.jsx(Vr,{label:"Beta"}),s.jsx(Vr,{label:"Live"}),s.jsx(Vr,{label:"Pro"})]}),pv_ui_xp_ticks2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xs",children:[s.jsxs("div",{className:"g4-xpbar",children:[s.jsx("div",{className:"g4-xp-fill",style:{width:"78%"}}),Array.from({length:9}).map((t,e)=>s.jsx("span",{className:"g4-xp-tick",style:{left:`${(e+1)*10}%`}},e))]}),s.jsxs("div",{className:"g4-row g4-gap-xs",children:[s.jsx(Vr,{label:"Lvl 56"}),s.jsx(Vr,{label:"78%"})]})]}),pv_ui_dual_marker_bar:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsxs("div",{className:"g4-bar-line",children:[s.jsx(qt,{width:"92%"}),s.jsx("div",{className:"g4-marker",style:{left:"64%"}}),s.jsx("div",{className:"g4-marker muted",style:{left:"82%"}})]}),s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx(Vr,{label:"You"}),s.jsx(Vr,{label:"Avg"})]})]}),pv_ui_donut_label:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-donut",children:[s.jsx("div",{className:"g4-donut-fill"}),s.jsx("div",{className:"g4-donut-hole",children:"64%"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"60%"}),s.jsx(qt,{width:"40%",tone:"muted"})]})]}),pv_ui_segment_track_12:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-seg-track",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:`g4-track-seg ${e<8?"active":""}`},e))}),pv_ui_thermo_cap:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-thermo",children:[s.jsx("div",{className:"g4-thermo-fill",style:{height:"70%"}}),s.jsx("div",{className:"g4-thermo-cap"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"50%",tone:"warning"}),s.jsx(qt,{width:"30%",tone:"muted"})]})]}),pv_ui_battery_cells:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsxs("div",{className:"g4-battery",children:[[0,1,2,3].map(t=>s.jsx("div",{className:`g4-battery-cell ${t<3?"filled":""}`},t)),s.jsx("div",{className:"g4-battery-cap"})]}),s.jsx(Vr,{label:"75%"})]}),pv_ui_microbars_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["ATK","SPD","HP","DEF","LCK"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-xs g4-center",children:[s.jsx("span",{className:"g4-stat-label",children:t}),s.jsx(qt,{width:`${40+e*12}%`,tone:e%2===0?"accent":"success",height:6})]},t))}),pv_ui_streak_chain:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xxs g4-center",children:Array.from({length:8}).map((t,e)=>s.jsxs(W.Fragment,{children:[s.jsx("span",{className:`g4-chain-dot ${e<5?"active":""}`}),e<7&&s.jsx("div",{className:"g4-chain-link"})]},e))}),pv_ui_risk_semi_dial:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-semi-dial",children:s.jsx("div",{className:"g4-dial-needle",style:{transform:"rotate(30deg)"}})}),s.jsx(Vr,{label:"Risk 34%"})]}),pv_ui_goal_ladder:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs g4-ladder",children:[1,2,3,4].map((t,e)=>s.jsxs("div",{className:`g4-ladder-step ${e<2?"done":""}`,children:[s.jsx("span",{className:"g4-ladder-rung"}),s.jsx(qt,{width:`${40+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_leaderboard_5:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aster","Bloom","Cinder","Dawn","Echo"].map((t,e)=>s.jsxs("div",{className:`g4-row g4-gap-sm g4-leader-row ${e===0?"active":""}`,children:[s.jsx("span",{className:"g4-rank-num",children:e+1}),s.jsx(qt,{width:`${70-e*8}%`,tone:e<2?"accent":"muted",height:6}),s.jsx(Vr,{label:"+12"})]},t))}),pv_ui_kpi_list_2col:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:[["Win rate","62%"],["Uptime","99.1%"],["Scan time","4.3s"]].map(([t,e])=>s.jsxs("div",{className:"g4-row g4-space-between g4-center",children:[s.jsx("span",{className:"g4-label",children:t}),s.jsx("span",{className:"g4-value",children:e})]},t))}),pv_ui_table_hover:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Row A","Row B","Row C"].map((t,e)=>s.jsx("div",{className:`g4-table-row ${e===1?"hover":""}`,children:s.jsx(qt,{width:"60%",tone:"muted",height:6})},t))}),pv_ui_rank_delta_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx(Vr,{label:" +6"}),s.jsx(Vr,{label:" -2"}),s.jsx(qt,{width:"50%",tone:"accent"})]}),pv_ui_avatar_list3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xxs",children:["Aria","Bex","Cole"].map((t,e)=>s.jsxs("div",{className:"g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-avatar",children:t[0]}),s.jsx(qt,{width:`${50+e*10}%`,tone:"accent",height:6})]},t))}),pv_ui_timeline_row:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:["Step 1","Step 2","Step 3"].map((t,e)=>s.jsxs("div",{className:"g4-col g4-center g4-gap-xxs",children:[s.jsx("span",{className:`g4-timeline-dot ${e<=1?"active":""}`}),s.jsx("span",{className:"g4-mini-label",children:t})]},t))}),pv_ui_split_panel_list:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx("span",{className:"g4-label",children:"Power"}),s.jsx("span",{className:"g4-label",children:"Speed"}),s.jsx("span",{className:"g4-label",children:"Luck"})]}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"60%"}),s.jsx(qt,{width:"40%",tone:"warning"}),s.jsx(qt,{width:"30%",tone:"success"})]})]}),pv_ui_chip_counts:()=>s.jsx("div",{className:"g4-preview g4-row g4-gap-xs g4-wrap",children:[["Tanks","12"],["Healers","5"],["DPS","18"],["Support","7"]].map(([t,e],n)=>s.jsxs("span",{className:`g4-chip ${n===2?"active":""}`,children:[t," ",s.jsx("span",{className:"g4-count",children:e})]},t))}),pv_ui_accordion3:()=>s.jsx("div",{className:"g4-preview g4-col g4-gap-xs",children:["Summary","Details","Meta"].map((t,e)=>s.jsxs("div",{className:`g4-accordion ${e===0?"open":""}`,children:[s.jsxs("div",{className:"g4-accordion-head",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g4-chevron"})]}),e===0&&s.jsxs("div",{className:"g4-accordion-body",children:[s.jsx(qt,{width:"70%",tone:"muted"}),s.jsx(qt,{width:"40%",tone:"muted"})]})]},t))}),pv_ui_spark_row:()=>s.jsxs("div",{className:"g4-preview g4-row g4-space-between g4-center",children:[s.jsx("div",{className:"g4-sparkline",children:Array.from({length:12}).map((t,e)=>s.jsx("span",{style:{height:`${8+e%5*6}px`}},e))}),s.jsx(Vr,{label:"72%"})]}),pv_ui_pulse_progress2:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-pulse-bar",children:s.jsx("div",{className:"g4-pulse-fill",style:{width:"68%"}})}),s.jsx("span",{className:"g4-mini-label",children:"Syncing"})]}),pv_ui_unlock_glow2:()=>s.jsxs("div",{className:"g4-preview g4-glow-card",children:[s.jsx("div",{className:"g4-lock-icon",children:""}),s.jsx(qt,{width:"60%"})]}),pv_ui_skeleton_shimmer:()=>s.jsxs("div",{className:"g4-preview g4-col g4-gap-xxs",children:[s.jsx("div",{className:"g4-skeleton shimmer"}),s.jsx("div",{className:"g4-skeleton shimmer short"})]}),pv_ui_confetti_dots2:()=>s.jsx("div",{className:"g4-preview g4-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g4-confetti-dot"},e))}),pv_ui_hover_lift:()=>s.jsxs("div",{className:"g4-preview g4-hover-card",children:[s.jsx(qt,{width:"70%"}),s.jsx(qt,{width:"50%",tone:"muted"})]}),pv_ui_ping_indicator:()=>s.jsxs("div",{className:"g4-preview g4-row g4-center g4-gap-sm",children:[s.jsx("div",{className:"g4-ping",children:s.jsx("span",{className:"g4-ping-dot"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"50%"}),s.jsx(qt,{width:"30%",tone:"muted"})]})]}),pv_ui_badge_pop:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-pop-badge",children:"UI"}),s.jsx(qt,{width:"60%"})]}),pv_ui_toggle_flip:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-toggle",children:s.jsx("div",{className:"g4-toggle-thumb"})}),s.jsx("span",{className:"g4-mini-label",children:"Flip"})]}),pv_ui_stripe_motion:()=>s.jsx("div",{className:"g4-preview g4-stripes",children:s.jsx("div",{className:"g4-stripe-fill",style:{width:"72%"}})}),pv_ui_bell_pulse:()=>s.jsxs("div",{className:"g4-preview g4-row g4-gap-sm g4-center",children:[s.jsx("div",{className:"g4-bell",children:s.jsx("span",{className:"g4-bell-ping"})}),s.jsxs("div",{className:"g4-col g4-gap-xxs",children:[s.jsx(qt,{width:"55%"}),s.jsx(qt,{width:"35%",tone:"muted"})]})]})},yke=t=>{const e=xke[t];return e?e():s.jsx("div",{className:"g4-preview g4-fallback"})};function bke(){return s.jsxs("div",{className:"g4-root",children:[s.jsxs("header",{className:"g4-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 4"}),s.jsx("p",{className:"g4-sub",children:"50 UI mini-previews focused on controls, overlays, meters, tables, and animated bits."})]}),s.jsx("div",{className:"g4-pill-row",children:s.jsx(Vr,{label:"UI"})})]}),s.jsx("nav",{className:"g4-toc",children:kI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g4-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g4-sections",children:kI.map(t=>s.jsxs("details",{className:"g4-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g4-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-section-title",children:t.title}),s.jsx("div",{className:"g4-section-sub",children:t.description})]}),s.jsxs("span",{className:"g4-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g4-grid",children:t.items.map(e=>s.jsxs("div",{className:"g4-card",children:[s.jsxs("div",{className:"g4-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g4-card-title",children:e.title}),s.jsx("div",{className:"g4-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g4-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(Vr,{label:n},n))})]}),yke(e.previewId)]},e.id))})]},t.id))})]})}const CI=[{id:"meta",title:"Meta Systems",description:"Loops, ladders, and macro-structure sketches.",items:[{id:"1",categoryId:"meta",title:"Prestige Loop Diagram",subtitle:"reset + boost",tags:["CONCEPT"],previewId:"pv_cpt_prestige_loop"},{id:"2",categoryId:"meta",title:"Seasonal Arc Map",subtitle:"startend path",tags:["CONCEPT"],previewId:"pv_cpt_season_arc"},{id:"3",categoryId:"meta",title:"Progress Economy Flow",subtitle:"earnspendupgrade",tags:["CONCEPT"],previewId:"pv_cpt_economy_flow"},{id:"4",categoryId:"meta",title:"Skill Synergy Web",subtitle:"nodes + links",tags:["CONCEPT"],previewId:"pv_cpt_synergy_web"},{id:"5",categoryId:"meta",title:"Difficulty Curve",subtitle:"soft curve concept",tags:["CONCEPT"],previewId:"pv_cpt_difficulty_curve"},{id:"6",categoryId:"meta",title:"Reward Probability Bands",subtitle:"bands/tiers",tags:["CONCEPT"],previewId:"pv_cpt_prob_bands"},{id:"7",categoryId:"meta",title:"Milestone Radar",subtitle:"milestones ring",tags:["CONCEPT"],previewId:"pv_cpt_milestone_radar"},{id:"8",categoryId:"meta",title:"Collection Completion Map",subtitle:"zones filled",tags:["CONCEPT"],previewId:"pv_cpt_collection_map"},{id:"9",categoryId:"meta",title:"Engagement Flywheel",subtitle:"cycle arrows",tags:["CONCEPT"],previewId:"pv_cpt_flywheel"},{id:"10",categoryId:"meta",title:"Reputation Ladder",subtitle:"tiers + gates",tags:["CONCEPT"],previewId:"pv_cpt_reputation_ladder"}]},{id:"planning",title:"Planning & Strategy",description:"Allocation, risks, paths, and scenarios.",items:[{id:"11",categoryId:"planning",title:"Optimization Triangle",subtitle:"choose 2 of 3",tags:["CONCEPT"],previewId:"pv_cpt_opt_triangle"},{id:"12",categoryId:"planning",title:"Resource Allocation Bars",subtitle:"split budget",tags:["CONCEPT"],previewId:"pv_cpt_allocation_bars"},{id:"13",categoryId:"planning",title:"Upgrade Path Tree",subtitle:"branch choices",tags:["CONCEPT"],previewId:"pv_cpt_upgrade_tree"},{id:"14",categoryId:"planning",title:"Risk/Reward Matrix",subtitle:"4 quadrants",tags:["CONCEPT"],previewId:"pv_cpt_risk_reward_matrix"},{id:"15",categoryId:"planning",title:"Time-to-Goal Estimator",subtitle:"ETA blocks",tags:["CONCEPT"],previewId:"pv_cpt_eta_blocks"},{id:"16",categoryId:"planning",title:"Rival Distance Map",subtitle:"gaps + targets",tags:["CONCEPT"],previewId:"pv_cpt_rival_distance_map"},{id:"17",categoryId:"planning",title:"Power Spike Timeline",subtitle:"spike markers",tags:["CONCEPT"],previewId:"pv_cpt_power_spike_timeline"},{id:"18",categoryId:"planning",title:"Weekly Strategy Board",subtitle:"3 focus cards",tags:["CONCEPT"],previewId:"pv_cpt_weekly_board"},{id:"19",categoryId:"planning",title:"Breakpoint Indicators",subtitle:"threshold lines",tags:["CONCEPT"],previewId:"pv_cpt_breakpoints"},{id:"20",categoryId:"planning",title:"Scenario Switcher",subtitle:"A/B/C outcomes",tags:["CONCEPT"],previewId:"pv_cpt_scenarios_abc"}]},{id:"social",title:"Social Concepts",description:"Guild health, equity, coverage, and momentum ideas.",items:[{id:"21",categoryId:"social",title:"Guild Health Dashboard",subtitle:"pillars concept",tags:["CONCEPT"],previewId:"pv_cpt_guild_health"},{id:"22",categoryId:"social",title:"Contribution Equity Meter",subtitle:"fairness bar",tags:["CONCEPT"],previewId:"pv_cpt_equity_meter"},{id:"23",categoryId:"social",title:"Role Coverage Grid",subtitle:"roles coverage",tags:["CONCEPT"],previewId:"pv_cpt_role_coverage"},{id:"24",categoryId:"social",title:"Alliance Network Graph",subtitle:"nodes network",tags:["CONCEPT"],previewId:"pv_cpt_alliance_graph"},{id:"25",categoryId:"social",title:"Recruitment Funnel",subtitle:"stages funnel",tags:["CONCEPT"],previewId:"pv_cpt_recruit_funnel"},{id:"26",categoryId:"social",title:"Activity Rhythm Wheel",subtitle:"cycle wheel",tags:["CONCEPT"],previewId:"pv_cpt_rhythm_wheel"},{id:"27",categoryId:"social",title:"Leadership Heat Zones",subtitle:"zones concept",tags:["CONCEPT"],previewId:"pv_cpt_leadership_zones"},{id:"28",categoryId:"social",title:"Social Momentum Score",subtitle:"momentum line",tags:["CONCEPT"],previewId:"pv_cpt_social_momentum"},{id:"29",categoryId:"social",title:"Collaboration Contract",subtitle:"agreement card",tags:["CONCEPT"],previewId:"pv_cpt_collab_contract"},{id:"30",categoryId:"social",title:"Community Challenge Pool",subtitle:"pool + goals",tags:["CONCEPT"],previewId:"pv_cpt_challenge_pool"}]},{id:"insights",title:"Insights Concepts",description:"Signals, outliers, archetypes, and opportunity maps.",items:[{id:"31",categoryId:"insights",title:"Trend vs Noise Lens",subtitle:"signal filter",tags:["CONCEPT"],previewId:"pv_cpt_signal_noise"},{id:"32",categoryId:"insights",title:"Outlier Detector Panel",subtitle:"flagged dots",tags:["CONCEPT"],previewId:"pv_cpt_outlier_panel"},{id:"33",categoryId:"insights",title:"Consistency Index",subtitle:"stability meter",tags:["CONCEPT"],previewId:"pv_cpt_consistency_index"},{id:"34",categoryId:"insights",title:"Growth Regimes",subtitle:"phases blocks",tags:["CONCEPT"],previewId:"pv_cpt_growth_regimes"},{id:"35",categoryId:"insights",title:"Player Archetypes",subtitle:"3 archetype cards",tags:["CONCEPT"],previewId:"pv_cpt_archetypes"},{id:"36",categoryId:"insights",title:"Benchmark Stack",subtitle:"compare layers",tags:["CONCEPT"],previewId:"pv_cpt_benchmark_stack"},{id:"37",categoryId:"insights",title:"KPI Storyboard",subtitle:"3-step insight",tags:["CONCEPT"],previewId:"pv_cpt_kpi_storyboard"},{id:"38",categoryId:"insights",title:"Efficiency Frontier",subtitle:"frontier curve",tags:["CONCEPT"],previewId:"pv_cpt_efficiency_frontier"},{id:"39",categoryId:"insights",title:"Progress Forecast Bands",subtitle:"band forecast",tags:["CONCEPT"],previewId:"pv_cpt_forecast_bands"},{id:"40",categoryId:"insights",title:"Opportunity Radar",subtitle:"radar points",tags:["CONCEPT"],previewId:"pv_cpt_opportunity_radar"}]},{id:"loops",title:"Gamification Loops",description:"Cadence, multipliers, chains, caps, and rewards.",items:[{id:"41",categoryId:"loops",title:"Daily/Weekly Loop",subtitle:"cadence map",tags:["CONCEPT"],previewId:"pv_cpt_cadence_loop"},{id:"42",categoryId:"loops",title:"Reward Multipliers",subtitle:"stacked multipliers",tags:["CONCEPT"],previewId:"pv_cpt_multiplier_stack"},{id:"43",categoryId:"loops",title:"Quest Chain System",subtitle:"chain gates",tags:["CONCEPT"],previewId:"pv_cpt_chain_gates"},{id:"44",categoryId:"loops",title:"Badge Progression",subtitle:"ranked badges",tags:["CONCEPT"],previewId:"pv_cpt_badge_progression"},{id:"45",categoryId:"loops",title:"Streak Protection",subtitle:"shield mechanic",tags:["CONCEPT"],previewId:"pv_cpt_streak_shield"},{id:"46",categoryId:"loops",title:"Catch-up Mechanic",subtitle:"boost for low",tags:["CONCEPT"],previewId:"pv_cpt_catchup"},{id:"47",categoryId:"loops",title:"Event Spike Model",subtitle:"event peaks",tags:["CONCEPT"],previewId:"pv_cpt_event_spikes"},{id:"48",categoryId:"loops",title:"Soft Cap Concept",subtitle:"diminishing returns",tags:["CONCEPT"],previewId:"pv_cpt_soft_cap"},{id:"49",categoryId:"loops",title:"Reward Choice Wheel",subtitle:"choose 1 of 3",tags:["CONCEPT"],previewId:"pv_cpt_choice_wheel"},{id:"50",categoryId:"loops",title:"Meta Progress Passport",subtitle:"stamps journey",tags:["CONCEPT"],previewId:"pv_cpt_passport"}]}],Fc=({label:t})=>s.jsx("span",{className:"g5-pill",children:t}),Nl=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g5-bar tone-${e}`,style:{width:t,height:n}}),$b=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g5-dot tone-${t}`,style:{width:e,height:e}}),_ke={pv_cpt_prestige_loop:()=>s.jsx("div",{className:"g5-preview g5-loop",children:["Earn","Reset","Boost"].map((t,e)=>s.jsxs("div",{className:"g5-loop-node",children:[s.jsx("span",{className:"g5-loop-label",children:t}),s.jsx("div",{className:`g5-loop-arrow ${e===2?"end":""}`})]},t))}),pv_cpt_season_arc:()=>s.jsxs("div",{className:"g5-preview g5-arc",children:[s.jsx("div",{className:"g5-arc-track",children:s.jsx("div",{className:"g5-arc-progress",style:{width:"70%"}})}),s.jsxs("div",{className:"g5-row g5-space-between g5-mini",children:[s.jsx("span",{children:"Start"}),s.jsx("span",{children:"Season"}),s.jsx("span",{children:"Final"})]})]}),pv_cpt_economy_flow:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-flow-card",children:"Earn"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card alt",children:"Spend"}),s.jsx("div",{className:"g5-flow-arrow"}),s.jsx("div",{className:"g5-flow-card",children:"Upgrade"})]}),pv_cpt_synergy_web:()=>s.jsxs("div",{className:"g5-preview g5-web",children:[s.jsx("div",{className:"g5-web-node center"}),Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g5-web-node arm-${e}`},e))]}),pv_cpt_difficulty_curve:()=>s.jsxs("div",{className:"g5-preview g5-curve",children:[s.jsx("div",{className:"g5-curve-line"}),s.jsx("div",{className:"g5-dot tone-accent",style:{left:"25%"}}),s.jsx("div",{className:"g5-dot tone-warning",style:{left:"70%"}})]}),pv_cpt_prob_bands:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Common","Rare","Epic"].map((t,e)=>s.jsxs("div",{className:"g5-band",children:[s.jsx("span",{className:"g5-band-label",children:t}),s.jsx("div",{className:`g5-band-fill tone-${e===2?"warning":"accent"}`,style:{width:`${40+e*20}%`}})]},t))}),pv_cpt_milestone_radar:()=>s.jsxs("div",{className:"g5-preview g5-radar",children:[s.jsx("div",{className:"g5-radar-ring outer"}),s.jsx("div",{className:"g5-radar-ring inner"}),s.jsx($b,{tone:"warning",size:10}),s.jsx($b,{tone:"accent",size:8}),s.jsx($b,{tone:"success",size:8})]}),pv_cpt_collection_map:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g5-zone ${e<3?"filled":""}`},e))}),pv_cpt_flywheel:()=>s.jsxs("div",{className:"g5-preview g5-flywheel",children:[s.jsx("div",{className:"g5-flywheel-ring"}),s.jsx("div",{className:"g5-flywheel-arrow a1"}),s.jsx("div",{className:"g5-flywheel-arrow a2"}),s.jsx("div",{className:"g5-flywheel-arrow a3"})]}),pv_cpt_reputation_ladder:()=>s.jsx("div",{className:"g5-preview g5-ladder",children:[0,1,2,3].map(t=>s.jsxs("div",{className:`g5-tier ${t<2?"active":""}`,children:["Tier ",t+1]},t))}),pv_cpt_opt_triangle:()=>s.jsxs("div",{className:"g5-preview g5-triangle",children:[s.jsx("div",{className:"g5-tri-corner top",children:"Speed"}),s.jsx("div",{className:"g5-tri-corner left",children:"Quality"}),s.jsx("div",{className:"g5-tri-corner right",children:"Cost"}),s.jsx("div",{className:"g5-tri-fill"})]}),pv_cpt_allocation_bars:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Gold","Gems","Energy"].map((t,e)=>s.jsxs("div",{className:"g5-row g5-gap-sm g5-center",children:[s.jsx("span",{className:"g5-label",children:t}),s.jsx(Nl,{width:`${30+e*15}%`,tone:e===1?"warning":"accent",height:6})]},t))}),pv_cpt_upgrade_tree:()=>s.jsxs("div",{className:"g5-preview g5-tree",children:[s.jsx("div",{className:"g5-tree-node root"}),s.jsxs("div",{className:"g5-tree-branch left",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]}),s.jsxs("div",{className:"g5-tree-branch right",children:[s.jsx("div",{className:"g5-tree-node"}),s.jsx("div",{className:"g5-tree-node"})]})]}),pv_cpt_risk_reward_matrix:()=>s.jsxs("div",{className:"g5-preview g5-matrix",children:[s.jsx("div",{className:"g5-matrix-quad high",children:"High Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Reward"}),s.jsx("div",{className:"g5-matrix-quad",children:"Low Risk"}),s.jsx("div",{className:"g5-matrix-quad warn",children:"High Risk"})]}),pv_cpt_eta_blocks:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs",children:["10d","20d","30d"].map((t,e)=>s.jsx("div",{className:`g5-eta-block ${e===2?"active":""}`,children:t},t))}),pv_cpt_rival_distance_map:()=>s.jsxs("div",{className:"g5-preview g5-row g5-center g5-gap-sm",children:[s.jsx("div",{className:"g5-distance",children:s.jsxs("div",{className:"g5-distance-line",children:[s.jsx("div",{className:"g5-distance-marker you",style:{left:"22%"}}),s.jsx("div",{className:"g5-distance-marker rival",style:{left:"62%"}})]})}),s.jsx(Fc,{label:"Gap 40%"})]}),pv_cpt_power_spike_timeline:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:[20,60,80].map((t,e)=>s.jsx("div",{className:"g5-spike",style:{left:`${t}%`},children:s.jsx("div",{className:`g5-spike-pin ${e===2?"strong":""}`})},t))}),s.jsx("div",{className:"g5-mini",children:"Power spikes"})]}),pv_cpt_weekly_board:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Focus","Risks","Wins"].map(t=>s.jsxs("div",{className:"g5-cardlet",children:[s.jsx(Nl,{width:"60%"}),s.jsx(Nl,{width:"40%",tone:"muted"})]},t))}),pv_cpt_breakpoints:()=>s.jsx("div",{className:"g5-preview g5-breakpoints",children:[25,50,75].map(t=>s.jsx("div",{className:"g5-breakpoint",style:{left:`${t}%`},children:s.jsx("span",{children:t})},t))}),pv_cpt_scenarios_abc:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:`g5-scenario ${e===1?"active":""}`,children:[s.jsx("div",{className:"g5-scenario-title",children:t}),s.jsx(Nl,{width:`${40+e*10}%`,tone:"accent"})]},t))}),pv_cpt_guild_health:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[[50,70,40].map((t,e)=>s.jsx("div",{className:"g5-pillar",children:s.jsx("div",{className:"g5-pillar-fill",style:{height:`${t}%`}})},e)),s.jsx(Fc,{label:"Guild Health"})]}),pv_cpt_equity_meter:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-meter",children:s.jsx("div",{className:"g5-meter-fill",style:{width:"56%"}})}),s.jsx("span",{className:"g5-mini",children:"Fair"})]}),pv_cpt_role_coverage:()=>s.jsx("div",{className:"g5-preview g5-grid g5-grid-3",children:["Tank","Heal","DPS"].map((t,e)=>s.jsxs("div",{className:"g5-role",children:[s.jsx("div",{className:"g5-role-bar",style:{width:`${40+e*15}%`}}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_alliance_graph:()=>s.jsxs("div",{className:"g5-preview g5-network",children:[[0,1,2,3,4].map(t=>s.jsx("div",{className:`g5-node n${t}`},t)),s.jsx("div",{className:"g5-link l1"}),s.jsx("div",{className:"g5-link l2"}),s.jsx("div",{className:"g5-link l3"})]}),pv_cpt_recruit_funnel:()=>s.jsxs("div",{className:"g5-preview g5-funnel",children:[s.jsx("div",{className:"g5-funnel-layer big"}),s.jsx("div",{className:"g5-funnel-layer mid"}),s.jsx("div",{className:"g5-funnel-layer small"})]}),pv_cpt_rhythm_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:`g5-wheel-dot ${e%2===0?"active":""}`},e))}),pv_cpt_leadership_zones:()=>s.jsxs("div",{className:"g5-preview g5-zones",children:[s.jsx("div",{className:"g5-zone-block warm"}),s.jsx("div",{className:"g5-zone-block cool"}),s.jsx("div",{className:"g5-zone-block neutral"})]}),pv_cpt_social_momentum:()=>s.jsxs("div",{className:"g5-preview g5-linechart",children:[s.jsx("div",{className:"g5-line-path"}),s.jsx("div",{className:"g5-line-marker",style:{left:"70%"}})]}),pv_cpt_collab_contract:()=>s.jsxs("div",{className:"g5-preview g5-contract",children:[s.jsx(Nl,{width:"70%"}),s.jsx(Nl,{width:"40%",tone:"muted"}),s.jsx("div",{className:"g5-signature"})]}),pv_cpt_challenge_pool:()=>s.jsxs("div",{className:"g5-preview g5-pool",children:[s.jsx("div",{className:"g5-pool-water"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal A"}),s.jsx("div",{className:"g5-goal-chip",children:"Goal B"})]}),pv_cpt_signal_noise:()=>s.jsxs("div",{className:"g5-preview g5-signal",children:[s.jsx("div",{className:"g5-signal-band strong"}),s.jsx("div",{className:"g5-signal-band weak"}),s.jsx("div",{className:"g5-filter"})]}),pv_cpt_outlier_panel:()=>s.jsx("div",{className:"g5-preview g5-scatter",children:Array.from({length:8}).map((t,e)=>s.jsx("span",{className:`g5-scatter-dot ${e===7?"alert":""}`},e))}),pv_cpt_consistency_index:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-gauge",children:s.jsx("div",{className:"g5-gauge-fill",style:{width:"72%"}})}),s.jsx(Fc,{label:"Stable"})]}),pv_cpt_growth_regimes:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:["Launch","Scale","Mature"].map((t,e)=>s.jsxs("div",{className:"g5-phase",children:[s.jsx("div",{className:`g5-phase-box ${e===1?"active":""}`}),s.jsx("span",{className:"g5-mini",children:t})]},t))}),pv_cpt_archetypes:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:["Explorer","Achiever","Social"].map(t=>s.jsxs("div",{className:"g5-arch-card",children:[s.jsx(Nl,{width:"60%"}),s.jsx("div",{className:"g5-arch-badge",children:t[0]})]},t))}),pv_cpt_benchmark_stack:()=>s.jsxs("div",{className:"g5-preview g5-stack",children:[s.jsx("div",{className:"g5-stack-layer"}),s.jsx("div",{className:"g5-stack-layer mid"}),s.jsx("div",{className:"g5-stack-layer top"})]}),pv_cpt_kpi_storyboard:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-story-card",children:[s.jsxs("span",{className:"g5-story-step",children:["Step ",t]}),s.jsx(Nl,{width:"50%"})]},t))}),pv_cpt_efficiency_frontier:()=>s.jsxs("div",{className:"g5-preview g5-frontier",children:[s.jsx("div",{className:"g5-frontier-curve"}),s.jsx("div",{className:"g5-frontier-dot"})]}),pv_cpt_forecast_bands:()=>s.jsxs("div",{className:"g5-preview g5-bands",children:[s.jsx("div",{className:"g5-band-line upper"}),s.jsx("div",{className:"g5-band-line lower"}),s.jsx("div",{className:"g5-band-fill"})]}),pv_cpt_opportunity_radar:()=>s.jsx("div",{className:"g5-preview g5-radar-grid",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g5-radar-dot"},e))}),pv_cpt_cadence_loop:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-loop-mini daily",children:"Daily"}),s.jsx("div",{className:"g5-loop-mini weekly active",children:"Weekly"}),s.jsx("div",{className:"g5-loop-mini monthly",children:"Monthly"})]}),pv_cpt_multiplier_stack:()=>s.jsx("div",{className:"g5-preview g5-col g5-gap-xxs",children:[1,2,3].map(t=>s.jsxs("div",{className:"g5-multiplier",children:[s.jsxs("span",{children:["x",t]}),s.jsx("div",{className:"g5-multi-bar",style:{width:`${t*20+30}%`}})]},t))}),pv_cpt_chain_gates:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-xs g5-center",children:["Q1","Q2","Q3","Boss"].map((t,e)=>s.jsxs(W.Fragment,{children:[s.jsx("div",{className:`g5-gate ${e===3?"final":""}`,children:t}),e<3&&s.jsx("div",{className:"g5-gate-line"})]},t))}),pv_cpt_badge_progression:()=>s.jsx("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:["Bronze","Silver","Gold"].map((t,e)=>s.jsx("div",{className:`g5-badge ${e===2?"shine":""}`,children:t[0]},t))}),pv_cpt_streak_shield:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-shield",children:"Streak"}),s.jsx(Fc,{label:"Protected"})]}),pv_cpt_catchup:()=>s.jsxs("div",{className:"g5-preview g5-row g5-gap-sm g5-center",children:[s.jsx("div",{className:"g5-boost-bar",children:s.jsx("div",{className:"g5-boost-fill",style:{width:"45%"}})}),s.jsx(Fc,{label:"+Catch Up"})]}),pv_cpt_event_spikes:()=>s.jsxs("div",{className:"g5-preview g5-col g5-gap-xxs",children:[s.jsx("div",{className:"g5-spike-line",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:"g5-spike event",style:{left:`${e*20}%`,height:`${10+e*8}px`}},e))}),s.jsx("span",{className:"g5-mini",children:"Events"})]}),pv_cpt_soft_cap:()=>s.jsxs("div",{className:"g5-preview g5-softcap",children:[s.jsx("div",{className:"g5-softcap-line"}),s.jsx("div",{className:"g5-softcap-cap",style:{left:"65%"}})]}),pv_cpt_choice_wheel:()=>s.jsx("div",{className:"g5-preview g5-wheel-choice",children:["A","B","C"].map((t,e)=>s.jsx("div",{className:`g5-choice ${e===0?"active":""}`,children:t},t))}),pv_cpt_passport:()=>s.jsx("div",{className:"g5-preview g5-passport",children:["Zone 1","Zone 2","Zone 3"].map((t,e)=>s.jsx("div",{className:`g5-stamp ${e<2?"filled":""}`,children:t},t))})},wke=t=>{const e=_ke[t];return e?e():s.jsx("div",{className:"g5-preview g5-fallback"})};function jke(){return s.jsxs("div",{className:"g5-root",children:[s.jsxs("header",{className:"g5-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 5"}),s.jsx("p",{className:"g5-sub",children:"50 concept sketches across macro systems, planning, social, insights, and loops."})]}),s.jsx("div",{className:"g5-pill-row",children:s.jsx(Fc,{label:"CONCEPT"})})]}),s.jsx("nav",{className:"g5-toc",children:CI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g5-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g5-sections",children:CI.map(t=>s.jsxs("details",{className:"g5-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g5-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-section-title",children:t.title}),s.jsx("div",{className:"g5-section-sub",children:t.description})]}),s.jsxs("span",{className:"g5-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g5-grid",children:t.items.map(e=>s.jsxs("div",{className:"g5-card",children:[s.jsxs("div",{className:"g5-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g5-card-title",children:e.title}),s.jsx("div",{className:"g5-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g5-pill-row",children:(e.tags||["CONCEPT"]).map(n=>s.jsx(Fc,{label:n},n))})]}),wke(e.previewId)]},e.id))})]},t.id))})]})}const TI=[{id:"profile",title:"Profile Widgets",description:"Compact profile cards, KPIs, and progression snippets.",items:[{id:"1",categoryId:"profile",title:"Hero Panel Mini",subtitle:"avatar + 3 KPIs",tags:["MOCK"],previewId:"pv_mock_hero_panel_mini"},{id:"2",categoryId:"profile",title:"Attribute Bars Card",subtitle:"5 bars + markers",tags:["MOCK"],previewId:"pv_mock_attr_bars"},{id:"3",categoryId:"profile",title:"Scan Freshness Badge",subtitle:"age + color",tags:["MOCK"],previewId:"pv_mock_scan_freshness"},{id:"4",categoryId:"profile",title:"Profile Tabs Strip",subtitle:"overview/scans/etc",tags:["MOCK"],previewId:"pv_mock_profile_tabs"},{id:"5",categoryId:"profile",title:"Linked Characters Row",subtitle:"tabs switch",tags:["MOCK"],previewId:"pv_mock_linked_chars"},{id:"6",categoryId:"profile",title:"Snapshot Compare Card",subtitle:"then vs now",tags:["MOCK"],previewId:"pv_mock_snapshot_compare"},{id:"7",categoryId:"profile",title:"Rank Delta Inline",subtitle:"rank + arrows",tags:["MOCK"],previewId:"pv_mock_rank_inline"},{id:"8",categoryId:"profile",title:"Scrapbook Completion Tile",subtitle:"% + ring",tags:["MOCK"],previewId:"pv_mock_scrapbook_tile"},{id:"9",categoryId:"profile",title:"Legendary Counter Card",subtitle:"count + rarity",tags:["MOCK"],previewId:"pv_mock_legendary_counter"},{id:"10",categoryId:"profile",title:"Progress History Mini",subtitle:"tiny history list",tags:["MOCK"],previewId:"pv_mock_history_mini"}]},{id:"guild",title:"Guild Widgets",description:"Guild header, queues, planner tiles, and readiness snapshots.",items:[{id:"11",categoryId:"guild",title:"Guild Header Mock",subtitle:"emblem + KPIs",tags:["MOCK"],previewId:"pv_mock_guild_header"},{id:"12",categoryId:"guild",title:"Member List Row",subtitle:"role + last scan",tags:["MOCK"],previewId:"pv_mock_member_row"},{id:"13",categoryId:"guild",title:"Recruitment Card",subtitle:"open slots",tags:["MOCK"],previewId:"pv_mock_recruitment"},{id:"14",categoryId:"guild",title:"Fusion Planner Tile",subtitle:"two guild compare",tags:["MOCK"],previewId:"pv_mock_fusion_tile"},{id:"15",categoryId:"guild",title:"Waitlist Panel",subtitle:"queue preview",tags:["MOCK"],previewId:"pv_mock_waitlist_panel"},{id:"16",categoryId:"guild",title:"Guild Activity Panel",subtitle:"last 7d",tags:["MOCK"],previewId:"pv_mock_guild_activity"},{id:"17",categoryId:"guild",title:"Guild Benchmarks",subtitle:"avg markers",tags:["MOCK"],previewId:"pv_mock_guild_benchmarks"},{id:"18",categoryId:"guild",title:"War Readiness Mock",subtitle:"ready/not",tags:["MOCK"],previewId:"pv_mock_war_readiness2"},{id:"19",categoryId:"guild",title:"Treasury Summary",subtitle:"treasury KPIs",tags:["MOCK"],previewId:"pv_mock_treasury_summary"},{id:"20",categoryId:"guild",title:"Guild Notes Card",subtitle:"pinned notes",tags:["MOCK"],previewId:"pv_mock_guild_notes"}]},{id:"tables",title:"Top Lists / Tables",description:"Tables, filters, timers, pagination, and compare bars.",items:[{id:"21",categoryId:"tables",title:"Toplist Table Card",subtitle:"header + rows",tags:["MOCK"],previewId:"pv_mock_toplist_table"},{id:"22",categoryId:"tables",title:"Rank Change Column",subtitle:" deltas",tags:["MOCK"],previewId:"pv_mock_rank_change_col"},{id:"23",categoryId:"tables",title:"Server Filter Sidebar",subtitle:"filters stack",tags:["MOCK"],previewId:"pv_mock_server_filters"},{id:"24",categoryId:"tables",title:"Class Filter Chips",subtitle:"class chips",tags:["MOCK"],previewId:"pv_mock_class_chips"},{id:"25",categoryId:"tables",title:"Snapshot Timer Pill",subtitle:"next refresh",tags:["MOCK"],previewId:"pv_mock_snapshot_timer"},{id:"26",categoryId:"tables",title:"Pagination Footer Mock",subtitle:"page controls",tags:["MOCK"],previewId:"pv_mock_pagination_footer"},{id:"27",categoryId:"tables",title:"Sticky Header Mock",subtitle:"sticky header row",tags:["MOCK"],previewId:"pv_mock_sticky_header"},{id:"28",categoryId:"tables",title:"Row Expand Detail",subtitle:"expand drawer",tags:["MOCK"],previewId:"pv_mock_row_expand"},{id:"29",categoryId:"tables",title:"Export Button Strip",subtitle:"CSV/Excel",tags:["MOCK"],previewId:"pv_mock_export_strip"},{id:"30",categoryId:"tables",title:"Compare Selected Rows",subtitle:"compare bar",tags:["MOCK"],previewId:"pv_mock_compare_bar"}]},{id:"upload",title:"Upload / Import UX",description:"Queues, validation, progress, notices, and summaries.",items:[{id:"31",categoryId:"upload",title:"Upload Queue Card",subtitle:"pending items",tags:["MOCK"],previewId:"pv_mock_upload_queue"},{id:"32",categoryId:"upload",title:"Dedup Result Toast",subtitle:"created/duplicate",tags:["MOCK"],previewId:"pv_mock_dedup_toast"},{id:"33",categoryId:"upload",title:"Dry-Run Validation Panel",subtitle:"errors list",tags:["MOCK"],previewId:"pv_mock_validation_panel"},{id:"34",categoryId:"upload",title:"Progress Upload Meter",subtitle:"step progress",tags:["MOCK"],previewId:"pv_mock_upload_progress"},{id:"35",categoryId:"upload",title:"Selected Entities Counter",subtitle:"players/guilds",tags:["MOCK"],previewId:"pv_mock_selected_counter"},{id:"36",categoryId:"upload",title:"Token TTL Notice",subtitle:"1015min",tags:["MOCK"],previewId:"pv_mock_ttl_notice"},{id:"37",categoryId:"upload",title:"Privacy Preview Box",subtitle:"what gets sent",tags:["MOCK"],previewId:"pv_mock_privacy_preview"},{id:"38",categoryId:"upload",title:"Error Log Card",subtitle:"recent errors",tags:["MOCK"],previewId:"pv_mock_error_log"},{id:"39",categoryId:"upload",title:"Retry/Backoff Banner",subtitle:"rate limit",tags:["MOCK"],previewId:"pv_mock_retry_banner"},{id:"40",categoryId:"upload",title:"Success Summary Panel",subtitle:"import summary",tags:["MOCK"],previewId:"pv_mock_success_summary"}]},{id:"admin",title:"Admin/Control Panel Mocks",description:"Roles, feature toggles, access groups, and moderation queues.",items:[{id:"41",categoryId:"admin",title:"Roles Context Menu",subtitle:"role switch UI",tags:["MOCK"],previewId:"pv_mock_roles_menu"},{id:"42",categoryId:"admin",title:"Feature Gate Table",subtitle:"toggles rows",tags:["MOCK"],previewId:"pv_mock_feature_table"},{id:"43",categoryId:"admin",title:"Access Group Card",subtitle:"group members",tags:["MOCK"],previewId:"pv_mock_access_group"},{id:"44",categoryId:"admin",title:"Audit Log Row",subtitle:"who changed what",tags:["MOCK"],previewId:"pv_mock_audit_row"},{id:"45",categoryId:"admin",title:"Error Monitor Tile",subtitle:"status lights",tags:["MOCK"],previewId:"pv_mock_error_monitor"},{id:"46",categoryId:"admin",title:"API Status Card",subtitle:"endpoint health",tags:["MOCK"],previewId:"pv_mock_api_status"},{id:"47",categoryId:"admin",title:"Seed Token Warning",subtitle:"internal endpoint",tags:["MOCK"],previewId:"pv_mock_seed_warning"},{id:"48",categoryId:"admin",title:"Moderation Queue",subtitle:"approve/deny",tags:["MOCK"],previewId:"pv_mock_mod_queue"},{id:"49",categoryId:"admin",title:"Feedback Inbox Card",subtitle:"decision buttons",tags:["MOCK"],previewId:"pv_mock_feedback_inbox"},{id:"50",categoryId:"admin",title:"Release Toggle Panel",subtitle:"staging/prod",tags:["MOCK"],previewId:"pv_mock_release_toggle"}]}],vs=({label:t})=>s.jsx("span",{className:"g6-pill",children:t}),Qt=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g6-bar tone-${e}`,style:{width:t,height:n}}),II=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g6-dot tone-${t}`,style:{width:e,height:e}}),Ske={pv_mock_hero_panel_mini:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar big",children:"A"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(vs,{label:"XP 42k"}),s.jsx(vs,{label:"Lvl 58"}),s.jsx(vs,{label:"WR 62%"})]})]})]}),pv_mock_attr_bars:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["STR","DEX","INT","VIT","LCK"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-label",children:t}),s.jsx(Qt,{width:`${35+e*12}%`,tone:e%2===0?"accent":"warning",height:6}),s.jsx(II,{tone:"muted"})]},t))}),pv_mock_scan_freshness:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge fresh",children:"3h ago"}),s.jsx(Qt,{width:"50%"})]}),pv_mock_profile_tabs:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs",children:["Overview","Scans","Gear","Notes"].map((t,e)=>s.jsx("div",{className:`g6-tab ${e===1?"active":""}`,children:t},t))}),pv_mock_linked_chars:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[["Main","Alt 1","Alt 2"].map((t,e)=>s.jsx("div",{className:`g6-chip ${e===0?"active":""}`,children:t},t)),s.jsx("div",{className:"g6-arrow-right"})]}),pv_mock_snapshot_compare:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Then"}),s.jsx(Qt,{width:"40%",tone:"muted"})]}),s.jsx("div",{className:"g6-compare-arrow"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Now"}),s.jsx(Qt,{width:"70%",tone:"accent"})]})]}),pv_mock_rank_inline:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(vs,{label:"#24"}),s.jsx(vs,{label:" 3"}),s.jsx(vs,{label:" 1"})]}),pv_mock_scrapbook_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-ring",children:[s.jsx("div",{className:"g6-ring-fill"}),s.jsx("div",{className:"g6-ring-hole",children:"68%"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"60%"}),s.jsx(Qt,{width:"35%",tone:"muted"})]})]}),pv_mock_legendary_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-legendary",children:"12"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Legendary"}),s.jsx(Qt,{width:"70%",tone:"warning"})]})]}),pv_mock_history_mini:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["+12 Lvl","+2 shards","Joined guild"].map((t,e)=>s.jsxs("div",{className:"g6-history-row",children:[s.jsx(II,{tone:"accent",size:8}),s.jsx("span",{children:t}),s.jsxs("span",{className:"g6-time",children:[e+1,"d"]})]},t))}),pv_mock_guild_header:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-emblem"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(vs,{label:"Lvl 12"}),s.jsx(vs,{label:"42 members"})]})]})]}),pv_mock_member_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-avatar",children:"M"}),s.jsx(Qt,{width:"50%"}),s.jsx(vs,{label:"Officer"}),s.jsx(vs,{label:"Scan 1d"})]}),pv_mock_recruitment:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(vs,{label:"Open 3"}),s.jsx(vs,{label:"Role: DPS"})]})]}),pv_mock_fusion_tile:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"40%"}),s.jsx(vs,{label:"Guild A"})]}),s.jsx("div",{className:"g6-merge"}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"40%"}),s.jsx(vs,{label:"Guild B"})]})]}),pv_mock_waitlist_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Rae","Noah","Ivy"].map((t,e)=>s.jsxs("div",{className:"g6-wait-row",children:[s.jsx("span",{className:"g6-badge muted",children:e+1}),s.jsx(Qt,{width:`${40+e*15}%`})]},t))}),pv_mock_guild_activity:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-heat",children:Array.from({length:7}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))}),s.jsx(vs,{label:"7d"})]}),pv_mock_guild_benchmarks:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Avg","Target","You"].map((t,e)=>s.jsxs("div",{className:"g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-mini",children:t}),s.jsx("div",{className:"g6-marker-line",children:s.jsx("div",{className:"g6-marker",style:{left:`${30+e*20}%`}})})]},t))}),pv_mock_war_readiness2:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(vs,{label:"Ready"}),s.jsx(vs,{label:"Needs Gear"}),s.jsx(vs,{label:"Needs Scans"})]}),pv_mock_treasury_summary:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gold"}),s.jsx(Qt,{width:"70%",tone:"warning"})]}),s.jsxs("div",{className:"g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Gems"}),s.jsx(Qt,{width:"50%",tone:"accent"})]})]}),pv_mock_guild_notes:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-note-pin"}),s.jsx(Qt,{width:"65%"}),s.jsx(Qt,{width:"40%",tone:"muted"})]}),pv_mock_toplist_table:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-table-head",children:[s.jsx(Qt,{width:"30%"}),s.jsx(Qt,{width:"20%"}),s.jsx(Qt,{width:"25%"})]}),Array.from({length:3}).map((t,e)=>s.jsx("div",{className:"g6-table-row",children:s.jsx(Qt,{width:`${60-e*10}%`,tone:"muted",height:6})},e))]}),pv_mock_rank_change_col:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx(vs,{label:" 8"}),s.jsx(vs,{label:" 2"}),s.jsx(Qt,{width:"40%"})]}),pv_mock_server_filters:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["EU","US","INT"].map((t,e)=>s.jsxs("div",{className:"g6-filter-row",children:[s.jsx("input",{type:"checkbox",checked:e===0,readOnly:!0}),s.jsx("span",{children:t})]},t))}),pv_mock_class_chips:()=>s.jsx("div",{className:"g6-preview g6-row g6-gap-xs g6-wrap",children:["Warrior","Mage","Hunter","Cleric"].map((t,e)=>s.jsx("span",{className:`g6-chip ${e===2?"active":""}`,children:t},t))}),pv_mock_snapshot_timer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(vs,{label:"Refresh in 03:12"}),s.jsx("div",{className:"g6-ring tiny",children:s.jsx("div",{className:"g6-ring-fill"})})]}),pv_mock_pagination_footer:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs g6-center",children:[s.jsx("span",{className:"g6-page",children:"Prev"}),[1,2,3].map(t=>s.jsx("span",{className:`g6-page ${t===2?"active":""}`,children:t},t)),s.jsx("span",{className:"g6-page",children:"Next"})]}),pv_mock_sticky_header:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-sticky-head",children:[s.jsx(Qt,{width:"40%"}),s.jsx(Qt,{width:"20%",tone:"muted"})]}),s.jsx("div",{className:"g6-table-row",children:s.jsx(Qt,{width:"70%",tone:"muted",height:6})})]}),pv_mock_row_expand:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsxs("div",{className:"g6-expand-row",children:[s.jsx("span",{className:"g6-chevron"}),s.jsx(Qt,{width:"50%"})]}),s.jsxs("div",{className:"g6-expand-body",children:[s.jsx(Qt,{width:"60%",tone:"muted"}),s.jsx(Qt,{width:"40%",tone:"muted"})]})]}),pv_mock_export_strip:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"CSV"}),s.jsx("button",{className:"g6-btn ghost",children:"Excel"}),s.jsx("button",{className:"g6-btn solid",children:"Export"})]}),pv_mock_compare_bar:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Qt,{width:"60%",tone:"accent"}),s.jsx(vs,{label:"2 selected"})]}),pv_mock_upload_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["players.csv","guilds.csv"].map(t=>s.jsxs("div",{className:"g6-queue-row",children:[s.jsx(Qt,{width:"50%"}),s.jsx("span",{className:"g6-mini",children:t})]},t))}),pv_mock_dedup_toast:()=>s.jsxs("div",{className:"g6-preview g6-toast",children:[s.jsx("span",{className:"g6-dot tone-success"}),s.jsx("span",{children:"3 created / 1 duplicate"})]}),pv_mock_validation_panel:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Missing name","Invalid server","Bad class"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge warn",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_upload_progress:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("div",{className:"g6-steps",children:[1,2,3,4].map((t,e)=>s.jsx("div",{className:`g6-step ${e<2?"done":e===2?"active":""}`},t))}),s.jsx(Qt,{width:"65%"})]}),pv_mock_selected_counter:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(vs,{label:"Players 32"}),s.jsx(vs,{label:"Guilds 4"}),s.jsx(vs,{label:"Servers 2"})]}),pv_mock_ttl_notice:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"TTL 12m"}),s.jsx(Qt,{width:"50%",tone:"warning"})]}),pv_mock_privacy_preview:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx("span",{className:"g6-mini",children:"Sending"}),s.jsx(Qt,{width:"60%"}),s.jsx(Qt,{width:"40%",tone:"muted"})]}),pv_mock_error_log:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Timeout","Bad payload"].map(t=>s.jsxs("div",{className:"g6-error-row",children:[s.jsx("span",{className:"g6-badge danger",children:"!"}),s.jsx("span",{children:t})]},t))}),pv_mock_retry_banner:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge warn",children:"Rate limit"}),s.jsx("button",{className:"g6-btn ghost",children:"Retry"}),s.jsx("button",{className:"g6-btn ghost",children:"Backoff"})]}),pv_mock_success_summary:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"70%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx(vs,{label:"Created 42"}),s.jsx(vs,{label:"Duplicates 3"})]})]}),pv_mock_roles_menu:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Viewer","Editor","Admin"].map((t,e)=>s.jsxs("div",{className:`g6-menu-row ${e===2?"active":""}`,children:[s.jsx("span",{children:t}),e===2&&s.jsx("span",{className:"g6-check",children:""})]},t))}),pv_mock_feature_table:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Feature A","Feature B","Feature C"].map((t,e)=>s.jsxs("div",{className:"g6-feature-row",children:[s.jsx(Qt,{width:"40%"}),s.jsx("div",{className:`g6-toggle ${e===1?"on":""}`,children:s.jsx("div",{className:"g6-toggle-thumb"})})]},t))}),pv_mock_access_group:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("div",{className:"g6-avatar small",children:"A"}),s.jsx("div",{className:"g6-avatar small",children:"B"}),s.jsx("div",{className:"g6-avatar small",children:"C"})]})]}),pv_mock_audit_row:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(Qt,{width:"40%"}),s.jsx(vs,{label:"by Admin"}),s.jsx(vs,{label:"2h ago"})]}),pv_mock_error_monitor:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[["OK","WARN","FAIL"].map((t,e)=>s.jsx("div",{className:`g6-status ${e===2?"danger":e===1?"warn":"ok"}`},t)),s.jsx(Qt,{width:"40%"})]}),pv_mock_api_status:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(vs,{label:"/api/status"}),s.jsx("div",{className:"g6-dot tone-success"}),s.jsx("div",{className:"g6-mini",children:"200 OK"})]}),pv_mock_seed_warning:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx("div",{className:"g6-badge danger",children:"Internal"}),s.jsx(Qt,{width:"50%",tone:"danger"})]}),pv_mock_mod_queue:()=>s.jsx("div",{className:"g6-preview g6-col g6-gap-xxs",children:["Report #45","Report #46"].map(t=>s.jsxs("div",{className:"g6-mod-row",children:[s.jsx(Qt,{width:"50%"}),s.jsxs("div",{className:"g6-row g6-gap-xxs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Approve"}),s.jsx("button",{className:"g6-btn ghost",children:"Deny"})]})]},t))}),pv_mock_feedback_inbox:()=>s.jsxs("div",{className:"g6-preview g6-col g6-gap-xxs",children:[s.jsx(Qt,{width:"60%"}),s.jsxs("div",{className:"g6-row g6-gap-xs",children:[s.jsx("button",{className:"g6-btn ghost",children:"Keep"}),s.jsx("button",{className:"g6-btn ghost",children:"Discard"})]})]}),pv_mock_release_toggle:()=>s.jsxs("div",{className:"g6-preview g6-row g6-gap-sm g6-center",children:[s.jsx(vs,{label:"Staging"}),s.jsx("div",{className:"g6-toggle on",children:s.jsx("div",{className:"g6-toggle-thumb"})}),s.jsx(vs,{label:"Prod"})]})},Nke=t=>{const e=Ske[t];return e?e():s.jsx("div",{className:"g6-preview g6-fallback"})};function kke(){return s.jsxs("div",{className:"g6-root",children:[s.jsxs("header",{className:"g6-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 6"}),s.jsx("p",{className:"g6-sub",children:"50 mock UI widgets spanning profile, guild, tables, upload, and admin snippets."})]}),s.jsx("div",{className:"g6-pill-row",children:s.jsx(vs,{label:"MOCK"})})]}),s.jsx("nav",{className:"g6-toc",children:TI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g6-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g6-sections",children:TI.map(t=>s.jsxs("details",{className:"g6-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g6-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-section-title",children:t.title}),s.jsx("div",{className:"g6-section-sub",children:t.description})]}),s.jsxs("span",{className:"g6-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g6-grid",children:t.items.map(e=>s.jsxs("div",{className:"g6-card",children:[s.jsxs("div",{className:"g6-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g6-card-title",children:e.title}),s.jsx("div",{className:"g6-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g6-pill-row",children:(e.tags||["MOCK"]).map(n=>s.jsx(vs,{label:n},n))})]}),Nke(e.previewId)]},e.id))})]},t.id))})]})}const AI=[{id:"progress",title:"Animated Progress",description:"Animated stripes, sweeps, counters, and wave fills.",items:[{id:"1",categoryId:"progress",title:"Stripe Motion Bar",subtitle:"moving stripes",tags:["UI"],previewId:"pv_ui7_stripe_motion2"},{id:"2",categoryId:"progress",title:"Gradient Sweep Fill",subtitle:"slow sweep",tags:["UI"],previewId:"pv_ui7_gradient_sweep"},{id:"3",categoryId:"progress",title:"Tick-Up Counter",subtitle:"odometer style",tags:["UI"],previewId:"pv_ui7_tickup_counter"},{id:"4",categoryId:"progress",title:"Milestone Pop",subtitle:"pop at thresholds",tags:["UI"],previewId:"pv_ui7_milestone_pop"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_ui7_ring_spinner"},{id:"6",categoryId:"progress",title:"Pulse Marker Line",subtitle:"avg marker pulse",tags:["UI"],previewId:"pv_ui7_marker_pulse"},{id:"7",categoryId:"progress",title:"Step Fill Animation",subtitle:"segment fill",tags:["UI"],previewId:"pv_ui7_step_fill"},{id:"8",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave in bar",tags:["UI"],previewId:"pv_ui7_wave_fill"},{id:"9",categoryId:"progress",title:"Micro Spark Animate",subtitle:"spark drawing",tags:["UI"],previewId:"pv_ui7_spark_draw"},{id:"10",categoryId:"progress",title:"Heat Glow Cells",subtitle:"glow on cells",tags:["UI"],previewId:"pv_ui7_heat_glow_cells"}]},{id:"hover",title:"Hover/Focus States",description:"Focus rings, tilts, bounces, outlines, and menus.",items:[{id:"11",categoryId:"hover",title:"Focus Ring Showcase",subtitle:"focus styles",tags:["UI"],previewId:"pv_ui7_focus_rings"},{id:"12",categoryId:"hover",title:"Hover Tilt Card",subtitle:"subtle tilt",tags:["UI"],previewId:"pv_ui7_hover_tilt"},{id:"13",categoryId:"hover",title:"Glow Border on Hover",subtitle:"outer glow",tags:["UI"],previewId:"pv_ui7_hover_glow_border"},{id:"14",categoryId:"hover",title:"Icon Bounce Hover",subtitle:"bounce icon",tags:["UI"],previewId:"pv_ui7_icon_bounce"},{id:"15",categoryId:"hover",title:"Tooltip Follow Mock",subtitle:"offset tooltip",tags:["UI"],previewId:"pv_ui7_tooltip_follow"},{id:"16",categoryId:"hover",title:"Pressed Button Depth",subtitle:"down state",tags:["UI"],previewId:"pv_ui7_button_depth"},{id:"17",categoryId:"hover",title:"Selection Outline",subtitle:"selected frame",tags:["UI"],previewId:"pv_ui7_select_outline"},{id:"18",categoryId:"hover",title:"Drag Handle Mock",subtitle:"grab dots",tags:["UI"],previewId:"pv_ui7_drag_handle"},{id:"19",categoryId:"hover",title:"Context Menu Hover",subtitle:"menu highlight",tags:["UI"],previewId:"pv_ui7_context_hover"},{id:"20",categoryId:"hover",title:"Keyboard Nav Dots",subtitle:"tab order hint",tags:["UI"],previewId:"pv_ui7_keynav_dots"}]},{id:"decor",title:"Decorative UI",description:"Glass headers, neon lines, patterns, and status clusters.",items:[{id:"21",categoryId:"decor",title:"Glass Panel Header",subtitle:"frosted header",tags:["UI"],previewId:"pv_ui7_glass_header"},{id:"22",categoryId:"decor",title:"Neon Accent Line",subtitle:"accent stroke",tags:["UI"],previewId:"pv_ui7_neon_accent"},{id:"23",categoryId:"decor",title:"Pattern Background Card",subtitle:"subtle pattern",tags:["UI"],previewId:"pv_ui7_pattern_bg"},{id:"24",categoryId:"decor",title:"Corner Cut Card",subtitle:"cut corners",tags:["UI"],previewId:"pv_ui7_corner_cut"},{id:"25",categoryId:"decor",title:"Divider Variants",subtitle:"3 divider styles",tags:["UI"],previewId:"pv_ui7_dividers"},{id:"26",categoryId:"decor",title:"Tag Pill Variants",subtitle:"solid/outline",tags:["UI"],previewId:"pv_ui7_tag_variants"},{id:"27",categoryId:"decor",title:"Icon Badge Stack",subtitle:"icon + badge",tags:["UI"],previewId:"pv_ui7_icon_badges"},{id:"28",categoryId:"decor",title:"Mini Banner Strip",subtitle:"announcement strip",tags:["UI"],previewId:"pv_ui7_banner_strip"},{id:"29",categoryId:"decor",title:"Progress Notches",subtitle:"notched bar",tags:["UI"],previewId:"pv_ui7_notches_bar"},{id:"30",categoryId:"decor",title:"Status Dot Cluster",subtitle:"3 statuses",tags:["UI"],previewId:"pv_ui7_status_cluster"}]},{id:"micro",title:"Micro-layouts",description:"Mini cards, headers, grids, and stacked chips.",items:[{id:"31",categoryId:"micro",title:"KPI + Mini Chart",subtitle:"two-column",tags:["UI"],previewId:"pv_ui7_kpi_minichart"},{id:"32",categoryId:"micro",title:"Split Header Actions",subtitle:"actions right",tags:["UI"],previewId:"pv_ui7_header_actions"},{id:"33",categoryId:"micro",title:"Compact Card Grid",subtitle:"22 grid",tags:["UI"],previewId:"pv_ui7_compact_grid"},{id:"34",categoryId:"micro",title:"Sticky Mini Footer",subtitle:"footer tools",tags:["UI"],previewId:"pv_ui7_sticky_footer"},{id:"35",categoryId:"micro",title:"Inline Editable Field",subtitle:"edit pencil",tags:["UI"],previewId:"pv_ui7_inline_edit"},{id:"36",categoryId:"micro",title:"Multi-line Subtitle Clamp",subtitle:"clamp demo",tags:["UI"],previewId:"pv_ui7_clamp_demo"},{id:"37",categoryId:"micro",title:"Icon List with Counts",subtitle:"icon + num",tags:["UI"],previewId:"pv_ui7_icon_counts"},{id:"38",categoryId:"micro",title:"Dual Badge Header",subtitle:"two tags",tags:["UI"],previewId:"pv_ui7_dual_badge"},{id:"39",categoryId:"micro",title:"Avatar Stack",subtitle:"overlapping",tags:["UI"],previewId:"pv_ui7_avatar_stack"},{id:"40",categoryId:"micro",title:"Chips + Progress Row",subtitle:"mixed row",tags:["UI"],previewId:"pv_ui7_chips_progress_row"}]},{id:"states",title:"Feedback & States",description:"Success, warning, error, empty, loading, sync, offline, locked.",items:[{id:"41",categoryId:"states",title:"Success Glow Toast",subtitle:"success state",tags:["UI"],previewId:"pv_ui7_success_toast"},{id:"42",categoryId:"states",title:"Warning Banner",subtitle:"attention state",tags:["UI"],previewId:"pv_ui7_warning_banner"},{id:"43",categoryId:"states",title:"Error Inline Panel",subtitle:"error state",tags:["UI"],previewId:"pv_ui7_error_panel"},{id:"44",categoryId:"states",title:"Empty State Illustration",subtitle:"empty",tags:["UI"],previewId:"pv_ui7_empty_state"},{id:"45",categoryId:"states",title:"Loading Dots",subtitle:"3 dots",tags:["UI"],previewId:"pv_ui7_loading_dots"},{id:"46",categoryId:"states",title:"Sync Indicator",subtitle:"sync badge",tags:["UI"],previewId:"pv_ui7_sync_indicator"},{id:"47",categoryId:"states",title:"Offline Mode Chip",subtitle:"offline badge",tags:["UI"],previewId:"pv_ui7_offline_chip"},{id:"48",categoryId:"states",title:"Disabled Overlay",subtitle:"disabled state",tags:["UI"],previewId:"pv_ui7_disabled_overlay"},{id:"49",categoryId:"states",title:"New Ribbon + Glow",subtitle:"new state",tags:["UI"],previewId:"pv_ui7_new_ribbon_glow"},{id:"50",categoryId:"states",title:"Locked State Stamp",subtitle:"locked stamp",tags:["UI"],previewId:"pv_ui7_locked_stamp"}]}],Ua=({label:t})=>s.jsx("span",{className:"g7-pill",children:t}),Es=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g7-bar tone-${e}`,style:{width:t,height:n}}),Ob=({tone:t="accent",size:e=8})=>s.jsx("span",{className:`g7-dot tone-${t}`,style:{width:e,height:e}}),Cke={pv_ui7_stripe_motion2:()=>s.jsx("div",{className:"g7-preview g7-stripes",children:s.jsx("div",{className:"g7-stripe-fill",style:{width:"78%"}})}),pv_ui7_gradient_sweep:()=>s.jsx("div",{className:"g7-preview g7-gradient",children:s.jsx("div",{className:"g7-gradient-fill"})}),pv_ui7_tickup_counter:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-odometer",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g7-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(Ua,{label:"Counter"})]}),pv_ui7_milestone_pop:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[20,50,80].map((t,e)=>s.jsxs("div",{className:"g7-milestone",children:[s.jsx("div",{className:`g7-milestone-dot ${e===1?"pop":""}`}),s.jsx("span",{className:"g7-mini",children:t})]},t))}),pv_ui7_ring_spinner:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-spinner",children:s.jsx("div",{className:"g7-spinner-arc"})}),s.jsx(Es,{width:"50%"})]}),pv_ui7_marker_pulse:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-marker-line",children:s.jsx("div",{className:"g7-marker",style:{left:"62%"}})}),s.jsx("span",{className:"g7-mini",children:"Average"})]}),pv_ui7_step_fill:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-stepper",children:Array.from({length:5}).map((t,e)=>s.jsx("div",{className:`g7-step ${e<3?"filled":""}`},e))}),pv_ui7_wave_fill:()=>s.jsx("div",{className:"g7-preview g7-wave",children:s.jsx("div",{className:"g7-wave-fill"})}),pv_ui7_spark_draw:()=>s.jsx("div",{className:"g7-preview g7-spark",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g7-spark-bar",style:{height:`${8+e%4*6}px`}},e))}),pv_ui7_heat_glow_cells:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:`g7-heat-cell ${e>=3?"glow":""}`},e))}),pv_ui7_focus_rings:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-focus"}),s.jsx("div",{className:"g7-focus strong"}),s.jsx("div",{className:"g7-focus dashed"})]}),pv_ui7_hover_tilt:()=>s.jsxs("div",{className:"g7-preview g7-tilt-card",children:[s.jsx(Es,{width:"70%"}),s.jsx(Es,{width:"40%",tone:"muted"})]}),pv_ui7_hover_glow_border:()=>s.jsx("div",{className:"g7-preview g7-glow-border",children:s.jsx(Es,{width:"60%"})}),pv_ui7_icon_bounce:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-bounce",children:""}),s.jsx(Es,{width:"40%"})]}),pv_ui7_tooltip_follow:()=>s.jsxs("div",{className:"g7-preview g7-tooltip-follow",children:[s.jsx("div",{className:"g7-target"}),s.jsx("div",{className:"g7-follow-tip",children:s.jsx(Es,{width:"50%"})})]}),pv_ui7_button_depth:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("button",{className:"g7-press-btn",children:"Press"}),s.jsx("button",{className:"g7-press-btn pressed",children:"Pressed"})]}),pv_ui7_select_outline:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-outline-card active",children:s.jsx(Es,{width:"60%"})}),s.jsx("div",{className:"g7-outline-card",children:s.jsx(Es,{width:"40%"})})]}),pv_ui7_drag_handle:()=>s.jsxs("div",{className:"g7-preview g7-row g7-center g7-gap-sm",children:[s.jsx("div",{className:"g7-drag-handle",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{},e))}),s.jsx(Es,{width:"50%"})]}),pv_ui7_context_hover:()=>s.jsx("div",{className:"g7-preview g7-col g7-gap-xxs",children:["Edit","Duplicate","Archive"].map((t,e)=>s.jsx("div",{className:`g7-menu-row ${e===1?"hover":""}`,children:t},t))}),pv_ui7_keynav_dots:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[Array.from({length:4}).map((t,e)=>s.jsx("span",{className:`g7-keydot ${e===0?"active":""}`},e)),s.jsx("span",{className:"g7-mini",children:"Tab order"})]}),pv_ui7_glass_header:()=>s.jsxs("div",{className:"g7-preview g7-glass",children:[s.jsx("div",{className:"g7-glass-bar"}),s.jsx(Es,{width:"50%"})]}),pv_ui7_neon_accent:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-neon-line"}),s.jsx(Es,{width:"40%"})]}),pv_ui7_pattern_bg:()=>s.jsxs("div",{className:"g7-preview g7-pattern",children:[s.jsx(Es,{width:"60%"}),s.jsx(Es,{width:"30%",tone:"muted"})]}),pv_ui7_corner_cut:()=>s.jsxs("div",{className:"g7-preview g7-corner-card",children:[s.jsx(Es,{width:"70%"}),s.jsx(Es,{width:"40%",tone:"muted"})]}),pv_ui7_dividers:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xs",children:[s.jsx("div",{className:"g7-divider solid"}),s.jsx("div",{className:"g7-divider dashed"}),s.jsx("div",{className:"g7-divider dotted"})]}),pv_ui7_tag_variants:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs",children:[s.jsx(Ua,{label:"Solid"}),s.jsx("span",{className:"g7-pill ghost",children:"Outline"}),s.jsx("span",{className:"g7-pill muted",children:"Muted"})]}),pv_ui7_icon_badges:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsxs("div",{className:"g7-icon-badge",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"g7-badge-num",children:"3"})]}),s.jsx(Es,{width:"50%"})]}),pv_ui7_banner_strip:()=>s.jsxs("div",{className:"g7-preview g7-banner",children:[s.jsx("span",{children:"Announcement"}),s.jsx(Ua,{label:"Live"})]}),pv_ui7_notches_bar:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-notches",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g7-notch ${e<5?"active":""}`},e))}),pv_ui7_status_cluster:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(Ob,{tone:"success"}),s.jsx(Ob,{tone:"warning"}),s.jsx(Ob,{tone:"danger"}),s.jsx("span",{className:"g7-mini",children:"Status"})]}),pv_ui7_kpi_minichart:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm",children:[s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx("span",{className:"g7-mini",children:"KPI"}),s.jsx(Es,{width:"60%"})]}),s.jsx("div",{className:"g7-mini-chart",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{style:{height:`${10+e*4}px`}},e))})]}),pv_ui7_header_actions:()=>s.jsxs("div",{className:"g7-preview g7-row g7-space-between g7-center",children:[s.jsx(Es,{width:"40%"}),s.jsxs("div",{className:"g7-row g7-gap-xs",children:[s.jsx("button",{className:"g7-btn ghost",children:"Action"}),s.jsx("button",{className:"g7-btn solid",children:"Primary"})]})]}),pv_ui7_compact_grid:()=>s.jsx("div",{className:"g7-preview g7-grid g7-grid-2",children:Array.from({length:4}).map((t,e)=>s.jsxs("div",{className:"g7-mini-card",children:[s.jsx(Es,{width:"50%"}),s.jsx(Es,{width:"30%",tone:"muted"})]},e))}),pv_ui7_sticky_footer:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx(Es,{width:"70%"}),s.jsxs("div",{className:"g7-sticky-footer",children:[s.jsx("button",{className:"g7-btn ghost",children:"Cancel"}),s.jsx("button",{className:"g7-btn solid",children:"Save"})]})]}),pv_ui7_inline_edit:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("input",{className:"g7-inline",value:"Editable text",readOnly:!0}),s.jsx("span",{className:"g7-pencil"})]}),pv_ui7_clamp_demo:()=>s.jsxs("div",{className:"g7-preview g7-col g7-gap-xxs",children:[s.jsx("div",{className:"g7-clamp",children:"Very long subtitle that is clamped after two lines for readability."}),s.jsx(Es,{width:"40%"})]}),pv_ui7_icon_counts:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:["","",""].map((t,e)=>s.jsxs("div",{className:"g7-icon-count",children:[s.jsx("span",{children:t}),s.jsx("span",{className:"g7-badge-num",children:e+2})]},t))}),pv_ui7_dual_badge:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx(Ua,{label:"Pro"}),s.jsx(Ua,{label:"UI"}),s.jsx(Es,{width:"40%"})]}),pv_ui7_avatar_stack:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-xs g7-center",children:[s.jsx("div",{className:"g7-stack",children:["A","B","C"].map((t,e)=>s.jsx("span",{className:"g7-stack-avatar",style:{left:`${e*12}px`},children:t},t))}),s.jsx("span",{className:"g7-mini",children:"+5"})]}),pv_ui7_chips_progress_row:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx(Ua,{label:"UI"}),s.jsx(Ua,{label:"Motion"}),s.jsx("div",{className:"g7-pulse-bar",children:s.jsx("div",{className:"g7-pulse-fill",style:{width:"64%"}})})]}),pv_ui7_success_toast:()=>s.jsxs("div",{className:"g7-preview g7-toast success",children:[s.jsx("span",{className:"g7-dot tone-success"}),s.jsx("span",{children:"Saved successfully"})]}),pv_ui7_warning_banner:()=>s.jsx("div",{className:"g7-preview g7-banner warn",children:s.jsx("span",{children:"Warning: changes pending"})}),pv_ui7_error_panel:()=>s.jsxs("div",{className:"g7-preview g7-error",children:[s.jsx("div",{className:"g7-error-icon",children:"!"}),s.jsxs("div",{className:"g7-col g7-gap-xxs",children:[s.jsx(Es,{width:"60%",tone:"danger"}),s.jsx(Es,{width:"40%",tone:"muted"})]})]}),pv_ui7_empty_state:()=>s.jsxs("div",{className:"g7-preview g7-empty",children:[s.jsx("div",{className:"g7-ghost"}),s.jsx(Es,{width:"50%",tone:"muted"})]}),pv_ui7_loading_dots:()=>s.jsx("div",{className:"g7-preview g7-row g7-gap-xxs g7-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g7-loading-dot"},e))}),pv_ui7_sync_indicator:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-sync",children:s.jsx("div",{className:"g7-sync-arc"})}),s.jsx(Ua,{label:"Syncing"})]}),pv_ui7_offline_chip:()=>s.jsxs("div",{className:"g7-preview g7-row g7-gap-sm g7-center",children:[s.jsx("div",{className:"g7-chip offline",children:"Offline"}),s.jsx(Es,{width:"40%",tone:"muted"})]}),pv_ui7_disabled_overlay:()=>s.jsxs("div",{className:"g7-preview g7-disabled",children:[s.jsx(Es,{width:"60%"}),s.jsx("div",{className:"g7-disabled-mask"})]}),pv_ui7_new_ribbon_glow:()=>s.jsxs("div",{className:"g7-preview g7-ribbon-card",children:[s.jsx("div",{className:"g7-ribbon",children:"New"}),s.jsx("div",{className:"g7-ribbon-glow"}),s.jsx(Es,{width:"60%"})]}),pv_ui7_locked_stamp:()=>s.jsxs("div",{className:"g7-preview g7-stamp",children:[s.jsx("div",{className:"g7-stamp-ring",children:"LOCKED"}),s.jsx(Es,{width:"40%"})]})},Tke=t=>{const e=Cke[t];return e?e():s.jsx("div",{className:"g7-preview g7-fallback"})};function Ike(){return s.jsxs("div",{className:"g7-root",children:[s.jsxs("header",{className:"g7-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 7"}),s.jsx("p",{className:"g7-sub",children:"50 animated UI micro-previews covering motion, hover states, decorative bits, and feedback."})]}),s.jsx("div",{className:"g7-pill-row",children:s.jsx(Ua,{label:"UI"})})]}),s.jsx("nav",{className:"g7-toc",children:AI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g7-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g7-sections",children:AI.map(t=>s.jsxs("details",{className:"g7-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g7-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-section-title",children:t.title}),s.jsx("div",{className:"g7-section-sub",children:t.description})]}),s.jsxs("span",{className:"g7-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g7-grid",children:t.items.map(e=>s.jsxs("div",{className:"g7-card",children:[s.jsxs("div",{className:"g7-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g7-card-title",children:e.title}),s.jsx("div",{className:"g7-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g7-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(Ua,{label:n},n))})]}),Tke(e.previewId)]},e.id))})]},t.id))})]})}const EI=[{id:"progress",title:"Animated Progress",description:"Pulses, stripes, sweeps, and counters that move on their own.",items:[{id:"1",categoryId:"progress",title:"Pulse Progress Bar",subtitle:"soft pulse fill",tags:["UI"],previewId:"pv_anim_pulse_bar"},{id:"2",categoryId:"progress",title:"Stripe Motion Fill",subtitle:"striped motion",tags:["UI"],previewId:"pv_anim_stripes_fill"},{id:"3",categoryId:"progress",title:"Gradient Sweep Meter",subtitle:"sweeping sheen",tags:["UI"],previewId:"pv_anim_gradient_sweep"},{id:"4",categoryId:"progress",title:"Segments Filling Track",subtitle:"sequential fill",tags:["UI"],previewId:"pv_anim_segments_fill"},{id:"5",categoryId:"progress",title:"Ring Spinner Progress",subtitle:"rotating arc",tags:["UI"],previewId:"pv_anim_ring_spinner"},{id:"6",categoryId:"progress",title:"Wave Fill Gauge",subtitle:"wave motion",tags:["UI"],previewId:"pv_anim_wave_fill"},{id:"7",categoryId:"progress",title:"Tick-Up Counter",subtitle:"rolling digits",tags:["UI"],previewId:"pv_anim_tickup_counter"},{id:"8",categoryId:"progress",title:"Marker Line Pulse",subtitle:"pulsing marker",tags:["UI"],previewId:"pv_anim_marker_pulse"},{id:"9",categoryId:"progress",title:"Notched Bar Scroll",subtitle:"notches glide",tags:["UI"],previewId:"pv_anim_notches_scroll"},{id:"10",categoryId:"progress",title:"Microbars Breathing",subtitle:"bars breathe",tags:["UI"],previewId:"pv_anim_microbars_breathe"}]},{id:"glow",title:"Glows, Unlocks, Highlights",description:"Shimmers, spotlights, confetti, and soft neon pulses.",items:[{id:"11",categoryId:"glow",title:"Unlock Glow Border",subtitle:"glowing frame",tags:["UI"],previewId:"pv_anim_unlock_glow_border"},{id:"12",categoryId:"glow",title:"Shimmer Skeleton",subtitle:"loading shimmer",tags:["UI"],previewId:"pv_anim_skeleton_shimmer"},{id:"13",categoryId:"glow",title:"New Ribbon Shine",subtitle:"ribbon sweep",tags:["UI"],previewId:"pv_anim_ribbon_shine"},{id:"14",categoryId:"glow",title:"Badge Pop Loop",subtitle:"pop animation",tags:["UI"],previewId:"pv_anim_badge_pop"},{id:"15",categoryId:"glow",title:"Spotlight Sweep",subtitle:"light sweep",tags:["UI"],previewId:"pv_anim_spotlight_sweep"},{id:"16",categoryId:"glow",title:"Confetti Drift",subtitle:"floating dots",tags:["UI"],previewId:"pv_anim_confetti_drift"},{id:"17",categoryId:"glow",title:"Spark Particles",subtitle:"spark drizzle",tags:["UI"],previewId:"pv_anim_spark_particles"},{id:"18",categoryId:"glow",title:"Aura Halo Ring",subtitle:"halo pulse",tags:["UI"],previewId:"pv_anim_halo_ring"},{id:"19",categoryId:"glow",title:"Hover Lift (auto demo)",subtitle:"auto float",tags:["UI"],previewId:"pv_anim_hover_lift_demo"},{id:"20",categoryId:"glow",title:"Soft Neon Pulse Line",subtitle:"neon flicker",tags:["UI"],previewId:"pv_anim_neon_line_pulse"}]},{id:"controls",title:"Animated Controls & Navigation",description:"Auto-animating toggles, tabs, tooltips, and badges.",items:[{id:"21",categoryId:"controls",title:"Toggle Flip Motion",subtitle:"thumb flip",tags:["UI"],previewId:"pv_anim_toggle_flip"},{id:"22",categoryId:"controls",title:"Segmented Toggle Slide",subtitle:"sliding highlight",tags:["UI"],previewId:"pv_anim_seg_toggle_slide"},{id:"23",categoryId:"controls",title:"Tabs Underline Slide",subtitle:"underline glide",tags:["UI"],previewId:"pv_anim_tabs_underline"},{id:"24",categoryId:"controls",title:"Dropdown Open Bounce",subtitle:"bouncy menu",tags:["UI"],previewId:"pv_anim_dropdown_bounce"},{id:"25",categoryId:"controls",title:"Tooltip Appear/Float",subtitle:"float reveal",tags:["UI"],previewId:"pv_anim_tooltip_float"},{id:"26",categoryId:"controls",title:"Button Press Depth Loop",subtitle:"press cycle",tags:["UI"],previewId:"pv_anim_button_depth"},{id:"27",categoryId:"controls",title:"Loading Dots",subtitle:"dot bounce",tags:["UI"],previewId:"pv_anim_loading_dots"},{id:"28",categoryId:"controls",title:"Sync Spinner Badge",subtitle:"badge spinner",tags:["UI"],previewId:"pv_anim_sync_spinner"},{id:"29",categoryId:"controls",title:"Notification Bell Pulse",subtitle:"bell ring",tags:["UI"],previewId:"pv_anim_bell_pulse"},{id:"30",categoryId:"controls",title:"Chip Select Ripple",subtitle:"ripple effect",tags:["UI"],previewId:"pv_anim_chip_ripple"}]},{id:"charts",title:"Animated Micro-Charts",description:"Drawing sparks, morphing radar, wobbling histograms, glowing grids.",items:[{id:"31",categoryId:"charts",title:"Sparkline Draw",subtitle:"line drawing",tags:["UI"],previewId:"pv_anim_spark_draw"},{id:"32",categoryId:"charts",title:"Step Line March",subtitle:"step march",tags:["UI"],previewId:"pv_anim_step_march"},{id:"33",categoryId:"charts",title:"Bar Grow Cycle",subtitle:"bars grow",tags:["UI"],previewId:"pv_anim_bar_grow_cycle"},{id:"34",categoryId:"charts",title:"Radar Polygon Morph",subtitle:"morphing radar",tags:["UI"],previewId:"pv_anim_radar_morph"},{id:"35",categoryId:"charts",title:"Donut Arc Sweep",subtitle:"arc sweep",tags:["UI"],previewId:"pv_anim_donut_sweep"},{id:"36",categoryId:"charts",title:"Histogram Wobble",subtitle:"wobble bars",tags:["UI"],previewId:"pv_anim_hist_wobble"},{id:"37",categoryId:"charts",title:"Delta Arrow Float",subtitle:"floating delta",tags:["UI"],previewId:"pv_anim_delta_arrow_float"},{id:"38",categoryId:"charts",title:"Timeline Dot Travel",subtitle:"dot travels",tags:["UI"],previewId:"pv_anim_timeline_dot"},{id:"39",categoryId:"charts",title:"Heat Cells Glow Cycle",subtitle:"cells glow",tags:["UI"],previewId:"pv_anim_heat_glow_cycle"},{id:"40",categoryId:"charts",title:"Grid Scanline",subtitle:"scanline sweep",tags:["UI"],previewId:"pv_anim_grid_scanline"}]},{id:"states",title:"Feedback & States",description:"Toasts, banners, pings, overlays, and queue motion.",items:[{id:"41",categoryId:"states",title:"Success Toast Slide-In",subtitle:"toast slides",tags:["UI"],previewId:"pv_anim_toast_slidein"},{id:"42",categoryId:"states",title:"Warning Banner Shake",subtitle:"gentle shake",tags:["UI"],previewId:"pv_anim_banner_shake"},{id:"43",categoryId:"states",title:"Error Pulse Border",subtitle:"border pulse",tags:["UI"],previewId:"pv_anim_error_pulse"},{id:"44",categoryId:"states",title:"Offline Chip Blink",subtitle:"chip blink",tags:["UI"],previewId:"pv_anim_offline_blink"},{id:"45",categoryId:"states",title:"Locked Overlay Fade",subtitle:"overlay fade",tags:["UI"],previewId:"pv_anim_locked_fade"},{id:"46",categoryId:"states",title:"Progress Complete Burst",subtitle:"burst ring",tags:["UI"],previewId:"pv_anim_complete_burst"},{id:"47",categoryId:"states",title:"Attention Ping Indicator",subtitle:"ping pulses",tags:["UI"],previewId:"pv_anim_ping_indicator"},{id:"48",categoryId:"states",title:"Tooltip Hint Nudge",subtitle:"hint nudge",tags:["UI"],previewId:"pv_anim_hint_nudge"},{id:"49",categoryId:"states",title:"Queue Item Slide",subtitle:"slide loop",tags:["UI"],previewId:"pv_anim_queue_slide"},{id:"50",categoryId:"states",title:'"New Data" Glow Dot',subtitle:"dot glow",tags:["UI"],previewId:"pv_anim_newdata_dot"}]}],gu=({label:t})=>s.jsx("span",{className:"g8-pill",children:t}),Qs=({width:t,tone:e="accent",height:n=8})=>s.jsx("div",{className:`g8-bar tone-${e}`,style:{width:t,height:n}}),Ake={pv_anim_pulse_bar:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-animated",children:s.jsx("div",{className:"g8-track-fill pulse",style:{width:"76%"}})}),s.jsxs("div",{className:"g8-mini-row",children:[s.jsx(gu,{label:"UI"}),s.jsx("span",{className:"g8-mini",children:"Live"})]})]}),pv_anim_stripes_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-stripes g8-animated"}),s.jsx(Qs,{width:"60%",tone:"muted",height:6})]}),pv_anim_gradient_sweep:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-track g8-sweep g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Gradient sweep"})]}),pv_anim_segments_fill:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-seg-track",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:`g8-seg ${e<6?"g8-animated fill":""}`,style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_ring_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-ring g8-animated",children:s.jsx("div",{className:"g8-ring-arc"})}),s.jsx(Qs,{width:"50%"})]}),pv_anim_wave_fill:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-wave g8-animated"}),s.jsx("span",{className:"g8-mini",children:"Wave fill"})]}),pv_anim_tickup_counter:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-odometer g8-animated",children:["0","1","2"].map((t,e)=>s.jsx("span",{className:`g8-odo-digit ${e===2?"active":""}`,children:t},e))}),s.jsx(gu,{label:"Counter"})]}),pv_anim_marker_pulse:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-marker-line",children:s.jsx("div",{className:"g8-marker g8-animated",style:{left:"64%"}})}),s.jsx("span",{className:"g8-mini",children:"Avg marker"})]}),pv_anim_notches_scroll:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-notches g8-animated",children:Array.from({length:12}).map((t,e)=>s.jsx("div",{className:"g8-notch"},e))}),pv_anim_microbars_breathe:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:["ATK","SPD","HP","LCK"].map((t,e)=>s.jsxs("div",{className:"g8-col g8-gap-xxs g8-center",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:`g8-microbar g8-animated ${e%2===0?"alt":""}`})]},t))}),pv_anim_unlock_glow_border:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsxs("div",{className:"g8-glow-card g8-animated",children:[s.jsx(Qs,{width:"60%"}),s.jsx(Qs,{width:"40%",tone:"muted"})]}),s.jsx(gu,{label:"Unlocked"})]}),pv_anim_skeleton_shimmer:()=>s.jsxs("div",{className:"g8-preview g8-col g8-gap-xxs",children:[s.jsx("div",{className:"g8-skeleton g8-animated"}),s.jsx("div",{className:"g8-skeleton short g8-animated"})]}),pv_anim_ribbon_shine:()=>s.jsxs("div",{className:"g8-preview g8-ribbon-card",children:[s.jsx("div",{className:"g8-ribbon g8-animated",children:"NEW"}),s.jsx(Qs,{width:"65%"}),s.jsx(Qs,{width:"40%",tone:"muted"})]}),pv_anim_badge_pop:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-badge-pop g8-animated",children:"UI"}),s.jsx(Qs,{width:"50%"})]}),pv_anim_spotlight_sweep:()=>s.jsxs("div",{className:"g8-preview g8-spotlight g8-animated",children:[s.jsx("div",{className:"g8-spot-sheen"}),s.jsx(Qs,{width:"60%"})]}),pv_anim_confetti_drift:()=>s.jsx("div",{className:"g8-preview g8-confetti",children:Array.from({length:14}).map((t,e)=>s.jsx("span",{className:"g8-confetti-dot g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_spark_particles:()=>s.jsx("div",{className:"g8-preview g8-sparks",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark g8-animated",style:{animationDelay:`${e*.12}s`}},e))}),pv_anim_halo_ring:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-halo g8-animated",children:s.jsx("div",{className:"g8-halo-ring"})}),s.jsx(Qs,{width:"40%"})]}),pv_anim_hover_lift_demo:()=>s.jsxs("div",{className:"g8-preview g8-hover-card g8-animated",children:[s.jsx(Qs,{width:"70%"}),s.jsx(Qs,{width:"45%",tone:"muted"})]}),pv_anim_neon_line_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-neon-line g8-animated"}),s.jsx(Qs,{width:"40%"})]}),pv_anim_toggle_flip:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-toggle g8-animated",children:s.jsx("div",{className:"g8-toggle-thumb"})}),s.jsx("span",{className:"g8-mini",children:"Auto flip"})]}),pv_anim_seg_toggle_slide:()=>s.jsx("div",{className:"g8-preview g8-seg-toggle",children:s.jsxs("div",{className:"g8-seg-rail",children:[s.jsx("div",{className:"g8-seg-slider g8-animated"}),s.jsxs("div",{className:"g8-seg-labels",children:[s.jsx("span",{children:"One"}),s.jsx("span",{children:"Two"}),s.jsx("span",{children:"Three"})]})]})}),pv_anim_tabs_underline:()=>s.jsxs("div",{className:"g8-preview g8-tabs",children:[s.jsx("div",{className:"g8-tab-row",children:["Overview","Stats","Logs"].map((t,e)=>s.jsx("span",{className:`g8-tab ${e===1?"active":""}`,children:t},t))}),s.jsx("div",{className:"g8-underline g8-animated"})]}),pv_anim_dropdown_bounce:()=>s.jsxs("div",{className:"g8-preview g8-dropdown",children:[s.jsx("div",{className:"g8-drop-head",children:"Select"}),s.jsxs("div",{className:"g8-drop-menu g8-animated",children:[s.jsx("div",{className:"g8-drop-item",children:"Option A"}),s.jsx("div",{className:"g8-drop-item",children:"Option B"}),s.jsx("div",{className:"g8-drop-item",children:"Option C"})]})]}),pv_anim_tooltip_float:()=>s.jsxs("div",{className:"g8-preview g8-tooltip",children:[s.jsx("div",{className:"g8-tooltip-target"}),s.jsx("div",{className:"g8-tooltip-box g8-animated",children:s.jsx(Qs,{width:"60%"})})]}),pv_anim_button_depth:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("button",{className:"g8-press-btn g8-animated",children:"Press"}),s.jsx("button",{className:"g8-press-btn alt g8-animated",children:"Hold"})]}),pv_anim_loading_dots:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center",children:Array.from({length:3}).map((t,e)=>s.jsx("span",{className:"g8-loading-dot g8-animated",style:{animationDelay:`${e*.15}s`}},e))}),pv_anim_sync_spinner:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-sync g8-animated",children:s.jsx("div",{className:"g8-sync-arc"})}),s.jsx(gu,{label:"Syncing"})]}),pv_anim_bell_pulse:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-bell g8-animated",children:s.jsx("span",{className:"g8-bell-ring"})}),s.jsx(Qs,{width:"50%"})]}),pv_anim_chip_ripple:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-xs g8-center",children:[s.jsx("span",{className:"g8-chip g8-animated",children:"UI"}),s.jsx("span",{className:"g8-chip",children:"Mock"})]}),pv_anim_spark_draw:()=>s.jsx("div",{className:"g8-preview g8-sparkline",children:Array.from({length:10}).map((t,e)=>s.jsx("span",{className:"g8-spark-bar g8-animated",style:{animationDelay:`${e*.08}s`}},e))}),pv_anim_step_march:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-stepper",children:Array.from({length:6}).map((t,e)=>s.jsx("div",{className:"g8-step g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_bar_grow_cycle:()=>s.jsx("div",{className:"g8-preview g8-col g8-gap-xxs",children:["A","B","C"].map((t,e)=>s.jsxs("div",{className:"g8-grow-row",children:[s.jsx("span",{className:"g8-mini",children:t}),s.jsx("div",{className:"g8-grow-bar g8-animated",style:{animationDelay:`${e*.15}s`}})]},t))}),pv_anim_radar_morph:()=>s.jsxs("div",{className:"g8-preview g8-radar",children:[s.jsx("div",{className:"g8-radar-shape g8-animated"}),s.jsx("div",{className:"g8-radar-ring outer"}),s.jsx("div",{className:"g8-radar-ring inner"})]}),pv_anim_donut_sweep:()=>s.jsxs("div",{className:"g8-preview g8-row g8-center g8-gap-sm",children:[s.jsx("div",{className:"g8-donut g8-animated",children:s.jsx("div",{className:"g8-donut-hole",children:"68%"})}),s.jsx(Qs,{width:"40%"})]}),pv_anim_hist_wobble:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-center g8-hist",children:Array.from({length:6}).map((t,e)=>s.jsx("span",{className:"g8-hist-bar g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_delta_arrow_float:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-delta g8-animated",children:""}),s.jsx(Qs,{width:"50%"})]}),pv_anim_timeline_dot:()=>s.jsxs("div",{className:"g8-preview g8-timeline",children:[s.jsx("div",{className:"g8-timeline-line"}),s.jsx("div",{className:"g8-timeline-dot g8-animated"})]}),pv_anim_heat_glow_cycle:()=>s.jsx("div",{className:"g8-preview g8-row g8-gap-xxs g8-heatline",children:Array.from({length:8}).map((t,e)=>s.jsx("div",{className:"g8-heat-cell g8-animated",style:{animationDelay:`${e*.1}s`}},e))}),pv_anim_grid_scanline:()=>s.jsxs("div",{className:"g8-preview g8-grid-scan",children:[s.jsx("div",{className:"g8-scanline g8-animated"}),s.jsx("div",{className:"g8-grid-bg"})]}),pv_anim_toast_slidein:()=>s.jsxs("div",{className:"g8-preview g8-toast g8-animated",children:[s.jsx("span",{className:"g8-dot tone-success"}),s.jsx("span",{children:"Saved"})]}),pv_anim_banner_shake:()=>s.jsx("div",{className:"g8-preview g8-banner g8-animated",children:s.jsx("span",{children:"Warning: check inputs"})}),pv_anim_error_pulse:()=>s.jsxs("div",{className:"g8-preview g8-error g8-animated",children:[s.jsx("div",{className:"g8-error-icon",children:"!"}),s.jsxs("div",{className:"g8-col g8-gap-xxs",children:[s.jsx(Qs,{width:"60%",tone:"danger"}),s.jsx(Qs,{width:"40%",tone:"muted"})]})]}),pv_anim_offline_blink:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-chip offline g8-animated",children:"Offline"}),s.jsx(Qs,{width:"40%",tone:"muted"})]}),pv_anim_locked_fade:()=>s.jsxs("div",{className:"g8-preview g8-locked",children:[s.jsx(Qs,{width:"60%"}),s.jsx("div",{className:"g8-locked-mask g8-animated"})]}),pv_anim_complete_burst:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-burst g8-animated"}),s.jsx(Qs,{width:"40%"})]}),pv_anim_ping_indicator:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-ping g8-animated",children:s.jsx("span",{className:"g8-ping-dot"})}),s.jsx(Qs,{width:"50%"})]}),pv_anim_hint_nudge:()=>s.jsxs("div",{className:"g8-preview g8-tooltip-hint",children:[s.jsx("div",{className:"g8-hint-box g8-animated",children:s.jsx(Qs,{width:"50%"})}),s.jsx("div",{className:"g8-hint-arrow"})]}),pv_anim_queue_slide:()=>s.jsx("div",{className:"g8-preview g8-queue",children:["Item 1","Item 2","Item 3"].map((t,e)=>s.jsx("div",{className:`g8-queue-row g8-animated ${e===1?"active":""}`,style:{animationDelay:`${e*.18}s`},children:s.jsx(Qs,{width:`${50+e*10}%`})},t))}),pv_anim_newdata_dot:()=>s.jsxs("div",{className:"g8-preview g8-row g8-gap-sm g8-center",children:[s.jsx("div",{className:"g8-newdot g8-animated"}),s.jsx(Qs,{width:"50%"})]})},Eke=t=>{const e=Ake[t];return e?e():s.jsx("div",{className:"g8-preview g8-fallback"})};function Rke(){return s.jsxs("div",{className:"g8-root",children:[s.jsxs("header",{className:"g8-intro",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Gamified 8"}),s.jsx("p",{className:"g8-sub",children:"50 animated UI micro-demos with CSS motion. All scoped to this tab and honor reduced motion."})]}),s.jsx("div",{className:"g8-pill-row",children:s.jsx(gu,{label:"UI"})})]}),s.jsx("nav",{className:"g8-toc",children:EI.map(t=>s.jsx("a",{href:`#${t.id}`,className:"g8-toc-link",children:t.title},t.id))}),s.jsx("div",{className:"g8-sections",children:EI.map(t=>s.jsxs("details",{className:"g8-section",open:!0,id:t.id,children:[s.jsxs("summary",{className:"g8-section-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-section-title",children:t.title}),s.jsx("div",{className:"g8-section-sub",children:t.description})]}),s.jsxs("span",{className:"g8-summary-line",children:[t.items.length," items"]})]}),s.jsx("div",{className:"g8-grid",children:t.items.map(e=>s.jsxs("div",{className:"g8-card",children:[s.jsxs("div",{className:"g8-card-head",children:[s.jsxs("div",{children:[s.jsx("div",{className:"g8-card-title",children:e.title}),s.jsx("div",{className:"g8-card-sub",children:e.subtitle})]}),s.jsx("div",{className:"g8-pill-row",children:(e.tags||["UI"]).map(n=>s.jsx(gu,{label:n},n))})]}),Eke(e.previewId)]},e.id))})]},t.id))})]})}const RI=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function Pke(t=120){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,className:RI[n%RI.length],level:200+n%50,guild:n%3===0?`Guild ${n%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const Vb={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function PI(){const[t,e]=R.useState("rows"),[n,r]=R.useState(0),[i,a]=R.useState(""),[o,c]=R.useState(60),u=R.useMemo(()=>Pke(240),[]),h=R.useMemo(()=>u.filter(p=>p.level>=n).filter(p=>p.name.toLowerCase().includes(i.toLowerCase())).slice(0,o),[u,n,i,o]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("select",{value:t,onChange:p=>e(p.target.value),children:[s.jsx("option",{value:"rows",children:"Compact Rows"}),s.jsx("option",{value:"cards",children:"Card Grid"}),s.jsx("option",{value:"masonry",children:"Masonry"})]}),s.jsx("input",{placeholder:"Search",value:i,onChange:p=>a(p.target.value)}),s.jsxs("label",{children:["Min Level ",s.jsx("input",{type:"number",value:n,onChange:p=>r(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]}),s.jsxs("label",{children:["Limit ",s.jsx("input",{type:"number",value:o,onChange:p=>c(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&s.jsx("div",{style:{...Vb,padding:0,overflow:"hidden"},children:h.map(p=>{var g;return s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),s.jsxs("div",{children:[s.jsxs("div",{style:{fontWeight:700},children:[p.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:p.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="cards"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>{var g;return s.jsxs("div",{style:Vb,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:p.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),s.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[s.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),s.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="masonry"&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>s.jsxs("div",{style:{...Vb,height:140+parseInt(p.id)%3*40},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{fontWeight:700},children:p.name}),s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),s.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),s.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},p.id))})]})}function LI(t=24){const e=[];for(let n=1;n<=t;n++)e.push({id:String(n),name:`Player ${n}`,server:`EU${1+n%3}`,lastScanMinsAgo:60+n*7%240});return e}function DI(){const[t,e]=R.useState(120),[n,r]=R.useState(()=>LI(24));R.useEffect(()=>{const a=setInterval(()=>{r(o=>{if(!o.length)return o;const c=Math.floor(Math.random()*o.length),u=[...o];return u[c]={...u[c],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),R.useEffect(()=>{const a=setInterval(()=>{r(o=>o.map(c=>({...c,lastScanMinsAgo:c.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=R.useMemo(()=>n.filter(a=>a.lastScanMinsAgo>t),[n,t]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),s.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[s.jsxs("label",{children:["Freshness TTL (min) ",s.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),s.jsx("button",{onClick:()=>r(LI(24)),children:"Reset Demo Data"})]}),s.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),s.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[s.jsx("div",{children:"Player"}),s.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[s.jsxs("div",{children:[a.name," ",s.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),s.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&s.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function Lke(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),n=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:n}}function MI(){const[t,e]=R.useState("idle"),[n,r]=R.useState(null),[i,a]=R.useState(!1),o=R.useCallback(async c=>{var h;c.preventDefault(),a(!1);const u=(h=c.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const p=await u.text(),{isHar:g,isSf:y}=Lke(p);if(e("parsing"),await new Promise(_=>setTimeout(_,600)),!g&&!y){e("error"),r({isHar:g,isSf:y,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:y,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":y?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(p.length/2500)} (rough).`})}catch(p){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(p==null?void 0:p.message)||"Parse failed"})}}},[]);return s.jsxs("div",{children:[s.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),s.jsx("div",{onDragOver:c=>{c.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:o,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),s.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),s.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Status:"})," ",t]}),n?s.jsxs("ul",{children:[s.jsxs("li",{children:["isHar: ",String(n.isHar)]}),s.jsxs("li",{children:["isSf: ",String(n.isSf)]}),s.jsxs("li",{children:["sizeKB: ",n.sizeKB]}),n.error&&s.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",n.error]}),n.summary&&s.jsxs("li",{children:["summary: ",n.summary]})]}):s.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const Dke="_wrap_hxkkn_3",Mke="_left_hxkkn_17",Fke="_right_hxkkn_25",Bke="_canvasCard_hxkkn_33",$ke="_hint_hxkkn_83",Oke="_panel_hxkkn_95",Vke="_panelTitle_hxkkn_109",Uke="_panelBody_hxkkn_121",wo={wrap:Dke,left:Mke,right:Fke,canvasCard:Bke,hint:$ke,panel:Oke,panelTitle:Vke,panelBody:Uke},Gke=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],zke=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function Hke(){const[t,e]=R.useState("Canvas ist vorbereitet (526526)."),n=R.useRef(null),[r,i]=R.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,o]=R.useState(!0);R.useEffect(()=>{const p=document.getElementById("PortraitCanvas");if(!p){e("Fehler: Canvas nicht gefunden.");return}try{n.current&&typeof n.current.dispose=="function"&&n.current.dispose()}catch(_){}let g=console.error;a&&(console.error=(..._)=>{var k;const w=String((k=_==null?void 0:_[0])!=null?k:"");w.includes("Failed to load URL")&&w.includes("PortraitMaker-res/portraits/")||g(..._)});let y=null;try{y=new m3(p,{...r}),n.current=y,e("Rendering")}catch(_){a&&(console.error=g),g("Error initializing PortraitMaker:",_),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return y&&(y.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{y&&typeof y.dispose=="function"&&y.dispose()}finally{a&&(console.error=g)}}},[r,a]);const c=()=>{const p=document.getElementById("PortraitCanvas");if(!p)return;const g=p.toDataURL("image/png"),y=document.createElement("a");y.href=g,y.download="portrait.png",y.click()},u=p=>{i(g=>({...g,genderName:p,beard:p==="female"?0:g.beard}))},h=r.special!==0;return s.jsxs("div",{className:wo.wrap,children:[s.jsx("div",{className:wo.left,children:s.jsxs("div",{className:wo.canvasCard,children:[s.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),s.jsx("div",{className:wo.hint,children:t})]})}),s.jsx("div",{className:wo.right,children:s.jsxs("div",{className:wo.panel,children:[s.jsx("h2",{className:wo.panelTitle,children:"Controls"}),s.jsx("div",{className:wo.panelBody,children:s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",s.jsx("input",{type:"number",value:r.special,onChange:p=>i(g=>({...g,special:Number(p.target.value||0)})),style:{width:100}})]}),s.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[s.jsxs("label",{children:["Gender:",s.jsxs("select",{value:r.genderName,onChange:p=>u(p.target.value),children:[s.jsx("option",{value:"male",children:"male"}),s.jsx("option",{value:"female",children:"female"})]})]}),s.jsxs("label",{children:["Class:",s.jsx("input",{type:"number",min:1,value:r.class,onChange:p=>i(g=>({...g,class:Number(p.target.value||0)})),style:{width:80}})]}),s.jsxs("label",{children:["Race:",s.jsx("input",{type:"number",min:1,value:r.race,onChange:p=>i(g=>({...g,race:Number(p.target.value||0)})),style:{width:80}})]})]}),s.jsxs("label",{children:["Background:",s.jsx("select",{value:r.background,onChange:p=>i(g=>({...g,background:p.target.value})),children:Gke.map(p=>s.jsx("option",{value:p,children:p===""?"transparent":p},p))})]}),s.jsxs("label",{children:["Frame:",s.jsx("select",{value:r.frame,onChange:p=>i(g=>({...g,frame:p.target.value})),children:zke.map(p=>s.jsx("option",{value:p,children:p===""?"none":p},p))})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:p=>i(g=>({...g,showBorder:p.target.checked}))}),"showBorder"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:a,onChange:p=>o(p.target.checked)}),"Mute 404 logs (Playground)"]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:s.jsx("button",{onClick:c,children:"Export PNG"})}),h&&s.jsxs("div",{className:wo.hint,children:["Hinweis: Bei ",s.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const Wke=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],Kke=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],qke=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function Qke(){return s.jsx(Kt,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),s.jsx("ul",{className:"mt-2 space-y-2",children:Wke.map(t=>s.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[s.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),s.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),s.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[s.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),s.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),s.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:s.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),s.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:Kke.map(t=>s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),s.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),s.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),s.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:qke.map(t=>s.jsx("li",{children:t},t))})]})]}),children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),s.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),s.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),s.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),s.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),s.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),s.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>s.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),s.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),s.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const Yke={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function Xke(){return s.jsx(Kt,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:s.jsx("div",{className:"flex w-full justify-center pt-10",children:s.jsx(GR,{config:Yke,label:"Playground Avatar"})})})}const Jke=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function Zke(){return s.jsx(Kt,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:Jke.map(t=>s.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),s.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),s.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const eCe="_avatarFrameMask_1pzs8_5",tCe="_avatarFrameOverlay_1pzs8_7",FI={avatarFrameMask:eCe,avatarFrameOverlay:tCe},sCe=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function nCe(){return s.jsx(Kt,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:s.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[s.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:sCe.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),s.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),s.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),s.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:FI.avatarFrameMask,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),s.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:FI.avatarFrameOverlay,children:s.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const rCe=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function iCe(){return s.jsx(Kt,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:s.jsx("div",{className:"flex w-full flex-col gap-4",children:rCe.map(t=>s.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,s.jsx("span",{children:"Leer"})]}),s.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),s.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function aCe(){return s.jsx(Kt,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:s.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),s.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),s.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const oe={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},oCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},lCe={maxWidth:1200,margin:"0 auto"},cCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function dCe(){return s.jsx("div",{style:oCe,children:s.jsxs("div",{style:lCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"HAR Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:cCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),s.jsxs("div",{style:{border:`1px dashed ${oe.line}`,borderRadius:12,padding:24,textAlign:"center",background:oe.tileAlt},children:["Drop .har file here or"," ",s.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),s.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const uCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},hCe={maxWidth:1200,margin:"0 auto"},pCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function mCe(){return s.jsx("div",{style:uCe,children:s.jsxs("div",{style:hCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"JSON/CSV Import Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:pCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),s.jsxs("div",{style:{display:"grid",gap:8},children:[s.jsxs("label",{children:["Upload JSON ",s.jsx("input",{type:"file",accept:".json"})]}),s.jsxs("label",{children:["Upload CSV ",s.jsx("input",{type:"file",accept:".csv"})]})]}),s.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const gCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},fCe={maxWidth:1200,margin:"0 auto"},vCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function xCe(){return s.jsx("div",{style:gCe,children:s.jsxs("div",{style:fCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Index Schema Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:vCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const yCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},bCe={maxWidth:1200,margin:"0 auto"},_Ce={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function wCe(){return s.jsx("div",{style:yCe,children:s.jsxs("div",{style:bCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Player Profile (Contained) Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:_Ce,children:[s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${oe.line}`}}),s.jsxs("div",{children:[s.jsx("h3",{style:{margin:"4px 0",color:oe.title},children:"NightRaven"}),s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const jCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},SCe={maxWidth:1200,margin:"0 auto"},NCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function kCe(){return s.jsx("div",{style:jCe,children:s.jsxs("div",{style:SCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Guild Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:NCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:oe.title},children:"Ravens"}),s.jsx("span",{children:"Avg Lvl 465"}),s.jsx("span",{children:"Fresh scans 82%"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[s.jsx("b",{style:{color:oe.title},children:"Arcana"}),s.jsx("span",{children:"Avg Lvl 458"}),s.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const CCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},TCe={maxWidth:1200,margin:"0 auto"},ICe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function ACe(){return s.jsx("div",{style:CCe,children:s.jsxs("div",{style:TCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Server Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:ICe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const ECe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},RCe={maxWidth:1200,margin:"0 auto"},PCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function LCe(){return s.jsx("div",{style:ECe,children:s.jsxs("div",{style:RCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Rankings Views Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:PCe,children:[s.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>s.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${oe.line}`,borderRadius:10},children:t},t))}),s.jsx("div",{style:{border:`1px solid ${oe.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[s.jsx("b",{style:{color:oe.title},children:t.name}),s.jsx("span",{children:t.delta}),s.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const DCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},MCe={maxWidth:1200,margin:"0 auto"},FCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function BCe(){return s.jsx("div",{style:DCe,children:s.jsxs("div",{style:MCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"KPI Dashboard Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:FCe,children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const $Ce={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},OCe={maxWidth:1200,margin:"0 auto"},VCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function UCe(){return s.jsx("div",{style:$Ce,children:s.jsxs("div",{style:OCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Progression Tracker Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:VCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),s.jsx("div",{style:{height:160,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const GCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},zCe={maxWidth:1200,margin:"0 auto"},HCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function WCe(){return s.jsx("div",{style:GCe,children:s.jsxs("div",{style:zCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Legendary & Pets Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsx("div",{style:HCe,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"Legendary Tracker"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Shadow Bow "}),s.jsx("li",{children:"Mythic Ring "})]})]}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"Pets"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Firewolf 4/5"}),s.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const KCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},qCe={maxWidth:1200,margin:"0 auto"},QCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function YCe(){return s.jsx("div",{style:KCe,children:s.jsxs("div",{style:qCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Community Scans Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:QCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>s.jsx("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const XCe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},JCe={maxWidth:1200,margin:"0 auto"},ZCe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function eTe(){return s.jsx("div",{style:XCe,children:s.jsxs("div",{style:JCe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Creator Hub Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:ZCe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:t}),s.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const tTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},sTe={maxWidth:1200,margin:"0 auto"},nTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function rTe(){return s.jsx("div",{style:tTe,children:s.jsxs("div",{style:sTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feedback Form Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:nTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Category"}),s.jsxs("select",{style:{background:"#152A42",color:oe.text,border:`1px solid ${oe.line}`,borderRadius:8,padding:"6px 8px"},children:[s.jsx("option",{children:"UI"}),s.jsx("option",{children:"Data"}),s.jsx("option",{children:"Bug"})]})]}),s.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[s.jsx("span",{children:"Message"}),s.jsx("textarea",{rows:4,style:{background:"#152A42",color:oe.text,border:`1px solid ${oe.line}`,borderRadius:8,padding:"6px 8px"}})]}),s.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${oe.line}`,borderRadius:10},children:"Send"})]})})]})})}const iTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},aTe={maxWidth:1200,margin:"0 auto"},oTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function lTe(){return s.jsx("div",{style:iTe,children:s.jsxs("div",{style:aTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feedback Admin Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:oTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),s.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("span",{children:t}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),s.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const cTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},dTe={maxWidth:1200,margin:"0 auto"},uTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function hTe(){return s.jsx("div",{style:cTe,children:s.jsxs("div",{style:dTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Tutorials Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:uTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),s.jsxs("ol",{children:[s.jsx("li",{children:"Step highlights"}),s.jsx("li",{children:"Progress bar"}),s.jsx("li",{children:"Badges"})]})]})})]})})}const pTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},mTe={maxWidth:1200,margin:"0 auto"},gTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function fTe(){return s.jsx("div",{style:pTe,children:s.jsxs("div",{style:mTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Wiki & FAQ Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:gTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),s.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${oe.line}`,borderRadius:10}}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"How to import HAR?"}),s.jsx("li",{children:"What data is stored?"})]})]})})]})})}const vTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},xTe={maxWidth:1200,margin:"0 auto"},yTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function bTe(){return s.jsx("div",{style:vTe,children:s.jsxs("div",{style:xTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Settings Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:yTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("label",{children:["Language",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"EN"}),s.jsx("option",{children:"DE"})]})]}),s.jsxs("label",{children:["Theme",s.jsxs("select",{style:{marginLeft:8},children:[s.jsx("option",{children:"Dark"}),s.jsx("option",{children:"Custom"})]})]}),s.jsxs("label",{children:["Notifications",s.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),s.jsxs("label",{children:["Privacy",s.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const _Te={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},wTe={maxWidth:1200,margin:"0 auto"},jTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function STe(){return s.jsx("div",{style:_Te,children:s.jsxs("div",{style:wTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"ToS & Privacy Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:jTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),s.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:s.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),s.jsxs("label",{style:{marginTop:8},children:[s.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const NTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},kTe={maxWidth:1200,margin:"0 auto"},CTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function TTe(){return s.jsx("div",{style:NTe,children:s.jsxs("div",{style:kTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Transparency Viewer Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:CTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),s.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const ITe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},ATe={maxWidth:1200,margin:"0 auto"},ETe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function RTe(){return s.jsx("div",{style:ITe,children:s.jsxs("div",{style:ATe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"PWA Update Flow Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:ETe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),s.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[s.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const PTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},LTe={maxWidth:1200,margin:"0 auto"},DTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function MTe(){return s.jsx("div",{style:PTe,children:s.jsxs("div",{style:LTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"PWA Install Prompt Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:DTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[s.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:20}}),s.jsxs("div",{children:[s.jsx("b",{style:{color:oe.title},children:"Install SFDataHub"}),s.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),s.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const FTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},BTe={maxWidth:1200,margin:"0 auto"},$Te={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function OTe(){return s.jsx("div",{style:FTe,children:s.jsxs("div",{style:BTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Connect Manual Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:$Te,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:[s.jsx("b",{style:{color:oe.title},children:"View source"}),s.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const VTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},UTe={maxWidth:1200,margin:"0 auto"},GTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function zTe(){return s.jsx("div",{style:VTe,children:s.jsxs("div",{style:UTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Connect Userscript Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:GTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),s.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[s.jsx("div",{children:"Install/Enable check"}),s.jsx("div",{children:"Events preview"})]})]})})]})})}const HTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},WTe={maxWidth:1200,margin:"0 auto"},KTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function qTe(){return s.jsx("div",{style:HTe,children:s.jsxs("div",{style:WTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Exports Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:KTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"CSV/Excel"}),s.jsx("div",{children:"Tabs, widths, locales"})]}),s.jsxs("div",{style:{background:oe.tileAlt,border:`1px solid ${oe.line}`,borderRadius:10,padding:10},children:[s.jsx("b",{style:{color:oe.title},children:"JSON API"}),s.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const QTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},YTe={maxWidth:1200,margin:"0 auto"},XTe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function JTe(){return s.jsx("div",{style:QTe,children:s.jsxs("div",{style:YTe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Deeplinks Demo Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:XTe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),s.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${oe.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const ZTe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},eIe={maxWidth:1200,margin:"0 auto"},tIe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function sIe(){return s.jsx("div",{style:ZTe,children:s.jsxs("div",{style:eIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Servers Editor Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:tIe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[s.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),s.jsxs("select",{children:[s.jsx("option",{children:"Active"}),s.jsx("option",{children:"Disabled"})]}),s.jsx("button",{children:"Add"})]})]})})]})})}const nIe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},rIe={maxWidth:1200,margin:"0 auto"},iIe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function aIe(){return s.jsx("div",{style:nIe,children:s.jsxs("div",{style:rIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Jobs & Queues Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:iIe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),s.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const oIe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},lIe={maxWidth:1200,margin:"0 auto"},cIe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function dIe(){return s.jsx("div",{style:oIe,children:s.jsxs("div",{style:lIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Feature Flags Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:cIe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[s.jsx("span",{children:"Beta: New Rankings"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox",defaultChecked:!0})}),s.jsx("span",{children:"Widgets v2"}),s.jsx("label",{children:s.jsx("input",{type:"checkbox"})})]})]})})]})})}const uIe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},hIe={maxWidth:1200,margin:"0 auto"},pIe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function mIe(){return s.jsx("div",{style:uIe,children:s.jsxs("div",{style:hIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Table Performance Lab Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:pIe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),s.jsx("div",{style:{height:160,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const gIe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},fIe={maxWidth:1200,margin:"0 auto"},vIe={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function xIe(){return s.jsx("div",{style:gIe,children:s.jsxs("div",{style:fIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:vIe,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),s.jsx("div",{style:{height:180,border:`1px dashed ${oe.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const yIe={minHeight:"100vh",background:oe.page,color:oe.text,padding:"24px 16px"},bIe={maxWidth:1200,margin:"0 auto"},_Ie={background:oe.tile,border:`1px solid ${oe.line}`,borderRadius:12,padding:12};function wIe(){return s.jsx("div",{style:yIe,children:s.jsxs("div",{style:bIe,children:[s.jsx("h1",{style:{color:oe.title,marginTop:0},children:"Accessibility Pass Page"}),s.jsx("div",{style:{display:"grid",gap:12},children:s.jsxs("div",{style:_Ie,children:[s.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),s.jsxs("ul",{style:{marginTop:8},children:[s.jsx("li",{children:"Focus ring visible"}),s.jsx("li",{children:"Skip links"}),s.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const jIe=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function SIe({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:n,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:o}){const{t:c}=Hs(),[u,h]=R.useState(null);R.useEffect(()=>{const P=jIe(r);if(!P){h(null);return}const L=()=>{const v=Date.now(),b=Math.max(0,Math.floor((P-v)/1e3));h(b)};L();const N=window.setInterval(L,1e3);return()=>window.clearInterval(N)},[r]);const p=u!==null&&u>0,g=!t||a||!e||p,y=R.useMemo(()=>{if(u===null||u<=0)return null;const P=Math.floor(u/60),L=u%60;return`${String(P).padStart(2,"0")}:${String(L).padStart(2,"0")}`},[u]),_=a?c("tools.sync.saving"):y?c("tools.sync.cooldownLabel",{time:y}):c("tools.sync.buttonSave"),w=R.useMemo(()=>c(e?"tools.sync.statusUnsynced":n?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,n,c]),k=R.useMemo(()=>{if(e)return null;if(n){const P=typeof n=="string"?new Date(n):n;return`${c("tools.sync.lastSyncLabel")}: ${P.toLocaleTimeString()}`}return c("tools.sync.noChanges")},[e,n,c]),E=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return s.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[s.jsx("button",{type:"button",disabled:g,onClick:i,className:E,children:_}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:w}),k&&s.jsx("p",{className:"text-sm text-slate-200",children:k}),o&&s.jsx("p",{className:"text-sm text-rose-400",children:o})]})]})})}const xf=3,MP="sfdatahub.tools.sets.v1",BI=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],su=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],NIe=300*1e3;async function kIe(t,e){const n=ss(Go(ft,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",n.path);const r={version:1,updatedAt:Ai(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await zo(n,r,{merge:!1})}const CIe=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(MP);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function TIe(){var $e,Xe;const{t}=Hs(),{user:e,status:n,loginWithDiscord:r}=ea(),i=n==="authenticated"&&!!e,a=R.useMemo(()=>CIe(),[]),o=R.useMemo(()=>{var be;return(be=a==null?void 0:a.sets)!=null&&be.length?a.sets.slice(0,xf):BI},[a]),c=R.useMemo(()=>{var Be,Ve,nt,ht;const be=a==null?void 0:a.activeSetId;return be&&o.some(Ue=>Ue.id===be)?be:(ht=(nt=(Be=o[0])==null?void 0:Be.id)!=null?nt:(Ve=BI[0])==null?void 0:Ve.id)!=null?ht:"set-main-dh"},[a,o]),u=R.useMemo(()=>{var Be,Ve;const be=a==null?void 0:a.activeToolId;return be&&su.some(nt=>nt.id===be)?be:(Ve=(Be=su[0])==null?void 0:Be.id)!=null?Ve:"gemSim"},[a]),[h,p]=R.useState(o),[g,y]=R.useState(c),[_,w]=R.useState(u),[k,E]=R.useState(null),[P,L]=R.useState(""),[N,v]=R.useState(""),[b,I]=R.useState(!1),[j,S]=R.useState(null),[C,M]=R.useState(null),[T,D]=R.useState(!1),[F,V]=R.useState(null),z=R.useRef(null),q=R.useRef(!0);R.useEffect(()=>{if(typeof window!="undefined")try{const be={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:_};window.localStorage.setItem(MP,JSON.stringify(be))}catch(be){console.warn("Failed to persist tools state",be)}},[h,g,_]),R.useEffect(()=>{if(!i){I(!1),q.current=!0;return}if(q.current){q.current=!1;return}I(!0)},[i,h,g,_]);const H=R.useMemo(()=>{var be;return(be=h.find(Be=>Be.id===g))!=null?be:h[0]},[g,h]),K=R.useMemo(()=>{var be;return(be=su.find(Be=>Be.id===_))!=null?be:su[0]},[_]),ne=($e=H==null?void 0:H.tools)==null?void 0:$e.gemSim,Y=(Xe=H==null?void 0:H.tools)==null?void 0:Xe.dungeonPauseOpenXP,G=h.length,X=G>=xf,te=()=>{if(X)return;const be=G+1,Be=t("tools.sets.defaultName","New Set"),Ve={id:`set-${Date.now()}`,name:`${Be} ${be}`,classLabel:"Class TBD",serverLabel:"Server TBD"};p(nt=>[...nt,Ve]),y(Ve.id)},se=()=>{r()},Z=()=>{if(!H){console.warn("No active set to export.");return}const be={version:1,type:"toolSet",set:H},Be=new Blob([JSON.stringify(be,null,2)],{type:"application/json"}),Ve=URL.createObjectURL(Be),nt=document.createElement("a"),ht=H.name.toLowerCase().replace(/\s+/g,"-");nt.href=Ve,nt.download=`sfdatahub-set-${ht}.json`,nt.click(),URL.revokeObjectURL(Ve)},ve=()=>{var be;(be=z.current)==null||be.click()},Se=be=>{var Ue,Ee;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Be=t("tools.sets.deleteConfirmTitle"),Ve=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Be}

${Ve}`))return;const nt=h.filter(He=>He.id!==be),ht=be===g?(Ee=(Ue=nt[0])==null?void 0:Ue.id)!=null?Ee:null:g;p(nt),ht&&y(ht)},J=be=>{const Be=h.find(Ve=>Ve.id===be);Be&&(E(be),L(Be.name),v(""))},ue=()=>{E(null),L(""),v("")},ie=()=>{if(!k)return;const be=P.trim();if(!be){v(t("tools.sets.renameErrorEmpty"));return}p(Be=>Be.map(Ve=>Ve.id===k?{...Ve,name:be}:Ve)),E(null),L(""),v("")},me=async be=>{var Ve,nt;const Be=(nt=(Ve=be.target)==null?void 0:Ve.files)==null?void 0:nt[0];if(Be)try{if(h.length>=xf){alert(t("tools.sets.importErrorMaxReached"));return}const ht=await Be.text(),Ue=JSON.parse(ht);if((Ue==null?void 0:Ue.version)!==1||(Ue==null?void 0:Ue.type)!=="toolSet"||typeof(Ue==null?void 0:Ue.set)!="object")throw new Error("invalid payload");const{set:Ee}=Ue;if(typeof(Ee==null?void 0:Ee.name)!="string"||typeof(Ee==null?void 0:Ee.classLabel)!="string"||typeof(Ee==null?void 0:Ee.serverLabel)!="string")throw new Error("invalid set");const He={...Ee,id:`imported-${Date.now()}`,name:Ee.name,classLabel:Ee.classLabel,serverLabel:Ee.serverLabel};p(St=>[...St,He]),y(He.id)}catch(ht){console.error("Failed to import set",ht),alert(t("tools.sets.importErrorInvalid"))}finally{be.target.value=""}},ce=be=>{g&&(p(Be=>Be.map(Ve=>{var ht;if(Ve.id!==g)return Ve;const nt={...(ht=Ve.tools)!=null?ht:{},gemSim:be};return{...Ve,tools:nt}})),I(!0))},he=be=>{g&&(p(Be=>Be.map(Ve=>{var ht;if(Ve.id!==g)return Ve;const nt={...(ht=Ve.tools)!=null?ht:{},dungeonPauseOpenXP:be};return{...Ve,tools:nt}})),I(!0))},Ne=`${G}/${xf}`,Te=t(K.labelKey,K.defaultLabel),xe=t(K.descriptionKey,K.defaultDescription),Ie=async()=>{if(!i)return;const be=e==null?void 0:e.id;if(!(!be||T||C!==null&&C>Date.now())&&b){D(!0),V(null);try{await kIe(be,{sets:h,activeSetId:g,activeToolId:_});const Ve=Date.now(),nt=Ve+NIe;I(!1),S(new Date(Ve)),M(nt)}catch(Ve){console.error("Failed to sync tools state",Ve),V(t("tools.sync.error"))}finally{D(!1)}}};return s.jsx(Kt,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),s.jsx("span",{className:"text-xs text-slate-400",children:Ne})]}),s.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(be=>{const Be=be.id===g;return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>y(be.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Be?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-slate-50",children:be.name}),s.jsx("span",{role:"button",tabIndex:0,onClick:Ve=>{Ve.stopPropagation(),J(be.id)},onKeyDown:Ve=>{(Ve.key==="Enter"||Ve.key===" ")&&(Ve.preventDefault(),Ve.stopPropagation(),J(be.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:s.jsx(m7,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"text-xs text-emerald-200/90",children:be.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:be.serverLabel}),Be&&s.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&s.jsx("button",{type:"button",onClick:Ve=>{Ve.stopPropagation(),Se(be.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},be.id)}),s.jsxs("button",{type:"button",onClick:te,disabled:X,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",X?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[s.jsx("span",{className:"text-lg",children:"+"}),s.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[s.jsx("button",{type:"button",onClick:Z,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),s.jsx("button",{type:"button",onClick:ve,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),s.jsx("input",{ref:z,type:"file",accept:"application/json",className:"hidden",onChange:me})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[s.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),s.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:su.map(be=>{const Be=be.id===_,Ve=t(be.labelKey,be.defaultLabel);return s.jsxs("button",{type:"button",onClick:()=>w(be.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Be?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[s.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),s.jsx("span",{children:Ve})]},be.id)})})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),s.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(be=>s.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),s.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:be})]},be))})]}),s.jsx(SIe,{isLoggedIn:i,hasUnsyncedChanges:b,lastSyncedAt:j,cooldownUntil:C,onSyncClick:Ie,isSaving:T,syncError:F})]}):s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),s.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),s.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(be=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),s.jsx("span",{children:be})]},be))})]}),s.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:s.jsx("button",{type:"button",onClick:se,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Te}),s.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(H==null?void 0:H.name)||"kein Set"]})]}),s.jsx("div",{className:"flex gap-2",children:su.map(be=>s.jsx("div",{className:["h-2 w-8 rounded-full transition",_===be.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},be.id))})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsx("div",{className:"text-sm text-slate-300",children:xe}),s.jsx("div",{className:"mt-4",children:_==="gemSim"?s.jsx(iP,{initialState:ne,onStateChange:ce}):_==="dungeonPauseOpenXP"?s.jsx(lP,{initialState:Y,onStateChange:he},g):s.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",s.jsx("br",{}),"(z. B. ",Te,")"]})})]}),s.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),s.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:H==null?void 0:H.name}),s.jsx("div",{className:"text-sm text-emerald-200/90",children:H==null?void 0:H.classLabel}),s.jsx("div",{className:"text-xs text-slate-400",children:H==null?void 0:H.serverLabel})]}),s.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",s.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:ue}),s.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),s.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),s.jsx("input",{value:P,onChange:be=>L(be.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),N&&s.jsx("p",{className:"mt-2 text-xs text-rose-400",children:N}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:ue,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),s.jsx("button",{type:"button",onClick:ie,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const Ub=50,IIe=3,AIe=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Gb=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function EIe(){var b,I;const[t]=fi(),e=(I=(b=t.get("q"))==null?void 0:b.trim())!=null?I:"",n=AIe(e),[r,i]=W.useState([]),[a,o]=W.useState([]),[c,u]=W.useState(null),[h,p]=W.useState(null),[g,y]=W.useState(!1),[_,w]=W.useState(!1),[k,E]=W.useState(!1),[P,L]=W.useState(null),N=async j=>{const S=In("Search:results");try{const C=Tn(hm(ft,"latest"),Pi("nameFold"),Dl(n),Ml(n+""),...j?[lG(j)]:[],sr(Ub)),M=await yn(S,{},()=>xn(C)),T=M.docs.length?M.docs[M.docs.length-1]:null,D=[],F=[];M.forEach(V=>{var ne,Y,G,X,te,se,Z,ve,Se,J,ue,ie,me,ce,he,Ne,Te,xe,Ie,$e,Xe,be,Be,Ve,nt,ht,Ue,Ee,He,St,Ct,ns;const z=V.data(),q=(ne=V.ref.parent)==null?void 0:ne.parent,H=(Y=q==null?void 0:q.parent)==null?void 0:Y.id,K=(G=q==null?void 0:q.id)!=null?G:V.id;H==="players"?D.push({id:K,name:(se=(te=z.name)!=null?te:(X=z.values)==null?void 0:X.Name)!=null?se:null,server:(Se=(ve=z.server)!=null?ve:(Z=z.values)==null?void 0:Z.Server)!=null?Se:null,className:(ie=(ue=z.className)!=null?ue:(J=z.values)==null?void 0:J.Class)!=null?ie:null,level:Gb((ce=z.level)!=null?ce:(me=z.values)==null?void 0:me.Level)}):H==="guilds"&&F.push({id:K,name:(Te=(Ne=z.name)!=null?Ne:(he=z.values)==null?void 0:he.Name)!=null?Te:null,server:($e=(Ie=z.server)!=null?Ie:(xe=z.values)==null?void 0:xe.Server)!=null?$e:null,memberCount:Gb((Ve=(be=z.memberCount)!=null?be:(Xe=z.values)==null?void 0:Xe["Guild Member Count"])!=null?Ve:(Be=z.values)==null?void 0:Be.GuildMemberCount),hofRank:Gb((ns=(St=(Ee=(ht=z.hofRank)!=null?ht:(nt=z.values)==null?void 0:nt["Hall of Fame Rank"])!=null?Ee:(Ue=z.values)==null?void 0:Ue.HoF)!=null?St:(He=z.values)==null?void 0:He.Rank)!=null?ns:(Ct=z.values)==null?void 0:Ct["Guild Rank"])})}),i(V=>[...V,...D]),o(V=>[...V,...F]),u(T),p(T),y(M.docs.length===Ub),w(M.docs.length===Ub)}finally{Ys(S)}};W.useEffect(()=>{if(n.length<IIe){L("Type at least 3 characters to search.");return}L(null),i([]),o([]),u(null),p(null),y(!1),w(!1),E(!0),N().catch(j=>L((j==null?void 0:j.message)||"Search failed")).finally(()=>E(!1))},[n]);const v=()=>{k||(E(!0),N(c||h).catch(j=>L((j==null?void 0:j.message)||"Search failed")).finally(()=>E(!1)))};return s.jsxs(Kt,{title:"Search",subtitle:e?`Results for ${e}`:"",children:[P&&s.jsx("p",{style:{color:"#ff9c9c",marginBottom:12},children:P}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[s.jsxs("section",{children:[s.jsx("h3",{children:"Players"}),r.map(j=>{var S,C,M;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.className)!=null?C:"?","  ",(M=j.server)!=null?M:"?","  ",j.level!=null?`Lvl ${j.level}`:"Lvl ?"]})]},j.id)})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Guilds"}),a.map(j=>{var S,C;return s.jsxs("div",{style:{padding:8,border:"1px solid #1f3248",borderRadius:8,marginBottom:8},children:[s.jsx("div",{style:{fontWeight:700},children:(S=j.name)!=null?S:j.id}),s.jsxs("div",{style:{opacity:.8},children:[(C=j.server)!=null?C:"?"," "," ",j.memberCount!=null?`${j.memberCount} members`:"Members ?"," "," ",j.hofRank!=null?`HoF #${j.hofRank}`:"HoF ?"]})]},j.id)})]})]}),(g||_)&&s.jsx("div",{style:{marginTop:16},children:s.jsx("button",{type:"button",onClick:v,disabled:k,style:{padding:"10px 14px"},children:k?"Loading":"Load more"})})]})}const RIe="_backdrop_19xh2_1",PIe="_panel_19xh2_19",LIe="_header_19xh2_43",DIe="_tabs_19xh2_63",MIe="_tabBtn_19xh2_75",FIe="_tabActive_19xh2_97",BIe="_closeBtn_19xh2_101",$Ie="_content_19xh2_123",Oa={backdrop:RIe,panel:PIe,header:LIe,tabs:DIe,tabBtn:MIe,tabActive:FIe,closeBtn:BIe,content:$Ie},pi=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const n=Number(e);return Number.isFinite(n)?n:0},$I=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),yf=(t,e)=>{if(!t||typeof t!="object")return;const n=$I(e);for(const r of Object.keys(t))if($I(r)===n)return t[r]},OIe=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let n=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/);return n?{group:"EU",serverKey:`EU${n[1]||n[2]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(n=e.match(/F(\d+)/),n?{group:"FUSION",serverKey:`F${n[1]}`}:{group:"ALL",serverKey:"all"})},VIe={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Intelligence",Mage:"Base Intelligence","Battle Mage":"Base Strength",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},Pl=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,FP=t=>{const e={str:pi(Pl(t,"Base Strength")),dex:pi(Pl(t,"Base Dexterity")),intl:pi(Pl(t,"Base Intelligence")),con:pi(Pl(t,"Base Constitution")),luck:pi(Pl(t,"Base Luck"))},n=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:n}},UIe=(t,e)=>{var F,V;const{playerId:n,name:r,className:i,level:a,server:o,guildIdentifier:c,guildName:u,timestamp:h,updatedAt:p,values:g={}}=t||{},y=pi(a),{group:_,serverKey:w}=OIe(o),k=FP(g),E=(F=VIe[String(i!=null?i:"")])!=null?F:"Base Intelligence",P=pi(Pl(g,E)),L=k.sum,N=k.con,v=y>0?L/y:0,b=pi(yf(g,"Attribute")),I=pi(yf(g,"Constitution")),j=b+I,S=pi(yf(g,"XP")),C=pi(yf(g,"XP Total")),M=pi(Pl(g,"Gem Mine")),T=pi(Pl(g,"Treasury")),D=e?e():null;return{playerId:String(n!=null?n:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:y,group:_,serverKey:w,guildId:c?String(c):"",guildName:u?String(u):"",sum:L,main:P,con:N,ratio:v,mainTotal:b,conTotal:I,sumTotal:j,xpProgress:S,xpTotal:C,mine:M,treasury:T,timestamp:pi(h),updatedAtFromLatest:(V=p!=null?p:D)!=null?V:null}},qi=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},GIe=t=>{var i,a,o,c,u,h,p,g,y,_,w,k,E,P,L,N,v,b,I,j;const e=t.lastScanRaw!=null?String(t.lastScanRaw).trim():"",n=String((i=t.timestampSec)!=null?i:"").trim(),r=(e||n).trim();return{playerId:String((a=t.playerId)!=null?a:""),server:String((o=t.server)!=null?o:""),name:String((c=t.name)!=null?c:""),class:String((p=(h=(u=t.derived)==null?void 0:u.class)!=null?h:t.className)!=null?p:""),guild:t.guildName?String(t.guildName):null,lastScan:r||null,level:qi((y=t.level)!=null?y:(g=t.derived)==null?void 0:g.level),con:qi((_=t.derived)==null?void 0:_.con),main:qi((w=t.derived)==null?void 0:w.main),mainTotal:qi((k=t.derived)==null?void 0:k.mainTotal),conTotal:qi((E=t.derived)==null?void 0:E.conTotal),sumTotal:qi((P=t.derived)==null?void 0:P.sumTotal),xpProgress:qi((L=t.derived)==null?void 0:L.xpProgress),xpTotal:qi((N=t.derived)==null?void 0:N.xpTotal),mine:qi((v=t.derived)==null?void 0:v.mine),ratio:qi((b=t.derived)==null?void 0:b.ratio),sum:qi((I=t.derived)==null?void 0:I.sum),treasury:qi((j=t.derived)==null?void 0:j.treasury)}},Ei=t=>String(t!=null?t:"").trim(),BP=t=>Ei(t).toUpperCase(),is=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),zf=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),OI=t=>{const e=zf(t);if(!e)return[];const n=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(n))},VI=t=>{const e=new Set;for(const n of t)for(let r=1;r<=n.length;r++)e.add(n.slice(0,r));return Array.from(e)},UI=t=>{var n;const e=String((n=t==null?void 0:t.code)!=null?n:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},$P=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},zIe=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null},HIe=1,WIe=200,KIe=t=>t==null?"non_numeric":t<HIe||t>WIe?"out_of_range":"ok",GI=t=>{const e=$P(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},qIe=t=>{const e=is(t);for(const[n,r]of Object.entries(OP))if(is(r)===e)return Number(n);return null},zI=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const n=Number(e);if(Number.isInteger(n)&&!Number.isNaN(n)){const o=n;return{classId:o,className:(a=OP[o])!=null?a:String(o)}}return{classId:qIe(e),className:e}},Is={PLAYERS:{IDENTIFIER:is("Identifier"),PID:is("ID"),GUILD_IDENTIFIER:is("Guild Identifier"),SERVER:is("Server"),NAME:is("Name"),TIMESTAMP:is("Timestamp"),LEVEL:is("Level"),CLASS:is("Class"),GUILD:is("Guild")},GUILDS:{GUILD_IDENTIFIER:is("Guild Identifier"),SERVER:is("Server"),NAME:is("Name"),MEMBER_COUNT:is("Guild Member Count"),TIMESTAMP:is("Timestamp"),HOF:is("Hall of Fame Rank"),HOF_ALT:is("HoF"),RANK:is("Rank"),GUILD_RANK:is("Guild Rank")}},OP={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},VP=[Is.PLAYERS.LEVEL,is("Level"),is("Lvl"),is("Stufe")],UP=[Is.PLAYERS.CLASS,is("Class"),is("ClassID"),is("Class ID"),is("CharClass"),is("Klasse")],yj=t=>{const e=new Map;return t.forEach(n=>{const r=is(n);e.has(r)||e.set(r,n)}),e},fu=t=>{const e=new Set;for(const n of t)Object.keys(n).forEach(r=>e.add(r));return Array.from(e)},mi=(t,e,n)=>{const r=e.get(n);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:Xi(t,n)},e_=(t,e,n)=>n.map(r=>mi(t,e,r)).find(r=>r!=null&&String(r)!==""),Vc=t=>String(t!=null?t:"").replace(/\u00a0/g," ").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase().replace(/[\s-]+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_").replace(/^_+|_+$/g,""),QIe=t=>{const e=new Map;return t.forEach(n=>{var a;const r=Vc(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},YIe=["guild_member_count","guild_membercount","guildmembercount","member_count","membercount","guild_members"],bj=t=>{const e=QIe(t),n=[];for(const r of YIe){const i=e.get(r);if(i)for(const a of i)n.includes(a)||n.push(a)}return n},GP=(t,e)=>{const n=e!=null?e:bj(t);if(!n.length)return null;const r=Vc("Guild Member Count"),i=n.find(a=>Vc(a)===r);return i||(n.length===1,n[0])},XIe=new Set([is("Strength"),is("Dexterity"),is("Intelligence"),is("Constitution"),is("Luck"),is("Attribute")]),JIe=["equipment"],ZIe=t=>XIe.has(t)||JIe.some(e=>t.includes(e)),Xi=(t,e)=>{for(const n of Object.keys(t))if(is(n)===e)return t[n]},zP=/^[a-z]{1,4}\d+$/i,HP=/^([a-z]{1,4}\d+)[_.-]?(net|eu)$/i,e3e=/^([a-z]{1,4}\d+)\.sfgame\.(net|eu)$/i,t3e=t=>{const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.toLowerCase();if(zP.test(n))return n.toUpperCase();const r=n.match(HP);if(r)return r[1].toUpperCase();const i=n.match(e3e);return i?i[1].toUpperCase():e},WP=t=>{var i;const e=String(t!=null?t:"").trim();if(!e)return null;const n=e.match(/^(.+)_p(\d+)$/);if(!n)return null;const r=(i=n[1])==null?void 0:i.trim();return r?t3e(r):null},KP=(t,e,n,r,i)=>{var h;const a=(p,g,y,_)=>{const w=zIe(g),k=KIe(w);return{header:p,headerIndex:p?n.indexOf(p):-1,rawValue:g,parsedValue:w,validationResult:k,isValid:k==="ok",fallbackUsed:_,source:y}};if(r){const p=a(r,t[r],"primary",!1);if(p.isValid)return p}for(const p of i){if(p===r)continue;const g=a(p,t[p],"alias",!0);if(g.isValid)return g}const o=(h=e.get(Is.GUILDS.MEMBER_COUNT))!=null?h:null,c=o?t[o]:Xi(t,Is.GUILDS.MEMBER_COUNT);return a(o,c,o?"lookup":"none",!0)};function Uv(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,p=new Date(o,a,i,c,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function HI(t){const e=new Date(t*1e3),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-r);const i=new Date(Date.UTC(n.getUTCFullYear(),0,1)),a=Math.ceil(((+n-+i)/864e5+1)/7),o=n.getUTCFullYear(),c=a.toString().padStart(2,"0");return`${o}-W${c}`}function WI(t){const e=new Date(t*1e3),n=new Date(e),r=(n.getDay()+6)%7;n.setHours(0,0,0,0),n.setDate(n.getDate()-r);const i=Math.floor(n.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function KI(t){const e=new Date(t*1e3),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${n}-${r}`}function qI(t){const e=new Date(t*1e3),n=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(n.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function qP(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}const s3e="sf_debug_guild_csv_parse",n3e=()=>typeof window=="undefined"||!(window!=null&&window.localStorage)?!1:window.localStorage.getItem(s3e)==="1",bf=(t,e=260)=>t.length<=e?t:`${t.slice(0,Math.max(0,e-3))}...`,r3e=t=>{const e={},n=[",",";","	","|"];for(const r of n){let i=0;for(let a=0;a<t.length;a++)t[a]===r&&i++;e[r==="	"?"\\t":r]=i}return e},i3e=(t,e,n)=>{var F,V,z,q,H,K,ne,Y,G,X,te,se;if(!n3e())return;const i=(F=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`)[0])!=null?F:"",a=i.replace(/^\uFEFF/,""),o=i.startsWith("\uFEFF"),c=i.includes(""),u=qP(a),h=r3e(a),p=e.headers.map(Vc),g={};e.headers.forEach((Z,ve)=>{var ue;const Se=Vc(Z);if(!Se)return;const J=(ue=g[Se])!=null?ue:[];J.push(ve),g[Se]=J});const y=e.headers.find(Z=>Vc(Z)===Vc("Guild Identifier")),_=y?e.headers.indexOf(y):-1,w=bj(e.headers),k=GP(e.headers,w),E=k?e.headers.indexOf(k):-1,P=yj(e.headers),L=e.rows[0],N=L?mi(L,P,Is.GUILDS.GUILD_IDENTIFIER):null,v=L?KP(L,P,e.headers,k,w):null,b=(V=v==null?void 0:v.rawValue)!=null?V:null,I=(z=v==null?void 0:v.parsedValue)!=null?z:null,j=(H=(q=e.meta)==null?void 0:q.headerCount)!=null?H:e.headers.length,S=(Y=(ne=(K=e.meta)==null?void 0:K.rowTokenCounts)==null?void 0:ne[0])!=null?Y:null,C=S!=null&&j>0?S<j:null,M=(X=(G=e.meta)==null?void 0:G.paddedRowCount)!=null?X:0,T=(se=(te=e.meta)==null?void 0:te.truncatedRowCount)!=null?se:0,D=[];i||D.push("missing header line"),e.headers.length||D.push("no headers parsed"),e.rows.length===0&&D.push("no data rows after parse"),y||D.push("missing guild identifier header"),k||D.push("missing guild member count header"),e.rows.length>0&&n.rows.length===0&&D.push(`all rows filtered (missingIdentifier=${n.stats.missingIdentifier}, badTimestamp=${n.stats.badTimestamp}, missingServer=${n.stats.missingServer})`),!D.length&&n.rows.length===0&&D.push("no parsed guild rows"),console.groupCollapsed("[GuildCsvParse] Debug"),console.log("headerLine",{length:i.length,hasBom:o,hasNbsp:c,delimiter:u,delimiterCounts:h,sample:bf(i)}),console.log("headers",{raw:e.headers,normalized:p,headerIndexMap:g}),console.log("requiredHeaders",{guildIdentifier:y,guildIdentifierIndex:_,memberCount:k,memberCountIndex:E,memberCountCandidates:w}),console.log("rowAlignment",{headerCount:j,sampleRowTokenCount:S,sampleRowPadded:C,paddedRowCount:M,truncatedRowCount:T}),console.log("rows",{parsedRows:e.rows.length,guildRows:n.rows.length,stats:n.stats}),console.log("sample",{guildIdentifier:N==null?null:bf(String(N)),memberCountRaw:b==null?null:bf(String(b)),memberCount:I}),v&&console.log("memberCountResolution",{primaryHeader:k,primaryIndex:E,resolvedHeader:v.header,resolvedIndex:v.headerIndex,rawValueAtIndex:v.rawValue==null?null:bf(String(v.rawValue)),parsedMemberCount:v.parsedValue,validationResult:v.validationResult,fallbackUsed:v.fallbackUsed,source:v.source}),D.length&&console.warn("[GuildCsvParse] Issues",D),console.groupEnd()};function Gv(t){var y;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],meta:{headerCount:0,rowTokenCounts:[],paddedRowCount:0,truncatedRowCount:0}};const r=qP((y=n[0])!=null?y:""),i=_=>{const w=[];let k="",E=!1;for(let P=0;P<_.length;P++){const L=_[P];L==='"'?E&&_[P+1]==='"'?(k+='"',P++):E=!E:L===r&&!E?(w.push(k),k=""):k+=L}return w.push(k),w},o=(n[0]?i(n[0]).map(Ei):[]).map((_,w)=>_||`col${w}`),c=o.length,u=[],h=[];let p=0,g=0;for(let _=1;_<n.length;_++){if(!n[_])continue;const w=i(n[_]);if(w.every(P=>Ei(P)===""))continue;const k=w.length;k<c?(w.push(...Array(c-k).fill("")),p++):k>c&&g++,h.push(k);const E={};for(let P=0;P<c;P++)E[o[P]]=w[P]!=null?Ei(w[P]):"";u.push(E)}return{headers:o,rows:u,meta:{headerCount:c,rowTokenCounts:h,paddedRowCount:p,truncatedRowCount:g}}}function a3e(t){const e={};for(let n=0;n<t.length;n++){const r=is(t[n]);VP.includes(r)&&e.levelIndex==null&&(e.levelIndex=n),UP.includes(r)&&e.classIndex==null&&(e.classIndex=n)}if(e.levelIndex==null){const n=t.findIndex(r=>r.trim()==="Level");n>=0&&(e.levelIndex=n)}if(e.classIndex==null){const n=t.findIndex(r=>r.trim()==="Class");n>=0&&(e.classIndex=n)}return e}function QP(t,e){var c;const n=e&&e.length?e:fu(t),r=yj(n),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],o=a3e(n);for(const u of t){const h=(c=mi(u,r,Is.PLAYERS.PID))!=null?c:mi(u,r,Is.PLAYERS.IDENTIFIER),p=Ei(h);if(!p){i.missingIdentifier++;continue}const g=Uv(mi(u,r,Is.PLAYERS.TIMESTAMP));if(g==null){i.badTimestamp++;continue}const y=mi(u,r,Is.PLAYERS.IDENTIFIER),_=Ei(y),w=WP(_),k=mi(u,r,Is.PLAYERS.SERVER),E=k&&Ei(k)!==""?BP(k):void 0,P=w!=null?w:_?void 0:E;if(!P){i.missingServer++;continue}const L=mi(u,r,Is.PLAYERS.NAME),N=L!=null&&Ei(L)!==""?String(L):null,v=mi(u,r,Is.PLAYERS.GUILD_IDENTIFIER),b=v!=null&&Ei(v)!==""?String(v):null,I=mi(u,r,Is.PLAYERS.GUILD),j=I!=null&&Ei(I)!==""?String(I):null,S=o.levelIndex!=null?GI(u[n[o.levelIndex]]):GI(e_(u,r,VP)),C=o.classIndex!=null?zI(u[n[o.classIndex]]):zI(e_(u,r,UP));a.push({playerId:p,server:P,name:N,timestampSec:g,guildIdentifier:b,guildName:j,level:S,classId:C.classId,className:C.className,raw:u})}return{rows:a,stats:i,headers:n}}function YP(t,e){const n=e&&e.length?e:fu(t),r=yj(n),i=bj(n),a=GP(n,i),o={missingIdentifier:0,badTimestamp:0,missingServer:0},c=[];for(const u of t){const h=mi(u,r,Is.GUILDS.GUILD_IDENTIFIER),p=Ei(h);if(!p){o.missingIdentifier++;continue}const g=Uv(mi(u,r,Is.GUILDS.TIMESTAMP));if(g==null){o.badTimestamp++;continue}const y=mi(u,r,Is.GUILDS.SERVER),_=y&&Ei(y)!==""?BP(y):void 0;if(!_){o.missingServer++;continue}const w=mi(u,r,Is.GUILDS.NAME),k=w!=null&&Ei(w)!==""?String(w):null,E=KP(u,r,n,a,i),P=E.isValid?E.parsedValue:null,L=$P(e_(u,r,[Is.GUILDS.HOF,Is.GUILDS.HOF_ALT,Is.GUILDS.RANK,Is.GUILDS.GUILD_RANK]));c.push({guildIdentifier:p,server:_,name:k,timestampSec:g,memberCount:P,hofRank:L,raw:u})}return{rows:c,stats:o,headers:n}}function o3e(t){const e=Gv(t);return QP(e.rows,e.headers).rows}function l3e(t){const e=Gv(t),n=YP(e.rows,e.headers);return i3e(t,e,n),n.rows}const c3e="stats_cache_player_derived",d3e="stats_cache_guild_derived",XP=40,QI=120,zb=500,Hb=500,dn=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},JP=t=>`snapshot_${t}_player_derived`,_j=t=>`snapshot_${t}_guild_derived`,Hf=t=>{var o;const e=String(t!=null?t:"").replace(/\u00a0/g," ").trim();if(!e)return{};let n=e.replace(/^[a-z]+:\/\//i,"");if(n=(o=n.split(/[/?#]/)[0])!=null?o:"",n=n.replace(/\s+/g," ").trim(),!n)return{};let i=n.replace(/\s+/g,"").toLowerCase().replace(/:\d+$/,"");if(i=i.replace(/^\.+|\.+$/g,""),!i)return{};if(zP.test(i))return{code:i.toUpperCase()};const a=i.match(HP);if(a)return{code:a[1].toUpperCase()};if(i.includes(".")){if(!i.includes("sfgame")){const c=i.match(/^([a-z]{1,4}\d+)\.?(net|eu)$/i);if(c)return{host:`${c[1]}.sfgame.${c[2].toLowerCase()}`}}return{host:i}}return{}},Wf=t=>{const e=Hf(t);return e.host?e.host:e.code?e.code.toLowerCase():null},u3e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};async function Kf(t){var i;const e=new Map,n=new Set,r=new Set;for(const a of t){const o=Hf(a);o.host&&n.add(o.host),o.code&&r.add(o.code)}if(n.size===0&&r.size===0)return e;try{const a=Go(ft,"servers");for(const h of r){const p=ss(ft,"servers",h),g=await bn(null,p,()=>sn(p),{label:"ImportCsv:serversHostMap"});if(g.exists()){const y=g.data(),_=(i=Hf(y==null?void 0:y.host).host)!=null?i:null;_&&e.set(_,g.id),e.set(h.toLowerCase(),g.id),e.set(h.toUpperCase(),g.id)}}const o=u3e(Array.from(n),10);for(const h of o){const p=Tn(a,gi("host","in",h));(await yn(null,{path:a.path},()=>xn(p),{label:"ImportCsv:serversHostMap"})).forEach(y=>{var k;const _=y.data(),w=(k=Hf(_==null?void 0:_.host).host)!=null?k:null;w&&e.set(w,y.id),e.set(y.id.toLowerCase(),y.id),e.set(y.id.toUpperCase(),y.id)})}const c=Array.from(n).filter(h=>!e.has(h));c.length&&console.warn("[ImportCsv] Server hosts not mapped",{hosts:c});const u=Array.from(r).filter(h=>!e.has(h.toLowerCase()));u.length&&console.warn("[ImportCsv] Server codes not mapped",{codes:u})}catch(a){console.warn("[ImportCsv] Failed to load server host map",{error:a})}return e}async function qf(t,e,n,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:n});for(let i=0;i<t.length;i+=e){const a=fG(ft),o=t.slice(i,i+e);for(const c of o)c.apply(a);r==null||r({phase:"write",current:Math.min(i+o.length,t.length),total:t.length,pass:n}),await PG(()=>a.commit(),{label:`ImportCsv:${n}`,path:`batch:${n}`}),o.forEach(c=>{var u,h;Ku({path:c.path,op:(u=c.op)!=null?u:"setDoc",docCount:1,label:(h=c.label)!=null?h:`ImportCsv:${n}`})}),await new Promise(c=>setTimeout(c,12))}r==null||r({phase:"done",current:1,total:1,pass:n})}async function YI(t,e,n){var p,g,y;const r=[];if(!t.length)return r;let i=0,a=0,o=0,c=0;const u=_=>{e==null||e({phase:_,current:_==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:o,error:c,kind:n})};u("prepare");const h=ft.bulkWriter;if(typeof h=="function"){const _=h.call(ft,{throttling:!0}),w=()=>{i++,u("write")};for(const{ref:k,data:E,key:P}of t)_.create(k,E).then(()=>{a++,Ku({path:k.path,op:"setDoc",docCount:1,label:"ImportCsv:scansBulk"}),r.push({key:P,status:"created"}),w()}).catch(L=>{var v,b;const N=String((v=L==null?void 0:L.code)!=null?v:"").toLowerCase();N.includes("already")&&N.includes("exist")?(o++,r.push({key:P,status:"duplicate"})):(c++,r.push({key:P,status:"error",message:String((b=L==null?void 0:L.message)!=null?b:L)})),w()});try{await _.close()}catch(k){console.warn("[ImportCsv] bulkWriter close with errors",{error:k})}return u("done"),r}for(const{ref:_,data:w,key:k}of t){try{await xw(_,()=>zo(_,w),{label:"ImportCsv:scansFallback"}),a++,r.push({key:k,status:"created"})}catch(E){const P=String((p=E==null?void 0:E.code)!=null?p:"").toLowerCase();P.includes("permission")||P.includes("already")?(o++,r.push({key:k,status:"duplicate",message:String((g=E==null?void 0:E.message)!=null?g:E)})):(c++,r.push({key:k,status:"error",message:String((y=E==null?void 0:E.message)!=null?y:E)}))}i++,u("write")}return u("done"),r}async function h3e(t,e){if(!t.length)return;const n=t.length,r=ft.bulkWriter;if(typeof r=="function"){const a=r.call(ft,{throttling:!0});e==null||e({phase:"prepare",current:0,total:n,pass:"latest"});for(const{ref:o,data:c}of t)a.set(o,c,{merge:!0});e==null||e({phase:"write",current:n,total:n,pass:"latest"}),await a.close(),t.forEach(({ref:o})=>Ku({path:o.path,op:"setDoc",docCount:1,label:"ImportCsv:latestBulk"})),e==null||e({phase:"done",current:1,total:1,pass:"latest"});return}const i=t.map(({ref:a,data:o})=>({path:a.path,op:"setDoc",label:"ImportCsv:latest",apply:c=>c.set(a,o,{merge:!0})}));await qf(i,XP,"latest",e)}async function p3e(t,e){if(!e.length)return;const n=String(t||"all").trim()||"all",r=ss(ft,`${c3e}/${JP(n)}`);await pE(()=>sE(ft,async i=>{var k,E,P,L,N,v;const a=await bn(null,r,()=>i.get(r),{label:"ImportCsv:derivedSnapshot"}),o=a.exists()?(k=a.data())==null?void 0:k.players:null,c=new Map;if(Array.isArray(o))for(const b of o){if(!b||typeof b!="object")continue;const I=String((E=b.playerId)!=null?E:"");I&&c.set(I,b)}const u=()=>{var j;let b=null,I=Number.POSITIVE_INFINITY;for(const[S,C]of c.entries()){const M=(j=dn(C.sum))!=null?j:0;M<I&&(I=M,b=S)}return{minId:b,minSum:I}},h=new Set;for(const b of e){const I=String((P=b.playerId)!=null?P:"");if(!I)continue;if(h.add(I),c.has(I)){c.set(I,b);continue}if(c.size<zb){c.set(I,b);continue}const j=(L=dn(b.sum))!=null?L:0,{minId:S,minSum:C}=u();S&&j>C&&(c.delete(S),c.set(I,b))}const p=Array.from(c.values());p.sort((b,I)=>{var S,C,M,T;const j=((S=dn(I.sum))!=null?S:0)-((C=dn(b.sum))!=null?C:0);return j!==0?j:String((M=b.playerId)!=null?M:"").localeCompare(String((T=I.playerId)!=null?T:""))}),p.length>zb&&(p.length=zb);const g=a.exists()?(N=a.data())==null?void 0:N.meta:null,y=Number((v=g==null?void 0:g.pendingSincePublish)!=null?v:0),_=(Number.isFinite(y)?y:0)+h.size,w={...g&&typeof g=="object"?g:{},pendingSincePublish:_};i.set(r,{server:n,updatedAt:Ai(),players:p,meta:w},{merge:!0})}),{label:"ImportCsv:derivedSnapshot",path:r.path})}async function ZP(t,e){if(!e.length)return;const n=String(t||"all").trim()||"all",r=ss(ft,`${d3e}/${_j(n)}`);await pE(()=>sE(ft,async i=>{var E,P,L,N,v;const a=await bn(null,r,()=>i.get(r),{label:"ImportCsv:guildDerivedSnapshot"}),o=a.exists()?(E=a.data())==null?void 0:E.guilds:null,c=new Map;if(Array.isArray(o))for(const b of o){if(!b||typeof b!="object")continue;const I=String((P=b.guildId)!=null?P:"");I&&c.set(I,b)}const u=b=>{var I,j,S;return(S=dn((j=(I=b.sumAvg)!=null?I:b.avgSumBaseTotal)!=null?j:b.sum))!=null?S:0},h=()=>{let b=null,I=Number.POSITIVE_INFINITY;for(const[j,S]of c.entries()){const C=u(S);C<I&&(I=C,b=j)}return{minId:b,minSum:I}},p=new Set;for(const b of e){const I=String((L=b.guildId)!=null?L:"");if(!I)continue;if(p.add(I),c.has(I)){c.set(I,b);continue}if(c.size<Hb){c.set(I,b);continue}const j=u(b),{minId:S,minSum:C}=h();S&&j>C&&(c.delete(S),c.set(I,b))}const g=Array.from(c.values()).map(b=>{var I;return b.sumAvg==null?{...b,sumAvg:dn((I=b.avgSumBaseTotal)!=null?I:b.sum)}:b});g.sort((b,I)=>{var S,C;const j=u(I)-u(b);return j!==0?j:String((S=b.guildId)!=null?S:"").localeCompare(String((C=I.guildId)!=null?C:""))}),g.length>Hb&&(g.length=Hb);const y=a.exists()?(N=a.data())==null?void 0:N.meta:null,_=Number((v=y==null?void 0:y.pendingSincePublish)!=null?v:0),w=(Number.isFinite(_)?_:0)+p.size,k={...y&&typeof y=="object"?y:{},pendingSincePublish:w};i.set(r,{server:n,updatedAt:Ai(),guilds:g,meta:k},{merge:!0})}),{label:"ImportCsv:guildDerivedSnapshot",path:r.path})}async function m3e(t,e){var a,o;if(!t.size)return;const n=new Map;for(const[c,u]of t.entries()){const h=Wf(u.server),p=h&&(a=e.get(h))!=null?a:null;if(!p){h&&console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:c,server:u.server});continue}const g={guildId:String(c),server:p,name:String((o=u.name)!=null?o:c),memberCount:dn(u.memberCount),hofRank:dn(u.hofRank),lastScan:u.lastScan?String(u.lastScan):null,sum:null,sumAvg:dn(u.avgSumBaseTotal),count:dn(u.count),avgLevel:dn(u.avgLevel),avgTreasury:dn(u.avgTreasury),avgMine:dn(u.avgMine),avgBaseMain:dn(u.avgBaseMain),avgConBase:dn(u.avgConBase),avgSumBaseTotal:dn(u.avgSumBaseTotal),avgAttrTotal:dn(u.avgAttrTotal),avgConTotal:dn(u.avgConTotal),avgTotalStats:dn(u.avgTotalStats)};n.has(p)||n.set(p,[]),n.get(p).push(g)}const r=Array.from(n.keys());r.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:r.length,servers:r});const i=[];for(const[c,u]of n.entries())try{await ZP(c,u),i.push(_j(c))}catch(h){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:c,error:h})}r.length&&console.log("[ImportCsv] Guild derived snapshot flush done",{count:i.length,docs:i})}function XI(t,e){const n={};for(const r of e){const i=is(r);if(ZIe(i)){let a=null,o;for(const c of t){const u=c.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,o=u)}n[r]=o!=null?o:""}else{let a="";for(let o=t.length-1;o>=0;o--){const c=t[o].row[r];if(c!=null&&String(c)!==""){a=c;break}}n[r]=a}}return n}async function JI(t,e){var h;const n=t.path,r=e==null?void 0:e.get(n);if(r)return r.prevSec;const i=await bn(null,t,()=>sn(t),{label:"ImportCsv:latestPrev"});if(!i.exists())return e==null||e.set(n,{prevSec:0,exists:!1}),0;const a=i.data();let o=null;if(((h=a==null?void 0:a.values)==null?void 0:h.Timestamp)!=null){const p=Uv(a.values.Timestamp);p!=null&&(o=p)}if(o==null&&(a==null?void 0:a.timestampRaw)!=null){const p=Uv(a.timestampRaw);p!=null&&(o=p)}o==null&&typeof(a==null?void 0:a.ts)=="number"&&(o=a.ts);const c=a==null?void 0:a.timestamp;if(o==null&&typeof c=="number"&&(o=c>9999999999?Math.floor(c/1e3):c),o==null&&typeof c=="string"){const p=Date.parse(c);Number.isFinite(p)&&(o=Math.floor(p/1e3))}const u=o!=null?o:0;return e==null||e.set(n,{prevSec:u,exists:!0}),u}async function ZI(t,e){var g,y,_,w,k,E,P,L,N,v,b,I;const n=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},o=[],c=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(j=>{var S;return(S=e.onProgress)==null?void 0:S.call(e,{...j,kind:e.kind})}):void 0,h=new Map;if(e.kind==="players"){const j=[],S=[],C=[],M=new Map;let T=[],D=[];if(e.rows&&Array.isArray(e.rows))T=e.rows,D=fu(T);else if(e.raw&&typeof e.raw=="string"){const X=Gv(e.raw);T=X.rows,D=X.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:F,stats:V,headers:z}=QP(T,D);a.skippedMissingIdentifier+=V.missingIdentifier,a.skippedBadTs+=V.badTimestamp,a.skippedMissingServer+=V.missingServer;const q=z.length?z:fu(T),H=new Map;for(const X of F){const te=`${X.playerId}__${X.server}__${X.timestampSec}`;j.push({key:te,ref:ss(ft,`players/${X.playerId}/scans/${X.timestampSec}`),data:{playerId:X.playerId,server:X.server,timestamp:X.timestampSec,timestampRaw:Xi(X.raw,Is.PLAYERS.TIMESTAMP),name:X.name,values:X.raw,createdAt:Ai()}}),H.has(X.playerId)||H.set(X.playerId,[]),H.get(X.playerId).push({row:X.raw,ts:X.timestampSec,parsed:X})}const K=await YI(j,u,"players");o.push(...K),a.writtenScanPlayers=K.filter(X=>X.status==="created").length;let ne=e.serverHostMap?new Map(e.serverHostMap):new Map;if(!e.serverHostMap)ne=await Kf(F.map(X=>X.server));else if(F.length>0&&F.some(te=>{const se=Wf(te.server);return se?!ne.has(se):!1})){const te=await Kf(F.map(se=>se.server));for(const[se,Z]of te.entries())ne.has(se)||ne.set(se,Z)}!ne.size&&F.length>0&&console.warn("[ImportCsv] Server host map empty; derived snapshots will be skipped.");for(const[X,te]of H){te.sort((Xe,be)=>Xe.ts-be.ts);const se=te[te.length-1],Z=se.parsed,ve=Z.server,Se=Z.name,J=(g=Z.level)!=null?g:null,ue=(y=Z.className)!=null?y:null,ie=(_=Z.guildName)!=null?_:null,me=Z.guildIdentifier,ce=Se!=null?Se:"",he=OI(ce),Ne=VI(he),Te=ss(ft,`players/${X}/latest/latest`),xe=await JI(Te,h);if(se.ts>xe){const Xe=Ai();S.push({ref:Te,data:{playerId:X,server:ve,timestamp:se.ts,timestampRaw:Xi(se.row,Is.PLAYERS.TIMESTAMP),name:Se,values:se.row,updatedAt:Xe,nameFold:zf(ce),nameTokens:he,nameNgrams:Ne,level:J,className:ue,guildName:ie,guildNameFold:ie?zf(ie):null}});const be={playerId:X,name:Se,className:ue,level:J,server:ve,guildIdentifier:me||void 0,guildName:ie||void 0,values:se.row,timestamp:se.ts,updatedAt:Xe},Be=UIe(be,Ai),Ve=Wf(ve),nt=ne.size>0&&Ve&&(w=ne.get(Ve))!=null?w:null;if(!nt&&ne.size>0&&console.warn("[ImportCsv] Derived snapshot skipped (server host not mapped)",{playerId:X,server:ve}),nt){const ht=Xi(se.row,Is.PLAYERS.TIMESTAMP),Ue=GIe({playerId:X,server:nt,name:Se,className:ue,guildName:ie,level:J,lastScanRaw:ht,timestampSec:se.ts,derived:Be});M.has(nt)||M.set(nt,[]),M.get(nt).push(Ue)}a.writtenLatestPlayers++}const Ie=new Map,$e=new Map;for(const Xe of te){const be=HI(Xe.ts),Be=KI(Xe.ts);Ie.has(be)||Ie.set(be,[]),$e.has(Be)||$e.set(Be,[]),Ie.get(be).push(Xe),$e.get(Be).push(Xe)}for(const[Xe,be]of Ie){be.sort((Ue,Ee)=>Ue.ts-Ee.ts);const Be=XI(be,q),Ve=WI(be[be.length-1].ts),nt=be[be.length-1],ht=ss(ft,`players/${X}/history_weekly/${Xe}`);C.push({path:ht.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:Ue=>{Ue.set(ht,{playerId:X,weekId:Xe,periodStartSec:Ve.start,periodEndSec:Ve.end,lastTs:nt.ts,lastTimestampRaw:Xi(nt.row,Is.PLAYERS.TIMESTAMP),server:nt.parsed.server,name:nt.parsed.name,values:Be,updatedAt:Ai()},{merge:!0})}}),a.writtenWeeklyPlayers++}for(const[Xe,be]of $e){be.sort((Ue,Ee)=>Ue.ts-Ee.ts);const Be=XI(be,q),Ve=qI(be[be.length-1].ts),nt=be[be.length-1],ht=ss(ft,`players/${X}/history_monthly/${Xe}`);C.push({path:ht.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:Ue=>{Ue.set(ht,{playerId:X,monthId:Xe,periodStartSec:Ve.start,periodEndSec:Ve.end,lastTs:nt.ts,lastTimestampRaw:Xi(nt.row,Is.PLAYERS.TIMESTAMP),server:nt.parsed.server,name:nt.parsed.name,values:Be,updatedAt:Ai()},{merge:!0})}}),a.writtenMonthlyPlayers++}}await h3e(S,u);const Y=Array.from(M.keys());Y.length&&console.log("[ImportCsv] Derived snapshot flush pending",{count:Y.length,servers:Y});const G=[];for(const[X,te]of M.entries())try{await p3e(X,te),G.push(JP(X))}catch(se){console.warn("[ImportCsv] Derived snapshot upsert failed",{serverKey:X,error:se})}Y.length&&console.log("[ImportCsv] Derived snapshot flush done",{count:G.length,docs:G}),await qf(C,QI,"history",u)}if(e.kind==="guilds"){const j=[],S=[],C=[],M=!e.skipGuildDerived,T=new Map;let D=[],F=[];if(e.rows&&Array.isArray(e.rows))D=e.rows,F=fu(D);else if(e.raw&&typeof e.raw=="string"){const Y=Gv(e.raw);D=Y.rows,F=Y.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:V,stats:z,headers:q}=YP(D,F);a.skippedMissingGuildIdentifier+=z.missingIdentifier,a.skippedBadTsGuild+=z.badTimestamp,a.skippedMissingServer+=z.missingServer,q.length||fu(D);const H=new Map;for(const Y of V){const G=`${Y.guildIdentifier}__${Y.server}__${Y.timestampSec}`;j.push({key:G,ref:ss(ft,`guilds/${Y.guildIdentifier}/scans/${Y.timestampSec}`),data:{guildIdentifier:Y.guildIdentifier,server:Y.server,timestamp:Y.timestampSec,timestampRaw:Xi(Y.raw,Is.GUILDS.TIMESTAMP),name:Y.name,values:Y.raw,createdAt:Ai()}}),H.has(Y.guildIdentifier)||H.set(Y.guildIdentifier,[]),H.get(Y.guildIdentifier).push({row:Y.raw,ts:Y.timestampSec,parsed:Y})}const K=await YI(j,u,"guilds");c.push(...K),a.writtenScanGuilds=K.filter(Y=>Y.status==="created").length;const ne=M?(k=e.serverHostMap)!=null?k:await Kf(V.map(Y=>Y.server)):new Map;M&&!ne.size&&V.length>0&&console.warn("[ImportCsv] Server host map empty; guild derived snapshots will be skipped.");for(const[Y,G]of H){G.sort((he,Ne)=>he.ts-Ne.ts);const X=G[G.length-1],te=X.parsed,se=(E=te.name)!=null?E:"",Z=OI(se),ve=VI(Z),Se=(P=te.memberCount)!=null?P:null,J=(L=te.hofRank)!=null?L:null,ue=ss(ft,`guilds/${Y}/latest/latest`),ie=await JI(ue,h);if(X.ts>ie&&(S.push({path:ue.path,op:"setDoc",label:"ImportCsv:guildLatest",apply:he=>{he.set(ue,{guildIdentifier:Y,server:te.server,timestamp:X.ts,timestampRaw:Xi(X.row,Is.GUILDS.TIMESTAMP),name:te.name,values:X.row,updatedAt:Ai(),nameFold:zf(se),nameTokens:Z,nameNgrams:ve,memberCount:Se,hofRank:J},{merge:!0})}}),a.writtenLatestGuilds++,M)){const he=Wf(te.server),Ne=ne.size>0&&he&&(N=ne.get(he))!=null?N:null;if(!Ne&&ne.size>0&&console.warn("[ImportCsv] Guild derived snapshot skipped (server host not mapped)",{guildId:Y,server:te.server}),Ne){const Te=Xi(X.row,Is.GUILDS.TIMESTAMP),Ie=((Te!=null?String(Te).trim():"")||String((v=X.ts)!=null?v:"")).trim(),$e=FP((b=X.row)!=null?b:{}),Xe={guildId:String(Y),server:Ne,name:String((I=te.name)!=null?I:Y),memberCount:dn(Se),hofRank:dn(J),lastScan:Ie||null,sum:dn($e.sum),sumAvg:dn($e.sum)};T.has(Ne)||T.set(Ne,[]),T.get(Ne).push(Xe)}}const me=new Map,ce=new Map;for(const he of G){const Ne=HI(he.ts),Te=KI(he.ts);me.has(Ne)||me.set(Ne,[]),ce.has(Te)||ce.set(Te,[]),me.get(Ne).push(he),ce.get(Te).push(he)}for(const[he,Ne]of me){Ne.sort(($e,Xe)=>$e.ts-Xe.ts);const Te=WI(Ne[Ne.length-1].ts),xe=Ne[Ne.length-1],Ie=ss(ft,`guilds/${Y}/history_weekly/${he}`);C.push({path:Ie.path,op:"setDoc",label:"ImportCsv:historyWeekly",apply:$e=>{$e.set(Ie,{guildIdentifier:Y,weekId:he,periodStartSec:Te.start,periodEndSec:Te.end,lastTs:xe.ts,lastTimestampRaw:Xi(xe.row,Is.GUILDS.TIMESTAMP),server:xe.parsed.server,name:xe.parsed.name,values:xe.row,updatedAt:Ai()},{merge:!0})}}),a.writtenWeeklyGuilds++}for(const[he,Ne]of ce){Ne.sort(($e,Xe)=>$e.ts-Xe.ts);const Te=qI(Ne[Ne.length-1].ts),xe=Ne[Ne.length-1],Ie=ss(ft,`guilds/${Y}/history_monthly/${he}`);C.push({path:Ie.path,op:"setDoc",label:"ImportCsv:historyMonthly",apply:$e=>{$e.set(Ie,{guildIdentifier:Y,monthId:he,periodStartSec:Te.start,periodEndSec:Te.end,lastTs:xe.ts,lastTimestampRaw:Xi(xe.row,Is.GUILDS.TIMESTAMP),server:xe.parsed.server,name:xe.parsed.name,values:xe.row,updatedAt:Ai()},{merge:!0})}}),a.writtenMonthlyGuilds++}}try{await qf(S,XP,"latest",u)}catch(Y){if(UI(Y))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:Y});else throw Y}try{await qf(C,QI,"history",u)}catch(Y){if(UI(Y))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:Y});else throw Y}if(M){const Y=Array.from(T.keys());Y.length&&console.log("[ImportCsv] Guild derived snapshot flush pending",{count:Y.length,servers:Y});const G=[];for(const[X,te]of T.entries())try{await ZP(X,te),G.push(_j(X))}catch(se){console.warn("[ImportCsv] Guild derived snapshot upsert failed",{serverKey:X,error:se})}Y.length&&console.log("[ImportCsv] Guild derived snapshot flush done",{count:G.length,docs:G})}}const p=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:p-n,playerResults:o,guildResults:c}}const Tt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),g3e=t=>String(t!=null?t:"").trim(),t_=t=>g3e(t).toUpperCase(),s_=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function fn(t,e){for(const n of Object.keys(t))if(Tt(n)===e)return t[n]}function Va(t,e){for(const n of e){const r=fn(t,n);if(r!=null&&String(r)!=="")return r}}function So(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function Yc(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(n){const i=Number(n[1]),a=Number(n[2])-1,o=Number(n[3]),c=Number(n[4]),u=Number(n[5]),h=n[6]?Number(n[6]):0,p=new Date(o,a,i,c,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Mn={GUILD_IDENTIFIER:Tt("Guild Identifier"),SERVER:Tt("Server"),NAME:Tt("Name"),TIMESTAMP:Tt("Timestamp"),LEVEL:Tt("Level"),CLASS:Tt("Class"),GUILD:Tt("Guild"),GUILD_ROLE:[Tt("Role"),Tt("Guild Role")],TREASURY:[Tt("Treasury"),Tt("Fortress Treasury"),Tt("Treasury Level"),Tt("Festungsschatzkammer")],MINE:[Tt("Mine"),Tt("Gem Mine"),Tt("Mine Level"),Tt("Festungsmine")],BASE_MAIN:[Tt("Base"),Tt("Base Attribute"),Tt("BaseMain"),Tt("Basis Attribut")],CON_BASE:[Tt("Con Base"),Tt("Constitution Base"),Tt("Base Constitution"),Tt("Basis Konstitution"),Tt("conbase")],ATTR_TOT:[Tt("Attribute"),Tt("Attr Total"),Tt("Attribut"),Tt("Attribut Gesamt")],CON_TOT:[Tt("Constitution"),Tt("Constitution Total"),Tt("Konstitution"),Tt("Konstitution Gesamt")],LAST_ACTIVE:[Tt("Last Active"),Tt("LastActivity"),Tt("Letzte Aktivitt")],GUILD_JOINED:[Tt("Guild Joined"),Tt("Joined Guild"),Tt("Gildenbeitritt")]},hi={GUILD_IDENTIFIER:Tt("Guild Identifier"),SERVER:Tt("Server"),NAME:Tt("Name"),TIMESTAMP:Tt("Timestamp"),MEMBER_COUNT:Tt("Guild Member Count"),HOF:Tt("Hall of Fame Rank"),HOF_ALT:Tt("Hall of Fame"),RANK:Tt("Rank"),GUILD_RANK:Tt("Guild Rank")};function e3(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function f3e(t){let e=5381;for(let n=0;n<t.length;n++)e=e*33^t.charCodeAt(n);return(e>>>0).toString(36)}function v3e(t){var n;const e=new Map;for(const r of t){const i=String((n=fn(r,hi.GUILD_IDENTIFIER))!=null?n:"").trim(),a=fn(r,hi.SERVER),o=fn(r,hi.NAME);if(!i||!a||!o)continue;const c=`${t_(a)}__${s_(String(o))}`;e.set(c,i)}return e}function x3e(t){var N,v;const e=fn(t,Mn.TIMESTAMP),n=Yc(e),r=Va(t,Mn.LAST_ACTIVE),i=Yc(r),a=Va(t,Mn.GUILD_JOINED),o=Yc(a),c=So(fn(t,Mn.LEVEL)),u=(()=>{const b=fn(t,Mn.CLASS);return b!=null&&String(b).trim()!==""?String(b):null})(),h=(()=>{const b=Va(t,Mn.GUILD_ROLE);return b!=null&&String(b).trim()!==""?String(b):null})(),p=So(Va(t,Mn.TREASURY)),g=So(Va(t,Mn.MINE)),y=So(Va(t,Mn.BASE_MAIN)),_=So(Va(t,Mn.CON_BASE)),w=So(Va(t,Mn.ATTR_TOT)),k=So(Va(t,Mn.CON_TOT)),E=y!=null&&_!=null?y+_:null,P=w!=null&&k!=null?w+k:null,L=(()=>{const b=fn(t,Mn.NAME);return b!=null&&String(b).trim()!==""?String(b):null})();return{id:String((v=(N=t==null?void 0:t.ID)!=null?N:t==null?void 0:t.Identifier)!=null?v:""),name:L,class:u,role:h,level:c,treasury:p,mine:g,baseMain:y,conBase:_,sumBaseTotal:E,attrTotal:w,conTotal:k,totalStats:P,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:n!=null?n*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:o!=null?o*1e3:null}}function jo(t,e){const n=t.map(r=>r[e]).filter(r=>typeof r=="number");return n.length?n.reduce((r,i)=>r+i,0)/n.length:null}const y3e=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const n=String(e).toLowerCase();return n==="permission-denied"||n==="already-exists"||n==="failed-precondition"};async function b3e(t){var o,c,u;const e=ss(ft,`guilds/${t}/latest/latest`),n=await bn(null,e,()=>sn(e),{label:"ImportGuildSnapshots:latest"});if(!n.exists())return{sec:null,raw:null};const r=n.data()||{},i=(u=(c=r.timestampRaw)!=null?c:(o=r.values)==null?void 0:o.Timestamp)!=null?u:null;let a=null;return typeof r.timestamp=="number"?a=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(a=Yc(i)),{sec:a,raw:i}}async function _3e(t){const e=ss(ft,`guilds/${t}/snapshots/members_summary`),n=await bn(null,e,()=>sn(e),{label:"ImportGuildSnapshots:prevSnapshot"});if(!n.exists())return 0;const r=n.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=Yc(r.updatedAt);if(i!=null)return i}return 0}async function w3e(t,e){var h,p,g,y,_,w,k,E,P,L,N;const n=v3e(e||[]),r=new Map,i=new Map,a=new Map;for(const v of e||[]){const b=String((h=fn(v,hi.GUILD_IDENTIFIER))!=null?h:"").trim();if(!b)continue;const I=Yc(fn(v,hi.TIMESTAMP));if(I==null)continue;a.set(`${b}__${I}`,v);const j=i.get(b);(!j||I>j.tsSec)&&i.set(b,{row:v,tsSec:I})}const o=new Set;for(const v of e||[]){const b=String((p=fn(v,hi.GUILD_IDENTIFIER))!=null?p:"").trim();b&&o.add(b)}for(const v of t||[]){const b=fn(v,Mn.SERVER);let I=String((g=fn(v,Mn.GUILD_IDENTIFIER))!=null?g:"").trim();if(!I){const j=(y=fn(v,Mn.GUILD))!=null?y:v.Guild;if(j&&b){const S=`${t_(b)}__${s_(String(j))}`,C=n.get(S);C&&(I=C)}}I&&o.add(I)}let c=0,u=null;for(const v of o){const{sec:b,raw:I}=await b3e(v);if(b==null)continue;const j=await _3e(v);if(b<=j)continue;const S=new Map;for(const te of t||[]){const se=fn(te,Mn.SERVER);let Z=String((_=fn(te,Mn.GUILD_IDENTIFIER))!=null?_:"").trim();if(!Z){const J=(w=fn(te,Mn.GUILD))!=null?w:te.Guild;if(J&&se){const ue=`${t_(se)}__${s_(String(J))}`,ie=n.get(ue);ie&&(Z=ie)}}if(Z!==v)continue;const ve=Yc(fn(te,Mn.TIMESTAMP));if(ve==null||ve!==b)continue;const Se=String((E=(k=te==null?void 0:te.ID)!=null?k:te==null?void 0:te.Identifier)!=null?E:"").trim();Se&&(S.has(Se)||S.set(Se,te))}const C=Array.from(S.values()),M=[];for(const te of C)M.push(x3e(te));M.sort((te,se)=>{var Se,J;const Z=e3(te.role),ve=e3(se.role);return Z!==ve?Z-ve:((Se=te.name)!=null?Se:"").toLowerCase().localeCompare(((J=se.name)!=null?J:"").toLowerCase())});const T=jo(M,"level"),D=jo(M,"treasury"),F=jo(M,"mine"),V=jo(M,"baseMain"),z=jo(M,"conBase"),q=jo(M,"sumBaseTotal"),H=jo(M,"attrTotal"),K=jo(M,"conTotal"),ne=jo(M,"totalStats"),Y=JSON.stringify({gid:v,tsSec:b,members:M.map(te=>{var se,Z,ve,Se,J,ue,ie,me,ce,he,Ne,Te,xe;return{id:te.id,name:(se=te.name)!=null?se:"",class:(Z=te.class)!=null?Z:"",role:(ve=te.role)!=null?ve:"",level:(Se=te.level)!=null?Se:null,treasury:(J=te.treasury)!=null?J:null,mine:(ue=te.mine)!=null?ue:null,baseMain:(ie=te.baseMain)!=null?ie:null,conBase:(me=te.conBase)!=null?me:null,sumBaseTotal:(ce=te.sumBaseTotal)!=null?ce:null,attrTotal:(he=te.attrTotal)!=null?he:null,conTotal:(Ne=te.conTotal)!=null?Ne:null,totalStats:(Te=te.totalStats)!=null?Te:null,guildJoinedMs:(xe=te.guildJoinedMs)!=null?xe:null}})}),G=f3e(Y),X=ss(ft,`guilds/${v}/snapshots/members_summary`);try{await xw(X,()=>zo(X,{guildId:v,count:M.length,updatedAt:I!=null?I:String(b),updatedAtMs:b*1e3,hash:G,avgLevel:T,avgTreasury:D,avgMine:F,avgBaseMain:V,avgConBase:z,avgSumBaseTotal:q,avgAttrTotal:H,avgConTotal:K,avgTotalStats:ne,members:M,updatedAtServer:Ai()},{merge:!0}),{label:"ImportGuildSnapshots:summary"});const te=(N=(L=a.get(`${v}__${b}`))!=null?L:(P=i.get(v))==null?void 0:P.row)!=null?N:null,se=te?fn(te,hi.SERVER):null,Z=te?fn(te,hi.NAME):null,ve=te?fn(te,hi.MEMBER_COUNT):null,Se=te?Va(te,[hi.HOF,hi.HOF_ALT,hi.RANK,hi.GUILD_RANK]):null,J=te?fn(te,hi.TIMESTAMP):I,ue=J!=null?String(J).trim():I!=null?I:String(b);r.set(v,{guildId:v,server:se!=null&&String(se).trim()!==""?String(se).trim():null,name:Z!=null&&String(Z).trim()!==""?String(Z).trim():null,memberCount:So(ve),hofRank:So(Se),lastScan:ue||null,timestampSec:b,count:M.length,avgLevel:T,avgTreasury:D,avgMine:F,avgBaseMain:V,avgConBase:z,avgSumBaseTotal:q,avgAttrTotal:H,avgConTotal:K,avgTotalStats:ne}),c++}catch(te){if(y3e(te)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:v,error:te});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:v,error:te}),u=u||te}}if(u)throw u;return{guildsProcessed:o.size,snapshotsWritten:c,aggregatesByGuildId:r}}function j3e(t){const e=new Date(t),n=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${n}-${r}`}async function S3e(t,e,n,r){var u,h,p;const i=ss(ft,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await sn(i);if(!a.exists())return await zo(i,n,{merge:!1}),{first:n,firstTsMs:(u=n.updatedAtMs)!=null?u:n.timestamp?n.timestamp*1e3:r};const o=a.data(),c=(h=o.updatedAtMs)!=null?h:o.timestamp?o.timestamp*1e3:r;return r<c?(await zo(i,n,{merge:!1}),{first:n,firstTsMs:(p=n.updatedAtMs)!=null?p:n.timestamp?n.timestamp*1e3:r}):{first:o,firstTsMs:c}}async function N3e(t,e,n){const r=ss(ft,`guilds/${t}/history_monthly/${e}`);await zo(r,n,{merge:!0})}function k3e(t){var L,N,v,b,I,j,S,C,M,T,D,F,V;const{guildId:e,monthKey:n,server:r,first:i,firstTsMs:a,latest:o,latestTsMs:c}=t,u=a!=null?Math.floor((c-a)/864e5):null,h=u!=null&&u<=40,p={available:h};h||(p.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:n,label:new Date(`${n}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(c).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(c/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:p};if(!h||!i)return g;const y=new Map;for(const z of i.members||[])z.playerId&&y.set(z.playerId,z);const _=[],w=[],k=[],E=[],P=[];for(const z of o.members||[]){if(!z.playerId)continue;const q=y.get(z.playerId)||null,H=(L=z.sumBaseTotal)!=null?L:null,K=(N=q==null?void 0:q.sumBaseTotal)!=null?N:null,ne=H!=null&&K!=null?H-K:0,Y=(v=z.totalStats)!=null?v:null,G=(b=q==null?void 0:q.totalStats)!=null?b:null,X=Y!=null&&G!=null?Y-G:0;_.push({playerId:z.playerId,name:(I=z.name)!=null?I:null,class:(j=z.class)!=null?j:null,levelLatest:(S=z.level)!=null?S:null,baseLatest:H,baseDelta:ne}),w.push({playerId:z.playerId,name:(C=z.name)!=null?C:null,base:H,stamDelta:null,shoDelta:null}),k.push({playerId:z.playerId,name:(M=z.name)!=null?M:null,stats:H,delta:ne}),E.push({playerId:z.playerId,name:(T=z.name)!=null?T:null,total:Y,delta:X}),P.push({playerId:z.playerId,name:(D=z.name)!=null?D:null,class:(F=z.class)!=null?F:null,stats:(V=z.baseMain)!=null?V:null,delta:(q==null?void 0:q.baseMain)!=null&&z.baseMain!=null?z.baseMain-q.baseMain:0})}return _.sort((z,q)=>{var H,K;return((H=q.baseDelta)!=null?H:-1/0)-((K=z.baseDelta)!=null?K:-1/0)}),k.sort((z,q)=>{var H,K;return((H=q.stats)!=null?H:-1/0)-((K=z.stats)!=null?K:-1/0)}),E.sort((z,q)=>{var H,K;return((H=q.total)!=null?H:-1/0)-((K=z.total)!=null?K:-1/0)}),w.sort((z,q)=>{var H,K;return((H=q.base)!=null?H:-1/0)-((K=z.base)!=null?K:-1/0)}),P.sort((z,q)=>{var H,K;return((H=q.stats)!=null?H:-1/0)-((K=z.stats)!=null?K:-1/0)}),{...g,mostBaseGained:_.slice(0,50),sumBaseStats:w.slice(0,50),highestBaseStats:k.slice(0,50),highestTotalStats:E.slice(0,50),mainAndCon:P.slice(0,50)}}const Po=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),Bl=(t,e)=>{for(const n of Object.keys(t))if(Po(n)===e)return t[n]},C3e=t=>String(t!=null?t:"").trim().toLowerCase(),t3=(t,e)=>{for(const n of t){const r=Bl(n,Po("Server")),i=C3e(r);i&&e.add(i)}},zv=t=>String(t!=null?t:"").trim(),T3e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=Number(e);return Number.isFinite(n)?n:null},I3e=(t,e)=>{var a,o;const n=new Map,r=new Map;for(const c of t){const u=zv(Bl(c,Po("Guild Identifier")));u&&n.set(u,((a=n.get(u))!=null?a:0)+1)}for(const c of e){const u=zv(Bl(c,Po("Guild Identifier")));if(!u)continue;const h=T3e(Bl(c,Po("Guild Member Count")));h==null||h<=0||r.set(u,h)}const i=new Set;for(const[c,u]of r.entries())((o=n.get(c))!=null?o:0)===u&&i.add(c);return{uploadableGuildIds:i,playerCountByGuildId:n,guildMemberCountByGuildId:r}};async function eL(t,e){var E,P;bx("ImportSelection");const n=new Set;t3(t.playersRows,n),t3(t.guildsRows,n);const r=n.size>0?await Kf(Array.from(n)):new Map,{uploadableGuildIds:i}=I3e(t.playersRows,t.guildsRows),a=t.guildsRows.filter(L=>{const N=zv(Bl(L,Po("Guild Identifier")));return N?i.has(N):!1}),o=t.playersRows.filter(L=>{const N=zv(Bl(L,Po("Guild Identifier")));return N?i.has(N):!1}),{playersRows:c}=t,u=a,h=[];let p=[],g=[],y=!0;const _=e!=null&&e.onProgress?(L,N)=>{var v;return(v=e.onProgress)==null?void 0:v.call(e,{...L,kind:N})}:void 0;if(u.length>0)try{const L=await ZI(null,{kind:"guilds",rows:u,onProgress:_?N=>_(N,"guilds"):void 0,serverHostMap:r,skipGuildDerived:!0});h.push(L),Array.isArray(L.guildResults)&&(g=L.guildResults)}catch(L){console.error("[ImportSelectionToDb] guild import error",L),y=!1}try{const L=await ZI(null,{kind:"players",rows:c,onProgress:_?N=>_(N,"players"):void 0,serverHostMap:r});h.push(L),Array.isArray(L.playerResults)&&(p=L.playerResults)}catch(L){console.error("[ImportSelectionToDb] player import error",L),y=!1}let w=null;if(u.length>0&&o.length>0)try{w=(await w3e(o,u)).aggregatesByGuildId}catch(L){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",L),y=!1}if(w&&w.size>0)try{await m3e(w,r)}catch(L){console.warn("[ImportSelectionToDb] guild derived snapshot flush skipped",L),y=!1}const k=new Set;for(const L of u){const N=Bl(L,Po("Guild Identifier"));N&&k.add(String(N))}for(const L of o){const N=Bl(L,Po("Guild Identifier"));N&&k.add(String(N))}for(const L of k){const N=In("ImportCsv:guildLatest"),v=ss(ft,`guilds/${L}/snapshots/members_summary`);let b;try{b=await bn(N,v,()=>sn(v))}finally{Ys(N)}if(!b.exists())continue;const I=b.data(),j=Number((E=I.updatedAtMs)!=null?E:I.timestamp?I.timestamp*1e3:Date.now()),S=j3e(j);let C=null,M=null;try{const D=await S3e(L,S,I,j);C=D.first,M=D.firstTsMs}catch(D){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:L,monthKey:S,error:D})}const T=k3e({guildId:L,monthKey:S,server:(P=I.server)!=null?P:null,first:C,firstTsMs:M,latest:I,latestTsMs:j});try{await N3e(L,S,T)}catch(D){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:L,monthKey:S,error:D})}}return _x("ImportSelection"),wx("ImportSelection"),{ok:y,players:p,guilds:g,reports:h}}const Wb=t=>String(t!=null?t:"").trim(),Ur=t=>String(t!=null?t:"").trim().replace(/:+$/,"").toLowerCase().replace(/[\s_\u00a0]+/g,""),A3e=t=>String(t!=null?t:"").trim().replace(/\s+/g," ").replace(/:+$/,"").toLowerCase();function E3e(t){const e=[",",";","	","|"];let n=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(n=i,r=a)}return n}function n_(t){var u;const n=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!n.length)return{headers:[],rows:[],delimiter:","};const r=E3e((u=n[0])!=null?u:""),i=h=>{const p=[];let g="",y=!1;for(let _=0;_<h.length;_++){const w=h[_];w==='"'?y&&h[_+1]==='"'?(g+='"',_++):y=!y:w===r&&!y?(p.push(g),g=""):g+=w}return p.push(g),p},o=(n[0]?i(n[0]).map(Wb):[]).map((h,p)=>h||`col${p}`),c=[];for(let h=1;h<n.length;h++){if(!n[h])continue;const p=i(n[h]);if(p.every(y=>Wb(y)===""))continue;const g={};for(let y=0;y<o.length;y++)g[o[y]]=p[y]!=null?Wb(p[y]):"";c.push(g)}return{headers:o,rows:c,delimiter:r}}const Bn={PLAYERS:{IDENTIFIER:Ur("Identifier"),PID:Ur("ID"),GUILD_IDENTIFIER:Ur("Guild Identifier"),TIMESTAMP:Ur("Timestamp"),NAME:Ur("Name"),SERVER:Ur("Server"),OWN:Ur("Own")},GUILDS:{GUILD_IDENTIFIER:Ur("Guild Identifier"),GUILD_MEMBER_COUNT:Ur("Guild Member Count"),NAME:Ur("Name"),TIMESTAMP:Ur("Timestamp"),SERVER:Ur("Server")}},tL=(t,e)=>{const n=new Set(t.map(Ur));return e.every(r=>n.has(r))},ba=(t,e)=>{for(const n of Object.keys(t))if(Ur(n)===e)return t[n]},R3e=t=>{const e=new Map;return t.forEach(n=>{var a;const r=A3e(n);if(!r)return;const i=(a=e.get(r))!=null?a:[];i.push(n),e.set(r,i)}),e},P3e=t=>{const e=R3e(t),n=["guild member count","guild membercount","member count","guild members"];for(const r of n){const i=e.get(r);if(i&&i.length===1)return i[0]}return null},L3e=t=>{if(t==null)return null;const e=String(t).trim();if(!e)return null;const n=e.replace(/[\s,\.]/g,""),r=Number(n);return Number.isFinite(r)?r:null};function D3e(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function s3(t){const e=t.map(Ur),n=a=>e.includes(a);let r=0,i=0;return n(Bn.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),n(Bn.PLAYERS.IDENTIFIER)&&(r+=2),n(Bn.PLAYERS.TIMESTAMP)&&(r+=1),n(Bn.GUILDS.GUILD_IDENTIFIER)&&(i+=2),n(Bn.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),n(Bn.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||n(Bn.PLAYERS.IDENTIFIER)?"players":"guilds"}function r_(t,e){const n=D3e(t);if(n!=="unknown"){const i=s3(e);return i!=="unknown"&&i!==n?{kind:n,via:"filename",warn:`Per Dateiname als "${n}" klassifiziert, Header deuten auf "${i}".`}:{kind:n,via:"filename"}}const r=s3(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function sL(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const n=Date.parse(e);return Number.isFinite(n)?Math.floor(n/1e3):null}function M3e(t,e){var r;const n=[];if(!tL(e,[Bn.PLAYERS.GUILD_IDENTIFIER]))return n;for(const i of t){const a=ba(i,Bn.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const o=ba(i,Bn.PLAYERS.IDENTIFIER),c=o!=null?String(o).trim():"",u=WP(c),h=ba(i,Bn.PLAYERS.SERVER),p=h&&String(h).trim()!==""?String(h).trim().toUpperCase():void 0,g=u!=null?u:c?void 0:p;n.push({guildIdentifier:String(a),id:ba(i,Bn.PLAYERS.IDENTIFIER)||void 0,name:ba(i,Bn.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(ba(i,Bn.PLAYERS.OWN)).toLowerCase()),server:g,tsSec:(r=sL(ba(i,Bn.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return n}function F3e(t,e){const n=[];if(!tL(e,[Bn.GUILDS.GUILD_IDENTIFIER]))return n;const r=P3e(e);for(const i of t){const a=ba(i,Bn.GUILDS.GUILD_IDENTIFIER),o=r?i[r]:ba(i,Bn.GUILDS.GUILD_MEMBER_COUNT),c=L3e(o);if(!a||c==null)continue;const u=sL(ba(i,Bn.GUILDS.TIMESTAMP));n.push({guildIdentifier:String(a),name:ba(i,Bn.GUILDS.NAME)||void 0,memberCount:c,tsSec:u!=null?u:void 0})}return n}function nL(t){var h,p,g,y,_,w,k,E,P,L,N,v,b,I;let e=[],n=[];for(const j of t){const S=n_(j.text),{kind:C}=r_(j.name,S.headers);C==="players"?e=e.concat(o3e(j.text)):C==="guilds"&&(n=n.concat(l3e(j.text)))}const r=[],i=new Map,a=new Map;for(const j of e){const S={playerId:j.playerId,name:(h=j.name)!=null?h:"",server:j.server,guildId:(p=j.guildIdentifier)!=null?p:void 0,level:(g=j.level)!=null?g:void 0,className:(y=j.className)!=null?y:void 0,scanTimestampSec:j.timestampSec,values:j.raw};r.push(S);const C=String((_=j.guildIdentifier)!=null?_:"").trim();C&&(i.has(C)||i.set(C,[]),i.get(C).push(S),a.set(C,((w=a.get(C))!=null?w:0)+1))}const o=[],c=new Map;for(const j of n){const S=String((k=j.guildIdentifier)!=null?k:"").trim();if(!S)continue;const C=Number((E=j.memberCount)!=null?E:NaN);!Number.isFinite(C)||C<=0||c.set(S,C)}const u=new Set;for(const[j,S]of c.entries())((P=a.get(j))!=null?P:0)===S&&u.add(j);for(const j of n){const S=String((L=j.guildIdentifier)!=null?L:"").trim();if(!u.has(S))continue;const C=(N=i.get(S))!=null?N:[];o.push({guildId:S,name:(v=j.name)!=null?v:S,server:j.server,memberCount:(b=j.memberCount)!=null?b:C.length,scanTimestampSec:j.timestampSec,values:j.raw,members:C.map(M=>({playerId:M.playerId,name:M.name,level:M.level,className:M.className}))}),i.delete(S)}return{filename:(I=t[0])==null?void 0:I.name,players:r,guilds:o}}function B3e(t,e){var E,P,L,N,v,b;const n=[],r=new Map;for(const I of t){const j=I.id||"",S=(E=I.server)==null?void 0:E.toUpperCase();if(j){const C=`${S!=null?S:"NO"}::${j}`;r.has(C)||r.set(C,{server:S,id:j,name:I.name||"",own:!!I.own})}}const i=r.size,a=t.length,o=Array.from(r.values()).filter(I=>I.own).length,c=new Map;for(const I of r.values())I.server&&c.set(I.server,((P=c.get(I.server))!=null?P:0)+1);const u=Array.from(c.entries()).map(([I,j])=>({server:I,players:j})).sort((I,j)=>j.players-I.players),h=u.length,p=new Map;for(const I of t)p.set(I.guildIdentifier,((L=p.get(I.guildIdentifier))!=null?L:0)+1);const g=new Set,y=new Map;for(const I of e)g.add(I.guildIdentifier),y.set(I.guildIdentifier,{name:I.name||"",declared:I.memberCount});for(const I of p.keys())g.add(I);let _=0;const w=[];for(const I of g){const j=(N=y.get(I))==null?void 0:N.declared,S=(v=p.get(I))!=null?v:0,C=j!=null&&S===j;C&&_++,w.push({id:I,name:((b=y.get(I))==null?void 0:b.name)||"",declaredCount:j!=null?j:0,playersCount:S,full:C})}[...y.values()].some(I=>Number.isFinite(I.declared))||n.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),w.sort((I,j)=>I.name?I.name.localeCompare(j.name):I.id.localeCompare(j.id));const k=Array.from(r.values()).sort((I,j)=>(I.server||"")===(j.server||"")?I.name.localeCompare(j.name):(I.server||"").localeCompare(j.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:o,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:_,notes:n,playersList:k,guildsList:w}}function rL({mode:t="db",onBuildUploadSession:e}){const[n,r]=R.useState([]),[i,a]=R.useState(null),[o,c]=R.useState(!1),[u,h]=R.useState(null),[p,g]=R.useState(!1),[y,_]=R.useState(null),[w,k]=R.useState([]),[E,P]=R.useState(null);R.useEffect(()=>{const T=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=T}},[]);const L=R.useCallback(async T=>{var D;c(!0),h(null),a(null),k([]),_(null);try{const F=Array.from(T).slice(0,2),V=[];let z=[],q=[];for(const H of F){const K=H,ne=await K.text(),Y=n_(ne),{kind:G,warn:X}=r_(K.name,Y.headers);V.push({name:K.name,size:K.size||ne.length,rows:Y.rows.length,delimiter:Y.delimiter,text:ne,kind:G,warn:X}),G==="players"?z=z.concat(M3e(Y.rows,Y.headers)):G==="guilds"&&(q=q.concat(F3e(Y.rows,Y.headers)))}r(V),a(B3e(z,q))}catch(F){h(String((D=F==null?void 0:F.message)!=null?D:F))}finally{c(!1)}},[]),N=R.useCallback(async T=>{!T||T.length===0||await L(T)},[L]),v=R.useCallback(async T=>{T.preventDefault();const D=T.dataTransfer.files;!D||!D.length||await L(D)},[L]),b=R.useCallback(()=>{const T=n.map(D=>({name:D.name,text:D.text}));return nL(T)},[n]);async function I(){var T;if(n.length){g(!0),P({phase:"prepare",current:0,total:0}),_(null),k([]);try{let D=[],F=[];for(const z of n){const q=n_(z.text),{kind:H}=r_(z.name,q.headers);H==="players"&&(D=D.concat(q.rows)),H==="guilds"&&(F=F.concat(q.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!D.length,hasGuildsCsv:!!F.length,playersRows:D.length,guildsRows:F.length}),!F.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!D.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const V=await eL({playersRows:D,guildsRows:F},{onProgress:z=>P(z)});P({phase:"done",current:1,total:1}),k(V.reports),_("Import abgeschlossen.")}catch(D){console.error("[UploadCenter] Import error:",D),_(`Fehler beim Import: ${(T=D==null?void 0:D.message)!=null?T:D}`)}finally{g(!1),setTimeout(()=>P(null),1200)}}}const j=R.useCallback(async()=>{var T;if(!(t!=="session"||!e||!n.length)){g(!0),_(null),k([]),h(null),P(null);try{const D=b();e(D),_("Session prepared locally.")}catch(D){console.error("[UploadCenter] Session build error:",D),_(`Fehler beim Import: ${(T=D==null?void 0:D.message)!=null?T:D}`)}finally{g(!1)}}},[t,e,n,b]),S=R.useMemo(()=>n.map(T=>`${T.name} (${T.rows} rows, ${T.delimiter}, ${T.kind}${T.warn?" ":""})`),[n]),C=R.useMemo(()=>n.reduce((T,D)=>T+D.rows,0),[n]),M=E?Math.floor(100*E.current/Math.max(1,E.total||1)):0;return s.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[s.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[s.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[S.map((T,D)=>s.jsx("span",{className:"uc-chip",title:n[D].warn||"",children:T},D)),n.length>0&&s.jsxs("span",{className:"uc-chip",children:["Total: ",C," rows"]})]}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[E&&t==="db"&&s.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[s.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:s.jsx("div",{style:{width:`${M}%`,height:"100%",background:"#2E75F0"}})}),s.jsxs("span",{style:{color:"#D6E4F7"},children:[M,"%"]})]}),s.jsx("button",{onClick:t==="session"?j:I,disabled:!n.length||!i||p||t==="session"&&!e,className:"uc-btn",children:p?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),y&&s.jsx("span",{style:{color:y.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:y})]})]}),s.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[s.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),s.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:T=>N(T.target.files),disabled:o})]}),s.jsx("div",{onDragOver:T=>T.preventDefault(),onDrop:v,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),o&&s.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&s.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[s.jsx("b",{children:"Fehler:"})," ",u]}),i&&s.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[s.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:s.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),s.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[s.jsx(Qh,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),s.jsx(Qh,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),s.jsx(Qh,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),s.jsx(Qh,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),s.jsx(Qh,{label:"Verschiedene Server",value:i.servers})]}),s.jsxs("div",{style:{marginTop:12},children:[s.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),s.jsx("tbody",{children:i.perServer.map(T=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.server}),s.jsx("td",{style:{textAlign:"right"},children:T.players})]},T.server))})]})]}),s.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[s.jsxs("details",{children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Server"}),s.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),s.jsx("tbody",{children:i.playersList.map((T,D)=>{var F,V;return s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:(F=T.server)!=null?F:""}),s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{children:T.own?"":""})]},`${(V=T.server)!=null?V:"NO"}-${T.id}-${D}`)})})]})})]}),s.jsxs("details",{open:!0,children:[s.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),s.jsx("div",{style:{marginTop:8},children:s.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[s.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),s.jsx("th",{style:{textAlign:"left"},children:"Name"}),s.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),s.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),s.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),s.jsx("tbody",{children:i.guildsList.map((T,D)=>s.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[s.jsx("td",{children:T.id}),s.jsx("td",{children:T.name||""}),s.jsx("td",{style:{textAlign:"right"},children:T.declaredCount||0}),s.jsx("td",{style:{textAlign:"right"},children:T.playersCount}),s.jsx("td",{style:{textAlign:"center"},children:T.full?"":""})]},`${T.id}-${D}`))})]})})]})]}),!!i.notes.length&&s.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",s.jsx("ul",{children:i.notes.map((T,D)=>s.jsx("li",{children:T},D))})]})]})]})}function Qh({label:t,value:e,hint:n}){return s.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[s.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),s.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),n&&s.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:n})]})}function $3e(){return s.jsxs("div",{children:[s.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),s.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",s.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function O3e(){const{isOpen:t,close:e,activeTab:n,setTab:r,canUse:i}=bw();return!t||!i?null:s.jsx("div",{className:Oa.backdrop,onClick:e,children:s.jsxs("div",{className:Oa.panel,onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:Oa.header,children:[s.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),s.jsxs("div",{className:Oa.tabs,children:[s.jsx("button",{type:"button",className:`${Oa.tabBtn} ${n==="csv"?Oa.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),s.jsx("button",{type:"button",className:`${Oa.tabBtn} ${n==="json"?Oa.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),s.jsx("button",{type:"button",className:Oa.closeBtn,onClick:e,children:"Schlieen"})]}),s.jsx("div",{className:Oa.content,children:n==="csv"?s.jsx(rL,{mode:"db"}):s.jsx($3e,{})})]})})}const iL="sfdatahub_upload_sessions_v1",Kb={sessions:[],activeSessionId:null},V3e=()=>{var t,e,n,r,i,a;if(typeof window=="undefined")return Kb;try{const o=window.localStorage.getItem(iL);if(!o)return Kb;const c=JSON.parse(o);if(c&&typeof c=="object"){if("version"in c&&(c==null?void 0:c.version)===1&&c.type==="uploadCenter.sessions"&&Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(n=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?n:null}}if(Array.isArray(c.sessions)){const u=c;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(o){console.warn("[UploadCenterSessions] Failed to parse persisted state",o)}return Kb},aL=R.createContext(null);function U3e({children:t}){const e=R.useMemo(()=>V3e(),[]),[n,r]=R.useState(()=>e.sessions),[i,a]=R.useState(()=>e.activeSessionId),o=R.useCallback(N=>({...N,players:N.players.map(v=>({...v,status:"pending"})),guilds:N.guilds.map(v=>({...v,status:"pending"}))}),[]);R.useEffect(()=>{if(typeof window!="undefined")try{const N={version:1,type:"uploadCenter.sessions",sessions:n,activeSessionId:i};window.localStorage.setItem(iL,JSON.stringify(N))}catch(N){console.warn("[UploadCenterSessions] Failed to persist state",N)}},[n,i]);const c=R.useCallback(N=>{const v=o(N);r(b=>[...b,v]),a(v.id)},[o]),u=R.useCallback(N=>{a(N)},[]),h=R.useCallback(N=>{r(v=>{const b=v.filter(I=>I.id!==N);return a(I=>{var j,S;return I===N?(S=(j=b[0])==null?void 0:j.id)!=null?S:null:I}),b})},[]),p=R.useCallback(()=>{r([]),a(null)},[]),g=R.useCallback((N,v,b,I)=>{r(j=>j.map(S=>{if(S.id!==N)return S;if(v==="player"){const M=S.players.map(T=>T.key===b?{...T,selected:I}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===b?{...M,selected:I}:M);return{...S,guilds:C}}))},[]),y=R.useCallback((N,v,b)=>{r(I=>I.map(j=>{if(j.id!==N)return j;if(v==="player"){const C=j.players.map(M=>({...M,selected:b}));return{...j,players:C}}const S=j.guilds.map(C=>({...C,selected:b}));return{...j,guilds:S}}))},[]),_=R.useCallback((N,v,b)=>{r(I=>I.map(j=>{if(j.id!==N)return j;const S=j.guilds.find(D=>D.key===v);if(!S)return j;const C=S.guildId,M=j.players.map(D=>D.guildId===C?{...D,selected:b}:D),T=j.guilds.map(D=>D.key===v?{...D,selected:b}:D);return{...j,players:M,guilds:T}}))},[]),w=R.useCallback((N,v,b)=>{r(I=>I.map(j=>{if(j.id!==N)return j;let S;const C=j.players.map(F=>F.key!==v?F:(S=F.guildId,{...F,selected:b}));if(!S)return{...j,players:C};const M=C.filter(F=>F.guildId===S),T=M.length>0&&M.every(F=>F.selected),D=j.guilds.map(F=>F.guildId!==S?F:b===!1?{...F,selected:!1}:T?{...F,selected:!0}:F);return{...j,players:C,guilds:D}}))},[]),k=R.useCallback((N,v)=>{r(b=>b.map(I=>{if(I.id!==N)return I;const j=I.players.map(C=>({...C,selected:v})),S=I.guilds.map(C=>{if(!v)return{...C,selected:!1};const M=j.filter(D=>D.guildId===C.guildId),T=M.length>0&&M.every(D=>D.selected);return{...C,selected:T}});return{...I,players:j,guilds:S}}))},[]),E=R.useCallback((N,v)=>{r(b=>b.map(I=>{if(I.id!==N)return I;const j=I.guilds.map(C=>({...C,selected:v})),S=I.players.map(C=>v&&C.guildId?{...C,selected:!0}:!v&&C.guildId?{...C,selected:!1}:C);return{...I,guilds:j,players:S}}))},[]),P=R.useCallback((N,v,b,I)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:N,kind:v,recordKey:b,status:I}),r(j=>j.map(S=>{if(S.id!==N)return S;if(v==="player"){const M=S.players.map(T=>T.key===b?{...T,status:I}:T);return{...S,players:M}}const C=S.guilds.map(M=>M.key===b?{...M,status:I}:M);return{...S,guilds:C}}))},[]),L=R.useMemo(()=>({sessions:n,activeSessionId:i,addSession:c,setActiveSession:u,removeSession:h,clearAllSessions:p,toggleRecordSelection:g,selectAllInSession:y,selectGuildWithPlayers:_,updateGuildSelectionFromPlayer:w,selectAllPlayersWithGuilds:k,selectAllGuildsWithPlayers:E,setRecordStatus:P}),[n,i,c,u,h,p,g,y,_,w,k,E,P]);return s.jsx(aL.Provider,{value:L,children:t})}function G3e(){const t=R.useContext(aL);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}const z3e="sfh:authNext";function H3e({route:t,featureId:e,fallback:n=null,children:r}){var k;const{isLoading:i,status:a}=ea(),{resolveRule:o,canAccessFeature:c,canAccessRule:u,loading:h}=jx(),p=ir(),g=(k=e!=null?e:t)!=null?k:"/",y=W.useMemo(()=>o(g),[o,g]);W.useEffect(()=>{y||console.debug(`[FeatureGate] No rule found for target "${g}", allowing by default.`)},[y,g]);const _=W.useMemo(()=>!e&&!t?!0:y?u(y):c(g),[c,u,e,t,y,g]),w=W.useMemo(()=>y?!!(y.status==="logged_in"||y.minRole&&y.minRole!=="guest"||y.allowedRoles&&y.allowedRoles.length>0||y.allowedGroups&&y.allowedGroups.length>0||y.allowedUserIds&&y.allowedUserIds.length>0):!1,[y]);if(i||h)return null;if(!_){const E=a==="unauthenticated",P=p.pathname==="/login";if(w&&E&&!P){const L=`${p.pathname}${p.search||""}`,N=L.startsWith("/")&&!L.startsWith("//");typeof window!="undefined"&&window.sessionStorage&&N&&window.sessionStorage.setItem(z3e,L);const v=N?`/login?next=${encodeURIComponent(L)}`:"/login";return s.jsx(No,{to:v,replace:!0})}return s.jsx(s.Fragment,{children:n})}return s.jsx(s.Fragment,{children:r})}const n3="pending";function r3(t,e,n){const r=t.players.map(a=>{var c;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(c=a.guildId)!=null?c:void 0,level:a.level,className:a.className,values:a.values,selected:!0,status:n3}}),i=t.guilds.map(a=>{var u;const o=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,c=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:o,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:c,values:a.values,selected:!0,status:n3}});return{id:e,createdAt:n,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const Qf=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`};async function W3e(t){var n,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=ss(ft,"users",t);try{const o=await bn(null,e,()=>sn(e),{label:"UploadCenterUsage:get"});if(!o.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const c=(n=o.data())==null?void 0:n.uploadCenter,u=(r=c==null?void 0:c.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(o){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:o}),{date:null,guilds:0,players:0}}}async function K3e(t,e,n){var _,w,k;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=Qf(),i=ss(ft,"users",t);let a;try{a=await bn(null,i,()=>sn(i),{label:"UploadCenterUsage:update"})}catch(E){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:E});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const o=(_=a.data())==null?void 0:_.uploadCenter,c=o==null?void 0:o.usage,u=(c==null?void 0:c.date)===r,h=u?Number((w=c==null?void 0:c.guilds)!=null?w:0):0,p=u?Number((k=c==null?void 0:c.players)!=null?k:0):0,g=h+Number(e!=null?e:0),y=p+Number(n!=null?n:0);try{await xw(i,()=>zo(i,{uploadCenter:{...o!=null?o:{},usage:{date:r,guilds:g,players:y}}},{merge:!0}),{label:"UploadCenterUsage:updateWrite"})}catch(E){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:E})}}const $l={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},Hv=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},q3e=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([n,r])=>{if(!r||typeof r!="object")return;const i=r,a=Hv(i.dailyGuildLimit),o=Hv(i.dailyPlayerLimit),c=i.enabled,u={};typeof c=="boolean"&&(u.enabled=c),a!==null&&(u.dailyGuildLimit=a),o!==null&&(u.dailyPlayerLimit=o),Object.keys(u).length>0&&(e[n]=u)}),Object.keys(e).length>0?e:void 0};async function Q3e(t){const e=ss(ft,"upload_quota_config","default");try{const n=await bn(null,e,()=>sn(e),{label:"UploadQuota:config"});if(!n.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),$l;const r=n.data(),i=Hv(r==null?void 0:r.dailyGuildLimit),a=Hv(r==null?void 0:r.dailyPlayerLimit),o=q3e(r==null?void 0:r.roles),c={dailyGuildLimit:i!=null?i:$l.dailyGuildLimit,dailyPlayerLimit:a!=null?a:$l.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(c.enabled=r.enabled),o&&(c.roles=o);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),c}catch(n){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:n}),$l}}function Y3e(t,e){var a,o,c;const n=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:$l.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:$l.dailyPlayerLimit;for(const u of n){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const p=(o=h.dailyGuildLimit)!=null?o:r,g=(c=h.dailyPlayerLimit)!=null?c:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:p,playerLimit:g}),{dailyGuildLimit:p,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function i3(t){var u,h,p;const e=(u=t==null?void 0:t.id)!=null?u:null,n=(p=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?p:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([Q3e(t),e?W3e(e):Promise.resolve(null)]),o=Y3e(i,r);return{config:{...i,dailyGuildLimit:o.dailyGuildLimit,dailyPlayerLimit:o.dailyPlayerLimit},usage:a!=null?a:n}}const X3e=(t,e)=>`${ka}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,J3e=async t=>{let e=`Request failed (${t.status})`;try{const n=await t.json();n!=null&&n.error&&(e=n.error)}catch(n){}return new Error(e)};async function a3(t,e){const n=X3e(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(n,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await J3e(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const Z3e="sfdatahub:uploadCenter:scanUploads:v1:",oL=5,lL=t=>t&&"seconds"in t&&"nanoseconds"in t?{seconds:t.seconds,nanoseconds:t.nanoseconds}:null,Uc=t=>t?t instanceof Xs?t.toMillis():"seconds"in t&&"nanoseconds"in t?t.seconds*1e3+t.nanoseconds/1e6:-1/0:-1/0,e5e=t=>({...t,uploadedAt:t.uploadedAt?new Xs(t.uploadedAt.seconds,t.uploadedAt.nanoseconds):null}),t5e=t=>({...t,uploadedAt:lL(t.uploadedAt)}),cL=t=>{let e=null,n=-1/0;return t.forEach(r=>{var o;const i=lL("uploadedAt"in r&&(o=r.uploadedAt)!=null?o:null),a=Uc(i);a>n&&i&&(e=i,n=a)}),e},s5e=(t,e)=>{const n=new Map,r=i=>{const a=i.id||i.scanId;if(!a)return;const o=n.get(a);if(!o){n.set(a,i);return}const c=Uc(o.uploadedAt),u=Uc(i.uploadedAt);n.set(a,u>=c?i:o)};return t.forEach(r),e.forEach(r),Array.from(n.values()).sort((i,a)=>Uc(a.uploadedAt)-Uc(i.uploadedAt)).slice(0,oL)},n5e=(t,e)=>{if(!e)return[];const n=Uc(e);return t.filter(r=>Uc(r.uploadedAt)===n).map(r=>r.id).filter(r=>!!r)},r5e=t=>{if(typeof window=="undefined")return null;try{const e=window.localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e);return!n||!Array.isArray(n.items)?null:n}catch(e){return console.warn("[upload-center] Failed to read scan uploads cache",e),null}},o3=(t,e)=>{if(typeof window!="undefined")try{const n={savedAtMs:Date.now(),lastUploadedAt:cL(e),items:e.map(t5e)};window.localStorage.setItem(t,JSON.stringify(n))}catch(n){console.warn("[upload-center] Failed to persist scan uploads cache",n)}},qb=new Map,i5e=t=>{const[e,n]=R.useState([]),[r,i]=R.useState(!1),[a,o]=R.useState(null);return R.useEffect(()=>{if(!t){n([]),i(!1),o(null);return}let c=!0;const u=`${Z3e}${t}`,h=r5e(u),p=h?h.items.map(e5e):[],g=(h==null?void 0:h.lastUploadedAt)||cL(p),y=n5e(p,g);o(null),p.length>0?(n(p),i(!1)):(n([]),i(!0));const _=async()=>{const k=In("UploadCenter:scanUploads");try{const E=Go(ft,"scan_uploads"),P=Tn(E,gi("discordUserId","==",t),Pi("uploadedAt","desc"),sr(oL)),L=await yn(k,{path:E.path},()=>xn(P));if(!c)return;const N=L.docs.map(v=>({id:v.id,...v.data()}));console.log(`[upload-center] Loaded ${N.length} scan_uploads for current user (remote sessions)`),n(N),o3(u,N)}catch(E){if(!c)return;console.error("[upload-center] Failed to load scan_uploads for current user (index may be required)",E),o(E instanceof Error?E:new Error("Failed to load scan uploads")),n([])}finally{Ys(k),c&&i(!1)}},w=async(k,E)=>{const P=`${t}:${k.seconds}:${k.nanoseconds}`,L=qb.get(P);if(L){await L;return}const N=In("UploadCenter:scanUploads"),b=(async()=>{try{const I=Go(ft,"scan_uploads"),j=new Xs(k.seconds,k.nanoseconds),S=Tn(I,gi("discordUserId","==",t),Pi("uploadedAt","asc"),gi("uploadedAt",">",j)),C=await yn(N,{path:I.path},()=>xn(S));if(!c)return;let M=C.docs.map(T=>({id:T.id,...T.data()}));if(M.length===0&&E.length>0){const T=E.slice(0,10),D=Tn(I,gi("discordUserId","==",t),gi("uploadedAt","==",j),gi(k1(),"not-in",T),Pi(k1())),F=await yn(N,{path:I.path},()=>xn(D));if(!c)return;M=F.docs.map(V=>({id:V.id,...V.data()}))}if(M.length===0){console.log("[upload-center] No new scan_uploads found; using cached entries");return}n(T=>{const D=s5e(T.length?T:p,M);return o3(u,D),D})}catch(I){if(!c)return;console.error("[upload-center] Delta refresh for scan_uploads failed (index may be required)",I)}finally{Ys(N)}})().finally(()=>{qb.delete(P)});qb.set(P,b),await b};return p.length>0&&g?w(g,y):_(),()=>{c=!1}},[t]),{items:e,loading:r,error:a}},dL="sfdatahub_upload_quota_v1",uL=t=>{var e,n;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((n=t==null?void 0:t.players)!=null?n:0)||0}},Qb=(t,e)=>{if(typeof window=="undefined")return;const n={version:1,config:t,usage:uL(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem(dL,JSON.stringify(n))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},a5e=()=>{var t,e;if(typeof window=="undefined")return null;try{const n=window.localStorage.getItem(dL);if(!n)return null;const r=JSON.parse(n);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:uL(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(n){return console.warn("[UploadQuotaStorage] Failed to read quota data",n),null}},Wv=(t,e)=>Math.max(t-e,0),l3=(t,e,n)=>{var o,c,u;const r=e.date===n,i=r&&(o=e.guilds)!=null?o:0,a=r&&(c=e.players)!=null?c:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:Wv(t.dailyGuildLimit,i),remainingPlayers:Wv(t.dailyPlayerLimit,a),today:n}},o5e=({className:t})=>{if(!t)return s.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:n}=wE(t),r=e?vi(e,28):void 0;return r?s.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):n?s.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:n}):s.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function l5e(){return s.jsx(Kt,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:s.jsx(c5e,{})},"upload-center-shell")}function c5e(){var Ct,ns,Rt,Gt,Ps,_t,Ae,ks,Ht;const{sessions:t,activeSessionId:e,addSession:n,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:o,selectAllPlayersWithGuilds:c,selectAllGuildsWithPlayers:u,setRecordStatus:h}=G3e(),{t:p}=Hs(),{user:g}=ea(),y=(Rt=(ns=(Ct=g==null?void 0:g.providers)==null?void 0:Ct.discord)==null?void 0:ns.id)!=null?Rt:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:_,loading:w,error:k}=i5e(y),E=!!y,P=t.find(re=>re.id===e)||null,L=R.useMemo(()=>new Set(t.map(re=>re.scanUploadId).filter(re=>!!re)),[t]),[N,v]=W.useState(new Set),[b,I]=R.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[j,S]=R.useState("all"),[C,M]=R.useState("all"),[T,D]=R.useState(!1),[F,V]=R.useState(!1),[z,q]=R.useState(null),[H,K]=R.useState(null),[ne,Y]=R.useState(()=>l3($l,{date:null,guilds:0,players:0},Qf())),[G,X]=R.useState(null),te=R.useCallback((re,qe)=>{const tt=Qf();Y(l3(re,qe,tt)),X(null)},[]),se=R.useCallback(async()=>{try{const re=await i3(g!=null?g:null);te(re.config,re.usage),Qb(re.config,re.usage)}catch(re){console.error("[UploadCenter] Failed to refresh upload quota",re),X("Could not refresh upload quota. Using last known values.")}},[te,g]);R.useEffect(()=>{var ct,st;let re=!0;Qf();const qe=(st=(ct=g==null?void 0:g.uploadCenter)==null?void 0:ct.usage)!=null?st:{date:null,guilds:0,players:0};te($l,qe);const tt=a5e();return tt&&te(tt.config,tt.usage),(async()=>{try{const Pt=await i3(g!=null?g:null);if(!re)return;te(Pt.config,Pt.usage),Qb(Pt.config,Pt.usage)}catch(Pt){console.error("[UploadCenter] Failed to refresh upload quota",Pt),re&&X("Could not refresh upload quota. Using last known values.")}})(),()=>{re=!1}},[g,(Ps=(Gt=g==null?void 0:g.uploadCenter)==null?void 0:Gt.usage)==null?void 0:Ps.date,(Ae=(_t=g==null?void 0:g.uploadCenter)==null?void 0:_t.usage)==null?void 0:Ae.guilds,(Ht=(ks=g==null?void 0:g.uploadCenter)==null?void 0:ks.usage)==null?void 0:Ht.players,te]);const Z=R.useCallback(re=>{const qe=`csv_${Date.now()}`,tt=new Date().toISOString(),ct=r3(re,qe,tt);n(ct),r(qe)},[n,r]),ve=re=>{const qe=new Date(re);return Number.isNaN(qe.getTime())?"Unknown date":qe.toLocaleString()},Se=re=>{v(qe=>{const tt=new Set(qe);return tt.has(re)?tt.delete(re):tt.add(re),tt})},J=re=>{var st,Pt;const qe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",tt={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return s.jsx("span",{className:`${qe} ${(st=tt[re])!=null?st:tt.pending}`,children:(Pt=ct[re])!=null?Pt:re})},ue=re=>{if(!re)return"Unknown date";try{if(typeof re.toDate=="function")return re.toDate().toLocaleString()}catch(qe){}return"Unknown date"},ie=re=>{var Pt,as,os;const qe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",tt={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},st=(Pt=re==null?void 0:re.toLowerCase())!=null?Pt:"pending";return s.jsx("span",{className:`${qe} ${(as=tt[st])!=null?as:tt.pending}`,children:(os=ct[st])!=null?os:re||"PENDING"})},me=R.useCallback((re,qe,tt)=>{const ct=re==="created"||re==="duplicate";return tt&&ct?!1:qe==="all"?!0:qe==="pending"?re==="pending":qe==="inDb"?ct:qe==="error"?re==="error":!0},[]),ce=R.useMemo(()=>P?P.players.filter(re=>me(re.status,j,T)):[],[P,me,j,T]),he=R.useMemo(()=>P?P.guilds.filter(re=>me(re.status,C,F)):[],[P,me,C,F]),Ne=R.useCallback(async re=>{if(re!=null&&re.id){K(null),q(re.id);try{const qe=[],tt=re.queueId||re.scanId||re.id,ct=re.hasPlayersCsv!==!1,st=re.hasGuildsCsv!==!1;if(ct){const rn=await a3(re.id,"players");qe.push({name:`players.scan-${tt}.csv`,text:rn})}if(st){const rn=await a3(re.id,"guilds");qe.push({name:`guilds.scan-${tt}.csv`,text:rn})}if(!qe.length)throw new Error("No CSV data available for this scan.");const Pt=nL(qe);Pt.filename=tt||Pt.filename;const as=`scan_${re.id}_${Date.now()}`,os=new Date().toISOString(),Vn={...r3(Pt,as,os),scanUploadId:re.id};n(Vn),r(as),console.log(`[upload-center] Loaded remote scan session for scanId=${re.id} (session ${as})`)}catch(qe){console.error(`[upload-center] Failed to load remote scan session for scanId=${re==null?void 0:re.id}`,qe),K(qe instanceof Error?qe.message:"Failed to load remote scan session.")}finally{q(null)}}},[n,r]),Te=R.useMemo(()=>{if(!P)return!1;const re=P.players.some(tt=>tt.selected),qe=P.guilds.some(tt=>tt.selected);return re||qe},[P]),xe=b.phase==="uploading"||b.phase==="finalizing",Ie=()=>{if(!P)return null;const re=P.players.filter(st=>st.selected),qe=P.guilds.filter(st=>st.selected);if(!re.length&&!qe.length)return null;const tt=re.map(st=>{var Pt,as,os,_n,Vn,rn;if(st.values&&typeof st.values=="object"){const Ls={...st.values};return Ls.Identifier==null&&Ls.ID==null&&(Ls.Identifier=st.playerId),Ls["Guild Identifier"]==null&&(Ls["Guild Identifier"]=(Pt=st.guildId)!=null?Pt:""),Ls.Timestamp==null&&(Ls.Timestamp=st.scanTimestampSec),Ls.Server==null&&(Ls.Server=st.server),Ls.Name==null&&(Ls.Name=st.name),Ls.Class==null&&(Ls.Class=(as=st.className)!=null?as:""),Ls.Level==null&&(Ls.Level=(os=st.level)!=null?os:""),Ls}return{Identifier:st.playerId,"Guild Identifier":(_n=st.guildId)!=null?_n:"",Timestamp:st.scanTimestampSec,Server:st.server,Name:st.name,Class:(Vn=st.className)!=null?Vn:"",Level:(rn=st.level)!=null?rn:""}}),ct=qe.map(st=>{var Pt,as;if(st.values&&typeof st.values=="object"){const os={...st.values};return os["Guild Identifier"]==null&&(os["Guild Identifier"]=st.guildId),os["Guild Member Count"]==null&&(os["Guild Member Count"]=(Pt=st.memberCount)!=null?Pt:st.members.length),os.Timestamp==null&&(os.Timestamp=st.scanTimestampSec),os.Server==null&&(os.Server=st.server),os.Name==null&&(os.Name=st.name),os}return{"Guild Identifier":st.guildId,"Guild Member Count":(as=st.memberCount)!=null?as:st.members.length,Timestamp:st.scanTimestampSec,Name:st.name,Server:st.server}});return{playersRows:tt,guildsRows:ct}},$e=R.useCallback((re,qe)=>{Y(tt=>{const ct=tt.usedGuildsToday+re,st=tt.usedPlayersToday+qe,Pt={...tt,usedGuildsToday:ct,usedPlayersToday:st,remainingGuilds:Wv(tt.config.dailyGuildLimit,ct),remainingPlayers:Wv(tt.config.dailyPlayerLimit,st),usageDate:tt.today};return Qb(tt.config,{date:tt.today,guilds:ct,players:st}),Pt})},[]),Xe=R.useMemo(()=>ne.usageDate?ne.usageDate===ne.today?"Today":ne.usageDate:"No uploads yet",[ne.today,ne.usageDate]),be=ne.config.dailyPlayerLimit===0,Be=ne.config.dailyGuildLimit===0,Ve=be?p("uploadCenter.quota.unlimited"):ne.config.dailyPlayerLimit,nt=Be?p("uploadCenter.quota.unlimited"):ne.config.dailyGuildLimit,ht=be?p("uploadCenter.quota.unlimited"):`${Ve} limit today`,Ue=Be?p("uploadCenter.quota.unlimited"):`${nt} limit today`,Ee=be?p("uploadCenter.quota.unlimited"):ne.remainingPlayers,He=Be?p("uploadCenter.quota.unlimited"):ne.remainingGuilds,St=async()=>{var Rr,Pr,Wn;if(!P)return;const re=Ie();if(!re)return;const qe=P.players.filter(ms=>ms.selected),tt=P.guilds.filter(ms=>ms.selected),ct=qe.length+tt.length;if(!ct)return;const st=(Rr=g==null?void 0:g.id)!=null?Rr:null,{config:Pt,usedGuildsToday:as,usedPlayersToday:os}=ne,_n=as+tt.length,Vn=os+qe.length,rn=_n>Pt.dailyGuildLimit,Ls=Vn>Pt.dailyPlayerLimit;if(rn||Ls){X(`Daily quota exceeded: You can import up to ${Pt.dailyGuildLimit} guilds / ${Pt.dailyPlayerLimit} players per day. Today you already imported ${as} guilds / ${os} players. This selection would bring you to ${_n} guilds / ${Vn} players.`);return}X(null),I({phase:"uploading",processed:0,total:ct,created:0,duplicate:0,error:0});const js={processed:0,created:0,duplicate:0,error:0},ar={processed:0,created:0,duplicate:0,error:0},wn=()=>{const ms=Math.min(js.processed+ar.processed,ct),$s=ms>=ct&&ct>0?"finalizing":"uploading";I({phase:$s,processed:ms,total:ct,created:js.created+ar.created,duplicate:js.duplicate+ar.duplicate,error:js.error+ar.error})},Er=ms=>$s=>{var xi;if(($s==null?void 0:$s.pass)!=="scans")return;const or=ms==="players"?js:ar;typeof $s.current=="number"&&(or.processed=Math.min($s.current,(xi=$s.total)!=null?xi:$s.current)),typeof $s.created=="number"&&(or.created=$s.created),typeof $s.duplicate=="number"&&(or.duplicate=$s.duplicate),typeof $s.error=="number"&&(or.error=$s.error),wn()};try{console.log("[UploadCenter] starting selection upload",{players:qe.length,guilds:tt.length});const ms=await eL(re,{onProgress:es=>{(es==null?void 0:es.kind)==="players"?Er("players")(es):(es==null?void 0:es.kind)==="guilds"&&Er("guilds")(es)}}),$s=P.id;let or=!1,xi=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(Pr=ms==null?void 0:ms.players)==null?void 0:Pr.slice(0,5),guildsSample:(Wn=ms==null?void 0:ms.guilds)==null?void 0:Wn.slice(0,5),selectedPlayerKeys:qe.slice(0,5).map(es=>es.key),selectedGuildKeys:tt.slice(0,5).map(es=>es.key)}),((ms==null?void 0:ms.players)||[]).forEach(es=>{or=!0,h($s,"player",es.key,es.status)}),((ms==null?void 0:ms.guilds)||[]).forEach(es=>{xi=!0,h($s,"guild",es.key,es.status)}),!or&&!xi&&(qe.forEach(es=>h($s,"player",es.key,"created")),tt.forEach(es=>h($s,"guild",es.key,"created"))),qe.length||tt.length){if($e(tt.length,qe.length),!st)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await K3e(st,tt.length,qe.length)}catch(es){console.error("[UploadCenter] Failed to record upload usage.",es)}await se()}}catch(ms){console.error("[UploadCenter] Failed to upload selection",ms)}finally{I(ms=>({...ms,phase:"done"}))}};return s.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[s.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),s.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),s.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),s.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[s.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",Xe]})]}),s.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:Ee}),s.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[ne.usedPlayersToday," used / ",ht]})]}),s.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:He}),s.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),s.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[ne.usedGuildsToday," used / ",Ue]})]})]}),G&&s.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:G})]}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[s.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),s.jsx(rL,{mode:"session",onBuildUploadSession:Z})]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):s.jsx("div",{className:"flex flex-col gap-3",children:t.map(re=>{const qe=re.id===e;return s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(re.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key===" ")&&(tt.preventDefault(),r(re.id))},className:["w-full rounded-xl border px-4 py-3 text-left transition",qe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:re.sourceFilename||"Unnamed session"}),s.jsx("span",{className:"text-xs text-slate-400",children:ve(re.createdAt)})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players: ",re.players.length]}),s.jsxs("div",{children:["Guilds: ",re.guilds.length]})]}),s.jsx("button",{type:"button",onClick:tt=>{tt.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(re.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:s.jsx(O7,{className:"h-4 w-4"})})]})]}),qe&&s.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},re.id)})}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),H&&s.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:H}),E?w?s.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):k?s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):_.length===0?s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):s.jsx("div",{className:"flex flex-col gap-3",children:_.map(re=>{const qe=z===re.id,tt=L.has(re.id),ct=qe||tt;return s.jsxs("button",{type:"button",onClick:()=>{ct||Ne(re)},disabled:ct,title:tt?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",ct?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-sm font-semibold",children:re.queueId||re.scanId||re.id}),s.jsx("span",{className:"text-xs text-slate-400",children:ue(re.uploadedAt)}),re.discordUsername&&s.jsx("span",{className:"text-xs text-slate-400",children:re.discordUsername})]}),s.jsxs("div",{className:"text-right text-xs text-slate-400",children:[s.jsxs("div",{children:["Players CSV: ",re.hasPlayersCsv?"yes":"no"]}),s.jsxs("div",{children:["Guilds CSV: ",re.hasGuildsCsv?"yes":"no"]})]})]}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[ie(re.status),re.serverCode&&s.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",re.serverCode]}),re.lastError&&s.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",re.lastError]}),s.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:tt?"Loaded":qe?"Loading...":"Load into preview"})]})]},re.id)})}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),s.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:St,disabled:xe||!P||!Te,children:b.phase==="uploading"?"Uploading...":b.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),G&&s.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:G}),b.total>0&&s.jsx("div",{className:"text-xs text-slate-300",children:b.phase==="uploading"?s.jsxs(s.Fragment,{children:["Uploading ",b.processed," / ",b.total," records (",Math.round(b.processed/Math.max(b.total,1)*100),"%) - ",b.created," created, ",b.duplicate," duplicates, ",b.error," errors"]}):b.phase==="finalizing"?s.jsxs(s.Fragment,{children:["Finalizing import - ",b.created," created, ",b.duplicate," duplicates, ",b.error," errors"]}):b.phase==="done"?s.jsxs(s.Fragment,{children:["Upload finished: ",b.created," created, ",b.duplicate," duplicates, ",b.error," errors"]}):null}),P?s.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${P.sourceFilename||P.id} - ${P.players.length} players, ${P.guilds.length} guilds`}):s.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),P&&s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",P.players.length," total,"," ",P.players.filter(re=>re.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>c(P.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>c(P.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(re=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",j===re?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>S(re),children:re==="all"?"All":re==="pending"?"Pending":re==="inDb"?"In DB":"Error"},re))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T,onChange:re=>D(re.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),ce.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:ce.map(re=>{var qe;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:re.selected,onChange:()=>o(P.id,re.key,!re.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:re.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:re.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:(qe=re.level)!=null?qe:""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:s.jsx(o5e,{className:re.className})}),s.jsx("td",{className:"px-3 py-2",children:J(re.status)})]},re.key)})})]})})]}),s.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[s.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),s.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",P.guilds.length," total,"," ",P.guilds.filter(re=>re.selected).length," selected"]})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[s.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(P.id,!0),children:"Select all"}),s.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(P.id,!1),children:"Clear selection"})]}),s.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[s.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(re=>s.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",C===re?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>M(re),children:re==="all"?"All":re==="pending"?"Pending":re==="inDb"?"In DB":"Error"},re))}),s.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:F,onChange:re=>V(re.target.checked)}),s.jsx("span",{children:"Hide uploaded"})]})]}),he.length===0?s.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):s.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),s.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),s.jsx("tbody",{children:he.map(re=>{var ct;const qe=N.has(re.key),tt=(ct=re.memberCount)!=null?ct:re.members.length;return s.jsxs(W.Fragment,{children:[s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>Se(re.key),"aria-expanded":qe,children:qe?"Collapse":"Expand"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"checkbox",checked:re.selected,onChange:()=>a(P.id,re.key,!re.selected)})}),s.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:re.name||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:re.server||""}),s.jsx("td",{className:"px-3 py-2 text-slate-200",children:tt}),s.jsx("td",{className:"px-3 py-2",children:J(re.status)})]}),qe&&s.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:s.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[s.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),re.members.length===0?s.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):s.jsxs("table",{className:"w-full text-sm text-slate-100",children:[s.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),s.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),s.jsx("tbody",{children:re.members.map(st=>{var Pt,as;return s.jsxs("tr",{className:"border-t border-slate-800/70",children:[s.jsx("td",{className:"px-2 py-1",children:st.name||""}),s.jsx("td",{className:"px-2 py-1",children:(Pt=st.level)!=null?Pt:""}),s.jsx("td",{className:"px-2 py-1",children:(as=st.className)!=null?as:""})]},st.key)})})]})]})})]},re.key)})})]})})]})]})]})})]})}function d5e(){const{canUse:t}=bw();return t?s.jsx(l5e,{}):s.jsx(Kt,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:s.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[s.jsx(U3,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),s.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),s.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const u5e=t=>()=>s.jsx("div",{style:{padding:16},children:s.jsx("h2",{style:{color:"var(--title)"},children:t})}),Ii=u5e("Diese Unterseite existiert in der neuen Struktur nicht mehr."),c3=({tab:t})=>{const e=ir(),n=new URLSearchParams(e.search);n.set("tab",t);const r=n.toString();return s.jsx(No,{to:`/toplists${r?`?${r}`:""}`,replace:!0})},Jt=(t,e,n,r=s.jsx(No,{to:"/",replace:!0}))=>s.jsx(H3e,{featureId:t,route:e,fallback:r,children:n});j6.createRoot(document.getElementById("root")).render(s.jsx(W.StrictMode,{children:s.jsx(jG,{children:s.jsx(HG,{children:s.jsx(YG,{children:s.jsxs(U3e,{children:[s.jsx(iM,{children:s.jsx(D8,{children:s.jsxs(_e,{element:s.jsx(WH,{}),children:[s.jsx(_e,{path:"/",element:Jt("main.home","/",s.jsx(PJ,{}),s.jsx(No,{to:"/login",replace:!0}))}),s.jsx(_e,{path:"/login",element:s.jsx(LJ,{})}),s.jsx(_e,{path:"/dashboard",element:Jt("main.dashboard","/dashboard",s.jsx(DJ,{}))}),s.jsx(_e,{path:"/dashboard/kpis",element:Jt("main.dashboard","/dashboard",s.jsx(BJ,{}))}),s.jsx(_e,{path:"/dashboard/activity",element:Jt("main.dashboard","/dashboard",s.jsx($J,{}))}),s.jsx(_e,{path:"/dashboard/progression",element:Jt("main.dashboard","/dashboard",s.jsx(OJ,{}))}),s.jsx(_e,{path:"/discover",element:Jt("main.discover","/discover",s.jsx(VJ,{}))}),s.jsx(_e,{path:"/toplists",element:Jt("main.toplists","/toplists",s.jsx(yte,{}))}),s.jsx(_e,{path:"/sfmagazine",element:s.jsx(WJ,{})}),s.jsx(_e,{path:"/sfmagazine/historybook",element:s.jsx(wZ,{})}),s.jsx(_e,{path:"/help",element:s.jsx(FZ,{})}),s.jsx(_e,{path:"/search",element:s.jsx(EIe,{})}),s.jsx(_e,{path:"/players",element:s.jsx(bte,{})}),s.jsx(_e,{path:"/players/rankings",element:s.jsx(_te,{})}),s.jsx(_e,{path:"/players/stats",element:s.jsx(wte,{})}),s.jsx(_e,{path:"/players/profile",element:s.jsx(pb,{})}),s.jsx(_e,{path:"/players/profile/:playerId",element:s.jsx(pb,{})}),s.jsx(_e,{path:"/players/compare",element:s.jsx(Gne,{})}),s.jsx(_e,{path:"/player/:playerId",element:s.jsx(pb,{})}),s.jsx(_e,{path:"/guilds",element:s.jsx(Xne,{})}),s.jsx(_e,{path:"/guilds/rankings",element:s.jsx(Jne,{})}),s.jsx(_e,{path:"/guilds/stats",element:s.jsx(Zne,{})}),s.jsx(_e,{path:"/guilds/profile",element:s.jsx(vb,{})}),s.jsx(_e,{path:"/guilds/profile/:guildId",element:s.jsx(vb,{})}),s.jsx(_e,{path:"/guild/:guildId",element:s.jsx(vb,{})}),s.jsx(_e,{path:"/servers",element:s.jsx(Oae,{})}),s.jsx(_e,{path:"/servers/rankings",element:s.jsx(Vae,{})}),s.jsx(_e,{path:"/servers/stats",element:s.jsx(Uae,{})}),s.jsx(_e,{path:"/servers/overview",element:s.jsx(boe,{})}),s.jsx(_e,{path:"/servers/profile",element:s.jsx(yb,{})}),s.jsx(_e,{path:"/servers/profile/:serverId",element:s.jsx(yb,{})}),s.jsx(_e,{path:"/server/:serverId",element:s.jsx(yb,{})}),s.jsx(_e,{path:"/u/:profileId",element:s.jsx(Ile,{})}),s.jsx(_e,{path:"/guidehub/*",element:Jt("main.guidehub","/guidehub",s.jsx(Qpe,{}))}),s.jsx(_e,{path:"/guidehub-v2",element:Jt("main.guidehub","/guidehub-v2",s.jsx(Dge,{}))}),s.jsx(_e,{path:"/tools",element:Jt("main.tools","/tools",s.jsx(TIe,{}))}),s.jsx(_e,{path:"/upload-center",element:Jt("main.uploadCenter","/upload-center",s.jsx(d5e,{}),s.jsx(No,{to:"/login",replace:!0}))}),s.jsx(_e,{path:"/UploadCenter",element:s.jsx(No,{to:"/upload-center",replace:!0})}),s.jsx(_e,{path:"/community",element:Jt("main.community","/community",s.jsx(Tve,{}))}),s.jsx(_e,{path:"/community/scans",element:Jt("main.community","/community",s.jsx(pP,{}))}),s.jsx(_e,{path:"/community/predictions",element:Jt("main.community","/community",s.jsx(mP,{}))}),s.jsx(_e,{path:"/community/creators",element:Jt("main.community","/community",s.jsx(hP,{}))}),s.jsx(_e,{path:"/community/feedback",element:Jt("main.community","/community",s.jsx(fP,{}))}),s.jsx(_e,{path:"/community/news",element:Jt("main.community","/community",s.jsx(gP,{}))}),s.jsx(_e,{path:"/community/records",element:Jt("main.community","/community",s.jsx(vP,{}))}),s.jsx(_e,{path:"/scans",element:Jt("main.scans","/scans",s.jsx(Ive,{}))}),s.jsx(_e,{path:"/scans/latest",element:Jt("main.scans","/scans",s.jsx(Ave,{}))}),s.jsx(_e,{path:"/scans/archive",element:Jt("main.scans","/scans",s.jsx(Eve,{}))}),s.jsx(_e,{path:"/guild-hub",element:Jt("main.guildHub","/guild-hub",s.jsx(Rve,{}))}),s.jsx(_e,{path:"/guild-hub/planner",element:Jt("main.guildHub","/guild-hub",s.jsx(eye,{}))}),s.jsx(_e,{path:"/guild-hub/fusion-planner",element:Jt("main.guildHub","/guild-hub",s.jsx(B_e,{}))}),s.jsx(_e,{path:"/guild-hub/compare-guilds",element:Jt("main.guildHub","/guild-hub",s.jsx($_e,{}))}),s.jsx(_e,{path:"/guild-hub/waitlist",element:Jt("main.guildHub","/guild-hub",s.jsx(rje,{}))}),s.jsx(_e,{path:"/guild-hub/activity",element:Jt("main.guildHub","/guild-hub",s.jsx(hje,{}))}),s.jsx(_e,{path:"/guild-hub/imports",element:Jt("main.guildHub","/guild-hub",s.jsx(pje,{}))}),s.jsx(_e,{path:"/guild-hub/announcements",element:Jt("main.guildHub","/guild-hub",s.jsx(mje,{}))}),s.jsx(_e,{path:"/guild-hub/events",element:Jt("main.guildHub","/guild-hub",s.jsx(gje,{}))}),s.jsx(_e,{path:"/guild-hub/roles",element:Jt("main.guildHub","/guild-hub",s.jsx(fje,{}))}),s.jsx(_e,{path:"/guild-hub/settings",element:Jt("main.guildHub","/guild-hub",s.jsx(vje,{}))}),s.jsx(_e,{path:"/admin",element:Jt("main.admin","/admin",s.jsx(_je,{}))}),s.jsx(_e,{path:"/admin/errors",element:Jt("main.admin","/admin",s.jsx(Nje,{}))}),s.jsx(_e,{path:"/admin/scans-uploaded",element:Jt("main.admin","/admin",s.jsx(Cje,{}))}),s.jsx(_e,{path:"/admin/creators-api",element:Jt("main.admin","/admin",s.jsx(Fje,{}))}),s.jsx(_e,{path:"/admin/users",element:Jt("main.admin","/admin",s.jsx(Xje,{}))}),s.jsx(_e,{path:"/settings",element:Jt("main.settings","/settings",s.jsx(n2e,{}))}),s.jsx(_e,{path:"/settings/account",element:Jt("main.settings","/settings",s.jsx(MSe,{}))}),s.jsxs(_e,{path:"/playground",element:Jt("main.playground","/playground",s.jsx(BSe,{})),children:[s.jsx(_e,{index:!0,element:s.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),s.jsx(_e,{path:"list-views",element:s.jsx(PI,{})}),s.jsx(_e,{path:"rescan-widget",element:s.jsx(DI,{})}),s.jsx(_e,{path:"upload-sim",element:s.jsx(MI,{})}),s.jsx(_e,{path:"theme-maker",element:s.jsx(yI,{})}),s.jsx(_e,{path:"theme-maker-pro",element:s.jsx(_I,{})}),s.jsx(_e,{path:"gamified",element:s.jsx(hke,{})}),s.jsx(_e,{path:"gamified-2",element:s.jsx(mke,{})}),s.jsx(_e,{path:"gamified-3",element:s.jsx(vke,{})}),s.jsx(_e,{path:"gamified-4",element:s.jsx(bke,{})}),s.jsx(_e,{path:"gamified-5",element:s.jsx(jke,{})}),s.jsx(_e,{path:"gamified-6",element:s.jsx(kke,{})}),s.jsx(_e,{path:"gamified-7",element:s.jsx(Ike,{})}),s.jsx(_e,{path:"gamified-8",element:s.jsx(Rke,{})}),s.jsx(_e,{path:"am-rune-bonuses-demos",element:s.jsx(DNe,{})}),s.jsx(_e,{path:"templates/content-shell",element:s.jsx(Qke,{})}),s.jsx(_e,{path:"templates/blank",element:s.jsx(Xke,{})}),s.jsx(_e,{path:"templates/blank-alt",element:s.jsx(Zke,{})}),s.jsx(_e,{path:"templates/blank-layout-2",element:s.jsx(nCe,{})}),s.jsx(_e,{path:"templates/blank-layout-3",element:s.jsx(iCe,{})}),s.jsx(_e,{path:"templates/blank-layout-4",element:s.jsx(aCe,{})}),s.jsx(_e,{path:"portrait-maker",element:s.jsx(Hke,{})}),s.jsx(_e,{path:"hud",element:s.jsx(MNe,{})}),s.jsx(_e,{path:"hud/game-buttons",element:s.jsx(cke,{})}),s.jsx(_e,{path:"core-ui/theme-maker",element:s.jsx(yI,{})}),s.jsx(_e,{path:"core-ui/theme-maker-pro",element:s.jsx(_I,{})}),s.jsx(_e,{path:"core-ui/list-views",element:s.jsx(PI,{})}),s.jsx(_e,{path:"sync/rescan",element:s.jsx(DI,{})}),s.jsx(_e,{path:"upload/sim",element:s.jsx(MI,{})}),s.jsx(_e,{path:"import/har",element:s.jsx(dCe,{})}),s.jsx(_e,{path:"import/json-csv",element:s.jsx(mCe,{})}),s.jsx(_e,{path:"import/schema",element:s.jsx(xCe,{})}),s.jsx(_e,{path:"hubs/player-contained",element:s.jsx(wCe,{})}),s.jsx(_e,{path:"hubs/guilds",element:s.jsx(kCe,{})}),s.jsx(_e,{path:"hubs/servers",element:s.jsx(ACe,{})}),s.jsx(_e,{path:"rankings/views",element:s.jsx(LCe,{})}),s.jsx(_e,{path:"analytics/kpi",element:s.jsx(BCe,{})}),s.jsx(_e,{path:"analytics/progression",element:s.jsx(UCe,{})}),s.jsx(_e,{path:"analytics/legendary-pets",element:s.jsx(WCe,{})}),s.jsx(_e,{path:"community/scans",element:s.jsx(YCe,{})}),s.jsx(_e,{path:"community/creators",element:s.jsx(eTe,{})}),s.jsx(_e,{path:"feedback/form",element:s.jsx(rTe,{})}),s.jsx(_e,{path:"feedback/admin",element:s.jsx(lTe,{})}),s.jsx(_e,{path:"help/tutorials",element:s.jsx(hTe,{})}),s.jsx(_e,{path:"help/wiki",element:s.jsx(fTe,{})}),s.jsx(_e,{path:"legal/tos",element:s.jsx(STe,{})}),s.jsx(_e,{path:"legal/transparency",element:s.jsx(TTe,{})}),s.jsx(_e,{path:"settings",element:s.jsx(bTe,{})}),s.jsx(_e,{path:"pwa/update",element:s.jsx(RTe,{})}),s.jsx(_e,{path:"pwa/install",element:s.jsx(MTe,{})}),s.jsx(_e,{path:"connect/manual",element:s.jsx(OTe,{})}),s.jsx(_e,{path:"connect/userscript",element:s.jsx(zTe,{})}),s.jsx(_e,{path:"interop/exports",element:s.jsx(qTe,{})}),s.jsx(_e,{path:"interop/deeplinks",element:s.jsx(JTe,{})}),s.jsx(_e,{path:"admin/servers",element:s.jsx(sIe,{})}),s.jsx(_e,{path:"admin/jobs",element:s.jsx(aIe,{})}),s.jsx(_e,{path:"admin/flags",element:s.jsx(dIe,{})}),s.jsx(_e,{path:"perf/table-lab",element:s.jsx(mIe,{})}),s.jsx(_e,{path:"mobile/filters",element:s.jsx(xIe,{})}),s.jsx(_e,{path:"qa/a11y",element:s.jsx(wIe,{})})]}),s.jsx(_e,{path:"/latest-scan",element:s.jsx(No,{to:"/scans/latest",replace:!0})}),s.jsx(_e,{path:"/old-scans",element:s.jsx(No,{to:"/scans/archive",replace:!0})}),s.jsx(_e,{path:"/favorites",element:Ii()}),s.jsx(_e,{path:"/notifications",element:Ii()}),s.jsx(_e,{path:"/guilds/planner",element:Ii()}),s.jsx(_e,{path:"/guilds/fusion",element:Ii()}),s.jsx(_e,{path:"/guilds/academy",element:Ii()}),s.jsx(_e,{path:"/toplists/players",element:s.jsx(c3,{tab:"players"})}),s.jsx(_e,{path:"/toplists/guilds",element:s.jsx(c3,{tab:"guilds"})}),s.jsx(_e,{path:"/toplists/servers",element:Ii()}),s.jsx(_e,{path:"/settings/profile",element:Ii()}),s.jsx(_e,{path:"/settings/appearance",element:Ii()}),s.jsx(_e,{path:"/players/search",element:Ii()}),s.jsx(_e,{path:"/servers/list",element:Ii()}),s.jsx(_e,{path:"/servers/trend",element:Ii()}),s.jsx(_e,{path:"/scans/upload",element:Ii()}),s.jsx(_e,{path:"/scans/history",element:Ii()}),s.jsx(_e,{path:"*",element:s.jsx(No,{to:"/",replace:!0})})]})})}),s.jsx(O3e,{})]})})})})}));

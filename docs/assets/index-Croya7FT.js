import Ek from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function D0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uv={exports:{}},pu={},hv={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function k4(){if(Uw)return Tt;Uw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function T(U,Y,ie){this.props=U,this.context=Y,this.refs=N,this.updater=ie||b}T.prototype.isReactComponent={},T.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=T.prototype;function L(U,Y,ie){this.props=U,this.context=Y,this.refs=N,this.updater=ie||b}var k=L.prototype=new M;k.constructor=L,S(k,T.prototype),k.isPureReactComponent=!0;var v=Array.isArray,_=Object.prototype.hasOwnProperty,P={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function w(U,Y,ie){var X,pe={},ge=null,he=null;if(Y!=null)for(X in Y.ref!==void 0&&(he=Y.ref),Y.key!==void 0&&(ge=""+Y.key),Y)_.call(Y,X)&&!E.hasOwnProperty(X)&&(pe[X]=Y[X]);var ve=arguments.length-2;if(ve===1)pe.children=ie;else if(1<ve){for(var _e=Array(ve),ce=0;ce<ve;ce++)_e[ce]=arguments[ce+2];pe.children=_e}if(U&&U.defaultProps)for(X in ve=U.defaultProps,ve)pe[X]===void 0&&(pe[X]=ve[X]);return{$$typeof:t,type:U,key:ge,ref:he,props:pe,_owner:P.current}}function A(U,Y){return{$$typeof:t,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function D(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ie){return Y[ie]})}var $=/\/+/g;function F(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):Y.toString(36)}function z(U,Y,ie,X,pe){var ge=typeof U;(ge==="undefined"||ge==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(ge){case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case t:case e:he=!0}}if(he)return he=U,pe=pe(he),U=X===""?"."+F(he,0):X,v(pe)?(ie="",U!=null&&(ie=U.replace($,"$&/")+"/"),z(pe,Y,ie,"",function(ce){return ce})):pe!=null&&(B(pe)&&(pe=A(pe,ie+(!pe.key||he&&he.key===pe.key?"":(""+pe.key).replace($,"$&/")+"/")+U)),Y.push(pe)),1;if(he=0,X=X===""?".":X+":",v(U))for(var ve=0;ve<U.length;ve++){ge=U[ve];var _e=X+F(ge,ve);he+=z(ge,Y,ie,_e,pe)}else if(_e=y(U),typeof _e=="function")for(U=_e.call(U),ve=0;!(ge=U.next()).done;)ge=ge.value,_e=X+F(ge,ve++),he+=z(ge,Y,ie,_e,pe);else if(ge==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return he}function H(U,Y,ie){if(U==null)return U;var X=[],pe=0;return z(U,X,"","",function(ge){return Y.call(ie,ge,pe++)}),X}function K(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(ie){(U._status===0||U._status===-1)&&(U._status=1,U._result=ie)},function(ie){(U._status===0||U._status===-1)&&(U._status=2,U._result=ie)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var q={current:null},G={transition:null},re={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:G,ReactCurrentOwner:P};function se(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:H,forEach:function(U,Y,ie){H(U,function(){Y.apply(this,arguments)},ie)},count:function(U){var Y=0;return H(U,function(){Y++}),Y},toArray:function(U){return H(U,function(Y){return Y})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Tt.Component=T,Tt.Fragment=s,Tt.Profiler=i,Tt.PureComponent=L,Tt.StrictMode=r,Tt.Suspense=u,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Tt.act=se,Tt.cloneElement=function(U,Y,ie){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var X=S({},U.props),pe=U.key,ge=U.ref,he=U._owner;if(Y!=null){if(Y.ref!==void 0&&(ge=Y.ref,he=P.current),Y.key!==void 0&&(pe=""+Y.key),U.type&&U.type.defaultProps)var ve=U.type.defaultProps;for(_e in Y)_.call(Y,_e)&&!E.hasOwnProperty(_e)&&(X[_e]=Y[_e]===void 0&&ve!==void 0?ve[_e]:Y[_e])}var _e=arguments.length-2;if(_e===1)X.children=ie;else if(1<_e){ve=Array(_e);for(var ce=0;ce<_e;ce++)ve[ce]=arguments[ce+2];X.children=ve}return{$$typeof:t,type:U.type,key:pe,ref:ge,props:X,_owner:he}},Tt.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Tt.createElement=w,Tt.createFactory=function(U){var Y=w.bind(null,U);return Y.type=U,Y},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(U){return{$$typeof:d,render:U}},Tt.isValidElement=B,Tt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:K}},Tt.memo=function(U,Y){return{$$typeof:h,type:U,compare:Y===void 0?null:Y}},Tt.startTransition=function(U){var Y=G.transition;G.transition={};try{U()}finally{G.transition=Y}},Tt.unstable_act=se,Tt.useCallback=function(U,Y){return q.current.useCallback(U,Y)},Tt.useContext=function(U){return q.current.useContext(U)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(U){return q.current.useDeferredValue(U)},Tt.useEffect=function(U,Y){return q.current.useEffect(U,Y)},Tt.useId=function(){return q.current.useId()},Tt.useImperativeHandle=function(U,Y,ie){return q.current.useImperativeHandle(U,Y,ie)},Tt.useInsertionEffect=function(U,Y){return q.current.useInsertionEffect(U,Y)},Tt.useLayoutEffect=function(U,Y){return q.current.useLayoutEffect(U,Y)},Tt.useMemo=function(U,Y){return q.current.useMemo(U,Y)},Tt.useReducer=function(U,Y,ie){return q.current.useReducer(U,Y,ie)},Tt.useRef=function(U){return q.current.useRef(U)},Tt.useState=function(U){return q.current.useState(U)},Tt.useSyncExternalStore=function(U,Y,ie){return q.current.useSyncExternalStore(U,Y,ie)},Tt.useTransition=function(){return q.current.useTransition()},Tt.version="18.3.1",Tt}var zw;function M0(){return zw||(zw=1,hv.exports=k4()),hv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function T4(){if(Hw)return pu;Hw=1;var t=M0(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var p,g={},y=null,b=null;h!==void 0&&(y=""+h),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(b=u.ref);for(p in u)r.call(u,p)&&!a.hasOwnProperty(p)&&(g[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)g[p]===void 0&&(g[p]=u[p]);return{$$typeof:e,type:d,key:y,ref:b,props:g,_owner:i.current}}return pu.Fragment=s,pu.jsx=l,pu.jsxs=l,pu}var Gw;function C4(){return Gw||(Gw=1,uv.exports=T4()),uv.exports}var n=C4(),I=M0();const ee=D0(I);var cm={},pv={exports:{}},Xn={},mv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function E4(){return Ww||(Ww=1,(function(t){function e(G,re){var se=G.length;G.push(re);e:for(;0<se;){var U=se-1>>>1,Y=G[U];if(0<i(Y,re))G[U]=re,G[se]=Y,se=U;else break e}}function s(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var re=G[0],se=G.pop();if(se!==re){G[0]=se;e:for(var U=0,Y=G.length,ie=Y>>>1;U<ie;){var X=2*(U+1)-1,pe=G[X],ge=X+1,he=G[ge];if(0>i(pe,se))ge<Y&&0>i(he,pe)?(G[U]=he,G[ge]=se,U=ge):(G[U]=pe,G[X]=se,U=X);else if(ge<Y&&0>i(he,se))G[U]=he,G[ge]=se,U=ge;else break e}}return re}function i(G,re){var se=G.sortIndex-re.sortIndex;return se!==0?se:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],p=1,g=null,y=3,b=!1,S=!1,N=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var re=s(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=G)r(h),re.sortIndex=re.expirationTime,e(u,re);else break;re=s(h)}}function v(G){if(N=!1,k(G),!S)if(s(u)!==null)S=!0,K(_);else{var re=s(h);re!==null&&q(v,re.startTime-G)}}function _(G,re){S=!1,N&&(N=!1,M(w),w=-1),b=!0;var se=y;try{for(k(re),g=s(u);g!==null&&(!(g.expirationTime>re)||G&&!D());){var U=g.callback;if(typeof U=="function"){g.callback=null,y=g.priorityLevel;var Y=U(g.expirationTime<=re);re=t.unstable_now(),typeof Y=="function"?g.callback=Y:g===s(u)&&r(u),k(re)}else r(u);g=s(u)}if(g!==null)var ie=!0;else{var X=s(h);X!==null&&q(v,X.startTime-re),ie=!1}return ie}finally{g=null,y=se,b=!1}}var P=!1,E=null,w=-1,A=5,B=-1;function D(){return!(t.unstable_now()-B<A)}function $(){if(E!==null){var G=t.unstable_now();B=G;var re=!0;try{re=E(!0,G)}finally{re?F():(P=!1,E=null)}}else P=!1}var F;if(typeof L=="function")F=function(){L($)};else if(typeof MessageChannel!="undefined"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=$,F=function(){H.postMessage(null)}}else F=function(){T($,0)};function K(G){E=G,P||(P=!0,F())}function q(G,re){w=T(function(){G(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||b||(S=!0,K(_))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var se=y;y=re;try{return G()}finally{y=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var se=y;y=G;try{return re()}finally{y=se}},t.unstable_scheduleCallback=function(G,re,se){var U=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?U+se:U):se=U,G){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=se+Y,G={id:p++,callback:re,priorityLevel:G,startTime:se,expirationTime:Y,sortIndex:-1},se>U?(G.sortIndex=se,e(h,G),s(u)===null&&G===s(h)&&(N?(M(w),w=-1):N=!0,q(v,se-U))):(G.sortIndex=Y,e(u,G),S||b||(S=!0,K(_))),G},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(G){var re=y;return function(){var se=y;y=re;try{return G.apply(this,arguments)}finally{y=se}}}})(fv)),fv}var qw;function A4(){return qw||(qw=1,mv.exports=E4()),mv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function I4(){if(Kw)return Xn;Kw=1;var t=M0(),e=A4();function s(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(o){return u.call(g,o)?!0:u.call(p,o)?!1:h.test(o)?g[o]=!0:(p[o]=!0,!1)}function b(o,c,m,x){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,m,x){if(c===null||typeof c=="undefined"||b(o,c,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function N(o,c,m,x,j,R,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=j,this.mustUseProperty=m,this.propertyName=o,this.type=c,this.sanitizeURL=R,this.removeEmptyString=V}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){T[o]=new N(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];T[c]=new N(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){T[o]=new N(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){T[o]=new N(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){T[o]=new N(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){T[o]=new N(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){T[o]=new N(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){T[o]=new N(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){T[o]=new N(o,5,!1,o.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function L(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(M,L);T[c]=new N(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(M,L);T[c]=new N(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(M,L);T[c]=new N(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){T[o]=new N(o,1,!1,o.toLowerCase(),null,!1,!1)}),T.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){T[o]=new N(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,c,m,x){var j=T.hasOwnProperty(c)?T[c]:null;(j!==null?j.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,m,j,x)&&(m=null),x||j===null?y(c)&&(m===null?o.removeAttribute(c):o.setAttribute(c,""+m)):j.mustUseProperty?o[j.propertyName]=m===null?j.type===3?!1:"":m:(c=j.attributeName,x=j.attributeNamespace,m===null?o.removeAttribute(c):(j=j.type,m=j===3||j===4&&m===!0?"":""+m,x?o.setAttributeNS(x,c,m):o.setAttribute(c,m))))}var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),P=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),D=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),G=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var se=Object.assign,U;function Y(o){if(U===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var ie=!1;function X(o,c){if(!o||ie)return"";ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ue){var x=ue}Reflect.construct(o,[],c)}else{try{c.call()}catch(ue){x=ue}o.call(c.prototype)}else{try{throw Error()}catch(ue){x=ue}o()}}catch(ue){if(ue&&x&&typeof ue.stack=="string"){for(var j=ue.stack.split(`
`),R=x.stack.split(`
`),V=j.length-1,Q=R.length-1;1<=V&&0<=Q&&j[V]!==R[Q];)Q--;for(;1<=V&&0<=Q;V--,Q--)if(j[V]!==R[Q]){if(V!==1||Q!==1)do if(V--,Q--,0>Q||j[V]!==R[Q]){var J=`
`+j[V].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=V&&0<=Q);break}}}finally{ie=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?Y(o):""}function pe(o){switch(o.tag){case 5:return Y(o.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return o=X(o.type,!1),o;case 11:return o=X(o.type.render,!1),o;case 1:return o=X(o.type,!0),o;default:return""}}function ge(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case P:return"Portal";case A:return"Profiler";case w:return"StrictMode";case F:return"Suspense";case z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case D:return(o.displayName||"Context")+".Consumer";case B:return(o._context.displayName||"Context")+".Provider";case $:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return c=o.displayName||null,c!==null?c:ge(o.type)||"Memo";case K:c=o._payload,o=o._init;try{return ge(o(c))}catch(m){}}return null}function he(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(c);case 8:return c===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function _e(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ce(o){var c=_e(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof m!="undefined"&&typeof m.get=="function"&&typeof m.set=="function"){var j=m.get,R=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(V){x=""+V,R.call(this,V)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ce(o){o._valueTracker||(o._valueTracker=ce(o))}function ye(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return o&&(x=_e(o)?o.checked?"true":"false":o.value),o=x,o!==m?(c.setValue(o),!0):!1}function Ze(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch(c){return o.body}}function it(o,c){var m=c.checked;return se({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m!=null?m:o._wrapperState.initialChecked})}function Rt(o,c){var m=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;m=ve(c.value!=null?c.value:m),o._wrapperState={initialChecked:x,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function rs(o,c){c=c.checked,c!=null&&k(o,"checked",c,!1)}function cs(o,c){rs(o,c);var m=ve(c.value),x=c.type;if(m!=null)x==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?ws(o,c.type,m):c.hasOwnProperty("defaultValue")&&ws(o,c.type,ve(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Os(o,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,m||c===o.value||(o.value=c),o.defaultValue=c}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function ws(o,c,m){(c!=="number"||Ze(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var Ee=Array.isArray;function Pe(o,c,m,x){if(o=o.options,c){c={};for(var j=0;j<m.length;j++)c["$"+m[j]]=!0;for(m=0;m<o.length;m++)j=c.hasOwnProperty("$"+o[m].value),o[m].selected!==j&&(o[m].selected=j),j&&x&&(o[m].defaultSelected=!0)}else{for(m=""+ve(m),c=null,j=0;j<o.length;j++){if(o[j].value===m){o[j].selected=!0,x&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function Ie(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(s(91));return se({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ue(o,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(s(92));if(Ee(m)){if(1<m.length)throw Error(s(93));m=m[0]}c=m}c==null&&(c=""),m=c}o._wrapperState={initialValue:ve(m)}}function nt(o,c){var m=ve(c.value),x=ve(c.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),c.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),x!=null&&(o.defaultValue=""+x)}function pt(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function vt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?vt(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var $t,ar=(function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(c,m,x,j){MSApp.execUnsafeLocalFunction(function(){return o(c,m,x,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=$t.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function bn(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var Vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jr=["Webkit","ms","Moz","O"];Object.keys(Vs).forEach(function(o){jr.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Vs[c]=Vs[o]})});function fi(o,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Vs.hasOwnProperty(o)&&Vs[o]?(""+c).trim():c+"px"}function Oi(o,c){o=o.style;for(var m in c)if(c.hasOwnProperty(m)){var x=m.indexOf("--")===0,j=fi(m,c[m],x);m==="float"&&(m="cssFloat"),x?o.setProperty(m,j):o[m]=j}}var gi=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zr(o,c){if(c){if(gi[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(s(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(s(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(s(61))}if(c.style!=null&&typeof c.style!="object")throw Error(s(62))}}function is(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function Vi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ui=null,In=null,or=null;function zi(o){if(o=Jd(o)){if(typeof Ui!="function")throw Error(s(280));var c=o.stateNode;c&&(c=Sp(c),Ui(o.stateNode,o.type,c))}}function lr(o){In?or?or.push(o):or=[o]:In=o}function Ed(){if(In){var o=In,c=or;if(or=In=null,zi(o),c)for(o=0;o<c.length;o++)zi(c[o])}}function Ro(o,c){return o(c)}function Ad(){}var Hi=!1;function Id(o,c,m){if(Hi)return o(c,m);Hi=!0;try{return Ro(o,c,m)}finally{Hi=!1,(In!==null||or!==null)&&(Ad(),Ed())}}function Ts(o,c){var m=o.stateNode;if(m===null)return null;var x=Sp(m);if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(s(231,c,typeof m));return m}var zl=!1;if(d)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){zl=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch(o){zl=!1}function Po(o,c,m,x,j,R,V,Q,J){var ue=Array.prototype.slice.call(arguments,3);try{c.apply(m,ue)}catch(je){this.onError(je)}}var Lo=!1,Hl=null,Gr=!1,Rd=null,$g={onError:function(o){Lo=!0,Hl=o}};function Gl(o,c,m,x,j,R,V,Q,J){Lo=!1,Hl=null,Po.apply($g,arguments)}function Qh(o,c,m,x,j,R,V,Q,J){if(Gl.apply(this,arguments),Lo){if(Lo){var ue=Hl;Lo=!1,Hl=null}else throw Error(s(198));Gr||(Gr=!0,Rd=ue)}}function Wr(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function Do(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function qr(o){if(Wr(o)!==o)throw Error(s(188))}function Yh(o){var c=o.alternate;if(!c){if(c=Wr(o),c===null)throw Error(s(188));return c!==o?null:o}for(var m=o,x=c;;){var j=m.return;if(j===null)break;var R=j.alternate;if(R===null){if(x=j.return,x!==null){m=x;continue}break}if(j.child===R.child){for(R=j.child;R;){if(R===m)return qr(j),o;if(R===x)return qr(j),c;R=R.sibling}throw Error(s(188))}if(m.return!==x.return)m=j,x=R;else{for(var V=!1,Q=j.child;Q;){if(Q===m){V=!0,m=j,x=R;break}if(Q===x){V=!0,x=j,m=R;break}Q=Q.sibling}if(!V){for(Q=R.child;Q;){if(Q===m){V=!0,m=R,x=j;break}if(Q===x){V=!0,x=R,m=j;break}Q=Q.sibling}if(!V)throw Error(s(189))}}if(m.alternate!==x)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?o:c}function Pd(o){return o=Yh(o),o!==null?Wl(o):null}function Wl(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Wl(o);if(c!==null)return c;o=o.sibling}return null}var ql=e.unstable_scheduleCallback,Ld=e.unstable_cancelCallback,Xh=e.unstable_shouldYield,Og=e.unstable_requestPaint,Zt=e.unstable_now,Jh=e.unstable_getCurrentPriorityLevel,Mo=e.unstable_ImmediatePriority,Aa=e.unstable_UserBlockingPriority,Nr=e.unstable_NormalPriority,Dd=e.unstable_LowPriority,Zh=e.unstable_IdlePriority,Fo=null,cr=null;function ep(o){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Fo,o,void 0,(o.current.flags&128)===128)}catch(c){}}var Rn=Math.clz32?Math.clz32:sp,Md=Math.log,tp=Math.LN2;function sp(o){return o>>>=0,o===0?32:31-(Md(o)/tp|0)|0}var Kl=64,Ql=4194304;function Ia(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Bo(o,c){var m=o.pendingLanes;if(m===0)return 0;var x=0,j=o.suspendedLanes,R=o.pingedLanes,V=m&268435455;if(V!==0){var Q=V&~j;Q!==0?x=Ia(Q):(R&=V,R!==0&&(x=Ia(R)))}else V=m&~j,V!==0?x=Ia(V):R!==0&&(x=Ia(R));if(x===0)return 0;if(c!==0&&c!==x&&(c&j)===0&&(j=x&-x,R=c&-c,j>=R||j===16&&(R&4194240)!==0))return c;if((x&4)!==0&&(x|=m&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)m=31-Rn(c),j=1<<m,x|=o[m],c&=~j;return x}function Vg(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(o,c){for(var m=o.suspendedLanes,x=o.pingedLanes,j=o.expirationTimes,R=o.pendingLanes;0<R;){var V=31-Rn(R),Q=1<<V,J=j[V];J===-1?((Q&m)===0||(Q&x)!==0)&&(j[V]=Vg(Q,c)):J<=c&&(o.expiredLanes|=Q),R&=~Q}}function dr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function $o(){var o=Kl;return Kl<<=1,(Kl&4194240)===0&&(Kl=64),o}function Ra(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function Pa(o,c,m){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Rn(c),o[c]=m}function Yt(o,c){var m=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<m;){var j=31-Rn(m),R=1<<j;c[j]=0,x[j]=-1,o[j]=-1,m&=~R}}function La(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var x=31-Rn(m),j=1<<x;j&c|o[x]&c&&(o[x]|=c),m&=~j}}var Pt=0;function Da(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var np,Yl,rp,ip,ap,Fd=!1,xi=[],tn=null,Kr=null,Qr=null,Ma=new Map,kr=new Map,vi=[],Ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(o,c){switch(o){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ma.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":kr.delete(c.pointerId)}}function Hn(o,c,m,x,j,R){return o===null||o.nativeEvent!==R?(o={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:R,targetContainers:[j]},c!==null&&(c=Jd(c),c!==null&&Yl(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function zg(o,c,m,x,j){switch(c){case"focusin":return tn=Hn(tn,o,c,m,x,j),!0;case"dragenter":return Kr=Hn(Kr,o,c,m,x,j),!0;case"mouseover":return Qr=Hn(Qr,o,c,m,x,j),!0;case"pointerover":var R=j.pointerId;return Ma.set(R,Hn(Ma.get(R)||null,o,c,m,x,j)),!0;case"gotpointercapture":return R=j.pointerId,kr.set(R,Hn(kr.get(R)||null,o,c,m,x,j)),!0}return!1}function lp(o){var c=Ho(o.target);if(c!==null){var m=Wr(c);if(m!==null){if(c=m.tag,c===13){if(c=Do(m),c!==null){o.blockedOn=c,ap(o.priority,function(){rp(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wi(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=Xl(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);Sr=x,m.target.dispatchEvent(x),Sr=null}else return c=Jd(m),c!==null&&Yl(c),o.blockedOn=m,!1;c.shift()}return!0}function Oo(o,c,m){Wi(o)&&m.delete(c)}function cp(){Fd=!1,tn!==null&&Wi(tn)&&(tn=null),Kr!==null&&Wi(Kr)&&(Kr=null),Qr!==null&&Wi(Qr)&&(Qr=null),Ma.forEach(Oo),kr.forEach(Oo)}function Yr(o,c){o.blockedOn===c&&(o.blockedOn=null,Fd||(Fd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cp)))}function Xr(o){function c(j){return Yr(j,o)}if(0<xi.length){Yr(xi[0],o);for(var m=1;m<xi.length;m++){var x=xi[m];x.blockedOn===o&&(x.blockedOn=null)}}for(tn!==null&&Yr(tn,o),Kr!==null&&Yr(Kr,o),Qr!==null&&Yr(Qr,o),Ma.forEach(c),kr.forEach(c),m=0;m<vi.length;m++)x=vi[m],x.blockedOn===o&&(x.blockedOn=null);for(;0<vi.length&&(m=vi[0],m.blockedOn===null);)lp(m),m.blockedOn===null&&vi.shift()}var qi=v.ReactCurrentBatchConfig,Fa=!0;function ds(o,c,m,x){var j=Pt,R=qi.transition;qi.transition=null;try{Pt=1,Bd(o,c,m,x)}finally{Pt=j,qi.transition=R}}function Hg(o,c,m,x){var j=Pt,R=qi.transition;qi.transition=null;try{Pt=4,Bd(o,c,m,x)}finally{Pt=j,qi.transition=R}}function Bd(o,c,m,x){if(Fa){var j=Xl(o,c,m,x);if(j===null)tx(o,c,x,Vo,m),op(o,x);else if(zg(j,o,c,m,x))x.stopPropagation();else if(op(o,x),c&4&&-1<Ug.indexOf(o)){for(;j!==null;){var R=Jd(j);if(R!==null&&np(R),R=Xl(o,c,m,x),R===null&&tx(o,c,x,Vo,m),R===j)break;j=R}j!==null&&x.stopPropagation()}else tx(o,c,x,null,m)}}var Vo=null;function Xl(o,c,m,x){if(Vo=null,o=Vi(x),o=Ho(o),o!==null)if(c=Wr(o),c===null)o=null;else if(m=c.tag,m===13){if(o=Do(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Vo=o,null}function $d(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jh()){case Mo:return 1;case Aa:return 4;case Nr:case Dd:return 16;case Zh:return 536870912;default:return 16}default:return 16}}var ur=null,Jl=null,Gn=null;function Od(){if(Gn)return Gn;var o,c=Jl,m=c.length,x,j="value"in ur?ur.value:ur.textContent,R=j.length;for(o=0;o<m&&c[o]===j[o];o++);var V=m-o;for(x=1;x<=V&&c[m-x]===j[R-x];x++);return Gn=j.slice(o,1<x?1-x:void 0)}function Zl(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function yi(){return!0}function Vd(){return!1}function sn(o){function c(m,x,j,R,V){this._reactName=m,this._targetInst=j,this.type=x,this.nativeEvent=R,this.target=V,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(m=o[Q],this[Q]=m?m(R):R[Q]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?yi:Vd,this.isPropagationStopped=Vd,this}return se(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),c}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=sn(Jr),bi=se({},Jr,{view:0,detail:0}),Gg=sn(bi),tc,Ki,Ba,Uo=se({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ba&&(Ba&&o.type==="mousemove"?(tc=o.screenX-Ba.screenX,Ki=o.screenY-Ba.screenY):Ki=tc=0,Ba=o),tc)},movementY:function(o){return"movementY"in o?o.movementY:Ki}}),sc=sn(Uo),Ud=se({},Uo,{dataTransfer:0}),dp=sn(Ud),nc=se({},bi,{relatedTarget:0}),rc=sn(nc),up=se({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qi=sn(up),hp=se({},Jr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),pp=sn(hp),mp=se({},Jr,{data:0}),zd=sn(mp),ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=fp[o])?!!c[o]:!1}function _i(){return gp}var f=se({},bi,{key:function(o){if(o.key){var c=ic[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Zl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Pn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(o){return o.type==="keypress"?Zl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Zl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),C=sn(f),O=se({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W=sn(O),oe=se({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),me=sn(oe),Me=se({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kt=sn(Me),Us=se({},Uo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Mt=sn(Us),Ks=[9,13,27,32],Ps=d&&"CompositionEvent"in window,Tr=null;d&&"documentMode"in document&&(Tr=document.documentMode);var hr=d&&"TextEvent"in window&&!Tr,zo=d&&(!Ps||Tr&&8<Tr&&11>=Tr),ac=" ",Mb=!1;function Fb(o,c){switch(o){case"keyup":return Ks.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var oc=!1;function jA(o,c){switch(o){case"compositionend":return Bb(c);case"keypress":return c.which!==32?null:(Mb=!0,ac);case"textInput":return o=c.data,o===ac&&Mb?null:o;default:return null}}function SA(o,c){if(oc)return o==="compositionend"||!Ps&&Fb(o,c)?(o=Od(),Gn=Jl=ur=null,oc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return zo&&c.locale!=="ko"?null:c.data;default:return null}}var NA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $b(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!NA[o.type]:c==="textarea"}function Ob(o,c,m,x){lr(x),c=_p(c,"onChange"),0<c.length&&(m=new ec("onChange","change",null,m,x),o.push({event:m,listeners:c}))}var Hd=null,Gd=null;function kA(o){r_(o,0)}function xp(o){var c=hc(o);if(ye(c))return o}function TA(o,c){if(o==="change")return c}var Vb=!1;if(d){var Wg;if(d){var qg="oninput"in document;if(!qg){var Ub=document.createElement("div");Ub.setAttribute("oninput","return;"),qg=typeof Ub.oninput=="function"}Wg=qg}else Wg=!1;Vb=Wg&&(!document.documentMode||9<document.documentMode)}function zb(){Hd&&(Hd.detachEvent("onpropertychange",Hb),Gd=Hd=null)}function Hb(o){if(o.propertyName==="value"&&xp(Gd)){var c=[];Ob(c,Gd,o,Vi(o)),Id(kA,c)}}function CA(o,c,m){o==="focusin"?(zb(),Hd=c,Gd=m,Hd.attachEvent("onpropertychange",Hb)):o==="focusout"&&zb()}function EA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return xp(Gd)}function AA(o,c){if(o==="click")return xp(c)}function IA(o,c){if(o==="input"||o==="change")return xp(c)}function RA(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Zr=typeof Object.is=="function"?Object.is:RA;function Wd(o,c){if(Zr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var j=m[x];if(!u.call(c,j)||!Zr(o[j],c[j]))return!1}return!0}function Gb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wb(o,c){var m=Gb(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=c&&x>=c)return{node:m,offset:c-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Gb(m)}}function qb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?qb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Kb(){for(var o=window,c=Ze();c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch(x){m=!1}if(m)o=c.contentWindow;else break;c=Ze(o.document)}return c}function Kg(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function PA(o){var c=Kb(),m=o.focusedElem,x=o.selectionRange;if(c!==m&&m&&m.ownerDocument&&qb(m.ownerDocument.documentElement,m)){if(x!==null&&Kg(m)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(o,m.value.length);else if(o=(c=m.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=m.textContent.length,R=Math.min(x.start,j);x=x.end===void 0?R:Math.min(x.end,j),!o.extend&&R>x&&(j=x,x=R,R=j),j=Wb(m,R);var V=Wb(m,x);j&&V&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),R>x?(o.addRange(c),o.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),o.addRange(c)))}}for(c=[],o=m;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)o=c[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var LA=d&&"documentMode"in document&&11>=document.documentMode,lc=null,Qg=null,qd=null,Yg=!1;function Qb(o,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Yg||lc==null||lc!==Ze(x)||(x=lc,"selectionStart"in x&&Kg(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),qd&&Wd(qd,x)||(qd=x,x=_p(Qg,"onSelect"),0<x.length&&(c=new ec("onSelect","select",null,c,m),o.push({event:c,listeners:x}),c.target=lc)))}function vp(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var cc={animationend:vp("Animation","AnimationEnd"),animationiteration:vp("Animation","AnimationIteration"),animationstart:vp("Animation","AnimationStart"),transitionend:vp("Transition","TransitionEnd")},Xg={},Yb={};d&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function yp(o){if(Xg[o])return Xg[o];if(!cc[o])return o;var c=cc[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in Yb)return Xg[o]=c[m];return o}var Xb=yp("animationend"),Jb=yp("animationiteration"),Zb=yp("animationstart"),e_=yp("transitionend"),t_=new Map,s_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(o,c){t_.set(o,c),a(c,[o])}for(var Jg=0;Jg<s_.length;Jg++){var Zg=s_[Jg],DA=Zg.toLowerCase(),MA=Zg[0].toUpperCase()+Zg.slice(1);$a(DA,"on"+MA)}$a(Xb,"onAnimationEnd"),$a(Jb,"onAnimationIteration"),$a(Zb,"onAnimationStart"),$a("dblclick","onDoubleClick"),$a("focusin","onFocus"),$a("focusout","onBlur"),$a(e_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kd));function n_(o,c,m){var x=o.type||"unknown-event";o.currentTarget=m,Qh(x,c,void 0,o),o.currentTarget=null}function r_(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],j=x.event;x=x.listeners;e:{var R=void 0;if(c)for(var V=x.length-1;0<=V;V--){var Q=x[V],J=Q.instance,ue=Q.currentTarget;if(Q=Q.listener,J!==R&&j.isPropagationStopped())break e;n_(j,Q,ue),R=J}else for(V=0;V<x.length;V++){if(Q=x[V],J=Q.instance,ue=Q.currentTarget,Q=Q.listener,J!==R&&j.isPropagationStopped())break e;n_(j,Q,ue),R=J}}}if(Gr)throw o=Rd,Gr=!1,Rd=null,o}function as(o,c){var m=c[ox];m===void 0&&(m=c[ox]=new Set);var x=o+"__bubble";m.has(x)||(i_(c,o,2,!1),m.add(x))}function ex(o,c,m){var x=0;c&&(x|=4),i_(m,o,x,c)}var bp="_reactListening"+Math.random().toString(36).slice(2);function Qd(o){if(!o[bp]){o[bp]=!0,r.forEach(function(m){m!=="selectionchange"&&(FA.has(m)||ex(m,!1,o),ex(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[bp]||(c[bp]=!0,ex("selectionchange",!1,c))}}function i_(o,c,m,x){switch($d(c)){case 1:var j=ds;break;case 4:j=Hg;break;default:j=Bd}m=j.bind(null,c,m,o),j=void 0,!zl||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),x?j!==void 0?o.addEventListener(c,m,{capture:!0,passive:j}):o.addEventListener(c,m,!0):j!==void 0?o.addEventListener(c,m,{passive:j}):o.addEventListener(c,m,!1)}function tx(o,c,m,x,j){var R=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var Q=x.stateNode.containerInfo;if(Q===j||Q.nodeType===8&&Q.parentNode===j)break;if(V===4)for(V=x.return;V!==null;){var J=V.tag;if((J===3||J===4)&&(J=V.stateNode.containerInfo,J===j||J.nodeType===8&&J.parentNode===j))return;V=V.return}for(;Q!==null;){if(V=Ho(Q),V===null)return;if(J=V.tag,J===5||J===6){x=R=V;continue e}Q=Q.parentNode}}x=x.return}Id(function(){var ue=R,je=Vi(m),Te=[];e:{var we=t_.get(o);if(we!==void 0){var Ve=ec,Ge=o;switch(o){case"keypress":if(Zl(m)===0)break e;case"keydown":case"keyup":Ve=C;break;case"focusin":Ge="focus",Ve=rc;break;case"focusout":Ge="blur",Ve=rc;break;case"beforeblur":case"afterblur":Ve=rc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=me;break;case Xb:case Jb:case Zb:Ve=Qi;break;case e_:Ve=Kt;break;case"scroll":Ve=Gg;break;case"wheel":Ve=Mt;break;case"copy":case"cut":case"paste":Ve=pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=W}var We=(c&4)!==0,Cs=!We&&o==="scroll",le=We?we!==null?we+"Capture":null:we;We=[];for(var te=ue,de;te!==null;){de=te;var Re=de.stateNode;if(de.tag===5&&Re!==null&&(de=Re,le!==null&&(Re=Ts(te,le),Re!=null&&We.push(Yd(te,Re,de)))),Cs)break;te=te.return}0<We.length&&(we=new Ve(we,Ge,null,m,je),Te.push({event:we,listeners:We}))}}if((c&7)===0){e:{if(we=o==="mouseover"||o==="pointerover",Ve=o==="mouseout"||o==="pointerout",we&&m!==Sr&&(Ge=m.relatedTarget||m.fromElement)&&(Ho(Ge)||Ge[Yi]))break e;if((Ve||we)&&(we=je.window===je?je:(we=je.ownerDocument)?we.defaultView||we.parentWindow:window,Ve?(Ge=m.relatedTarget||m.toElement,Ve=ue,Ge=Ge?Ho(Ge):null,Ge!==null&&(Cs=Wr(Ge),Ge!==Cs||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Ve=null,Ge=ue),Ve!==Ge)){if(We=sc,Re="onMouseLeave",le="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(We=W,Re="onPointerLeave",le="onPointerEnter",te="pointer"),Cs=Ve==null?we:hc(Ve),de=Ge==null?we:hc(Ge),we=new We(Re,te+"leave",Ve,m,je),we.target=Cs,we.relatedTarget=de,Re=null,Ho(je)===ue&&(We=new We(le,te+"enter",Ge,m,je),We.target=de,We.relatedTarget=Cs,Re=We),Cs=Re,Ve&&Ge)t:{for(We=Ve,le=Ge,te=0,de=We;de;de=dc(de))te++;for(de=0,Re=le;Re;Re=dc(Re))de++;for(;0<te-de;)We=dc(We),te--;for(;0<de-te;)le=dc(le),de--;for(;te--;){if(We===le||le!==null&&We===le.alternate)break t;We=dc(We),le=dc(le)}We=null}else We=null;Ve!==null&&a_(Te,we,Ve,We,!1),Ge!==null&&Cs!==null&&a_(Te,Cs,Ge,We,!0)}}e:{if(we=ue?hc(ue):window,Ve=we.nodeName&&we.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&we.type==="file")var Qe=TA;else if($b(we))if(Vb)Qe=IA;else{Qe=EA;var et=CA}else(Ve=we.nodeName)&&Ve.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Qe=AA);if(Qe&&(Qe=Qe(o,ue))){Ob(Te,Qe,m,je);break e}et&&et(o,we,ue),o==="focusout"&&(et=we._wrapperState)&&et.controlled&&we.type==="number"&&ws(we,"number",we.value)}switch(et=ue?hc(ue):window,o){case"focusin":($b(et)||et.contentEditable==="true")&&(lc=et,Qg=ue,qd=null);break;case"focusout":qd=Qg=lc=null;break;case"mousedown":Yg=!0;break;case"contextmenu":case"mouseup":case"dragend":Yg=!1,Qb(Te,m,je);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":Qb(Te,m,je)}var tt;if(Ps)e:{switch(o){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else oc?Fb(o,m)&&(at="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(at="onCompositionStart");at&&(zo&&m.locale!=="ko"&&(oc||at!=="onCompositionStart"?at==="onCompositionEnd"&&oc&&(tt=Od()):(ur=je,Jl="value"in ur?ur.value:ur.textContent,oc=!0)),et=_p(ue,at),0<et.length&&(at=new zd(at,o,null,m,je),Te.push({event:at,listeners:et}),tt?at.data=tt:(tt=Bb(m),tt!==null&&(at.data=tt)))),(tt=hr?jA(o,m):SA(o,m))&&(ue=_p(ue,"onBeforeInput"),0<ue.length&&(je=new zd("onBeforeInput","beforeinput",null,m,je),Te.push({event:je,listeners:ue}),je.data=tt))}r_(Te,c)})}function Yd(o,c,m){return{instance:o,listener:c,currentTarget:m}}function _p(o,c){for(var m=c+"Capture",x=[];o!==null;){var j=o,R=j.stateNode;j.tag===5&&R!==null&&(j=R,R=Ts(o,m),R!=null&&x.unshift(Yd(o,R,j)),R=Ts(o,c),R!=null&&x.push(Yd(o,R,j))),o=o.return}return x}function dc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function a_(o,c,m,x,j){for(var R=c._reactName,V=[];m!==null&&m!==x;){var Q=m,J=Q.alternate,ue=Q.stateNode;if(J!==null&&J===x)break;Q.tag===5&&ue!==null&&(Q=ue,j?(J=Ts(m,R),J!=null&&V.unshift(Yd(m,J,Q))):j||(J=Ts(m,R),J!=null&&V.push(Yd(m,J,Q)))),m=m.return}V.length!==0&&o.push({event:c,listeners:V})}var BA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function o_(o){return(typeof o=="string"?o:""+o).replace(BA,`
`).replace($A,"")}function wp(o,c,m){if(c=o_(c),o_(o)!==c&&m)throw Error(s(425))}function jp(){}var sx=null,nx=null;function rx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof l_!="undefined"?function(o){return l_.resolve(null).then(o).catch(UA)}:ix;function UA(o){setTimeout(function(){throw o})}function ax(o,c){var m=c,x=0;do{var j=m.nextSibling;if(o.removeChild(m),j&&j.nodeType===8)if(m=j.data,m==="/$"){if(x===0){o.removeChild(j),Xr(c);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=j}while(m);Xr(c)}function Oa(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function c_(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}var uc=Math.random().toString(36).slice(2),wi="__reactFiber$"+uc,Xd="__reactProps$"+uc,Yi="__reactContainer$"+uc,ox="__reactEvents$"+uc,zA="__reactListeners$"+uc,HA="__reactHandles$"+uc;function Ho(o){var c=o[wi];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Yi]||m[wi]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=c_(o);o!==null;){if(m=o[wi])return m;o=c_(o)}return c}o=m,m=o.parentNode}return null}function Jd(o){return o=o[wi]||o[Yi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function hc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(s(33))}function Sp(o){return o[Xd]||null}var lx=[],pc=-1;function Va(o){return{current:o}}function os(o){0>pc||(o.current=lx[pc],lx[pc]=null,pc--)}function es(o,c){pc++,lx[pc]=o.current,o.current=c}var Ua={},_n=Va(Ua),Wn=Va(!1),Go=Ua;function mc(o,c){var m=o.type.contextTypes;if(!m)return Ua;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var j={},R;for(R in m)j[R]=c[R];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function qn(o){return o=o.childContextTypes,o!=null}function Np(){os(Wn),os(_n)}function d_(o,c,m){if(_n.current!==Ua)throw Error(s(168));es(_n,c),es(Wn,m)}function u_(o,c,m){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var j in x)if(!(j in c))throw Error(s(108,he(o)||"Unknown",j));return se({},m,x)}function kp(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ua,Go=_n.current,es(_n,o),es(Wn,Wn.current),!0}function h_(o,c,m){var x=o.stateNode;if(!x)throw Error(s(169));m?(o=u_(o,c,Go),x.__reactInternalMemoizedMergedChildContext=o,os(Wn),os(_n),es(_n,o)):os(Wn),es(Wn,m)}var Xi=null,Tp=!1,cx=!1;function p_(o){Xi===null?Xi=[o]:Xi.push(o)}function GA(o){Tp=!0,p_(o)}function za(){if(!cx&&Xi!==null){cx=!0;var o=0,c=Pt;try{var m=Xi;for(Pt=1;o<m.length;o++){var x=m[o];do x=x(!0);while(x!==null)}Xi=null,Tp=!1}catch(j){throw Xi!==null&&(Xi=Xi.slice(o+1)),ql(Mo,za),j}finally{Pt=c,cx=!1}}return null}var fc=[],gc=0,Cp=null,Ep=0,Cr=[],Er=0,Wo=null,Ji=1,Zi="";function qo(o,c){fc[gc++]=Ep,fc[gc++]=Cp,Cp=o,Ep=c}function m_(o,c,m){Cr[Er++]=Ji,Cr[Er++]=Zi,Cr[Er++]=Wo,Wo=o;var x=Ji;o=Zi;var j=32-Rn(x)-1;x&=~(1<<j),m+=1;var R=32-Rn(c)+j;if(30<R){var V=j-j%5;R=(x&(1<<V)-1).toString(32),x>>=V,j-=V,Ji=1<<32-Rn(c)+j|m<<j|x,Zi=R+o}else Ji=1<<R|m<<j|x,Zi=o}function dx(o){o.return!==null&&(qo(o,1),m_(o,1,0))}function ux(o){for(;o===Cp;)Cp=fc[--gc],fc[gc]=null,Ep=fc[--gc],fc[gc]=null;for(;o===Wo;)Wo=Cr[--Er],Cr[Er]=null,Zi=Cr[--Er],Cr[Er]=null,Ji=Cr[--Er],Cr[Er]=null}var pr=null,mr=null,us=!1,ei=null;function f_(o,c){var m=Pr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=o,c=o.deletions,c===null?(o.deletions=[m],o.flags|=16):c.push(m)}function g_(o,c){switch(o.tag){case 5:var m=o.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,pr=o,mr=Oa(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,pr=o,mr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Wo!==null?{id:Ji,overflow:Zi}:null,o.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Pr(18,null,null,0),m.stateNode=c,m.return=o,o.child=m,pr=o,mr=null,!0):!1;default:return!1}}function hx(o){return(o.mode&1)!==0&&(o.flags&128)===0}function px(o){if(us){var c=mr;if(c){var m=c;if(!g_(o,c)){if(hx(o))throw Error(s(418));c=Oa(m.nextSibling);var x=pr;c&&g_(o,c)?f_(x,m):(o.flags=o.flags&-4097|2,us=!1,pr=o)}}else{if(hx(o))throw Error(s(418));o.flags=o.flags&-4097|2,us=!1,pr=o}}}function x_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;pr=o}function Ap(o){if(o!==pr)return!1;if(!us)return x_(o),us=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!rx(o.type,o.memoizedProps)),c&&(c=mr)){if(hx(o))throw v_(),Error(s(418));for(;c;)f_(o,c),c=Oa(c.nextSibling)}if(x_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(c===0){mr=Oa(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}o=o.nextSibling}mr=null}}else mr=pr?Oa(o.stateNode.nextSibling):null;return!0}function v_(){for(var o=mr;o;)o=Oa(o.nextSibling)}function xc(){mr=pr=null,us=!1}function mx(o){ei===null?ei=[o]:ei.push(o)}var WA=v.ReactCurrentBatchConfig;function Zd(o,c,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(s(309));var x=m.stateNode}if(!x)throw Error(s(147,o));var j=x,R=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===R?c.ref:(c=function(V){var Q=j.refs;V===null?delete Q[R]:Q[R]=V},c._stringRef=R,c)}if(typeof o!="string")throw Error(s(284));if(!m._owner)throw Error(s(290,o))}return o}function Ip(o,c){throw o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function y_(o){var c=o._init;return c(o._payload)}function b_(o){function c(le,te){if(o){var de=le.deletions;de===null?(le.deletions=[te],le.flags|=16):de.push(te)}}function m(le,te){if(!o)return null;for(;te!==null;)c(le,te),te=te.sibling;return null}function x(le,te){for(le=new Map;te!==null;)te.key!==null?le.set(te.key,te):le.set(te.index,te),te=te.sibling;return le}function j(le,te){return le=Xa(le,te),le.index=0,le.sibling=null,le}function R(le,te,de){return le.index=de,o?(de=le.alternate,de!==null?(de=de.index,de<te?(le.flags|=2,te):de):(le.flags|=2,te)):(le.flags|=1048576,te)}function V(le){return o&&le.alternate===null&&(le.flags|=2),le}function Q(le,te,de,Re){return te===null||te.tag!==6?(te=iv(de,le.mode,Re),te.return=le,te):(te=j(te,de),te.return=le,te)}function J(le,te,de,Re){var Qe=de.type;return Qe===E?je(le,te,de.props.children,Re,de.key):te!==null&&(te.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===K&&y_(Qe)===te.type)?(Re=j(te,de.props),Re.ref=Zd(le,te,de),Re.return=le,Re):(Re=tm(de.type,de.key,de.props,null,le.mode,Re),Re.ref=Zd(le,te,de),Re.return=le,Re)}function ue(le,te,de,Re){return te===null||te.tag!==4||te.stateNode.containerInfo!==de.containerInfo||te.stateNode.implementation!==de.implementation?(te=av(de,le.mode,Re),te.return=le,te):(te=j(te,de.children||[]),te.return=le,te)}function je(le,te,de,Re,Qe){return te===null||te.tag!==7?(te=tl(de,le.mode,Re,Qe),te.return=le,te):(te=j(te,de),te.return=le,te)}function Te(le,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return te=iv(""+te,le.mode,de),te.return=le,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return de=tm(te.type,te.key,te.props,null,le.mode,de),de.ref=Zd(le,null,te),de.return=le,de;case P:return te=av(te,le.mode,de),te.return=le,te;case K:var Re=te._init;return Te(le,Re(te._payload),de)}if(Ee(te)||re(te))return te=tl(te,le.mode,de,null),te.return=le,te;Ip(le,te)}return null}function we(le,te,de,Re){var Qe=te!==null?te.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return Qe!==null?null:Q(le,te,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case _:return de.key===Qe?J(le,te,de,Re):null;case P:return de.key===Qe?ue(le,te,de,Re):null;case K:return Qe=de._init,we(le,te,Qe(de._payload),Re)}if(Ee(de)||re(de))return Qe!==null?null:je(le,te,de,Re,null);Ip(le,de)}return null}function Ve(le,te,de,Re,Qe){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return le=le.get(de)||null,Q(te,le,""+Re,Qe);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:return le=le.get(Re.key===null?de:Re.key)||null,J(te,le,Re,Qe);case P:return le=le.get(Re.key===null?de:Re.key)||null,ue(te,le,Re,Qe);case K:var et=Re._init;return Ve(le,te,de,et(Re._payload),Qe)}if(Ee(Re)||re(Re))return le=le.get(de)||null,je(te,le,Re,Qe,null);Ip(te,Re)}return null}function Ge(le,te,de,Re){for(var Qe=null,et=null,tt=te,at=te=0,Xs=null;tt!==null&&at<de.length;at++){tt.index>at?(Xs=tt,tt=null):Xs=tt.sibling;var zt=we(le,tt,de[at],Re);if(zt===null){tt===null&&(tt=Xs);break}o&&tt&&zt.alternate===null&&c(le,tt),te=R(zt,te,at),et===null?Qe=zt:et.sibling=zt,et=zt,tt=Xs}if(at===de.length)return m(le,tt),us&&qo(le,at),Qe;if(tt===null){for(;at<de.length;at++)tt=Te(le,de[at],Re),tt!==null&&(te=R(tt,te,at),et===null?Qe=tt:et.sibling=tt,et=tt);return us&&qo(le,at),Qe}for(tt=x(le,tt);at<de.length;at++)Xs=Ve(tt,le,at,de[at],Re),Xs!==null&&(o&&Xs.alternate!==null&&tt.delete(Xs.key===null?at:Xs.key),te=R(Xs,te,at),et===null?Qe=Xs:et.sibling=Xs,et=Xs);return o&&tt.forEach(function(Ja){return c(le,Ja)}),us&&qo(le,at),Qe}function We(le,te,de,Re){var Qe=re(de);if(typeof Qe!="function")throw Error(s(150));if(de=Qe.call(de),de==null)throw Error(s(151));for(var et=Qe=null,tt=te,at=te=0,Xs=null,zt=de.next();tt!==null&&!zt.done;at++,zt=de.next()){tt.index>at?(Xs=tt,tt=null):Xs=tt.sibling;var Ja=we(le,tt,zt.value,Re);if(Ja===null){tt===null&&(tt=Xs);break}o&&tt&&Ja.alternate===null&&c(le,tt),te=R(Ja,te,at),et===null?Qe=Ja:et.sibling=Ja,et=Ja,tt=Xs}if(zt.done)return m(le,tt),us&&qo(le,at),Qe;if(tt===null){for(;!zt.done;at++,zt=de.next())zt=Te(le,zt.value,Re),zt!==null&&(te=R(zt,te,at),et===null?Qe=zt:et.sibling=zt,et=zt);return us&&qo(le,at),Qe}for(tt=x(le,tt);!zt.done;at++,zt=de.next())zt=Ve(tt,le,at,zt.value,Re),zt!==null&&(o&&zt.alternate!==null&&tt.delete(zt.key===null?at:zt.key),te=R(zt,te,at),et===null?Qe=zt:et.sibling=zt,et=zt);return o&&tt.forEach(function(N4){return c(le,N4)}),us&&qo(le,at),Qe}function Cs(le,te,de,Re){if(typeof de=="object"&&de!==null&&de.type===E&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case _:e:{for(var Qe=de.key,et=te;et!==null;){if(et.key===Qe){if(Qe=de.type,Qe===E){if(et.tag===7){m(le,et.sibling),te=j(et,de.props.children),te.return=le,le=te;break e}}else if(et.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===K&&y_(Qe)===et.type){m(le,et.sibling),te=j(et,de.props),te.ref=Zd(le,et,de),te.return=le,le=te;break e}m(le,et);break}else c(le,et);et=et.sibling}de.type===E?(te=tl(de.props.children,le.mode,Re,de.key),te.return=le,le=te):(Re=tm(de.type,de.key,de.props,null,le.mode,Re),Re.ref=Zd(le,te,de),Re.return=le,le=Re)}return V(le);case P:e:{for(et=de.key;te!==null;){if(te.key===et)if(te.tag===4&&te.stateNode.containerInfo===de.containerInfo&&te.stateNode.implementation===de.implementation){m(le,te.sibling),te=j(te,de.children||[]),te.return=le,le=te;break e}else{m(le,te);break}else c(le,te);te=te.sibling}te=av(de,le.mode,Re),te.return=le,le=te}return V(le);case K:return et=de._init,Cs(le,te,et(de._payload),Re)}if(Ee(de))return Ge(le,te,de,Re);if(re(de))return We(le,te,de,Re);Ip(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,te!==null&&te.tag===6?(m(le,te.sibling),te=j(te,de),te.return=le,le=te):(m(le,te),te=iv(de,le.mode,Re),te.return=le,le=te),V(le)):m(le,te)}return Cs}var vc=b_(!0),__=b_(!1),Rp=Va(null),Pp=null,yc=null,fx=null;function gx(){fx=yc=Pp=null}function xx(o){var c=Rp.current;os(Rp),o._currentValue=c}function vx(o,c,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===m)break;o=o.return}}function bc(o,c){Pp=o,fx=yc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Kn=!0),o.firstContext=null)}function Ar(o){var c=o._currentValue;if(fx!==o)if(o={context:o,memoizedValue:c,next:null},yc===null){if(Pp===null)throw Error(s(308));yc=o,Pp.dependencies={lanes:0,firstContext:o}}else yc=yc.next=o;return c}var Ko=null;function yx(o){Ko===null?Ko=[o]:Ko.push(o)}function w_(o,c,m,x){var j=c.interleaved;return j===null?(m.next=m,yx(c)):(m.next=j.next,j.next=m),c.interleaved=m,ea(o,x)}function ea(o,c){o.lanes|=c;var m=o.alternate;for(m!==null&&(m.lanes|=c),m=o,o=o.return;o!==null;)o.childLanes|=c,m=o.alternate,m!==null&&(m.childLanes|=c),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Ha=!1;function bx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j_(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ta(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Ga(o,c,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Ot&2)!==0){var j=x.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),x.pending=c,ea(o,m)}return j=x.interleaved,j===null?(c.next=c,yx(x)):(c.next=j.next,j.next=c),x.interleaved=c,ea(o,m)}function Lp(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,La(o,m)}}function S_(o,c){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var j=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var V={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};R===null?j=R=V:R=R.next=V,m=m.next}while(m!==null);R===null?j=R=c:R=R.next=c}else j=R=c;m={baseState:x.baseState,firstBaseUpdate:j,lastBaseUpdate:R,shared:x.shared,effects:x.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function Dp(o,c,m,x){var j=o.updateQueue;Ha=!1;var R=j.firstBaseUpdate,V=j.lastBaseUpdate,Q=j.shared.pending;if(Q!==null){j.shared.pending=null;var J=Q,ue=J.next;J.next=null,V===null?R=ue:V.next=ue,V=J;var je=o.alternate;je!==null&&(je=je.updateQueue,Q=je.lastBaseUpdate,Q!==V&&(Q===null?je.firstBaseUpdate=ue:Q.next=ue,je.lastBaseUpdate=J))}if(R!==null){var Te=j.baseState;V=0,je=ue=J=null,Q=R;do{var we=Q.lane,Ve=Q.eventTime;if((x&we)===we){je!==null&&(je=je.next={eventTime:Ve,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Ge=o,We=Q;switch(we=c,Ve=m,We.tag){case 1:if(Ge=We.payload,typeof Ge=="function"){Te=Ge.call(Ve,Te,we);break e}Te=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=We.payload,we=typeof Ge=="function"?Ge.call(Ve,Te,we):Ge,we==null)break e;Te=se({},Te,we);break e;case 2:Ha=!0}}Q.callback!==null&&Q.lane!==0&&(o.flags|=64,we=j.effects,we===null?j.effects=[Q]:we.push(Q))}else Ve={eventTime:Ve,lane:we,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},je===null?(ue=je=Ve,J=Te):je=je.next=Ve,V|=we;if(Q=Q.next,Q===null){if(Q=j.shared.pending,Q===null)break;we=Q,Q=we.next,we.next=null,j.lastBaseUpdate=we,j.shared.pending=null}}while(!0);if(je===null&&(J=Te),j.baseState=J,j.firstBaseUpdate=ue,j.lastBaseUpdate=je,c=j.shared.interleaved,c!==null){j=c;do V|=j.lane,j=j.next;while(j!==c)}else R===null&&(j.shared.lanes=0);Xo|=V,o.lanes=V,o.memoizedState=Te}}function N_(o,c,m){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],j=x.callback;if(j!==null){if(x.callback=null,x=m,typeof j!="function")throw Error(s(191,j));j.call(x)}}}var eu={},ji=Va(eu),tu=Va(eu),su=Va(eu);function Qo(o){if(o===eu)throw Error(s(174));return o}function _x(o,c){switch(es(su,c),es(tu,o),es(ji,eu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ut(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Ut(c,o)}os(ji),es(ji,c)}function _c(){os(ji),os(tu),os(su)}function k_(o){Qo(su.current);var c=Qo(ji.current),m=Ut(c,o.type);c!==m&&(es(tu,o),es(ji,m))}function wx(o){tu.current===o&&(os(ji),os(tu))}var gs=Va(0);function Mp(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jx=[];function Sx(){for(var o=0;o<jx.length;o++)jx[o]._workInProgressVersionPrimary=null;jx.length=0}var Fp=v.ReactCurrentDispatcher,Nx=v.ReactCurrentBatchConfig,Yo=0,xs=null,zs=null,Qs=null,Bp=!1,nu=!1,ru=0,qA=0;function wn(){throw Error(s(321))}function kx(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!Zr(o[m],c[m]))return!1;return!0}function Tx(o,c,m,x,j,R){if(Yo=R,xs=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Fp.current=o===null||o.memoizedState===null?XA:JA,o=m(x,j),nu){R=0;do{if(nu=!1,ru=0,25<=R)throw Error(s(301));R+=1,Qs=zs=null,c.updateQueue=null,Fp.current=ZA,o=m(x,j)}while(nu)}if(Fp.current=Vp,c=zs!==null&&zs.next!==null,Yo=0,Qs=zs=xs=null,Bp=!1,c)throw Error(s(300));return o}function Cx(){var o=ru!==0;return ru=0,o}function Si(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?xs.memoizedState=Qs=o:Qs=Qs.next=o,Qs}function Ir(){if(zs===null){var o=xs.alternate;o=o!==null?o.memoizedState:null}else o=zs.next;var c=Qs===null?xs.memoizedState:Qs.next;if(c!==null)Qs=c,zs=o;else{if(o===null)throw Error(s(310));zs=o,o={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},Qs===null?xs.memoizedState=Qs=o:Qs=Qs.next=o}return Qs}function iu(o,c){return typeof c=="function"?c(o):c}function Ex(o){var c=Ir(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=o;var x=zs,j=x.baseQueue,R=m.pending;if(R!==null){if(j!==null){var V=j.next;j.next=R.next,R.next=V}x.baseQueue=j=R,m.pending=null}if(j!==null){R=j.next,x=x.baseState;var Q=V=null,J=null,ue=R;do{var je=ue.lane;if((Yo&je)===je)J!==null&&(J=J.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),x=ue.hasEagerState?ue.eagerState:o(x,ue.action);else{var Te={lane:je,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};J===null?(Q=J=Te,V=x):J=J.next=Te,xs.lanes|=je,Xo|=je}ue=ue.next}while(ue!==null&&ue!==R);J===null?V=x:J.next=Q,Zr(x,c.memoizedState)||(Kn=!0),c.memoizedState=x,c.baseState=V,c.baseQueue=J,m.lastRenderedState=x}if(o=m.interleaved,o!==null){j=o;do R=j.lane,xs.lanes|=R,Xo|=R,j=j.next;while(j!==o)}else j===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Ax(o){var c=Ir(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=o;var x=m.dispatch,j=m.pending,R=c.memoizedState;if(j!==null){m.pending=null;var V=j=j.next;do R=o(R,V.action),V=V.next;while(V!==j);Zr(R,c.memoizedState)||(Kn=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),m.lastRenderedState=R}return[R,x]}function T_(){}function C_(o,c){var m=xs,x=Ir(),j=c(),R=!Zr(x.memoizedState,j);if(R&&(x.memoizedState=j,Kn=!0),x=x.queue,Ix(I_.bind(null,m,x,o),[o]),x.getSnapshot!==c||R||Qs!==null&&Qs.memoizedState.tag&1){if(m.flags|=2048,au(9,A_.bind(null,m,x,j,c),void 0,null),Ys===null)throw Error(s(349));(Yo&30)!==0||E_(m,c,j)}return j}function E_(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=xs.updateQueue,c===null?(c={lastEffect:null,stores:null},xs.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function A_(o,c,m,x){c.value=m,c.getSnapshot=x,R_(c)&&P_(o)}function I_(o,c,m){return m(function(){R_(c)&&P_(o)})}function R_(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!Zr(o,m)}catch(x){return!0}}function P_(o){var c=ea(o,1);c!==null&&ri(c,o,1,-1)}function L_(o){var c=Si();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:o},c.queue=o,o=o.dispatch=YA.bind(null,xs,o),[c.memoizedState,o]}function au(o,c,m,x){return o={tag:o,create:c,destroy:m,deps:x,next:null},c=xs.updateQueue,c===null?(c={lastEffect:null,stores:null},xs.updateQueue=c,c.lastEffect=o.next=o):(m=c.lastEffect,m===null?c.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,c.lastEffect=o)),o}function D_(){return Ir().memoizedState}function $p(o,c,m,x){var j=Si();xs.flags|=o,j.memoizedState=au(1|c,m,void 0,x===void 0?null:x)}function Op(o,c,m,x){var j=Ir();x=x===void 0?null:x;var R=void 0;if(zs!==null){var V=zs.memoizedState;if(R=V.destroy,x!==null&&kx(x,V.deps)){j.memoizedState=au(c,m,R,x);return}}xs.flags|=o,j.memoizedState=au(1|c,m,R,x)}function M_(o,c){return $p(8390656,8,o,c)}function Ix(o,c){return Op(2048,8,o,c)}function F_(o,c){return Op(4,2,o,c)}function B_(o,c){return Op(4,4,o,c)}function $_(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function O_(o,c,m){return m=m!=null?m.concat([o]):null,Op(4,4,$_.bind(null,c,o),m)}function Rx(){}function V_(o,c){var m=Ir();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&kx(c,x[1])?x[0]:(m.memoizedState=[o,c],o)}function U_(o,c){var m=Ir();c=c===void 0?null:c;var x=m.memoizedState;return x!==null&&c!==null&&kx(c,x[1])?x[0]:(o=o(),m.memoizedState=[o,c],o)}function z_(o,c,m){return(Yo&21)===0?(o.baseState&&(o.baseState=!1,Kn=!0),o.memoizedState=m):(Zr(m,c)||(m=$o(),xs.lanes|=m,Xo|=m,o.baseState=!0),c)}function KA(o,c){var m=Pt;Pt=m!==0&&4>m?m:4,o(!0);var x=Nx.transition;Nx.transition={};try{o(!1),c()}finally{Pt=m,Nx.transition=x}}function H_(){return Ir().memoizedState}function QA(o,c,m){var x=Qa(o);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},G_(o))W_(c,m);else if(m=w_(o,c,m,x),m!==null){var j=Dn();ri(m,o,x,j),q_(m,c,x)}}function YA(o,c,m){var x=Qa(o),j={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(G_(o))W_(c,j);else{var R=o.alternate;if(o.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var V=c.lastRenderedState,Q=R(V,m);if(j.hasEagerState=!0,j.eagerState=Q,Zr(Q,V)){var J=c.interleaved;J===null?(j.next=j,yx(c)):(j.next=J.next,J.next=j),c.interleaved=j;return}}catch(ue){}finally{}m=w_(o,c,j,x),m!==null&&(j=Dn(),ri(m,o,x,j),q_(m,c,x))}}function G_(o){var c=o.alternate;return o===xs||c!==null&&c===xs}function W_(o,c){nu=Bp=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function q_(o,c,m){if((m&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,La(o,m)}}var Vp={readContext:Ar,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},XA={readContext:Ar,useCallback:function(o,c){return Si().memoizedState=[o,c===void 0?null:c],o},useContext:Ar,useEffect:M_,useImperativeHandle:function(o,c,m){return m=m!=null?m.concat([o]):null,$p(4194308,4,$_.bind(null,c,o),m)},useLayoutEffect:function(o,c){return $p(4194308,4,o,c)},useInsertionEffect:function(o,c){return $p(4,2,o,c)},useMemo:function(o,c){var m=Si();return c=c===void 0?null:c,o=o(),m.memoizedState=[o,c],o},useReducer:function(o,c,m){var x=Si();return c=m!==void 0?m(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=QA.bind(null,xs,o),[x.memoizedState,o]},useRef:function(o){var c=Si();return o={current:o},c.memoizedState=o},useState:L_,useDebugValue:Rx,useDeferredValue:function(o){return Si().memoizedState=o},useTransition:function(){var o=L_(!1),c=o[0];return o=KA.bind(null,o[1]),Si().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,m){var x=xs,j=Si();if(us){if(m===void 0)throw Error(s(407));m=m()}else{if(m=c(),Ys===null)throw Error(s(349));(Yo&30)!==0||E_(x,c,m)}j.memoizedState=m;var R={value:m,getSnapshot:c};return j.queue=R,M_(I_.bind(null,x,R,o),[o]),x.flags|=2048,au(9,A_.bind(null,x,R,m,c),void 0,null),m},useId:function(){var o=Si(),c=Ys.identifierPrefix;if(us){var m=Zi,x=Ji;m=(x&~(1<<32-Rn(x)-1)).toString(32)+m,c=":"+c+"R"+m,m=ru++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=qA++,c=":"+c+"r"+m.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},JA={readContext:Ar,useCallback:V_,useContext:Ar,useEffect:Ix,useImperativeHandle:O_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:U_,useReducer:Ex,useRef:D_,useState:function(){return Ex(iu)},useDebugValue:Rx,useDeferredValue:function(o){var c=Ir();return z_(c,zs.memoizedState,o)},useTransition:function(){var o=Ex(iu)[0],c=Ir().memoizedState;return[o,c]},useMutableSource:T_,useSyncExternalStore:C_,useId:H_,unstable_isNewReconciler:!1},ZA={readContext:Ar,useCallback:V_,useContext:Ar,useEffect:Ix,useImperativeHandle:O_,useInsertionEffect:F_,useLayoutEffect:B_,useMemo:U_,useReducer:Ax,useRef:D_,useState:function(){return Ax(iu)},useDebugValue:Rx,useDeferredValue:function(o){var c=Ir();return zs===null?c.memoizedState=o:z_(c,zs.memoizedState,o)},useTransition:function(){var o=Ax(iu)[0],c=Ir().memoizedState;return[o,c]},useMutableSource:T_,useSyncExternalStore:C_,useId:H_,unstable_isNewReconciler:!1};function ti(o,c){if(o&&o.defaultProps){c=se({},c),o=o.defaultProps;for(var m in o)c[m]===void 0&&(c[m]=o[m]);return c}return c}function Px(o,c,m,x){c=o.memoizedState,m=m(x,c),m=m==null?c:se({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Up={isMounted:function(o){return(o=o._reactInternals)?Wr(o)===o:!1},enqueueSetState:function(o,c,m){o=o._reactInternals;var x=Dn(),j=Qa(o),R=ta(x,j);R.payload=c,m!=null&&(R.callback=m),c=Ga(o,R,j),c!==null&&(ri(c,o,j,x),Lp(c,o,j))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var x=Dn(),j=Qa(o),R=ta(x,j);R.tag=1,R.payload=c,m!=null&&(R.callback=m),c=Ga(o,R,j),c!==null&&(ri(c,o,j,x),Lp(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=Dn(),x=Qa(o),j=ta(m,x);j.tag=2,c!=null&&(j.callback=c),c=Ga(o,j,x),c!==null&&(ri(c,o,x,m),Lp(c,o,x))}};function K_(o,c,m,x,j,R,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,R,V):c.prototype&&c.prototype.isPureReactComponent?!Wd(m,x)||!Wd(j,R):!0}function Q_(o,c,m){var x=!1,j=Ua,R=c.contextType;return typeof R=="object"&&R!==null?R=Ar(R):(j=qn(c)?Go:_n.current,x=c.contextTypes,R=(x=x!=null)?mc(o,j):Ua),c=new c(m,R),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Up,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=R),c}function Y_(o,c,m,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==o&&Up.enqueueReplaceState(c,c.state,null)}function Lx(o,c,m,x){var j=o.stateNode;j.props=m,j.state=o.memoizedState,j.refs={},bx(o);var R=c.contextType;typeof R=="object"&&R!==null?j.context=Ar(R):(R=qn(c)?Go:_n.current,j.context=mc(o,R)),j.state=o.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(Px(o,c,R,m),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&Up.enqueueReplaceState(j,j.state,null),Dp(o,m,j,x),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function wc(o,c){try{var m="",x=c;do m+=pe(x),x=x.return;while(x);var j=m}catch(R){j=`
Error generating stack: `+R.message+`
`+R.stack}return{value:o,source:c,stack:j,digest:null}}function Dx(o,c,m){return{value:o,source:null,stack:m!=null?m:null,digest:c!=null?c:null}}function Mx(o,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var e4=typeof WeakMap=="function"?WeakMap:Map;function X_(o,c,m){m=ta(-1,m),m.tag=3,m.payload={element:null};var x=c.value;return m.callback=function(){Qp||(Qp=!0,Xx=x),Mx(o,c)},m}function J_(o,c,m){m=ta(-1,m),m.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var j=c.value;m.payload=function(){return x(j)},m.callback=function(){Mx(o,c)}}var R=o.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(m.callback=function(){Mx(o,c),typeof x!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),m}function Z_(o,c,m){var x=o.pingCache;if(x===null){x=o.pingCache=new e4;var j=new Set;x.set(c,j)}else j=x.get(c),j===void 0&&(j=new Set,x.set(c,j));j.has(m)||(j.add(m),o=m4.bind(null,o,c,m),c.then(o,o))}function ew(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function tw(o,c,m,x,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=ta(-1,1),c.tag=2,Ga(m,c,1))),m.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var t4=v.ReactCurrentOwner,Kn=!1;function Ln(o,c,m,x){c.child=o===null?__(c,null,m,x):vc(c,o.child,m,x)}function sw(o,c,m,x,j){m=m.render;var R=c.ref;return bc(c,j),x=Tx(o,c,m,x,R,j),m=Cx(),o!==null&&!Kn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,sa(o,c,j)):(us&&m&&dx(c),c.flags|=1,Ln(o,c,x,j),c.child)}function nw(o,c,m,x,j){if(o===null){var R=m.type;return typeof R=="function"&&!rv(R)&&R.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=R,rw(o,c,R,x,j)):(o=tm(m.type,null,x,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(R=o.child,(o.lanes&j)===0){var V=R.memoizedProps;if(m=m.compare,m=m!==null?m:Wd,m(V,x)&&o.ref===c.ref)return sa(o,c,j)}return c.flags|=1,o=Xa(R,x),o.ref=c.ref,o.return=c,c.child=o}function rw(o,c,m,x,j){if(o!==null){var R=o.memoizedProps;if(Wd(R,x)&&o.ref===c.ref)if(Kn=!1,c.pendingProps=x=R,(o.lanes&j)!==0)(o.flags&131072)!==0&&(Kn=!0);else return c.lanes=o.lanes,sa(o,c,j)}return Fx(o,c,m,x,j)}function iw(o,c,m){var x=c.pendingProps,j=x.children,R=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},es(Sc,fr),fr|=m;else{if((m&1073741824)===0)return o=R!==null?R.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,es(Sc,fr),fr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=R!==null?R.baseLanes:m,es(Sc,fr),fr|=x}else R!==null?(x=R.baseLanes|m,c.memoizedState=null):x=m,es(Sc,fr),fr|=x;return Ln(o,c,j,m),c.child}function aw(o,c){var m=c.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Fx(o,c,m,x,j){var R=qn(m)?Go:_n.current;return R=mc(c,R),bc(c,j),m=Tx(o,c,m,x,R,j),x=Cx(),o!==null&&!Kn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,sa(o,c,j)):(us&&x&&dx(c),c.flags|=1,Ln(o,c,m,j),c.child)}function ow(o,c,m,x,j){if(qn(m)){var R=!0;kp(c)}else R=!1;if(bc(c,j),c.stateNode===null)Hp(o,c),Q_(c,m,x),Lx(c,m,x,j),x=!0;else if(o===null){var V=c.stateNode,Q=c.memoizedProps;V.props=Q;var J=V.context,ue=m.contextType;typeof ue=="object"&&ue!==null?ue=Ar(ue):(ue=qn(m)?Go:_n.current,ue=mc(c,ue));var je=m.getDerivedStateFromProps,Te=typeof je=="function"||typeof V.getSnapshotBeforeUpdate=="function";Te||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==x||J!==ue)&&Y_(c,V,x,ue),Ha=!1;var we=c.memoizedState;V.state=we,Dp(c,x,V,j),J=c.memoizedState,Q!==x||we!==J||Wn.current||Ha?(typeof je=="function"&&(Px(c,m,je,x),J=c.memoizedState),(Q=Ha||K_(c,m,Q,x,we,J,ue))?(Te||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=J),V.props=x,V.state=J,V.context=ue,x=Q):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{V=c.stateNode,j_(o,c),Q=c.memoizedProps,ue=c.type===c.elementType?Q:ti(c.type,Q),V.props=ue,Te=c.pendingProps,we=V.context,J=m.contextType,typeof J=="object"&&J!==null?J=Ar(J):(J=qn(m)?Go:_n.current,J=mc(c,J));var Ve=m.getDerivedStateFromProps;(je=typeof Ve=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==Te||we!==J)&&Y_(c,V,x,J),Ha=!1,we=c.memoizedState,V.state=we,Dp(c,x,V,j);var Ge=c.memoizedState;Q!==Te||we!==Ge||Wn.current||Ha?(typeof Ve=="function"&&(Px(c,m,Ve,x),Ge=c.memoizedState),(ue=Ha||K_(c,m,ue,x,we,Ge,J)||!1)?(je||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(x,Ge,J),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(x,Ge,J)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&we===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&we===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ge),V.props=x,V.state=Ge,V.context=J,x=ue):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&we===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&we===o.memoizedState||(c.flags|=1024),x=!1)}return Bx(o,c,m,x,R,j)}function Bx(o,c,m,x,j,R){aw(o,c);var V=(c.flags&128)!==0;if(!x&&!V)return j&&h_(c,m,!1),sa(o,c,R);x=c.stateNode,t4.current=c;var Q=V&&typeof m.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&V?(c.child=vc(c,o.child,null,R),c.child=vc(c,null,Q,R)):Ln(o,c,Q,R),c.memoizedState=x.state,j&&h_(c,m,!0),c.child}function lw(o){var c=o.stateNode;c.pendingContext?d_(o,c.pendingContext,c.pendingContext!==c.context):c.context&&d_(o,c.context,!1),_x(o,c.containerInfo)}function cw(o,c,m,x,j){return xc(),mx(j),c.flags|=256,Ln(o,c,m,x),c.child}var $x={dehydrated:null,treeContext:null,retryLane:0};function Ox(o){return{baseLanes:o,cachePool:null,transitions:null}}function dw(o,c,m){var x=c.pendingProps,j=gs.current,R=!1,V=(c.flags&128)!==0,Q;if((Q=V)||(Q=o!==null&&o.memoizedState===null?!1:(j&2)!==0),Q?(R=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),es(gs,j&1),o===null)return px(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=x.children,o=x.fallback,R?(x=c.mode,R=c.child,V={mode:"hidden",children:V},(x&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=V):R=sm(V,x,0,null),o=tl(o,x,m,null),R.return=c,o.return=c,R.sibling=o,c.child=R,c.child.memoizedState=Ox(m),c.memoizedState=$x,o):Vx(c,V));if(j=o.memoizedState,j!==null&&(Q=j.dehydrated,Q!==null))return s4(o,c,V,x,Q,j,m);if(R){R=x.fallback,V=c.mode,j=o.child,Q=j.sibling;var J={mode:"hidden",children:x.children};return(V&1)===0&&c.child!==j?(x=c.child,x.childLanes=0,x.pendingProps=J,c.deletions=null):(x=Xa(j,J),x.subtreeFlags=j.subtreeFlags&14680064),Q!==null?R=Xa(Q,R):(R=tl(R,V,m,null),R.flags|=2),R.return=c,x.return=c,x.sibling=R,c.child=x,x=R,R=c.child,V=o.child.memoizedState,V=V===null?Ox(m):{baseLanes:V.baseLanes|m,cachePool:null,transitions:V.transitions},R.memoizedState=V,R.childLanes=o.childLanes&~m,c.memoizedState=$x,x}return R=o.child,o=R.sibling,x=Xa(R,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=m),x.return=c,x.sibling=null,o!==null&&(m=c.deletions,m===null?(c.deletions=[o],c.flags|=16):m.push(o)),c.child=x,c.memoizedState=null,x}function Vx(o,c){return c=sm({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function zp(o,c,m,x){return x!==null&&mx(x),vc(c,o.child,null,m),o=Vx(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function s4(o,c,m,x,j,R,V){if(m)return c.flags&256?(c.flags&=-257,x=Dx(Error(s(422))),zp(o,c,V,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(R=x.fallback,j=c.mode,x=sm({mode:"visible",children:x.children},j,0,null),R=tl(R,j,V,null),R.flags|=2,x.return=c,R.return=c,x.sibling=R,c.child=x,(c.mode&1)!==0&&vc(c,o.child,null,V),c.child.memoizedState=Ox(V),c.memoizedState=$x,R);if((c.mode&1)===0)return zp(o,c,V,null);if(j.data==="$!"){if(x=j.nextSibling&&j.nextSibling.dataset,x)var Q=x.dgst;return x=Q,R=Error(s(419)),x=Dx(R,x,void 0),zp(o,c,V,x)}if(Q=(V&o.childLanes)!==0,Kn||Q){if(x=Ys,x!==null){switch(V&-V){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(x.suspendedLanes|V))!==0?0:j,j!==0&&j!==R.retryLane&&(R.retryLane=j,ea(o,j),ri(x,o,j,-1))}return nv(),x=Dx(Error(s(421))),zp(o,c,V,x)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=f4.bind(null,o),j._reactRetry=c,null):(o=R.treeContext,mr=Oa(j.nextSibling),pr=c,us=!0,ei=null,o!==null&&(Cr[Er++]=Ji,Cr[Er++]=Zi,Cr[Er++]=Wo,Ji=o.id,Zi=o.overflow,Wo=c),c=Vx(c,x.children),c.flags|=4096,c)}function uw(o,c,m){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),vx(o.return,c,m)}function Ux(o,c,m,x,j){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:j}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=m,R.tailMode=j)}function hw(o,c,m){var x=c.pendingProps,j=x.revealOrder,R=x.tail;if(Ln(o,c,x.children,m),x=gs.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&uw(o,m,c);else if(o.tag===19)uw(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(es(gs,x),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(m=c.child,j=null;m!==null;)o=m.alternate,o!==null&&Mp(o)===null&&(j=m),m=m.sibling;m=j,m===null?(j=c.child,c.child=null):(j=m.sibling,m.sibling=null),Ux(c,!1,j,m,R);break;case"backwards":for(m=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&Mp(o)===null){c.child=j;break}o=j.sibling,j.sibling=m,m=j,j=o}Ux(c,!0,m,null,R);break;case"together":Ux(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Hp(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function sa(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),Xo|=c.lanes,(m&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,m=Xa(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=Xa(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function n4(o,c,m){switch(c.tag){case 3:lw(c),xc();break;case 5:k_(c);break;case 1:qn(c.type)&&kp(c);break;case 4:_x(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,j=c.memoizedProps.value;es(Rp,x._currentValue),x._currentValue=j;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(es(gs,gs.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?dw(o,c,m):(es(gs,gs.current&1),o=sa(o,c,m),o!==null?o.sibling:null);es(gs,gs.current&1);break;case 19:if(x=(m&c.childLanes)!==0,(o.flags&128)!==0){if(x)return hw(o,c,m);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),es(gs,gs.current),x)break;return null;case 22:case 23:return c.lanes=0,iw(o,c,m)}return sa(o,c,m)}var pw,zx,mw,fw;pw=function(o,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},zx=function(){},mw=function(o,c,m,x){var j=o.memoizedProps;if(j!==x){o=c.stateNode,Qo(ji.current);var R=null;switch(m){case"input":j=it(o,j),x=it(o,x),R=[];break;case"select":j=se({},j,{value:void 0}),x=se({},x,{value:void 0}),R=[];break;case"textarea":j=Ie(o,j),x=Ie(o,x),R=[];break;default:typeof j.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=jp)}zr(m,x);var V;m=null;for(ue in j)if(!x.hasOwnProperty(ue)&&j.hasOwnProperty(ue)&&j[ue]!=null)if(ue==="style"){var Q=j[ue];for(V in Q)Q.hasOwnProperty(V)&&(m||(m={}),m[V]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?R||(R=[]):(R=R||[]).push(ue,null));for(ue in x){var J=x[ue];if(Q=j!=null?j[ue]:void 0,x.hasOwnProperty(ue)&&J!==Q&&(J!=null||Q!=null))if(ue==="style")if(Q){for(V in Q)!Q.hasOwnProperty(V)||J&&J.hasOwnProperty(V)||(m||(m={}),m[V]="");for(V in J)J.hasOwnProperty(V)&&Q[V]!==J[V]&&(m||(m={}),m[V]=J[V])}else m||(R||(R=[]),R.push(ue,m)),m=J;else ue==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,Q=Q?Q.__html:void 0,J!=null&&Q!==J&&(R=R||[]).push(ue,J)):ue==="children"?typeof J!="string"&&typeof J!="number"||(R=R||[]).push(ue,""+J):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(ue)?(J!=null&&ue==="onScroll"&&as("scroll",o),R||Q===J||(R=[])):(R=R||[]).push(ue,J))}m&&(R=R||[]).push("style",m);var ue=R;(c.updateQueue=ue)&&(c.flags|=4)}},fw=function(o,c,m,x){m!==x&&(c.flags|=4)};function ou(o,c){if(!us)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function jn(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(c)for(var j=o.child;j!==null;)m|=j.lanes|j.childLanes,x|=j.subtreeFlags&14680064,x|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)m|=j.lanes|j.childLanes,x|=j.subtreeFlags,x|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=x,o.childLanes=m,c}function r4(o,c,m){var x=c.pendingProps;switch(ux(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(c),null;case 1:return qn(c.type)&&Np(),jn(c),null;case 3:return x=c.stateNode,_c(),os(Wn),os(_n),Sx(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Ap(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ei!==null&&(ev(ei),ei=null))),zx(o,c),jn(c),null;case 5:wx(c);var j=Qo(su.current);if(m=c.type,o!==null&&c.stateNode!=null)mw(o,c,m,x,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(s(166));return jn(c),null}if(o=Qo(ji.current),Ap(c)){x=c.stateNode,m=c.type;var R=c.memoizedProps;switch(x[wi]=c,x[Xd]=R,o=(c.mode&1)!==0,m){case"dialog":as("cancel",x),as("close",x);break;case"iframe":case"object":case"embed":as("load",x);break;case"video":case"audio":for(j=0;j<Kd.length;j++)as(Kd[j],x);break;case"source":as("error",x);break;case"img":case"image":case"link":as("error",x),as("load",x);break;case"details":as("toggle",x);break;case"input":Rt(x,R),as("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!R.multiple},as("invalid",x);break;case"textarea":Ue(x,R),as("invalid",x)}zr(m,R),j=null;for(var V in R)if(R.hasOwnProperty(V)){var Q=R[V];V==="children"?typeof Q=="string"?x.textContent!==Q&&(R.suppressHydrationWarning!==!0&&wp(x.textContent,Q,o),j=["children",Q]):typeof Q=="number"&&x.textContent!==""+Q&&(R.suppressHydrationWarning!==!0&&wp(x.textContent,Q,o),j=["children",""+Q]):i.hasOwnProperty(V)&&Q!=null&&V==="onScroll"&&as("scroll",x)}switch(m){case"input":Ce(x),Os(x,R,!0);break;case"textarea":Ce(x),pt(x);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(x.onclick=jp)}x=j,c.updateQueue=x,x!==null&&(c.flags|=4)}else{V=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=vt(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=V.createElement(m,{is:x.is}):(o=V.createElement(m),m==="select"&&(V=o,x.multiple?V.multiple=!0:x.size&&(V.size=x.size))):o=V.createElementNS(o,m),o[wi]=c,o[Xd]=x,pw(o,c,!1,!1),c.stateNode=o;e:{switch(V=is(m,x),m){case"dialog":as("cancel",o),as("close",o),j=x;break;case"iframe":case"object":case"embed":as("load",o),j=x;break;case"video":case"audio":for(j=0;j<Kd.length;j++)as(Kd[j],o);j=x;break;case"source":as("error",o),j=x;break;case"img":case"image":case"link":as("error",o),as("load",o),j=x;break;case"details":as("toggle",o),j=x;break;case"input":Rt(o,x),j=it(o,x),as("invalid",o);break;case"option":j=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},j=se({},x,{value:void 0}),as("invalid",o);break;case"textarea":Ue(o,x),j=Ie(o,x),as("invalid",o);break;default:j=x}zr(m,j),Q=j;for(R in Q)if(Q.hasOwnProperty(R)){var J=Q[R];R==="style"?Oi(o,J):R==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&ar(o,J)):R==="children"?typeof J=="string"?(m!=="textarea"||J!=="")&&bn(o,J):typeof J=="number"&&bn(o,""+J):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(i.hasOwnProperty(R)?J!=null&&R==="onScroll"&&as("scroll",o):J!=null&&k(o,R,J,V))}switch(m){case"input":Ce(o),Os(o,x,!1);break;case"textarea":Ce(o),pt(o);break;case"option":x.value!=null&&o.setAttribute("value",""+ve(x.value));break;case"select":o.multiple=!!x.multiple,R=x.value,R!=null?Pe(o,!!x.multiple,R,!1):x.defaultValue!=null&&Pe(o,!!x.multiple,x.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=jp)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return jn(c),null;case 6:if(o&&c.stateNode!=null)fw(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(s(166));if(m=Qo(su.current),Qo(ji.current),Ap(c)){if(x=c.stateNode,m=c.memoizedProps,x[wi]=c,(R=x.nodeValue!==m)&&(o=pr,o!==null))switch(o.tag){case 3:wp(x.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&wp(x.nodeValue,m,(o.mode&1)!==0)}R&&(c.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[wi]=c,c.stateNode=x}return jn(c),null;case 13:if(os(gs),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(us&&mr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)v_(),xc(),c.flags|=98560,R=!1;else if(R=Ap(c),x!==null&&x.dehydrated!==null){if(o===null){if(!R)throw Error(s(318));if(R=c.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(s(317));R[wi]=c}else xc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;jn(c),R=!1}else ei!==null&&(ev(ei),ei=null),R=!0;if(!R)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(gs.current&1)!==0?Hs===0&&(Hs=3):nv())),c.updateQueue!==null&&(c.flags|=4),jn(c),null);case 4:return _c(),zx(o,c),o===null&&Qd(c.stateNode.containerInfo),jn(c),null;case 10:return xx(c.type._context),jn(c),null;case 17:return qn(c.type)&&Np(),jn(c),null;case 19:if(os(gs),R=c.memoizedState,R===null)return jn(c),null;if(x=(c.flags&128)!==0,V=R.rendering,V===null)if(x)ou(R,!1);else{if(Hs!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(V=Mp(o),V!==null){for(c.flags|=128,ou(R,!1),x=V.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=m,m=c.child;m!==null;)R=m,o=x,R.flags&=14680066,V=R.alternate,V===null?(R.childLanes=0,R.lanes=o,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=V.childLanes,R.lanes=V.lanes,R.child=V.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=V.memoizedProps,R.memoizedState=V.memoizedState,R.updateQueue=V.updateQueue,R.type=V.type,o=V.dependencies,R.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return es(gs,gs.current&1|2),c.child}o=o.sibling}R.tail!==null&&Zt()>Nc&&(c.flags|=128,x=!0,ou(R,!1),c.lanes=4194304)}else{if(!x)if(o=Mp(V),o!==null){if(c.flags|=128,x=!0,m=o.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),ou(R,!0),R.tail===null&&R.tailMode==="hidden"&&!V.alternate&&!us)return jn(c),null}else 2*Zt()-R.renderingStartTime>Nc&&m!==1073741824&&(c.flags|=128,x=!0,ou(R,!1),c.lanes=4194304);R.isBackwards?(V.sibling=c.child,c.child=V):(m=R.last,m!==null?m.sibling=V:c.child=V,R.last=V)}return R.tail!==null?(c=R.tail,R.rendering=c,R.tail=c.sibling,R.renderingStartTime=Zt(),c.sibling=null,m=gs.current,es(gs,x?m&1|2:m&1),c):(jn(c),null);case 22:case 23:return sv(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(fr&1073741824)!==0&&(jn(c),c.subtreeFlags&6&&(c.flags|=8192)):jn(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}function i4(o,c){switch(ux(c),c.tag){case 1:return qn(c.type)&&Np(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return _c(),os(Wn),os(_n),Sx(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return wx(c),null;case 13:if(os(gs),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));xc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return os(gs),null;case 4:return _c(),null;case 10:return xx(c.type._context),null;case 22:case 23:return sv(),null;case 24:return null;default:return null}}var Gp=!1,Sn=!1,a4=typeof WeakSet=="function"?WeakSet:Set,He=null;function jc(o,c){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){js(o,c,x)}else m.current=null}function Hx(o,c,m){try{m()}catch(x){js(o,c,x)}}var gw=!1;function o4(o,c){if(sx=Fa,o=Kb(),Kg(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var j=x.anchorOffset,R=x.focusNode;x=x.focusOffset;try{m.nodeType,R.nodeType}catch(Re){m=null;break e}var V=0,Q=-1,J=-1,ue=0,je=0,Te=o,we=null;t:for(;;){for(var Ve;Te!==m||j!==0&&Te.nodeType!==3||(Q=V+j),Te!==R||x!==0&&Te.nodeType!==3||(J=V+x),Te.nodeType===3&&(V+=Te.nodeValue.length),(Ve=Te.firstChild)!==null;)we=Te,Te=Ve;for(;;){if(Te===o)break t;if(we===m&&++ue===j&&(Q=V),we===R&&++je===x&&(J=V),(Ve=Te.nextSibling)!==null)break;Te=we,we=Te.parentNode}Te=Ve}m=Q===-1||J===-1?null:{start:Q,end:J}}else m=null}m=m||{start:0,end:0}}else m=null;for(nx={focusedElem:o,selectionRange:m},Fa=!1,He=c;He!==null;)if(c=He,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,He=o;else for(;He!==null;){c=He;try{var Ge=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var We=Ge.memoizedProps,Cs=Ge.memoizedState,le=c.stateNode,te=le.getSnapshotBeforeUpdate(c.elementType===c.type?We:ti(c.type,We),Cs);le.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var de=c.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Re){js(c,c.return,Re)}if(o=c.sibling,o!==null){o.return=c.return,He=o;break}He=c.return}return Ge=gw,gw=!1,Ge}function lu(o,c,m){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var j=x=x.next;do{if((j.tag&o)===o){var R=j.destroy;j.destroy=void 0,R!==void 0&&Hx(c,m,R)}j=j.next}while(j!==x)}}function Wp(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&o)===o){var x=m.create;m.destroy=x()}m=m.next}while(m!==c)}}function Gx(o){var c=o.ref;if(c!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof c=="function"?c(o):c.current=o}}function xw(o){var c=o.alternate;c!==null&&(o.alternate=null,xw(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[wi],delete c[Xd],delete c[ox],delete c[zA],delete c[HA])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function vw(o){return o.tag===5||o.tag===3||o.tag===4}function yw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||vw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wx(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(o,c):m.insertBefore(o,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(o,m)):(c=m,c.appendChild(o)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=jp));else if(x!==4&&(o=o.child,o!==null))for(Wx(o,c,m),o=o.sibling;o!==null;)Wx(o,c,m),o=o.sibling}function qx(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(qx(o,c,m),o=o.sibling;o!==null;)qx(o,c,m),o=o.sibling}var nn=null,si=!1;function Wa(o,c,m){for(m=m.child;m!==null;)bw(o,c,m),m=m.sibling}function bw(o,c,m){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Fo,m)}catch(Q){}switch(m.tag){case 5:Sn||jc(m,c);case 6:var x=nn,j=si;nn=null,Wa(o,c,m),nn=x,si=j,nn!==null&&(si?(o=nn,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):nn.removeChild(m.stateNode));break;case 18:nn!==null&&(si?(o=nn,m=m.stateNode,o.nodeType===8?ax(o.parentNode,m):o.nodeType===1&&ax(o,m),Xr(o)):ax(nn,m.stateNode));break;case 4:x=nn,j=si,nn=m.stateNode.containerInfo,si=!0,Wa(o,c,m),nn=x,si=j;break;case 0:case 11:case 14:case 15:if(!Sn&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){j=x=x.next;do{var R=j,V=R.destroy;R=R.tag,V!==void 0&&((R&2)!==0||(R&4)!==0)&&Hx(m,c,V),j=j.next}while(j!==x)}Wa(o,c,m);break;case 1:if(!Sn&&(jc(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(Q){js(m,c,Q)}Wa(o,c,m);break;case 21:Wa(o,c,m);break;case 22:m.mode&1?(Sn=(x=Sn)||m.memoizedState!==null,Wa(o,c,m),Sn=x):Wa(o,c,m);break;default:Wa(o,c,m)}}function _w(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new a4),c.forEach(function(x){var j=g4.bind(null,o,x);m.has(x)||(m.add(x),x.then(j,j))})}}function ni(o,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var j=m[x];try{var R=o,V=c,Q=V;e:for(;Q!==null;){switch(Q.tag){case 5:nn=Q.stateNode,si=!1;break e;case 3:nn=Q.stateNode.containerInfo,si=!0;break e;case 4:nn=Q.stateNode.containerInfo,si=!0;break e}Q=Q.return}if(nn===null)throw Error(s(160));bw(R,V,j),nn=null,si=!1;var J=j.alternate;J!==null&&(J.return=null),j.return=null}catch(ue){js(j,c,ue)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ww(c,o),c=c.sibling}function ww(o,c){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ni(c,o),Ni(o),x&4){try{lu(3,o,o.return),Wp(3,o)}catch(We){js(o,o.return,We)}try{lu(5,o,o.return)}catch(We){js(o,o.return,We)}}break;case 1:ni(c,o),Ni(o),x&512&&m!==null&&jc(m,m.return);break;case 5:if(ni(c,o),Ni(o),x&512&&m!==null&&jc(m,m.return),o.flags&32){var j=o.stateNode;try{bn(j,"")}catch(We){js(o,o.return,We)}}if(x&4&&(j=o.stateNode,j!=null)){var R=o.memoizedProps,V=m!==null?m.memoizedProps:R,Q=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{Q==="input"&&R.type==="radio"&&R.name!=null&&rs(j,R),is(Q,V);var ue=is(Q,R);for(V=0;V<J.length;V+=2){var je=J[V],Te=J[V+1];je==="style"?Oi(j,Te):je==="dangerouslySetInnerHTML"?ar(j,Te):je==="children"?bn(j,Te):k(j,je,Te,ue)}switch(Q){case"input":cs(j,R);break;case"textarea":nt(j,R);break;case"select":var we=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!R.multiple;var Ve=R.value;Ve!=null?Pe(j,!!R.multiple,Ve,!1):we!==!!R.multiple&&(R.defaultValue!=null?Pe(j,!!R.multiple,R.defaultValue,!0):Pe(j,!!R.multiple,R.multiple?[]:"",!1))}j[Xd]=R}catch(We){js(o,o.return,We)}}break;case 6:if(ni(c,o),Ni(o),x&4){if(o.stateNode===null)throw Error(s(162));j=o.stateNode,R=o.memoizedProps;try{j.nodeValue=R}catch(We){js(o,o.return,We)}}break;case 3:if(ni(c,o),Ni(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Xr(c.containerInfo)}catch(We){js(o,o.return,We)}break;case 4:ni(c,o),Ni(o);break;case 13:ni(c,o),Ni(o),j=o.child,j.flags&8192&&(R=j.memoizedState!==null,j.stateNode.isHidden=R,!R||j.alternate!==null&&j.alternate.memoizedState!==null||(Yx=Zt())),x&4&&_w(o);break;case 22:if(je=m!==null&&m.memoizedState!==null,o.mode&1?(Sn=(ue=Sn)||je,ni(c,o),Sn=ue):ni(c,o),Ni(o),x&8192){if(ue=o.memoizedState!==null,(o.stateNode.isHidden=ue)&&!je&&(o.mode&1)!==0)for(He=o,je=o.child;je!==null;){for(Te=He=je;He!==null;){switch(we=He,Ve=we.child,we.tag){case 0:case 11:case 14:case 15:lu(4,we,we.return);break;case 1:jc(we,we.return);var Ge=we.stateNode;if(typeof Ge.componentWillUnmount=="function"){x=we,m=we.return;try{c=x,Ge.props=c.memoizedProps,Ge.state=c.memoizedState,Ge.componentWillUnmount()}catch(We){js(x,m,We)}}break;case 5:jc(we,we.return);break;case 22:if(we.memoizedState!==null){Nw(Te);continue}}Ve!==null?(Ve.return=we,He=Ve):Nw(Te)}je=je.sibling}e:for(je=null,Te=o;;){if(Te.tag===5){if(je===null){je=Te;try{j=Te.stateNode,ue?(R=j.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(Q=Te.stateNode,J=Te.memoizedProps.style,V=J!=null&&J.hasOwnProperty("display")?J.display:null,Q.style.display=fi("display",V))}catch(We){js(o,o.return,We)}}}else if(Te.tag===6){if(je===null)try{Te.stateNode.nodeValue=ue?"":Te.memoizedProps}catch(We){js(o,o.return,We)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===o)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===o)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===o)break e;je===Te&&(je=null),Te=Te.return}je===Te&&(je=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:ni(c,o),Ni(o),x&4&&_w(o);break;case 21:break;default:ni(c,o),Ni(o)}}function Ni(o){var c=o.flags;if(c&2){try{e:{for(var m=o.return;m!==null;){if(vw(m)){var x=m;break e}m=m.return}throw Error(s(160))}switch(x.tag){case 5:var j=x.stateNode;x.flags&32&&(bn(j,""),x.flags&=-33);var R=yw(o);qx(o,R,j);break;case 3:case 4:var V=x.stateNode.containerInfo,Q=yw(o);Wx(o,Q,V);break;default:throw Error(s(161))}}catch(J){js(o,o.return,J)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function l4(o,c,m){He=o,jw(o)}function jw(o,c,m){for(var x=(o.mode&1)!==0;He!==null;){var j=He,R=j.child;if(j.tag===22&&x){var V=j.memoizedState!==null||Gp;if(!V){var Q=j.alternate,J=Q!==null&&Q.memoizedState!==null||Sn;Q=Gp;var ue=Sn;if(Gp=V,(Sn=J)&&!ue)for(He=j;He!==null;)V=He,J=V.child,V.tag===22&&V.memoizedState!==null?kw(j):J!==null?(J.return=V,He=J):kw(j);for(;R!==null;)He=R,jw(R),R=R.sibling;He=j,Gp=Q,Sn=ue}Sw(o)}else(j.subtreeFlags&8772)!==0&&R!==null?(R.return=j,He=R):Sw(o)}}function Sw(o){for(;He!==null;){var c=He;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Sn||Wp(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Sn)if(m===null)x.componentDidMount();else{var j=c.elementType===c.type?m.memoizedProps:ti(c.type,m.memoizedProps);x.componentDidUpdate(j,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var R=c.updateQueue;R!==null&&N_(c,R,x);break;case 3:var V=c.updateQueue;if(V!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}N_(c,V,m)}break;case 5:var Q=c.stateNode;if(m===null&&c.flags&4){m=Q;var J=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&m.focus();break;case"img":J.src&&(m.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ue=c.alternate;if(ue!==null){var je=ue.memoizedState;if(je!==null){var Te=je.dehydrated;Te!==null&&Xr(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Sn||c.flags&512&&Gx(c)}catch(we){js(c,c.return,we)}}if(c===o){He=null;break}if(m=c.sibling,m!==null){m.return=c.return,He=m;break}He=c.return}}function Nw(o){for(;He!==null;){var c=He;if(c===o){He=null;break}var m=c.sibling;if(m!==null){m.return=c.return,He=m;break}He=c.return}}function kw(o){for(;He!==null;){var c=He;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Wp(4,c)}catch(J){js(c,m,J)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var j=c.return;try{x.componentDidMount()}catch(J){js(c,j,J)}}var R=c.return;try{Gx(c)}catch(J){js(c,R,J)}break;case 5:var V=c.return;try{Gx(c)}catch(J){js(c,V,J)}}}catch(J){js(c,c.return,J)}if(c===o){He=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,He=Q;break}He=c.return}}var c4=Math.ceil,qp=v.ReactCurrentDispatcher,Kx=v.ReactCurrentOwner,Rr=v.ReactCurrentBatchConfig,Ot=0,Ys=null,Ls=null,rn=0,fr=0,Sc=Va(0),Hs=0,cu=null,Xo=0,Kp=0,Qx=0,du=null,Qn=null,Yx=0,Nc=1/0,na=null,Qp=!1,Xx=null,qa=null,Yp=!1,Ka=null,Xp=0,uu=0,Jx=null,Jp=-1,Zp=0;function Dn(){return(Ot&6)!==0?Zt():Jp!==-1?Jp:Jp=Zt()}function Qa(o){return(o.mode&1)===0?1:(Ot&2)!==0&&rn!==0?rn&-rn:WA.transition!==null?(Zp===0&&(Zp=$o()),Zp):(o=Pt,o!==0||(o=window.event,o=o===void 0?16:$d(o.type)),o)}function ri(o,c,m,x){if(50<uu)throw uu=0,Jx=null,Error(s(185));Pa(o,m,x),((Ot&2)===0||o!==Ys)&&(o===Ys&&((Ot&2)===0&&(Kp|=m),Hs===4&&Ya(o,rn)),Yn(o,x),m===1&&Ot===0&&(c.mode&1)===0&&(Nc=Zt()+500,Tp&&za()))}function Yn(o,c){var m=o.callbackNode;Gi(o,c);var x=Bo(o,o===Ys?rn:0);if(x===0)m!==null&&Ld(m),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(m!=null&&Ld(m),c===1)o.tag===0?GA(Cw.bind(null,o)):p_(Cw.bind(null,o)),VA(function(){(Ot&6)===0&&za()}),m=null;else{switch(Da(x)){case 1:m=Mo;break;case 4:m=Aa;break;case 16:m=Nr;break;case 536870912:m=Zh;break;default:m=Nr}m=Mw(m,Tw.bind(null,o))}o.callbackPriority=c,o.callbackNode=m}}function Tw(o,c){if(Jp=-1,Zp=0,(Ot&6)!==0)throw Error(s(327));var m=o.callbackNode;if(kc()&&o.callbackNode!==m)return null;var x=Bo(o,o===Ys?rn:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=em(o,x);else{c=x;var j=Ot;Ot|=2;var R=Aw();(Ys!==o||rn!==c)&&(na=null,Nc=Zt()+500,Zo(o,c));do try{h4();break}catch(Q){Ew(o,Q)}while(!0);gx(),qp.current=R,Ot=j,Ls!==null?c=0:(Ys=null,rn=0,c=Hs)}if(c!==0){if(c===2&&(j=dr(o),j!==0&&(x=j,c=Zx(o,j))),c===1)throw m=cu,Zo(o,0),Ya(o,x),Yn(o,Zt()),m;if(c===6)Ya(o,x);else{if(j=o.current.alternate,(x&30)===0&&!d4(j)&&(c=em(o,x),c===2&&(R=dr(o),R!==0&&(x=R,c=Zx(o,R))),c===1))throw m=cu,Zo(o,0),Ya(o,x),Yn(o,Zt()),m;switch(o.finishedWork=j,o.finishedLanes=x,c){case 0:case 1:throw Error(s(345));case 2:el(o,Qn,na);break;case 3:if(Ya(o,x),(x&130023424)===x&&(c=Yx+500-Zt(),10<c)){if(Bo(o,0)!==0)break;if(j=o.suspendedLanes,(j&x)!==x){Dn(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=ix(el.bind(null,o,Qn,na),c);break}el(o,Qn,na);break;case 4:if(Ya(o,x),(x&4194240)===x)break;for(c=o.eventTimes,j=-1;0<x;){var V=31-Rn(x);R=1<<V,V=c[V],V>j&&(j=V),x&=~R}if(x=j,x=Zt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*c4(x/1960))-x,10<x){o.timeoutHandle=ix(el.bind(null,o,Qn,na),x);break}el(o,Qn,na);break;case 5:el(o,Qn,na);break;default:throw Error(s(329))}}}return Yn(o,Zt()),o.callbackNode===m?Tw.bind(null,o):null}function Zx(o,c){var m=du;return o.current.memoizedState.isDehydrated&&(Zo(o,c).flags|=256),o=em(o,c),o!==2&&(c=Qn,Qn=m,c!==null&&ev(c)),o}function ev(o){Qn===null?Qn=o:Qn.push.apply(Qn,o)}function d4(o){for(var c=o;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var j=m[x],R=j.getSnapshot;j=j.value;try{if(!Zr(R(),j))return!1}catch(V){return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ya(o,c){for(c&=~Qx,c&=~Kp,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var m=31-Rn(c),x=1<<m;o[m]=-1,c&=~x}}function Cw(o){if((Ot&6)!==0)throw Error(s(327));kc();var c=Bo(o,0);if((c&1)===0)return Yn(o,Zt()),null;var m=em(o,c);if(o.tag!==0&&m===2){var x=dr(o);x!==0&&(c=x,m=Zx(o,x))}if(m===1)throw m=cu,Zo(o,0),Ya(o,c),Yn(o,Zt()),m;if(m===6)throw Error(s(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,el(o,Qn,na),Yn(o,Zt()),null}function tv(o,c){var m=Ot;Ot|=1;try{return o(c)}finally{Ot=m,Ot===0&&(Nc=Zt()+500,Tp&&za())}}function Jo(o){Ka!==null&&Ka.tag===0&&(Ot&6)===0&&kc();var c=Ot;Ot|=1;var m=Rr.transition,x=Pt;try{if(Rr.transition=null,Pt=1,o)return o()}finally{Pt=x,Rr.transition=m,Ot=c,(Ot&6)===0&&za()}}function sv(){fr=Sc.current,os(Sc)}function Zo(o,c){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,OA(m)),Ls!==null)for(m=Ls.return;m!==null;){var x=m;switch(ux(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Np();break;case 3:_c(),os(Wn),os(_n),Sx();break;case 5:wx(x);break;case 4:_c();break;case 13:os(gs);break;case 19:os(gs);break;case 10:xx(x.type._context);break;case 22:case 23:sv()}m=m.return}if(Ys=o,Ls=o=Xa(o.current,null),rn=fr=c,Hs=0,cu=null,Qx=Kp=Xo=0,Qn=du=null,Ko!==null){for(c=0;c<Ko.length;c++)if(m=Ko[c],x=m.interleaved,x!==null){m.interleaved=null;var j=x.next,R=m.pending;if(R!==null){var V=R.next;R.next=j,x.next=V}m.pending=x}Ko=null}return o}function Ew(o,c){do{var m=Ls;try{if(gx(),Fp.current=Vp,Bp){for(var x=xs.memoizedState;x!==null;){var j=x.queue;j!==null&&(j.pending=null),x=x.next}Bp=!1}if(Yo=0,Qs=zs=xs=null,nu=!1,ru=0,Kx.current=null,m===null||m.return===null){Hs=1,cu=c,Ls=null;break}e:{var R=o,V=m.return,Q=m,J=c;if(c=rn,Q.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ue=J,je=Q,Te=je.tag;if((je.mode&1)===0&&(Te===0||Te===11||Te===15)){var we=je.alternate;we?(je.updateQueue=we.updateQueue,je.memoizedState=we.memoizedState,je.lanes=we.lanes):(je.updateQueue=null,je.memoizedState=null)}var Ve=ew(V);if(Ve!==null){Ve.flags&=-257,tw(Ve,V,Q,R,c),Ve.mode&1&&Z_(R,ue,c),c=Ve,J=ue;var Ge=c.updateQueue;if(Ge===null){var We=new Set;We.add(J),c.updateQueue=We}else Ge.add(J);break e}else{if((c&1)===0){Z_(R,ue,c),nv();break e}J=Error(s(426))}}else if(us&&Q.mode&1){var Cs=ew(V);if(Cs!==null){(Cs.flags&65536)===0&&(Cs.flags|=256),tw(Cs,V,Q,R,c),mx(wc(J,Q));break e}}R=J=wc(J,Q),Hs!==4&&(Hs=2),du===null?du=[R]:du.push(R),R=V;do{switch(R.tag){case 3:R.flags|=65536,c&=-c,R.lanes|=c;var le=X_(R,J,c);S_(R,le);break e;case 1:Q=J;var te=R.type,de=R.stateNode;if((R.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(qa===null||!qa.has(de)))){R.flags|=65536,c&=-c,R.lanes|=c;var Re=J_(R,Q,c);S_(R,Re);break e}}R=R.return}while(R!==null)}Rw(m)}catch(Qe){c=Qe,Ls===m&&m!==null&&(Ls=m=m.return);continue}break}while(!0)}function Aw(){var o=qp.current;return qp.current=Vp,o===null?Vp:o}function nv(){(Hs===0||Hs===3||Hs===2)&&(Hs=4),Ys===null||(Xo&268435455)===0&&(Kp&268435455)===0||Ya(Ys,rn)}function em(o,c){var m=Ot;Ot|=2;var x=Aw();(Ys!==o||rn!==c)&&(na=null,Zo(o,c));do try{u4();break}catch(j){Ew(o,j)}while(!0);if(gx(),Ot=m,qp.current=x,Ls!==null)throw Error(s(261));return Ys=null,rn=0,Hs}function u4(){for(;Ls!==null;)Iw(Ls)}function h4(){for(;Ls!==null&&!Xh();)Iw(Ls)}function Iw(o){var c=Dw(o.alternate,o,fr);o.memoizedProps=o.pendingProps,c===null?Rw(o):Ls=c,Kx.current=null}function Rw(o){var c=o;do{var m=c.alternate;if(o=c.return,(c.flags&32768)===0){if(m=r4(m,c,fr),m!==null){Ls=m;return}}else{if(m=i4(m,c),m!==null){m.flags&=32767,Ls=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Hs=6,Ls=null;return}}if(c=c.sibling,c!==null){Ls=c;return}Ls=c=o}while(c!==null);Hs===0&&(Hs=5)}function el(o,c,m){var x=Pt,j=Rr.transition;try{Rr.transition=null,Pt=1,p4(o,c,m,x)}finally{Rr.transition=j,Pt=x}return null}function p4(o,c,m,x){do kc();while(Ka!==null);if((Ot&6)!==0)throw Error(s(327));m=o.finishedWork;var j=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0;var R=m.lanes|m.childLanes;if(Yt(o,R),o===Ys&&(Ls=Ys=null,rn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Yp||(Yp=!0,Mw(Nr,function(){return kc(),null})),R=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||R){R=Rr.transition,Rr.transition=null;var V=Pt;Pt=1;var Q=Ot;Ot|=4,Kx.current=null,o4(o,m),ww(m,o),PA(nx),Fa=!!sx,nx=sx=null,o.current=m,l4(m),Og(),Ot=Q,Pt=V,Rr.transition=R}else o.current=m;if(Yp&&(Yp=!1,Ka=o,Xp=j),R=o.pendingLanes,R===0&&(qa=null),ep(m.stateNode),Yn(o,Zt()),c!==null)for(x=o.onRecoverableError,m=0;m<c.length;m++)j=c[m],x(j.value,{componentStack:j.stack,digest:j.digest});if(Qp)throw Qp=!1,o=Xx,Xx=null,o;return(Xp&1)!==0&&o.tag!==0&&kc(),R=o.pendingLanes,(R&1)!==0?o===Jx?uu++:(uu=0,Jx=o):uu=0,za(),null}function kc(){if(Ka!==null){var o=Da(Xp),c=Rr.transition,m=Pt;try{if(Rr.transition=null,Pt=16>o?16:o,Ka===null)var x=!1;else{if(o=Ka,Ka=null,Xp=0,(Ot&6)!==0)throw Error(s(331));var j=Ot;for(Ot|=4,He=o.current;He!==null;){var R=He,V=R.child;if((He.flags&16)!==0){var Q=R.deletions;if(Q!==null){for(var J=0;J<Q.length;J++){var ue=Q[J];for(He=ue;He!==null;){var je=He;switch(je.tag){case 0:case 11:case 15:lu(8,je,R)}var Te=je.child;if(Te!==null)Te.return=je,He=Te;else for(;He!==null;){je=He;var we=je.sibling,Ve=je.return;if(xw(je),je===ue){He=null;break}if(we!==null){we.return=Ve,He=we;break}He=Ve}}}var Ge=R.alternate;if(Ge!==null){var We=Ge.child;if(We!==null){Ge.child=null;do{var Cs=We.sibling;We.sibling=null,We=Cs}while(We!==null)}}He=R}}if((R.subtreeFlags&2064)!==0&&V!==null)V.return=R,He=V;else e:for(;He!==null;){if(R=He,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:lu(9,R,R.return)}var le=R.sibling;if(le!==null){le.return=R.return,He=le;break e}He=R.return}}var te=o.current;for(He=te;He!==null;){V=He;var de=V.child;if((V.subtreeFlags&2064)!==0&&de!==null)de.return=V,He=de;else e:for(V=te;He!==null;){if(Q=He,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Wp(9,Q)}}catch(Qe){js(Q,Q.return,Qe)}if(Q===V){He=null;break e}var Re=Q.sibling;if(Re!==null){Re.return=Q.return,He=Re;break e}He=Q.return}}if(Ot=j,za(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Fo,o)}catch(Qe){}x=!0}return x}finally{Pt=m,Rr.transition=c}}return!1}function Pw(o,c,m){c=wc(m,c),c=X_(o,c,1),o=Ga(o,c,1),c=Dn(),o!==null&&(Pa(o,1,c),Yn(o,c))}function js(o,c,m){if(o.tag===3)Pw(o,o,m);else for(;c!==null;){if(c.tag===3){Pw(c,o,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(qa===null||!qa.has(x))){o=wc(m,o),o=J_(c,o,1),c=Ga(c,o,1),o=Dn(),c!==null&&(Pa(c,1,o),Yn(c,o));break}}c=c.return}}function m4(o,c,m){var x=o.pingCache;x!==null&&x.delete(c),c=Dn(),o.pingedLanes|=o.suspendedLanes&m,Ys===o&&(rn&m)===m&&(Hs===4||Hs===3&&(rn&130023424)===rn&&500>Zt()-Yx?Zo(o,0):Qx|=m),Yn(o,c)}function Lw(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ql,Ql<<=1,(Ql&130023424)===0&&(Ql=4194304)));var m=Dn();o=ea(o,c),o!==null&&(Pa(o,c,m),Yn(o,m))}function f4(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),Lw(o,m)}function g4(o,c){var m=0;switch(o.tag){case 13:var x=o.stateNode,j=o.memoizedState;j!==null&&(m=j.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(c),Lw(o,m)}var Dw;Dw=function(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps||Wn.current)Kn=!0;else{if((o.lanes&m)===0&&(c.flags&128)===0)return Kn=!1,n4(o,c,m);Kn=(o.flags&131072)!==0}else Kn=!1,us&&(c.flags&1048576)!==0&&m_(c,Ep,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Hp(o,c),o=c.pendingProps;var j=mc(c,_n.current);bc(c,m),j=Tx(null,c,x,o,j,m);var R=Cx();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,qn(x)?(R=!0,kp(c)):R=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,bx(c),j.updater=Up,c.stateNode=j,j._reactInternals=c,Lx(c,x,o,m),c=Bx(null,c,x,!0,R,m)):(c.tag=0,us&&R&&dx(c),Ln(null,c,j,m),c=c.child),c;case 16:x=c.elementType;e:{switch(Hp(o,c),o=c.pendingProps,j=x._init,x=j(x._payload),c.type=x,j=c.tag=v4(x),o=ti(x,o),j){case 0:c=Fx(null,c,x,o,m);break e;case 1:c=ow(null,c,x,o,m);break e;case 11:c=sw(null,c,x,o,m);break e;case 14:c=nw(null,c,x,ti(x.type,o),m);break e}throw Error(s(306,x,""))}return c;case 0:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:ti(x,j),Fx(o,c,x,j,m);case 1:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:ti(x,j),ow(o,c,x,j,m);case 3:e:{if(lw(c),o===null)throw Error(s(387));x=c.pendingProps,R=c.memoizedState,j=R.element,j_(o,c),Dp(c,x,null,m);var V=c.memoizedState;if(x=V.element,R.isDehydrated)if(R={element:x,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){j=wc(Error(s(423)),c),c=cw(o,c,x,m,j);break e}else if(x!==j){j=wc(Error(s(424)),c),c=cw(o,c,x,m,j);break e}else for(mr=Oa(c.stateNode.containerInfo.firstChild),pr=c,us=!0,ei=null,m=__(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(xc(),x===j){c=sa(o,c,m);break e}Ln(o,c,x,m)}c=c.child}return c;case 5:return k_(c),o===null&&px(c),x=c.type,j=c.pendingProps,R=o!==null?o.memoizedProps:null,V=j.children,rx(x,j)?V=null:R!==null&&rx(x,R)&&(c.flags|=32),aw(o,c),Ln(o,c,V,m),c.child;case 6:return o===null&&px(c),null;case 13:return dw(o,c,m);case 4:return _x(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=vc(c,null,x,m):Ln(o,c,x,m),c.child;case 11:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:ti(x,j),sw(o,c,x,j,m);case 7:return Ln(o,c,c.pendingProps,m),c.child;case 8:return Ln(o,c,c.pendingProps.children,m),c.child;case 12:return Ln(o,c,c.pendingProps.children,m),c.child;case 10:e:{if(x=c.type._context,j=c.pendingProps,R=c.memoizedProps,V=j.value,es(Rp,x._currentValue),x._currentValue=V,R!==null)if(Zr(R.value,V)){if(R.children===j.children&&!Wn.current){c=sa(o,c,m);break e}}else for(R=c.child,R!==null&&(R.return=c);R!==null;){var Q=R.dependencies;if(Q!==null){V=R.child;for(var J=Q.firstContext;J!==null;){if(J.context===x){if(R.tag===1){J=ta(-1,m&-m),J.tag=2;var ue=R.updateQueue;if(ue!==null){ue=ue.shared;var je=ue.pending;je===null?J.next=J:(J.next=je.next,je.next=J),ue.pending=J}}R.lanes|=m,J=R.alternate,J!==null&&(J.lanes|=m),vx(R.return,m,c),Q.lanes|=m;break}J=J.next}}else if(R.tag===10)V=R.type===c.type?null:R.child;else if(R.tag===18){if(V=R.return,V===null)throw Error(s(341));V.lanes|=m,Q=V.alternate,Q!==null&&(Q.lanes|=m),vx(V,m,c),V=R.sibling}else V=R.child;if(V!==null)V.return=R;else for(V=R;V!==null;){if(V===c){V=null;break}if(R=V.sibling,R!==null){R.return=V.return,V=R;break}V=V.return}R=V}Ln(o,c,j.children,m),c=c.child}return c;case 9:return j=c.type,x=c.pendingProps.children,bc(c,m),j=Ar(j),x=x(j),c.flags|=1,Ln(o,c,x,m),c.child;case 14:return x=c.type,j=ti(x,c.pendingProps),j=ti(x.type,j),nw(o,c,x,j,m);case 15:return rw(o,c,c.type,c.pendingProps,m);case 17:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:ti(x,j),Hp(o,c),c.tag=1,qn(x)?(o=!0,kp(c)):o=!1,bc(c,m),Q_(c,x,j),Lx(c,x,j,m),Bx(null,c,x,!0,o,m);case 19:return hw(o,c,m);case 22:return iw(o,c,m)}throw Error(s(156,c.tag))};function Mw(o,c){return ql(o,c)}function x4(o,c,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(o,c,m,x){return new x4(o,c,m,x)}function rv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function v4(o){if(typeof o=="function")return rv(o)?1:0;if(o!=null){if(o=o.$$typeof,o===$)return 11;if(o===H)return 14}return 2}function Xa(o,c){var m=o.alternate;return m===null?(m=Pr(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function tm(o,c,m,x,j,R){var V=2;if(x=o,typeof o=="function")rv(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case E:return tl(m.children,j,R,c);case w:V=8,j|=8;break;case A:return o=Pr(12,m,c,j|2),o.elementType=A,o.lanes=R,o;case F:return o=Pr(13,m,c,j),o.elementType=F,o.lanes=R,o;case z:return o=Pr(19,m,c,j),o.elementType=z,o.lanes=R,o;case q:return sm(m,j,R,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:V=10;break e;case D:V=9;break e;case $:V=11;break e;case H:V=14;break e;case K:V=16,x=null;break e}throw Error(s(130,o==null?o:typeof o,""))}return c=Pr(V,m,c,j),c.elementType=o,c.type=x,c.lanes=R,c}function tl(o,c,m,x){return o=Pr(7,o,x,c),o.lanes=m,o}function sm(o,c,m,x){return o=Pr(22,o,x,c),o.elementType=q,o.lanes=m,o.stateNode={isHidden:!1},o}function iv(o,c,m){return o=Pr(6,o,null,c),o.lanes=m,o}function av(o,c,m){return c=Pr(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function y4(o,c,m,x,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ra(0),this.expirationTimes=Ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.identifierPrefix=x,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function ov(o,c,m,x,j,R,V,Q,J){return o=new y4(o,c,m,Q,J),c===1?(c=1,R===!0&&(c|=8)):c=0,R=Pr(3,null,null,c),o.current=R,R.stateNode=o,R.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},bx(R),o}function b4(o,c,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:x==null?null:""+x,children:o,containerInfo:c,implementation:m}}function Fw(o){if(!o)return Ua;o=o._reactInternals;e:{if(Wr(o)!==o||o.tag!==1)throw Error(s(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(qn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(o.tag===1){var m=o.type;if(qn(m))return u_(o,m,c)}return c}function Bw(o,c,m,x,j,R,V,Q,J){return o=ov(m,x,!0,o,j,R,V,Q,J),o.context=Fw(null),m=o.current,x=Dn(),j=Qa(m),R=ta(x,j),R.callback=c!=null?c:null,Ga(m,R,j),o.current.lanes=j,Pa(o,j,x),Yn(o,x),o}function nm(o,c,m,x){var j=c.current,R=Dn(),V=Qa(j);return m=Fw(m),c.context===null?c.context=m:c.pendingContext=m,c=ta(R,V),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=Ga(j,c,V),o!==null&&(ri(o,j,V,R),Lp(o,j,V)),V}function rm(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function $w(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function lv(o,c){$w(o,c),(o=o.alternate)&&$w(o,c)}function _4(){return null}var Ow=typeof reportError=="function"?reportError:function(o){console.error(o)};function cv(o){this._internalRoot=o}im.prototype.render=cv.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));nm(o,c,null,null)},im.prototype.unmount=cv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Jo(function(){nm(null,o,null,null)}),c[Yi]=null}};function im(o){this._internalRoot=o}im.prototype.unstable_scheduleHydration=function(o){if(o){var c=ip();o={blockedOn:null,target:o,priority:c};for(var m=0;m<vi.length&&c!==0&&c<vi[m].priority;m++);vi.splice(m,0,o),m===0&&lp(o)}};function dv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function am(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function w4(o,c,m,x,j){if(j){if(typeof x=="function"){var R=x;x=function(){var ue=rm(V);R.call(ue)}}var V=Bw(c,x,o,0,null,!1,!1,"",Vw);return o._reactRootContainer=V,o[Yi]=V.current,Qd(o.nodeType===8?o.parentNode:o),Jo(),V}for(;j=o.lastChild;)o.removeChild(j);if(typeof x=="function"){var Q=x;x=function(){var ue=rm(J);Q.call(ue)}}var J=ov(o,0,!1,null,null,!1,!1,"",Vw);return o._reactRootContainer=J,o[Yi]=J.current,Qd(o.nodeType===8?o.parentNode:o),Jo(function(){nm(c,J,m,x)}),J}function om(o,c,m,x,j){var R=m._reactRootContainer;if(R){var V=R;if(typeof j=="function"){var Q=j;j=function(){var J=rm(V);Q.call(J)}}nm(c,V,o,j)}else V=w4(m,c,o,j,x);return rm(V)}np=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ia(c.pendingLanes);m!==0&&(La(c,m|1),Yn(c,Zt()),(Ot&6)===0&&(Nc=Zt()+500,za()))}break;case 13:Jo(function(){var x=ea(o,1);if(x!==null){var j=Dn();ri(x,o,1,j)}}),lv(o,1)}},Yl=function(o){if(o.tag===13){var c=ea(o,134217728);if(c!==null){var m=Dn();ri(c,o,134217728,m)}lv(o,134217728)}},rp=function(o){if(o.tag===13){var c=Qa(o),m=ea(o,c);if(m!==null){var x=Dn();ri(m,o,c,x)}lv(o,c)}},ip=function(){return Pt},ap=function(o,c){var m=Pt;try{return Pt=o,c()}finally{Pt=m}},Ui=function(o,c,m){switch(c){case"input":if(cs(o,m),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==o&&x.form===o.form){var j=Sp(x);if(!j)throw Error(s(90));ye(x),cs(x,j)}}}break;case"textarea":nt(o,m);break;case"select":c=m.value,c!=null&&Pe(o,!!m.multiple,c,!1)}},Ro=tv,Ad=Jo;var j4={usingClientEntryPoint:!1,Events:[Jd,hc,Sp,lr,Ed,tv]},hu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S4={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Pd(o),o===null?null:o.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||_4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Fo=lm.inject(S4),cr=lm}catch(o){}}return Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j4,Xn.createPortal=function(o,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dv(c))throw Error(s(200));return b4(o,c,null,m)},Xn.createRoot=function(o,c){if(!dv(o))throw Error(s(299));var m=!1,x="",j=Ow;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=ov(o,1,!1,null,null,m,!1,x,j),o[Yi]=c.current,Qd(o.nodeType===8?o.parentNode:o),new cv(c)},Xn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=Pd(c),o=o===null?null:o.stateNode,o},Xn.flushSync=function(o){return Jo(o)},Xn.hydrate=function(o,c,m){if(!am(c))throw Error(s(200));return om(null,o,c,!0,m)},Xn.hydrateRoot=function(o,c,m){if(!dv(o))throw Error(s(405));var x=m!=null&&m.hydratedSources||null,j=!1,R="",V=Ow;if(m!=null&&(m.unstable_strictMode===!0&&(j=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(V=m.onRecoverableError)),c=Bw(c,null,o,1,m!=null?m:null,j,!1,R,V),o[Yi]=c.current,Qd(o),x)for(o=0;o<x.length;o++)m=x[o],j=m._getVersion,j=j(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,j]:c.mutableSourceEagerHydrationData.push(m,j);return new im(c)},Xn.render=function(o,c,m){if(!am(c))throw Error(s(200));return om(null,o,c,!1,m)},Xn.unmountComponentAtNode=function(o){if(!am(o))throw Error(s(40));return o._reactRootContainer?(Jo(function(){om(null,null,o,!1,function(){o._reactRootContainer=null,o[Yi]=null})}),!0):!1},Xn.unstable_batchedUpdates=tv,Xn.unstable_renderSubtreeIntoContainer=function(o,c,m,x){if(!am(m))throw Error(s(200));if(o==null||o._reactInternals===void 0)throw Error(s(38));return om(o,c,m,!1,x)},Xn.version="18.3.1-next-f1338f8080-20240426",Xn}var Qw;function Ak(){if(Qw)return pv.exports;Qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pv.exports=I4(),pv.exports}var Yw;function R4(){if(Yw)return cm;Yw=1;var t=Ak();return cm.createRoot=t.createRoot,cm.hydrateRoot=t.hydrateRoot,cm}var P4=R4();const L4=D0(P4),ct=t=>typeof t=="string",mu=()=>{let t,e;const s=new Promise((r,i)=>{t=r,e=i});return s.resolve=t,s.reject=e,s},Xw=t=>t==null?"":""+t,D4=(t,e,s)=>{t.forEach(r=>{e[r]&&(s[r]=e[r])})},M4=/###/g,Jw=t=>t&&t.indexOf("###")>-1?t.replace(M4,"."):t,Zw=t=>!t||ct(t),Fu=(t,e,s)=>{const r=ct(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Zw(t))return{};const a=Jw(r[i]);!t[a]&&s&&(t[a]=new s),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return Zw(t)?{}:{obj:t,k:Jw(r[i])}},e2=(t,e,s)=>{const{obj:r,k:i}=Fu(t,e,Object);if(r!==void 0||e.length===1){r[i]=s;return}let a=e[e.length-1],l=e.slice(0,e.length-1),d=Fu(t,l,Object);for(;d.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),d=Fu(t,l,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${a}`]!="undefined"&&(d.obj=void 0);d.obj[`${d.k}.${a}`]=s},F4=(t,e,s,r)=>{const{obj:i,k:a}=Fu(t,e,Object);i[a]=i[a]||[],i[a].push(s)},hf=(t,e)=>{const{obj:s,k:r}=Fu(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},B4=(t,e,s)=>{const r=hf(t,s);return r!==void 0?r:hf(e,s)},Ik=(t,e,s)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ct(t[r])||t[r]instanceof String||ct(e[r])||e[r]instanceof String?s&&(t[r]=e[r]):Ik(t[r],e[r],s):t[r]=e[r]);return t},Tc=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const O4=t=>ct(t)?t.replace(/[&<>"'\/]/g,e=>$4[e]):t;class V4{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const U4=[" ",",","?","!",";"],z4=new V4(20),H4=(t,e,s)=>{e=e||"",s=s||"";const r=U4.filter(l=>e.indexOf(l)<0&&s.indexOf(l)<0);if(r.length===0)return!0;const i=z4.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!i.test(t);if(!a){const l=t.indexOf(s);l>0&&!i.test(t.substring(0,l))&&(a=!0)}return a},Ty=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(s);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let l,d="";for(let u=a;u<r.length;++u)if(u!==a&&(d+=s),d+=r[u],l=i[d],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=l}return i},th=t=>t==null?void 0:t.replace("_","-"),G4={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var s,r;(r=(s=console==null?void 0:console[t])==null?void 0:s.apply)==null||r.call(s,console,e)}};let W4=class Cy{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||G4,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,r,i){return i&&!this.debug?null:(ct(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Cy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Cy(this.logger,e)}};var Ei=new W4;class Qf{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(s)||0;this.observers[r].set(s,i+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i.apply(i,[e,...s])})}}class t2 extends Qf{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,r,i={}){var h,p;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,s],r&&(Array.isArray(r)?d.push(...r):ct(r)&&a?d.push(...r.split(a)):d.push(r)));const u=hf(this.data,d);return!u&&!s&&!r&&e.indexOf(".")>-1&&(e=d[0],s=d[1],r=d.slice(2).join(".")),u||!l||!ct(r)?u:Ty((p=(h=this.data)==null?void 0:h[e])==null?void 0:p[s],r,a)}addResource(e,s,r,i,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let d=[e,s];r&&(d=d.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(d=e.split("."),i=s,s=d[1]),this.addNamespaces(s),e2(this.data,d,i),a.silent||this.emit("added",e,s,r,i)}addResources(e,s,r,i={silent:!1}){for(const a in r)(ct(r[a])||Array.isArray(r[a]))&&this.addResource(e,s,a,r[a],{silent:!0});i.silent||this.emit("added",e,s,r)}addResourceBundle(e,s,r,i,a,l={silent:!1,skipCopy:!1}){let d=[e,s];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=s,s=d[1]),this.addNamespaces(s);let u=hf(this.data,d)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Ik(u,r,a):u={...u,...r},e2(this.data,d,u),l.silent||this.emit("added",e,s,r)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var Rk={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,r,i){return t.forEach(a=>{var l,d;e=(d=(l=this.processors[a])==null?void 0:l.process(e,s,r,i))!=null?d:e}),e}};const Pk=Symbol("i18next/PATH_KEY");function q4(){const t=[],e=Object.create(null);let s;return e.get=(r,i)=>{var a;return(a=s==null?void 0:s.revoke)==null||a.call(s),i===Pk?t:(t.push(i),s=Proxy.revocable(r,e),s.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Ey(t,e){var r;const{[Pk]:s}=t(q4());return s.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const s2={},n2=t=>!ct(t)&&typeof t!="boolean"&&typeof t!="number";class pf extends Qf{constructor(e,s={}){super(),D4(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ei.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const r={...s};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!H4(e,r,i);if(l&&!d){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:ct(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:ct(a)?[a]:a}}translate(e,s,r){let i=typeof s=="object"?{...s}:s;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Ey(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let p=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const g=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return y?a?{res:`${h}${p}${d}`,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${p}${d}`:a?{res:d,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:d;const b=this.resolve(e,i);let S=b==null?void 0:b.res;const N=(b==null?void 0:b.usedKey)||d,T=(b==null?void 0:b.exactUsedKey)||d,M=["[object Number]","[object Function]","[object RegExp]"],L=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,v=i.count!==void 0&&!ct(i.count),_=pf.hasDefaultValue(i),P=v?this.pluralResolver.getSuffix(g,i.count,i):"",E=i.ordinal&&v?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",w=v&&!i.ordinal&&i.count===0,A=w&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${P}`]||i[`defaultValue${E}`]||i.defaultValue;let B=S;k&&!S&&_&&(B=A);const D=n2(B),$=Object.prototype.toString.apply(B);if(k&&B&&D&&M.indexOf($)<0&&!(ct(L)&&Array.isArray(B))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const F=this.options.returnedObjectHandler?this.options.returnedObjectHandler(N,B,{...i,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return a?(b.res=F,b.usedParams=this.getUsedParamsDetails(i),b):F}if(l){const F=Array.isArray(B),z=F?[]:{},H=F?T:N;for(const K in B)if(Object.prototype.hasOwnProperty.call(B,K)){const q=`${H}${l}${K}`;_&&!S?z[K]=this.translate(q,{...i,defaultValue:n2(A)?A[K]:void 0,joinArrays:!1,ns:u}):z[K]=this.translate(q,{...i,joinArrays:!1,ns:u}),z[K]===q&&(z[K]=B[K])}S=z}}else if(k&&ct(L)&&Array.isArray(S))S=S.join(L),S&&(S=this.extendTranslation(S,e,i,r));else{let F=!1,z=!1;!this.isValidLookup(S)&&_&&(F=!0,S=A),this.isValidLookup(S)||(z=!0,S=d);const K=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&z?void 0:S,q=_&&A!==S&&this.options.updateMissing;if(z||F||q){if(this.logger.log(q?"updateKey":"missingKey",g,h,d,q?A:S),l){const U=this.resolve(d,{...i,keySeparator:!1});U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let G=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let U=0;U<re.length;U++)G.push(re[U]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(i.lng||this.language):G.push(i.lng||this.language);const se=(U,Y,ie)=>{var pe;const X=_&&ie!==S?ie:K;this.options.missingKeyHandler?this.options.missingKeyHandler(U,h,Y,X,q,i):(pe=this.backendConnector)!=null&&pe.saveMissing&&this.backendConnector.saveMissing(U,h,Y,X,q,i),this.emit("missingKey",U,h,Y,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?G.forEach(U=>{const Y=this.pluralResolver.getSuffixes(U,i);w&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(ie=>{se([U],d+ie,i[`defaultValue${ie}`]||A)})}):se(G,d,A))}S=this.extendTranslation(S,e,i,b,r),z&&S===d&&this.options.appendNamespaceToMissingKey&&(S=`${h}${p}${d}`),(z||F)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${d}`:d,F?S:void 0,i))}return a?(b.res=S,b.usedParams=this.getUsedParamsDetails(i),b):S}extendTranslation(e,s,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=ct(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let y=r.replace&&!ct(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,r.lng||this.language||i.usedLng,r),p){const b=e.match(this.interpolator.nestingRegexp),S=b&&b.length;g<S&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${s[0]}`),null):this.translate(...b,s),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,d=ct(l)?[l]:l;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=Rk.handle(d,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,s={}){let r,i,a,l,d;return ct(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,s),p=h.key;i=p;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=s.count!==void 0&&!ct(s.count),b=y&&!s.ordinal&&s.count===0,S=s.context!==void 0&&(ct(s.context)||typeof s.context=="number")&&s.context!=="",N=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);g.forEach(T=>{var M,L;this.isValidLookup(r)||(d=T,!s2[`${N[0]}-${T}`]&&((M=this.utils)!=null&&M.hasLoadedNamespace)&&!((L=this.utils)!=null&&L.hasLoadedNamespace(d))&&(s2[`${N[0]}-${T}`]=!0,this.logger.warn(`key "${i}" for languages "${N.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(k=>{var P;if(this.isValidLookup(r))return;l=k;const v=[p];if((P=this.i18nFormat)!=null&&P.addLookupKeys)this.i18nFormat.addLookupKeys(v,p,k,T,s);else{let E;y&&(E=this.pluralResolver.getSuffix(k,s.count,s));const w=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(s.ordinal&&E.indexOf(A)===0&&v.push(p+E.replace(A,this.options.pluralSeparator)),v.push(p+E),b&&v.push(p+w)),S){const B=`${p}${this.options.contextSeparator||"_"}${s.context}`;v.push(B),y&&(s.ordinal&&E.indexOf(A)===0&&v.push(B+E.replace(A,this.options.pluralSeparator)),v.push(B+E),b&&v.push(B+w))}}let _;for(;_=v.pop();)this.isValidLookup(r)||(a=_,r=this.getResource(k,T,_,s))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:l,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,s,r,i):this.resourceStore.getResource(e,s,r,i)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ct(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of s)delete i[a]}return i}static hasDefaultValue(e){const s="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s===r.substring(0,s.length)&&e[r]!==void 0)return!0;return!1}}class r2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ei.create("languageUtils")}getScriptPartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=th(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(ct(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(r){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(r=>{if(s)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&e.forEach(r=>{if(s)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return s=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),ct(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let r=e[s];return r||(r=e[this.getScriptPartFromCode(s)]),r||(r=e[this.formatLanguageCode(s)]),r||(r=e[this.getLanguagePartFromCode(s)]),r||(r=e.default),r||[]}toResolveHierarchy(e,s){const r=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),i=[],a=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ct(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):ct(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&a(this.formatLanguageCode(l))}),i}}const i2={zero:0,one:1,two:2,few:3,many:4,other:5},a2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class K4{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=Ei.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const r=th(e==="dev"?"en":e),i=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:i})}catch(d){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),a2;if(!e.match(/-|_/))return a2;const u=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(u,s)}return this.pluralRulesCache[a]=l,l}needsPlural(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,s,r={}){return this.getSuffixes(e,r).map(i=>`${s}${i}`)}getSuffixes(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>i2[i]-i2[a]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,s,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,r))}}const o2=(t,e,s,r=".",i=!0)=>{let a=B4(t,e,s);return!a&&i&&ct(s)&&(a=Ty(t,s,r),a===void 0&&(a=Ty(e,s,r))),a},gv=t=>t.replace(/\$/g,"$$$$");class Q4{constructor(e={}){var s;this.logger=Ei.create("interpolator"),this.options=e,this.format=((s=e==null?void 0:e.interpolation)==null?void 0:s.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:l,suffix:d,suffixEscaped:u,formatSeparator:h,unescapeSuffix:p,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:b,nestingSuffix:S,nestingSuffixEscaped:N,nestingOptionsSeparator:T,maxReplaces:M,alwaysFormat:L}=e.interpolation;this.escape=s!==void 0?s:O4,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Tc(a):l||"{{",this.suffix=d?Tc(d):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?Tc(y):b||Tc("$t("),this.nestingSuffix=S?Tc(S):N||Tc(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=M||1e3,this.alwaysFormat=L!==void 0?L:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,r)=>(s==null?void 0:s.source)===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,s,r,i){var b;let a,l,d;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=S=>{if(S.indexOf(this.formatSeparator)<0){const L=o2(s,u,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,r,{...i,...s,interpolationkey:S}):L}const N=S.split(this.formatSeparator),T=N.shift().trim(),M=N.join(this.formatSeparator).trim();return this.format(o2(s,u,T,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...i,...s,interpolationkey:T})};this.resetRegExp();const p=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>gv(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?gv(this.escape(S)):gv(S)}].forEach(S=>{for(d=0;a=S.regex.exec(e);){const N=a[1].trim();if(l=h(N),l===void 0)if(typeof p=="function"){const M=p(e,a,i);l=ct(M)?M:""}else if(i&&Object.prototype.hasOwnProperty.call(i,N))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${N} for interpolating ${e}`),l="";else!ct(l)&&!this.useRawValueToEscape&&(l=Xw(l));const T=S.safeValue(l);if(e=e.replace(a[0],T),g?(S.regex.lastIndex+=l.length,S.regex.lastIndex-=a[0].length):S.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,s,r={}){let i,a,l;const d=(u,h)=>{var N;const p=this.nestingOptionsSeparator;if(u.indexOf(p)<0)return u;const g=u.split(new RegExp(`${p}[ ]*{`));let y=`{${g[1]}`;u=g[0],y=this.interpolate(y,l);const b=y.match(/'/g),S=y.match(/"/g);(((N=b==null?void 0:b.length)!=null?N:0)%2===0&&!S||S.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),h&&(l={...h,...l})}catch(T){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,T),`${u}${p}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];l={...r},l=l.replace&&!ct(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=s(d.call(this,i[1].trim(),l),l),a&&i[0]===e&&!ct(a))return a;ct(a)||(a=Xw(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((p,g)=>this.format(p,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const Y4=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(l=>{if(l){const[d,...u]=l.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),p=d.trim();s[p]||(s[p]=h),h==="false"&&(s[p]=!1),h==="true"&&(s[p]=!0),isNaN(h)||(s[p]=parseInt(h,10))}})}return{formatName:e,formatOptions:s}},l2=t=>{const e={};return(s,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const l=r+JSON.stringify(a);let d=e[l];return d||(d=t(th(r),i),e[l]=d),d(s)}},X4=t=>(e,s,r)=>t(th(s),r)(e);class J4{constructor(e={}){this.logger=Ei.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const r=s.cacheInBuiltFormats?l2:X4;this.formats={number:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a});return d=>l.format(d)}),currency:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a,style:"currency"});return d=>l.format(d)}),datetime:r((i,a)=>{const l=new Intl.DateTimeFormat(i,{...a});return d=>l.format(d)}),relativetime:r((i,a)=>{const l=new Intl.RelativeTimeFormat(i,{...a});return d=>l.format(d,a.range||"day")}),list:r((i,a)=>{const l=new Intl.ListFormat(i,{...a});return d=>l.format(d)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=l2(s)}format(e,s,r,i={}){const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(d=>d.indexOf(")")>-1)){const d=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,d)].join(this.formatSeparator)}return a.reduce((d,u)=>{var g;const{formatName:h,formatOptions:p}=Y4(u);if(this.formats[h]){let y=d;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},S=b.locale||b.lng||i.locale||i.lng||r;y=this.formats[h](d,S,{...p,...i,...b})}catch(b){this.logger.warn(b)}return y}else this.logger.warn(`there was no format function for ${h}`);return d},e)}}const Z4=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class eI extends Qf{constructor(e,s,r,i={}){var a,l;super(),this.backend=e,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Ei.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(a=this.backend)==null?void 0:a.init)==null||l.call(a,r,i.backend,i)}queueLoad(e,s,r,i){const a={},l={},d={},u={};return e.forEach(h=>{let p=!0;s.forEach(g=>{const y=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,p=!1,l[y]===void 0&&(l[y]=!0),a[y]===void 0&&(a[y]=!0),u[g]===void 0&&(u[g]=!0)))}),p||(d[h]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(u)}}loaded(e,s,r){const i=e.split("|"),a=i[0],l=i[1];s&&this.emit("failedLoading",a,l,s),!s&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&r&&(this.state[e]=0);const d={};this.queue.forEach(u=>{F4(u.loaded,[a],l),Z4(u,e),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{d[h]||(d[h]={});const p=u.loaded[h];p.length&&p.forEach(g=>{d[h][g]===void 0&&(d[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(u=>!u.done)}read(e,s,r,i=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:r,tried:i,wait:a,callback:l});return}this.readingCalls++;const d=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&p&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,r,i+1,a*2,l)},a);return}l(h,p)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,s);h&&typeof h.then=="function"?h.then(p=>d(null,p)).catch(d):d(null,h)}catch(h){d(h)}return}return u(e,s,d)}prepareLoading(e,s,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ct(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ct(s)&&(s=[s]);const a=this.queueLoad(e,s,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,s,r){this.prepareLoading(e,s,{},r)}reload(e,s,r){this.prepareLoading(e,s,{reload:!0},r)}loadOne(e,s=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(l,d)=>{l&&this.logger.warn(`${s}loading namespace ${a} for language ${i} failed`,l),!l&&d&&this.logger.log(`${s}loaded namespace ${a} for language ${i}`,d),this.loaded(e,l,d)})}saveMissing(e,s,r,i,a,l={},d=()=>{}){var u,h,p,g,y;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((y=this.backend)!=null&&y.create){const b={...l,isUpdate:a},S=this.backend.create.bind(this.backend);if(S.length<6)try{let N;S.length===5?N=S(e,s,r,i,b):N=S(e,s,r,i),N&&typeof N.then=="function"?N.then(T=>d(null,T)).catch(d):d(null,N)}catch(N){d(N)}else S(e,s,r,i,d,b)}!e||!e[0]||this.store.addResource(e[0],s,r,i)}}}const c2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ct(t[1])&&(e.defaultValue=t[1]),ct(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(r=>{e[r]=s[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),d2=t=>{var e,s;return ct(t.ns)&&(t.ns=[t.ns]),ct(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ct(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((s=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:s.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},dm=()=>{},tI=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class sh extends Qf{constructor(e={},s){if(super(),this.options=d2(e),this.services={},this.logger=Ei,this.modules={external:[]},tI(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(ct(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=c2();this.options={...r,...this.options,...d2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Ei.init(i(this.modules.logger),this.options):Ei.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=J4;const p=new r2(this.options);this.store=new t2(this.options.resources,this.options);const g=this.services;g.logger=Ei,g.resourceStore=this.store,g.languageUtils=p,g.pluralResolver=new K4(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Q4(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new eI(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new pf(this.services,this.options),this.translator.on("*",(b,...S)=>{this.emit(b,...S)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=dm),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const d=mu(),u=()=>{const h=(p,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(g),s(p,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),d}loadResources(e,s=dm){var a,l;let r=s;const i=ct(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>u(p)),(l=(a=this.options.preload)==null?void 0:a.forEach)==null||l.call(a,h=>u(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,s,r){const i=mu();return typeof e=="function"&&(r=e,e=void 0),typeof s=="function"&&(r=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),r||(r=dm),this.services.backendConnector.reload(e,s,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Rk.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const r=mu();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),s&&s(d,(...h)=>this.t(...h))},l=d=>{var p,g;!e&&!d&&this.services.languageDetector&&(d=[]);const u=ct(d)?d:d&&d[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(ct(d)?[d]:d);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||g.call(p,h)),this.loadResources(h,y=>{a(y,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,r){const i=(a,l,...d)=>{let u;typeof l!="object"?u=this.options.overloadTranslationOptionHandler([a,l].concat(d)):u={...l},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let p;return u.keyPrefix&&Array.isArray(a)?p=a.map(g=>(typeof g=="function"&&(g=Ey(g,{...this.options,...l})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=Ey(a,{...this.options,...l})),p=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(p,u)};return ct(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=r,i}t(...e){var s;return(s=this.translator)==null?void 0:s.translate(...e)}exists(...e){var s;return(s=this.translator)==null?void 0:s.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(d,u)=>{const h=this.services.backendConnector.state[`${d}|${u}`];return h===-1||h===0||h===2};if(s.precheck){const d=s.precheck(this,l);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(a,e)))}loadNamespaces(e,s){const r=mu();return this.options.ns?(ct(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),s&&s(i)}),r):(s&&s(),Promise.resolve())}loadLanguages(e,s){const r=mu();ct(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=i.concat(a),this.loadResources(l=>{r.resolve(),s&&s(l)}),r):(s&&s(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const d=l.getTextInfo();if(d&&d.direction)return d.direction}}catch(l){}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new r2(c2());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new sh(e,s)}cloneInstance(e={},s=dm){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new sh(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(d=>{a[d]=this[d]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const d=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((p,g)=>(p[g]={...u[h][g]},p),u[h]),u),{});a.store=new t2(d,i),a.services.resourceStore=a.store}return a.translator=new pf(a.services,i),a.translator.on("*",(d,...u)=>{a.emit(d,...u)}),a.init(i,s),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const yn=sh.createInstance();yn.createInstance=sh.createInstance;yn.createInstance;yn.dir;yn.init;yn.loadResources;yn.reloadResources;yn.use;yn.changeLanguage;yn.getFixedT;yn.t;yn.exists;yn.setDefaultNamespace;yn.hasLoadedNamespace;yn.loadNamespaces;yn.loadLanguages;const sI=(t,e,s,r)=>{var a,l,d,u;const i=[s,{code:e,...r||{}}];if((l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);_l(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},u2={},Ay=(t,e,s,r)=>{_l(s)&&u2[s]||(_l(s)&&(u2[s]=new Date),sI(t,e,s,r))},Lk=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},Iy=(t,e,s)=>{t.loadNamespaces(e,Lk(t,s))},h2=(t,e,s,r)=>{if(_l(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Iy(t,s,r);s.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,Lk(t,r))},nI=(t,e,s={})=>!e.languages||!e.languages.length?(Ay(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),_l=t=>typeof t=="string",rI=t=>typeof t=="object"&&t!==null,iI=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,aI={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},oI=t=>aI[t],lI=t=>t.replace(iI,oI);let Ry={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:lI};const cI=(t={})=>{Ry={...Ry,...t}},dI=()=>Ry;let Dk;const uI=t=>{Dk=t},hI=()=>Dk,pI={type:"3rdParty",init(t){cI(t.options.react),uI(t)}},mI=I.createContext();class fI{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const gI=(t,e)=>{const s=I.useRef();return I.useEffect(()=>{s.current=t},[t,e]),s.current},Mk=(t,e,s,r)=>t.getFixedT(e,s,r),xI=(t,e,s,r)=>I.useCallback(Mk(t,e,s,r),[t,e,s,r]),fd=(t,e={})=>{var v,_,P,E;const{i18n:s}=e,{i18n:r,defaultNS:i}=I.useContext(mI)||{},a=s||r||hI();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new fI),!a){Ay(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const w=(B,D)=>_l(D)?D:rI(D)&&_l(D.defaultValue)?D.defaultValue:Array.isArray(B)?B[B.length-1]:B,A=[w,{},!1];return A.t=w,A.i18n={},A.ready=!1,A}(v=a.options.react)!=null&&v.wait&&Ay(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...dI(),...a.options.react,...e},{useSuspense:d,keyPrefix:u}=l;let h=i||((_=a.options)==null?void 0:_.defaultNS);h=_l(h)?[h]:h||["translation"],(E=(P=a.reportNamespaces).addUsedNamespaces)==null||E.call(P,h);const p=(a.isInitialized||a.initializedStoreOnce)&&h.every(w=>nI(w,a,l)),g=xI(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),y=()=>g,b=()=>Mk(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),[S,N]=I.useState(y);let T=h.join();e.lng&&(T=`${e.lng}${T}`);const M=gI(T),L=I.useRef(!0);I.useEffect(()=>{const{bindI18n:w,bindI18nStore:A}=l;L.current=!0,!p&&!d&&(e.lng?h2(a,e.lng,h,()=>{L.current&&N(b)}):Iy(a,h,()=>{L.current&&N(b)})),p&&M&&M!==T&&L.current&&N(b);const B=()=>{L.current&&N(b)};return w&&(a==null||a.on(w,B)),A&&(a==null||a.store.on(A,B)),()=>{L.current=!1,a&&w&&(w==null||w.split(" ").forEach(D=>a.off(D,B))),A&&a&&A.split(" ").forEach(D=>a.store.off(D,B))}},[a,T]),I.useEffect(()=>{L.current&&p&&N(y)},[a,u,p]);const k=[S,a,p];if(k.t=S,k.i18n=a,k.ready=p,p||!p&&!d)return k;throw new Promise(w=>{e.lng?h2(a,e.lng,h,()=>w()):Iy(a,h,()=>w())})},vI={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community"},yI={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}}},bI={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},_I={search:"Search?  /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},wI={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},jI={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},SI={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},NI={nav:vI,account:yI,tools:bI,topbar:_I,profile:wI,help:jI,footer:SI},kI={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community"},TI={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fr deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}}},CI={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},EI={search:"Suchen?  /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},AI={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},II={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},RI={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},PI={nav:kI,account:TI,tools:CI,topbar:EI,profile:AI,help:II,footer:RI},LI={en:{translation:NI},de:{translation:PI}};yn.use(pI).init({resources:LI,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function lt(t,e="en"){return yn.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var p2="popstate";function DI(t={}){function e(i,a){let{pathname:l="/",search:d="",hash:u=""}=Ll(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Py("",{pathname:l,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");d=h===-1?u:u.slice(0,h)}return d+"#"+(typeof a=="string"?a:nh(a))}function r(i,a){_r(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return FI(e,s,r,t)}function ms(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function _r(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(s){}}}function MI(){return Math.random().toString(36).substring(2,10)}function m2(t,e){return{usr:t.state,key:t.key,idx:e}}function Py(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:s,key:e&&e.key||r||MI()}}function nh({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Ll(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function FI(t,e,s,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",u=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function g(){d="POP";let T=p(),M=T==null?null:T-h;h=T,u&&u({action:d,location:N.location,delta:M})}function y(T,M){d="PUSH";let L=Py(N.location,T,M);s&&s(L,T),h=p()+1;let k=m2(L,h),v=N.createHref(L);try{l.pushState(k,"",v)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(v)}a&&u&&u({action:d,location:N.location,delta:1})}function b(T,M){d="REPLACE";let L=Py(N.location,T,M);s&&s(L,T),h=p();let k=m2(L,h),v=N.createHref(L);l.replaceState(k,"",v),a&&u&&u({action:d,location:N.location,delta:0})}function S(T){return BI(T)}let N={get action(){return d},get location(){return t(i,l)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(p2,g),u=T,()=>{i.removeEventListener(p2,g),u=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let M=S(T);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:y,replace:b,go(T){return l.go(T)}};return N}function BI(t,e=!1){let s="http://localhost";typeof window!="undefined"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ms(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:nh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function Fk(t,e,s="/"){return $I(t,e,s,!1)}function $I(t,e,s,r){let i=typeof e=="string"?Ll(e):e,a=ya(i.pathname||"/",s);if(a==null)return null;let l=Bk(t);OI(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=XI(a);d=QI(l[u],h,r)}return d}function Bk(t,e=[],s=[],r="",i=!1){let a=(l,d,u=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;ms(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=ga([r,p.relativePath]),y=s.concat(p);l.children&&l.children.length>0&&(ms(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Bk(l.children,e,y,g,u)),!(l.path==null&&!l.index)&&e.push({path:g,score:qI(g,l.index),routesMeta:y})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))a(l,d);else for(let h of $k(l.path))a(l,d,!0,h)}),e}function $k(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=$k(r.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),i&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function OI(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:KI(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var VI=/^:[\w-]+$/,UI=3,zI=2,HI=1,GI=10,WI=-2,f2=t=>t==="*";function qI(t,e){let s=t.split("/"),r=s.length;return s.some(f2)&&(r+=WI),e&&(r+=zI),s.filter(i=>!f2(i)).reduce((i,a)=>i+(VI.test(a)?UI:a===""?HI:GI),r)}function KI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QI(t,e,s=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",g=mf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!g&&h&&s&&!r[r.length-1].route.index&&(g=mf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:ga([a,g.pathname]),pathnameBase:tR(ga([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=ga([a,g.pathnameBase]))}return l}function mf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=YI(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:g},y)=>{if(p==="*"){let S=d[y]||"";l=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const b=d[y];return g&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:t}}function YI(t,e=!1,s=!0){_r(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _r(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ya(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function JI(t,e="/"){let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Ll(t):t;return{pathname:s?s.startsWith("/")?s:ZI(s,e):e,search:sR(r),hash:nR(i)}}function ZI(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function xv(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eR(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function F0(t){let e=eR(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function B0(t,e,s,r=!1){let i;typeof t=="string"?i=Ll(t):(i={...t},ms(!i.pathname||!i.pathname.includes("?"),xv("?","pathname","search",i)),ms(!i.pathname||!i.pathname.includes("#"),xv("#","pathname","hash",i)),ms(!i.search||!i.search.includes("#"),xv("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=s;else{let g=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}d=g>=0?e[g]:"/"}let u=JI(i,d),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var ga=t=>t.join("/").replace(/\/\/+/g,"/"),tR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function rR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Ok=["POST","PUT","PATCH","DELETE"];new Set(Ok);var iR=["GET",...Ok];new Set(iR);var gd=I.createContext(null);gd.displayName="DataRouter";var Yf=I.createContext(null);Yf.displayName="DataRouterState";I.createContext(!1);var Vk=I.createContext({isTransitioning:!1});Vk.displayName="ViewTransition";var aR=I.createContext(new Map);aR.displayName="Fetchers";var oR=I.createContext(null);oR.displayName="Await";var pi=I.createContext(null);pi.displayName="Navigation";var jh=I.createContext(null);jh.displayName="Location";var Or=I.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var $0=I.createContext(null);$0.displayName="RouteError";function lR(t,{relative:e}={}){ms(xd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=I.useContext(pi),{hash:i,pathname:a,search:l}=Sh(t,{relative:e}),d=a;return s!=="/"&&(d=a==="/"?s:ga([s,a])),r.createHref({pathname:d,search:l,hash:i})}function xd(){return I.useContext(jh)!=null}function ir(){return ms(xd(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(jh).location}var Uk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zk(t){I.useContext(pi).static||I.useLayoutEffect(t)}function Vr(){let{isDataRoute:t}=I.useContext(Or);return t?jR():cR()}function cR(){ms(xd(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(gd),{basename:e,navigator:s}=I.useContext(pi),{matches:r}=I.useContext(Or),{pathname:i}=ir(),a=JSON.stringify(F0(r)),l=I.useRef(!1);return zk(()=>{l.current=!0}),I.useCallback((u,h={})=>{if(_r(l.current,Uk),!l.current)return;if(typeof u=="number"){s.go(u);return}let p=B0(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ga([e,p.pathname])),(h.replace?s.replace:s.push)(p,h.state,h)},[e,s,a,i,t])}var dR=I.createContext(null);function uR(t){let e=I.useContext(Or).outlet;return e&&I.createElement(dR.Provider,{value:t},e)}function Xf(){let{matches:t}=I.useContext(Or),e=t[t.length-1];return e?e.params:{}}function Sh(t,{relative:e}={}){let{matches:s}=I.useContext(Or),{pathname:r}=ir(),i=JSON.stringify(F0(s));return I.useMemo(()=>B0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function hR(t,e){return Hk(t,e)}function Hk(t,e,s,r,i){var L;ms(xd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=I.useContext(pi),{matches:l}=I.useContext(Or),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",g=d&&d.route;{let k=g&&g.path||"";Gk(h,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=ir(),b;if(e){let k=typeof e=="string"?Ll(e):e;ms(p==="/"||((L=k.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),b=k}else b=y;let S=b.pathname||"/",N=S;if(p!=="/"){let k=p.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=Fk(t,{pathname:N});_r(g||T!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),_r(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=xR(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:ga([p,a.encodeLocation?a.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ga([p,a.encodeLocation?a.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),l,s,r,i);return e&&M?I.createElement(jh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},M):M}function pR(){let t=wR(),e=rR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:a},"ErrorBoundary")," or"," ",I.createElement("code",{style:a},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),s?I.createElement("pre",{style:i},s):null,l)}var mR=I.createElement(pR,null),fR=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?I.createElement(Or.Provider,{value:this.props.routeContext},I.createElement($0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gR({routeContext:t,match:e,children:s}){let r=I.useContext(gd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Or.Provider,{value:t},s)}function xR(t,e=[],s=null,r=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,l=s==null?void 0:s.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);ms(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,u=-1;if(s)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:g,errors:y}=s,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){d=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,p,g)=>{let y,b=!1,S=null,N=null;s&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||mR,d&&(u<0&&g===0?(Gk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):u===g&&(b=!0,N=p.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,g+1)),M=()=>{let L;return y?L=S:b?L=N:p.route.Component?L=I.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=h,I.createElement(gR,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:s!=null},children:L})};return s&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?I.createElement(fR,{location:s.location,revalidation:s.revalidation,component:S,error:y,children:M(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:r}):M()},null)}function O0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vR(t){let e=I.useContext(gd);return ms(e,O0(t)),e}function yR(t){let e=I.useContext(Yf);return ms(e,O0(t)),e}function bR(t){let e=I.useContext(Or);return ms(e,O0(t)),e}function V0(t){let e=bR(t),s=e.matches[e.matches.length-1];return ms(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function _R(){return V0("useRouteId")}function wR(){var r;let t=I.useContext($0),e=yR("useRouteError"),s=V0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function jR(){let{router:t}=vR("useNavigate"),e=V0("useNavigate"),s=I.useRef(!1);return zk(()=>{s.current=!0}),I.useCallback(async(i,a={})=>{_r(s.current,Uk),s.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var g2={};function Gk(t,e,s){!e&&!g2[t]&&(g2[t]=!0,_r(!1,s))}I.memo(SR);function SR({routes:t,future:e,state:s,unstable_onError:r}){return Hk(t,void 0,s,r,e)}function hl({to:t,replace:e,state:s,relative:r}){ms(xd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(pi);_r(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=I.useContext(Or),{pathname:l}=ir(),d=Vr(),u=B0(t,F0(a),l,r==="path"),h=JSON.stringify(u);return I.useEffect(()=>{d(JSON.parse(h),{replace:e,state:s,relative:r})},[d,h,r,e,s]),null}function Wk(t){return uR(t.context)}function fe(t){ms(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NR({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:i,static:a=!1}){ms(!xd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof s=="string"&&(s=Ll(s));let{pathname:u="/",search:h="",hash:p="",state:g=null,key:y="default"}=s,b=I.useMemo(()=>{let S=ya(u,l);return S==null?null:{location:{pathname:S,search:h,hash:p,state:g,key:y},navigationType:r}},[l,u,h,p,g,y,r]);return _r(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:I.createElement(pi.Provider,{value:d},I.createElement(jh.Provider,{children:e,value:b}))}function kR({children:t,location:e}){return hR(Ly(t),e)}function Ly(t,e=[]){let s=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let a=[...e,i];if(r.type===I.Fragment){s.push.apply(s,Ly(r.props.children,a));return}ms(r.type===fe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ms(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Ly(r.props.children,a)),s.push(l)}),s}var Vm="get",Um="application/x-www-form-urlencoded";function Jf(t){return t!=null&&typeof t.tagName=="string"}function TR(t){return Jf(t)&&t.tagName.toLowerCase()==="button"}function CR(t){return Jf(t)&&t.tagName.toLowerCase()==="form"}function ER(t){return Jf(t)&&t.tagName.toLowerCase()==="input"}function AR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IR(t,e){return t.button===0&&(!e||e==="_self")&&!AR(t)}function Dy(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function RR(t,e){let s=Dy(t);return e&&e.forEach((r,i)=>{s.has(i)||e.getAll(i).forEach(a=>{s.append(i,a)})}),s}var um=null;function PR(){if(um===null)try{new FormData(document.createElement("form"),0),um=!1}catch(t){um=!0}return um}var LR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vv(t){return t!=null&&!LR.has(t)?(_r(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Um}"`),null):t}function DR(t,e){let s,r,i,a,l;if(CR(t)){let d=t.getAttribute("action");r=d?ya(d,e):null,s=t.getAttribute("method")||Vm,i=vv(t.getAttribute("enctype"))||Um,a=new FormData(t)}else if(TR(t)||ER(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(r=u?ya(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||Vm,i=vv(t.getAttribute("formenctype"))||vv(d.getAttribute("enctype"))||Um,a=new FormData(d,t),!PR()){let{name:h,type:p,value:g}=t;if(p==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,g)}}else{if(Jf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Vm,r=null,i=Um,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:s.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U0(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function MR(t,e,s){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&ya(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function FR(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $R(t,e,s){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await FR(a,s);return l.links?l.links():[]}return[]}));return zR(r.flat(1).filter(BR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function x2(t,e,s,r,i,a){let l=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>{var p;return s[h].pathname!==u.pathname||((p=s[h].route.path)==null?void 0:p.endsWith("*"))&&s[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>l(u,h)||d(u,h)):a==="data"?e.filter((u,h)=>{var g;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=s[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function OR(t,e,{includeHydrateFallback:s}={}){return VR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function VR(t){return[...new Set(t)]}function UR(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function zR(t,e){let s=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(UR(i));return s.has(a)||(s.add(a),r.push({key:a,link:i})),r},[])}function qk(){let t=I.useContext(gd);return U0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HR(){let t=I.useContext(Yf);return U0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var z0=I.createContext(void 0);z0.displayName="FrameworkContext";function Kk(){let t=I.useContext(z0);return U0(t,"You must render this element inside a <HydratedRouter> element"),t}function GR(t,e){let s=I.useContext(z0),[r,i]=I.useState(!1),[a,l]=I.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=e,y=I.useRef(null);I.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let N=M=>{M.forEach(L=>{l(L.isIntersecting)})},T=new IntersectionObserver(N,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[t]),I.useEffect(()=>{if(r){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[r]);let b=()=>{i(!0)},S=()=>{i(!1),l(!1)};return s?t!=="intent"?[a,y,{}]:[a,y,{onFocus:fu(d,b),onBlur:fu(u,S),onMouseEnter:fu(h,b),onMouseLeave:fu(p,S),onTouchStart:fu(g,b)}]:[!1,y,{}]}function fu(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function WR({page:t,...e}){let{router:s}=qk(),r=I.useMemo(()=>Fk(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?I.createElement(KR,{page:t,matches:r,...e}):null}function qR(t){let{manifest:e,routeModules:s}=Kk(),[r,i]=I.useState([]);return I.useEffect(()=>{let a=!1;return $R(t,e,s).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,s]),r}function KR({page:t,matches:e,...s}){let r=ir(),{manifest:i,routeModules:a}=Kk(),{basename:l}=qk(),{loaderData:d,matches:u}=HR(),h=I.useMemo(()=>x2(t,e,u,i,r,"data"),[t,e,u,i,r]),p=I.useMemo(()=>x2(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,N=!1;if(e.forEach(M=>{var k;let L=i.routes[M.route.id];!L||!L.hasLoader||(!h.some(v=>v.route.id===M.route.id)&&M.route.id in d&&((k=a[M.route.id])!=null&&k.shouldRevalidate)||L.hasClientLoader?N=!0:S.add(M.route.id))}),S.size===0)return[];let T=MR(t,l,"data");return N&&S.size>0&&T.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[T.pathname+T.search]},[l,d,r,i,h,e,t,a]),y=I.useMemo(()=>OR(p,i),[p,i]),b=qR(p);return I.createElement(I.Fragment,null,g.map(S=>I.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...s})),y.map(S=>I.createElement("link",{key:S,rel:"modulepreload",href:S,...s})),b.map(({key:S,link:N})=>I.createElement("link",{key:S,nonce:s.nonce,...N})))}function QR(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Qk=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{Qk&&(window.__reactRouterVersion="7.9.1")}catch(t){}function YR({basename:t,children:e,window:s}){let r=I.useRef();r.current==null&&(r.current=DI({window:s,v5Compat:!0}));let i=r.current,[a,l]=I.useState({action:i.action,location:i.location}),d=I.useCallback(u=>{I.startTransition(()=>l(u))},[l]);return I.useLayoutEffect(()=>i.listen(d),[i,d]),I.createElement(NR,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var Yk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qt=I.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:u,to:h,preventScrollReset:p,viewTransition:g,...y},b){let{basename:S}=I.useContext(pi),N=typeof h=="string"&&Yk.test(h),T,M=!1;if(typeof h=="string"&&N&&(T=h,Qk))try{let A=new URL(window.location.href),B=h.startsWith("//")?new URL(A.protocol+h):new URL(h),D=ya(B.pathname,S);B.origin===A.origin&&D!=null?h=D+B.search+B.hash:M=!0}catch(A){_r(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=lR(h,{relative:i}),[k,v,_]=GR(r,y),P=ZR(h,{replace:l,state:d,target:u,preventScrollReset:p,relative:i,viewTransition:g});function E(A){e&&e(A),A.defaultPrevented||P(A)}let w=I.createElement("a",{...y,..._,href:T||L,onClick:M||a?e:E,ref:QR(b,v),target:u,"data-discover":!N&&s==="render"?"true":void 0});return k&&!N?I.createElement(I.Fragment,null,w,I.createElement(WR,{page:L})):w});qt.displayName="Link";var hs=I.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:u,...h},p){let g=Sh(l,{relative:h.relative}),y=ir(),b=I.useContext(Yf),{navigator:S,basename:N}=I.useContext(pi),T=b!=null&&rP(g)&&d===!0,M=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,L=y.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(L=L.toLowerCase(),k=k?k.toLowerCase():null,M=M.toLowerCase()),k&&N&&(k=ya(k,N)||k);const v=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let _=L===M||!i&&L.startsWith(M)&&L.charAt(v)==="/",P=k!=null&&(k===M||!i&&k.startsWith(M)&&k.charAt(M.length)==="/"),E={isActive:_,isPending:P,isTransitioning:T},w=_?e:void 0,A;typeof r=="function"?A=r(E):A=[r,_?"active":null,P?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(E):a;return I.createElement(qt,{...h,"aria-current":w,className:A,ref:p,style:B,to:l,viewTransition:d},typeof u=="function"?u(E):u)});hs.displayName="NavLink";var XR=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:i,state:a,method:l=Vm,action:d,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:g,...y},b)=>{let S=sP(),N=nP(d,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",M=typeof d=="string"&&Yk.test(d),L=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let v=k.nativeEvent.submitter,_=(v==null?void 0:v.getAttribute("formmethod"))||l;S(v||k.currentTarget,{fetcherKey:e,method:_,navigate:s,replace:i,state:a,relative:h,preventScrollReset:p,viewTransition:g})};return I.createElement("form",{ref:b,method:T,action:N,onSubmit:r?u:L,...y,"data-discover":!M&&t==="render"?"true":void 0})});XR.displayName="Form";function JR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xk(t){let e=I.useContext(gd);return ms(e,JR(t)),e}function ZR(t,{target:e,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=Vr(),u=ir(),h=Sh(t,{relative:a});return I.useCallback(p=>{if(IR(p,e)){p.preventDefault();let g=s!==void 0?s:nh(u)===nh(h);d(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,d,h,s,r,e,t,i,a,l])}function Dl(t){_r(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=I.useRef(Dy(t)),s=I.useRef(!1),r=ir(),i=I.useMemo(()=>RR(r.search,s.current?null:e.current),[r.search]),a=Vr(),l=I.useCallback((d,u)=>{const h=Dy(typeof d=="function"?d(new URLSearchParams(i)):d);s.current=!0,a("?"+h,u)},[a,i]);return[i,l]}var eP=0,tP=()=>`__${String(++eP)}__`;function sP(){let{router:t}=Xk("useSubmit"),{basename:e}=I.useContext(pi),s=_R();return I.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:u,body:h}=DR(r,e);if(i.navigate===!1){let p=i.fetcherKey||tP();await t.fetch(p,s,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,s])}function nP(t,{relative:e}={}){let{basename:s}=I.useContext(pi),r=I.useContext(Or);ms(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Sh(t||".",{relative:e})},l=ir();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),u=d.getAll("index");if(u.some(p=>p==="")){d.delete("index"),u.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:ga([s,a.pathname])),nh(a)}function rP(t,{relative:e}={}){let s=I.useContext(Vk);ms(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Xk("useViewTransitionState"),i=Sh(t,{relative:e});if(!s.isTransitioning)return!1;let a=ya(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=ya(s.nextLocation.pathname,r)||s.nextLocation.pathname;return mf(i.pathname,l)!=null||mf(i.pathname,a)!=null}var iP=Ak();const aP=D0(iP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),v2=t=>{const e=lP(t);return e.charAt(0).toUpperCase()+e.slice(1)},Jk=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),cP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},u)=>I.createElement("svg",{ref:u,...dP,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:Jk("lucide",i),...!a&&!cP(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,p])=>I.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,e)=>{const s=I.forwardRef(({className:r,...i},a)=>I.createElement(uP,{ref:a,iconNode:e,className:Jk(`lucide-${oP(v2(t))}`,`lucide-${t}`,r),...i}));return s.displayName=v2(t),s};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],Zf=ot("aperture",hP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],mP=ot("arrow-up-right",pP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gP=ot("ban",fP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],vP=ot("bell",xP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],bP=ot("book-open",yP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],wP=ot("chart-column",_P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],SP=ot("chevron-right",jP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bu=ot("circle-alert",NP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],TP=ot("circle-check",kP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],zm=ot("circle-dot",CP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],AP=ot("circle-user-round",EP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],RP=ot("clock-3",IP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],LP=ot("cloud-upload",PP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MP=ot("compass",DP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],BP=ot("database",FP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],Zk=ot("diamond",$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],VP=ot("file-text",OP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],zP=ot("folder-search",UP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],GP=ot("globe",HP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],eT=ot("hexagon",WP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],KP=ot("house",qP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],YP=ot("layers",QP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],JP=ot("layout-dashboard",XP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],go=ot("loader-circle",ZP);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],t6=ot("messages-square",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],n6=ot("pencil",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],i6=ot("pin-off",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],o6=ot("pin",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],eg=ot("refresh-ccw",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],d6=ot("scroll-text",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],My=ot("search",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],p6=ot("server-cog",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],f6=ot("settings",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],tT=ot("shapes",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],sT=ot("shield-alert",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],y6=ot("shield-check",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],nT=ot("shield-off",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ml=ot("shield",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],j6=ot("square-activity",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],N6=ot("star",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],T6=ot("sticky-note",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],H0=ot("triangle-alert",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],A6=ot("trophy",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],R6=ot("upload",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tg=ot("users",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],D6=ot("wrench",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],rT=ot("zap",M6),F6="_topbar_1lc6k_3",B6="_topbarLeft_1lc6k_39",$6="_searchWrap_1lc6k_55",O6="_topbarRight_1lc6k_109",V6="_ico_1lc6k_125",U6="_btnIco_1lc6k_139",z6="_pill_1lc6k_173",H6="_pillActive_1lc6k_195",G6="_onlyExpanded_1lc6k_203",W6="_topbarNav_1lc6k_205",q6="_topbarLink_1lc6k_215",K6="_upload_1lc6k_225",Q6="_label_1lc6k_255",Y6="_avatarBtn_1lc6k_261",X6="_avatar_1lc6k_261",J6="_avatarSpinnerShell_1lc6k_289",Z6="_avatarSpinner_1lc6k_289",eL="_srOnly_1lc6k_325",tL="_accountRoot_1lc6k_351",sL="_accountDropdown_1lc6k_359",nL="_accountHeader_1lc6k_389",rL="_accountName_1lc6k_401",iL="_accountSub_1lc6k_413",aL="_accountStatusText_1lc6k_423",oL="_accountPrimary_1lc6k_433",lL="_accountHint_1lc6k_455",cL="_accountItem_1lc6k_465",dL="_accountDivider_1lc6k_495",uL="_accountMiniAvatar_1lc6k_507",hL="_accountLogout_1lc6k_519",St={topbar:F6,topbarLeft:B6,searchWrap:$6,topbarRight:O6,ico:V6,btnIco:U6,pill:z6,pillActive:H6,onlyExpanded:G6,topbarNav:W6,topbarLink:q6,upload:K6,label:Q6,avatarBtn:Y6,avatar:X6,avatarSpinnerShell:J6,avatarSpinner:Z6,srOnly:eL,accountRoot:tL,accountDropdown:sL,accountHeader:nL,accountName:rL,accountSub:iL,accountStatusText:aL,accountPrimary:oL,accountHint:lL,accountItem:cL,accountDivider:dL,accountMiniAvatar:uL,accountLogout:hL},Co="https://auth.sfdatahub.com",pL=`${Co}/auth/firebase-token`;async function mL(){var r,i;const t=await fetch(pL,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),s=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!s)throw new Error("Firebase token missing in response");return s}var y2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},fL=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],l=t[s++],d=t[s++],u=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[s++],l=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},aT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=a>>2,g=(a&3)<<4|d>>4;let y=(d&15)<<2|h>>6,b=h&63;u||(b=64,l||(y=64)),r.push(s[p],s[g],s[y],s[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],d=i<t.length?s[t.charAt(i)]:0;++i;const h=i<t.length?s[t.charAt(i)]:64;++i;const g=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||d==null||h==null||g==null)throw new gL;const y=a<<2|d>>4;if(r.push(y),h!==64){const b=d<<4&240|h>>2;if(r.push(b),g!==64){const S=h<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xL=function(t){const e=iT(t);return aT.encodeByteArray(e,!0)},ff=function(t){return xL(t).replace(/\./g,"")},oT=function(t){try{return aT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=()=>vL().__FIREBASE_DEFAULTS__,bL=()=>{if(typeof process=="undefined"||typeof y2=="undefined")return;const t=y2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_L=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const e=t&&oT(t[1]);return e&&JSON.parse(e)},sg=()=>{try{return yL()||bL()||_L()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lT=t=>{var e,s;return(s=(e=sg())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},wL=t=>{const e=lT(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},cT=()=>{var t;return(t=sg())===null||t===void 0?void 0:t.config},dT=t=>{var e;return(e=sg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ff(JSON.stringify(s)),ff(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NL(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function kL(){var t;const e=(t=sg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(s){return!1}}function TL(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function CL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AL(){const t=An();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IL(){return!kL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RL(){try{return typeof indexedDB=="object"}catch(t){return!1}}function PL(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="FirebaseError";class Ca extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=LL,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nh.prototype.create)}}class Nh{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?DL(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Ca(i,d,r)}}function DL(t,e){return t.replace(ML,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ML=/\{\$([^}]+)}/g;function FL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gf(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(b2(a)&&b2(l)){if(!gf(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function b2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function BL(t,e){const s=new $L(t,e);return s.subscribe.bind(s)}class $L{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=yv),i.error===void 0&&(i.error=yv),i.complete===void 0&&(i.complete=yv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(l){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function yv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){return t&&t._delegate?t._delegate:t}class kl{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new jL;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zL(e))try{this.getOrInitializeService({instanceIdentifier:pl})}catch(s){}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pl){return this.instances.has(e)}getOptions(e=pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,s){var r;const i=this.normalizeInstanceIdentifier(s),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UL(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=pl){return this.component?this.component.multipleInstances?e:pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UL(t){return t===pl?void 0:t}function zL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new VL(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dt||(Dt={}));const GL={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},WL=Dt.INFO,qL={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},KL=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qL[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G0{constructor(e){this.name=e,this._logLevel=WL,this._logHandler=KL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...e),this._logHandler(this,Dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...e),this._logHandler(this,Dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...e),this._logHandler(this,Dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...e),this._logHandler(this,Dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...e),this._logHandler(this,Dt.ERROR,...e)}}const QL=(t,e)=>e.some(s=>t instanceof s);let _2,w2;function YL(){return _2||(_2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XL(){return w2||(w2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,Fy=new WeakMap,hT=new WeakMap,bv=new WeakMap,W0=new WeakMap;function JL(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{s(xo(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(s=>{s instanceof IDBCursor&&uT.set(s,t)}).catch(()=>{}),W0.set(e,t),e}function ZL(t){if(Fy.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{s(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Fy.set(t,e)}let By={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hT.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return xo(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eD(t){By=t(By)}function tD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(_v(this),e,...s);return hT.set(r,e.sort?e.sort():[e]),xo(r)}:XL().includes(t)?function(...e){return t.apply(_v(this),e),xo(uT.get(this))}:function(...e){return xo(t.apply(_v(this),e))}}function sD(t){return typeof t=="function"?tD(t):(t instanceof IDBTransaction&&ZL(t),QL(t,YL())?new Proxy(t,By):t)}function xo(t){if(t instanceof IDBRequest)return JL(t);if(bv.has(t))return bv.get(t);const e=sD(t);return e!==t&&(bv.set(t,e),W0.set(e,t)),e}const _v=t=>W0.get(t);function nD(t,e,{blocked:s,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=xo(l);return r&&l.addEventListener("upgradeneeded",u=>{r(xo(l.result),u.oldVersion,u.newVersion,xo(l.transaction),u)}),s&&l.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const rD=["get","getKey","getAll","getAllKeys","count"],iD=["put","add","delete","clear"],wv=new Map;function j2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wv.get(e))return wv.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=iD.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rD.includes(s)))return;const a=async function(l,...d){const u=this.transaction(l,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),i&&u.done]))[0]};return wv.set(e,a),a}eD(t=>({...t,get:(e,s,r)=>j2(e,s)||t.get(e,s,r),has:(e,s)=>!!j2(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(oD(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function oD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $y="@firebase/app",S2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new G0("@firebase/app"),lD="@firebase/app-compat",cD="@firebase/analytics-compat",dD="@firebase/analytics",uD="@firebase/app-check-compat",hD="@firebase/app-check",pD="@firebase/auth",mD="@firebase/auth-compat",fD="@firebase/database",gD="@firebase/data-connect",xD="@firebase/database-compat",vD="@firebase/functions",yD="@firebase/functions-compat",bD="@firebase/installations",_D="@firebase/installations-compat",wD="@firebase/messaging",jD="@firebase/messaging-compat",SD="@firebase/performance",ND="@firebase/performance-compat",kD="@firebase/remote-config",TD="@firebase/remote-config-compat",CD="@firebase/storage",ED="@firebase/storage-compat",AD="@firebase/firestore",ID="@firebase/vertexai-preview",RD="@firebase/firestore-compat",PD="firebase",LD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="[DEFAULT]",DD={[$y]:"fire-core",[lD]:"fire-core-compat",[dD]:"fire-analytics",[cD]:"fire-analytics-compat",[hD]:"fire-app-check",[uD]:"fire-app-check-compat",[pD]:"fire-auth",[mD]:"fire-auth-compat",[fD]:"fire-rtdb",[gD]:"fire-data-connect",[xD]:"fire-rtdb-compat",[vD]:"fire-fn",[yD]:"fire-fn-compat",[bD]:"fire-iid",[_D]:"fire-iid-compat",[wD]:"fire-fcm",[jD]:"fire-fcm-compat",[SD]:"fire-perf",[ND]:"fire-perf-compat",[kD]:"fire-rc",[TD]:"fire-rc-compat",[CD]:"fire-gcs",[ED]:"fire-gcs-compat",[AD]:"fire-fst",[RD]:"fire-fst-compat",[ID]:"fire-vertex","fire-js":"fire-js",[PD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Map,MD=new Map,Vy=new Map;function N2(t,e){try{t.container.addComponent(e)}catch(s){ba.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Zc(t){const e=t.name;if(Vy.has(e))return ba.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,t);for(const s of rh.values())N2(s,t);for(const s of MD.values())N2(s,t);return!0}function q0(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function ua(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new Nh("app","Firebase",FD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=LD;function pT(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Oy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vo.create("bad-app-name",{appName:String(i)});if(s||(s=cT()),!s)throw vo.create("no-options");const a=rh.get(i);if(a){if(gf(s,a.options)&&gf(r,a.config))return a;throw vo.create("duplicate-app",{appName:i})}const l=new HL(i);for(const u of Vy.values())l.addComponent(u);const d=new BD(s,r,l);return rh.set(i,d),d}function K0(t=Oy){const e=rh.get(t);if(!e&&t===Oy&&cT())return pT();if(!e)throw vo.create("no-app",{appName:t});return e}function $D(){return Array.from(rh.values())}function yo(t,e,s){var r;let i=(r=DD[t])!==null&&r!==void 0?r:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ba.warn(d.join(" "));return}Zc(new kl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firebase-heartbeat-database",VD=1,ih="firebase-heartbeat-store";let jv=null;function mT(){return jv||(jv=nD(OD,VD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ih)}catch(s){console.warn(s)}}}}).catch(t=>{throw vo.create("idb-open",{originalErrorMessage:t.message})})),jv}async function UD(t){try{const s=(await mT()).transaction(ih),r=await s.objectStore(ih).get(fT(t));return await s.done,r}catch(e){if(e instanceof Ca)ba.warn(e.message);else{const s=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ba.warn(s.message)}}}async function k2(t,e){try{const r=(await mT()).transaction(ih,"readwrite");await r.objectStore(ih).put(e,fT(t)),await r.done}catch(s){if(s instanceof Ca)ba.warn(s.message);else{const r=vo.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});ba.warn(r.message)}}}function fT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=1024,HD=720*60*60*1e3;class GD{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new qD(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=HD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ba.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=T2(),{heartbeatsToSend:r,unsentEntries:i}=WD(this._heartbeatsCache.heartbeats),a=ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return ba.warn(s),""}}}function T2(){return new Date().toISOString().substring(0,10)}function WD(t,e=zD){const s=[];let r=t.slice();for(const i of t){const a=s.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),C2(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),C2(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class qD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RL()?PL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await UD(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return k2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return k2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function C2(t){return ff(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){Zc(new kl("platform-logger",e=>new aD(e),"PRIVATE")),Zc(new kl("heartbeat",e=>new GD(e),"PRIVATE")),yo($y,S2,t),yo($y,S2,"esm2017"),yo("fire-js","")}KD("");var QD="firebase",YD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yo(QD,YD,"app");function Q0(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XD=gT,xT=new Nh("auth","Firebase",gT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new G0("@firebase/auth");function JD(t,...e){xf.logLevel<=Dt.WARN&&xf.warn(`Auth (${vd}): ${t}`,...e)}function Hm(t,...e){xf.logLevel<=Dt.ERROR&&xf.error(`Auth (${vd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,...e){throw Y0(t,...e)}function Ai(t,...e){return Y0(t,...e)}function vT(t,e,s){const r=Object.assign(Object.assign({},XD()),{[e]:s});return new Nh("auth","Firebase",r).create(e,{appName:t.name})}function bo(t){return vT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y0(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return xT.create(t,...e)}function ut(t,e,...s){if(!t)throw Y0(e,...s)}function ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hm(e),new Error(e)}function wa(t,e){t||ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZD(){return E2()==="http:"||E2()==="https:"}function E2(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZD()||CL()||"connection"in navigator)?navigator.onLine:!0}function t8(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,s){this.shortDelay=e,this.longDelay=s,wa(s>e,"Short delay should be less than long delay!"),this.isMobile=NL()||EL()}get(){return e8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){wa(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=new Th(3e4,6e4);function ng(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yd(t,e,s,r,i={}){return bT(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=kh(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return TL()||(h.referrerPolicy="no-referrer"),yT.fetch()(wT(t,t.config.apiHost,s,d),h)})}async function bT(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},s8),e);try{const i=new r8(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw hm(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hm(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw hm(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw hm(t,"user-disabled",l);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw vT(t,p,h);_a(t,p)}}catch(i){if(i instanceof Ca)throw i;_a(t,"network-request-failed",{message:String(i)})}}async function _T(t,e,s,r,i={}){const a=await yd(t,e,s,r,i);return"mfaPendingCredential"in a&&_a(t,"multi-factor-auth-required",{_serverResponse:a}),a}function wT(t,e,s,r){const i=`${e}${s}?${r}`;return t.config.emulator?X0(t.config,i):`${t.config.apiScheme}://${i}`}class r8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Ai(this.auth,"network-request-failed")),n8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hm(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=Ai(t,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){return yd(t,"POST","/v1/accounts:delete",e)}async function jT(t,e){return yd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function a8(t,e=!1){const s=Ws(t),r=await s.getIdToken(e),i=J0(r);ut(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:$u(Sv(i.auth_time)),issuedAtTime:$u(Sv(i.iat)),expirationTime:$u(Sv(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Sv(t){return Number(t)*1e3}function J0(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return Hm("JWT malformed, contained fewer than 3 sections"),null;try{const i=oT(s);return i?JSON.parse(i):(Hm("Failed to decode base64 JWT payload"),null)}catch(i){return Hm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function A2(t){const e=J0(t);return ut(e,"internal-error"),ut(typeof e.exp!="undefined","internal-error"),ut(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Ca&&o8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function o8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(t){var e;const s=t.auth,r=await t.getIdToken(),i=await ah(t,jT(s,{idToken:r}));ut(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ST(a.providerUserInfo):[],d=d8(t.providerData,l),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),p=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new zy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function c8(t){const e=Ws(t);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ST(t){return t.map(e=>{var{providerId:s}=e,r=Q0(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(t,e){const s=await bT(t,{},async()=>{const r=kh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=wT(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",yT.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function h8(t,e){return yd(t,"POST","/v2/accounts:revokeToken",ng(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken!="undefined","internal-error"),ut(typeof e.refreshToken!="undefined","internal-error");const s="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):A2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const s=A2(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:a}=await u8(e,s);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:a}=s,l=new Gc;return r&&(ut(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(ut(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gc,this.toJSON())}_performRefresh(){return ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,e){ut(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class pa{constructor(e){var{uid:s,auth:r,stsTokenManager:i}=e,a=Q0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await ah(this,this.stsTokenManager.getToken(this.auth,e));return ut(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return a8(this,e)}reload(){return c8(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new pa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await vf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(bo(this.auth));const e=await this.getIdToken();return await ah(this,i8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,i,a,l,d,u,h,p;const g=(r=s.displayName)!==null&&r!==void 0?r:void 0,y=(i=s.email)!==null&&i!==void 0?i:void 0,b=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,S=(l=s.photoURL)!==null&&l!==void 0?l:void 0,N=(d=s.tenantId)!==null&&d!==void 0?d:void 0,T=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,M=(h=s.createdAt)!==null&&h!==void 0?h:void 0,L=(p=s.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:v,isAnonymous:_,providerData:P,stsTokenManager:E}=s;ut(k&&E,e,"internal-error");const w=Gc.fromJSON(this.name,E);ut(typeof k=="string",e,"internal-error"),Za(g,e.name),Za(y,e.name),ut(typeof v=="boolean",e,"internal-error"),ut(typeof _=="boolean",e,"internal-error"),Za(b,e.name),Za(S,e.name),Za(N,e.name),Za(T,e.name),Za(M,e.name),Za(L,e.name);const A=new pa({uid:k,auth:e,email:y,emailVerified:v,displayName:g,isAnonymous:_,photoURL:S,phoneNumber:b,tenantId:N,stsTokenManager:w,createdAt:M,lastLoginAt:L});return P&&Array.isArray(P)&&(A.providerData=P.map(B=>Object.assign({},B))),T&&(A._redirectEventId=T),A}static async _fromIdTokenResponse(e,s,r=!1){const i=new Gc;i.updateFromServerResponse(s);const a=new pa({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vf(a),a}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];ut(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?ST(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new Gc;d.updateFromIdToken(r);const u=new pa({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Map;function ma(t){wa(t instanceof Function,"Expected a class definition");let e=I2.get(t);return e?(wa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}NT.type="NONE";const R2=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e,s){return`firebase:${t}:${e}:${s}`}class Wc{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gm("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new Wc(ma(R2),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||ma(R2);const l=Gm(r,e.config.apiKey,e.name);let d=null;for(const h of s)try{const p=await h._get(l);if(p){const g=pa._fromJSON(e,p);h!==a&&(d=g),a=h;break}}catch(p){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Wc(a,e,r):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==a)try{await h._remove(l)}catch(p){}})),new Wc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ET(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IT(e))return"Blackberry";if(RT(e))return"Webos";if(TT(e))return"Safari";if((e.includes("chrome/")||CT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kT(t=An()){return/firefox\//i.test(t)}function TT(t=An()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CT(t=An()){return/crios\//i.test(t)}function ET(t=An()){return/iemobile/i.test(t)}function AT(t=An()){return/android/i.test(t)}function IT(t=An()){return/blackberry/i.test(t)}function RT(t=An()){return/webos/i.test(t)}function Z0(t=An()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p8(t=An()){var e;return Z0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function m8(){return AL()&&document.documentMode===10}function PT(t=An()){return Z0(t)||AT(t)||RT(t)||IT(t)||/windows phone/i.test(t)||ET(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e=[]){let s;switch(t){case"Browser":s=P2(An());break;case"Worker":s=`${P2(An())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${vd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(t,e={}){return yd(t,"GET","/v2/passwordPolicy",ng(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=6;class v8{constructor(e){var s,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:x8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,i,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L2(this),this.idTokenSubscription=new L2(this),this.beforeStateQueue=new f8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=ma(s)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Wc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await jT(this,{idToken:e}),r=await pa._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ua(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(bo(this));const s=e?Ws(e):null;return s&&ut(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ma(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g8(this),s=new v8(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nh("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await h8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&ma(e)||this._popupRedirectResolver;ut(s,this,"argument-error"),this.redirectPersistenceManager=await Wc.create(this,[ma(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,i);return()=>{l=!0,u()}}else{const u=e.addObserver(s);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&JD(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function rg(t){return Ws(t)}class L2{constructor(e){this.auth=e,this.observer=null,this.addObserver=BL(s=>this.observer=s)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b8(t){e1=t}function _8(t){return e1.loadJS(t)}function w8(){return e1.gapiScript}function j8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t,e){const s=q0(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(gf(a,e!=null?e:{}))return i;_a(i,"already-initialized")}return s.initialize({options:e})}function N8(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(ma);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k8(t,e,s){const r=rg(t);ut(r._canInitEmulator,r,"emulator-config-failed"),ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=DT(e),{host:l,port:d}=T8(e),u=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),C8()}function DT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function T8(t){const e=DT(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:D2(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:D2(l)}}}function D2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function C8(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,s){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e){return _T(t,"POST","/v1/accounts:signInWithIdp",ng(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="http://localhost";class Tl extends MT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):_a("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=s,a=Q0(s,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Tl(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const s=this.buildRequest();return qc(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,qc(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,qc(e,s)}buildRequest(){const e={requestUri:E8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=kh(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends FT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Ch{constructor(){super("facebook.com")}static credential(e){return Tl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch(s){return null}}}oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Tl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return lo.credential(s,r)}catch(i){return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends Ch{constructor(){super("github.com")}static credential(e){return Tl._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch(s){return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Ch{constructor(){super("twitter.com")}static credential(e,s){return Tl._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return uo.credential(s,r)}catch(i){return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const a=await pa._fromIdTokenResponse(e,r,i),l=M2(r);return new Cl({user:a,providerId:l,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=M2(r);return new Cl({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function M2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Ca{constructor(e,s,r,i){var a;super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new yf(e,s,r,i)}}function BT(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(t,a,e,r):a})}async function A8(t,e,s=!1){const r=await ah(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return Cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(t,e,s=!1){const{auth:r}=t;if(ua(r.app))return Promise.reject(bo(r));const i="reauthenticate";try{const a=await ah(t,BT(r,i,e,t),s);ut(a.idToken,r,"internal-error");const l=J0(a.idToken);ut(l,r,"internal-error");const{sub:d}=l;return ut(t.uid===d,r,"user-mismatch"),Cl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&_a(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e,s=!1){if(ua(t.app))return Promise.reject(bo(t));const r="signIn",i=await BT(t,r,e),a=await Cl._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(t,e){return _T(t,"POST","/v1/accounts:signInWithCustomToken",ng(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L8(t,e){if(ua(t.app))return Promise.reject(bo(t));const s=rg(t),r=await P8(s,{token:e,returnSecureToken:!0}),i=await Cl._fromIdTokenResponse(s,"signIn",r);return await s._updateCurrentUser(i.user),i}function D8(t,e,s,r){return Ws(t).onIdTokenChanged(e,s,r)}function M8(t,e,s){return Ws(t).beforeAuthStateChanged(e,s)}function F8(t,e,s,r){return Ws(t).onAuthStateChanged(e,s,r)}function B8(t){return Ws(t).signOut()}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=1e3,O8=10;class OT extends $T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!s&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);m8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,O8):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},$8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}OT.type="LOCAL";const V8=OT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT extends $T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}VT.type="SESSION";const UT=VT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new ig(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:a}=s.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async h=>h(s.origin,a)),u=await U8(d);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ig.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const h=t1("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(y.data.response);break;default:clearTimeout(p),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function H8(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof Ii().WorkerGlobalScope!="undefined"&&typeof Ii().importScripts=="function"}async function G8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function W8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q8(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",K8=1,_f="firebaseLocalStorage",GT="fbase_key";class Eh{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function ag(t,e){return t.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function Q8(){const t=indexedDB.deleteDatabase(HT);return new Eh(t).toPromise()}function Hy(){const t=indexedDB.open(HT,K8);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_f,{keyPath:GT})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await Q8(),e(await Hy()))})})}async function F2(t,e,s){const r=ag(t,!0).put({[GT]:e,value:s});return new Eh(r).toPromise()}async function Y8(t,e){const s=ag(t,!1).get(e),r=await new Eh(s).toPromise();return r===void 0?null:r.value}function B2(t,e){const s=ag(t,!0).delete(e);return new Eh(s).toPromise()}const X8=800,J8=3;class WT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hy(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>J8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ig._getInstance(q8()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await G8(),!this.activeServiceWorker)return;this.sender=new z8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(s){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hy();return await F2(e,bf,"1"),await B2(e,bf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>F2(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>Y8(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>B2(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ag(i,!1).getAll();return new Eh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WT.type="LOCAL";const Z8=WT;new Th(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){return e?ma(e):(ut(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends MT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,s){return qc(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function tM(t){return R8(t.auth,new s1(t),t.bypassAuthState)}function sM(t){const{auth:e,user:s}=t;return ut(s,e,"internal-error"),I8(s,new s1(t),t.bypassAuthState)}async function nM(t){const{auth:e,user:s}=t;return ut(s,e,"internal-error"),A8(s,new s1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,s,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tM;case"linkViaPopup":case"linkViaRedirect":return nM;case"reauthViaPopup":case"reauthViaRedirect":return sM;default:_a(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new Th(2e3,1e4);class Fc extends qT{constructor(e,s,r,i,a){super(e,s,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Fc.currentPopupAction&&Fc.currentPopupAction.cancel(),Fc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=t1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rM.get())};e()}}Fc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="pendingRedirect",Wm=new Map;class aM extends qT{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=Wm.get(this.auth._key());if(!e){try{const r=await oM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}Wm.set(this.auth._key(),e)}return this.bypassAuthState||Wm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oM(t,e){const s=dM(e),r=cM(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function lM(t,e){Wm.set(t._key(),e)}function cM(t){return ma(t._redirectPersistence)}function dM(t){return Gm(iM,t.config.apiKey,t.name)}async function uM(t,e,s=!1){if(ua(t.app))return Promise.reject(bo(t));const r=rg(t),i=eM(r,e),l=await new aM(r,i,s).execute();return l&&!s&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=600*1e3;class pM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mM(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!KT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(Ai(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hM&&this.cachedEventUids.clear(),this.cachedEventUids.has($2(e))}saveEventToCache(e){this.cachedEventUids.add($2(e)),this.lastProcessedEventTime=Date.now()}}function $2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e={}){return yd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xM=/^https?/;async function vM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fM(t);for(const s of e)try{if(yM(s))return}catch(r){}_a(t,"unauthorized-domain")}function yM(t){const e=Uy(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===r}if(!xM.test(s))return!1;if(gM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Th(3e4,6e4);function O2(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function _M(t){return new Promise((e,s)=>{var r,i,a;function l(){O2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O2(),s(Ai(t,"network-request-failed"))},timeout:bM.get()})}if(!((i=(r=Ii().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ii().gapi)===null||a===void 0)&&a.load)l();else{const d=j8("iframefcb");return Ii()[d]=()=>{gapi.load?l():s(Ai(t,"network-request-failed"))},_8(`${w8()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw qm=null,e})}let qm=null;function wM(t){return qm=qm||_M(t),qm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Th(5e3,15e3),SM="__/auth/iframe",NM="emulator/auth/iframe",kM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CM(t){const e=t.config;ut(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?X0(e,NM):`https://${t.config.authDomain}/${SM}`,r={apiKey:e.apiKey,appName:t.name,v:vd},i=TM.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${kh(r).slice(1)}`}async function EM(t){const e=await wM(t),s=Ii().gapi;return ut(s,t,"internal-error"),e.open({where:document.body,url:CM(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kM,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Ai(t,"network-request-failed"),d=Ii().setTimeout(()=>{a(l)},jM.get());function u(){Ii().clearTimeout(d),i(r)}r.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IM=500,RM=600,PM="_blank",LM="http://localhost";class V2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function DM(t,e,s,r=IM,i=RM){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},AM),{width:r.toString(),height:i.toString(),top:a,left:l}),h=An().toLowerCase();s&&(d=CT(h)?PM:s),kT(h)&&(e=e||LM,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(p8(h)&&d!=="_self")return MM(e||"",d),new V2(null);const g=window.open(e||"",d,p);ut(g,t,"popup-blocked");try{g.focus()}catch(y){}return new V2(g)}function MM(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM="__/auth/handler",BM="emulator/auth/handler",$M=encodeURIComponent("fac");async function U2(t,e,s,r,i,a){ut(t.config.authDomain,t,"auth-domain-config-required"),ut(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:vd,eventId:i};if(e instanceof FT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",FL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))l[p]=g}if(e instanceof Ch){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const u=await t._getAppCheckToken(),h=u?`#${$M}=${encodeURIComponent(u)}`:"";return`${OM(t)}?${kh(d).slice(1)}${h}`}function OM({config:t}){return t.emulator?X0(t,BM):`https://${t.authDomain}/${FM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="webStorageSupport";class VM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UT,this._completeRedirectFn=uM,this._overrideRedirectResult=lM}async _openPopup(e,s,r,i){var a;wa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await U2(e,s,r,Uy(),i);return DM(e,l,t1())}async _openRedirect(e,s,r,i){await this._originValidation(e);const a=await U2(e,s,r,Uy(),i);return H8(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(wa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await EM(e),r=new pM(e);return s.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Nv,{type:Nv},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Nv];l!==void 0&&s(!!l),_a(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=vM(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return PT()||TT()||Z0()}}const UM=VM;var z2="@firebase/auth",H2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GM(t){Zc(new kl("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;ut(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LT(t)},h=new y8(r,i,a,u);return N8(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Zc(new kl("auth-internal",e=>{const s=rg(e.getProvider("auth").getImmediate());return(r=>new zM(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),yo(z2,H2,HM(t)),yo(z2,H2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=300,qM=dT("authIdTokenMaxAge")||WM;let G2=null;const KM=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>qM)return;const i=s==null?void 0:s.token;G2!==i&&(G2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QM(t=K0()){const e=q0(t,"auth");if(e.isInitialized())return e.getImmediate();const s=S8(t,{popupRedirectResolver:UM,persistence:[Z8,V8,UT]}),r=dT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=KM(a.toString());M8(s,l,()=>l(s.currentUser)),D8(s,d=>l(d))}}const i=lT("auth");return i&&k8(s,`http://${i}`),s}function YM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}b8({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ai("internal-error");a.customData=i,s(a)},r.type="text/javascript",r.charset="UTF-8",YM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GM("Browser");var W2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wl,QT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,w){function A(){}A.prototype=w.prototype,E.D=w.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(B,D,$){for(var F=Array(arguments.length-2),z=2;z<arguments.length;z++)F[z-2]=arguments[z];return w.prototype[D].apply(B,F)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,w,A){A||(A=0);var B=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)B[D]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(D=0;16>D;++D)B[D]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=E.g[0],A=E.g[1],D=E.g[2];var $=E.g[3],F=w+($^A&(D^$))+B[0]+3614090360&4294967295;w=A+(F<<7&4294967295|F>>>25),F=$+(D^w&(A^D))+B[1]+3905402710&4294967295,$=w+(F<<12&4294967295|F>>>20),F=D+(A^$&(w^A))+B[2]+606105819&4294967295,D=$+(F<<17&4294967295|F>>>15),F=A+(w^D&($^w))+B[3]+3250441966&4294967295,A=D+(F<<22&4294967295|F>>>10),F=w+($^A&(D^$))+B[4]+4118548399&4294967295,w=A+(F<<7&4294967295|F>>>25),F=$+(D^w&(A^D))+B[5]+1200080426&4294967295,$=w+(F<<12&4294967295|F>>>20),F=D+(A^$&(w^A))+B[6]+2821735955&4294967295,D=$+(F<<17&4294967295|F>>>15),F=A+(w^D&($^w))+B[7]+4249261313&4294967295,A=D+(F<<22&4294967295|F>>>10),F=w+($^A&(D^$))+B[8]+1770035416&4294967295,w=A+(F<<7&4294967295|F>>>25),F=$+(D^w&(A^D))+B[9]+2336552879&4294967295,$=w+(F<<12&4294967295|F>>>20),F=D+(A^$&(w^A))+B[10]+4294925233&4294967295,D=$+(F<<17&4294967295|F>>>15),F=A+(w^D&($^w))+B[11]+2304563134&4294967295,A=D+(F<<22&4294967295|F>>>10),F=w+($^A&(D^$))+B[12]+1804603682&4294967295,w=A+(F<<7&4294967295|F>>>25),F=$+(D^w&(A^D))+B[13]+4254626195&4294967295,$=w+(F<<12&4294967295|F>>>20),F=D+(A^$&(w^A))+B[14]+2792965006&4294967295,D=$+(F<<17&4294967295|F>>>15),F=A+(w^D&($^w))+B[15]+1236535329&4294967295,A=D+(F<<22&4294967295|F>>>10),F=w+(D^$&(A^D))+B[1]+4129170786&4294967295,w=A+(F<<5&4294967295|F>>>27),F=$+(A^D&(w^A))+B[6]+3225465664&4294967295,$=w+(F<<9&4294967295|F>>>23),F=D+(w^A&($^w))+B[11]+643717713&4294967295,D=$+(F<<14&4294967295|F>>>18),F=A+($^w&(D^$))+B[0]+3921069994&4294967295,A=D+(F<<20&4294967295|F>>>12),F=w+(D^$&(A^D))+B[5]+3593408605&4294967295,w=A+(F<<5&4294967295|F>>>27),F=$+(A^D&(w^A))+B[10]+38016083&4294967295,$=w+(F<<9&4294967295|F>>>23),F=D+(w^A&($^w))+B[15]+3634488961&4294967295,D=$+(F<<14&4294967295|F>>>18),F=A+($^w&(D^$))+B[4]+3889429448&4294967295,A=D+(F<<20&4294967295|F>>>12),F=w+(D^$&(A^D))+B[9]+568446438&4294967295,w=A+(F<<5&4294967295|F>>>27),F=$+(A^D&(w^A))+B[14]+3275163606&4294967295,$=w+(F<<9&4294967295|F>>>23),F=D+(w^A&($^w))+B[3]+4107603335&4294967295,D=$+(F<<14&4294967295|F>>>18),F=A+($^w&(D^$))+B[8]+1163531501&4294967295,A=D+(F<<20&4294967295|F>>>12),F=w+(D^$&(A^D))+B[13]+2850285829&4294967295,w=A+(F<<5&4294967295|F>>>27),F=$+(A^D&(w^A))+B[2]+4243563512&4294967295,$=w+(F<<9&4294967295|F>>>23),F=D+(w^A&($^w))+B[7]+1735328473&4294967295,D=$+(F<<14&4294967295|F>>>18),F=A+($^w&(D^$))+B[12]+2368359562&4294967295,A=D+(F<<20&4294967295|F>>>12),F=w+(A^D^$)+B[5]+4294588738&4294967295,w=A+(F<<4&4294967295|F>>>28),F=$+(w^A^D)+B[8]+2272392833&4294967295,$=w+(F<<11&4294967295|F>>>21),F=D+($^w^A)+B[11]+1839030562&4294967295,D=$+(F<<16&4294967295|F>>>16),F=A+(D^$^w)+B[14]+4259657740&4294967295,A=D+(F<<23&4294967295|F>>>9),F=w+(A^D^$)+B[1]+2763975236&4294967295,w=A+(F<<4&4294967295|F>>>28),F=$+(w^A^D)+B[4]+1272893353&4294967295,$=w+(F<<11&4294967295|F>>>21),F=D+($^w^A)+B[7]+4139469664&4294967295,D=$+(F<<16&4294967295|F>>>16),F=A+(D^$^w)+B[10]+3200236656&4294967295,A=D+(F<<23&4294967295|F>>>9),F=w+(A^D^$)+B[13]+681279174&4294967295,w=A+(F<<4&4294967295|F>>>28),F=$+(w^A^D)+B[0]+3936430074&4294967295,$=w+(F<<11&4294967295|F>>>21),F=D+($^w^A)+B[3]+3572445317&4294967295,D=$+(F<<16&4294967295|F>>>16),F=A+(D^$^w)+B[6]+76029189&4294967295,A=D+(F<<23&4294967295|F>>>9),F=w+(A^D^$)+B[9]+3654602809&4294967295,w=A+(F<<4&4294967295|F>>>28),F=$+(w^A^D)+B[12]+3873151461&4294967295,$=w+(F<<11&4294967295|F>>>21),F=D+($^w^A)+B[15]+530742520&4294967295,D=$+(F<<16&4294967295|F>>>16),F=A+(D^$^w)+B[2]+3299628645&4294967295,A=D+(F<<23&4294967295|F>>>9),F=w+(D^(A|~$))+B[0]+4096336452&4294967295,w=A+(F<<6&4294967295|F>>>26),F=$+(A^(w|~D))+B[7]+1126891415&4294967295,$=w+(F<<10&4294967295|F>>>22),F=D+(w^($|~A))+B[14]+2878612391&4294967295,D=$+(F<<15&4294967295|F>>>17),F=A+($^(D|~w))+B[5]+4237533241&4294967295,A=D+(F<<21&4294967295|F>>>11),F=w+(D^(A|~$))+B[12]+1700485571&4294967295,w=A+(F<<6&4294967295|F>>>26),F=$+(A^(w|~D))+B[3]+2399980690&4294967295,$=w+(F<<10&4294967295|F>>>22),F=D+(w^($|~A))+B[10]+4293915773&4294967295,D=$+(F<<15&4294967295|F>>>17),F=A+($^(D|~w))+B[1]+2240044497&4294967295,A=D+(F<<21&4294967295|F>>>11),F=w+(D^(A|~$))+B[8]+1873313359&4294967295,w=A+(F<<6&4294967295|F>>>26),F=$+(A^(w|~D))+B[15]+4264355552&4294967295,$=w+(F<<10&4294967295|F>>>22),F=D+(w^($|~A))+B[6]+2734768916&4294967295,D=$+(F<<15&4294967295|F>>>17),F=A+($^(D|~w))+B[13]+1309151649&4294967295,A=D+(F<<21&4294967295|F>>>11),F=w+(D^(A|~$))+B[4]+4149444226&4294967295,w=A+(F<<6&4294967295|F>>>26),F=$+(A^(w|~D))+B[11]+3174756917&4294967295,$=w+(F<<10&4294967295|F>>>22),F=D+(w^($|~A))+B[2]+718787259&4294967295,D=$+(F<<15&4294967295|F>>>17),F=A+($^(D|~w))+B[9]+3951481745&4294967295,E.g[0]=E.g[0]+w&4294967295,E.g[1]=E.g[1]+(D+(F<<21&4294967295|F>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+$&4294967295}r.prototype.u=function(E,w){w===void 0&&(w=E.length);for(var A=w-this.blockSize,B=this.B,D=this.h,$=0;$<w;){if(D==0)for(;$<=A;)i(this,E,$),$+=this.blockSize;if(typeof E=="string"){for(;$<w;)if(B[D++]=E.charCodeAt($++),D==this.blockSize){i(this,B),D=0;break}}else for(;$<w;)if(B[D++]=E[$++],D==this.blockSize){i(this,B),D=0;break}}this.h=D,this.o+=w},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var w=1;w<E.length-8;++w)E[w]=0;var A=8*this.o;for(w=E.length-8;w<E.length;++w)E[w]=A&255,A/=256;for(this.u(E),E=Array(16),w=A=0;4>w;++w)for(var B=0;32>B;B+=8)E[A++]=this.g[w]>>>B&255;return E};function a(E,w){var A=d;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=w(E)}function l(E,w){this.h=w;for(var A=[],B=!0,D=E.length-1;0<=D;D--){var $=E[D]|0;B&&$==w||(A[D]=$,B=!1)}this.g=A}var d={};function u(E){return-128<=E&&128>E?a(E,function(w){return new l([w|0],0>w?-1:0)}):new l([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return T(h(-E));for(var w=[],A=1,B=0;E>=A;B++)w[B]=E/A|0,A*=4294967296;return new l(w,0)}function p(E,w){if(E.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E.charAt(0)=="-")return T(p(E.substring(1),w));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(w,8)),B=g,D=0;D<E.length;D+=8){var $=Math.min(8,E.length-D),F=parseInt(E.substring(D,D+$),w);8>$?($=h(Math.pow(w,$)),B=B.j($).add(h(F))):(B=B.j(A),B=B.add(h(F)))}return B}var g=u(0),y=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(N(this))return-T(this).m();for(var E=0,w=1,A=0;A<this.g.length;A++){var B=this.i(A);E+=(0<=B?B:4294967296+B)*w,w*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(N(this))return"-"+T(this).toString(E);for(var w=h(Math.pow(E,6)),A=this,B="";;){var D=v(A,w).g;A=M(A,D.j(w));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=D,S(A))return $+B;for(;6>$.length;)$="0"+$;B=$+B}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(var w=0;w<E.g.length;w++)if(E.g[w]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=M(this,E),N(E)?-1:S(E)?0:1};function T(E){for(var w=E.g.length,A=[],B=0;B<w;B++)A[B]=~E.g[B];return new l(A,~E.h).add(y)}t.abs=function(){return N(this)?T(this):this},t.add=function(E){for(var w=Math.max(this.g.length,E.g.length),A=[],B=0,D=0;D<=w;D++){var $=B+(this.i(D)&65535)+(E.i(D)&65535),F=($>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);B=F>>>16,$&=65535,F&=65535,A[D]=F<<16|$}return new l(A,A[A.length-1]&-2147483648?-1:0)};function M(E,w){return E.add(T(w))}t.j=function(E){if(S(this)||S(E))return g;if(N(this))return N(E)?T(this).j(T(E)):T(T(this).j(E));if(N(E))return T(this.j(T(E)));if(0>this.l(b)&&0>E.l(b))return h(this.m()*E.m());for(var w=this.g.length+E.g.length,A=[],B=0;B<2*w;B++)A[B]=0;for(B=0;B<this.g.length;B++)for(var D=0;D<E.g.length;D++){var $=this.i(B)>>>16,F=this.i(B)&65535,z=E.i(D)>>>16,H=E.i(D)&65535;A[2*B+2*D]+=F*H,L(A,2*B+2*D),A[2*B+2*D+1]+=$*H,L(A,2*B+2*D+1),A[2*B+2*D+1]+=F*z,L(A,2*B+2*D+1),A[2*B+2*D+2]+=$*z,L(A,2*B+2*D+2)}for(B=0;B<w;B++)A[B]=A[2*B+1]<<16|A[2*B];for(B=w;B<2*w;B++)A[B]=0;return new l(A,0)};function L(E,w){for(;(E[w]&65535)!=E[w];)E[w+1]+=E[w]>>>16,E[w]&=65535,w++}function k(E,w){this.g=E,this.h=w}function v(E,w){if(S(w))throw Error("division by zero");if(S(E))return new k(g,g);if(N(E))return w=v(T(E),w),new k(T(w.g),T(w.h));if(N(w))return w=v(E,T(w)),new k(T(w.g),w.h);if(30<E.g.length){if(N(E)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var A=y,B=w;0>=B.l(E);)A=_(A),B=_(B);var D=P(A,1),$=P(B,1);for(B=P(B,2),A=P(A,2);!S(B);){var F=$.add(B);0>=F.l(E)&&(D=D.add(A),$=F),B=P(B,1),A=P(A,1)}return w=M(E,D.j(w)),new k(D,w)}for(D=g;0<=E.l(w);){for(A=Math.max(1,Math.floor(E.m()/w.m())),B=Math.ceil(Math.log(A)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),$=h(A),F=$.j(w);N(F)||0<F.l(E);)A-=B,$=h(A),F=$.j(w);S($)&&($=y),D=D.add($),E=M(E,F)}return new k(D,E)}t.A=function(E){return v(this,E).h},t.and=function(E){for(var w=Math.max(this.g.length,E.g.length),A=[],B=0;B<w;B++)A[B]=this.i(B)&E.i(B);return new l(A,this.h&E.h)},t.or=function(E){for(var w=Math.max(this.g.length,E.g.length),A=[],B=0;B<w;B++)A[B]=this.i(B)|E.i(B);return new l(A,this.h|E.h)},t.xor=function(E){for(var w=Math.max(this.g.length,E.g.length),A=[],B=0;B<w;B++)A[B]=this.i(B)^E.i(B);return new l(A,this.h^E.h)};function _(E){for(var w=E.g.length+1,A=[],B=0;B<w;B++)A[B]=E.i(B)<<1|E.i(B-1)>>>31;return new l(A,E.h)}function P(E,w){var A=w>>5;w%=32;for(var B=E.g.length-A,D=[],$=0;$<B;$++)D[$]=0<w?E.i($+A)>>>w|E.i($+A+1)<<32-w:E.i($+A);return new l(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=p,wl=l}).apply(typeof W2!="undefined"?W2:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var pm=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YT,Tu,XT,Km,Gy,JT,ZT,eC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,C,O){return f==Array.prototype||f==Object.prototype||(f[C]=O.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pm=="object"&&pm];for(var C=0;C<f.length;++C){var O=f[C];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=s(this);function i(f,C){if(C)e:{var O=r;f=f.split(".");for(var W=0;W<f.length-1;W++){var oe=f[W];if(!(oe in O))break e;O=O[oe]}f=f[f.length-1],W=O[f],C=C(W),C!=W&&C!=null&&e(O,f,{configurable:!0,writable:!0,value:C})}}function a(f,C){f instanceof String&&(f+="");var O=0,W=!1,oe={next:function(){if(!W&&O<f.length){var me=O++;return{value:C(me,f[me]),done:!1}}return W=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}i("Array.prototype.values",function(f){return f||function(){return a(this,function(C,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(f){var C=typeof f;return C=C!="object"?C:f?Array.isArray(f)?"array":C:"null",C=="array"||C=="object"&&typeof f.length=="number"}function h(f){var C=typeof f;return C=="object"&&f!=null||C=="function"}function p(f,C,O){return f.call.apply(f.bind,arguments)}function g(f,C,O){if(!f)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,W),f.apply(C,oe)}}return function(){return f.apply(C,arguments)}}function y(f,C,O){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,y.apply(null,arguments)}function b(f,C){var O=Array.prototype.slice.call(arguments,1);return function(){var W=O.slice();return W.push.apply(W,arguments),f.apply(this,W)}}function S(f,C){function O(){}O.prototype=C.prototype,f.aa=C.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(W,oe,me){for(var Me=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)Me[Kt-2]=arguments[Kt];return C.prototype[oe].apply(W,Me)}}function N(f){const C=f.length;if(0<C){const O=Array(C);for(let W=0;W<C;W++)O[W]=f[W];return O}return[]}function T(f,C){for(let O=1;O<arguments.length;O++){const W=arguments[O];if(u(W)){const oe=f.length||0,me=W.length||0;f.length=oe+me;for(let Me=0;Me<me;Me++)f[oe+Me]=W[Me]}else f.push(W)}}class M{constructor(C,O){this.i=C,this.j=O,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function L(f){return/^[\s\xa0]*$/.test(f)}function k(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function v(f){return v[" "](f),f}v[" "]=function(){};var _=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function P(f,C,O){for(const W in f)C.call(O,f[W],W,f)}function E(f,C){for(const O in f)C.call(void 0,f[O],O,f)}function w(f){const C={};for(const O in f)C[O]=f[O];return C}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,C){let O,W;for(let oe=1;oe<arguments.length;oe++){W=arguments[oe];for(O in W)f[O]=W[O];for(let me=0;me<A.length;me++)O=A[me],Object.prototype.hasOwnProperty.call(W,O)&&(f[O]=W[O])}}function D(f){var C=1;f=f.split(":");const O=[];for(;0<C&&f.length;)O.push(f.shift()),C--;return f.length&&O.push(f.join(":")),O}function $(f){d.setTimeout(()=>{throw f},0)}function F(){var f=re;let C=null;return f.g&&(C=f.g,f.g=f.g.next,f.g||(f.h=null),C.next=null),C}class z{constructor(){this.h=this.g=null}add(C,O){const W=H.get();W.set(C,O),this.h?this.h.next=W:this.g=W,this.h=W}}var H=new M(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(C,O){this.h=C,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,re=new z,se=()=>{const f=d.Promise.resolve(void 0);q=()=>{f.then(U)}};var U=()=>{for(var f;f=F();){try{f.h.call(f.g)}catch(O){$(O)}var C=H;C.j(f),100>C.h&&(C.h++,f.next=C.g,C.g=f)}G=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(f,C){this.type=f,this.g=this.target=C,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,C=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};d.addEventListener("test",O,C),d.removeEventListener("test",O,C)}catch(O){}return f})();function pe(f,C){if(ie.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,W=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=C,C=f.relatedTarget){if(_){e:{try{v(C.nodeName);var oe=!0;break e}catch(me){}oe=!1}oe||(C=null)}}else O=="mouseover"?C=f.fromElement:O=="mouseout"&&(C=f.toElement);this.relatedTarget=C,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ge[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&pe.aa.h.call(this)}}S(pe,ie);var ge={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ve=0;function _e(f,C,O,W,oe){this.listener=f,this.proxy=null,this.src=C,this.type=O,this.capture=!!W,this.ha=oe,this.key=++ve,this.da=this.fa=!1}function ce(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ce(f){this.src=f,this.g={},this.h=0}Ce.prototype.add=function(f,C,O,W,oe){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var Me=Ze(f,C,W,oe);return-1<Me?(C=f[Me],O||(C.fa=!1)):(C=new _e(C,this.src,me,!!W,oe),C.fa=O,f.push(C)),C};function ye(f,C){var O=C.type;if(O in f.g){var W=f.g[O],oe=Array.prototype.indexOf.call(W,C,void 0),me;(me=0<=oe)&&Array.prototype.splice.call(W,oe,1),me&&(ce(C),f.g[O].length==0&&(delete f.g[O],f.h--))}}function Ze(f,C,O,W){for(var oe=0;oe<f.length;++oe){var me=f[oe];if(!me.da&&me.listener==C&&me.capture==!!O&&me.ha==W)return oe}return-1}var it="closure_lm_"+(1e6*Math.random()|0),Rt={};function rs(f,C,O,W,oe){if(Array.isArray(C)){for(var me=0;me<C.length;me++)rs(f,C[me],O,W,oe);return null}return O=pt(O),f&&f[he]?f.K(C,O,h(W)?!!W.capture:!1,oe):cs(f,C,O,!1,W,oe)}function cs(f,C,O,W,oe,me){if(!C)throw Error("Invalid event type");var Me=h(oe)?!!oe.capture:!!oe,Kt=Ue(f);if(Kt||(f[it]=Kt=new Ce(f)),O=Kt.add(C,O,W,Me,me),O.proxy)return O;if(W=Os(),O.proxy=W,W.src=f,W.listener=O,f.addEventListener)X||(oe=Me),oe===void 0&&(oe=!1),f.addEventListener(C.toString(),W,oe);else if(f.attachEvent)f.attachEvent(Pe(C.toString()),W);else if(f.addListener&&f.removeListener)f.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Os(){function f(O){return C.call(f.src,f.listener,O)}const C=Ie;return f}function ws(f,C,O,W,oe){if(Array.isArray(C))for(var me=0;me<C.length;me++)ws(f,C[me],O,W,oe);else W=h(W)?!!W.capture:!!W,O=pt(O),f&&f[he]?(f=f.i,C=String(C).toString(),C in f.g&&(me=f.g[C],O=Ze(me,O,W,oe),-1<O&&(ce(me[O]),Array.prototype.splice.call(me,O,1),me.length==0&&(delete f.g[C],f.h--)))):f&&(f=Ue(f))&&(C=f.g[C.toString()],f=-1,C&&(f=Ze(C,O,W,oe)),(O=-1<f?C[f]:null)&&Ee(O))}function Ee(f){if(typeof f!="number"&&f&&!f.da){var C=f.src;if(C&&C[he])ye(C.i,f);else{var O=f.type,W=f.proxy;C.removeEventListener?C.removeEventListener(O,W,f.capture):C.detachEvent?C.detachEvent(Pe(O),W):C.addListener&&C.removeListener&&C.removeListener(W),(O=Ue(C))?(ye(O,f),O.h==0&&(O.src=null,C[it]=null)):ce(f)}}}function Pe(f){return f in Rt?Rt[f]:Rt[f]="on"+f}function Ie(f,C){if(f.da)f=!0;else{C=new pe(C,this);var O=f.listener,W=f.ha||f.src;f.fa&&Ee(f),f=O.call(W,C)}return f}function Ue(f){return f=f[it],f instanceof Ce?f:null}var nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(f){return typeof f=="function"?f:(f[nt]||(f[nt]=function(C){return f.handleEvent(C)}),f[nt])}function vt(){Y.call(this),this.i=new Ce(this),this.M=this,this.F=null}S(vt,Y),vt.prototype[he]=!0,vt.prototype.removeEventListener=function(f,C,O,W){ws(this,f,C,O,W)};function Ut(f,C){var O,W=f.F;if(W)for(O=[];W;W=W.F)O.push(W);if(f=f.M,W=C.type||C,typeof C=="string")C=new ie(C,f);else if(C instanceof ie)C.target=C.target||f;else{var oe=C;C=new ie(W,f),B(C,oe)}if(oe=!0,O)for(var me=O.length-1;0<=me;me--){var Me=C.g=O[me];oe=$t(Me,W,!0,C)&&oe}if(Me=C.g=f,oe=$t(Me,W,!0,C)&&oe,oe=$t(Me,W,!1,C)&&oe,O)for(me=0;me<O.length;me++)Me=C.g=O[me],oe=$t(Me,W,!1,C)&&oe}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var f=this.i,C;for(C in f.g){for(var O=f.g[C],W=0;W<O.length;W++)ce(O[W]);delete f.g[C],f.h--}}this.F=null},vt.prototype.K=function(f,C,O,W){return this.i.add(String(f),C,!1,O,W)},vt.prototype.L=function(f,C,O,W){return this.i.add(String(f),C,!0,O,W)};function $t(f,C,O,W){if(C=f.i.g[String(C)],!C)return!0;C=C.concat();for(var oe=!0,me=0;me<C.length;++me){var Me=C[me];if(Me&&!Me.da&&Me.capture==O){var Kt=Me.listener,Us=Me.ha||Me.src;Me.fa&&ye(f.i,Me),oe=Kt.call(Us,W)!==!1&&oe}}return oe&&!W.defaultPrevented}function ar(f,C,O){if(typeof f=="function")O&&(f=y(f,O));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:d.setTimeout(f,C||0)}function bn(f){f.g=ar(()=>{f.g=null,f.i&&(f.i=!1,bn(f))},f.l);const C=f.h;f.h=null,f.m.apply(null,C)}class Vs extends Y{constructor(C,O){super(),this.m=C,this.l=O,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:bn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(f){Y.call(this),this.h=f,this.g={}}S(jr,Y);var fi=[];function Oi(f){P(f.g,function(C,O){this.g.hasOwnProperty(O)&&Ee(C)},f),f.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Oi(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=d.JSON.stringify,zr=d.JSON.parse,is=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function Sr(){}Sr.prototype.h=null;function Vi(f){return f.h||(f.h=f.i())}function Ui(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){ie.call(this,"d")}S(or,ie);function zi(){ie.call(this,"c")}S(zi,ie);var lr={},Ed=null;function Ro(){return Ed=Ed||new vt}lr.La="serverreachability";function Ad(f){ie.call(this,lr.La,f)}S(Ad,ie);function Hi(f){const C=Ro();Ut(C,new Ad(C))}lr.STAT_EVENT="statevent";function Id(f,C){ie.call(this,lr.STAT_EVENT,f),this.stat=C}S(Id,ie);function Ts(f){const C=Ro();Ut(C,new Id(C,f))}lr.Ma="timingevent";function zl(f,C){ie.call(this,lr.Ma,f),this.size=C}S(zl,ie);function Hr(f,C){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},C)}function Po(){this.g=!0}Po.prototype.xa=function(){this.g=!1};function Lo(f,C,O,W,oe,me){f.info(function(){if(f.g)if(me)for(var Me="",Kt=me.split("&"),Us=0;Us<Kt.length;Us++){var Mt=Kt[Us].split("=");if(1<Mt.length){var Ks=Mt[0];Mt=Mt[1];var Ps=Ks.split("_");Me=2<=Ps.length&&Ps[1]=="type"?Me+(Ks+"="+Mt+"&"):Me+(Ks+"=redacted&")}}else Me=null;else Me=me;return"XMLHTTP REQ ("+W+") [attempt "+oe+"]: "+C+`
`+O+`
`+Me})}function Hl(f,C,O,W,oe,me,Me){f.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+oe+"]: "+C+`
`+O+`
`+me+" "+Me})}function Gr(f,C,O,W){f.info(function(){return"XMLHTTP TEXT ("+C+"): "+$g(f,O)+(W?" "+W:"")})}function Rd(f,C){f.info(function(){return"TIMEOUT: "+C})}Po.prototype.info=function(){};function $g(f,C){if(!f.g)return C;if(!C)return null;try{var O=JSON.parse(C);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var W=O[f];if(!(2>W.length)){var oe=W[1];if(Array.isArray(oe)&&!(1>oe.length)){var me=oe[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Me=1;Me<oe.length;Me++)oe[Me]=""}}}}return gi(O)}catch(Kt){return C}}var Gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wr;function Do(){}S(Do,Sr),Do.prototype.g=function(){return new XMLHttpRequest},Do.prototype.i=function(){return{}},Wr=new Do;function qr(f,C,O,W){this.j=f,this.i=C,this.l=O,this.R=W||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yh}function Yh(){this.i=null,this.g="",this.h=!1}var Pd={},Wl={};function ql(f,C,O){f.L=1,f.v=La(dr(C)),f.m=O,f.P=!0,Ld(f,null)}function Ld(f,C){f.F=Date.now(),Zt(f),f.A=dr(f.v);var O=f.A,W=f.R;Array.isArray(W)||(W=[String(W)]),Ma(O.i,"t",W),f.C=0,O=f.j.J,f.h=new Yh,f.g=mp(f.j,O?C:null,!f.m),0<f.O&&(f.M=new Vs(y(f.Y,f,f.g),f.O)),C=f.U,O=f.g,W=f.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(fi[0]=oe.toString()),oe=fi);for(var me=0;me<oe.length;me++){var Me=rs(O,oe[me],W||C.handleEvent,!1,C.h||C);if(!Me)break;C.g[Me.key]=Me}C=f.H?w(f.H):{},f.m?(f.u||(f.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,C)):(f.u="GET",f.g.ea(f.A,f.u,null,C)),Hi(),Lo(f.i,f.u,f.A,f.l,f.R,f.m)}qr.prototype.ca=function(f){f=f.target;const C=this.M;C&&Gn(f)==3?C.j():this.Y(f)},qr.prototype.Y=function(f){try{if(f==this.g)e:{const Ps=Gn(this.g);var C=this.g.Ba();const Tr=this.g.Z();if(!(3>Ps)&&(Ps!=3||this.g&&(this.h.h||this.g.oa()||Od(this.g)))){this.J||Ps!=4||C==7||(C==8||0>=Tr?Hi(3):Hi(2)),Mo(this);var O=this.g.Z();this.X=O;t:if(Xh(this)){var W=Od(this.g);f="";var oe=W.length,me=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Nr(this),Aa(this);var Me="";break t}this.h.i=new d.TextDecoder}for(C=0;C<oe;C++)this.h.h=!0,f+=this.h.i.decode(W[C],{stream:!(me&&C==oe-1)});W.length=0,this.h.g+=f,this.C=0,Me=this.h.g}else Me=this.g.oa();if(this.o=O==200,Hl(this.i,this.u,this.A,this.l,this.R,Ps,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,Us=this.g;if((Kt=Us.g?Us.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Kt)){var Mt=Kt;break t}}Mt=null}if(O=Mt)Gr(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dd(this,O);else{this.o=!1,this.s=3,Ts(12),Nr(this),Aa(this);break e}}if(this.P){O=!0;let hr;for(;!this.J&&this.C<Me.length;)if(hr=Og(this,Me),hr==Wl){Ps==4&&(this.s=4,Ts(14),O=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==Pd){this.s=4,Ts(15),Gr(this.i,this.l,Me,"[Invalid Chunk]"),O=!1;break}else Gr(this.i,this.l,hr,null),Dd(this,hr);if(Xh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ps!=4||Me.length!=0||this.h.h||(this.s=1,Ts(16),O=!1),this.o=this.o&&O,!O)Gr(this.i,this.l,Me,"[Invalid Chunked Response]"),Nr(this),Aa(this);else if(0<Me.length&&!this.W){this.W=!0;var Ks=this.j;Ks.g==this&&Ks.ba&&!Ks.M&&(Ks.j.info("Great, no buffering proxy detected. Bytes received: "+Me.length),Ud(Ks),Ks.M=!0,Ts(11))}}else Gr(this.i,this.l,Me,null),Dd(this,Me);Ps==4&&Nr(this),this.o&&!this.J&&(Ps==4?rc(this.j,this):(this.o=!1,Zt(this)))}else Zl(this.g),O==400&&0<Me.indexOf("Unknown SID")?(this.s=3,Ts(12)):(this.s=0,Ts(13)),Nr(this),Aa(this)}}}catch(Ps){}finally{}};function Xh(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Og(f,C){var O=f.C,W=C.indexOf(`
`,O);return W==-1?Wl:(O=Number(C.substring(O,W)),isNaN(O)?Pd:(W+=1,W+O>C.length?Wl:(C=C.slice(W,W+O),f.C=W+O,C)))}qr.prototype.cancel=function(){this.J=!0,Nr(this)};function Zt(f){f.S=Date.now()+f.I,Jh(f,f.I)}function Jh(f,C){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Hr(y(f.ba,f),C)}function Mo(f){f.B&&(d.clearTimeout(f.B),f.B=null)}qr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Rd(this.i,this.A),this.L!=2&&(Hi(),Ts(17)),Nr(this),this.s=2,Aa(this)):Jh(this,this.S-f)};function Aa(f){f.j.G==0||f.J||rc(f.j,f)}function Nr(f){Mo(f);var C=f.M;C&&typeof C.ma=="function"&&C.ma(),f.M=null,Oi(f.U),f.g&&(C=f.g,f.g=null,C.abort(),C.ma())}function Dd(f,C){try{var O=f.j;if(O.G!=0&&(O.g==f||Rn(O.h,f))){if(!f.K&&Rn(O.h,f)&&O.G==3){try{var W=O.Da.g.parse(C)}catch(Mt){W=null}if(Array.isArray(W)&&W.length==3){var oe=W;if(oe[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)nc(O),Jr(O);else break e;sc(O),Ts(18)}}else O.za=oe[1],0<O.za-O.T&&37500>oe[2]&&O.F&&O.v==0&&!O.C&&(O.C=Hr(y(O.Za,O),6e3));if(1>=ep(O.h)&&O.ca){try{O.ca()}catch(Mt){}O.ca=void 0}}else Qi(O,11)}else if((f.K||O.g==f)&&nc(O),!L(C))for(oe=O.Da.g.parse(C),C=0;C<oe.length;C++){let Mt=oe[C];if(O.T=Mt[0],Mt=Mt[1],O.G==2)if(Mt[0]=="c"){O.K=Mt[1],O.ia=Mt[2];const Ks=Mt[3];Ks!=null&&(O.la=Ks,O.j.info("VER="+O.la));const Ps=Mt[4];Ps!=null&&(O.Aa=Ps,O.j.info("SVER="+O.Aa));const Tr=Mt[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(W=1.5*Tr,O.L=W,O.j.info("backChannelRequestTimeoutMs_="+W)),W=O;const hr=f.g;if(hr){const zo=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var me=W.h;me.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Md(me,me.h),me.h=null))}if(W.D){const ac=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;ac&&(W.ya=ac,Yt(W.I,W.D,ac))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),W=O;var Me=f;if(W.qa=pp(W,W.J?W.ia:null,W.W),Me.K){tp(W.h,Me);var Kt=Me,Us=W.L;Us&&(Kt.I=Us),Kt.B&&(Mo(Kt),Zt(Kt)),W.g=Me}else Uo(W);0<O.i.length&&bi(O)}else Mt[0]!="stop"&&Mt[0]!="close"||Qi(O,7);else O.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Qi(O,7):sn(O):Mt[0]!="noop"&&O.l&&O.l.ta(Mt),O.v=0)}}Hi(4)}catch(Mt){}}var Zh=class{constructor(f,C){this.g=f,this.map=C}};function Fo(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ep(f){return f.h?1:f.g?f.g.size:0}function Rn(f,C){return f.h?f.h==C:f.g?f.g.has(C):!1}function Md(f,C){f.g?f.g.add(C):f.h=C}function tp(f,C){f.h&&f.h==C?f.h=null:f.g&&f.g.has(C)&&f.g.delete(C)}Fo.prototype.cancel=function(){if(this.i=sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function sp(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let C=f.i;for(const O of f.g.values())C=C.concat(O.D);return C}return N(f.i)}function Kl(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var C=[],O=f.length,W=0;W<O;W++)C.push(f[W]);return C}C=[],O=0;for(W in f)C[O++]=f[W];return C}function Ql(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var C=[];f=f.length;for(var O=0;O<f;O++)C.push(O);return C}C=[],O=0;for(const W in f)C[O++]=W;return C}}}function Ia(f,C){if(f.forEach&&typeof f.forEach=="function")f.forEach(C,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,C,void 0);else for(var O=Ql(f),W=Kl(f),oe=W.length,me=0;me<oe;me++)C.call(void 0,W[me],O&&O[me],f)}var Bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vg(f,C){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var W=f[O].indexOf("="),oe=null;if(0<=W){var me=f[O].substring(0,W);oe=f[O].substring(W+1)}else me=f[O];C(me,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Gi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Gi){this.h=f.h,$o(this,f.j),this.o=f.o,this.g=f.g,Ra(this,f.s),this.l=f.l;var C=f.i,O=new xi;O.i=C.i,C.g&&(O.g=new Map(C.g),O.h=C.h),Pa(this,O),this.m=f.m}else f&&(C=String(f).match(Bo))?(this.h=!1,$o(this,C[1]||"",!0),this.o=Pt(C[2]||""),this.g=Pt(C[3]||"",!0),Ra(this,C[4]),this.l=Pt(C[5]||"",!0),Pa(this,C[6]||"",!0),this.m=Pt(C[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}Gi.prototype.toString=function(){var f=[],C=this.j;C&&f.push(Da(C,Yl,!0),":");var O=this.g;return(O||C=="file")&&(f.push("//"),(C=this.o)&&f.push(Da(C,Yl,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(Da(O,O.charAt(0)=="/"?ip:rp,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",Da(O,Fd)),f.join("")};function dr(f){return new Gi(f)}function $o(f,C,O){f.j=O?Pt(C,!0):C,f.j&&(f.j=f.j.replace(/:$/,""))}function Ra(f,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);f.s=C}else f.s=null}function Pa(f,C,O){C instanceof xi?(f.i=C,vi(f.i,f.h)):(O||(C=Da(C,ap)),f.i=new xi(C,f.h))}function Yt(f,C,O){f.i.set(C,O)}function La(f){return Yt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Pt(f,C){return f?C?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Da(f,C,O){return typeof f=="string"?(f=encodeURI(f).replace(C,np),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function np(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Yl=/[#\/\?@]/g,rp=/[#\?:]/g,ip=/[#\?]/g,ap=/[#\?@]/g,Fd=/#/g;function xi(f,C){this.h=this.g=null,this.i=f||null,this.j=!!C}function tn(f){f.g||(f.g=new Map,f.h=0,f.i&&Vg(f.i,function(C,O){f.add(decodeURIComponent(C.replace(/\+/g," ")),O)}))}t=xi.prototype,t.add=function(f,C){tn(this),this.i=null,f=kr(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(C),this.h+=1,this};function Kr(f,C){tn(f),C=kr(f,C),f.g.has(C)&&(f.i=null,f.h-=f.g.get(C).length,f.g.delete(C))}function Qr(f,C){return tn(f),C=kr(f,C),f.g.has(C)}t.forEach=function(f,C){tn(this),this.g.forEach(function(O,W){O.forEach(function(oe){f.call(C,oe,W,this)},this)},this)},t.na=function(){tn(this);const f=Array.from(this.g.values()),C=Array.from(this.g.keys()),O=[];for(let W=0;W<C.length;W++){const oe=f[W];for(let me=0;me<oe.length;me++)O.push(C[W])}return O},t.V=function(f){tn(this);let C=[];if(typeof f=="string")Qr(this,f)&&(C=C.concat(this.g.get(kr(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)C=C.concat(f[O])}return C},t.set=function(f,C){return tn(this),this.i=null,f=kr(this,f),Qr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[C]),this.h+=1,this},t.get=function(f,C){return f?(f=this.V(f),0<f.length?String(f[0]):C):C};function Ma(f,C,O){Kr(f,C),0<O.length&&(f.i=null,f.g.set(kr(f,C),N(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],C=Array.from(this.g.keys());for(var O=0;O<C.length;O++){var W=C[O];const me=encodeURIComponent(String(W)),Me=this.V(W);for(W=0;W<Me.length;W++){var oe=me;Me[W]!==""&&(oe+="="+encodeURIComponent(String(Me[W]))),f.push(oe)}}return this.i=f.join("&")};function kr(f,C){return C=String(C),f.j&&(C=C.toLowerCase()),C}function vi(f,C){C&&!f.j&&(tn(f),f.i=null,f.g.forEach(function(O,W){var oe=W.toLowerCase();W!=oe&&(Kr(this,W),Ma(this,oe,O))},f)),f.j=C}function Ug(f,C){const O=new Po;if(d.Image){const W=new Image;W.onload=b(Hn,O,"TestLoadImage: loaded",!0,C,W),W.onerror=b(Hn,O,"TestLoadImage: error",!1,C,W),W.onabort=b(Hn,O,"TestLoadImage: abort",!1,C,W),W.ontimeout=b(Hn,O,"TestLoadImage: timeout",!1,C,W),d.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=f}else C(!1)}function op(f,C){const O=new Po,W=new AbortController,oe=setTimeout(()=>{W.abort(),Hn(O,"TestPingServer: timeout",!1,C)},1e4);fetch(f,{signal:W.signal}).then(me=>{clearTimeout(oe),me.ok?Hn(O,"TestPingServer: ok",!0,C):Hn(O,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(oe),Hn(O,"TestPingServer: error",!1,C)})}function Hn(f,C,O,W,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),W(O)}catch(me){}}function zg(){this.g=new is}function lp(f,C,O){const W=O||"";try{Ia(f,function(oe,me){let Me=oe;h(oe)&&(Me=gi(oe)),C.push(W+me+"="+encodeURIComponent(Me))})}catch(oe){throw C.push(W+"type="+encodeURIComponent("_badmap")),oe}}function Wi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(Wi,Sr),Wi.prototype.g=function(){return new Oo(this.l,this.j)},Wi.prototype.i=(function(f){return function(){return f}})({});function Oo(f,C){vt.call(this),this.D=f,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Oo,vt),t=Oo.prototype,t.open=function(f,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=C,this.readyState=1,Xr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(C.body=f),(this.D||d).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cp(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function cp(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var C=f.value?f.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!f.done}))&&(this.response=this.responseText+=C)}f.done?Yr(this):Xr(this),this.readyState==3&&cp(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Yr(this))},t.Qa=function(f){this.g&&(this.response=f,Yr(this))},t.ga=function(){this.g&&Yr(this)};function Yr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Xr(f)}t.setRequestHeader=function(f,C){this.u.append(f,C)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],C=this.h.entries();for(var O=C.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=C.next();return f.join(`\r
`)};function Xr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function qi(f){let C="";return P(f,function(O,W){C+=W,C+=":",C+=O,C+=`\r
`}),C}function Fa(f,C,O){e:{for(W in O){var W=!1;break e}W=!0}W||(O=qi(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):Yt(f,C,O))}function ds(f){vt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ds,vt);var Hg=/^https?$/i,Bd=["POST","PUT"];t=ds.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,C,O,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);C=C?C.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wr.g(),this.v=this.o?Vi(this.o):Vi(Wr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(C,String(f),!0),this.B=!1}catch(me){Vo(this,me);return}if(f=O||"",O=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var oe in W)O.set(oe,W[oe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const me of W.keys())O.set(me,W.get(me));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(O.keys()).find(me=>me.toLowerCase()=="content-type"),oe=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Bd,C,void 0))||W||oe||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Me]of O)this.g.setRequestHeader(me,Me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jl(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){Vo(this,me)}};function Vo(f,C){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=C,f.m=5,Xl(f),ur(f)}function Xl(f){f.A||(f.A=!0,Ut(f,"complete"),Ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ut(this,"complete"),Ut(this,"abort"),ur(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ur(this,!0)),ds.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$d(this):this.bb())},t.bb=function(){$d(this)};function $d(f){if(f.h&&typeof l!="undefined"&&(!f.v[1]||Gn(f)!=4||f.Z()!=2)){if(f.u&&Gn(f)==4)ar(f.Ea,0,f);else if(Ut(f,"readystatechange"),Gn(f)==4){f.h=!1;try{const Me=f.Z();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var O;if(!(O=C)){var W;if(W=Me===0){var oe=String(f.D).match(Bo)[1]||null;!oe&&d.self&&d.self.location&&(oe=d.self.location.protocol.slice(0,-1)),W=!Hg.test(oe?oe.toLowerCase():"")}O=W}if(O)Ut(f,"complete"),Ut(f,"success");else{f.m=6;try{var me=2<Gn(f)?f.g.statusText:""}catch(Kt){me=""}f.l=me+" ["+f.Z()+"]",Xl(f)}}finally{ur(f)}}}}function ur(f,C){if(f.g){Jl(f);const O=f.g,W=f.v[0]?()=>{}:null;f.g=null,f.v=null,C||Ut(f,"ready");try{O.onreadystatechange=W}catch(oe){}}}function Jl(f){f.I&&(d.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Gn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var C=this.g.responseText;return f&&C.indexOf(f)==0&&(C=C.substring(f.length)),zr(C)}};function Od(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(C){return null}}function Zl(f){const C={};f=(f.g&&2<=Gn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<f.length;W++){if(L(f[W]))continue;var O=D(f[W]);const oe=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const me=C[oe]||[];C[oe]=me,me.push(O)}E(C,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(f,C,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||C}function Vd(f){this.Aa=0,this.i=[],this.j=new Po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,f),this.cb=yi("retryDelaySeedMs",1e4,f),this.Wa=yi("forwardChannelMaxRetries",2,f),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Fo(f&&f.concurrentRequestLimit),this.Da=new zg,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vd.prototype,t.la=8,t.G=1,t.connect=function(f,C,O,W){Ts(0),this.W=f,this.H=C||{},O&&W!==void 0&&(this.H.OSID=O,this.H.OAID=W),this.F=this.X,this.I=pp(this,null,this.W),bi(this)};function sn(f){if(ec(f),f.G==3){var C=f.U++,O=dr(f.I);if(Yt(O,"SID",f.K),Yt(O,"RID",C),Yt(O,"TYPE","terminate"),Ki(f,O),C=new qr(f,f.j,C),C.L=2,C.v=La(dr(O)),O=!1,d.navigator&&d.navigator.sendBeacon)try{O=d.navigator.sendBeacon(C.v.toString(),"")}catch(W){}!O&&d.Image&&(new Image().src=C.v,O=!0),O||(C.g=mp(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Zt(C)}hp(f)}function Jr(f){f.g&&(Ud(f),f.g.cancel(),f.g=null)}function ec(f){Jr(f),f.u&&(d.clearTimeout(f.u),f.u=null),nc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function bi(f){if(!cr(f.h)&&!f.s){f.s=!0;var C=f.Ga;q||se(),G||(q(),G=!0),re.add(C,f),f.B=0}}function Gg(f,C){return ep(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=C.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Hr(y(f.Ga,f,C),up(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const oe=new qr(this,this.j,f);let me=this.o;if(this.S&&(me?(me=w(me),B(me,this.S)):me=this.S),this.m!==null||this.O||(oe.H=me,me=null),this.P)e:{for(var C=0,O=0;O<this.i.length;O++){t:{var W=this.i[O];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(C+=W,4096<C){C=O;break e}if(C===4096||O===this.i.length-1){C=O+1;break e}}C=1e3}else C=1e3;C=Ba(this,oe,C),O=dr(this.I),Yt(O,"RID",f),Yt(O,"CVER",22),this.D&&Yt(O,"X-HTTP-Session-Id",this.D),Ki(this,O),me&&(this.O?C="headers="+encodeURIComponent(String(qi(me)))+"&"+C:this.m&&Fa(O,this.m,me)),Md(this.h,oe),this.Ua&&Yt(O,"TYPE","init"),this.P?(Yt(O,"$req",C),Yt(O,"SID","null"),oe.T=!0,ql(oe,O,null)):ql(oe,O,C),this.G=2}}else this.G==3&&(f?tc(this,f):this.i.length==0||cr(this.h)||tc(this))};function tc(f,C){var O;C?O=C.l:O=f.U++;const W=dr(f.I);Yt(W,"SID",f.K),Yt(W,"RID",O),Yt(W,"AID",f.T),Ki(f,W),f.m&&f.o&&Fa(W,f.m,f.o),O=new qr(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),C&&(f.i=C.D.concat(f.i)),C=Ba(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Md(f.h,O),ql(O,W,C)}function Ki(f,C){f.H&&P(f.H,function(O,W){Yt(C,W,O)}),f.l&&Ia({},function(O,W){Yt(C,W,O)})}function Ba(f,C,O){O=Math.min(f.i.length,O);var W=f.l?y(f.l.Na,f.l,f):null;e:{var oe=f.i;let me=-1;for(;;){const Me=["count="+O];me==-1?0<O?(me=oe[0].g,Me.push("ofs="+me)):me=0:Me.push("ofs="+me);let Kt=!0;for(let Us=0;Us<O;Us++){let Mt=oe[Us].g;const Ks=oe[Us].map;if(Mt-=me,0>Mt)me=Math.max(0,oe[Us].g-100),Kt=!1;else try{lp(Ks,Me,"req"+Mt+"_")}catch(Ps){W&&W(Ks)}}if(Kt){W=Me.join("&");break e}}}return f=f.i.splice(0,O),C.D=f,W}function Uo(f){if(!f.g&&!f.u){f.Y=1;var C=f.Fa;q||se(),G||(q(),G=!0),re.add(C,f),f.v=0}}function sc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Hr(y(f.Fa,f),up(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,dp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Hr(y(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ts(10),Jr(this),dp(this))};function Ud(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function dp(f){f.g=new qr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var C=dr(f.qa);Yt(C,"RID","rpc"),Yt(C,"SID",f.K),Yt(C,"AID",f.T),Yt(C,"CI",f.F?"0":"1"),!f.F&&f.ja&&Yt(C,"TO",f.ja),Yt(C,"TYPE","xmlhttp"),Ki(f,C),f.m&&f.o&&Fa(C,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=La(dr(C)),O.m=null,O.P=!0,Ld(O,f)}t.Za=function(){this.C!=null&&(this.C=null,Jr(this),sc(this),Ts(19))};function nc(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function rc(f,C){var O=null;if(f.g==C){nc(f),Ud(f),f.g=null;var W=2}else if(Rn(f.h,C))O=C.D,tp(f.h,C),W=1;else return;if(f.G!=0){if(C.o)if(W==1){O=C.m?C.m.length:0,C=Date.now()-C.F;var oe=f.B;W=Ro(),Ut(W,new zl(W,O)),bi(f)}else Uo(f);else if(oe=C.s,oe==3||oe==0&&0<C.X||!(W==1&&Gg(f,C)||W==2&&sc(f)))switch(O&&0<O.length&&(C=f.h,C.i=C.i.concat(O)),oe){case 1:Qi(f,5);break;case 4:Qi(f,10);break;case 3:Qi(f,6);break;default:Qi(f,2)}}}function up(f,C){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*C}function Qi(f,C){if(f.j.info("Error code "+C),C==2){var O=y(f.fb,f),W=f.Xa;const oe=!W;W=new Gi(W||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$o(W,"https"),La(W),oe?Ug(W.toString(),O):op(W.toString(),O)}else Ts(2);f.G=0,f.l&&f.l.sa(C),hp(f),ec(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ts(2)):(this.j.info("Failed to ping google.com"),Ts(1))};function hp(f){if(f.G=0,f.ka=[],f.l){const C=sp(f.h);(C.length!=0||f.i.length!=0)&&(T(f.ka,C),T(f.ka,f.i),f.h.i.length=0,N(f.i),f.i.length=0),f.l.ra()}}function pp(f,C,O){var W=O instanceof Gi?dr(O):new Gi(O);if(W.g!="")C&&(W.g=C+"."+W.g),Ra(W,W.s);else{var oe=d.location;W=oe.protocol,C=C?C+"."+oe.hostname:oe.hostname,oe=+oe.port;var me=new Gi(null);W&&$o(me,W),C&&(me.g=C),oe&&Ra(me,oe),O&&(me.l=O),W=me}return O=f.D,C=f.ya,O&&C&&Yt(W,O,C),Yt(W,"VER",f.la),Ki(f,W),W}function mp(f,C,O){if(C&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=f.Ca&&!f.pa?new ds(new Wi({eb:O})):new ds(f.pa),C.Ha(f.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zd(){}t=zd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ic(){}ic.prototype.g=function(f,C){return new Pn(f,C)};function Pn(f,C){vt.call(this),this.g=new Vd(C),this.l=f,this.h=C&&C.messageUrlParams||null,f=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(f?f["X-WebChannel-Content-Type"]=C.messageContentType:f={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(f?f["X-WebChannel-Client-Profile"]=C.va:f={"X-WebChannel-Client-Profile":C.va}),this.g.S=f,(f=C&&C.Sb)&&!L(f)&&(this.g.m=f),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!L(C)&&(this.g.D=C,f=this.h,f!==null&&C in f&&(f=this.h,C in f&&delete f[C])),this.j=new _i(this)}S(Pn,vt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){sn(this.g)},Pn.prototype.o=function(f){var C=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=gi(f),f=O);C.i.push(new Zh(C.Ya++,f)),C.G==3&&bi(C)},Pn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,Pn.aa.N.call(this)};function fp(f){or.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var C=f.__sm__;if(C){e:{for(const O in C){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,C=C!==null&&f in C?C[f]:void 0),this.data=C}else this.data=f}S(fp,or);function gp(){zi.call(this),this.status=1}S(gp,zi);function _i(f){this.g=f}S(_i,zd),_i.prototype.ua=function(){Ut(this.g,"a")},_i.prototype.ta=function(f){Ut(this.g,new fp(f))},_i.prototype.sa=function(f){Ut(this.g,new gp)},_i.prototype.ra=function(){Ut(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,eC=function(){return new ic},ZT=function(){return Ro()},JT=lr,Gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gl.NO_ERROR=0,Gl.TIMEOUT=8,Gl.HTTP_ERROR=6,Km=Gl,Qh.COMPLETE="complete",XT=Qh,Ui.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Tu=Ui,ds.prototype.listenOnce=ds.prototype.L,ds.prototype.getLastError=ds.prototype.Ka,ds.prototype.getLastErrorCode=ds.prototype.Ba,ds.prototype.getStatus=ds.prototype.Z,ds.prototype.getResponseJson=ds.prototype.Oa,ds.prototype.getResponseText=ds.prototype.oa,ds.prototype.send=ds.prototype.ea,ds.prototype.setWithCredentials=ds.prototype.Ha,YT=ds}).apply(typeof pm!="undefined"?pm:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const q2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new G0("@firebase/firestore");function gu(){return El.logLevel}function qe(t,...e){if(El.logLevel<=Dt.DEBUG){const s=e.map(n1);El.debug(`Firestore (${bd}): ${t}`,...s)}}function ja(t,...e){if(El.logLevel<=Dt.ERROR){const s=e.map(n1);El.error(`Firestore (${bd}): ${t}`,...s)}}function ed(t,...e){if(El.logLevel<=Dt.WARN){const s=e.map(n1);El.warn(`Firestore (${bd}): ${t}`,...s)}}function n1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t="Unexpected state"){const e=`FIRESTORE (${bd}) INTERNAL ASSERTION FAILED: `+t;throw ja(e),new Error(e)}function Qt(t,e){t||ht()}function xt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Ca{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(Tn.UNAUTHENTICATED)))}shutdown(){}}class JM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class ZM{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Qt(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let a=new xa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new xa,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},d=u=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>d(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xa)}}),0),l()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string"),new tC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new Tn(e)}}class e9{constructor(e,s,r){this.l=e,this.h=s,this.P=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t9{constructor(e,s,r){this.l=e,this.h=s,this.P=r}getToken(){return Promise.resolve(new e9(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable((()=>s(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){Qt(this.o===void 0);const r=a=>{a.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(Qt(typeof s.token=="string"),this.R=s.token,new s9(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=r9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<s&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(t,e){return t<e?-1:t>e?1:0}function td(t,e,s){return t.length===e.length&&t.every(((r,i)=>s(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Be(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Be(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new Be(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ks.fromMillis(Date.now())}static fromDate(e){return ks.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*s));return new ks(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new ks(0,0))}static max(){return new gt(new ks(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,s,r){s===void 0?s=0:s>e.length&&ht(),r===void 0?r=e.length-s:r>e.length-s&&ht(),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return oh.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof oh?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const a=e.get(i),l=s.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Jt extends oh{construct(e,s,r){return new Jt(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new Jt(s)}static emptyPath(){return new Jt([])}}const i9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends oh{construct(e,s,r){return new hn(e,s,r)}static isValidIdentifier(e){return i9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const s=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Be(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Be(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Be(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Be(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(s)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Jt.fromString(e))}static fromName(e){return new Je(Jt.fromString(e).popFirst(5))}static empty(){return new Je(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Jt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Jt(e.slice()))}}function a9(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=gt.fromTimestamp(r===1e9?new ks(s+1,0):new ks(s,r));return new wo(i,Je.empty(),e)}function o9(t){return new wo(t.readTime,t.key,-1)}class wo{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new wo(gt.min(),Je.empty(),-1)}static max(){return new wo(gt.max(),Je.empty(),-1)}}function l9(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=Je.comparator(t.documentKey,e.documentKey),s!==0?s:Ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==c9)throw t;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ke(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(r,i)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ke?s:ke.resolve(s)}catch(s){return ke.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ke.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ke.reject(s)}static resolve(e){return new ke(((s,r)=>{s(e)}))}static reject(e){return new ke(((s,r)=>{r(e)}))}static waitFor(e){return new ke(((s,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&s()}),(u=>r(u)))})),l=!0,a===i&&s()}))}static or(e){let s=ke.resolve(!1);for(const r of e)s=s.next((i=>i?ke.resolve(i):r()));return s}static forEach(e,s){const r=[];return e.forEach(((i,a)=>{r.push(s.call(this,i,a))})),this.waitFor(r)}static mapArray(e,s){return new ke(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const h=u;s(e[h]).next((p=>{l[h]=p,++d,d===a&&r(l)}),(p=>i(p)))}}))}static doWhile(e,s){return new ke(((r,i)=>{const a=()=>{e()===!0?s().next((()=>{a()}),i):r()};a()}))}}function u9(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ih(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ie(r),this.se=r=>s.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}r1.oe=-1;function og(t){return t==null}function wf(t){return t===0&&1/t==-1/0}function h9(t){return typeof t=="number"&&Number.isInteger(t)&&!wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Fl(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,s){this.comparator=e,this.root=s||cn.EMPTY}insert(e,s){return new bs(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new bs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,s,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?r(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,s,r,i,a){this.key=e,this.value=s,this.color=r!=null?r:cn.RED,this.left=i!=null?i:cn.EMPTY,this.right=a!=null?a:cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,i,a){return new cn(e!=null?e:this.key,s!=null?s:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,r),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return cn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(e,s,r,i,a){return this}insert(e,s,r){return new cn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new bs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Q2(this.data.getIterator())}getIteratorFrom(e){return new Q2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new fn(this.comparator);return s.data=e,s}}class Q2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new yr([])}unionWith(e){let s=new fn(hn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new yr(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return td(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new rC("Invalid base64 string: "+a):a}})(e);return new xn(s)}static fromUint8Array(e){const s=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new xn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const p9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(t){if(Qt(!!t),typeof t=="string"){let e=0;const s=p9.exec(t);if(Qt(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rs(t.seconds),nanos:Rs(t.nanos)}}function Rs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Al(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function i1(t){const e=t.mapValue.fields.__previous_value__;return lg(e)?i1(e):e}function lh(t){const e=jo(t.mapValue.fields.__local_write_time__.timestampValue);return new ks(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,s,r,i,a,l,d,u,h){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h}}class ch{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new ch("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ch&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm={mapValue:{}};function Il(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lg(t)?4:g9(t)?9007199254740991:f9(t)?10:11:ht()}function Bi(t,e){if(t===e)return!0;const s=Il(t);if(s!==Il(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lh(t).isEqual(lh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=jo(i.timestampValue),d=jo(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Al(i.bytesValue).isEqual(Al(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Rs(i.geoPointValue.latitude)===Rs(a.geoPointValue.latitude)&&Rs(i.geoPointValue.longitude)===Rs(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Rs(i.integerValue)===Rs(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Rs(i.doubleValue),d=Rs(a.doubleValue);return l===d?wf(l)===wf(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return td(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(K2(l)!==K2(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!Bi(l[u],d[u])))return!1;return!0})(t,e);default:return ht()}}function dh(t,e){return(t.values||[]).find((s=>Bi(s,e)))!==void 0}function sd(t,e){if(t===e)return 0;const s=Il(t),r=Il(e);if(s!==r)return Ht(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ht(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Rs(a.integerValue||a.doubleValue),u=Rs(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1})(t,e);case 3:return Y2(t.timestampValue,e.timestampValue);case 4:return Y2(lh(t),lh(e));case 5:return Ht(t.stringValue,e.stringValue);case 6:return(function(a,l){const d=Al(a),u=Al(l);return d.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const p=Ht(d[h],u[h]);if(p!==0)return p}return Ht(d.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=Ht(Rs(a.latitude),Rs(l.latitude));return d!==0?d:Ht(Rs(a.longitude),Rs(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return X2(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,u,h,p;const g=a.fields||{},y=l.fields||{},b=(d=g.value)===null||d===void 0?void 0:d.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,N=Ht(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:X2(b,S)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===fm.mapValue&&l===fm.mapValue)return 0;if(a===fm.mapValue)return 1;if(l===fm.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),h=l.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let g=0;g<u.length&&g<p.length;++g){const y=Ht(u[g],p[g]);if(y!==0)return y;const b=sd(d[u[g]],h[p[g]]);if(b!==0)return b}return Ht(u.length,p.length)})(t.mapValue,e.mapValue);default:throw ht()}}function Y2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ht(t,e);const s=jo(t),r=jo(e),i=Ht(s.seconds,r.seconds);return i!==0?i:Ht(s.nanos,r.nanos)}function X2(t,e){const s=t.values||[],r=e.values||[];for(let i=0;i<s.length&&i<r.length;++i){const a=sd(s[i],r[i]);if(a)return a}return Ht(s.length,r.length)}function nd(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(s){const r=jo(s);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(s){return Al(s).toBase64()})(t.bytesValue):"referenceValue"in t?(function(s){return Je.fromName(s).toString()})(t.referenceValue):"geoPointValue"in t?(function(s){return`geo(${s.latitude},${s.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(s){let r="[",i=!0;for(const a of s.values||[])i?i=!1:r+=",",r+=Wy(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(s){const r=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Wy(s.fields[l])}`;return i+"}"})(t.mapValue):ht()}function jf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qy(t){return!!t&&"integerValue"in t}function a1(t){return!!t&&"arrayValue"in t}function J2(t){return!!t&&"nullValue"in t}function Z2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qm(t){return!!t&&"mapValue"in t}function f9(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Ou(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fl(t.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Ou(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Ou(t.arrayValue.values[s]);return e}return Object.assign({},t)}function g9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!Qm(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(s)}setAll(e){let s=hn.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,r,i),r={},i=[],s=d.popLast()}l?r[d.lastSegment()]=Ou(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(s);this.applyChanges(a,r,i)}delete(e){const s=this.field(e.popLast());Qm(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=s.mapValue.fields[e.get(r)];Qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,r){Fl(s,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new nr(Ou(this.value))}}function iC(t){const e=[];return Fl(t.fields,((s,r)=>{const i=new hn([s]);if(Qm(r)){const a=iC(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,s,r,i,a,l,d){this.key=e,this.documentType=s,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new En(e,0,gt.min(),gt.min(),gt.min(),nr.empty(),0)}static newFoundDocument(e,s,r,i){return new En(e,1,s,gt.min(),r,i,0)}static newNoDocument(e,s){return new En(e,2,s,gt.min(),gt.min(),nr.empty(),0)}static newUnknownDocument(e,s){return new En(e,3,s,gt.min(),gt.min(),nr.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,s){this.position=e,this.inclusive=s}}function ej(t,e,s){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=Je.comparator(Je.fromName(l.referenceValue),s.key):r=sd(l,s.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function tj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Bi(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,s="asc"){this.field=e,this.dir=s}}function x9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class $s extends aC{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new y9(e,s,r):s==="array-contains"?new w9(e,r):s==="in"?new j9(e,r):s==="not-in"?new S9(e,r):s==="array-contains-any"?new N9(e,r):new $s(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new b9(e,r):new _9(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(sd(s,this.value)):s!==null&&Il(this.value)===Il(s)&&this.matchesComparison(sd(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends aC{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new hi(e,s)}matches(e){return oC(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oC(t){return t.op==="and"}function lC(t){return v9(t)&&oC(t)}function v9(t){for(const e of t.filters)if(e instanceof hi)return!1;return!0}function Ky(t){if(t instanceof $s)return t.field.canonicalString()+t.op.toString()+nd(t.value);if(lC(t))return t.filters.map((e=>Ky(e))).join(",");{const e=t.filters.map((s=>Ky(s))).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof $s?(function(r,i){return i instanceof $s&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)})(t,e):t instanceof hi?(function(r,i){return i instanceof hi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&cC(l,i.filters[d])),!0):!1})(t,e):void ht()}function dC(t){return t instanceof $s?(function(s){return`${s.field.canonicalString()} ${s.op} ${nd(s.value)}`})(t):t instanceof hi?(function(s){return s.op.toString()+" {"+s.getFilters().map(dC).join(" ,")+"}"})(t):"Filter"}class y9 extends $s{constructor(e,s,r){super(e,s,r),this.key=Je.fromName(r.referenceValue)}matches(e){const s=Je.comparator(e.key,this.key);return this.matchesComparison(s)}}class b9 extends $s{constructor(e,s){super(e,"in",s),this.keys=uC("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class _9 extends $s{constructor(e,s){super(e,"not-in",s),this.keys=uC("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function uC(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map((r=>Je.fromName(r.referenceValue)))}class w9 extends $s{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return a1(s)&&dh(s.arrayValue,this.value)}}class j9 extends $s{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&dh(this.value.arrayValue,s)}}class S9 extends $s{constructor(e,s){super(e,"not-in",s)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!dh(this.value.arrayValue,s)}}class N9 extends $s{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!a1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>dh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,s=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function sj(t,e=null,s=[],r=[],i=null,a=null,l=null){return new k9(t,e,s,r,i,a,l)}function o1(t){const e=xt(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Ky(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),og(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>nd(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>nd(r))).join(",")),e.ue=s}return e.ue}function l1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!x9(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!cC(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tj(t.startAt,e.startAt)&&tj(t.endAt,e.endAt)}function Qy(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,s=null,r=[],i=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function T9(t,e,s,r,i,a,l,d){return new Ea(t,e,s,r,i,a,l,d)}function c1(t){return new Ea(t)}function nj(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d1(t){return t.collectionGroup!==null}function Kc(t){const e=xt(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new fn(hn.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new uh(a,r))})),s.has(hn.keyField().canonicalString())||e.ce.push(new uh(hn.keyField(),r))}return e.ce}function Ri(t){const e=xt(t);return e.le||(e.le=C9(e,Kc(t))),e.le}function C9(t,e){if(t.limitType==="F")return sj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new uh(i.field,a)}));const s=t.endAt?new rd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rd(t.startAt.position,t.startAt.inclusive):null;return sj(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function Yy(t,e){const s=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Sf(t,e,s){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function cg(t,e){return l1(Ri(t),Ri(e))&&t.limitType===e.limitType}function hC(t){return`${o1(Ri(t))}|lt:${t.limitType}`}function Lc(t){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((i=>dC(i))).join(", ")}]`),og(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((i=>nd(i))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((i=>nd(i))).join(",")),`Target(${r})`})(Ri(t))}; limitType=${t.limitType})`}function dg(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Kc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,u){const h=ej(l,d,u);return l.inclusive?h<=0:h<0})(r.startAt,Kc(r),i)||r.endAt&&!(function(l,d,u){const h=ej(l,d,u);return l.inclusive?h>=0:h>0})(r.endAt,Kc(r),i))})(t,e)}function E9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pC(t){return(e,s)=>{let r=!1;for(const i of Kc(t)){const a=A9(i,e,s);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function A9(t,e,s){const r=t.field.isKeyField()?Je.comparator(e.key,s.key):(function(a,l,d){const u=l.data.field(a),h=d.data.field(a);return u!==null&&h!==null?sd(u,h):ht()})(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fl(this.inner,((s,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=new bs(Je.comparator);function Sa(){return I9}const mC=new bs(Je.comparator);function Cu(...t){let e=mC;for(const s of t)e=e.insert(s.key,s);return e}function fC(t){let e=mC;return t.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function xl(){return Vu()}function gC(){return Vu()}function Vu(){return new _d((t=>t.toString()),((t,e)=>t.isEqual(e)))}const R9=new bs(Je.comparator),P9=new fn(Je.comparator);function It(...t){let e=P9;for(const s of t)e=e.add(s);return e}const L9=new fn(Ht);function D9(){return L9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function xC(t){return{integerValue:""+t}}function M9(t,e){return h9(e)?xC(e):u1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this._=void 0}}function F9(t,e,s){return t instanceof hh?(function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&lg(a)&&(a=i1(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(s,e):t instanceof ph?yC(t,e):t instanceof mh?bC(t,e):(function(i,a){const l=vC(i,a),d=rj(l)+rj(i.Pe);return qy(l)&&qy(i.Pe)?xC(d):u1(i.serializer,d)})(t,e)}function B9(t,e,s){return t instanceof ph?yC(t,e):t instanceof mh?bC(t,e):s}function vC(t,e){return t instanceof Nf?(function(r){return qy(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class hh extends ug{}class ph extends ug{constructor(e){super(),this.elements=e}}function yC(t,e){const s=_C(e);for(const r of t.elements)s.some((i=>Bi(i,r)))||s.push(r);return{arrayValue:{values:s}}}class mh extends ug{constructor(e){super(),this.elements=e}}function bC(t,e){let s=_C(e);for(const r of t.elements)s=s.filter((i=>!Bi(i,r)));return{arrayValue:{values:s}}}class Nf extends ug{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function rj(t){return Rs(t.integerValue||t.doubleValue)}function _C(t){return a1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,s){this.field=e,this.transform=s}}function O9(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof ph&&i instanceof ph||r instanceof mh&&i instanceof mh?td(r.elements,i.elements,Bi):r instanceof Nf&&i instanceof Nf?Bi(r.Pe,i.Pe):r instanceof hh&&i instanceof hh})(t.transform,e.transform)}class V9{constructor(e,s){this.version=e,this.transformResults=s}}class $r{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ym(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hg{}function wC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new h1(t.key,$r.none()):new Rh(t.key,t.data,$r.none());{const s=t.data,r=nr.empty();let i=new fn(hn.comparator);for(let a of e.fields)if(!i.has(a)){let l=s.field(a);l===null&&a.length>1&&(a=a.popLast(),l=s.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Eo(t.key,r,new yr(i.toArray()),$r.none())}}function U9(t,e,s){t instanceof Rh?(function(i,a,l){const d=i.value.clone(),u=aj(i.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,s):t instanceof Eo?(function(i,a,l){if(!Ym(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=aj(i.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(jC(i)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,s):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,s)}function Uu(t,e,s,r){return t instanceof Rh?(function(a,l,d,u){if(!Ym(a.precondition,l))return d;const h=a.value.clone(),p=oj(a.fieldTransforms,u,l);return h.setAll(p),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,s,r):t instanceof Eo?(function(a,l,d,u){if(!Ym(a.precondition,l))return d;const h=oj(a.fieldTransforms,u,l),p=l.data;return p.setAll(jC(a)),p.setAll(h),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,s,r):(function(a,l,d){return Ym(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,s)}function z9(t,e){let s=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=vC(r.transform,i||null);a!=null&&(s===null&&(s=nr.empty()),s.set(r.field,a))}return s||null}function ij(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&td(r,i,((a,l)=>O9(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rh extends hg{constructor(e,s,r,i=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eo extends hg{constructor(e,s,r,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jC(t){const e=new Map;return t.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}})),e}function aj(t,e,s){const r=new Map;Qt(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,B9(l,d,s[i]))}return r}function oj(t,e,s){const r=new Map;for(const i of t){const a=i.transform,l=s.data.field(i.field);r.set(i.field,F9(a,l,e))}return r}class h1 extends hg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H9 extends hg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,s,r,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&U9(a,e,r[i])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Uu(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Uu(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=gC();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=s.has(i.key)?null:d;const u=wC(l,d);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(gt.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),It())}isEqual(e){return this.batchId===e.batchId&&td(this.mutations,e.mutations,((s,r)=>ij(s,r)))&&td(this.baseMutations,e.baseMutations,((s,r)=>ij(s,r)))}}class p1{constructor(e,s,r,i){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(e,s,r){Qt(e.mutations.length===r.length);let i=(function(){return R9})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new p1(e,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ms,Ft;function K9(t){switch(t){default:return ht();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function SC(t){if(t===void 0)return ja("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Ms.OK:return xe.OK;case Ms.CANCELLED:return xe.CANCELLED;case Ms.UNKNOWN:return xe.UNKNOWN;case Ms.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Ms.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Ms.INTERNAL:return xe.INTERNAL;case Ms.UNAVAILABLE:return xe.UNAVAILABLE;case Ms.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Ms.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Ms.NOT_FOUND:return xe.NOT_FOUND;case Ms.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Ms.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Ms.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Ms.ABORTED:return xe.ABORTED;case Ms.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Ms.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Ms.DATA_LOSS:return xe.DATA_LOSS;default:return ht()}}(Ft=Ms||(Ms={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=new wl([4294967295,4294967295],0);function lj(t){const e=Q9().encode(t),s=new QT;return s.update(e),new Uint8Array(s.digest())}function cj(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wl([s,r],0),new wl([i,a],0)]}class m1{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Eu(`Invalid padding: ${s}`);if(r<0)throw new Eu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eu(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Eu(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=wl.fromNumber(this.Ie)}Ee(e,s,r){let i=e.add(s.multiply(wl.fromNumber(r)));return i.compare(Y9)===1&&(i=new wl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=lj(e),[r,i]=cj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);if(!this.de(l))return!1}return!0}static create(e,s,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new m1(a,i,s);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const s=lj(e),[r,i]=cj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);this.Ae(l)}}Ae(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,s,r,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const i=new Map;return i.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new pg(gt.min(),i,new bs(Ht),Sa(),It())}}class Ph{constructor(e,s,r,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Ph(r,s,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,s,r,i){this.Re=e,this.removedTargetIds=s,this.key=r,this.Ve=i}}class NC{constructor(e,s){this.targetId=e,this.me=s}}class kC{constructor(e,s,r=xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=i}}class dj{constructor(){this.fe=0,this.ge=hj(),this.pe=xn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=It(),s=It(),r=It();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:ht()}})),new Ph(this.pe,this.ye,e,s,r)}Ce(){this.we=!1,this.ge=hj()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X9{constructor(e){this.Le=e,this.Be=new Map,this.ke=Sa(),this.qe=uj(),this.Qe=new bs(Ht)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,(s=>{const r=this.Ge(s);switch(e.state){case 0:this.ze(s)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),r.De(e.resumeToken));break;default:ht()}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach(((r,i)=>{this.ze(i)&&s(i)}))}He(e){const s=e.targetId,r=e.me.count,i=this.Je(s);if(i){const a=i.target;if(Qy(a))if(r===0){const l=new Je(a.path);this.Ue(s,l,En.newNoDocument(l,gt.min()))}else Qt(r===1);else{const l=this.Ye(s);if(l!==r){const d=this.Ze(e),u=d?this.Xe(d,e,l):1;if(u!==0){this.je(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,h)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=s;let l,d;try{l=Al(r).toUint8Array()}catch(u){if(u instanceof rC)return ed("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new m1(l,i,a)}catch(u){return ed(u instanceof Eu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ie===0?null:d}Xe(e,s,r){return s.me.count===r-this.nt(e,s.targetId)?0:2}nt(e,s){const r=this.Le.getRemoteKeysForTarget(s);let i=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(s,a,null),i++)})),i}rt(e){const s=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&Qy(d.target)){const u=new Je(d.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,En.newNoDocument(u,e))}a.be&&(s.set(l,a.ve()),a.Ce())}}));let r=It();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const i=new pg(e,s,this.Qe,this.ke,r);return this.ke=Sa(),this.qe=uj(),this.Qe=new bs(Ht),i}$e(e,s){if(!this.ze(e))return;const r=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,r),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),r&&(this.ke=this.ke.insert(s,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new dj,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new fn(Ht),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||qe("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dj),this.Le.getRemoteKeysForTarget(e).forEach((s=>{this.Ue(e,s,null)}))}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function uj(){return new bs(Je.comparator)}function hj(){return new bs(Je.comparator)}const J9={asc:"ASCENDING",desc:"DESCENDING"},Z9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e7={and:"AND",or:"OR"};class t7{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Xy(t,e){return t.useProto3Json||og(e)?e:{value:e}}function kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s7(t,e){return kf(t,e.toTimestamp())}function Pi(t){return Qt(!!t),gt.fromTimestamp((function(s){const r=jo(s);return new ks(r.seconds,r.nanos)})(t))}function f1(t,e){return Jy(t,e).canonicalString()}function Jy(t,e){const s=(function(i){return new Jt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?s:s.child(e)}function CC(t){const e=Jt.fromString(t);return Qt(PC(e)),e}function Zy(t,e){return f1(t.databaseId,e.path)}function kv(t,e){const s=CC(e);if(s.get(1)!==t.databaseId.projectId)throw new Be(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Be(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new Je(AC(s))}function EC(t,e){return f1(t.databaseId,e)}function n7(t){const e=CC(t);return e.length===4?Jt.emptyPath():AC(e)}function e0(t){return new Jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AC(t){return Qt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pj(t,e,s){return{name:Zy(t,e),fields:s.value.mapValue.fields}}function r7(t,e){let s;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ht()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Qt(p===void 0||typeof p=="string"),xn.fromBase64String(p||"")):(Qt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),xn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const p=h.code===void 0?xe.UNKNOWN:SC(h.code);return new Be(p,h.message||"")})(l);s=new kC(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kv(t,r.document.name),a=Pi(r.document.updateTime),l=r.document.createTime?Pi(r.document.createTime):gt.min(),d=new nr({mapValue:{fields:r.document.fields}}),u=En.newFoundDocument(i,a,l,d),h=r.targetIds||[],p=r.removedTargetIds||[];s=new Xm(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kv(t,r.document),a=r.readTime?Pi(r.readTime):gt.min(),l=En.newNoDocument(i,a),d=r.removedTargetIds||[];s=new Xm([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kv(t,r.document),a=r.removedTargetIds||[];s=new Xm([],a,i,null)}else{if(!("filter"in e))return ht();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new q9(i,a),d=r.targetId;s=new NC(d,l)}}return s}function i7(t,e){let s;if(e instanceof Rh)s={update:pj(t,e.key,e.value)};else if(e instanceof h1)s={delete:Zy(t,e.key)};else if(e instanceof Eo)s={update:pj(t,e.key,e.data),updateMask:m7(e.fieldMask)};else{if(!(e instanceof H9))return ht();s={verify:Zy(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof hh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ph)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nf)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw ht()})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:s7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ht()})(t,e.precondition)),s}function a7(t,e){return t&&t.length>0?(Qt(e!==void 0),t.map((s=>(function(i,a){let l=i.updateTime?Pi(i.updateTime):Pi(a);return l.isEqual(gt.min())&&(l=Pi(a)),new V9(l,i.transformResults||[])})(s,e)))):[]}function o7(t,e){return{documents:[EC(t,e.path)]}}function l7(t,e){const s={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=EC(t,i);const a=(function(h){if(h.length!==0)return RC(hi.create(h,"and"))})(e.filters);a&&(s.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:Dc(y.field),direction:u7(y.dir)}})(p)))})(e.orderBy);l&&(s.structuredQuery.orderBy=l);const d=Xy(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:s,parent:i}}function c7(t){let e=n7(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){Qt(r===1);const p=s.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];s.where&&(a=(function(g){const y=IC(g);return y instanceof hi&&lC(y)?y.getFilters():[y]})(s.where));let l=[];s.orderBy&&(l=(function(g){return g.map((y=>(function(S){return new uh(Mc(S.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(y)))})(s.orderBy));let d=null;s.limit&&(d=(function(g){let y;return y=typeof g=="object"?g.value:g,og(y)?null:y})(s.limit));let u=null;s.startAt&&(u=(function(g){const y=!!g.before,b=g.values||[];return new rd(b,y)})(s.startAt));let h=null;return s.endAt&&(h=(function(g){const y=!g.before,b=g.values||[];return new rd(b,y)})(s.endAt)),T9(e,i,l,a,d,"F",u,h)}function d7(t,e){const s=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function IC(t){return t.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Mc(s.unaryFilter.field);return $s.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mc(s.unaryFilter.field);return $s.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Mc(s.unaryFilter.field);return $s.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Mc(s.unaryFilter.field);return $s.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ht()}})(t):t.fieldFilter!==void 0?(function(s){return $s.create(Mc(s.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}})(s.fieldFilter.op),s.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(s){return hi.create(s.compositeFilter.filters.map((r=>IC(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht()}})(s.compositeFilter.op))})(t):ht()}function u7(t){return J9[t]}function h7(t){return Z9[t]}function p7(t){return e7[t]}function Dc(t){return{fieldPath:t.canonicalString()}}function Mc(t){return hn.fromServerFormat(t.fieldPath)}function RC(t){return t instanceof $s?(function(s){if(s.op==="=="){if(Z2(s.value))return{unaryFilter:{field:Dc(s.field),op:"IS_NAN"}};if(J2(s.value))return{unaryFilter:{field:Dc(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Z2(s.value))return{unaryFilter:{field:Dc(s.field),op:"IS_NOT_NAN"}};if(J2(s.value))return{unaryFilter:{field:Dc(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(s.field),op:h7(s.op),value:s.value}}})(t):t instanceof hi?(function(s){const r=s.getFilters().map((i=>RC(i)));return r.length===1?r[0]:{compositeFilter:{op:p7(s.op),filters:r}}})(t):ht()}function m7(t){const e=[];return t.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function PC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,s,r,i,a=gt.min(),l=gt.min(),d=xn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.ct=e}}function g7(t){const e=c7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(){this.un=new v7}addToCollectionParentIndex(e,s){return this.un.add(s),ke.resolve()}getCollectionParents(e,s){return ke.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return ke.resolve()}deleteFieldIndex(e,s){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,s){return ke.resolve()}getDocumentsMatchingTarget(e,s){return ke.resolve(null)}getIndexType(e,s){return ke.resolve(0)}getFieldIndexes(e,s){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,s){return ke.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,s){return ke.resolve(wo.min())}updateCollectionGroup(e,s,r){return ke.resolve()}updateIndexEntries(e,s){return ke.resolve()}}class v7{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s]||new fn(Jt.comparator),a=!i.has(r);return this.index[s]=i.add(r),a}has(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new id(0)}static kn(){return new id(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(){this.changes=new _d((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ke.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,s,r,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,s)))).next((i=>(r!==null&&Uu(r.mutation,i,yr.empty(),ks.now()),i)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,It()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=It()){const i=xl();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,r).next((a=>{let l=Cu();return a.forEach(((d,u)=>{l=l.insert(d,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,s){const r=xl();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,It())))}populateOverlays(e,s,r){const i=[];return r.forEach((a=>{s.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{s.set(l,d)}))}))}computeViews(e,s,r,i){let a=Sa();const l=Vu(),d=(function(){return Vu()})();return s.forEach(((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Eo)?a=a.insert(h.key,h):p!==void 0?(l.set(h.key,p.mutation.getFieldMask()),Uu(p.mutation,h,p.mutation.getFieldMask(),ks.now())):l.set(h.key,yr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,p)=>l.set(h,p))),s.forEach(((h,p)=>{var g;return d.set(h,new b7(p,(g=l.get(h))!==null&&g!==void 0?g:null))})),d)))}recalculateAndSaveOverlays(e,s){const r=Vu();let i=new bs(((l,d)=>l-d)),a=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((l=>{for(const d of l)d.keys().forEach((u=>{const h=s.get(u);if(h===null)return;let p=r.get(u)||yr.empty();p=d.applyToLocalView(h,p),r.set(u,p);const g=(i.get(d.batchId)||It()).add(u);i=i.insert(d.batchId,g)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,p=u.value,g=gC();p.forEach((y=>{if(!a.has(y)){const b=wC(s.get(y),r.get(y));b!==null&&g.set(y,b),a=a.add(y)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,g))}return ke.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,i){return(function(l){return Je.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):d1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,i):this.getDocumentsMatchingCollectionQuery(e,s,r,i)}getNextDocuments(e,s,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,i-a.size):ke.resolve(xl());let d=-1,u=a;return l.next((h=>ke.forEach(h,((p,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),a.get(p)?ke.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{u=u.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,It()))).next((p=>({batchId:d,changes:fC(p)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Je(s)).next((r=>{let i=Cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,i){const a=s.collectionGroup;let l=Cu();return this.indexManager.getCollectionParents(e,a).next((d=>ke.forEach(d,(u=>{const h=(function(g,y){return new Ea(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(s,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,y)=>{l=l.insert(g,y)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,s,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,a,i)))).next((l=>{a.forEach(((u,h)=>{const p=h.getKey();l.get(p)===null&&(l=l.insert(p,En.newInvalidDocument(p)))}));let d=Cu();return l.forEach(((u,h)=>{const p=a.get(u);p!==void 0&&Uu(p.mutation,h,yr.empty(),ks.now()),dg(s,h)&&(d=d.insert(u,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return ke.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,(function(i){return{id:i.id,version:i.version,createTime:Pi(i.createTime)}})(s)),ke.resolve()}getNamedQuery(e,s){return ke.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,(function(i){return{name:i.name,query:g7(i.bundledQuery),readTime:Pi(i.readTime)}})(s)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.overlays=new bs(Je.comparator),this.Ir=new Map}getOverlay(e,s){return ke.resolve(this.overlays.get(s))}getOverlays(e,s){const r=xl();return ke.forEach(s,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((i,a)=>{this.ht(e,s,a)})),ke.resolve()}removeOverlaysForBatchId(e,s,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),ke.resolve()}getOverlaysForCollection(e,s,r){const i=xl(),a=s.length+1,l=new Je(s.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,s,r,i){let a=new bs(((h,p)=>h-p));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=xl(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const d=xl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,p)=>d.set(h,p))),!(d.size()>=i)););return ke.resolve(d)}ht(e,s,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new W9(s,r));let a=this.Ir.get(s);a===void 0&&(a=It(),this.Ir.set(s,a)),this.Ir.set(s,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.Tr=new fn(Zs.Er),this.dr=new fn(Zs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const r=new Zs(e,s);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Vr(new Zs(e,s))}mr(e,s){e.forEach((r=>this.removeReference(r,s)))}gr(e){const s=new Je(new Jt([])),r=new Zs(s,e),i=new Zs(s,e+1),a=[];return this.dr.forEachInRange([r,i],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new Je(new Jt([])),r=new Zs(s,e),i=new Zs(s,e+1);let a=It();return this.dr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const s=new Zs(e,0),r=this.Tr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class Zs{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return Je.comparator(e.key,s.key)||Ht(e.wr,s.wr)}static Ar(e,s){return Ht(e.wr,s.wr)||Je.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new fn(Zs.Er)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new G9(a,s,r,i);this.mutationQueue.push(l);for(const d of i)this.br=this.br.add(new Zs(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ke.resolve(l)}lookupMutationBatch(e,s){return ke.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,i=this.vr(r),a=i<0?0:i;return ke.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new Zs(s,0),i=new Zs(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(l=>{const d=this.Dr(l.wr);a.push(d)})),ke.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new fn(Ht);return s.forEach((i=>{const a=new Zs(i,0),l=new Zs(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),ke.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const l=new Zs(new Je(a),0);let d=new fn(Ht);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(d=d.add(u.wr)),!0)}),l),ke.resolve(this.Cr(d))}Cr(e){const s=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&s.push(i)})),s}removeMutationBatch(e,s){Qt(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ke.forEach(s.mutations,(i=>{const a=new Zs(i.key,s.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,s){const r=new Zs(s,0),i=this.br.firstAfterOrEqual(r);return ke.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.Mr=e,this.docs=(function(){return new bs(Je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ke.resolve(r?r.document.mutableCopy():En.newInvalidDocument(s))}getEntries(e,s){let r=Sa();return s.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():En.newInvalidDocument(i))})),ke.resolve(r)}getDocumentsMatchingQuery(e,s,r,i){let a=Sa();const l=s.path,d=new Je(l.child("")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||l9(o9(p),r)<=0||(i.has(p.key)||dg(s,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ke.resolve(a)}getAllFromCollectionGroup(e,s,r,i){ht()}Or(e,s){return ke.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new T7(this)}getSize(e){return ke.resolve(this.size)}}class T7 extends y7{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),ke.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.persistence=e,this.Nr=new _d((s=>o1(s)),l1),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new g1,this.targetCount=0,this.kr=id.Bn()}forEachTarget(e,s){return this.Nr.forEach(((r,i)=>s(i))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.Lr&&(this.Lr=s),ke.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new id(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,ke.resolve()}updateTargetData(e,s){return this.Kn(s),ke.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,s,r){let i=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),ke.waitFor(a).next((()=>i))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,s){const r=this.Nr.get(s)||null;return ke.resolve(r)}addMatchingKeys(e,s,r){return this.Br.Rr(s,r),ke.resolve()}removeMatchingKeys(e,s,r){this.Br.mr(s,r);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),ke.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),ke.resolve()}getMatchingKeysForTargetId(e,s){const r=this.Br.yr(s);return ke.resolve(r)}containsKey(e,s){return ke.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,s){this.qr={},this.overlays={},this.Qr=new r1(0),this.Kr=!1,this.Kr=!0,this.$r=new S7,this.referenceDelegate=e(this),this.Ur=new C7(this),this.indexManager=new x7,this.remoteDocumentCache=(function(i){return new k7(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new f7(s),this.Gr=new w7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new j7,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.qr[e.toKey()];return r||(r=new N7(s,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,r){qe("MemoryPersistence","Starting transaction:",e);const i=new A7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,s){return ke.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,s))))}}class A7 extends d9{constructor(e){super(),this.currentSequenceNumber=e}}class x1{constructor(e){this.persistence=e,this.Jr=new g1,this.Yr=null}static Zr(e){return new x1(e)}get Xr(){if(this.Yr)return this.Yr;throw ht()}addReference(e,s,r){return this.Jr.addReference(r,s),this.Xr.delete(r.toString()),ke.resolve()}removeReference(e,s,r){return this.Jr.removeReference(r,s),this.Xr.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),ke.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,s)))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,(r=>{const i=Je.fromPath(r);return this.ei(e,i).next((a=>{a||s.removeEntry(i,gt.min())}))})).next((()=>(this.Yr=null,s.apply(e))))}updateLimboDocument(e,s){return this.ei(e,s).next((r=>{r?this.Xr.delete(s.toString()):this.Xr.add(s.toString())}))}Wr(e){return 0}ei(e,s){return ke.or([()=>ke.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,s,r,i){this.targetId=e,this.fromCache=s,this.$i=r,this.Ui=i}static Wi(e,s){let r=It(),i=It();for(const a of s.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new v1(e,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return IL()?8:u9(An())>0?6:4})()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,r,i){const a={result:null};return this.Yi(e,s).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,s,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new I7;return this.Xi(e,s,l).next((d=>{if(a.result=d,this.zi)return this.es(e,s,l,d.size)}))})).next((()=>a.result))}es(e,s,r,i){return r.documentReadCount<this.ji?(gu()<=Dt.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",Lc(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(gu()<=Dt.DEBUG&&qe("QueryEngine","Query:",Lc(s),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(gu()<=Dt.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",Lc(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(s))):ke.resolve())}Yi(e,s){if(nj(s))return ke.resolve(null);let r=Ri(s);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(s.limit!==null&&i===1&&(s=Sf(s,null,"F"),r=Ri(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=It(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(s,d);return this.ns(s,h,l,u.readTime)?this.Yi(e,Sf(s,null,"F")):this.rs(e,h,s,u)}))))})))))}Zi(e,s,r,i){return nj(s)||i.isEqual(gt.min())?ke.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(s,a);return this.ns(s,l,r,i)?ke.resolve(null):(gu()<=Dt.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lc(s)),this.rs(e,l,s,a9(i,-1)).next((d=>d)))}))}ts(e,s){let r=new fn(pC(e));return s.forEach(((i,a)=>{dg(e,a)&&(r=r.add(a))})),r}ns(e,s,r,i){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,r){return gu()<=Dt.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",Lc(s)),this.Ji.getDocumentsMatchingQuery(e,s,wo.min(),r)}rs(e,s,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(s.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,s,r,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new bs(Ht),this._s=new _d((a=>o1(a)),l1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _7(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.os)))}}function L7(t,e,s,r){return new P7(t,e,s,r)}async function LC(t,e){const s=xt(t);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return s.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let u=It();for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of a){d.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return s.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function D7(t,e){const s=xt(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return(function(d,u,h,p){const g=h.batch,y=g.keys();let b=ke.resolve();return y.forEach((S=>{b=b.next((()=>p.getEntry(u,S))).next((N=>{const T=h.docVersions.get(S);Qt(T!==null),N.version.compareTo(T)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(u,g)))})(s,r,e,a).next((()=>a.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let u=It();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u})(e)))).next((()=>s.localDocuments.getDocuments(r,i)))}))}function DC(t){const e=xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Ur.getLastRemoteSnapshotVersion(s)))}function M7(t,e){const s=xt(t),r=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const d=[];e.targetChanges.forEach(((p,g)=>{const y=i.get(g);if(!y)return;d.push(s.Ur.removeMatchingKeys(a,p.removedDocuments,g).next((()=>s.Ur.addMatchingKeys(a,p.addedDocuments,g))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(xn.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(g,b),(function(N,T,M){return N.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(y,b,p)&&d.push(s.Ur.updateTargetData(a,b))}));let u=Sa(),h=It();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(a,p))})),d.push(F7(a,l,e.documentUpdates).next((p=>{u=p.Ps,h=p.Is}))),!r.isEqual(gt.min())){const p=s.Ur.getLastRemoteSnapshotVersion(a).next((g=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(p)}return ke.waitFor(d).next((()=>l.apply(a))).next((()=>s.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(s.os=i,a)))}function F7(t,e,s){let r=It(),i=It();return s.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=Sa();return s.forEach(((d,u)=>{const h=a.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(gt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)})),{Ps:l,Is:i}}))}function B7(t,e){const s=xt(t);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $7(t,e){const s=xt(t);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return s.Ur.getTargetData(r,e).next((a=>a?(i=a,ke.resolve(i)):s.Ur.allocateTargetId(r).next((l=>(i=new po(e,l,"TargetPurposeListen",r.currentSequenceNumber),s.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=s.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(r.targetId,r),s._s.set(e,r.targetId)),r}))}async function t0(t,e,s){const r=xt(t),i=r.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ih(l))throw l;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function mj(t,e,s){const r=xt(t);let i=gt.min(),a=It();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,h,p){const g=xt(u),y=g._s.get(p);return y!==void 0?ke.resolve(g.os.get(y)):g.Ur.getTargetData(h,p)})(r,l,Ri(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,s?i:gt.min(),s?a:It()))).next((d=>(O7(r,E9(e),d),{documents:d,Ts:a})))))}function O7(t,e,s){let r=t.us.get(e)||gt.min();s.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class fj{constructor(){this.activeTargetIds=D9()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V7{constructor(){this.so=new fj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,r){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fj,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm=null;function Tv(){return gm===null?gm=(function(){return 268435456+Math.round(2147483648*Math.random())})():gm++,"0x"+gm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class G7 extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const r=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,r,i,a,l){const d=Tv(),u=this.xo(s,r.toUriEncodedString());qe("RestConnection",`Sending RPC '${s}' ${d}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,l),this.No(s,u,h,i).then((p=>(qe("RestConnection",`Received RPC '${s}' ${d}: `,p),p)),(p=>{throw ed("RestConnection",`RPC '${s}' ${d} failed with error: `,p,"url: ",u,"request:",i),p}))}Lo(s,r,i,a,l,d){return this.Mo(s,r,i,a,l)}Oo(s,r,i){s["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bd})(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>s[l]=a)),i&&i.headers.forEach(((a,l)=>s[l]=a))}xo(s,r){const i=z7[s];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,r,i){const a=Tv();return new Promise(((l,d)=>{const u=new YT;u.setWithCredentials(!0),u.listenOnce(XT.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Km.NO_ERROR:const p=u.getResponseJson();qe(Nn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Km.TIMEOUT:qe(Nn,`RPC '${e}' ${a} timed out`),d(new Be(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const g=u.getStatus();if(qe(Nn,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const S=(function(T){const M=T.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(M)>=0?M:xe.UNKNOWN})(b.status);d(new Be(S,b.message))}else d(new Be(xe.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new Be(xe.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{qe(Nn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);qe(Nn,`RPC '${e}' ${a} sending request:`,i),u.send(s,"POST",h,r,15)}))}Bo(e,s,r){const i=Tv(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=eC(),d=ZT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const p=a.join("");qe(Nn,`Creating RPC '${e}' stream ${i}: ${p}`,u);const g=l.createWebChannel(p,u);let y=!1,b=!1;const S=new H7({Io:T=>{b?qe(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(y||(qe(Nn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),qe(Nn,`RPC '${e}' stream ${i} sending:`,T),g.send(T))},To:()=>g.close()}),N=(T,M,L)=>{T.listen(M,(k=>{try{L(k)}catch(v){setTimeout((()=>{throw v}),0)}}))};return N(g,Tu.EventType.OPEN,(()=>{b||(qe(Nn,`RPC '${e}' stream ${i} transport opened.`),S.yo())})),N(g,Tu.EventType.CLOSE,(()=>{b||(b=!0,qe(Nn,`RPC '${e}' stream ${i} transport closed`),S.So())})),N(g,Tu.EventType.ERROR,(T=>{b||(b=!0,ed(Nn,`RPC '${e}' stream ${i} transport errored:`,T),S.So(new Be(xe.UNAVAILABLE,"The operation could not be completed")))})),N(g,Tu.EventType.MESSAGE,(T=>{var M;if(!b){const L=T.data[0];Qt(!!L);const k=L,v=k.error||((M=k[0])===null||M===void 0?void 0:M.error);if(v){qe(Nn,`RPC '${e}' stream ${i} received error:`,v);const _=v.status;let P=(function(A){const B=Ms[A];if(B!==void 0)return SC(B)})(_),E=v.message;P===void 0&&(P=xe.INTERNAL,E="Unknown error status: "+_+" with message "+v.message),b=!0,S.So(new Be(P,E)),g.close()}else qe(Nn,`RPC '${e}' stream ${i} received:`,L),S.bo(L)}})),N(d,JT.STAT_EVENT,(T=>{T.stat===Gy.PROXY?qe(Nn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Gy.NOPROXY&&qe(Nn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}function Cv(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){return new t7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,s,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,s,r,i,a,l,d,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MC(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===xe.RESOURCE_EXHAUSTED?(ja(s.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===s&&this.P_(r,i)}),(r=>{e((()=>{const i=new Be(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,s){const r=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget((()=>this.Yo===e?s():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W7 extends FC{constructor(e,s,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=r7(this.serializer,e),r=(function(a){if(!("targetChange"in a))return gt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?gt.min():l.readTime?Pi(l.readTime):gt.min()})(e);return this.listener.d_(s,r)}A_(e){const s={};s.database=e0(this.serializer),s.addTarget=(function(a,l){let d;const u=l.target;if(d=Qy(u)?{documents:o7(a,u)}:{query:l7(a,u)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=TC(a,l.resumeToken);const h=Xy(a,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(gt.min())>0){d.readTime=kf(a,l.snapshotVersion.toTimestamp());const h=Xy(a,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=d7(this.serializer,e);r&&(s.labels=r),this.a_(s)}R_(e){const s={};s.database=e0(this.serializer),s.removeTarget=e,this.a_(s)}}class q7 extends FC{constructor(e,s,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=a7(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.g_(r,s)}p_(){const e={};e.database=e0(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>i7(this.serializer,r)))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7 extends class{}{constructor(e,s,r,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Be(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,Jy(s,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(xe.UNKNOWN,a.toString())}))}Lo(e,s,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,Jy(s,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Be(xe.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Q7{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ja(s),this.D_=!1):qe("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,s,r,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{Bl(this)&&(qe("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=xt(u);h.L_.add(4),await Lh(h),h.q_.set("Unknown"),h.L_.delete(4),await fg(h)})(this))}))})),this.q_=new Q7(r,i)}}async function fg(t){if(Bl(t))for(const e of t.B_)await e(!0)}async function Lh(t){for(const e of t.B_)await e(!1)}function BC(t,e){const s=xt(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),w1(s)?_1(s):wd(s).r_()&&b1(s,e))}function y1(t,e){const s=xt(t),r=wd(s);s.N_.delete(e),r.r_()&&$C(s,e),s.N_.size===0&&(r.r_()?r.o_():Bl(s)&&s.q_.set("Unknown"))}function b1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(gt.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}wd(t).A_(e)}function $C(t,e){t.Q_.xe(e),wd(t).R_(e)}function _1(t){t.Q_=new X9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wd(t).start(),t.q_.v_()}function w1(t){return Bl(t)&&!wd(t).n_()&&t.N_.size>0}function Bl(t){return xt(t).L_.size===0}function OC(t){t.Q_=void 0}async function X7(t){t.q_.set("Online")}async function J7(t){t.N_.forEach(((e,s)=>{b1(t,e)}))}async function Z7(t,e){OC(t),w1(t)?(t.q_.M_(e),_1(t)):t.q_.set("Unknown")}async function eF(t,e,s){if(t.q_.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.N_.delete(d),i.Q_.removeTarget(d))})(t,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tf(t,r)}else if(e instanceof Xm?t.Q_.Ke(e):e instanceof NC?t.Q_.He(e):t.Q_.We(e),!s.isEqual(gt.min()))try{const r=await DC(t.localStore);s.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=a.N_.get(h);p&&a.N_.set(h,p.withResumeToken(u.resumeToken,l))}})),d.targetMismatches.forEach(((u,h)=>{const p=a.N_.get(u);if(!p)return;a.N_.set(u,p.withResumeToken(xn.EMPTY_BYTE_STRING,p.snapshotVersion)),$C(a,u);const g=new po(p.target,u,h,p.sequenceNumber);b1(a,g)})),a.remoteSyncer.applyRemoteEvent(d)})(t,s)}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),await Tf(t,r)}}async function Tf(t,e,s){if(!Ih(e))throw e;t.L_.add(1),await Lh(t),t.q_.set("Offline"),s||(s=()=>DC(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{qe("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await fg(t)}))}function VC(t,e){return e().catch((s=>Tf(t,s,e)))}async function gg(t){const e=xt(t),s=So(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tF(e);)try{const i=await B7(e.localStore,r);if(i===null){e.O_.length===0&&s.o_();break}r=i.batchId,sF(e,i)}catch(i){await Tf(e,i)}UC(e)&&zC(e)}function tF(t){return Bl(t)&&t.O_.length<10}function sF(t,e){t.O_.push(e);const s=So(t);s.r_()&&s.V_&&s.m_(e.mutations)}function UC(t){return Bl(t)&&!So(t).n_()&&t.O_.length>0}function zC(t){So(t).start()}async function nF(t){So(t).p_()}async function rF(t){const e=So(t);for(const s of t.O_)e.m_(s.mutations)}async function iF(t,e,s){const r=t.O_.shift(),i=p1.from(r,e,s);await VC(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await gg(t)}async function aF(t,e){e&&So(t).V_&&await(async function(r,i){if((function(l){return K9(l)&&l!==xe.ABORTED})(i.code)){const a=r.O_.shift();So(r).s_(),await VC(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await gg(r)}})(t,e),UC(t)&&zC(t)}async function xj(t,e){const s=xt(t);s.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Bl(s);s.L_.add(3),await Lh(s),r&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await fg(s)}async function oF(t,e){const s=xt(t);e?(s.L_.delete(2),await fg(s)):e||(s.L_.add(2),await Lh(s),s.q_.set("Unknown"))}function wd(t){return t.K_||(t.K_=(function(s,r,i){const a=xt(s);return a.w_(),new W7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:X7.bind(null,t),Ro:J7.bind(null,t),mo:Z7.bind(null,t),d_:eF.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),w1(t)?_1(t):t.q_.set("Unknown")):(await t.K_.stop(),OC(t))}))),t.K_}function So(t){return t.U_||(t.U_=(function(s,r,i){const a=xt(s);return a.w_(),new q7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nF.bind(null,t),mo:aF.bind(null,t),f_:rF.bind(null,t),g_:iF.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await gg(t)):(await t.U_.stop(),t.O_.length>0&&(qe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,r,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,a){const l=Date.now()+r,d=new j1(e,s,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S1(t,e){if(ja("AsyncQueue",`${e}: ${t}`),Ih(t))return new Be(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.comparator=e?(s,r)=>e(s,r)||Je.comparator(s.key,r.key):(s,r)=>Je.comparator(s.key,r.key),this.keyedMap=Cu(),this.sortedSet=new bs(this.comparator)}static emptySet(e){return new Qc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Qc)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new Qc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.W_=new bs(Je.comparator)}track(e){const s=e.doc.key,r=this.W_.get(s);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(s,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(s):e.type===1&&r.type===2?this.W_=this.W_.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):ht():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal(((s,r)=>{e.push(r)})),e}}class ad{constructor(e,s,r,i,a,l,d,u,h){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,r,i,a){const l=[];return s.forEach((d=>{l.push({type:0,doc:d})})),new ad(e,s,Qc.emptySet(s),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class cF{constructor(){this.queries=yj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,r){const i=xt(s),a=i.queries;i.queries=yj(),a.forEach(((l,d)=>{for(const u of d.j_)u.onError(r)}))})(this,new Be(xe.ABORTED,"Firestore shutting down"))}}function yj(){return new _d((t=>hC(t)),cg)}async function HC(t,e){const s=xt(t);let r=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new lF,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(l){const d=S1(l,`Initialization of query '${Lc(e.query)}' failed`);return void e.onError(d)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&N1(s)}async function GC(t,e){const s=xt(t),r=e.query;let i=3;const a=s.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function dF(t,e){const s=xt(t);let r=!1;for(const i of e){const a=i.query,l=s.queries.get(a);if(l){for(const d of l.j_)d.X_(i)&&(r=!0);l.z_=i}}r&&N1(s)}function uF(t,e,s){const r=xt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(s);r.queries.delete(e)}function N1(t){t.Y_.forEach((e=>{e.next()}))}var s0,bj;(bj=s0||(s0={})).ea="default",bj.Cache="cache";class WC{constructor(e,s,r){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ad(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const r=s!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==s0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.key=e}}class KC{constructor(e){this.key=e}}class hF{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=It(),this.mutatedKeys=It(),this.Aa=pC(e),this.Ra=new Qc(this.Aa)}get Va(){return this.Ta}ma(e,s){const r=s?s.fa:new vj,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,l=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const y=i.get(p),b=dg(this.query,g)?g:null,S=!!y&&this.mutatedKeys.has(y.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let T=!1;y&&b?y.data.isEqual(b.data)?S!==N&&(r.track({type:3,doc:b}),T=!0):this.ga(y,b)||(r.track({type:2,doc:b}),T=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(d=!0)):!y&&b?(r.track({type:0,doc:b}),T=!0):y&&!b&&(r.track({type:1,doc:y}),T=!0,(u||h)&&(d=!0)),T&&(b?(l=l.add(b),a=N?a.add(p):a.delete(p)):(l=l.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((p,g)=>(function(b,S){const N=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return N(b)-N(S)})(p.type,g.type)||this.Aa(p.doc,g.doc))),this.pa(r),i=i!=null&&i;const d=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,l.length!==0||h?{snapshot:new ad(this.query,e.Ra,a,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((s=>this.Ta=this.Ta.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ta=this.Ta.delete(s))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=It(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const s=[];return e.forEach((r=>{this.da.has(r)||s.push(new KC(r))})),this.da.forEach((r=>{e.has(r)||s.push(new qC(r))})),s}ba(e){this.Ta=e.Ts,this.da=It();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return ad.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pF{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class mF{constructor(e){this.key=e,this.va=!1}}class fF{constructor(e,s,r,i,a,l){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new _d((d=>hC(d)),cg),this.Ma=new Map,this.xa=new Set,this.Oa=new bs(Je.comparator),this.Na=new Map,this.La=new g1,this.Ba={},this.ka=new Map,this.qa=id.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gF(t,e,s=!0){const r=e3(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await QC(r,e,s,!0),i}async function xF(t,e){const s=e3(t);await QC(s,e,!0,!1)}async function QC(t,e,s,r){const i=await $7(t.localStore,Ri(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,s);let d;return r&&(d=await vF(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&s&&BC(t.remoteStore,i),d}async function vF(t,e,s,r,i){t.Ka=(g,y,b)=>(async function(N,T,M,L){let k=T.view.ma(M);k.ns&&(k=await mj(N.localStore,T.query,!1).then((({documents:E})=>T.view.ma(E,k))));const v=L&&L.targetChanges.get(T.targetId),_=L&&L.targetMismatches.get(T.targetId)!=null,P=T.view.applyChanges(k,N.isPrimaryClient,v,_);return wj(N,T.targetId,P.wa),P.snapshot})(t,g,y,b);const a=await mj(t.localStore,e,!0),l=new hF(e,a.Ts),d=l.ma(a.documents),u=Ph.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",i),h=l.applyChanges(d,t.isPrimaryClient,u);wj(t,s,h.wa);const p=new pF(e,s,l);return t.Fa.set(e,p),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),h.snapshot}async function yF(t,e,s){const r=xt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((l=>!cg(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await t0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),s&&y1(r.remoteStore,i.targetId),n0(r,i.targetId)})).catch(Ah)):(n0(r,i.targetId),await t0(r.localStore,i.targetId,!0))}async function bF(t,e){const s=xt(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),y1(s.remoteStore,r.targetId))}async function _F(t,e,s){const r=CF(t);try{const i=await(function(l,d){const u=xt(l),h=ks.now(),p=d.reduce(((b,S)=>b.add(S.key)),It());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let S=Sa(),N=It();return u.cs.getEntries(b,p).next((T=>{S=T,S.forEach(((M,L)=>{L.isValidDocument()||(N=N.add(M))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,S))).next((T=>{g=T;const M=[];for(const L of d){const k=z9(L,g.get(L.key).overlayedDocument);k!=null&&M.push(new Eo(L.key,k,iC(k.value.mapValue),$r.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,M,d)})).next((T=>{y=T;const M=T.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(b,T.batchId,M)}))})).then((()=>({batchId:y.batchId,changes:fC(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,u){let h=l.Ba[l.currentUser.toKey()];h||(h=new bs(Ht)),h=h.insert(d,u),l.Ba[l.currentUser.toKey()]=h})(r,i.batchId,s),await Dh(r,i.changes),await gg(r.remoteStore)}catch(i){const a=S1(i,"Failed to persist write");s.reject(a)}}async function YC(t,e){const s=xt(t);try{const r=await M7(s.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=s.Na.get(a);l&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?Qt(l.va):i.removedDocuments.size>0&&(Qt(l.va),l.va=!1))})),await Dh(s,r,e)}catch(r){await Ah(r)}}function _j(t,e,s){const r=xt(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const u=xt(l);u.onlineState=d;let h=!1;u.queries.forEach(((p,g)=>{for(const y of g.j_)y.Z_(d)&&(h=!0)})),h&&N1(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wF(t,e,s){const r=xt(t);r.sharedClientState.updateQueryState(e,"rejected",s);const i=r.Na.get(e),a=i&&i.key;if(a){let l=new bs(Je.comparator);l=l.insert(a,En.newNoDocument(a,gt.min()));const d=It().add(a),u=new pg(gt.min(),new Map,new bs(Ht),l,d);await YC(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),k1(r)}else await t0(r.localStore,e,!1).then((()=>n0(r,e,s))).catch(Ah)}async function jF(t,e){const s=xt(t),r=e.batch.batchId;try{const i=await D7(s.localStore,e);JC(s,r,null),XC(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await Dh(s,i)}catch(i){await Ah(i)}}async function SF(t,e,s){const r=xt(t);try{const i=await(function(l,d){const u=xt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return u.mutationQueue.lookupMutationBatch(h,d).next((g=>(Qt(g!==null),p=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,d))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>u.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);JC(r,e,s),XC(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await Dh(r,i)}catch(i){await Ah(i)}}function XC(t,e){(t.ka.get(e)||[]).forEach((s=>{s.resolve()})),t.ka.delete(e)}function JC(t,e,s){const r=xt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function n0(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),s&&t.Ca.$a(r,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||ZC(t,r)}))}function ZC(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(y1(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),k1(t))}function wj(t,e,s){for(const r of s)r instanceof qC?(t.La.addReference(r.key,e),NF(t,r)):r instanceof KC?(qe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ZC(t,r.key)):ht()}function NF(t,e){const s=e.key,r=s.path.canonicalString();t.Oa.get(s)||t.xa.has(r)||(qe("SyncEngine","New document in limbo: "+s),t.xa.add(r),k1(t))}function k1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new Je(Jt.fromString(e)),r=t.qa.next();t.Na.set(r,new mF(s)),t.Oa=t.Oa.insert(s,r),BC(t.remoteStore,new po(Ri(c1(s.path)),r,"TargetPurposeLimboResolution",r1.oe))}}async function Dh(t,e,s){const r=xt(t),i=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,u)=>{l.push(r.Ka(u,e,s).then((h=>{var p;if((h||s)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=s==null?void 0:s.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=v1.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(l),r.Ca.d_(i),await(async function(u,h){const p=xt(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ke.forEach(h,(y=>ke.forEach(y.$i,(b=>p.persistence.referenceDelegate.addReference(g,y.targetId,b))).next((()=>ke.forEach(y.Ui,(b=>p.persistence.referenceDelegate.removeReference(g,y.targetId,b)))))))))}catch(g){if(!Ih(g))throw g;qe("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const b=p.os.get(y),S=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(S);p.os=p.os.insert(y,N)}}})(r.localStore,a))}async function kF(t,e){const s=xt(t);if(!s.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=await LC(s.localStore,e);s.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((u=>{u.reject(new Be(xe.CANCELLED,l))}))})),a.ka.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dh(s,r.hs)}}function TF(t,e){const s=xt(t),r=s.Na.get(e);if(r&&r.va)return It().add(r.key);{let i=It();const a=s.Ma.get(e);if(!a)return i;for(const l of a){const d=s.Fa.get(l);i=i.unionWith(d.view.Va)}return i}}function e3(t){const e=xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wF.bind(null,e),e.Ca.d_=dF.bind(null,e.eventManager),e.Ca.$a=uF.bind(null,e.eventManager),e}function CF(t){const e=xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SF.bind(null,e),e}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return L7(this.persistence,new R7,e.initialUser,this.serializer)}Ga(e){return new E7(x1.Zr,this.serializer)}Wa(e){return new V7}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class r0{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_j(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kF.bind(null,this.syncEngine),await oF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cF})()}createDatastore(e){const s=mg(e.databaseInfo.databaseId),r=(function(a){return new G7(a)})(e.databaseInfo);return(function(a,l,d,u){return new K7(a,l,d,u)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,i,a,l,d){return new Y7(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(s=>_j(this.syncEngine,s,0)),(function(){return gj.D()?new gj:new U7})())}createSyncEngine(e,s){return(function(i,a,l,d,u,h,p){const g=new fF(i,a,l,d,u,h);return p&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await(async function(i){const a=xt(i);qe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Lh(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}r0.provider={build:()=>new r0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,s,r,i,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=Tn.UNAUTHENTICATED,this.clientId=sC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{qe("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(qe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=S1(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ev(t,e){t.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await LC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function jj(t,e){t.asyncQueue.verifyOperationInProgress();const s=await AF(t);qe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener((r=>xj(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>xj(e.remoteStore,i))),t._onlineComponents=e}async function AF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ev(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(i){return i.name==="FirebaseError"?i.code===xe.FAILED_PRECONDITION||i.code===xe.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(s))throw s;ed("Error using user provided cache. Falling back to memory cache: "+s),await Ev(t,new Cf)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),await Ev(t,new Cf);return t._offlineComponents}async function s3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),await jj(t,t._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),await jj(t,new r0))),t._onlineComponents}function IF(t){return s3(t).then((e=>e.syncEngine))}async function n3(t){const e=await s3(t),s=e.eventManager;return s.onListen=gF.bind(null,e.syncEngine),s.onUnlisten=yF.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=xF.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=bF.bind(null,e.syncEngine),s}function RF(t,e,s={}){const r=new xa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const p=new t3({next:y=>{p.Za(),l.enqueueAndForget((()=>GC(a,g)));const b=y.docs.has(d);!b&&y.fromCache?h.reject(new Be(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&u&&u.source==="server"?h.reject(new Be(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new WC(c1(d.path),p,{includeMetadataChanges:!0,_a:!0});return HC(a,g)})(await n3(t),t.asyncQueue,e,s,r))),r.promise}function PF(t,e,s={}){const r=new xa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const p=new t3({next:y=>{p.Za(),l.enqueueAndForget((()=>GC(a,g))),y.fromCache&&u.source==="server"?h.reject(new Be(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new WC(d,p,{includeMetadataChanges:!0,_a:!0});return HC(a,g)})(await n3(t),t.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e,s){if(!s)throw new Be(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LF(t,e,s,r){if(e===!0&&r===!0)throw new Be(xe.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Nj(t){if(!Je.isDocumentKey(t))throw new Be(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kj(t){if(Je.isDocumentKey(t))throw new Be(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht()}function Na(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=xg(t);throw new Be(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function DF(t,e){if(e<=0)throw new Be(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Be(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Be(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Be(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tj(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new XM;switch(r.type){case"firstParty":return new t9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Sj.get(s);r&&(qe("ComponentProvider","Removing Datastore"),Sj.delete(s),r.terminate())})(this),Promise.resolve()}}function MF(t,e,s,r={}){var i;const a=(t=Na(t,Mh))._getSettings(),l=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&ed("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,u;if(typeof r.mockUserToken=="string")d=r.mockUserToken,u=Tn.MOCK_USER;else{d=SL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Be(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tn(h)}t._authCredentials=new JM(new tC(d,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class rr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class _o extends mi{constructor(e,s,r){super(e,s,c1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Je(e))}withConverter(e){return new _o(this.firestore,e,this._path)}}function jd(t,e,...s){if(t=Ws(t),T1("collection","path",e),t instanceof Mh){const r=Jt.fromString(e,...s);return kj(r),new _o(t,null,r)}{if(!(t instanceof rr||t instanceof _o))throw new Be(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Jt.fromString(e,...s));return kj(r),new _o(t.firestore,null,r)}}function vg(t,e){if(t=Na(t,Mh),T1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(t,null,(function(r){return new Ea(Jt.emptyPath(),r)})(e))}function Gt(t,e,...s){if(t=Ws(t),arguments.length===1&&(e=sC.newId()),T1("doc","path",e),t instanceof Mh){const r=Jt.fromString(e,...s);return Nj(r),new rr(t,null,new Je(r))}{if(!(t instanceof rr||t instanceof _o))throw new Be(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Jt.fromString(e,...s));return Nj(r),new rr(t.firestore,t instanceof _o?t.converter:null,new Je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MC(this,"async_queue_retry"),this.Vu=()=>{const r=Cv();r&&qe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const s=Cv();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=Cv();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const s=new xa;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ih(e))throw e;qe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const s=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw ja("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=s,s}enqueueAfterDelay(e,s,r){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const i=j1.createAndSchedule(this,e,s,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&ht()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}class Fh extends Mh{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new Cj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cj(e),this._firestoreClient=void 0,await e}}}function FF(t,e){const s=typeof t=="object"?t:K0(),r=typeof t=="string"?t:"(default)",i=q0(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=wL("firestore");a&&MF(i,...a)}return i}function yg(t){if(t._terminated)throw new Be(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BF(t),t._firestoreClient}function BF(t){var e,s,r;const i=t._freezeSettings(),a=(function(d,u,h,p){return new m9(d,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,r3(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new EF(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._byteString=e}static fromBase64String(e){try{return new od(xn.fromBase64String(e))}catch(s){throw new Be(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new od(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Be(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Be(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Be(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=/^__.*__$/;class OF{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,s,this.fieldTransforms):new Rh(e,this.data,s,this.fieldTransforms)}}class i3{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Eo(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function a3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class A1{constructor(e,s,r,i,a,l){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new A1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ef(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(a3(this.Cu)&&$F.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class VF{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||mg(e)}Qu(e,s,r,i=!1){return new A1({Cu:e,methodName:s,qu:r,path:hn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(t){const e=t._freezeSettings(),s=mg(t._databaseId);return new VF(t._databaseId,!!e.ignoreUndefinedProperties,s)}function o3(t,e,s,r,i,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,s,i);R1("Data must be an object, but it was:",l,r);const d=c3(r,l);let u,h;if(a.merge)u=new yr(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const y=i0(e,g,s);if(!l.contains(y))throw new Be(xe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);u3(p,y)||p.push(y)}u=new yr(p),h=l.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=l.fieldTransforms;return new OF(new nr(d),u,h)}class jg extends _g{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}class I1 extends _g{_toFieldTransform(e){return new $9(e.path,new hh)}isEqual(e){return e instanceof I1}}function UF(t,e,s,r){const i=t.Qu(1,e,s);R1("Data must be an object, but it was:",i,r);const a=[],l=nr.empty();Fl(r,((u,h)=>{const p=P1(e,u,s);h=Ws(h);const g=i.Nu(p);if(h instanceof jg)a.push(p);else{const y=Bh(h,g);y!=null&&(a.push(p),l.set(p,y))}}));const d=new yr(a);return new i3(l,d,i.fieldTransforms)}function zF(t,e,s,r,i,a){const l=t.Qu(1,e,s),d=[i0(e,r,s)],u=[i];if(a.length%2!=0)throw new Be(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)d.push(i0(e,a[y])),u.push(a[y+1]);const h=[],p=nr.empty();for(let y=d.length-1;y>=0;--y)if(!u3(h,d[y])){const b=d[y];let S=u[y];S=Ws(S);const N=l.Nu(b);if(S instanceof jg)h.push(b);else{const T=Bh(S,N);T!=null&&(h.push(b),p.set(b,T))}}const g=new yr(h);return new i3(p,g,l.fieldTransforms)}function l3(t,e,s,r=!1){return Bh(s,t.Qu(r?4:3,e))}function Bh(t,e){if(d3(t=Ws(t)))return R1("Unsupported field value:",e,t),c3(t,e);if(t instanceof _g)return(function(r,i){if(!a3(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let u=Bh(d,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Ws(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ks.fromDate(r);return{timestampValue:kf(i.serializer,a)}}if(r instanceof ks){const a=new ks(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kf(i.serializer,a)}}if(r instanceof C1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof od)return{bytesValue:TC(i.serializer,r._byteString)};if(r instanceof rr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:f1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof E1)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw d.Bu("VectorValues must only contain numeric values.");return u1(d.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${xg(r)}`)})(t,e)}function c3(t,e){const s={};return nC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fl(t,((r,i)=>{const a=Bh(i,e.Mu(r));a!=null&&(s[r]=a)})),{mapValue:{fields:s}}}function d3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ks||t instanceof C1||t instanceof od||t instanceof rr||t instanceof _g||t instanceof E1)}function R1(t,e,s){if(!d3(s)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(s)){const r=xg(s);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function i0(t,e,s){if((e=Ws(e))instanceof bg)return e._internalPath;if(typeof e=="string")return P1(t,e);throw Ef("Field path arguments must be of type string or ",t,!1,void 0,s)}const HF=new RegExp("[~\\*/\\[\\]]");function P1(t,e,s){if(e.search(HF)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new bg(...e.split("."))._internalPath}catch(r){throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Ef(t,e,s,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new Be(xe.INVALID_ARGUMENT,d+t+u)}function u3(t,e){return t.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,s,r,i,a){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Sg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class GF extends L1{data(){return super.data()}}function Sg(t,e){return typeof e=="string"?P1(t,e):e instanceof bg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D1{}class $h extends D1{}function Vn(t,e,...s){let r=[];e instanceof D1&&r.push(e),r=r.concat(s),(function(a){const l=a.filter((u=>u instanceof M1)).length,d=a.filter((u=>u instanceof Ng)).length;if(l>1||l>0&&d>0)throw new Be(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Ng extends $h{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Ng(e,s,r)}_apply(e){const s=this._parse(e);return p3(e._query,s),new mi(e.firestore,e.converter,Yy(e._query,s))}_parse(e){const s=wg(e.firestore);return(function(a,l,d,u,h,p,g){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Be(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Aj(g,p);const b=[];for(const S of g)b.push(Ej(u,a,S));y={arrayValue:{values:b}}}else y=Ej(u,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Aj(g,p),y=l3(d,l,g,p==="in"||p==="not-in");return $s.create(h,p,y)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function jl(t,e,s){const r=e,i=Sg("where",t);return Ng._create(i,r,s)}class M1 extends D1{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new M1(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:hi.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const u of d)p3(l,u),l=Yy(l,u)})(e._query,s),new mi(e.firestore,e.converter,Yy(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class F1 extends $h{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new F1(e,s)}_apply(e){const s=(function(i,a,l){if(i.startAt!==null)throw new Be(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Be(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uh(a,l)})(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ea(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,s))}}function mo(t,e="asc"){const s=e,r=Sg("orderBy",t);return F1._create(r,s)}class B1 extends $h{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new B1(e,s,r)}_apply(e){return new mi(e.firestore,e.converter,Sf(e._query,this._limit,this._limitType))}}function Un(t){return DF("limit",t),B1._create("limit",t,"F")}class $1 extends $h{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new $1(e,s,r)}_apply(e){const s=h3(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(function(i,a){return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,s))}}function vl(...t){return $1._create("startAt",t,!0)}class O1 extends $h{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new O1(e,s,r)}_apply(e){const s=h3(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(function(i,a){return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,s))}}function yl(...t){return O1._create("endAt",t,!0)}function h3(t,e,s,r){if(s[0]=Ws(s[0]),s[0]instanceof L1)return(function(a,l,d,u,h){if(!u)throw new Be(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const p=[];for(const g of Kc(a))if(g.field.isKeyField())p.push(jf(l,u.key));else{const y=u.data.field(g.field);if(lg(y))throw new Be(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const b=g.field.canonicalString();throw new Be(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}p.push(y)}return new rd(p,h)})(t._query,t.firestore._databaseId,e,s[0]._document,r);{const i=wg(t.firestore);return(function(l,d,u,h,p,g){const y=l.explicitOrderBy;if(p.length>y.length)throw new Be(xe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let S=0;S<p.length;S++){const N=p[S];if(y[S].field.isKeyField()){if(typeof N!="string")throw new Be(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof N}`);if(!d1(l)&&N.indexOf("/")!==-1)throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${N}' contains a slash.`);const T=l.path.child(Jt.fromString(N));if(!Je.isDocumentKey(T))throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const M=new Je(T);b.push(jf(d,M))}else{const T=l3(u,h,N);b.push(T)}}return new rd(b,g)})(t._query,t.firestore._databaseId,i,e,s,r)}}function Ej(t,e,s){if(typeof(s=Ws(s))=="string"){if(s==="")throw new Be(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d1(e)&&s.indexOf("/")!==-1)throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(Jt.fromString(s));if(!Je.isDocumentKey(r))throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jf(t,new Je(r))}if(s instanceof rr)return jf(t,s._key);throw new Be(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xg(s)}.`)}function Aj(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p3(t,e){const s=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Be(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class qF{convertValue(e,s="none"){switch(Il(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw ht()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Fl(e,((i,a)=>{r[i]=this.convertValue(a,s)})),r}convertVectorValue(e){var s,r,i;const a=(i=(r=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((l=>Rs(l.doubleValue)));return new E1(a)}convertGeoPoint(e){return new C1(Rs(e.latitude),Rs(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=i1(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const s=jo(e);return new ks(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Jt.fromString(e);Qt(PC(r));const i=new ch(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(s)||ja(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class f3 extends L1{constructor(e,s,r,i,a,l){super(e,s,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class Jm extends f3{data(e={}){return super.data(e)}}class KF{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new Jm(this._firestore,this._userDataWriter,r.key,r,new Au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Be(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const u=new Jm(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Au(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const u=new Jm(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Au(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),p=l.indexOf(d.doc.key)),{type:QF(d.type),doc:u,oldIndex:h,newIndex:p}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function QF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){t=Na(t,rr);const e=Na(t.firestore,Fh);return RF(yg(e),t._key).then((s=>YF(e,t,s)))}class g3 extends qF{constructor(e){super(),this.firestore=e}convertBytes(e){return new od(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,s)}}function pn(t){t=Na(t,mi);const e=Na(t.firestore,Fh),s=yg(e),r=new g3(e);return WF(t._query),PF(s,t._query).then((i=>new KF(e,r,t,i)))}function No(t,e,s){t=Na(t,rr);const r=Na(t.firestore,Fh),i=m3(t.converter,e,s);return x3(r,[o3(wg(r),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,$r.none())])}function x3(t,e){return(function(r,i){const a=new xa;return r.asyncQueue.enqueueAndForget((async()=>_F(await IF(r),i,a))),a.promise})(yg(t),e)}function YF(t,e,s){const r=s.docs.get(e._key),i=new g3(t);return new f3(t,i,e._key,r,new Au(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,s,r){this._verifyNotCommitted();const i=Av(e,this._firestore),a=m3(i.converter,s,r),l=o3(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,$r.none())),this}update(e,s,r,...i){this._verifyNotCommitted();const a=Av(e,this._firestore);let l;return l=typeof(s=Ws(s))=="string"||s instanceof bg?zF(this._dataReader,"WriteBatch.update",a._key,s,r,i):UF(this._dataReader,"WriteBatch.update",a._key,s),this._mutations.push(l.toMutation(a._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=Av(e,this._firestore);return this._mutations=this._mutations.concat(new h1(s._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Av(t,e){if((t=Ws(t)).firestore!==e)throw new Be(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function oi(){return new I1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t){return yg(t=Na(t,Fh)),new XF(t,(e=>x3(t,e)))}(function(e,s=!0){(function(i){bd=i})(vd),Zc(new kl("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Fh(new ZM(r.getProvider("auth-internal")),new n9(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Be(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ch(h.options.projectId,p)})(l,i),l);return a=Object.assign({useFetchStreams:s},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),yo(q2,"4.7.3",e),yo(q2,"4.7.3","esm2017")})();const v3={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};v3.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const y3=$D().length?K0():pT(v3),dt=FF(y3),xm=QM(y3),b3=I.createContext(void 0),Ij=`${Co}/auth/session`,Rj=`${Co}/auth/logout`,ZF=({children:t})=>{const[e,s]=I.useState(null),[r,i]=I.useState("idle"),a=I.useRef({tried:!1}),l=I.useCallback(N=>{N!=null&&N.authenticated&&N.user?(s(N.user),i("authenticated")):(s(null),i("unauthenticated"))},[]),d=I.useCallback(async()=>{if(i("loading"),!Ij){console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),s(null),i("unauthenticated");return}try{const N=await fetch(Ij,{credentials:"include"});if(!N.ok)throw new Error(`Failed to fetch session (${N.status})`);const T=await N.json();l(T)}catch(N){console.error("[Auth] Failed to refresh session.",N),s(null),i("unauthenticated")}},[l]);I.useEffect(()=>{d()},[d]),I.useEffect(()=>{console.log("[AuthDebug] session user:",e);const N=xm.currentUser;console.log("[AuthDebug] firebase currentUser uid:",N==null?void 0:N.uid),N==null||N.getIdTokenResult().then(T=>{console.log("[AuthDebug] firebase claims:",T.claims)}).catch(T=>{console.warn("[AuthDebug] failed to fetch token claims",T)})},[e]),I.useEffect(()=>{const N=F8(xm,T=>{console.log("[AuthDebug] firebase currentUser uid:",T==null?void 0:T.uid)});return()=>N()},[]),I.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const N=await mL();await L8(xm,N),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(N){console.error("[AuthDebug] failed to sign in to Firebase",N)}})())},[e]);const u=I.useCallback(N=>{window.location.href=`${Co}/auth/${N}/login`},[]),h=I.useCallback(()=>u("discord"),[u]),p=I.useCallback(()=>u("google"),[u]),g=I.useCallback(async()=>{if(await B8(xm).catch(()=>{}),!Rj){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),s(null),i("unauthenticated");return}try{const N=await fetch(Rj,{method:"POST",credentials:"include"});if(!N.ok)throw new Error(`Logout failed (${N.status})`)}catch(N){console.error("[Auth] Failed to logout. Clearing local session anyway.",N)}finally{s(null),i("unauthenticated")}},[]),y=I.useCallback(async()=>{await d()},[d]),b=r==="idle"||r==="loading",S=I.useMemo(()=>({user:e,status:r,isLoading:b,loginWithDiscord:h,loginWithGoogle:p,logout:g,refreshSession:y}),[e,r,b,h,p,g,y]);return n.jsx(b3.Provider,{value:S,children:t})},$l=()=>{const t=I.useContext(b3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},eB="https://i.pravatar.cc/72",tB=({fallbackName:t})=>{var L,k;const{user:e,status:s,logout:r,isLoading:i}=$l(),a=Vr(),[l,d]=I.useState(!1),u=I.useRef(null),h=s==="authenticated",p=h?(k=(L=e==null?void 0:e.displayName)!=null?L:t)!=null?k:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:eB;I.useEffect(()=>{const v=_=>{u.current&&!u.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]),I.useEffect(()=>{i&&d(!1)},[i]);const y=I.useCallback(()=>d(!1),[]),b=()=>{d(v=>!v)},S=()=>{a("/login"),y()},N=()=>{a("/settings/account"),y()},T=I.useCallback(async()=>{try{await r()}finally{y(),a("/")}},[y,r,a]),M=()=>{var v;if(i)return n.jsx("p",{className:St.accountStatusText,children:"Checking session..."});if(s==="unauthenticated")return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:St.accountHeader,children:[n.jsx("p",{className:St.accountName,children:"Not signed in"}),n.jsx("p",{className:St.accountSub,children:"Your scans stay synced when you log in."})]}),n.jsx("button",{type:"button",className:St.accountPrimary,onClick:S,children:"Sign in"}),n.jsx("p",{className:St.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(s==="authenticated"){const _=!!((v=e==null?void 0:e.roles)!=null&&v.includes("admin"));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:St.accountHeader,children:[n.jsx("img",{className:St.accountMiniAvatar,src:g,alt:p}),n.jsxs("div",{children:[n.jsx("p",{className:St.accountName,children:p}),n.jsxs("p",{className:St.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),n.jsx("button",{type:"button",className:St.accountItem,onClick:N,children:"Account & Profile"}),_?n.jsx("a",{className:St.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,n.jsx("hr",{className:St.accountDivider}),n.jsx("button",{type:"button",className:`${St.accountItem} ${St.accountLogout}`,onClick:T,children:"Logout"})]})}return null};return n.jsxs("div",{className:St.accountRoot,ref:u,children:[i?n.jsxs("div",{className:St.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[n.jsx("span",{className:St.avatarSpinner,"aria-hidden":"true"}),n.jsx("span",{className:St.srOnly,children:"Checking login status"})]}):n.jsx("button",{type:"button",className:St.avatarBtn,"aria-haspopup":"menu","aria-expanded":l,"aria-label":p,onClick:b,children:n.jsx("img",{className:St.avatar,src:g,alt:p})}),!i&&l&&n.jsx("div",{className:St.accountDropdown,role:"menu",children:M()})]})},sB=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub",area:"main",titleKey:"nav.guideHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],Pj=["guest","user","moderator","developer","admin"];function _3(t){const e=t.trim();if(!e)return"/";const s=e.startsWith("/")?e:`/${e}`;return s==="/"?s:s.replace(/\/+$/,"").toLowerCase()}function w3(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function j3(t){if(!Array.isArray(t))return;const e=t.map(s=>w3(s)).filter(Boolean);return e.length?e:void 0}function S3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function N3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function V1(t){var e,s,r;return{...t,id:t.id.trim(),route:_3(t.route),area:t.area.trim(),allowedRoles:(e=j3(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(s=S3(t.allowedGroups))!=null?s:t.allowedGroups,allowedUserIds:(r=N3(t.allowedUserIds))!=null?r:t.allowedUserIds}}function nB(t,e){if(!e||typeof e!="object")return null;const s=e,r=typeof s.route=="string"?s.route:"",i=typeof s.area=="string"?s.area:"",a=typeof s.id=="string"&&s.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const l={id:a,route:r,area:i,titleKey:typeof s.titleKey=="string"?s.titleKey:void 0,status:typeof s.status=="string"?s.status:void 0,minRole:w3(s.minRole),allowedRoles:j3(s.allowedRoles),allowedGroups:S3(s.allowedGroups),allowedUserIds:N3(s.allowedUserIds),showInTopbar:typeof s.showInTopbar=="boolean"?s.showInTopbar:void 0,showInSidebar:typeof s.showInSidebar=="boolean"?s.showInSidebar:void 0,navOrder:typeof s.navOrder=="number"?s.navOrder:void 0,isExperimental:typeof s.isExperimental=="boolean"?s.isExperimental:void 0,description:typeof s.description=="string"?s.description:void 0};return V1(l)}function rB(t){const e={},s={};return t.forEach(r=>{const i=V1(r);e[i.id]=i,s[i.route]=i}),{byId:e,byRoute:s}}const va=rB(sB),iB={...va,loading:!1,error:null};function aB(t,e){const s={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const l=i;s[l]=a}}),s}function oB(t){const e={...va.byId},s={...va.byRoute};return t.forEach(r=>{const i=V1(r),a=e[i.id],l=aB(a,i);e[l.id]=l,s[l.route]=l}),{byId:e,byRoute:s}}const k3=ee.createContext(iB),lB=({children:t})=>{const[e,s]=ee.useState({...va,loading:!0,error:null});ee.useEffect(()=>{let i=!0;return(async()=>{try{const l=await pn(jd(dt,"feature_access")),d=[];l.forEach(h=>{const p=nB(h.id,h.data());p&&d.push(p)});const u=oB(d);i&&s({...u,loading:!1,error:null})}catch(l){const d=l,u=d==null?void 0:d.code,h=u==="permission-denied"||u==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore feature_access ${h?"not readable":"load failed"}. Falling back to defaults.`,l),i&&s(g=>({...g,loading:!1,error:l instanceof Error?l.message:"Failed to load feature access rules"}))}})(),()=>{i=!1}},[]);const r=ee.useMemo(()=>e,[e]);return n.jsx(k3.Provider,{value:r,children:t})};function cB(){return ee.useContext(k3)}function dB(t,e){var i,a,l;if(!t)return;const s=e!=null?e:va,r=_3(t);return(l=(a=(i=s.byId[t])!=null?i:s.byRoute[r])!=null?a:va.byId[t])!=null?l:va.byRoute[r]}function uB(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function hB(t,e,s,r,i){if(s)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const l=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&l!=="developer"&&l!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!l&&t.allowedRoles.includes(l);if(t.minRole){const d=Pj.indexOf(l),u=Pj.indexOf(t.minRole);return d>=u&&d!==-1}return!0}function kg(){var N;let t=null;try{t=$l().user}catch(T){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:s,loading:r,error:i}=cB(),a=ee.useMemo(()=>({byId:e!=null?e:va.byId,byRoute:s!=null?s:va.byRoute}),[e,s]),l=ee.useMemo(()=>uB(t==null?void 0:t.roles),[t==null?void 0:t.roles]),d=ee.useMemo(()=>{var T;return!!((T=t==null?void 0:t.roles)!=null&&T.includes("admin"))},[t==null?void 0:t.roles]),u=ee.useMemo(()=>{var T;return(T=t==null?void 0:t.accessGroups)!=null?T:[]},[t==null?void 0:t.accessGroups]),h=(N=t==null?void 0:t.id)!=null?N:null,p=ee.useCallback(T=>dB(T,a),[a]),g=ee.useCallback(T=>T?hB(T,l,d,h,u):!0,[d,u,h,l]),y=ee.useCallback(T=>{if(!T)return!0;const M=p(T);return g(M)},[g,p]),b=ee.useCallback(T=>{if(!T)return!0;const M=p(T);return M?M.status==="hidden"||M.showInSidebar===!1?!1:g(M):!0},[g,p]),S=ee.useCallback(T=>{if(!T)return!0;const M=p(T);return M?M.status==="hidden"||M.showInTopbar===!1?!1:g(M):!0},[g,p]);return{loading:r,error:i,rulesById:e,rulesByRoute:s,storeRules:a,resolveRule:p,canAccessRule:g,canAccessFeature:y,isVisibleInSidebar:b,isVisibleInTopbar:S}}const T3=I.createContext(null);function pB({children:t}){const{canAccessFeature:e}=kg(),[s,r]=I.useState(!1),[i,a]=I.useState("csv"),l=e("main.uploadCenter"),d=I.useCallback(p=>{l&&(p!=null&&p.tab?a(p.tab):a("csv"),r(!0))},[l]),u=I.useCallback(()=>r(!1),[]),h=I.useMemo(()=>({isOpen:s,open:d,close:u,activeTab:i,setTab:a,canUse:l}),[s,d,u,i,l]);return n.jsx(T3.Provider,{value:h,children:t})}function U1(){const t=I.useContext(T3);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const ii={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},ai=t=>`https://drive.google.com/uc?export=view&id=${t}`,C3=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),qs=[{key:"warrior",label:"Warrior",iconUrl:ai(ii.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:ai(ii.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:ai(ii.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:ai(ii.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:ai(ii["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:ai(ii.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:ai(ii["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:ai(ii.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:ai(ii.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:ai(ii.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:ai(ii.paladin),fallback:""}],a0=Object.fromEntries(qs.map(t=>[t.key,t])),o0=new Map;function _s(t,e){o0.set(C3(t),e)}for(const t of qs)_s(t.key,t.key),_s(t.label,t.key);_s("war","warrior");_s("krieger","warrior");_s("magier","mage");_s("jaeger","scout");_s("jger","scout");_s("assa","assassin");_s("meuchelmoerder","assassin");_s("meuchelmrder","assassin");_s("demonhunter","demon-hunter");_s("dh","demon-hunter");_s("daemonenjaeger","demon-hunter");_s("dmonenjger","demon-hunter");_s("zerker","berserker");_s("battlemage","battle-mage");_s("kampfmagier","battle-mage");_s("bm","battle-mage");_s("druide","druid");_s("barde","bard");_s("necro","necromancer");_s("nekromant","necromancer");_s("pala","paladin");function mB(t){const e=C3(t);if(!e)return{};const s=o0.get(e);if(s){const r=a0[s];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of o0.entries())if(r.startsWith(e)||e.startsWith(r)){const a=a0[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}const fB=Object.freeze(Object.defineProperty({__proto__:null,CLASSES:qs,CLASS_BY_KEY:a0,iconForClassName:mB},Symbol.toStringTag,{value:"Module"}));function Tg(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const s=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(s!=null&&s[1])return s[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function Zm(t){if(t==null)return;const e=Tg(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function E3(t,e=64){if(t==null)return;const s=Tg(t);if(!s)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${s}&sz=w${r}`}function A3(t,e){const s="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${s}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function I3(t,e,s,r){const i=Zm(t);return i?A3(i,{w:e,h:s,fit:r}):void 0}function Ur(t,e=64){const s=E3(t,e);return s?A3(s,{w:e,h:e,fit:"contain"}):void 0}function Iv(t){if(t==null)return;const e=Tg(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function gB(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const Rl=Object.assign(t=>Zm(t),{id:Tg,direct:Zm,thumb:E3,proxy:I3,thumbProxy:Ur,raw:Iv,gif:Iv,gifProxy:t=>{const e=Iv(t);return e&&/^https?:\/\//i.test(e)?gB(e):Zm(t)}}),Rv=t=>Number.isFinite(t),Cc=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},xB=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function vB(t,e=64){if(!t)return;const s=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,""),r=s(t);let i=qs.find(a=>s(a.label)===r);if(i||(i=qs.find(a=>s(a.label).startsWith(r)||r.startsWith(s(a.label)))),!!i)return Ur(i.iconUrl,e)}function yB(t){const e=t.ref.parent,s=e==null?void 0:e.parent,r=s==null?void 0:s.parent;return{root:r==null?void 0:r.id,id:s==null?void 0:s.id}}function bB({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:s}){const r=Vr(),[i,a]=ee.useState(""),[l,d]=ee.useState(""),[u,h]=ee.useState(!1),[p,g]=ee.useState(null),[y,b]=ee.useState([]),[S,N]=ee.useState([]),[T,M]=ee.useState([]),[L,k]=ee.useState(-1),v=ee.useRef(null);ee.useEffect(()=>{const w=setTimeout(()=>d(i.trim()),200);return()=>clearTimeout(w)},[i]),ee.useEffect(()=>{async function w(){g(null);const A=l;if(A.length<1){b([]),N([]),M([]),k(-1);return}h(!0);try{let B=function(ge){var Ce,ye,Ze,it,Rt,rs,cs,Os,ws,Ee,Pe,Ie,Ue,nt,pt,vt,Ut,$t,ar,bn,Vs,jr,fi,Oi,gi,zr,is,Sr,Vi,Ui,In,or,zi,lr;const he=ge.data(),{root:ve,id:_e}=yB(ge),ce=_e||he.playerId||he.guildIdentifier||"";if(ve==="players"||he.playerId&&!he.guildIdentifier){if(!ce||H.has(ce))return;H.add(ce),q.push({kind:"player",id:ce,name:(Ze=(ye=he.name)!=null?ye:(Ce=he.values)==null?void 0:Ce.Name)!=null?Ze:null,nameFold:(it=he.nameFold)!=null?it:null,server:(cs=(rs=he.server)!=null?rs:(Rt=he.values)==null?void 0:Rt.Server)!=null?cs:null,guildName:(Ee=(ws=he.guildName)!=null?ws:(Os=he.values)==null?void 0:Os.Guild)!=null?Ee:null,className:(Ue=(Ie=he.className)!=null?Ie:(Pe=he.values)==null?void 0:Pe.Class)!=null?Ue:null,level:Cc((pt=he.level)!=null?pt:(nt=he.values)==null?void 0:nt.Level),ts:Cc(he.timestamp)});return}if(ve==="guilds"||he.guildIdentifier&&!he.playerId){if(!ce||K.has(ce))return;K.add(ce),G.push({kind:"guild",id:ce,name:($t=(Ut=he.name)!=null?Ut:(vt=he.values)==null?void 0:vt.Name)!=null?$t:null,nameFold:(ar=he.nameFold)!=null?ar:null,server:(jr=(Vs=he.server)!=null?Vs:(bn=he.values)==null?void 0:bn.Server)!=null?jr:null,memberCount:Cc((zr=(Oi=he.memberCount)!=null?Oi:(fi=he.values)==null?void 0:fi["Guild Member Count"])!=null?zr:(gi=he.values)==null?void 0:gi.GuildMemberCount),hofRank:Cc((lr=(or=(Ui=(Sr=he.hofRank)!=null?Sr:(is=he.values)==null?void 0:is["Hall of Fame Rank"])!=null?Ui:(Vi=he.values)==null?void 0:Vi.HoF)!=null?or:(In=he.values)==null?void 0:In.Rank)!=null?lr:(zi=he.values)==null?void 0:zi["Guild Rank"]),ts:Cc(he.timestamp)});return}};const D=xB(A),$=vg(dt,"latest"),F=await pn(Vn($,mo("nameFold"),vl(D),yl(D+""),Un(e*6))),z=await pn(Vn($,jl("nameNgrams","array-contains",D),Un(e*6))),H=new Set,K=new Set,q=[],G=[];F.forEach(B),z.forEach(B);const re=jd(dt,"servers"),se=A.toLowerCase(),U=A.toUpperCase(),Y=[pn(Vn(re,mo("displayName"),vl(A),yl(A+""),Un(e*4))),pn(Vn(re,mo("code"),vl(U),yl(U+""),Un(e*4))),pn(Vn(re,mo("host"),vl(se),yl(se+""),Un(e*4)))],ie=await Promise.allSettled(Y),X=new Set,pe=[];for(const ge of ie)ge.status==="fulfilled"&&ge.value.forEach(he=>{var ce,Ce,ye,Ze,it;const ve=he.data(),_e=he.id;!_e||X.has(_e)||(X.add(_e),pe.push({kind:"server",id:_e,displayName:(ce=ve.displayName)!=null?ce:null,code:(Ce=ve.code)!=null?Ce:null,host:(ye=ve.host)!=null?ye:null,region:(Ze=ve.region)!=null?Ze:null,type:(it=ve.type)!=null?it:null,numericId:Cc(ve.numericId),active:typeof ve.active=="boolean"?ve.active:null}))});b(q.slice(0,e)),N(G.slice(0,e)),M(pe.slice(0,e)),k(q.length+G.length+pe.length?0:-1)}catch(B){g((B==null?void 0:B.message)||"Unbekannter Fehler bei der Suche."),b([]),N([]),M([]),k(-1)}finally{h(!1)}}return w(),()=>{}},[l,e]),ee.useEffect(()=>{const w=A=>{v.current&&(v.current.contains(A.target)||(b([]),N([]),M([]),k(-1)))};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const _=[...y,...S,...T],P=w=>{w.kind==="player"?r(`/player/${encodeURIComponent(w.id)}`):w.kind==="guild"?r(`/guild/${encodeURIComponent(w.id)}`):r(`/server/${encodeURIComponent(w.id)}`),b([]),N([]),M([]),k(-1),a("")},E=w=>{if(_.length)if(w.key==="ArrowDown")w.preventDefault(),k(A=>(A+1)%_.length);else if(w.key==="ArrowUp")w.preventDefault(),k(A=>(A-1+_.length)%_.length);else if(w.key==="Enter"){w.preventDefault();const A=_[L>=0?L:0];A&&P(A)}else w.key==="Escape"&&(b([]),N([]),M([]),k(-1))};return n.jsxs("div",{ref:v,style:yt.wrap,children:[n.jsx("input",{style:yt.input,placeholder:t,value:i,onChange:w=>a(w.target.value),onKeyDown:E,"aria-label":"Spieler, Gilden und Server suchen"}),(u||p||y.length||S.length||T.length)&&n.jsxs("div",{style:yt.dropdown,children:[u&&n.jsx("div",{style:yt.hint,children:"Suche"}),p&&!u&&n.jsxs("div",{style:yt.err,children:[" ",p]}),!u&&!p&&(y.length>0||S.length>0||T.length>0)&&n.jsxs(n.Fragment,{children:[y.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:yt.sectionHdr,children:"Spieler"}),y.map((w,A)=>{var $,F,z,H;const B=A===L,D=($=s==null?void 0:s(w.className,64))!=null?$:vB(w.className,64);return n.jsxs("button",{onClick:()=>P(w),style:B?yt.itemActive:yt.item,title:w.name||"",onMouseEnter:()=>k(A),children:[n.jsx("div",{style:yt.iconBoxPlain,children:D?n.jsx("img",{src:D,alt:"",style:yt.iconImgShadow,onError:K=>{const q=K.currentTarget.parentElement;q&&(q.innerHTML='<div style="font-size:12px;color:#B0C4D9;"></div>')}}):n.jsx("div",{style:yt.iconFallback,children:(w.className||" ? ").toString().slice(0,2)})}),n.jsxs("div",{style:yt.meta,children:[n.jsxs("div",{style:yt.line1,children:[n.jsx("span",{style:yt.name,children:(F=w.name)!=null?F:"Unbekannt"}),Rv(w.level)&&n.jsxs("span",{style:yt.badge,children:["Lvl ",w.level]})]}),n.jsxs("div",{style:yt.line2,children:[w.guildName?n.jsxs("span",{children:["",w.guildName,""]}):n.jsx("span",{style:yt.muted,children:""}),n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:(z=w.className)!=null?z:"Klasse ?"}),n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:(H=w.server)!=null?H:"Server ?"})]})]})]},`p-${w.id}-${A}`)})]}),S.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:yt.sectionHdr,children:"Gilden"}),S.map((w,A)=>{var $,F;const B=y.length+A,D=B===L;return n.jsxs("button",{onClick:()=>P(w),style:D?yt.itemActive:yt.item,title:w.name||"",onMouseEnter:()=>k(B),children:[n.jsx("div",{style:yt.iconBox,children:""}),n.jsxs("div",{style:yt.meta,children:[n.jsxs("div",{style:yt.line1,children:[n.jsx("span",{style:yt.name,children:($=w.name)!=null?$:"Unbekannt"}),Rv(w.hofRank)&&n.jsxs("span",{style:yt.badge,children:["HoF #",w.hofRank]})]}),n.jsxs("div",{style:yt.line2,children:[n.jsx("span",{children:(F=w.server)!=null?F:"Server ?"}),n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:Rv(w.memberCount)?`${w.memberCount} Mitglieder`:"Mitglieder ?"})]})]})]},`g-${w.id}-${A}`)})]}),T.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:yt.sectionHdr,children:"Server"}),T.map((w,A)=>{var $,F,z,H,K,q;const B=y.length+S.length+A,D=B===L;return n.jsxs("button",{onClick:()=>P(w),style:D?yt.itemActive:yt.item,title:w.displayName||w.code||w.host||"",onMouseEnter:()=>k(B),children:[n.jsx("div",{style:yt.iconBoxPlain,children:n.jsx("div",{style:yt.serverGlyph,children:""})}),n.jsxs("div",{style:yt.meta,children:[n.jsxs("div",{style:yt.line1,children:[n.jsx("span",{style:yt.name,children:(z=(F=($=w.displayName)!=null?$:w.code)!=null?F:w.host)!=null?z:w.id}),w.active!=null&&n.jsx("span",{style:yt.badge,children:w.active?"Aktiv":"Inaktiv"})]}),n.jsxs("div",{style:yt.line2,children:[n.jsx("span",{children:(H=w.code)!=null?H:""}),n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:(K=w.host)!=null?K:""}),n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:(q=w.region)!=null?q:""}),w.type?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:yt.sep,children:""}),n.jsx("span",{children:w.type.toUpperCase()})]}):null]})]})]},`s-${w.id}-${A}`)})]})]}),!u&&!p&&y.length===0&&S.length===0&&T.length===0&&l.length>=1&&n.jsx("div",{style:yt.hint,children:"Keine Treffer"})]})]})}const yt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},muted:{opacity:.7}},_B=[{to:"/",label:"Home",featureId:"main.home"},{to:"/dashboard",label:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",label:"Guild Hub",featureId:"main.guildHub"},{to:"/community",label:"Community",featureId:"main.community"},{to:"/tools",label:"Tools",featureId:"main.tools"}];function wB(t){var d,u,h;if(!t)return;const e=String(t),s=e,r=e.toLowerCase(),i=e.replace(/\s+/g,""),a=r.replace(/\s+/g,""),l=[void 0,void 0,void 0,void 0,fB];for(const p of l){if(!p)continue;const g=(h=(u=(d=p[s])!=null?d:p[r])!=null?u:p[i])!=null?h:p[a];if(typeof g=="string")return g}}function jB({user:t}){const{open:e,canUse:s}=U1(),{isVisibleInTopbar:r}=kg(),i=ee.useMemo(()=>_B.filter(l=>!l.featureId||r(l.featureId)),[r]),a=()=>{e({tab:"json"})};return n.jsxs("header",{className:St.topbar,children:[n.jsxs("div",{className:St.topbarLeft,children:[n.jsx("button",{className:St.btnIco,"aria-label":"Benachrichtigungen",children:n.jsx(vP,{className:St.ico})}),n.jsx("button",{className:St.btnIco,"aria-label":"Favoriten",children:n.jsx(N6,{className:St.ico})}),i.length>0?n.jsx("nav",{className:St.topbarNav,"aria-label":"Schnellzugriff",children:i.map(l=>n.jsx(hs,{to:l.to,className:({isActive:d})=>`${St.pill} ${St.topbarLink} ${d?St.pillActive:""}`,children:l.label},l.to))}):null]}),n.jsx("div",{className:St.searchWrap,children:n.jsx(bB,{placeholder:"Suchen (Spieler)",getClassIcon:wB,maxPerSection:10})}),n.jsxs("div",{className:St.topbarRight,children:[n.jsxs("a",{className:`${St.pill} ${St.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer",children:[n.jsx(GP,{className:St.ico}),"www.sfgame.net"]}),s?n.jsxs("button",{className:St.upload,"aria-label":"Scan hochladen",onClick:a,title:"Scan hochladen",children:[n.jsx(R6,{className:St.ico}),n.jsx("span",{className:St.label,children:"Scan hochladen"})]}):null,n.jsx(tB,{fallbackName:t==null?void 0:t.name})]})]})}const SB="_root_1scwm_3",NB="_expanded_1scwm_45",kB="_headRow_1scwm_55",TB="_headTitle_1scwm_63",CB="_headDot_1scwm_65",EB="_headLabel_1scwm_67",AB="_pinBtn_1scwm_69",IB="_navScroll_1scwm_81",RB="_pad_1scwm_83",PB="_segCard_1scwm_89",LB="_segTitle_1scwm_121",DB="_navCol_1scwm_139",MB="_navItemWrap_1scwm_141",FB="_navBtn_1scwm_147",BB="_navBtnActive_1scwm_171",$B="_label_1scwm_175",OB="_trailing_1scwm_205",VB="_isOpen_1scwm_253",UB="_footer_1scwm_279",zB="_login_1scwm_281",HB="_userMeta_1scwm_303",GB="_footerLink_1scwm_317",WB="_legal_1scwm_345",qB="_labelText_1scwm_369",KB="_char_1scwm_379",QB="_mainNavCard_1scwm_447",Bt={root:SB,expanded:NB,headRow:kB,headTitle:TB,headDot:CB,headLabel:EB,pinBtn:AB,navScroll:IB,pad:RB,segCard:PB,segTitle:LB,navCol:DB,navItemWrap:MB,navBtn:FB,navBtnActive:BB,label:$B,trailing:OB,isOpen:VB,footer:UB,login:zB,userMeta:HB,footerLink:GB,legal:WB,labelText:qB,char:KB,mainNavCard:QB},YB="_panel_90cjk_1",XB="_open_90cjk_31",JB="_col_90cjk_43",ZB="_link_90cjk_55",e$="_linkActive_90cjk_73",zu={panel:YB,open:XB,col:JB,link:ZB,linkActive:e$};function t$(t,e=8){const s=t.getBoundingClientRect();return{left:Math.round(s.right+e),top:Math.round(s.top)}}function s$({anchorEl:t,open:e,items:s,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[l,d]=ee.useState({left:0,top:0});return ee.useEffect(()=>{if(!e||!t)return;const u=()=>d(t$(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(s!=null&&s.length)&&console.log("submenu items:",s.map(u=>u.label)),aP.createPortal(n.jsx("div",{className:`${zu.panel} ${e?zu.open:""}`,style:{left:l.left,top:l.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:n.jsx("div",{className:zu.col,children:s.map(u=>r(u))})}),document.body))}const n$=[{to:"/",label:"Home",icon:n.jsx(KP,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",label:"Discover",icon:n.jsx(MP,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",label:"Dashboard",icon:n.jsx(JP,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",label:"Settings",icon:n.jsx(f6,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",label:"Guild Hub",icon:n.jsx(Ml,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",label:"Admin",icon:n.jsx(y6,{className:"ico"}),featureId:"main.admin"},{to:"/playground",label:"Playground",icon:n.jsx(Zf,{className:"ico"}),featureId:"main.playground"}],r$=[{to:"/toplists",label:"Toplists",icon:n.jsx(A6,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub",label:"Guide Hub",icon:n.jsx(bP,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",label:"Tools",icon:n.jsx(D6,{className:"ico"}),i18nKey:"nav.tools",featureId:"main.tools"},{to:"/community",label:"Community",icon:n.jsx(t6,{className:"ico"}),featureId:"main.community"},{to:"/scans",label:"Scans",icon:n.jsx(zP,{className:"ico"}),featureId:"main.scans"}],i$={"/guild-hub":[{to:"/guild-hub",label:"Overview"},{to:"/guild-hub/planner",label:"Guild Planner"},{to:"/guild-hub/fusion-planner",label:"Fusion Planner"},{to:"/guild-hub/compare-guilds",label:"Gildenvergleich"},{to:"/guild-hub/waitlist",label:"Waitlist"},{to:"/guild-hub/settings",label:"Settings"}],"/discover":[{to:"/players",label:"Players"},{to:"/sfmagazine",label:"SFMagazine"},{to:"/sfmagazine/historybook",label:"History Book"},{to:"/guilds",label:"Guilds"},{to:"/servers",label:"Servers"},{to:"/scans",label:"Scans"},{to:"/discover/favorites",label:"Favorites"}],"/admin":[{to:"/admin",label:"Overview"},{to:"/admin/errors",label:"Error log"},{to:"/admin/feedback",label:"Feedback"},{to:"/admin/users",label:"Users",minRole:"mod"}],"/settings":[{to:"/settings/profile",label:"Profile"},{to:"/settings/account",label:"Account"},{to:"/settings/appearance",label:"Appearance"}],"/playground":[{to:"/playground/list-views",label:"List Views"},{to:"/playground/rescan-widget",label:"Rescan Widget"},{to:"/playground/upload-sim",label:"Upload Simulator"},{to:"/playground/hud/game-buttons",label:"HUD  Game Buttons"}]};function a$(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function o$(t,e){return t?t.filter(s=>a$(e,s.minRole)):[]}const l$=220;function c$(t=l$){const[e,s]=ee.useState(!1),r=ee.useRef(null),i=ee.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=ee.useCallback(()=>{i(),s(!0)},[i]),l=ee.useCallback(()=>{i(),r.current=window.setTimeout(()=>s(!1),t)},[i,t]);return ee.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:l,setOpen:s}}function z1({text:t,isOpen:e,duration:s=1,step:r=45}){const i=ee.useMemo(()=>Array.from(t),[t]);return n.jsx("span",{className:Bt.label,children:n.jsx("span",{className:Bt.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${s}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,l)=>n.jsx("span",{className:Bt.char,style:{"--i":l},"aria-hidden":"true",children:a===" "?"":a},`${t}-${l}`))})})}function d$({it:t,label:e,collapsed:s,allowSubmenus:r,subItems:i}){const a=i.length>0,{open:l,onEnter:d,onLeave:u,setOpen:h}=c$(),p=ee.useRef(null),g=ee.useCallback(()=>{if(!r||!a){h(!1);return}d()},[r,a,d,h]);return n.jsxs("div",{ref:p,className:`${Bt.navItemWrap} ${l?Bt.isOpen:""}`,onMouseEnter:g,onMouseLeave:u,children:[n.jsxs(hs,{to:t.to,end:!!t.end,className:({isActive:y})=>`${Bt.navBtn} ${y?Bt.navBtnActive:""}`,children:[t.icon,n.jsx(z1,{text:e,isOpen:!s}),a&&!s&&n.jsx("span",{className:Bt.trailing,"aria-hidden":"true",children:n.jsx(SP,{className:"ico"})})]}),a&&n.jsx(s$,{anchorEl:p.current,open:l,items:i.map(({to:y,label:b})=>({to:y,label:b})),renderLink:y=>n.jsx(hs,{to:y.to,end:!0,className:({isActive:b})=>`${zu.link} ${b?zu.linkActive:""}`,children:y.label},y.to),onMouseEnter:d,onMouseLeave:u})]})}function Lj({title:t,items:e,collapsed:s,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:l}){return n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:`${Bt.navTitle} ${Bt.segTitle}`,children:t}),n.jsx("div",{className:Bt.navCol,children:e.map(d=>{if(!l(d))return null;const u=o$(i$[d.to],i),h=d.i18nKey?a(d.i18nKey):d.label;return u.length?n.jsx(d$,{it:d,label:h,collapsed:s,allowSubmenus:r,subItems:u},d.to):n.jsxs(hs,{to:d.to,end:!!d.end,className:({isActive:p})=>`${Bt.navBtn} ${p?Bt.navBtnActive:""}`,children:[d.icon,n.jsx(z1,{text:h,isOpen:!s})]},d.to)})})]})}const u$=90,h$=180;function p$({expanded:t,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:i=!0}){var w;const a=ee.useRef(null),l=ee.useRef(null),[d,u]=ee.useState(!1),h=ee.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null),l.current&&(window.clearTimeout(l.current),l.current=null)},[]),p=ee.useCallback(()=>{!i||s||(h(),u(!1),a.current=window.setTimeout(()=>e(!0),u$))},[i,s,h,e]),g=ee.useCallback(()=>{!i||s||(h(),l.current=window.setTimeout(()=>{e(!1),u(!1)},h$))},[i,s,h,e]);ee.useEffect(()=>()=>h(),[h]),ee.useEffect(()=>{s&&u(!0)},[s]);const y=A=>{A.propertyName==="width"&&t&&!s&&u(!0)};ee.useEffect(()=>{if(t&&!s){const A=window.setTimeout(()=>u(!0),250);return()=>window.clearTimeout(A)}},[t,s]);const b=!t,S=s||t&&d,N=Vr(),{t:T}=fd(),{status:M,user:L,logout:k}=$l(),v=M==="authenticated",_=(w=L==null?void 0:L.roles)!=null?w:[],{isVisibleInSidebar:P}=kg(),E=()=>{v?k():N("/login")};return n.jsxs("aside",{id:"sidebar-root",className:`${Bt.root} ${t?Bt.expanded:""}`,"data-collapsed":b?"true":"false",onMouseEnter:p,onMouseLeave:g,onTransitionEnd:y,"aria-label":"Navigation",children:[n.jsxs("div",{className:Bt.headRow,children:[n.jsxs("div",{className:Bt.headTitle,children:[n.jsx("span",{className:Bt.headDot})," ",n.jsx("span",{className:Bt.headLabel,children:"Navigation"})]}),n.jsx("button",{className:Bt.pinBtn,"aria-pressed":s,title:s?"Unpin":"Pin",onClick:()=>r(!s),type:"button",children:s?n.jsx(o6,{className:"ico"}):n.jsx(i6,{className:"ico"})})]}),n.jsx("div",{className:Bt.navScroll,children:n.jsxs("div",{className:Bt.pad,children:[n.jsx("div",{className:`${Bt.segCard} ${Bt.mainNavCard}`,children:n.jsx(Lj,{items:n$,collapsed:b,allowSubmenus:S,userRoles:_,translate:T,isItemVisible:A=>{var B;return P((B=A.featureId)!=null?B:A.to)}})}),n.jsx("div",{className:Bt.segTitle,children:"Kategorien"}),n.jsx("div",{className:`${Bt.segCard} ${Bt.mainNavCard}`,children:n.jsx(Lj,{items:r$,collapsed:b,allowSubmenus:S,userRoles:_,translate:T,isItemVisible:A=>{var B;return P((B=A.featureId)!=null?B:A.to)}})})]})}),n.jsxs("div",{className:`${Bt.footer} ${Bt.segCard} ${Bt.mainNavCard}`,children:[n.jsxs("button",{className:Bt.login,type:"button",onClick:E,children:[n.jsx(Ml,{className:"ico"}),n.jsx(z1,{text:v?"Logout":"Login",isOpen:!b})]}),v&&(L!=null&&L.displayName)?n.jsx("div",{className:Bt.userMeta,title:L.displayName,children:L.displayName}):null,n.jsx(hs,{to:"/help",className:Bt.footerLink,children:T("nav.help",{defaultValue:"Help"})}),n.jsxs("div",{className:Bt.legal,children:["(c) 2025 ",T("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const ef="/assets/logo-sfdatahub-CUdhlsEb.png";function m$({src:t,alt:e="",children:s,to:r="/",loading:i="eager",decoding:a="async"}){const l=t!=null?t:ef;return n.jsxs("div",{className:"logo-dock",children:[n.jsx(hs,{to:r,"aria-label":"Go to home",children:n.jsx("img",{className:"logo-img",src:l,alt:e,loading:i,decoding:a,onError:d=>{const u=d.currentTarget;u.src!==ef&&(u.src=ef)}})}),s]})}const f$={borderColor:"#2B4C73",background:"#1A2F4A"};function g$(){const[t,e]=I.useState(!1),[s,r]=I.useState(!1),i=s||t,{t:a}=fd(),l=I.useMemo(()=>i?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i]),d=a("footer.about.body").split(`

`),u=[{key:"tos",to:"/playground/legal/tos",label:a("help.sections.legal.items.tos",{defaultValue:"Terms of Service (ToS)"})},{key:"privacy",to:"/playground/legal/tos",label:a("help.sections.legal.items.privacy",{defaultValue:"Privacy Policy"})},{key:"imprint",to:"/help",label:a("help.sections.legal.items.imprint",{defaultValue:"Imprint / Contact"})}];return n.jsxs("div",{id:"app-shell","data-sidebar":i?"expanded":"collapsed",style:{"--left":l},children:[n.jsx(m$,{src:"/logo.png"}),n.jsx(jB,{}),n.jsx("div",{className:"logo-fill"}),n.jsx(p$,{expanded:i,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:!s}),n.jsx("div",{className:"content",children:n.jsx("div",{className:"content-inner",children:n.jsxs("div",{className:"content-body",children:[n.jsx(Wk,{}),n.jsx("div",{className:"mt-4 px-4 md:px-6",children:n.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:f$,children:[n.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:a("footer.about.title")}),n.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:d.map((h,p)=>n.jsx("p",{className:"whitespace-pre-line",children:h},`footer-about-${p}`))}),n.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[n.jsx("div",{children:a("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),n.jsx("div",{children:a("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:u.map(h=>n.jsx(qt,{to:h.to,className:"underline hover:no-underline",children:h.label},h.key))})]})})]})})})]})}const R3=I.createContext({});function H1(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const G1=I.createContext(null),W1=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function x$(t=!0){const e=I.useContext(G1);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=e,a=I.useId();I.useEffect(()=>{t&&i(a)},[t]);const l=I.useCallback(()=>t&&r&&r(a),[a,r,t]);return!s&&r?[!1,l]:[!0]}const q1=typeof window!="undefined",P3=q1?I.useLayoutEffect:I.useEffect,br=t=>t;let L3=br;function K1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Pl=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r},Li=t=>t*1e3,Di=t=>t/1e3,v$={useManualTiming:!1};function y$(t){let e=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(h){a.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,p=!1,g=!1)=>{const b=g&&r?e:s;return p&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{s.delete(h),a.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[e,s]=[s,e],e.forEach(d),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const vm=["read","resolveKeyframes","update","preRender","render","postRender"],b$=40;function D3(t,e){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,l=vm.reduce((M,L)=>(M[L]=y$(a),M),{}),{read:d,resolveKeyframes:u,update:h,preRender:p,render:g,postRender:y}=l,b=()=>{const M=performance.now();s=!1,i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,b$),1),i.timestamp=M,i.isProcessing=!0,d.process(i),u.process(i),h.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,s&&e&&(r=!1,t(b))},S=()=>{s=!0,r=!0,i.isProcessing||t(b)};return{schedule:vm.reduce((M,L)=>{const k=l[L];return M[L]=(v,_=!1,P=!1)=>(s||S(),k.schedule(v,_,P)),M},{}),cancel:M=>{for(let L=0;L<vm.length;L++)l[vm[L]].cancel(M)},state:i,steps:l}}const{schedule:ns,cancel:ka,state:ln,steps:Pv}=D3(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:br,!0),M3=I.createContext({strict:!1}),Dj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ld={};for(const t in Dj)ld[t]={isEnabled:e=>Dj[t].some(s=>!!e[s])};function _$(t){for(const e in t)ld[e]={...ld[e],...t[e]}}const w$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Af(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||w$.has(t)}let F3=t=>!Af(t);function j$(t){t&&(F3=e=>e.startsWith("on")?!Af(e):t(e))}try{j$(require("@emotion/is-prop-valid").default)}catch(t){}function S$(t,e,s){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(F3(i)||s===!0&&Af(i)||!e&&!Af(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function N$(t){if(typeof Proxy=="undefined")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Cg=I.createContext({});function fh(t){return typeof t=="string"||Array.isArray(t)}function Eg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Q1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Y1=["initial",...Q1];function Ag(t){return Eg(t.animate)||Y1.some(e=>fh(t[e]))}function B3(t){return!!(Ag(t)||t.variants)}function k$(t,e){if(Ag(t)){const{initial:s,animate:r}=t;return{initial:s===!1||fh(s)?s:void 0,animate:fh(r)?r:void 0}}return t.inherit!==!1?e:{}}function T$(t){const{initial:e,animate:s}=k$(t,I.useContext(Cg));return I.useMemo(()=>({initial:e,animate:s}),[Mj(e),Mj(s)])}function Mj(t){return Array.isArray(t)?t.join(" "):t}const C$=Symbol.for("motionComponentSymbol");function Bc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function E$(t,e,s){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):Bc(s)&&(s.current=r))},[e])}const X1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A$="framerAppearId",$3="data-"+X1(A$),{schedule:J1}=D3(queueMicrotask,!1),O3=I.createContext({});function I$(t,e,s,r,i){var a,l;const{visualElement:d}=I.useContext(Cg),u=I.useContext(M3),h=I.useContext(G1),p=I.useContext(W1).reducedMotion,g=I.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:d,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,b=I.useContext(O3);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&R$(g.current,s,i,b);const S=I.useRef(!1);I.useInsertionEffect(()=>{y&&S.current&&y.update(s,h)});const N=s[$3],T=I.useRef(!!N&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return P3(()=>{y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),J1.render(y.render),T.current&&y.animationState&&y.animationState.animateChanges())}),I.useEffect(()=>{y&&(!T.current&&y.animationState&&y.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)===null||M===void 0||M.call(window,N)}),T.current=!1))}),y}function R$(t,e,s,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:V3(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&Bc(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function V3(t){if(t)return t.options.allowProjection!==!1?t.projection:V3(t.parent)}function P$({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:i}){var a,l;t&&_$(t);function d(h,p){let g;const y={...I.useContext(W1),...h,layoutId:L$(h)},{isStatic:b}=y,S=T$(h),N=r(h,b);if(!b&&q1){D$();const T=M$(y);g=T.MeasureLayout,S.visualElement=I$(i,N,y,e,T.ProjectionNode)}return n.jsxs(Cg.Provider,{value:S,children:[g&&S.visualElement?n.jsx(g,{visualElement:S.visualElement,...y}):null,s(i,h,E$(N,S.visualElement,p),N,b,S.visualElement)]})}d.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const u=I.forwardRef(d);return u[C$]=i,u}function L$({layoutId:t}){const e=I.useContext(R3).id;return e&&t!==void 0?e+"-"+t:t}function D$(t,e){I.useContext(M3).strict}function M$(t){const{drag:e,layout:s}=ld;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const F$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z1(t){return typeof t!="string"||t.includes("-")?!1:!!(F$.indexOf(t)>-1||/[A-Z]/u.test(t))}function Fj(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function eb(t,e,s,r){if(typeof e=="function"){const[i,a]=Fj(r);e=e(s!==void 0?s:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Fj(r);e=e(s!==void 0?s:t.custom,i,a)}return e}const l0=t=>Array.isArray(t),B$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$$=t=>l0(t)?t[t.length-1]||0:t,en=t=>!!(t&&t.getVelocity);function tf(t){const e=en(t)?t.get():t;return B$(e)?e.toValue():e}function O$({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},r,i,a){const l={latestValues:V$(r,i,a,t),renderState:e()};return s&&(l.onMount=d=>s({props:r,current:d,...l}),l.onUpdate=d=>s(d)),l}const U3=t=>(e,s)=>{const r=I.useContext(Cg),i=I.useContext(G1),a=()=>O$(t,e,r,i);return s?a():H1(a)};function V$(t,e,s,r){const i={},a=r(t,{});for(const y in a)i[y]=tf(a[y]);let{initial:l,animate:d}=t;const u=Ag(t),h=B3(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let p=s?s.initial===!1:!1;p=p||l===!1;const g=p?d:l;if(g&&typeof g!="boolean"&&!Eg(g)){const y=Array.isArray(g)?g:[g];for(let b=0;b<y.length;b++){const S=eb(t,y[b]);if(S){const{transitionEnd:N,transition:T,...M}=S;for(const L in M){let k=M[L];if(Array.isArray(k)){const v=p?k.length-1:0;k=k[v]}k!==null&&(i[L]=k)}for(const L in N)i[L]=N[L]}}}return i}const Sd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ol=new Set(Sd),z3=t=>e=>typeof e=="string"&&e.startsWith(t),H3=z3("--"),U$=z3("var(--"),tb=t=>U$(t)?z$.test(t.split("/*")[0].trim()):!1,z$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,G3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ta=(t,e,s)=>s>e?e:s<t?t:s,Nd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gh={...Nd,transform:t=>Ta(0,1,t)},ym={...Nd,default:1},Oh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),io=Oh("deg"),Mi=Oh("%"),st=Oh("px"),H$=Oh("vh"),G$=Oh("vw"),Bj={...Mi,parse:t=>Mi.parse(t)/100,transform:t=>Mi.transform(t*100)},W$={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st},q$={rotate:io,rotateX:io,rotateY:io,rotateZ:io,scale:ym,scaleX:ym,scaleY:ym,scaleZ:ym,skew:io,skewX:io,skewY:io,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:gh,originX:Bj,originY:Bj,originZ:st},$j={...Nd,transform:Math.round},sb={...W$,...q$,zIndex:$j,size:st,fillOpacity:gh,strokeOpacity:gh,numOctaves:$j},K$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Q$=Sd.length;function Y$(t,e,s){let r="",i=!0;for(let a=0;a<Q$;a++){const l=Sd[a],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=G3(d,sb[l]);if(!u){i=!1;const p=K$[l]||l;r+=`${p}(${h}) `}s&&(e[l]=h)}}return r=r.trim(),s?r=s(e,i?"":r):i&&(r="none"),r}function nb(t,e,s){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(Ol.has(u)){l=!0;continue}else if(H3(u)){i[u]=h;continue}else{const p=G3(h,sb[u]);u.startsWith("origin")?(d=!0,a[u]=p):r[u]=p}}if(e.transform||(l||s?r.transform=Y$(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:p=0}=a;r.transformOrigin=`${u} ${h} ${p}`}}const X$={offset:"stroke-dashoffset",array:"stroke-dasharray"},J$={offset:"strokeDashoffset",array:"strokeDasharray"};function Z$(t,e,s=1,r=0,i=!0){t.pathLength=1;const a=i?X$:J$;t[a.offset]=st.transform(-r);const l=st.transform(e),d=st.transform(s);t[a.array]=`${l} ${d}`}function Oj(t,e,s){return typeof t=="string"?t:st.transform(e+s*t)}function eO(t,e,s){const r=Oj(e,t.x,t.width),i=Oj(s,t.y,t.height);return`${r} ${i}`}function rb(t,{attrX:e,attrY:s,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:u=0,...h},p,g){if(nb(t,h,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:b,dimensions:S}=t;y.transform&&(S&&(b.transform=y.transform),delete y.transform),S&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=eO(S,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),s!==void 0&&(y.y=s),r!==void 0&&(y.scale=r),l!==void 0&&Z$(y,l,d,u,!1)}const ib=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),W3=()=>({...ib(),attrs:{}}),ab=t=>typeof t=="string"&&t.toLowerCase()==="svg";function q3(t,{style:e,vars:s},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in s)t.style.setProperty(a,s[a])}const K3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Q3(t,e,s,r){q3(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(K3.has(i)?i:X1(i),e.attrs[i])}const If={};function tO(t){Object.assign(If,t)}function Y3(t,{layout:e,layoutId:s}){return Ol.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!If[t]||t==="opacity")}function ob(t,e,s){var r;const{style:i}=t,a={};for(const l in i)(en(i[l])||e.style&&en(e.style[l])||Y3(l,t)||((r=s==null?void 0:s.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}function X3(t,e,s){const r=ob(t,e,s);for(const i in t)if(en(t[i])||en(e[i])){const a=Sd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function sO(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(s){e.dimensions={x:0,y:0,width:0,height:0}}}const Vj=["x","y","width","height","cx","cy","r"],nO={useVisualState:U3({scrapeMotionValuesFromProps:X3,createRenderState:W3,onUpdate:({props:t,prevProps:e,current:s,renderState:r,latestValues:i})=>{if(!s)return;let a=!!t.drag;if(!a){for(const d in i)if(Ol.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<Vj.length;d++){const u=Vj[d];t[u]!==e[u]&&(l=!0)}l&&ns.read(()=>{sO(s,r),ns.render(()=>{rb(r,i,ab(s.tagName),t.transformTemplate),Q3(s,r)})})}})},rO={useVisualState:U3({scrapeMotionValuesFromProps:ob,createRenderState:ib})};function J3(t,e,s){for(const r in e)!en(e[r])&&!Y3(r,s)&&(t[r]=e[r])}function iO({transformTemplate:t},e){return I.useMemo(()=>{const s=ib();return nb(s,e,t),Object.assign({},s.vars,s.style)},[e])}function aO(t,e){const s=t.style||{},r={};return J3(r,s,t),Object.assign(r,iO(t,e)),r}function oO(t,e){const s={},r=aO(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}function lO(t,e,s,r){const i=I.useMemo(()=>{const a=W3();return rb(a,e,ab(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};J3(a,t.style,t),i.style={...a,...i.style}}return i}function cO(t=!1){return(s,r,i,{latestValues:a},l)=>{const u=(Z1(s)?lO:oO)(r,a,l,s),h=S$(r,typeof s=="string",t),p=s!==I.Fragment?{...h,...u,ref:i}:{},{children:g}=r,y=I.useMemo(()=>en(g)?g.get():g,[g]);return I.createElement(s,{...p,children:y})}}function dO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...Z1(r)?nO:rO,preloadedFeatures:t,useRender:cO(i),createVisualElement:e,Component:r};return P$(l)}}function Z3(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}function Ig(t,e,s){const r=t.getProps();return eb(r,e,s!==void 0?s:r.custom,t)}const uO=K1(()=>window.ScrollTimeline!==void 0);class hO{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e,s){const r=this.animations.map(i=>{if(uO()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class e5 extends hO{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function lb(t,e){return t?t[e]||t.default||t:void 0}const Rf=2e4;function cb(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<Rf;)e+=s,r=t.next(e);return e>=Rf?1/0:e}function pO(t,e=100,s){const r=s({...t,keyframes:[0,e]}),i=Math.min(cb(r),Rf);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Di(i)}}function Rg(t){return typeof t=="function"}function Uj(t,e){t.timeline=e,t.onfinish=null}const db=t=>Array.isArray(t)&&typeof t[0]=="number",mO={linearEasing:void 0};function fO(t,e){const s=K1(t);return()=>{var r;return(r=mO[e])!==null&&r!==void 0?r:s()}}const Pf=fO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),t5=(t,e,s=10)=>{let r="";const i=Math.max(Math.round(e/s),2);for(let a=0;a<i;a++)r+=t(Pl(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function s5(t){return!!(typeof t=="function"&&Pf()||!t||typeof t=="string"&&(t in c0||Pf())||db(t)||Array.isArray(t)&&t.every(s5))}const Iu=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,c0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Iu([0,.65,.55,1]),circOut:Iu([.55,0,1,.45]),backIn:Iu([.31,.01,.66,-.59]),backOut:Iu([.33,1.53,.69,.99])};function n5(t,e){if(t)return typeof t=="function"&&Pf()?t5(t,e):db(t)?Iu(t):Array.isArray(t)?t.map(s=>n5(s,e)||c0.easeOut):c0[t]}const li={x:!1,y:!1};function r5(){return li.x||li.y}function i5(t,e,s){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=s==null?void 0:s[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function a5(t,e){const s=i5(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[s,i,()=>r.abort()]}function zj(t){return e=>{e.pointerType==="touch"||r5()||t(e)}}function gO(t,e,s={}){const[r,i,a]=a5(t,s),l=zj(d=>{const{target:u}=d,h=e(d);if(typeof h!="function"||!u)return;const p=zj(g=>{h(g),u.removeEventListener("pointerleave",p)});u.addEventListener("pointerleave",p,i)});return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const o5=(t,e)=>e?t===e?!0:o5(t,e.parentElement):!1,ub=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vO(t){return xO.has(t.tagName)||t.tabIndex!==-1}const Ru=new WeakSet;function Hj(t){return e=>{e.key==="Enter"&&t(e)}}function Lv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yO=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Hj(()=>{if(Ru.has(s))return;Lv(s,"down");const i=Hj(()=>{Lv(s,"up")}),a=()=>Lv(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Gj(t){return ub(t)&&!r5()}function bO(t,e,s={}){const[r,i,a]=a5(t,s),l=d=>{const u=d.currentTarget;if(!Gj(d)||Ru.has(u))return;Ru.add(u);const h=e(d),p=(b,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),!(!Gj(b)||!Ru.has(u))&&(Ru.delete(u),typeof h=="function"&&h(b,{success:S}))},g=b=>{p(b,s.useGlobalTarget||o5(u,b.target))},y=b=>{p(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return r.forEach(d=>{!vO(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(s.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d.addEventListener("focus",h=>yO(h,i),i)}),a}function _O(t){return t==="x"||t==="y"?li[t]?null:(li[t]=!0,()=>{li[t]=!1}):li.x||li.y?null:(li.x=li.y=!0,()=>{li.x=li.y=!1})}const l5=new Set(["width","height","top","left","right","bottom",...Sd]);let sf;function wO(){sf=void 0}const Fi={now:()=>(sf===void 0&&Fi.set(ln.isProcessing||v$.useManualTiming?ln.timestamp:performance.now()),sf),set:t=>{sf=t,queueMicrotask(wO)}};function hb(t,e){t.indexOf(e)===-1&&t.push(e)}function Pg(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class pb{constructor(){this.subscriptions=[]}add(e){return hb(this.subscriptions,e),()=>Pg(this.subscriptions,e)}notify(e,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function c5(t,e){return e?t*(1e3/e):0}const Wj=30,jO=t=>!isNaN(parseFloat(t)),Hu={current:void 0};class SO{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Fi.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Fi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new pb);const r=this.events[e].add(s);return e==="change"?()=>{r(),ns.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Hu.current&&Hu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Wj)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Wj);return c5(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cd(t,e){return new SO(t,e)}function NO(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,cd(s))}function kO(t,e){const s=Ig(t,e);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const l in a){const d=$$(a[l]);NO(t,l,d)}}function TO(t){return!!(en(t)&&t.add)}function d0(t,e){const s=t.getValue("willChange");if(TO(s))return s.add(e)}function d5(t){return t.props[$3]}const u5=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,CO=1e-7,EO=12;function AO(t,e,s,r,i){let a,l,d=0;do l=e+(s-e)/2,a=u5(l,r,i)-t,a>0?s=l:e=l;while(Math.abs(a)>CO&&++d<EO);return l}function Vh(t,e,s,r){if(t===e&&s===r)return br;const i=a=>AO(a,0,1,t,s);return a=>a===0||a===1?a:u5(i(a),e,r)}const h5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,p5=t=>e=>1-t(1-e),m5=Vh(.33,1.53,.69,.99),mb=p5(m5),f5=h5(mb),g5=t=>(t*=2)<1?.5*mb(t):.5*(2-Math.pow(2,-10*(t-1))),fb=t=>1-Math.sin(Math.acos(t)),x5=p5(fb),v5=h5(fb),y5=t=>/^0[^.\s]+$/u.test(t);function IO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||y5(t):!0}const Gu=t=>Math.round(t*1e5)/1e5,gb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RO(t){return t==null}const PO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xb=(t,e)=>s=>!!(typeof s=="string"&&PO.test(s)&&s.startsWith(t)||e&&!RO(s)&&Object.prototype.hasOwnProperty.call(s,e)),b5=(t,e,s)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(gb);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},LO=t=>Ta(0,255,t),Dv={...Nd,transform:t=>Math.round(LO(t))},bl={test:xb("rgb","red"),parse:b5("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+Dv.transform(t)+", "+Dv.transform(e)+", "+Dv.transform(s)+", "+Gu(gh.transform(r))+")"};function DO(t){let e="",s="",r="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const u0={test:xb("#"),parse:DO,transform:bl.transform},$c={test:xb("hsl","hue"),parse:b5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mi.transform(Gu(e))+", "+Mi.transform(Gu(s))+", "+Gu(gh.transform(r))+")"},kn={test:t=>bl.test(t)||u0.test(t)||$c.test(t),parse:t=>bl.test(t)?bl.parse(t):$c.test(t)?$c.parse(t):u0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bl.transform(t):$c.transform(t)},MO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FO(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(gb))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(MO))===null||s===void 0?void 0:s.length)||0)>0}const _5="number",w5="color",BO="var",$O="var(",qj="${}",OO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xh(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(OO,u=>(kn.test(u)?(r.color.push(a),i.push(w5),s.push(kn.parse(u))):u.startsWith($O)?(r.var.push(a),i.push(BO),s.push(u)):(r.number.push(a),i.push(_5),s.push(parseFloat(u))),++a,qj)).split(qj);return{values:s,split:d,indexes:r,types:i}}function j5(t){return xh(t).values}function S5(t){const{split:e,types:s}=xh(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=s[l];d===_5?a+=Gu(i[l]):d===w5?a+=kn.transform(i[l]):a+=i[l]}return a}}const VO=t=>typeof t=="number"?0:t;function UO(t){const e=j5(t);return S5(t)(e.map(VO))}const ko={test:FO,parse:j5,createTransformer:S5,getAnimatableNone:UO},zO=new Set(["brightness","contrast","saturate","opacity"]);function HO(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(gb)||[];if(!r)return t;const i=s.replace(r,"");let a=zO.has(e)?1:0;return r!==s&&(a*=100),e+"("+a+i+")"}const GO=/\b([a-z-]*)\(.*?\)/gu,h0={...ko,getAnimatableNone:t=>{const e=t.match(GO);return e?e.map(HO).join(" "):t}},WO={...sb,color:kn,backgroundColor:kn,outlineColor:kn,fill:kn,stroke:kn,borderColor:kn,borderTopColor:kn,borderRightColor:kn,borderBottomColor:kn,borderLeftColor:kn,filter:h0,WebkitFilter:h0},vb=t=>WO[t];function N5(t,e){let s=vb(t);return s!==h0&&(s=ko),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const qO=new Set(["auto","none","0"]);function KO(t,e,s){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!qO.has(a)&&xh(a).values.length&&(i=t[r]),r++}if(i&&s)for(const a of e)t[a]=N5(s,i)}const Kj=t=>t===Nd||t===st,Qj=(t,e)=>parseFloat(t.split(", ")[e]),Yj=(t,e)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Qj(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?Qj(a[1],t):0}},QO=new Set(["x","y","z"]),YO=Sd.filter(t=>!QO.has(t));function XO(t){const e=[];return YO.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const dd={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Yj(4,13),y:Yj(5,14)};dd.translateX=dd.x;dd.translateY=dd.y;const Sl=new Set;let p0=!1,m0=!1;function k5(){if(m0){const t=Array.from(Sl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const i=XO(r);i.length&&(s.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))===null||d===void 0||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}m0=!1,p0=!1,Sl.forEach(t=>t.complete()),Sl.clear()}function T5(){Sl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(m0=!0)})}function JO(){T5(),k5()}class yb{constructor(e,s,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sl.add(this),p0||(p0=!0,ns.read(T5),ns.resolveKeyframes(k5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&s){const u=r.readValue(s,d);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const C5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ZO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eV(t){const e=ZO.exec(t);if(!e)return[,];const[,s,r,i]=e;return[`--${s!=null?s:r}`,i]}function E5(t,e,s=1){const[r,i]=eV(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return C5(l)?parseFloat(l):l}return tb(i)?E5(i,e,s+1):i}const A5=t=>e=>e.test(t),tV={test:t=>t==="auto",parse:t=>t},I5=[Nd,st,Mi,io,G$,H$,tV],Xj=t=>I5.find(A5(t));class R5 extends yb{constructor(e,s,r,i,a){super(e,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),tb(h))){const p=E5(h,s.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!l5.has(r)||e.length!==2)return;const[i,a]=e,l=Xj(i),d=Xj(a);if(l!==d)if(Kj(l)&&Kj(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let i=0;i<e.length;i++)IO(e[i])&&r.push(i);r.length&&KO(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:r,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,d=i[l];i[l]=dd[r](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{s.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const Jj=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ko.test(t)||t==="0")&&!t.startsWith("url("));function sV(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function nV(t,e,s,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=Jj(i,e),d=Jj(a,e);return!l||!d?!1:sV(t)||(s==="spring"||Rg(s))&&r}const rV=t=>t!==null;function Lg(t,{repeat:e,repeatType:s="loop"},r){const i=t.filter(rV),a=e&&s!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const iV=40;class P5{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fi.now(),this.options={autoplay:e,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&JO(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=Fi.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:u,isGenerator:h}=this.options;if(!h&&!nV(e,r,i,a))if(l)this.options.duration=0;else{u&&u(Lg(e,this.options,s)),d&&d(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,s);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...p},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ps=(t,e,s)=>t+(e-t)*s;function Mv(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function aV({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let i=0,a=0,l=0;if(!e)i=a=l=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;i=Mv(u,d,t+1/3),a=Mv(u,d,t),l=Mv(u,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Lf(t,e){return s=>s>0?e:t}const Fv=(t,e,s)=>{const r=t*t,i=s*(e*e-r)+r;return i<0?0:Math.sqrt(i)},oV=[u0,bl,$c],lV=t=>oV.find(e=>e.test(t));function Zj(t){const e=lV(t);if(!e)return!1;let s=e.parse(t);return e===$c&&(s=aV(s)),s}const eS=(t,e)=>{const s=Zj(t),r=Zj(e);if(!s||!r)return Lf(t,e);const i={...s};return a=>(i.red=Fv(s.red,r.red,a),i.green=Fv(s.green,r.green,a),i.blue=Fv(s.blue,r.blue,a),i.alpha=ps(s.alpha,r.alpha,a),bl.transform(i))},cV=(t,e)=>s=>e(t(s)),Uh=(...t)=>t.reduce(cV),f0=new Set(["none","hidden"]);function dV(t,e){return f0.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function uV(t,e){return s=>ps(t,e,s)}function bb(t){return typeof t=="number"?uV:typeof t=="string"?tb(t)?Lf:kn.test(t)?eS:mV:Array.isArray(t)?L5:typeof t=="object"?kn.test(t)?eS:hV:Lf}function L5(t,e){const s=[...t],r=s.length,i=t.map((a,l)=>bb(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)s[l]=i[l](a);return s}}function hV(t,e){const s={...t,...e},r={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(r[i]=bb(t[i])(t[i],e[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function pV(t,e){var s;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],d=t.indexes[l][i[l]],u=(s=t.values[d])!==null&&s!==void 0?s:0;r[a]=u,i[l]++}return r}const mV=(t,e)=>{const s=ko.createTransformer(e),r=xh(t),i=xh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?f0.has(t)&&!i.values.length||f0.has(e)&&!r.values.length?dV(t,e):Uh(L5(pV(r,i),i.values),s):Lf(t,e)};function D5(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?ps(t,e,s):bb(t)(t,e)}const fV=5;function M5(t,e,s){const r=Math.max(e-fV,0);return c5(s-t(r),e-r)}const Ns={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bv=.001;function gV({duration:t=Ns.duration,bounce:e=Ns.bounce,velocity:s=Ns.velocity,mass:r=Ns.mass}){let i,a,l=1-e;l=Ta(Ns.minDamping,Ns.maxDamping,l),t=Ta(Ns.minDuration,Ns.maxDuration,Di(t)),l<1?(i=h=>{const p=h*l,g=p*t,y=p-s,b=g0(h,l),S=Math.exp(-g);return Bv-y/b*S},a=h=>{const g=h*l*t,y=g*s+s,b=Math.pow(l,2)*Math.pow(h,2)*t,S=Math.exp(-g),N=g0(Math.pow(h,2),l);return(-i(h)+Bv>0?-1:1)*((y-b)*S)/N}):(i=h=>{const p=Math.exp(-h*t),g=(h-s)*t+1;return-Bv+p*g},a=h=>{const p=Math.exp(-h*t),g=(s-h)*(t*t);return p*g});const d=5/t,u=vV(i,a,d);if(t=Li(t),isNaN(u))return{stiffness:Ns.stiffness,damping:Ns.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const xV=12;function vV(t,e,s){let r=s;for(let i=1;i<xV;i++)r=r-t(r)/e(r);return r}function g0(t,e){return t*Math.sqrt(1-e*e)}const yV=["duration","bounce"],bV=["stiffness","damping","mass"];function tS(t,e){return e.some(s=>t[s]!==void 0)}function _V(t){let e={velocity:Ns.velocity,stiffness:Ns.stiffness,damping:Ns.damping,mass:Ns.mass,isResolvedFromDuration:!1,...t};if(!tS(t,bV)&&tS(t,yV))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*Ta(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ns.mass,stiffness:i,damping:a}}else{const s=gV(t);e={...e,...s,mass:Ns.mass},e.isResolvedFromDuration=!0}return e}function _b(t=Ns.visualDuration,e=Ns.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],d={done:!1,value:a},{stiffness:u,damping:h,mass:p,duration:g,velocity:y,isResolvedFromDuration:b}=_V({...s,velocity:-Di(s.velocity||0)}),S=y||0,N=h/(2*Math.sqrt(u*p)),T=l-a,M=Di(Math.sqrt(u/p)),L=Math.abs(T)<5;r||(r=L?Ns.restSpeed.granular:Ns.restSpeed.default),i||(i=L?Ns.restDelta.granular:Ns.restDelta.default);let k;if(N<1){const _=g0(M,N);k=P=>{const E=Math.exp(-N*M*P);return l-E*((S+N*M*T)/_*Math.sin(_*P)+T*Math.cos(_*P))}}else if(N===1)k=_=>l-Math.exp(-M*_)*(T+(S+M*T)*_);else{const _=M*Math.sqrt(N*N-1);k=P=>{const E=Math.exp(-N*M*P),w=Math.min(_*P,300);return l-E*((S+N*M*T)*Math.sinh(w)+_*T*Math.cosh(w))/_}}const v={calculatedDuration:b&&g||null,next:_=>{const P=k(_);if(b)d.done=_>=g;else{let E=0;N<1&&(E=_===0?Li(S):M5(k,_,P));const w=Math.abs(E)<=r,A=Math.abs(l-P)<=i;d.done=w&&A}return d.value=d.done?l:P,d},toString:()=>{const _=Math.min(cb(v),Rf),P=t5(E=>v.next(_*E).value,_,30);return _+"ms "+P}};return v}function sS({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},b=w=>d!==void 0&&w<d||u!==void 0&&w>u,S=w=>d===void 0?u:u===void 0||Math.abs(d-w)<Math.abs(u-w)?d:u;let N=s*e;const T=g+N,M=l===void 0?T:l(T);M!==T&&(N=M-g);const L=w=>-N*Math.exp(-w/r),k=w=>M+L(w),v=w=>{const A=L(w),B=k(w);y.done=Math.abs(A)<=h,y.value=y.done?M:B};let _,P;const E=w=>{b(y.value)&&(_=w,P=_b({keyframes:[y.value,S(y.value)],velocity:M5(k,w,y.value),damping:i,stiffness:a,restDelta:h,restSpeed:p}))};return E(0),{calculatedDuration:null,next:w=>{let A=!1;return!P&&_===void 0&&(A=!0,v(w),E(w)),_!==void 0&&w>=_?P.next(w-_):(!A&&v(w),y)}}}const wV=Vh(.42,0,1,1),jV=Vh(0,0,.58,1),F5=Vh(.42,0,.58,1),B5=t=>Array.isArray(t)&&typeof t[0]!="number",SV={linear:br,easeIn:wV,easeInOut:F5,easeOut:jV,circIn:fb,circInOut:v5,circOut:x5,backIn:mb,backInOut:f5,backOut:m5,anticipate:g5},nS=t=>{if(db(t)){L3(t.length===4);const[e,s,r,i]=t;return Vh(e,s,r,i)}else if(typeof t=="string")return SV[t];return t};function NV(t,e,s){const r=[],i=s||D5,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||br:e;d=Uh(u,d)}r.push(d)}return r}function $5(t,e,{clamp:s=!0,ease:r,mixer:i}={}){const a=t.length;if(L3(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=NV(e,r,i),u=d.length,h=p=>{if(l&&p<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=Pl(t[g],t[g+1],p);return d[g](y)};return s?p=>h(Ta(t[0],t[a-1],p)):h}function O5(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const i=Pl(0,e,r);t.push(ps(s,1,i))}}function V5(t){const e=[0];return O5(e,t.length-1),e}function kV(t,e){return t.map(s=>s*e)}function TV(t,e){return t.map(()=>e||F5).splice(0,t.length-1)}function Df({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const i=B5(r)?r.map(nS):nS(r),a={done:!1,value:e[0]},l=kV(s&&s.length===e.length?s:V5(e),t),d=$5(l,e,{ease:Array.isArray(i)?i:TV(e,i)});return{calculatedDuration:t,next:u=>(a.value=d(u),a.done=u>=t,a)}}const CV=t=>{const e=({timestamp:s})=>t(s);return{start:()=>ns.update(e,!0),stop:()=>ka(e),now:()=>ln.isProcessing?ln.timestamp:Fi.now()}},EV={decay:sS,inertia:sS,tween:Df,keyframes:Df,spring:_b},AV=t=>t/100;class wb extends P5{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:s,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||yb,d=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new l(a,d,s,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=Rg(s)?s:EV[s]||Df;let u,h;d!==Df&&typeof e[0]!="number"&&(u=Uh(AV,D5(e[0],e[1])),e=[0,100]);const p=d({...this.options,keyframes:e});a==="mirror"&&(h=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=cb(p));const{calculatedDuration:g}=p,y=g+i,b=y*(r+1)-i;return{generator:p,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:y,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:r}=this;if(!r){const{keyframes:w}=this.options;return{done:!0,value:w[w.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:u,calculatedDuration:h,totalDuration:p,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:y,repeat:b,repeatType:S,repeatDelay:N,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const M=this.currentTime-y*(this.speed>=0?1:-1),L=this.speed>=0?M<0:M>p;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let k=this.currentTime,v=a;if(b){const w=Math.min(this.currentTime,p)/g;let A=Math.floor(w),B=w%1;!B&&w>=1&&(B=1),B===1&&A--,A=Math.min(A,b+1),!!(A%2)&&(S==="reverse"?(B=1-B,N&&(B-=N/g)):S==="mirror"&&(v=l)),k=Ta(0,1,B)*g}const _=L?{done:!1,value:u[0]}:v.next(k);d&&(_.value=d(_.value));let{done:P}=_;!L&&h!==null&&(P=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return E&&i!==void 0&&(_.value=Lg(u,this.options,i)),T&&T(_.value),E&&this.finish(),_}get duration(){const{resolved:e}=this;return e?Di(e.calculatedDuration):0}get time(){return Di(this.currentTime)}set time(e){e=Li(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Di(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=CV,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const IV=new Set(["opacity","clipPath","filter","transform"]);function RV(t,e,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:u}={}){const h={[e]:s};u&&(h.offset=u);const p=n5(d,i);return Array.isArray(p)&&(h.easing=p),t.animate(h,{delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const PV=K1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Mf=10,LV=2e4;function DV(t){return Rg(t.type)||t.type==="spring"||!s5(t.ease)}function MV(t,e){const s=new wb({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<LV;)r=s.sample(a),i.push(r.value),a+=Mf;return{times:void 0,keyframes:i,duration:a-Mf,ease:"linear"}}const U5={anticipate:g5,backInOut:f5,circInOut:v5};function FV(t){return t in U5}class rS extends P5{constructor(e){super(e);const{name:s,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new R5(a,(l,d)=>this.onKeyframesResolved(l,d),s,r,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:u,startTime:h}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&Pf()&&FV(a)&&(a=U5[a]),DV(this.options)){const{onComplete:g,onUpdate:y,motionValue:b,element:S,...N}=this.options,T=MV(e,N);e=T.keyframes,e.length===1&&(e[1]=e[0]),r=T.duration,i=T.times,a=T.ease,l="keyframes"}const p=RV(d.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return p.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(Uj(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;d.set(Lg(e,this.options,s)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Di(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Di(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=Li(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return br;const{animation:r}=s;Uj(r,e)}return br}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:p,onComplete:g,element:y,...b}=this.options,S=new wb({...b,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),N=Li(this.time);h.setWithVelocity(S.sample(N-Mf).value,S.sample(N).value,Mf)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=s.owner.getProps();return PV()&&r&&IV.has(r)&&!u&&!h&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const BV={type:"spring",stiffness:500,damping:25,restSpeed:10},$V=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OV={type:"keyframes",duration:.8},VV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UV=(t,{keyframes:e})=>e.length>2?OV:Ol.has(t)?t.startsWith("scale")?$V(e[1]):BV:VV;function zV({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const jb=(t,e,s,r={},i,a)=>l=>{const d=lb(r,t)||{},u=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Li(u);let p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};zV(d)||(p={...p,...UV(t,p)}),p.duration&&(p.duration=Li(p.duration)),p.repeatDelay&&(p.repeatDelay=Li(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const y=Lg(p.keyframes,d);if(y!==void 0)return ns.update(()=>{p.onUpdate(y),p.onComplete()}),new e5([])}return!a&&rS.supports(p)?new rS(p):new wb(p)};function HV({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function Sb(t,e,{delay:s=0,transitionOverride:r,type:i}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...u}=e;r&&(l=r);const h=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||p&&HV(p,g))continue;const S={delay:s,...lb(l||{},g)};let N=!1;if(window.MotionHandoffAnimation){const M=d5(t);if(M){const L=window.MotionHandoffAnimation(M,g,ns);L!==null&&(S.startTime=L,N=!0)}}d0(t,g),y.start(jb(g,y,b,t.shouldReduceMotion&&l5.has(g)?{type:!1}:S,t,N));const T=y.animation;T&&h.push(T)}return d&&Promise.all(h).then(()=>{ns.update(()=>{d&&kO(t,d)})}),h}function x0(t,e,s={}){var r;const i=Ig(t,e,s.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const l=i?()=>Promise.all(Sb(t,i,s)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=a;return GV(t,e,p+h,g,y,s)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,p]=u==="beforeChildren"?[l,d]:[d,l];return h().then(()=>p())}else return Promise.all([l(),d(s.delay)])}function GV(t,e,s=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(WV).forEach((h,p)=>{h.notify("AnimationStart",e),l.push(x0(h,e,{...a,delay:s+u(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function WV(t,e){return t.sortNodePosition(e)}function qV(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>x0(t,a,s));r=Promise.all(i)}else if(typeof e=="string")r=x0(t,e,s);else{const i=typeof e=="function"?Ig(t,e,s.custom):e;r=Promise.all(Sb(t,i,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const KV=Y1.length;function z5(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?z5(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<KV;s++){const r=Y1[s],i=t.props[r];(fh(i)||i===!1)&&(e[r]=i)}return e}const QV=[...Q1].reverse(),YV=Q1.length;function XV(t){return e=>Promise.all(e.map(({animation:s,options:r})=>qV(t,s,r)))}function JV(t){let e=XV(t),s=iS(),r=!0;const i=u=>(h,p)=>{var g;const y=Ig(t,p,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:b,transitionEnd:S,...N}=y;h={...h,...N,...S}}return h};function a(u){e=u(t)}function l(u){const{props:h}=t,p=z5(t.parent)||{},g=[],y=new Set;let b={},S=1/0;for(let T=0;T<YV;T++){const M=QV[T],L=s[M],k=h[M]!==void 0?h[M]:p[M],v=fh(k),_=M===u?L.isActive:null;_===!1&&(S=T);let P=k===p[M]&&k!==h[M]&&v;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),L.protectedKeys={...b},!L.isActive&&_===null||!k&&!L.prevProp||Eg(k)||typeof k=="boolean")continue;const E=ZV(L.prevProp,k);let w=E||M===u&&L.isActive&&!P&&v||T>S&&v,A=!1;const B=Array.isArray(k)?k:[k];let D=B.reduce(i(M),{});_===!1&&(D={});const{prevResolvedValues:$={}}=L,F={...$,...D},z=q=>{w=!0,y.has(q)&&(A=!0,y.delete(q)),L.needsAnimating[q]=!0;const G=t.getValue(q);G&&(G.liveStyle=!1)};for(const q in F){const G=D[q],re=$[q];if(b.hasOwnProperty(q))continue;let se=!1;l0(G)&&l0(re)?se=!Z3(G,re):se=G!==re,se?G!=null?z(q):y.add(q):G!==void 0&&y.has(q)?z(q):L.protectedKeys[q]=!0}L.prevProp=k,L.prevResolvedValues=D,L.isActive&&(b={...b,...D}),r&&t.blockInitialAnimation&&(w=!1),w&&(!(P&&E)||A)&&g.push(...B.map(q=>({animation:q,options:{type:M}})))}if(y.size){const T={};y.forEach(M=>{const L=t.getBaseTarget(M),k=t.getValue(M);k&&(k.liveStyle=!0),T[M]=L!=null?L:null}),g.push({animation:T})}let N=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(g):Promise.resolve()}function d(u,h){var p;if(s[u].isActive===h)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(y=>{var b;return(b=y.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),s[u].isActive=h;const g=l(u);for(const y in s)s[y].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>s,reset:()=>{s=iS(),r=!0}}}function ZV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Z3(e,t):!1}function sl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iS(){return{animate:sl(!0),whileInView:sl(),whileHover:sl(),whileTap:sl(),whileDrag:sl(),whileFocus:sl(),exit:sl()}}class Ao{constructor(e){this.isMounted=!1,this.node=e}update(){}}class eU extends Ao{constructor(e){super(e),e.animationState||(e.animationState=JV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Eg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let tU=0;class sU extends Ao{constructor(){super(...arguments),this.id=tU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nU={animation:{Feature:eU},exit:{Feature:sU}};function vh(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function zh(t){return{point:{x:t.pageX,y:t.pageY}}}const rU=t=>e=>ub(e)&&t(e,zh(e));function Wu(t,e,s,r){return vh(t,e,rU(s),r)}const aS=(t,e)=>Math.abs(t-e);function iU(t,e){const s=aS(t.x,e.x),r=aS(t.y,e.y);return Math.sqrt(s**2+r**2)}class H5{constructor(e,s,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ov(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=iU(g.offset,{x:0,y:0})>=3;if(!y&&!b)return;const{point:S}=g,{timestamp:N}=ln;this.history.push({...S,timestamp:N});const{onStart:T,onMove:M}=this.handlers;y||(T&&T(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$v(y,this.transformPagePoint),ns.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Ov(g.type==="pointercancel"?this.lastMoveEventInfo:$v(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,T),S&&S(g,T)},!ub(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.contextWindow=i||window;const l=zh(e),d=$v(l,this.transformPagePoint),{point:u}=d,{timestamp:h}=ln;this.history=[{...u,timestamp:h}];const{onSessionStart:p}=s;p&&p(e,Ov(d,this.history)),this.removeListeners=Uh(Wu(this.contextWindow,"pointermove",this.handlePointerMove),Wu(this.contextWindow,"pointerup",this.handlePointerUp),Wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ka(this.updatePoint)}}function $v(t,e){return e?{point:e(t.point)}:t}function oS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ov({point:t},e){return{point:t,delta:oS(t,G5(e)),offset:oS(t,aU(e)),velocity:oU(e,.1)}}function aU(t){return t[0]}function G5(t){return t[t.length-1]}function oU(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const i=G5(t);for(;s>=0&&(r=t[s],!(i.timestamp-r.timestamp>Li(e)));)s--;if(!r)return{x:0,y:0};const a=Di(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const W5=1e-4,lU=1-W5,cU=1+W5,q5=.01,dU=0-q5,uU=0+q5;function wr(t){return t.max-t.min}function hU(t,e,s){return Math.abs(t-e)<=s}function lS(t,e,s,r=.5){t.origin=r,t.originPoint=ps(e.min,e.max,t.origin),t.scale=wr(s)/wr(e),t.translate=ps(s.min,s.max,t.origin)-t.originPoint,(t.scale>=lU&&t.scale<=cU||isNaN(t.scale))&&(t.scale=1),(t.translate>=dU&&t.translate<=uU||isNaN(t.translate))&&(t.translate=0)}function qu(t,e,s,r){lS(t.x,e.x,s.x,r?r.originX:void 0),lS(t.y,e.y,s.y,r?r.originY:void 0)}function cS(t,e,s){t.min=s.min+e.min,t.max=t.min+wr(e)}function pU(t,e,s){cS(t.x,e.x,s.x),cS(t.y,e.y,s.y)}function dS(t,e,s){t.min=e.min-s.min,t.max=t.min+wr(e)}function Ku(t,e,s){dS(t.x,e.x,s.x),dS(t.y,e.y,s.y)}function mU(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?ps(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?ps(s,t,r.max):Math.min(t,s)),t}function uS(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function fU(t,{top:e,left:s,bottom:r,right:i}){return{x:uS(t.x,s,i),y:uS(t.y,e,r)}}function hS(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function gU(t,e){return{x:hS(t.x,e.x),y:hS(t.y,e.y)}}function xU(t,e){let s=.5;const r=wr(t),i=wr(e);return i>r?s=Pl(e.min,e.max-r,t.min):r>i&&(s=Pl(t.min,t.max-i,e.min)),Ta(0,1,s)}function vU(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const v0=.35;function yU(t=v0){return t===!1?t=0:t===!0&&(t=v0),{x:pS(t,"left","right"),y:pS(t,"top","bottom")}}function pS(t,e,s){return{min:mS(t,e),max:mS(t,s)}}function mS(t,e){return typeof t=="number"?t:t[e]||0}const fS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oc=()=>({x:fS(),y:fS()}),gS=()=>({min:0,max:0}),Ss=()=>({x:gS(),y:gS()});function Mr(t){return[t("x"),t("y")]}function K5({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function bU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _U(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Vv(t){return t===void 0||t===1}function y0({scale:t,scaleX:e,scaleY:s}){return!Vv(t)||!Vv(e)||!Vv(s)}function ml(t){return y0(t)||Q5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Q5(t){return xS(t.x)||xS(t.y)}function xS(t){return t&&t!=="0%"}function Ff(t,e,s){const r=t-s,i=e*r;return s+i}function vS(t,e,s,r,i){return i!==void 0&&(t=Ff(t,i,r)),Ff(t,s,r)+e}function b0(t,e=0,s=1,r,i){t.min=vS(t.min,e,s,r,i),t.max=vS(t.max,e,s,r,i)}function Y5(t,{x:e,y:s}){b0(t.x,e.translate,e.scale,e.originPoint),b0(t.y,s.translate,s.scale,s.originPoint)}const yS=.999999999999,bS=1.0000000000001;function wU(t,e,s,r=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=s[d],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Uc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Y5(t,l)),r&&ml(a.latestValues)&&Uc(t,a.latestValues))}e.x<bS&&e.x>yS&&(e.x=1),e.y<bS&&e.y>yS&&(e.y=1)}function Vc(t,e){t.min=t.min+e,t.max=t.max+e}function _S(t,e,s,r,i=.5){const a=ps(t.min,t.max,i);b0(t,e,s,a,r)}function Uc(t,e){_S(t.x,e.x,e.scaleX,e.scale,e.originX),_S(t.y,e.y,e.scaleY,e.scale,e.originY)}function X5(t,e){return K5(_U(t.getBoundingClientRect(),e))}function jU(t,e,s){const r=X5(t,s),{scroll:i}=e;return i&&(Vc(r.x,i.offset.x),Vc(r.y,i.offset.y)),r}const J5=({current:t})=>t?t.ownerDocument.defaultView:null,SU=new WeakMap;class NU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ss(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(zh(p).point)},a=(p,g)=>{const{drag:y,dragPropagation:b,onDragStart:S}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_O(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mr(T=>{let M=this.getAxisMotionValue(T).get()||0;if(Mi.test(M)){const{projection:L}=this.visualElement;if(L&&L.layout){const k=L.layout.layoutBox[T];k&&(M=wr(k)*(parseFloat(M)/100))}}this.originPoint[T]=M}),S&&ns.postRender(()=>S(p,g)),d0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,g)=>{const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:S,onDrag:N}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=g;if(b&&this.currentDirection===null){this.currentDirection=kU(T),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,T),this.updateAxis("y",g.point,T),this.visualElement.render(),N&&N(p,g)},d=(p,g)=>this.stop(p,g),u=()=>Mr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new H5(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:J5(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ns.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:i}=this.getProps();if(!r||!bm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=mU(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&Bc(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=fU(i.layoutBox,s):this.constraints=!1,this.elastic=yU(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Mr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=vU(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Bc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=jU(r,i.root,this.visualElement.getTransformPagePoint());let l=gU(i.layout.layoutBox,a);if(s){const d=s(bU(l));this.hasMutatedConstraints=!!d,d&&(l=K5(d))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=Mr(p=>{if(!bm(p,s,this.currentDirection))return;let g=u&&u[p]||{};l&&(g={min:0,max:0});const y=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,S)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return d0(this.visualElement,e),r.start(jb(e,r,0,s,this.visualElement,!1))}stopAnimation(){Mr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mr(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Mr(s=>{const{drag:r}=this.getProps();if(!bm(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[s];a.set(e[s]-ps(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Bc(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();i[l]=xU({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Mr(l=>{if(!bm(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(ps(u,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;SU.set(this.visualElement,this);const e=this.visualElement.current,s=Wu(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Bc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ns.read(r);const l=vh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Mr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=u[p].translate,g.set(g.get()+u[p].translate))}),this.visualElement.render())}));return()=>{l(),s(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=v0,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function bm(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function kU(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class TU extends Ao{constructor(e){super(e),this.removeGroupControls=br,this.removeListeners=br,this.controls=new NU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||br}unmount(){this.removeGroupControls(),this.removeListeners()}}const wS=t=>(e,s)=>{t&&ns.postRender(()=>t(e,s))};class CU extends Ao{constructor(){super(...arguments),this.removePointerDownListener=br}onPointerDown(e){this.session=new H5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:J5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:wS(e),onStart:wS(s),onMove:r,onEnd:(a,l)=>{delete this.session,i&&ns.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Wu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(st.test(t))t=parseFloat(t);else return t;const s=jS(t,e.target.x),r=jS(t,e.target.y);return`${s}% ${r}%`}},EU={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,i=ko.parse(t);if(i.length>5)return r;const a=ko.createTransformer(t),l=typeof i[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;i[0+l]/=d,i[1+l]/=u;const h=ps(d,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}};class AU extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;tO(IU),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),nf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==s||s===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||ns.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),J1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Z5(t){const[e,s]=x$(),r=I.useContext(R3);return n.jsx(AU,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(O3),isPresent:e,safeToRemove:s})}const IU={borderRadius:{...xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xu,borderTopRightRadius:xu,borderBottomLeftRadius:xu,borderBottomRightRadius:xu,boxShadow:EU};function eE(t,e,s){const r=en(t)?t:cd(t);return r.start(jb("",r,e,s)),r.animation}function tE(t){return t instanceof SVGElement&&t.tagName!=="svg"}const RU=(t,e)=>t.depth-e.depth;class PU{constructor(){this.children=[],this.isDirty=!1}add(e){hb(this.children,e),this.isDirty=!0}remove(e){Pg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RU),this.isDirty=!1,this.children.forEach(e)}}function LU(t,e){const s=Fi.now(),r=({timestamp:i})=>{const a=i-s;a>=e&&(ka(r),t(a-e))};return ns.read(r,!0),()=>ka(r)}const sE=["TopLeft","TopRight","BottomLeft","BottomRight"],DU=sE.length,SS=t=>typeof t=="string"?parseFloat(t):t,NS=t=>typeof t=="number"||st.test(t);function MU(t,e,s,r,i,a){i?(t.opacity=ps(0,s.opacity!==void 0?s.opacity:1,FU(r)),t.opacityExit=ps(e.opacity!==void 0?e.opacity:1,0,BU(r))):a&&(t.opacity=ps(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let l=0;l<DU;l++){const d=`border${sE[l]}Radius`;let u=kS(e,d),h=kS(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||NS(u)===NS(h)?(t[d]=Math.max(ps(SS(u),SS(h),r),0),(Mi.test(h)||Mi.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=ps(e.rotate||0,s.rotate||0,r))}function kS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const FU=nE(0,.5,x5),BU=nE(.5,.95,br);function nE(t,e,s){return r=>r<t?0:r>e?1:s(Pl(t,e,r))}function TS(t,e){t.min=e.min,t.max=e.max}function Lr(t,e){TS(t.x,e.x),TS(t.y,e.y)}function CS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ES(t,e,s,r,i){return t-=e,t=Ff(t,1/s,r),i!==void 0&&(t=Ff(t,1/i,r)),t}function $U(t,e=0,s=1,r=.5,i,a=t,l=t){if(Mi.test(e)&&(e=parseFloat(e),e=ps(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=ps(a.min,a.max,r);t===a&&(d-=e),t.min=ES(t.min,e,s,d,i),t.max=ES(t.max,e,s,d,i)}function AS(t,e,[s,r,i],a,l){$U(t,e[s],e[r],e[i],e.scale,a,l)}const OU=["x","scaleX","originX"],VU=["y","scaleY","originY"];function IS(t,e,s,r){AS(t.x,e,OU,s?s.x:void 0,r?r.x:void 0),AS(t.y,e,VU,s?s.y:void 0,r?r.y:void 0)}function RS(t){return t.translate===0&&t.scale===1}function rE(t){return RS(t.x)&&RS(t.y)}function PS(t,e){return t.min===e.min&&t.max===e.max}function UU(t,e){return PS(t.x,e.x)&&PS(t.y,e.y)}function LS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iE(t,e){return LS(t.x,e.x)&&LS(t.y,e.y)}function DS(t){return wr(t.x)/wr(t.y)}function MS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zU{constructor(){this.members=[]}add(e){hb(this.members,e),e.scheduleRender()}remove(e){if(Pg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HU(t,e,s){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(s==null?void 0:s.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:y,skewX:b,skewY:S}=s;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),b&&(r+=`skewX(${b}deg) `),S&&(r+=`skewY(${S}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const fl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Pu=typeof window!="undefined"&&window.MotionDebug!==void 0,Uv=["","X","Y","Z"],GU={visibility:"hidden"},FS=1e3;let WU=0;function zv(t,e,s,r){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function aE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=d5(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ns,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&aE(r)}function oE({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=WU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pu&&(fl.totalNodes=fl.resolvedTargetDeltas=fl.recalculatedProjection=0),this.nodes.forEach(QU),this.nodes.forEach(ez),this.nodes.forEach(tz),this.nodes.forEach(YU),Pu&&window.MotionDebug.record(fl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new PU)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pb),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tE(l),this.instance=l;const{layoutId:u,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=LU(y,250),nf.hasAnimatedSinceResize&&(nf.hasAnimatedSinceResize=!1,this.nodes.forEach($S))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeTargetChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||az,{onLayoutAnimationStart:T,onLayoutAnimationComplete:M}=p.getProps(),L=!this.targetLayout||!iE(this.targetLayout,S)||b,k=!y&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||y&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,k);const v={...lb(N,"layout"),onPlay:T,onComplete:M};(p.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else y||$S(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ka(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sz),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BS);return}this.isUpdating||this.nodes.forEach(JU),this.isUpdating=!1,this.nodes.forEach(ZU),this.nodes.forEach(qU),this.nodes.forEach(KU),this.clearAllSnapshots();const d=Fi.now();ln.delta=Ta(0,1e3/60,d-ln.timestamp),ln.timestamp=d,ln.isProcessing=!0,Pv.update.process(ln),Pv.preRender.process(ln),Pv.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,J1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XU),this.sharedNodes.forEach(nz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ns.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ns.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ss(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!rE(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&(d||ml(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),oz(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Ss();const u=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(lz))){const{scroll:p}=this.root;p&&(Vc(u.x,p.offset.x),Vc(u.y,p.offset.y))}return u}removeElementScroll(l){var d;const u=Ss();if(Lr(u,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Lr(u,l),Vc(u.x,g.offset.x),Vc(u.y,g.offset.y))}return u}applyTransform(l,d=!1){const u=Ss();Lr(u,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Uc(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ml(p.latestValues)&&Uc(u,p.latestValues)}return ml(this.latestValues)&&Uc(u,this.latestValues),u}removeTransform(l){const d=Ss();Lr(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!ml(h.latestValues))continue;y0(h.latestValues)&&h.updateSnapshot();const p=Ss(),g=h.measurePageBox();Lr(p,g),IS(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return ml(this.latestValues)&&IS(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ss(),this.relativeTargetOrigin=Ss(),Ku(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ss(),this.targetWithTransforms=Ss()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),Y5(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ss(),this.relativeTargetOrigin=Ss(),Ku(this.relativeTargetOrigin,this.target,b.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pu&&fl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||y0(this.parent.latestValues)||Q5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),u=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(h=!1),h)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Lr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;wU(this.layoutCorrected,this.treeScale,this.path,u),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Ss());const{target:S}=d;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(CS(this.prevProjectionDelta.x,this.projectionDelta.x),CS(this.prevProjectionDelta.y,this.projectionDelta.y)),qu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==b||!MS(this.projectionDelta.x,this.prevProjectionDelta.x)||!MS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Pu&&fl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oc(),this.projectionDelta=Oc(),this.projectionDeltaWithTransform=Oc()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},g=Oc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=Ss(),b=u?u.source:void 0,S=this.layout?this.layout.source:void 0,N=b!==S,T=this.getStack(),M=!T||T.members.length<=1,L=!!(N&&!M&&this.options.crossfade===!0&&!this.path.some(iz));this.animationProgress=0;let k;this.mixTargetDelta=v=>{const _=v/1e3;OS(g.x,l.x,_),OS(g.y,l.y,_),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ku(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rz(this.relativeTarget,this.relativeTargetOrigin,y,_),k&&UU(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Ss()),Lr(k,this.relativeTarget)),N&&(this.animationValues=p,MU(p,h,this.latestValues,_,L,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ka(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ns.update(()=>{nf.hasAnimatedSinceResize=!0,this.currentAnimation=eE(0,FS,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:p}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&lE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Ss();const g=wr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const y=wr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+y}Lr(d,u),Uc(d,p),qu(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new zU),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&zv("z",l,h,this.animationValues);for(let p=0;p<Uv.length;p++)zv(`rotate${Uv[p]}`,l,h,this.animationValues),zv(`skew${Uv[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}getProjectionStyles(l){var d,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return GU;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=tf(l==null?void 0:l.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=tf(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ml(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=HU(this.projectionDeltaWithTransform,this.treeScale,y),p&&(h.transform=p(y,h.transform));const{x:b,y:S}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(d=y.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const N in If){if(y[N]===void 0)continue;const{correct:T,applyTo:M}=If[N],L=h.transform==="none"?y[N]:T(y[N],g);if(M){const k=M.length;for(let v=0;v<k;v++)h[M[v]]=L}else h[N]=L}return this.options.layoutId&&(h.pointerEvents=g===this?tf(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(BS),this.root.sharedNodes.clear()}}}function qU(t){t.updateLayout()}function KU(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=s.source!==t.layout.source;a==="size"?Mr(g=>{const y=l?s.measuredBox[g]:s.layoutBox[g],b=wr(y);y.min=r[g].min,y.max=y.min+b}):lE(a,s.layoutBox,r)&&Mr(g=>{const y=l?s.measuredBox[g]:s.layoutBox[g],b=wr(r[g]);y.max=y.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const d=Oc();qu(d,r,s.layoutBox);const u=Oc();l?qu(u,t.applyTransform(i,!0),s.measuredBox):qu(u,r,s.layoutBox);const h=!rE(d);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:b}=g;if(y&&b){const S=Ss();Ku(S,s.layoutBox,y.layoutBox);const N=Ss();Ku(N,r,b.layoutBox),iE(S,N)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:u,layoutDelta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function QU(t){Pu&&fl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XU(t){t.clearSnapshot()}function BS(t){t.clearMeasurements()}function JU(t){t.isLayoutDirty=!1}function ZU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $S(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ez(t){t.resolveTargetDelta()}function tz(t){t.calcProjection()}function sz(t){t.resetSkewAndRotation()}function nz(t){t.removeLeadSnapshot()}function OS(t,e,s){t.translate=ps(e.translate,0,s),t.scale=ps(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function VS(t,e,s,r){t.min=ps(e.min,s.min,r),t.max=ps(e.max,s.max,r)}function rz(t,e,s,r){VS(t.x,e.x,s.x,r),VS(t.y,e.y,s.y,r)}function iz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const az={duration:.45,ease:[.4,0,.1,1]},US=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zS=US("applewebkit/")&&!US("chrome/")?Math.round:br;function HS(t){t.min=zS(t.min),t.max=zS(t.max)}function oz(t){HS(t.x),HS(t.y)}function lE(t,e,s){return t==="position"||t==="preserve-aspect"&&!hU(DS(e),DS(s),.2)}function lz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const cz=oE({attachResizeListener:(t,e)=>vh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hv={current:void 0},cE=oE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hv.current){const t=new cz({});t.mount(window),t.setOptions({layoutScroll:!0}),Hv.current=t}return Hv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dz={pan:{Feature:CU},drag:{Feature:TU,ProjectionNode:cE,MeasureLayout:Z5}};function GS(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&ns.postRender(()=>a(e,zh(e)))}class uz extends Ao{mount(){const{current:e}=this.node;e&&(this.unmount=gO(e,s=>(GS(this.node,s,"Start"),r=>GS(this.node,r,"End"))))}unmount(){}}class hz extends Ao{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(s){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uh(vh(this.node.current,"focus",()=>this.onFocus()),vh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function WS(t,e,s){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&ns.postRender(()=>a(e,zh(e)))}class pz extends Ao{mount(){const{current:e}=this.node;e&&(this.unmount=bO(e,s=>(WS(this.node,s,"Start"),(r,{success:i})=>WS(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _0=new WeakMap,Gv=new WeakMap,mz=t=>{const e=_0.get(t.target);e&&e(t)},fz=t=>{t.forEach(mz)};function gz({root:t,...e}){const s=t||document;Gv.has(s)||Gv.set(s,{});const r=Gv.get(s),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(fz,{root:t,...e})),r[i]}function xz(t,e,s){const r=gz(e);return _0.set(t,s),r.observe(t),()=>{_0.delete(t),r.unobserve(t)}}const vz={some:0,all:1};class yz extends Ao{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:vz[i]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=h?p:g;y&&y(u)};return xz(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(bz(e,s))&&this.startObserver()}unmount(){}}function bz({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const _z={inView:{Feature:yz},tap:{Feature:pz},focus:{Feature:hz},hover:{Feature:uz}},wz={layout:{ProjectionNode:cE,MeasureLayout:Z5}},Bf={current:null},Nb={current:!1};function dE(){if(Nb.current=!0,!!q1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bf.current=t.matches;t.addListener(e),e()}else Bf.current=!1}const jz=[...I5,kn,ko],Sz=t=>jz.find(A5(t)),ud=new WeakMap;function Nz(t,e,s){for(const r in e){const i=e[r],a=s[r];if(en(i))t.addValue(r,i);else if(en(a))t.addValue(r,cd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,cd(l!==void 0?l:i,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const qS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uE{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Fi.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ns.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:p}=l;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=Ag(s),this.isVariantNode=B3(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(s,{},this);for(const b in y){const S=y[b];u[b]!==void 0&&en(S)&&S.set(u[b],!1)}}mount(e){this.current=e,ud.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Nb.current||dE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ud.delete(this.current),this.projection&&this.projection.unmount(),ka(this.notifyUpdate),ka(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ol.has(e),i=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&ns.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ld){const s=ld[e];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ss()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<qS.length;r++){const i=qS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=Nz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=cd(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(C5(i)||y5(i))?i=parseFloat(i):!Sz(i)&&ko.test(s)&&(i=N5(e,s)),this.setBaseTarget(e,en(i)?i.get():i)),en(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=eb(this.props,r,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!en(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new pb),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class hE extends uE{constructor(){super(...arguments),this.KeyframeResolver=R5}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;en(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function kz(t){return window.getComputedStyle(t)}class pE extends hE{constructor(){super(...arguments),this.type="html",this.renderInstance=q3}readValueFromInstance(e,s){if(Ol.has(s)){const r=vb(s);return r&&r.default||0}else{const r=kz(e),i=(H3(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return X5(e,s)}build(e,s,r){nb(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return ob(e,s,r)}}class mE extends hE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ss}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ol.has(s)){const r=vb(s);return r&&r.default||0}return s=K3.has(s)?s:X1(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return X3(e,s,r)}build(e,s,r){rb(e,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,r,i){Q3(e,s,r,i)}mount(e){this.isSVGTag=ab(e.tagName),super.mount(e)}}const Tz=(t,e)=>Z1(t)?new mE(e):new pE(e,{allowProjection:t!==I.Fragment}),Cz=dO({...nU,..._z,...dz,...wz},Tz),fE=N$(Cz);function Lu(t){const e=H1(()=>cd(t)),{isStatic:s}=I.useContext(W1);if(s){const[,r]=I.useState(t);I.useEffect(()=>e.on("change",r),[])}return e}function gE(t,e){const s=Lu(e()),r=()=>s.set(e());return r(),P3(()=>{const i=()=>ns.preRender(r,!1,!0),a=t.map(l=>l.on("change",i));return()=>{a.forEach(l=>l()),ka(r)}}),s}const Ez=t=>t&&typeof t=="object"&&t.mix,Az=t=>Ez(t)?t.mix:void 0;function Iz(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],i=t[1+s],a=t[2+s],l=t[3+s],d=$5(i,a,{mixer:Az(a[0]),...l});return e?d(r):d}function Rz(t){Hu.current=[],t();const e=gE(Hu.current,t);return Hu.current=void 0,e}function _m(t,e,s,r){if(typeof t=="function")return Rz(t);const i=typeof e=="function"?e:Iz(e,s,r);return Array.isArray(t)?KS(t,i):KS([t],([a])=>i(a))}function KS(t,e){const s=H1(()=>[]);return gE(t,()=>{s.length=0;const r=t.length;for(let i=0;i<r;i++)s[i]=t[i].get();return e(s)})}function xE(){!Nb.current&&dE();const[t]=I.useState(Bf.current);return t}const Pz=(t,e,s)=>{const r=e-t;return((s-t)%r+r)%r+t};function vE(t,e){return B5(t)?t[Pz(0,t.length,e)]:t}function kb(t){return typeof t=="object"&&!Array.isArray(t)}function yE(t,e,s,r){return typeof t=="string"&&kb(e)?i5(t,s,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Lz(t,e,s){return t*(e+1)}function QS(t,e,s,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?s:(i=r.get(e))!==null&&i!==void 0?i:t}function Dz(t,e,s){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<s&&(Pg(t,i),r--)}}function Mz(t,e,s,r,i,a){Dz(t,i,a);for(let l=0;l<e.length;l++)t.push({value:e[l],at:ps(i,a,r[l]),easing:vE(s,l)})}function Fz(t,e){for(let s=0;s<t.length;s++)t[s]=t[s]/(e+1)}function Bz(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const $z="easeInOut";function Oz(t,{defaultTransition:e={},...s}={},r,i){const a=e.duration||.3,l=new Map,d=new Map,u={},h=new Map;let p=0,g=0,y=0;for(let b=0;b<t.length;b++){const S=t[b];if(typeof S=="string"){h.set(S,g);continue}else if(!Array.isArray(S)){h.set(S.name,QS(g,S.at,p,h));continue}let[N,T,M={}]=S;M.at!==void 0&&(g=QS(g,M.at,p,h));let L=0;const k=(v,_,P,E=0,w=0)=>{const A=Vz(v),{delay:B=0,times:D=V5(A),type:$="keyframes",repeat:F,repeatType:z,repeatDelay:H=0,...K}=_;let{ease:q=e.ease||"easeOut",duration:G}=_;const re=typeof B=="function"?B(E,w):B,se=A.length,U=Rg($)?$:i==null?void 0:i[$];if(se<=2&&U){let pe=100;if(se===2&&Hz(A)){const ve=A[1]-A[0];pe=Math.abs(ve)}const ge={...K};G!==void 0&&(ge.duration=Li(G));const he=pO(ge,pe,U);q=he.ease,G=he.duration}G!=null||(G=a);const Y=g+re;D.length===1&&D[0]===0&&(D[1]=1);const ie=D.length-A.length;if(ie>0&&O5(D,ie),A.length===1&&A.unshift(null),F){G=Lz(G,F);const pe=[...A],ge=[...D];q=Array.isArray(q)?[...q]:[q];const he=[...q];for(let ve=0;ve<F;ve++){A.push(...pe);for(let _e=0;_e<pe.length;_e++)D.push(ge[_e]+(ve+1)),q.push(_e===0?"linear":vE(he,_e-1))}Fz(D,F)}const X=Y+G;Mz(P,A,q,D,Y,X),L=Math.max(re+G,L),y=Math.max(X,y)};if(en(N)){const v=YS(N,d);k(T,M,XS("default",v))}else{const v=yE(N,T,r,u),_=v.length;for(let P=0;P<_;P++){T=T,M=M;const E=v[P],w=YS(E,d);for(const A in T)k(T[A],Uz(M,A),XS(A,w),P,_)}}p=g,g+=L}return d.forEach((b,S)=>{for(const N in b){const T=b[N];T.sort(Bz);const M=[],L=[],k=[];for(let _=0;_<T.length;_++){const{at:P,value:E,easing:w}=T[_];M.push(E),L.push(Pl(0,y,P)),k.push(w||"easeOut")}L[0]!==0&&(L.unshift(0),M.unshift(M[0]),k.unshift($z)),L[L.length-1]!==1&&(L.push(1),M.push(null)),l.has(S)||l.set(S,{keyframes:{},transition:{}});const v=l.get(S);v.keyframes[N]=M,v.transition[N]={...e,duration:y,ease:k,times:L,...s}}}),l}function YS(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function XS(t,e){return e[t]||(e[t]=[]),e[t]}function Vz(t){return Array.isArray(t)?t:[t]}function Uz(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const zz=t=>typeof t=="number",Hz=t=>t.every(zz);function Gz(t,e){return t in e}class Wz extends uE{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,s){if(Gz(s,e)){const r=e[s];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,s){delete s.output[e]}measureInstanceViewportBox(){return Ss()}build(e,s){Object.assign(e.output,s)}renderInstance(e,{output:s}){Object.assign(e,s)}sortInstanceNodePosition(){return 0}}function qz(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=tE(t)?new mE(e):new pE(e);s.mount(t),ud.set(t,s)}function Kz(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},s=new Wz(e);s.mount(t),ud.set(t,s)}function Qz(t,e){return en(t)||typeof t=="number"||typeof t=="string"&&!kb(e)}function bE(t,e,s,r){const i=[];if(Qz(t,e))i.push(eE(t,kb(e)&&e.default||e,s&&(s.default||s)));else{const a=yE(t,e,r),l=a.length;for(let d=0;d<l;d++){const u=a[d],h=u instanceof Element?qz:Kz;ud.has(u)||h(u);const p=ud.get(u),g={...s};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(d,l)),i.push(...Sb(p,{...e,transition:g},{}))}}return i}function Yz(t,e,s){const r=[];return Oz(t,e,s,{spring:_b}).forEach(({keyframes:a,transition:l},d)=>{r.push(...bE(d,a,l))}),r}function Xz(t){return Array.isArray(t)&&t.some(Array.isArray)}function Jz(t){function e(s,r,i){let a=[];return Xz(s)?a=Yz(s,r,t):a=bE(s,r,i,t),new e5(a)}return e}const wm=Jz(),fa={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function Zz(){return n.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+fa.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function eH(){return n.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[n.jsxs("defs",{children:[n.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:fa.icon,stopOpacity:"0.42"}),n.jsx("stop",{offset:"70%",stopColor:fa.icon,stopOpacity:"0"})]}),n.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:fa.icon,stopOpacity:"0.20"}),n.jsx("stop",{offset:"70%",stopColor:fa.icon,stopOpacity:"0"})]})]}),n.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),n.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function JS({rounded:t="rounded-3xl",padded:e=!0,children:s}){const r=xE();return n.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:fa.border,background:"var(--nav, "+fa.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[n.jsx(Zz,{}),n.jsx(fE.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),n.jsx(eH,{}),n.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:s})]})}const Wv={borderColor:"#2B4C73",background:"#1A2F4A"},jm={borderColor:"#2B4C73",background:"#152A42"};function wt({hex:t,title:e,subtitle:s,actions:r,subheader:i,left:a,right:l,children:d,rounded:u="rounded-3xl",padded:h=!0,centerFramed:p=!1,leftWidth:g=0,rightWidth:y=0,stickyRails:b=!0,mode:S="card",outerPadding:N="px-4 py-3",leftPlacement:T="inside",stickyTopbar:M=!0,stickySubheader:L=!0,shellViewportOffset:k="var(--app-topbar-h,72px)",topbarHeight:v=56}){const _={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof y=="number"?`${y}px`:y},P=n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:Wv,children:t}),(e||s||r)&&n.jsxs("div",{className:[M?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:Wv,children:[n.jsxs("div",{className:"min-w-0",children:[e&&n.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),s&&n.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:s})]}),r?n.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&n.jsx("div",{className:[L?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...L?{top:M?`${v}px`:0}:{},...Wv},children:i})]}),E=S==="card"?({children:A})=>n.jsx(JS,{rounded:u,padded:h,children:A}):({children:A})=>n.jsx("div",{className:`w-full ${N}`,children:A}),w=n.jsx("div",{className:"relative min-h-0 h-full",style:_,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...jm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),p?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:jm,children:d}):n.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:d}),l?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...jm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:l}):y?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"})]})});return T==="bleed"&&S==="card"?n.jsx("div",{className:`w-full ${N}`,children:n.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[P,n.jsx("div",{className:"flex-1 min-h-0",style:_,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...jm,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),n.jsx(JS,{rounded:u,padded:h,children:n.jsx("div",{className:"flex-1 min-h-0 h-full",children:w})})]})})]})}):n.jsx(E,{children:n.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${k})`},children:[P,n.jsx("div",{className:"flex-1 min-h-0",children:w})]})})}const tH="_row_x5rfq_3",sH="_colFull_x5rfq_17",nH="_colCommunity_x5rfq_31",rH="_colGuides_x5rfq_33",iH="_card_x5rfq_129",aH="_header_x5rfq_143",oH="_title_x5rfq_155",lH="_subtitle_x5rfq_157",cH="_empty_x5rfq_159",dH="_errorNote_x5rfq_161",uH="_linkBtn_x5rfq_163",hH="_primaryBtn_x5rfq_163",pH="_navBtn_x5rfq_163",mH="_closeBtn_x5rfq_163",fH="_actionsRight_x5rfq_179",gH="_tileGrid_x5rfq_185",xH="_tile_x5rfq_185",vH="_tileIcon_x5rfq_211",yH="_tileIconFallback_x5rfq_213",bH="_tileLabel_x5rfq_215",_H="_newsList_x5rfq_221",wH="_newsItem_x5rfq_223",jH="_newsMeta_x5rfq_225",SH="_newsAuthor_x5rfq_227",NH="_newsTime_x5rfq_229",kH="_newsText_x5rfq_231",TH="_newsImage_x5rfq_233",CH="_carouselCtrls_x5rfq_241",EH="_carousel_x5rfq_241",AH="_slide_x5rfq_249",IH="_slideActive_x5rfq_251",RH="_slideInactive_x5rfq_253",PH="_slideThumb_x5rfq_255",LH="_slideFallback_x5rfq_257",DH="_slideCaption_x5rfq_259",MH="_liveCard_x5rfq_265",FH="_liveAvatar_x5rfq_267",BH="_liveAvatarFallback_x5rfq_269",$H="_liveInfo_x5rfq_271",OH="_liveName_x5rfq_273",VH="_liveMeta_x5rfq_275",UH="_liveBadge_x5rfq_277",zH="_liveViewers_x5rfq_279",HH="_modalOverlay_x5rfq_285",GH="_modal_x5rfq_285",WH="_modalHeader_x5rfq_289",qH="_modalTitle_x5rfq_291",KH="_modalFilters_x5rfq_295",QH="_formRow_x5rfq_297",YH="_formRowCheckbox_x5rfq_299",XH="_select_x5rfq_301",JH="_input_x5rfq_301",ZH="_tableWrap_x5rfq_303",eG="_table_x5rfq_303",$e={row:tH,colFull:sH,colCommunity:nH,colGuides:rH,card:iH,header:aH,title:oH,subtitle:lH,empty:cH,errorNote:dH,linkBtn:uH,primaryBtn:hH,navBtn:pH,closeBtn:mH,actionsRight:fH,tileGrid:gH,tile:xH,tileIcon:vH,tileIconFallback:yH,tileLabel:bH,newsList:_H,newsItem:wH,newsMeta:jH,newsAuthor:SH,newsTime:NH,newsText:kH,newsImage:TH,carouselCtrls:CH,carousel:EH,slide:AH,slideActive:IH,slideInactive:RH,slideThumb:PH,slideFallback:LH,slideCaption:DH,liveCard:MH,liveAvatar:FH,liveAvatarFallback:BH,liveInfo:$H,liveName:OH,liveMeta:VH,liveBadge:UH,liveViewers:zH,modalOverlay:HH,modal:GH,modalHeader:WH,modalTitle:qH,modalFilters:KH,formRow:QH,formRowCheckbox:YH,select:XH,input:JH,tableWrap:ZH,table:eG},tG=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"];async function _E(){const t=[];for(const s of tG)try{const i=await(await fetch(s,{cache:"no-store"})).text(),a=sG(i);t.push(...a)}catch(r){}const e=new Map;for(const s of t){const r=String(s["Creator Name"]||s.creator_name||s.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,s)}return Array.from(e.values())}function ZS(t){const e=[];let s="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(s+='"',i++):r=!r:a===","&&!r?(e.push(s),s=""):s+=a}return e.push(s),e}function sG(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const s=ZS(e[0]);return e.slice(1).map(r=>{const i=ZS(r),a={};return s.forEach((l,d)=>{var u;return a[l.trim()]=((u=i[d])!=null?u:"").trim()}),a})}function nG(t){try{const e=Date.now(),s=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-s),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}catch(e){return""}}function rG(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const s=e.pathname.toLowerCase();if(s.startsWith("/shorts/"))return s.split("/")[2]||null}}catch(e){}return null}const iG=[{to:"/toplists/",label:"Toplists"},{to:"/guidehub/?tab=calculators",label:"GuideHub"},{to:"/players/",label:"Players"},{to:"/guilds/",label:"Guilds"},{to:"/community/",label:"Community"},{to:"/magazine/historybook/",label:"Historybook"},{to:"/creator-hub/",label:"Creator Hub"},{to:"/help",label:"Help"},{to:"/settings/",label:"Settings"}],eN={},aG=()=>n.jsxs("section",{className:$e.card,"data-i18n-scope":"home.tiles",children:[n.jsxs("header",{className:$e.header,children:[n.jsx("span",{className:$e.title,"data-i18n":"home.title",children:"Home"}),n.jsx("span",{className:$e.subtitle,"data-i18n":"home.subtitle",children:"Welcome back"})]}),n.jsx("div",{className:$e.tileGrid,role:"list",children:iG.map(t=>n.jsxs(qt,{to:t.to,role:"listitem",className:$e.tile,"aria-label":t.label,children:[eN[t.to]?n.jsx("img",{src:eN[t.to],alt:"",className:$e.tileIcon}):n.jsx("div",{className:$e.tileIconFallback,"aria-hidden":!0,children:t.label.slice(0,2).toUpperCase()}),n.jsx("div",{className:$e.tileLabel,"data-i18n":`nav.${t.label.toLowerCase()}`,children:t.label})]},t.to))})]}),oG=()=>{const[t,e]=I.useState(null),[s,r]=I.useState(null);I.useEffect(()=>{async function a(){{e([]);return}}return a(),()=>{}},[]);const i=!t||t.length===0;return n.jsxs("section",{className:$e.card,"data-i18n-scope":"home.news","aria-busy":t==null,children:[n.jsx("header",{className:$e.header,children:n.jsx("span",{className:$e.title,"data-i18n":"home.news.title",children:"Community news"})}),n.jsxs("div",{className:$e.newsList,children:[t==null?void 0:t.map(a=>{var l;return n.jsxs("article",{className:$e.newsItem,children:[n.jsxs("div",{className:$e.newsMeta,children:[n.jsx("span",{className:$e.newsAuthor,children:a.author||"Discord"}),n.jsx("span",{className:$e.newsTime,children:nG(a.timestamp)})]}),n.jsx("p",{className:$e.newsText,children:a.text}),a.image&&n.jsx("img",{src:a.image,alt:"",className:$e.newsImage}),a.url&&n.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",className:$e.linkBtn,"data-i18n":"home.news.open_on_discord",children:"Auf Discord ffnen"})]},(l=a.id)!=null?l:`${a.author}-${a.timestamp}`)}),i&&n.jsx("div",{className:$e.empty,"data-i18n":"home.news.empty",children:"No news yet"})]}),s&&n.jsx("div",{className:$e.errorNote,"aria-live":"polite",children:s})]})},lG=()=>{const[t,e]=I.useState([]),[s,r]=I.useState(0),i=I.useRef(null);I.useEffect(()=>{let u=!0;async function h(){try{const g=(await _E()).map(y=>{const b=String(y["Creator Name"]||y.creator_name||y.name||"").trim(),S=String(y["YouTube Link"]||y.youtube||y.YouTube||"").trim();if(!S)return null;const N=rG(S),T=N?`https://i.ytimg.com/vi/${N}/hqdefault.jpg`:void 0;return{title:b,url:S,thumb:T}}).filter(Boolean).slice(0,12);u&&e(g)}catch(p){u&&e([])}}return h(),()=>{u=!1}},[]),I.useEffect(()=>{if(!(t.length<=1))return i.current=window.setInterval(()=>r(u=>(u+1)%t.length),6e3),()=>{i.current&&window.clearInterval(i.current)}},[t]);const a=()=>r(u=>(u-1+t.length)%Math.max(t.length,1)),l=()=>r(u=>(u+1)%Math.max(t.length,1)),d=u=>{u.key==="ArrowLeft"&&(u.preventDefault(),a()),u.key==="ArrowRight"&&(u.preventDefault(),l())};return n.jsxs("section",{className:$e.card,"data-i18n-scope":"home.youtube",children:[n.jsxs("header",{className:$e.header,children:[n.jsx("span",{className:$e.title,"data-i18n":"home.youtube.title",children:"YouTube"}),n.jsxs("div",{className:$e.carouselCtrls,children:[n.jsx("button",{className:$e.navBtn,onClick:a,"aria-label":"Prev",children:""}),n.jsx("button",{className:$e.navBtn,onClick:l,"aria-label":"Next",children:""})]})]}),n.jsx("div",{className:$e.carousel,tabIndex:0,onKeyDown:d,"aria-roledescription":"carousel",children:t.length===0?n.jsx("div",{className:$e.empty,children:"No videos"}):t.map((u,h)=>n.jsxs("a",{href:u.url,target:"_blank",rel:"noreferrer",className:[$e.slide,h===s?$e.slideActive:$e.slideInactive].join(" "),children:[u.thumb?n.jsx("img",{src:u.thumb,alt:"",className:$e.slideThumb}):n.jsx("div",{className:$e.slideFallback,children:u.title.slice(0,2).toUpperCase()}),n.jsx("div",{className:$e.slideCaption,children:u.title})]},u.url))})]})},cG=({onOpenSchedule:t})=>{var p;const[e,s]=I.useState(null),[r,i]=I.useState(new Map),[a,l]=I.useState(0),d=I.useRef(null);if(I.useEffect(()=>{async function g(){{s([]);return}}return g(),()=>{}},[]),I.useEffect(()=>{let g=!0;async function y(){try{const b=await _E(),S=new Map;for(const N of b){const T=String(N["Creator Name"]||N.creator_name||N.name||"").trim(),M=String(N["Twitch Link"]||N.twitch||N.Twitch||"").trim();if(!T||!M)continue;const L=(()=>{try{return new URL(M).pathname.replace(/^\//,"").toLowerCase()}catch(k){return M.toLowerCase()}})();L&&S.set(L,M),S.set(T.toLowerCase(),M)}g&&i(S)}catch(b){g&&i(new Map)}}return y(),()=>{g=!1}},[]),I.useEffect(()=>{if(!(!e||e.length<=1))return d.current=window.setInterval(()=>l(g=>(g+1)%e.length),8e3),()=>{d.current&&window.clearInterval(d.current)}},[e]),!e||e.length===0)return n.jsxs("section",{className:$e.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:$e.header,children:n.jsx("span",{className:$e.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsx("div",{className:$e.empty,"data-i18n":"home.live.none",children:"Nobody is live right now."}),n.jsx("div",{className:$e.actionsRight,children:n.jsx("button",{className:$e.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:"Streaming-Plan anzeigen"})})]});const u=e[a],h=(()=>{const g=((u==null?void 0:u.name)||"").toLowerCase();if(u!=null&&u.url)return u.url;if(g)return r.has(g)?r.get(g):r.has(g.replace(/^@/,""))?r.get(g.replace(/^@/,"")):`https://www.twitch.tv/${g}`})();return n.jsxs("section",{className:$e.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:$e.header,children:n.jsx("span",{className:$e.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsxs("div",{className:$e.liveCard,children:[u!=null&&u.avatar?n.jsx("img",{src:u.avatar,alt:"",className:$e.liveAvatar}):n.jsx("div",{className:$e.liveAvatarFallback,"aria-hidden":!0,children:(p=u==null?void 0:u.name)==null?void 0:p.slice(0,2).toUpperCase()}),n.jsxs("div",{className:$e.liveInfo,children:[n.jsx("div",{className:$e.liveName,children:u==null?void 0:u.name}),n.jsxs("div",{className:$e.liveMeta,children:[n.jsx("span",{className:$e.liveBadge,children:"LIVE"}),typeof(u==null?void 0:u.viewers)=="number"&&n.jsxs("span",{className:$e.liveViewers,children:[u.viewers.toLocaleString()," viewers"]})]})]}),h&&n.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:$e.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:"Auf Twitch ffnen"})]}),n.jsxs("div",{className:$e.carouselCtrls,children:[n.jsx("button",{className:$e.navBtn,onClick:()=>l(g=>(g-1+e.length)%e.length),"aria-label":"Prev",children:""}),n.jsx("button",{className:$e.navBtn,onClick:()=>l(g=>(g+1)%e.length),"aria-label":"Next",children:""})]})]})},dG=({open:t,onClose:e})=>{var b;const[s,r]=I.useState(null),[i,a]=I.useState("All"),[l,d]=I.useState(""),[u,h]=I.useState(!1);if(I.useEffect(()=>{if(!t)return;async function S(){{r([]);return}}return S(),()=>{}},[t]),I.useEffect(()=>{const S=N=>{N.key==="Escape"&&e()};return t&&window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[t,e]),!t)return null;const p=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),g=(s||[]).filter(S=>{if(i!=="All"&&S.platform.toLowerCase()!==i.toLowerCase()||u&&S.weekday&&S.weekday.toLowerCase()!==p.toLowerCase())return!1;if(l){const N=l.toLowerCase();if(!`${S.streamer} ${S.title}`.toLowerCase().includes(N))return!1}return!0}),y=((b=s==null?void 0:s.length)!=null?b:0)===0;return n.jsx("div",{className:$e.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:n.jsxs("div",{className:$e.modal,children:[n.jsxs("header",{className:$e.modalHeader,children:[n.jsx("h2",{id:"schedule-title",className:$e.modalTitle,"data-i18n":"home.schedule.title",children:"Streaming-Plan"}),n.jsx("button",{className:$e.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:"Schlieen"})]}),n.jsxs("div",{className:$e.modalFilters,children:[n.jsxs("label",{className:$e.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.platform",children:"Platform"}),n.jsxs("select",{value:i,onChange:S=>a(S.target.value),className:$e.select,children:[n.jsx("option",{value:"All",children:"All"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"YouTube",children:"YouTube"})]})]}),n.jsxs("label",{className:$e.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.search",children:"Search"}),n.jsx("input",{value:l,onChange:S=>d(S.target.value),className:$e.input,placeholder:"Streamer / Title"})]}),n.jsxs("label",{className:$e.formRowCheckbox,children:[n.jsx("input",{type:"checkbox",checked:u,onChange:S=>h(S.target.checked)}),n.jsx("span",{"data-i18n":"home.schedule.today",children:"Nur heute"})]})]}),n.jsx("div",{className:$e.tableWrap,children:n.jsxs("table",{className:$e.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"weekday"}),n.jsx("th",{children:"start_utc"}),n.jsx("th",{children:"end_utc"}),n.jsx("th",{children:"timezone"}),n.jsx("th",{children:"platform"}),n.jsx("th",{children:"channel_url"}),n.jsx("th",{children:"streamer"}),n.jsx("th",{children:"title"})]})}),n.jsx("tbody",{children:y?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:$e.empty,children:"No schedule yet"})}):g.map((S,N)=>n.jsxs("tr",{children:[n.jsx("td",{children:S.weekday}),n.jsx("td",{children:S.start_utc}),n.jsx("td",{children:S.end_utc}),n.jsx("td",{children:S.timezone}),n.jsx("td",{children:S.platform}),n.jsx("td",{children:S.channel_url?n.jsx("a",{href:S.channel_url,target:"_blank",rel:"noreferrer",children:"link"}):""}),n.jsx("td",{children:S.streamer}),n.jsx("td",{children:S.title})]},N))})]})})]})})},uG=()=>{const[t,e]=I.useState(!1);return n.jsxs(wt,{title:"home.title",subtitle:"home.subtitle",children:[n.jsx("div",{className:$e.row,children:n.jsx("div",{className:$e.colFull,children:n.jsx(aG,{})})}),n.jsxs("div",{className:$e.row,children:[n.jsx("div",{className:$e.colCommunity,children:n.jsx(oG,{})}),n.jsx("div",{className:$e.colGuides,children:n.jsx(lG,{})})]}),n.jsx("div",{className:$e.row,children:n.jsx("div",{className:$e.colFull,children:n.jsx(cG,{onOpenSchedule:()=>e(!0)})})}),n.jsx(dG,{open:t,onClose:()=>e(!1)})]})},hG="_wrapper_125p4_1",pG="_card_125p4_19",mG="_logo_125p4_45",fG="_heading_125p4_61",gG="_subcopy_125p4_73",xG="_buttonStack_125p4_83",vG="_providerButton_125p4_97",yG="_discord_125p4_145",bG="_google_125p4_153",_G="_disclaimer_125p4_161",wG="_status_125p4_173",jG="_sessionBlock_125p4_183",SG="_logoutButton_125p4_197",NG="_linkButton_125p4_227",kG="_loading_125p4_245",TG="_spinner_125p4_261",an={wrapper:hG,card:pG,logo:mG,heading:fG,subcopy:gG,buttonStack:xG,providerButton:vG,discord:yG,google:bG,disclaimer:_G,status:wG,sessionBlock:jG,logoutButton:SG,linkButton:NG,loading:kG,spinner:TG},CG=()=>{const t=Vr(),{status:e,user:s,loginWithDiscord:r,loginWithGoogle:i,logout:a}=$l(),l=e==="loading"||e==="idle",d=e==="authenticated"&&!!s,u=()=>{l||r()},h=()=>{l||i()},p=async()=>{await a()},g=()=>{t("/")};let y;return l?y=n.jsxs("div",{className:an.loading,children:[n.jsx("div",{className:an.spinner}),n.jsx("div",{children:"Checking session"})]}):d&&s?y=n.jsxs("div",{className:an.sessionBlock,children:[n.jsxs("div",{className:an.status,children:["You are logged in as ",s.displayName,"."]}),n.jsx("button",{className:an.logoutButton,type:"button",onClick:p,children:"Logout"}),n.jsx("button",{className:an.linkButton,type:"button",onClick:g,children:"Back to dashboard"})]}):y=n.jsxs("div",{className:an.buttonStack,children:[n.jsx("button",{className:`${an.providerButton} ${an.discord}`,type:"button",onClick:u,children:"Login with Discord"}),n.jsx("button",{className:`${an.providerButton} ${an.google}`,type:"button",onClick:h,children:"Login with Google"})]}),n.jsx(wt,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:n.jsx("div",{className:an.wrapper,children:n.jsxs("div",{className:an.card,children:[n.jsx("img",{className:an.logo,src:ef,alt:"SFDataHub logo"}),n.jsx("h1",{className:an.heading,children:"Sign in"}),n.jsx("p",{className:an.subcopy,children:"Choose a method to access SFDataHub."}),y,n.jsx("p",{className:an.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})})};function EG(){return n.jsx(wt,{hex:n.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:n.jsx(AG,{}),right:n.jsx(IG,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(qv,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),n.jsx(qv,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),n.jsx(qv,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function AG(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(Kv,{to:"/dashboard/kpis",children:"KPIs"}),n.jsx(Kv,{to:"/dashboard/activity",children:"Activity"}),n.jsx(Kv,{to:"/dashboard/progression",children:"Progression"})]})]})}function IG(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),n.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function qv({to:t,title:e,desc:s}){return n.jsxs(qt,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Kv({to:t,children:e}){return n.jsx(qt,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function RG(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  KPIs"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(Qv,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),n.jsx(Qv,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),n.jsx(Qv,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function Qv({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),n.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function PG(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Activity"}),n.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),n.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[n.jsx("li",{children:" Neues Scan-File hochgeladen"}),n.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),n.jsx("li",{children:" Gilden-Event geplant"})]})]})}function LG(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Progression"}),n.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[n.jsx(Yv,{title:"Scrapbook 100%",progress:72}),n.jsx(Yv,{title:"Fortress Ausbaustufe",progress:48}),n.jsx(Yv,{title:"Underworld Boss",progress:35})]})]})}function Yv({title:t,progress:e}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),n.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:n.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),n.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function DG(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Discover"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(nl,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),n.jsx(nl,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),n.jsx(nl,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),n.jsx(nl,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),n.jsx(nl,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),n.jsx(nl,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),n.jsx(nl,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function nl({to:t,title:e,desc:s}){return n.jsxs(qt,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function MG({children:t,framed:e=!0}){return e?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:fa.border,backgroundColor:fa.tile},children:t}):n.jsx("main",{className:"min-w-0",children:t})}function FG(t,e){if(!t)return"";const s=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return s;const r=s.includes("?")?"&":"?";return`${s}${r}bg=transparent&background=transparent`}const BG=({srcOrId:t,aspectRatio:e="16/10",height:s,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:l=!1,infoText:d="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[p,g]=I.useState(!1),y=I.useMemo(()=>FG(t,h),[t,h]),b=i?"lazy":"eager",S={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},N={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},T=s?{position:"relative",width:"100%",height:s,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},M={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return n.jsx("div",{className:a,style:S,children:n.jsx("div",{style:N,children:n.jsxs("div",{style:T,children:[n.jsx("iframe",{src:y,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),l&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(L=>!L),style:M,title:"Info",children:"i"}),p&&n.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[d," ",n.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},$G="#0C1C2E",OG=()=>n.jsx(wt,{children:n.jsx(MG,{children:n.jsxs("div",{style:{position:"relative",width:"100%"},children:[n.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:$G,borderRadius:16,pointerEvents:"none",zIndex:0}}),n.jsx("div",{style:{position:"relative",zIndex:1},children:n.jsx(BG,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),VG="_pageWrap_72re9_7",UG="_infoLine_72re9_17",zG="_viewerHost_72re9_43",HG="_overlay_72re9_99",GG="_dragZoneLeft_72re9_101",WG="_dragZoneRight_72re9_103",qG="_inbookLink_72re9_105",eo={pageWrap:VG,infoLine:UG,viewerHost:zG,overlay:HG,dragZoneLeft:GG,dragZoneRight:WG,inbookLink:qG};var Du={exports:{}},KG=Du.exports,tN;function QG(){return tN||(tN=1,(function(t,e){(function(s,r){r(e)})(KG,(function(s){class r{constructor(v,_){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=_,this.nowDrawingDensity=this.createdDensity,this.render=v}setDensity(v){this.createdDensity=v,this.nowDrawingDensity=v}setDrawingDensity(v){this.nowDrawingDensity=v}setPosition(v){this.state.position=v}setAngle(v){this.state.angle=v}setArea(v){this.state.area=v}setHardDrawingAngle(v){this.state.hardDrawingAngle=v}setHardAngle(v){this.state.hardAngle=v,this.state.hardDrawingAngle=v}setOrientation(v){this.orientation=v}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(v,_,P){super(v,P),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=_}draw(v){const _=this.render.getContext(),P=this.render.convertToGlobal(this.state.position),E=this.render.getRect().pageWidth,w=this.render.getRect().height;_.save(),_.translate(P.x,P.y),_.beginPath();for(let A of this.state.area)A!==null&&(A=this.render.convertToGlobal(A),_.lineTo(A.x-P.x,A.y-P.y));_.rotate(this.state.angle),_.clip(),this.isLoad?_.drawImage(this.image,0,0,E,w):this.drawLoader(_,{x:0,y:0},E,w),_.restore()}simpleDraw(v){const _=this.render.getRect(),P=this.render.getContext(),E=_.pageWidth,w=_.height,A=v===1?_.left+_.pageWidth:_.left,B=_.top;this.isLoad?P.drawImage(this.image,A,B,E,w):this.drawLoader(P,{x:A,y:B},E,w)}drawLoader(v,_,P,E){v.beginPath(),v.strokeStyle="rgb(200, 200, 200)",v.fillStyle="rgb(255, 255, 255)",v.lineWidth=1,v.rect(_.x+1,_.y+1,P-1,E-1),v.stroke(),v.fill();const w={x:_.x+P/2,y:_.y+E/2};v.beginPath(),v.lineWidth=10,v.arc(w.x,w.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),v.stroke(),v.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(v,_){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=_,this.app=v,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let _=0;_<this.pages.length;_++)this.portraitSpread.push([_]);let v=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([v]),v++);for(let _=v;_<this.pages.length;_+=2)_<this.pages.length-1?this.landscapeSpread.push([_,_+1]):(this.landscapeSpread.push([_]),this.pages[_].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(v){const _=this.getSpread();for(let P=0;P<_.length;P++)if(v===_[P][0]||v===_[P][1])return P;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(v){if(v>=0&&v<this.pages.length)return this.pages[v];throw new Error("Invalid page number")}nextBy(v){const _=this.pages.indexOf(v);return _<this.pages.length-1?this.pages[_+1]:null}prevBy(v){const _=this.pages.indexOf(v);return _>0?this.pages[_-1]:null}getFlippingPage(v){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[_].newTemporaryCopy():this.pages[_-1];{const P=v===0?this.getSpread()[_+1]:this.getSpread()[_-1];return P.length===1||v===0?this.pages[P[0]]:this.pages[P[1]]}}getBottomPage(v){const _=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return v===0?this.pages[_+1]:this.pages[_-1];{const P=v===0?this.getSpread()[_+1]:this.getSpread()[_-1];return P.length===1?this.pages[P[0]]:v===0?this.pages[P[1]]:this.pages[P[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(v=null){if(v===null&&(v=this.currentPageIndex),v<0||v>=this.pages.length)return;const _=this.getSpreadIndexByPage(v);_!==null&&(this.currentSpreadIndex=_,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(v){if(!(v>=0&&v<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=v}showSpread(){const v=this.getSpread()[this.currentSpreadIndex];v.length===2?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(this.pages[v[1]])):this.render.getOrientation()==="landscape"&&v[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[v[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[v[0]])),this.currentPageIndex=v[0],this.app.updatePageIndex(this.currentPageIndex)}}class l extends a{constructor(v,_,P){super(v,_),this.imagesHref=P}load(){for(const v of this.imagesHref){const _=new i(this.render,v,"soft");_.load(),this.pages.push(_)}this.createSpread()}}class d{static GetDistanceBetweenTwoPoint(v,_){return v===null||_===null?1/0:Math.sqrt(Math.pow(_.x-v.x,2)+Math.pow(_.y-v.y,2))}static GetSegmentLength(v){return d.GetDistanceBetweenTwoPoint(v[0],v[1])}static GetAngleBetweenTwoLine(v,_){const P=v[0].y-v[1].y,E=_[0].y-_[1].y,w=v[1].x-v[0].x,A=_[1].x-_[0].x;return Math.acos((P*E+w*A)/(Math.sqrt(P*P+w*w)*Math.sqrt(E*E+A*A)))}static PointInRect(v,_){return _===null?null:_.x>=v.left&&_.x<=v.width+v.left&&_.y>=v.top&&_.y<=v.top+v.height?_:null}static GetRotatedPoint(v,_,P){return{x:v.x*Math.cos(P)+v.y*Math.sin(P)+_.x,y:v.y*Math.cos(P)-v.x*Math.sin(P)+_.y}}static LimitPointToCircle(v,_,P){if(d.GetDistanceBetweenTwoPoint(v,P)<=_)return P;const E=v.x,w=v.y,A=P.x,B=P.y;let D=Math.sqrt(Math.pow(_,2)*Math.pow(E-A,2)/(Math.pow(E-A,2)+Math.pow(w-B,2)))+E;P.x<0&&(D*=-1);let $=(D-E)*(w-B)/(E-A)+w;return E-A+w===0&&($=_),{x:D,y:$}}static GetIntersectBetweenTwoSegment(v,_,P){return d.PointInRect(v,d.GetIntersectBeetwenTwoLine(_,P))}static GetIntersectBeetwenTwoLine(v,_){const P=v[0].y-v[1].y,E=_[0].y-_[1].y,w=v[1].x-v[0].x,A=_[1].x-_[0].x,B=v[0].x*v[1].y-v[1].x*v[0].y,D=_[0].x*_[1].y-_[1].x*_[0].y,$=P*D-E*B,F=w*D-A*B,z=-(B*A-D*w)/(P*A-E*w),H=-(P*D-E*B)/(P*A-E*w);if(isFinite(z)&&isFinite(H))return{x:z,y:H};if(Math.abs($-F)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(v,_){const P=Math.abs(v.x-_.x),E=Math.abs(v.y-_.y),w=Math.max(P,E),A=[v];function B(D,$,F,z,H){return $>D?D+H*(F/z):$<D?D-H*(F/z):D}for(let D=1;D<=w;D+=1)A.push({x:B(v.x,_.x,P,w,D),y:B(v.y,_.y,E,w,D)});return A}}class u extends r{constructor(v,_,P){super(v,P),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=_,this.element.classList.add("stf__item"),this.element.classList.add("--"+P)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(v){const _=v||this.nowDrawingDensity,P=this.render.convertToGlobal(this.state.position),E=this.render.getRect().pageWidth,w=this.render.getRect().height;this.element.classList.remove("--simple");const A=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${E}px;
            height: ${w}px;
        `;_==="hard"?this.drawHard(A):this.drawSoft(P,A)}drawHard(v=""){const _=this.render.getRect().left+this.render.getRect().width/2,P=this.state.hardDrawingAngle,E=v+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${P}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${_}px, 0, 0) rotateY(${P}deg);`);this.element.style.cssText=E}drawSoft(v,_=""){let P="polygon( ";for(const w of this.state.area)if(w!==null){let A=this.render.getDirection()===1?{x:-w.x+this.state.position.x,y:w.y-this.state.position.y}:{x:w.x-this.state.position.x,y:w.y-this.state.position.y};A=d.GetRotatedPoint(A,{x:0,y:0},this.state.angle),P+=A.x+"px "+A.y+"px, "}P=P.slice(0,-2),P+=")";const E=_+`transform-origin: 0 0; clip-path: ${P}; -webkit-clip-path: ${P};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${v.x}px, ${v.y}px);`:`transform: translate3d(${v.x}px, ${v.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=E}simpleDraw(v){const _=this.render.getRect(),P=_.pageWidth,E=_.height,w=v===1?_.left+_.pageWidth:_.left,A=_.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${E}px; 
            left: ${w}px; 
            top: ${A}px; 
            width: ${P}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(v){super.setOrientation(v),this.element.classList.remove("--left","--right"),this.element.classList.add(v===1?"--right":"--left")}setDrawingDensity(v){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+v),super.setDrawingDensity(v)}}class h extends a{constructor(v,_,P,E){super(v,_),this.element=P,this.pagesElement=E}load(){for(const v of this.pagesElement){const _=new u(this.render,v,v.dataset.density==="hard"?"hard":"soft");_.load(),this.pages.push(_)}this.createSpread()}}class p{constructor(v,_,P,E){this.direction=v,this.corner=_,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(P,10),this.pageHeight=parseInt(E,10)}calc(v){try{return this.position=this.calcAngleAndPosition(v),this.calculateIntersectPoint(this.position),!0}catch(_){return!1}}getFlippingClipArea(){const v=[];let _=!1;return v.push(this.rect.topLeft),v.push(this.topIntersectPoint),this.sideIntersectPoint===null?_=!0:(v.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(_=!1)),v.push(this.bottomIntersectPoint),(_||this.corner==="bottom")&&v.push(this.rect.bottomLeft),v}getBottomClipArea(){const v=[];return v.push(this.topIntersectPoint),this.corner==="top"?v.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&v.push({x:this.pageWidth,y:0}),v.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?d.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&v.push(this.sideIntersectPoint):this.corner==="top"&&v.push({x:this.pageWidth,y:this.pageHeight}),v.push(this.bottomIntersectPoint),v.push(this.topIntersectPoint),v}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const v=d.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?v:Math.PI-v}calcAngleAndPosition(v){let _=v;if(this.updateAngleAndGeometry(_),_=this.corner==="top"?this.checkPositionAtCenterLine(_,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(_,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(_.x-this.pageWidth)<1&&Math.abs(_.y)<1)throw new Error("Point is too small");return _}updateAngleAndGeometry(v){this.angle=this.calculateAngle(v),this.rect=this.getPageRect(v)}calculateAngle(v){const _=this.pageWidth-v.x+1,P=this.corner==="bottom"?this.pageHeight-v.y:v.y;let E=2*Math.acos(_/Math.sqrt(P*P+_*_));P<0&&(E=-E);const w=Math.PI-E;if(!isFinite(E)||w>=0&&w<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(E=-E),E}getPageRect(v){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],v):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],v)}getRectFromBasePoint(v,_){return{topLeft:this.getRotatedPoint(v[0],_),topRight:this.getRotatedPoint(v[1],_),bottomLeft:this.getRotatedPoint(v[2],_),bottomRight:this.getRotatedPoint(v[3],_)}}getRotatedPoint(v,_){return{x:v.x*Math.cos(this.angle)+v.y*Math.sin(this.angle)+_.x,y:v.y*Math.cos(this.angle)-v.x*Math.sin(this.angle)+_.y}}calculateIntersectPoint(v){const _={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[v,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[v,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[v,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(_,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(v,_,P){let E=v;const w=d.LimitPointToCircle(_,this.pageWidth,E);E!==w&&(E=w,this.updateAngleAndGeometry(E));const A=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let B=this.rect.bottomRight,D=this.rect.topLeft;if(this.corner==="bottom"&&(B=this.rect.topRight,D=this.rect.bottomLeft),B.x<=0){const $=d.LimitPointToCircle(P,A,D);$!==E&&(E=$,this.updateAngleAndGeometry(E))}return E}getSegmentToShadowLine(){const v=this.getShadowStartPoint();return[v,v!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(v,_){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=v,this.app=_}fold(v){this.setState("user_fold"),this.calc===null&&this.start(v),this.do(this.render.convertToPage(v))}flip(v){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(v)||(this.calc!==null&&this.render.finishAnimation(),!this.start(v)))return;const _=this.getBoundsRect();this.setState("flipping");const P=_.height/10,E=this.calc.getCorner()==="bottom"?_.height-P:P,w=this.calc.getCorner()==="bottom"?_.height:0;this.calc.calc({x:_.pageWidth-P,y:E}),this.animateFlippingTo({x:_.pageWidth-P,y:E},{x:-_.pageWidth,y:w},!0)}start(v){this.reset();const _=this.render.convertToBook(v),P=this.getBoundsRect(),E=this.getDirectionByPoint(_),w=_.y>=P.height/2?"bottom":"top";if(!this.checkDirection(E))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(E),this.bottomPage=this.app.getPageCollection().getBottomPage(E),this.render.getOrientation()==="landscape")if(E===1){const A=this.app.getPageCollection().nextBy(this.flippingPage);A!==null&&this.flippingPage.getDensity()!==A.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),A.setDrawingDensity("hard"))}else{const A=this.app.getPageCollection().prevBy(this.flippingPage);A!==null&&this.flippingPage.getDensity()!==A.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),A.setDrawingDensity("hard"))}return this.render.setDirection(E),this.calc=new p(E,w,P.pageWidth.toString(10),P.height.toString(10)),!0}catch(A){return!1}}do(v){if(this.calc!==null&&this.calc.calc(v)){const _=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*_)/100):this.flippingPage.setHardAngle(-90*(200-2*_)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),_,this.calc.getDirection())}}flipToPage(v,_){const P=this.app.getPageCollection().getCurrentSpreadIndex(),E=this.app.getPageCollection().getSpreadIndexByPage(v);try{E>P&&(this.app.getPageCollection().setCurrentSpreadIndex(E-1),this.flipNext(_)),E<P&&(this.app.getPageCollection().setCurrentSpreadIndex(E+1),this.flipPrev(_))}catch(w){}}flipNext(v){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:v==="top"?1:this.render.getRect().height-2})}flipPrev(v){this.flip({x:10,y:v==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const v=this.calc.getPosition(),_=this.getBoundsRect(),P=this.calc.getCorner()==="bottom"?_.height:0;v.x<=0?this.animateFlippingTo(v,{x:-_.pageWidth,y:P},!0):this.animateFlippingTo(v,{x:_.pageWidth,y:P},!1)}showCorner(v){if(!this.checkState("read","fold_corner"))return;const _=this.getBoundsRect(),P=_.pageWidth;if(this.isPointOnCorners(v))if(this.calc===null){if(!this.start(v))return;this.setState("fold_corner"),this.calc.calc({x:P-1,y:1});const E=50,w=this.calc.getCorner()==="bottom"?_.height-1:1,A=this.calc.getCorner()==="bottom"?_.height-E:E;this.animateFlippingTo({x:P-1,y:w},{x:P-E,y:A},!1,!1)}else this.do(this.render.convertToPage(v));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(v,_,P,E=!0){const w=d.GetCordsFromTwoPoint(v,_),A=[];for(const D of w)A.push(()=>this.do(D));const B=this.getAnimationDuration(w.length);this.render.startAnimation(A,B,()=>{this.calc&&(P&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),E&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(v){this.state!==v&&(this.app.updateState(v),this.state=v)}getDirectionByPoint(v){const _=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(v.x-_.pageWidth<=_.width/5)return 1}else if(v.x<_.width/2)return 1;return 0}getAnimationDuration(v){const _=this.app.getSettings().flippingTime;return v>=1e3?_:v/1e3*_}checkDirection(v){return v===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...v){for(const _ of v)if(this.state===_)return!0;return!1}isPointOnCorners(v){const _=this.getBoundsRect(),P=_.pageWidth,E=Math.sqrt(Math.pow(P,2)+Math.pow(_.height,2))/5,w=this.render.convertToBook(v);return w.x>0&&w.y>0&&w.x<_.width&&w.y<_.height&&(w.x<E||w.x>_.width-E)&&(w.y<E||w.y>_.height-E)}}class y{constructor(v,_){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=_,this.app=v;const P=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=P.exec(window.navigator.userAgent)!==null}render(v){if(this.animation!==null){const _=Math.round((v-this.animation.startedAt)/this.animation.durationFrame);_<this.animation.frames.length?this.animation.frames[_]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=v,this.drawFrame()}start(){this.update();const v=_=>{this.render(_),requestAnimationFrame(v)};requestAnimationFrame(v)}startAnimation(v,_,P){this.finishAnimation(),this.animation={frames:v,duration:_,durationFrame:_/v.length,onAnimateEnd:P,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const v=this.calculateBoundsRect();this.orientation!==v&&(this.orientation=v,this.app.updateOrientation(v))}calculateBoundsRect(){let v="landscape";const _=this.getBlockWidth(),P=_/2,E=this.getBlockHeight()/2,w=this.setting.width/this.setting.height;let A=this.setting.width,B=this.setting.height,D=P-A;return this.setting.size==="stretch"?(_<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(v="portrait"),A=v==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,A>this.setting.maxWidth&&(A=this.setting.maxWidth),B=A/w,B>this.getBlockHeight()&&(B=this.getBlockHeight(),A=B*w),D=v==="portrait"?P-A/2-A:P-A):_<2*A&&this.app.getSettings().usePortrait&&(v="portrait",D=P-A/2-A),this.boundsRect={left:D,top:E-B/2,width:2*A,height:B,pageWidth:A},v}setShadowData(v,_,P,E){if(!this.app.getSettings().drawShadow)return;const w=100*this.getSettings().maxShadowOpacity;this.shadow={pos:v,angle:_,width:3*this.getRect().pageWidth/4*P/100,opacity:(100-P)*w/100/100,direction:E,progress:2*P}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(v){this.pageRect=v}setDirection(v){this.direction=v}setRightPage(v){v!==null&&v.setOrientation(1),this.rightPage=v}setLeftPage(v){v!==null&&v.setOrientation(0),this.leftPage=v}setBottomPage(v){v!==null&&v.setOrientation(this.direction===1?0:1),this.bottomPage=v}setFlippingPage(v){v!==null&&v.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=v}convertToBook(v){const _=this.getRect();return{x:v.x-_.left,y:v.y-_.top}}isSafari(){return this.safari}convertToPage(v,_){_||(_=this.direction);const P=this.getRect();return{x:_===0?v.x-P.left-P.width/2:P.width/2-v.x+P.left,y:v.y-P.top}}convertToGlobal(v,_){if(_||(_=this.direction),v==null)return null;const P=this.getRect();return{x:_===0?v.x+P.left+P.width/2:P.width/2-v.x+P.left,y:v.y+P.top}}convertRectToGlobal(v,_){return _||(_=this.direction),{topLeft:this.convertToGlobal(v.topLeft,_),topRight:this.convertToGlobal(v.topRight,_),bottomLeft:this.convertToGlobal(v.bottomLeft,_),bottomRight:this.convertToGlobal(v.bottomRight,_)}}}class b extends y{constructor(v,_,P){super(v,_),this.canvas=P,this.ctx=P.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const v=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(v.left+v.pageWidth,v.top,v.width,v.height),this.ctx.clip())}drawBookShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=v.width/20;this.ctx.rect(v.left,v.top,v.width,v.height);const P={x:v.left+v.width/2-_/2,y:0};this.ctx.translate(P.x,P.y);const E=this.ctx.createLinearGradient(0,0,_,0);E.addColorStop(0,"rgba(0, 0, 0, 0)"),E.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),E.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),E.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),E.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),E.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=E,this.ctx.fillRect(0,0,_,2*v.height),this.ctx.restore()}drawOuterShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(v.left,v.top,v.width,v.height);const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const P=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),P.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),P.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),P.addColorStop(0,"rgba(0, 0, 0, 0)"),P.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=P,this.ctx.fillRect(0,0,this.shadow.width,2*v.height),this.ctx.restore()}drawInnerShadow(){const v=this.getRect();this.ctx.save(),this.ctx.beginPath();const _=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),P=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(P.topLeft.x,P.topLeft.y),this.ctx.lineTo(P.topRight.x,P.topRight.y),this.ctx.lineTo(P.bottomRight.x,P.bottomRight.y),this.ctx.lineTo(P.bottomLeft.x,P.bottomLeft.y),this.ctx.translate(_.x,_.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const E=3*this.shadow.width/4,w=this.ctx.createLinearGradient(0,0,E,0);this.shadow.direction===0?(this.ctx.translate(-E,-100),w.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),w.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),w.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),w.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),w.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=w,this.ctx.fillRect(0,0,E,2*v.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class S{constructor(v,_,P){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=w=>{if(this.checkTarget(w.target)){const A=this.getMousePos(w.clientX,w.clientY);this.app.startUserTouch(A),w.preventDefault()}},this.onTouchStart=w=>{if(this.checkTarget(w.target)&&w.changedTouches.length>0){const A=w.changedTouches[0],B=this.getMousePos(A.clientX,A.clientY);this.touchPoint={point:B,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(B)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||w.preventDefault()}},this.onMouseUp=w=>{const A=this.getMousePos(w.clientX,w.clientY);this.app.userStop(A)},this.onMouseMove=w=>{const A=this.getMousePos(w.clientX,w.clientY);this.app.userMove(A,!1)},this.onTouchMove=w=>{if(w.changedTouches.length>0){const A=w.changedTouches[0],B=this.getMousePos(A.clientX,A.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-B.x)>10||this.app.getState()!=="read")&&w.cancelable&&this.app.userMove(B,!0),this.app.getState()!=="read"&&w.preventDefault()):this.app.userMove(B,!0)}},this.onTouchEnd=w=>{if(w.changedTouches.length>0){const A=w.changedTouches[0],B=this.getMousePos(A.clientX,A.clientY);let D=!1;if(this.touchPoint!==null){const $=B.x-this.touchPoint.point.x,F=Math.abs(B.y-this.touchPoint.point.y);Math.abs($)>this.swipeDistance&&F<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&($>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),D=!0),this.touchPoint=null}this.app.userStop(B,D)}},this.parentElement=v,v.classList.add("stf__parent"),v.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=v.querySelector(".stf__wrapper"),this.app=_;const E=this.app.getSettings().usePortrait?1:2;v.style.minWidth=P.minWidth*E+"px",v.style.minHeight=P.minHeight+"px",P.size==="fixed"&&(v.style.minWidth=P.width*E+"px",v.style.minHeight=P.height+"px"),P.autoSize&&(v.style.width="100%",v.style.maxWidth=2*P.maxWidth+"px"),v.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=P.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(v){this.wrapper.classList.remove("--portrait","--landscape"),v==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(v,_){const P=this.distElement.getBoundingClientRect();return{x:v-P.left,y:_-P.top}}checkTarget(v){return!this.app.getSettings().clickEventForward||!["a","button"].includes(v.tagName.toLowerCase())}}class N extends S{constructor(v,_,P,E){super(v,_,P),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=v.querySelector(".stf__block"),this.items=E;for(const w of E)this.distElement.appendChild(w);this.setHandlers()}clear(){for(const v of this.items)this.parentElement.appendChild(v)}updateItems(v){this.removeHandlers(),this.distElement.innerHTML="";for(const _ of v)this.distElement.appendChild(_);this.items=v,this.setHandlers()}update(){this.app.getRender().update()}}class T extends S{constructor(v,_,P){super(v,_,P),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=v.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const v=getComputedStyle(this.canvas),_=parseInt(v.getPropertyValue("width"),10),P=parseInt(v.getPropertyValue("height"),10);this.canvas.width=_,this.canvas.height=P}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class M extends y{constructor(v,_,P){super(v,_),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=P,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const v=this.getRect(),_=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let P=(100-_)*(2.5*v.pageWidth)/100+20;P>v.pageWidth&&(P=v.pageWidth);let E=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${P}px;
            height: ${v.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*_/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;E+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=E}drawHardOuterShadow(){const v=this.getRect();let _=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*v.pageWidth)/100+20;_>v.pageWidth&&(_=v.pageWidth);let P=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${_}px;
            height: ${v.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${v.left+v.width/2}px;
            transform-origin: 0 0;
        `;P+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=P}drawInnerShadow(){const v=this.getRect(),_=3*this.shadow.width/4,P=this.getDirection()===0?_:0,E=this.getDirection()===0?"to left":"to right",w=this.convertToGlobal(this.shadow.pos),A=this.shadow.angle+3*Math.PI/2,B=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let D="polygon( ";for(const F of B){let z=this.getDirection()===1?{x:-F.x+this.shadow.pos.x,y:F.y-this.shadow.pos.y}:{x:F.x-this.shadow.pos.x,y:F.y-this.shadow.pos.y};z=d.GetRotatedPoint(z,{x:P,y:100},A),D+=z.x+"px "+z.y+"px, "}D=D.slice(0,-2),D+=")";const $=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${_}px;
            height: ${2*v.height}px;
            background: linear-gradient(${E},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${P}px 100px;
            transform: translate3d(${w.x-P}px, ${w.y-100}px, 0) rotate(${A}rad);
            clip-path: ${D};
            -webkit-clip-path: ${D};
        `;this.innerShadow.style.cssText=$}drawOuterShadow(){const v=this.getRect(),_=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),P=this.shadow.angle+3*Math.PI/2,E=this.getDirection()===1?this.shadow.width:0,w=this.getDirection()===0?"to right":"to left",A=[{x:0,y:0},{x:v.pageWidth,y:0},{x:v.pageWidth,y:v.height},{x:0,y:v.height}];let B="polygon( ";for(const $ of A)if($!==null){let F=this.getDirection()===1?{x:-$.x+this.shadow.pos.x,y:$.y-this.shadow.pos.y}:{x:$.x-this.shadow.pos.x,y:$.y-this.shadow.pos.y};F=d.GetRotatedPoint(F,{x:E,y:100},P),B+=F.x+"px "+F.y+"px, "}B=B.slice(0,-2),B+=")";const D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*v.height}px;
            background: linear-gradient(${w}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${E}px 100px;
            transform: translate3d(${_.x-E}px, ${_.y-100}px, 0) rotate(${P}rad);
            clip-path: ${B};
            -webkit-clip-path: ${B};
        `;this.outerShadow.style.cssText=D}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const v=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(v))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const v of this.app.getPageCollection().getPages())v!==this.leftPage&&v!==this.rightPage&&v!==this.flippingPage&&v!==this.bottomPage&&(v.getElement().style.cssText="display: none"),v.getTemporaryCopy()!==this.flippingPage&&v.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class L{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(v){const _=this._default;if(Object.assign(_,v),_.size!=="stretch"&&_.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(_.width<=0||_.height<=0)throw new Error("Invalid width or height");if(_.flippingTime<=0)throw new Error("Invalid flipping time");return _.size==="stretch"?(_.minWidth<=0&&(_.minWidth=100),_.maxWidth<_.minWidth&&(_.maxWidth=2e3),_.minHeight<=0&&(_.minHeight=100),_.maxHeight<_.minHeight&&(_.maxHeight=2e3)):(_.minWidth=_.width,_.maxWidth=_.width,_.minHeight=_.height,_.maxHeight=_.height),_}}(function(k,v){v===void 0&&(v={});var _=v.insertAt;if(typeof document!="undefined"){var P=document.head||document.getElementsByTagName("head")[0],E=document.createElement("style");E.type="text/css",_==="top"&&P.firstChild?P.insertBefore(E,P.firstChild):P.appendChild(E),E.styleSheet?E.styleSheet.cssText=k:E.appendChild(document.createTextNode(k))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),s.PageFlip=class extends class{constructor(){this.events=new Map}on(k,v){return this.events.has(k)?this.events.get(k).push(v):this.events.set(k,[v]),this}off(k){this.events.delete(k)}trigger(k,v,_=null){if(this.events.has(k))for(const P of this.events.get(k))P({data:_,object:v})}}{constructor(k,v){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new L().getSettings(v),this.block=k}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(k){this.ui=new T(this.block,this,this.setting);const v=this.ui.getCanvas();this.render=new b(this,this.setting,v),this.flipController=new g(this.render,this),this.pages=new l(this,this.render,k),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(k){this.ui=new N(this.block,this,this.setting,k),this.render=new M(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),k),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(k){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new l(this,this.render,k),this.pages.load(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}updateFromHtml(k){const v=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),k),this.pages.load(),this.ui.updateItems(k),this.render.reload(),this.pages.show(v),this.trigger("update",this,{page:v,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(k){this.pages.show(k)}flipNext(k="top"){this.flipController.flipNext(k)}flipPrev(k="top"){this.flipController.flipPrev(k)}flip(k,v="top"){this.flipController.flipToPage(k,v)}updateState(k){this.trigger("changeState",this,k)}updatePageIndex(k){this.trigger("flip",this,k)}updateOrientation(k){this.ui.setOrientationStyle(k),this.update(),this.trigger("changeOrientation",this,k)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(k){return this.pages.getPage(k)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(k){this.mousePosition=k,this.isUserTouch=!0,this.isUserMove=!1}userMove(k,v){this.isUserTouch||v||!this.setting.showPageCorners?this.isUserTouch&&d.GetDistanceBetweenTwoPoint(this.mousePosition,k)>5&&(this.isUserMove=!0,this.flipController.fold(k)):this.flipController.showCorner(k)}userStop(k,v=!1){this.isUserTouch&&(this.isUserTouch=!1,v||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(k)))}},Object.defineProperty(s,"__esModule",{value:!0})}))})(Du,Du.exports)),Du.exports}var YG=QG();const XG="_viewerRoot_hj39c_5",JG="_stage_hj39c_17",ZG="_host_hj39c_43",eW="_hud_hj39c_91",tW="_hBtn_hj39c_125",sW="_hText_hj39c_153",nW="_title_hj39c_167",rW="_sep_hj39c_169",iW="_spacer_hj39c_171",aW="_errorBox_hj39c_175",gr={viewerRoot:XG,stage:JG,host:ZG,hud:eW,hBtn:tW,hText:sW,title:nW,sep:rW,spacer:iW,errorBox:aW},oW="/".endsWith("/")?"/":"//",wE=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${oW}${e}`.replace(/\/{2,}/g,"/")},lW=async t=>{const e=wE(`flipbooks/${t}/manifest.json`),s=await fetch(e,{cache:"no-cache"});if(!s.ok)throw new Error(`Manifest not found for slug "${t}"`);return s.json()},cW=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},dW=(t,e,s)=>Math.max(e,Math.min(s,t)),Ds={hostEl:null,pf:null,slug:null},ci={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},uW=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function hW(t){for(const e of t)e&&(ci.cache.has(e)||ci.inFlight.has(e)||ci.queue.includes(e)||ci.queue.push(e));jE()}function jE(){uW(()=>{for(;ci.inFlight.size<ci.maxParallel&&ci.queue.length>0;){const t=ci.queue.shift();ci.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{ci.inFlight.delete(t),ci.cache.add(t),jE()},e.src=t}})}const pW=({slug:t,initialPage:e=1,onReady:s,onPageChange:r,noSound:i=!0})=>{const a=I.useRef(null),l=I.useRef(null),[d,u]=I.useState(null),[h,p]=I.useState(null),g=I.useRef(),y=I.useRef(),b=I.useRef(e);I.useEffect(()=>{g.current=s},[s]),I.useEffect(()=>{y.current=r},[r]),I.useEffect(()=>{b.current=e},[e]);const S=I.useMemo(()=>wE(`flipbooks/${t}`),[t]),N=I.useCallback(k=>{var v,_;if((v=k.srcset)!=null&&v.length){const P=[...k.srcset].sort((w,A)=>w.width-A.width),E=(_=P.find(w=>w.width>=1600))!=null?_:P[P.length-1];return/^https?:\/\//i.test(E.src)||E.src.startsWith("/")?E.src:`${S}/${E.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(k.src)||k.src.startsWith("/")?k.src:`${S}/${k.src}`.replace(/\/{2,}/g,"/")},[S]);I.useEffect(()=>{let k=!0;return p(null),lW(t).then(v=>{k&&u(v)}).catch(v=>{k&&p(v.message||"Failed to load flipbook manifest.")}),()=>{k=!1}},[t]),I.useEffect(()=>{const k=l.current,v=a.current;if(!k||!v||!d||(Ds.hostEl||(Ds.hostEl=document.createElement("div"),Ds.hostEl.className=gr.host),Ds.hostEl.parentElement!==k&&k.appendChild(Ds.hostEl),!Ds.hostEl.isConnected))return;if(!(!Ds.pf||Ds.slug!==t)){try{Ds.pf.update()}catch(F){}return}if(Ds.pf){try{Ds.pf.destroy()}catch(F){}Ds.pf=null}const P={width:d.pageWidth,height:d.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},E=new YG.PageFlip(Ds.hostEl,P);Ds.pf=E,Ds.slug=t;const w=d.pages.map(N);E.loadFromImages(w);const A=F=>{const z=[],H=F+1,K=F+2;d.pages[H]&&z.push(N(d.pages[H])),d.pages[K]&&z.push(N(d.pages[K])),hW(z)},B=()=>{var z;const F=dW(b.current,1,d.pageCount)-1;E.turnToPage(F,"hard"),setTimeout(()=>A(F),220),(z=g.current)==null||z.call(g,E)};E.on("init",B),E.on("flip",F=>{var H;const z=F.data;(H=y.current)==null||H.call(y,z),setTimeout(()=>A(z),220)});const D=new ResizeObserver(()=>{var F;try{(F=Ds.pf)==null||F.update()}catch(z){}});D.observe(v);const $=F=>{var z,H;F.key==="ArrowLeft"&&(F.preventDefault(),(z=Ds.pf)==null||z.flipPrev()),F.key==="ArrowRight"&&(F.preventDefault(),(H=Ds.pf)==null||H.flipNext())};return window.addEventListener("keydown",$,{passive:!1}),()=>{window.removeEventListener("keydown",$),D.disconnect()}},[d,N,t]);const T=()=>{var k;return(k=Ds.pf)==null?void 0:k.flipPrev()},M=()=>{var k;return(k=Ds.pf)==null?void 0:k.flipNext()},L=()=>{var _;const k=a.current;if(!k)return;const v=k;(_=v.requestFullscreen||v.webkitRequestFullscreen||v.msRequestFullscreen)==null||_.call(v)};return h?n.jsxs("div",{className:gr.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):d?n.jsxs("div",{className:gr.viewerRoot,ref:a,"aria-label":d.title,children:[n.jsx("div",{className:gr.stage,ref:l}),n.jsxs("div",{className:gr.hud,children:[n.jsx("button",{className:gr.hBtn,onClick:T,"aria-label":"Zurck",children:""}),n.jsxs("div",{className:gr.hText,children:[n.jsx("span",{className:gr.title,children:d.title}),n.jsx("span",{className:gr.sep,children:""}),n.jsxs("span",{children:[d.pageCount," Seiten"]})]}),n.jsx("div",{className:gr.spacer}),cW()&&n.jsx("button",{className:gr.hBtn,onClick:L,"aria-label":"Fullscreen",children:""}),n.jsx("button",{className:gr.hBtn,onClick:M,"aria-label":"Weiter",children:""})]})]}):n.jsx("div",{className:gr.errorBox,children:"Lade Flipbook"})},mW=ee.memo(pW),fW={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},gW=()=>{const t="sf-history-book",[e,s]=I.useState(1),r=I.useRef(null),i=I.useMemo(()=>{var p;return(p=fW[e])!=null?p:[]},[e]),a=I.useCallback(p=>{r.current=p},[]),l=I.useCallback(p=>{s(p+1)},[]),d=I.useCallback(p=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,p-1))}catch(y){}},[]),u=I.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipPrev()},[]),h=I.useCallback(()=>{var p;return(p=r.current)==null?void 0:p.flipNext()},[]);return n.jsx(wt,{title:"SF History Book",children:n.jsxs("div",{className:eo.pageWrap,children:[n.jsx("div",{className:eo.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),n.jsxs("div",{className:eo.viewerHost,children:[n.jsx(mW,{slug:t,initialPage:1,onReady:a,onPageChange:l,noSound:!0}),n.jsxs("div",{className:eo.overlay,"aria-hidden":!0,children:[n.jsx("div",{className:eo.dragZoneLeft,onClick:u}),n.jsx("div",{className:eo.dragZoneRight,onClick:h}),i.map((p,g)=>{const y={"--t":`${p.t}%`,"--l":`${p.l}%`,"--w":`${p.w}%`,"--h":`${p.h}%`};return p.kind==="goto"?n.jsx("button",{className:eo.inbookLink,style:y,"aria-label":p.label,onClick:()=>d(p.toPage)},g):n.jsx("a",{className:eo.inbookLink,style:y,"aria-label":p.label,href:p.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},xW="_root_zvspc_1",vW="_hero_zvspc_15",yW="_eyebrow_zvspc_47",bW="_heading_zvspc_63",_W="_lead_zvspc_77",wW="_freshnessHint_zvspc_91",jW="_hintLabel_zvspc_105",SW="_hintText_zvspc_121",NW="_grid_zvspc_135",kW="_card_zvspc_147",TW="_cardTitle_zvspc_163",CW="_paragraph_zvspc_177",EW="_list_zvspc_191",AW="_listItem_zvspc_207",Jn={root:xW,hero:vW,eyebrow:yW,heading:bW,lead:_W,freshnessHint:wW,hintLabel:jW,hintText:SW,grid:NW,card:kW,cardTitle:TW,paragraph:CW,list:EW,listItem:AW},IW=()=>{const{t}=fd(),e=t("help.dataFreshness.body").split(`

`),s=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}];return n.jsx(wt,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:n.jsxs("div",{className:Jn.root,children:[n.jsxs("section",{className:Jn.hero,children:[n.jsxs("div",{children:[n.jsx("p",{className:Jn.eyebrow,children:t("help.hero.eyebrow")}),n.jsx("h1",{className:Jn.heading,children:t("help.hero.heading")}),n.jsx("p",{className:Jn.lead,children:t("help.hero.lead")})]}),n.jsxs("div",{className:Jn.freshnessHint,children:[n.jsx("div",{className:Jn.hintLabel,children:t("help.hero.freshnessLabel")}),n.jsx("p",{className:Jn.hintText,children:t("help.hero.freshnessBody")})]})]}),n.jsx("div",{className:Jn.grid,children:s.map(r=>{var i;return n.jsxs("section",{className:Jn.card,children:[n.jsx("h2",{className:Jn.cardTitle,children:r.title}),(i=r.paragraphs)==null?void 0:i.map((a,l)=>n.jsx("p",{className:Jn.paragraph,children:a},`${r.key}-p-${l}`)),r.bullets&&n.jsx("ul",{className:Jn.list,children:r.bullets.map(a=>n.jsx("li",{className:Jn.listItem,children:a},`${r.key}-${a}`))})]},r.key)})})]})})},SE=[{id:"eu1",label:"EU 1",region:"EU",active:!0},{id:"eu2",label:"EU 2",region:"EU",active:!0},{id:"us1",label:"US 1",region:"NA",active:!0}];Object.fromEntries(SE.map(t=>[t.id,t]));const NE="TL_FILTERS_V2",sr={servers:[],classes:[],days:"all",sortBy:"level",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function RW(){var t;try{const e=localStorage.getItem(NE);if(!e)return sr;const s=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(s.days)?s.days:sr.days,i=["cards","buttons","table"].includes(s.listView)?s.listView:sr.listView,a=["hud","sheet"].includes(s.filterMode)?s.filterMode:sr.filterMode,l=typeof s.quickFav=="boolean"?s.quickFav:!!s.favoritesOnly,d=typeof s.quickActive=="boolean"?s.quickActive:!!s.activeOnly;return{...sr,...s,servers:Array.isArray(s.servers)?s.servers:[],classes:Array.isArray(s.classes)?s.classes:[],favoritesOnly:typeof s.favoritesOnly=="boolean"?s.favoritesOnly:l,activeOnly:typeof s.activeOnly=="boolean"?s.activeOnly:d,quickFav:l,quickActive:d,days:r,listView:i,filterMode:a,bottomFilterOpen:!!s.bottomFilterOpen,serverSheetOpen:!!s.serverSheetOpen,sortBy:typeof s.sortBy=="string"?s.sortBy:sr.sortBy,searchText:typeof s.searchText=="string"?s.searchText:sr.searchText}}catch(e){return sr}}function PW(t){try{localStorage.setItem(NE,JSON.stringify(t))}catch(e){}}const kE=I.createContext(null),sN=t=>Array.from(new Set(t));function Sm(t,e){return typeof t=="function"?t(e):t}function LW({children:t}){const[e,s]=I.useState(()=>RW());I.useEffect(()=>{PW(e)},[e]);const r=w=>s(A=>({...A,servers:sN(Sm(w,A.servers))})),i=w=>s(A=>{const B=new Set(A.servers);return B.has(w)?B.delete(w):B.add(w),{...A,servers:Array.from(B)}}),a=()=>s(w=>({...w,servers:[]})),l=w=>s(A=>({...A,classes:sN(Sm(w,A.classes))})),d=w=>s(A=>{const B=new Set(A.classes);return B.has(w)?B.delete(w):B.add(w),{...A,classes:Array.from(B)}}),u=()=>s(w=>({...w,classes:[]})),h=w=>s(A=>({...A,days:w})),p=w=>h(w),g=w=>s(A=>({...A,sortBy:w||"level"})),y=w=>s(A=>({...A,favoritesOnly:!!w,quickFav:!!w})),b=w=>s(A=>({...A,activeOnly:!!w,quickActive:!!w})),S=w=>s(A=>({...A,searchText:w})),N=w=>s(A=>{const B=Sm(w,A.quickFav);return{...A,quickFav:B,favoritesOnly:B}}),T=w=>s(A=>{const B=Sm(w,A.quickActive);return{...A,quickActive:B,activeOnly:B}}),M=w=>s(A=>({...A,filterMode:w})),L=w=>s(A=>({...A,listView:w})),k=w=>s(A=>({...A,bottomFilterOpen:!!w})),v=w=>s(A=>({...A,serverSheetOpen:!!w})),_=()=>s(sr),P=()=>_(),E=I.useMemo(()=>({servers:e.servers,classes:e.classes,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:l,toggleClass:d,clearClasses:u,setDays:h,setRange:p,setSortBy:g,setFavoritesOnly:y,setActiveOnly:b,setSearchText:S,setQuickFav:N,setQuickActive:T,setFilterMode:M,setListView:L,setBottomFilterOpen:k,setServerSheetOpen:v,resetFilters:_,resetAll:P}),[e]);return n.jsx(kE.Provider,{value:E,children:t})}function Hh(){const t=I.useContext(kE);return t||{...sr,range:sr.days,searchText:sr.searchText,quickFav:sr.quickFav,quickActive:sr.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const DW="_hudWrap_107o7_9",MW="_hudBtn_107o7_11",FW="_hudSubBtn_107o7_15",BW="_iconRow_107o7_19",$W="_segmented_107o7_21",OW="_sortLabel_107o7_27",VW="_sortSelect_107o7_29",UW="_chip_107o7_31",zW="_isActive_107o7_33",Zn={hudWrap:DW,hudBtn:MW,hudSubBtn:FW,iconRow:BW,segmented:$W,sortLabel:OW,sortSelect:VW,chip:UW,isActive:zW};function HW({active:t=!1,title:e,iconUrl:s,fallback:r="",size:i=40,onClick:a}){const l=Math.round(i*.7),d=ee.useMemo(()=>{const M=[],L=I3(s,l*2,l*2,"contain");L&&M.push(L);const k=Ur(s,l*2);return k&&k!==L&&M.push(k),!M.length&&s&&M.push(s),M},[s,l]),[u,h]=ee.useState(0),[p,g]=ee.useState(!1),[y,b]=ee.useState(!1);ee.useEffect(()=>h(0),[d]);const S=d[u]||"",N={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:y||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};p&&(N.background="rgba(255,255,255,.04)"),t&&(N.outline="2px solid #5C8BC6");const T={display:"block",width:l,height:l,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return n.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:N,children:S?n.jsx("img",{src:S,alt:e||"class",width:l,height:l,loading:"lazy",style:T,onError:()=>{h(M=>M+1<d.length?M+1:M)}}):n.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}const GW=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"90d",value:90},{label:"all",value:"all"}];function WW(){const{servers:t,classes:e,setClasses:s,range:r,setRange:i,sortBy:a,setSortBy:l,quickFav:d,setQuickFav:u,quickActive:h,setQuickActive:p,filterMode:g,setBottomFilterOpen:y,serverSheetOpen:b,setServerSheetOpen:S,resetAll:N}=Hh();return n.jsxs("div",{className:Zn.hudWrap,children:[n.jsxs("button",{type:"button",className:Zn.hudBtn,onClick:T=>{T.preventDefault(),T.stopPropagation(),S(!0)},"aria-haspopup":"dialog","aria-expanded":b||!1,"aria-label":`Select servers${t.length?` (${t.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",t.length?`(${t.length})`:""]}),n.jsxs("div",{className:Zn.iconRow,children:[qs.map(T=>n.jsx(HW,{active:e.includes(T.key),title:T.label,iconUrl:T.iconUrl,fallback:T.fallback,size:40,onClick:()=>s(M=>M.includes(T.key)?M.filter(L=>L!==T.key):[...M,T.key])},T.key)),n.jsx("button",{type:"button",className:Zn.hudSubBtn,onClick:()=>s(qs.map(T=>T.key)),children:"All"}),n.jsx("button",{type:"button",className:Zn.hudSubBtn,onClick:()=>s([]),children:"None"})]}),n.jsx("div",{className:Zn.segmented,role:"group","aria-label":"Range",children:GW.map(T=>n.jsx("button",{type:"button","aria-pressed":r===T.value,onClick:()=>i(T.value),children:T.label},T.label))}),n.jsx("label",{className:Zn.sortLabel,htmlFor:"toplists-sort",children:"Sort"}),n.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:a,onChange:T=>l(T.target.value),className:Zn.sortSelect,"aria-label":"Sort",children:[n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"lastScan",children:"Last scan"})]}),n.jsx("button",{type:"button",className:`${Zn.chip} ${d?Zn.isActive:""}`,onClick:()=>u(T=>!T),children:" Favorites"}),n.jsx("button",{type:"button",className:`${Zn.chip} ${h?Zn.isActive:""}`,onClick:()=>p(T=>!T),children:" Active"}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{type:"button",className:Zn.hudSubBtn,onClick:N,children:"Reset"}),g==="sheet"&&n.jsx("button",{type:"button",className:Zn.hudBtn,onClick:T=>{T.preventDefault(),T.stopPropagation(),y(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const qW=["EU","US","INT","Fusion"],gn={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"};function KW({open:t,onClose:e,mode:s="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:l,onClearAll:d}){const[u,h]=I.useState(""),p=I.useRef(null);I.useEffect(()=>{if(!t)return;const b=S=>{S.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),I.useEffect(()=>{if(t&&p.current){const b=p.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=qW,y=b=>{const S=u.trim().toLowerCase();return S?b.toLowerCase().includes(S):!0};return t?n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:QW,onClick:b=>{b.target===b.currentTarget&&e()},children:n.jsxs("div",{ref:p,style:s==="modal"?TE:YW,className:"sf-server-sheet",children:[n.jsxs("div",{style:XW,children:[n.jsx("h2",{id:"server-dialog-title",style:JW,children:"Select servers"}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{type:"button",onClick:d,style:nN,children:"Clear"}),n.jsx("button",{type:"button",onClick:e,style:iq,children:"Done"})]})]}),n.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[n.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),n.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:eq})]}),n.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const S=(r[b]||[]).filter(y);return n.jsxs("section",{"aria-labelledby":`region-${b}`,children:[n.jsxs("div",{style:tq,children:[n.jsx("h3",{id:`region-${b}`,style:ZW,children:b}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",style:nN,onClick:()=>{l?l(b):S.filter(T=>!i.includes(T)).forEach(a)},children:"Select all"})})]}),n.jsxs("div",{style:sq,children:[S.map(N=>{const T=i.includes(N);return n.jsx("button",{type:"button",onClick:()=>a(N),"aria-pressed":T,title:N,style:{...nq,...T?rq:null},children:N},N)}),S.length===0&&n.jsx("div",{style:{color:gn.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const QW={position:"fixed",inset:0,background:gn.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},TE={width:"min(900px, 100%)",background:gn.tile,border:`1px solid ${gn.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:gn.text},YW={...TE,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},XW={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},JW={fontSize:18,margin:0},ZW={fontSize:14,margin:0,color:gn.text2},eq={width:"100%",background:gn.input,color:gn.text,border:`1px solid ${gn.line}`,borderRadius:12,padding:"10px 12px"},tq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},sq={display:"flex",flexWrap:"wrap",gap:8},nq={background:gn.chip,border:`1px solid ${gn.line}`,padding:"6px 10px",borderRadius:999,color:gn.text},rq={outline:`2px solid ${gn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},iq={background:"#25456B",color:gn.text,border:`1px solid ${gn.accent}`,borderRadius:10,padding:"8px 12px"},nN={background:"transparent",color:gn.text,border:`1px solid ${gn.line}`,borderRadius:10,padding:"8px 12px"},aq=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=aq,document.head.appendChild(e)}}const mn={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function oq({open:t,onClose:e}){const{searchText:s,setSearchText:r,range:i,setRange:a,sortBy:l,setSortBy:d,quickFav:u,setQuickFav:h,quickActive:p,setQuickActive:g}=Hh(),y=I.useRef(null);if(I.useEffect(()=>{if(!t)return;const S=N=>{N.key==="Escape"&&e()};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[t,e]),I.useEffect(()=>{if(t&&y.current){const S=y.current.querySelector("#sheet-search");S==null||S.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:lq,onClick:S=>{S.target===S.currentTarget&&e()},children:n.jsxs("div",{ref:y,style:cq,children:[n.jsxs("div",{style:dq,children:[n.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:mn.text},children:"Filters"}),n.jsx("button",{type:"button",onClick:e,style:hq,children:"Done"})]}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),n.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:s,onChange:S=>r(S.target.value),"aria-label":"Search",autoComplete:"off",style:CE})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("span",{style:{color:mn.text2,fontSize:12},children:"Range"}),n.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(S=>n.jsx("button",{type:"button","aria-pressed":i===S.value,onClick:()=>a(S.value),style:{...Xv,...i===S.value?Jv:null},children:S.label},S.label))})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:mn.text2,fontSize:12},children:"Sort"}),n.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:l,onChange:S=>d(S.target.value),"aria-label":"Sort",autoComplete:"off",style:uq,children:[n.jsx("option",{value:"sum",children:"Base Sum"}),n.jsx("option",{value:"main",children:"Main Base Stat"}),n.jsx("option",{value:"constitution",children:"Constitution"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"delta",children:" Rank"}),n.jsx("option",{value:"lastActivity",disabled:!0,children:"Last activity (disabled)"})]})]}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{type:"button",onClick:()=>h(S=>!S),"aria-pressed":u,style:{...Xv,...u?Jv:null},children:" Favorites"}),n.jsx("button",{type:"button",onClick:()=>g(S=>!S),"aria-pressed":p,style:{...Xv,...p?Jv:null},children:" Active"})]})]})})}const lq={position:"fixed",inset:0,background:mn.backdrop,zIndex:60,display:"grid",alignItems:"end"},cq={background:mn.tile,borderTop:`1px solid ${mn.line}`,borderLeft:`1px solid ${mn.line}`,borderRight:`1px solid ${mn.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:mn.text,maxHeight:"80vh",overflow:"auto"},dq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},CE={width:"100%",background:mn.input,color:mn.text,border:`1px solid ${mn.line}`,borderRadius:12,padding:"10px 12px"},uq={...CE,appearance:"none"},Xv={background:"#14273E",border:`1px solid ${mn.line}`,padding:"6px 10px",borderRadius:999,color:mn.text},Jv={outline:`2px solid ${mn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},hq={background:"#25456B",color:mn.text,border:`1px solid ${mn.accent}`,borderRadius:10,padding:"8px 12px"},pq=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=pq,document.head.appendChild(e)}}function mq(){var i;const t=Hh(),e=(i=t==null?void 0:t.listView)!=null?i:"table",s=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:s;return e==="table"?null:n.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:n.jsxs("div",{children:["Showing ",r.length," / ",s.length]})}),e==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var l,d,u,h,p,g,y;return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[n.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(l=a.name)!=null?l:""}),n.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(d=a.server)!=null?d:""})]}),n.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",n.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(p=a.scrapbook)!=null?p:""]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[n.jsx(Zv,{children:a.active?"Active":"Idle"}),a.favorite&&n.jsx(Zv,{children:" Fav"}),n.jsx(Zv,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(y=a.id)!=null?y:`${a.name}-${a.server}`)})}),e==="buttons"&&n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var l,d,u,h;return n.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(l=a.name)!=null?l:"",n.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(d=a.server)!=null?d:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function Zv({children:t}){return n.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const Tb="stats_public",fq="toplists_players_v1";async function gq(){try{const t=await vn(Gt(dt,Tb,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const s=(t.data()||{}).servers;let r=null;if(Array.isArray(s))r=s;else if(typeof s=="string")try{const a=JSON.parse(s);Array.isArray(a)?r=a:console.warn("[toplistsFirestore] Server bundle string is not an array after parse")}catch(a){console.warn("[toplistsFirestore] Failed to parse server bundle string",a)}if(!Array.isArray(r))return console.warn("[toplistsFirestore] Server bundle missing/invalid, falling back to static config"),{ok:!1,error:"decode_failed",detail:"servers missing or invalid"};const i=[];for(const a of r){if(typeof a!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:a});continue}const l=a.trim();l&&i.push(l)}return{ok:!0,servers:i}}catch(t){return console.error("[toplistsFirestore] Firestore error while loading toplist servers",t),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}function w0(t){const e=a=>(a!=null?a:"").toString().trim().toLowerCase(),s=e(t.group)||"all",r=e(t.timeRange)||"all",i=e(t.sort)||"sum";return`${s}__${r}__${i}`}function xq(t,e){const s=t.toUpperCase(),r=e.toUpperCase();return r==="ALL"?`${s}_all_sum`:`${s}_${r}_sum`}async function vq(){try{const t=await vn(Gt(dt,Tb,"toplists_meta_v1"));if(!t.exists())return null;const e=t.data();return!e||typeof e!="object"?null:e}catch(t){return console.error("[toplistsFirestore] meta decode failed",t),null}}const vr=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},di=t=>typeof t=="string"?t:null,yq=t=>{if(!t||typeof t!="object")return null;const e=di(t.server),s=di(t.name),r=di(t.class);return!e||!s||!r?null:{flag:di(t.flag),deltaRank:vr(t.deltaRank),server:e,name:s,class:r,level:vr(t.level),guild:di(t.guild),main:vr(t.main),con:vr(t.con),sum:vr(t.sum),ratio:vr(t.ratio),mine:vr(t.mine),treasury:vr(t.treasury),lastScan:di(t.lastScan),deltaSum:vr(t.deltaSum)}};async function rN(t){try{const e=await vn(Gt(dt,Tb,fq,"lists",t));if(!e.exists())return{ok:!1,error:"not_found"};const s=e.data()||{},r=di(s.entity)||"players",i=di(s.group),a=di(s.server),l=di(s.metric),d=di(s.timeRange),u=vr(s.limit),h=Array.isArray(s.rows)?s.rows:null;if(r!=="players"||!i||!a||!l||!d||u==null||!h)return console.error("[toplistsFirestore] Decode failed",{entity:r,group:i,server:a,metric:l,timeRange:d,limit:u,hasRowsArray:Array.isArray(s.rows)}),{ok:!1,error:"decode_error",detail:"missing required toplist fields"};const p=[];for(const y of h){const b=yq(y);if(!b)return console.error("[toplistsFirestore] Row decode failed",y),{ok:!1,error:"decode_error",detail:"invalid row shape"};p.push(b)}return{ok:!0,list:{id:t,entity:"players",group:i,server:a,metric:l,timeRange:d,limit:u,updatedAt:vr(s.updatedAt),nextUpdateAt:s.nextUpdateAt!==void 0?vr(s.nextUpdateAt):void 0,ttlSec:s.ttlSec!==void 0?vr(s.ttlSec):void 0,rows:p}}}catch(e){return console.error("[toplistsFirestore] Firestore error",e),{ok:!1,error:"firestore_error",detail:e==null?void 0:e.message}}}async function bq(t){const e=w0(t),s=await rN(e);if(s.ok&&s.list.rows&&s.list.rows.length>0||(t.group||"").toLowerCase()==="all")return s;const i={...t,group:"all"},a=w0(i),l=await rN(a);return l.ok?{ok:!0,list:{...l.list,group:t.group}}:s}const _q={EU:[],US:[],INT:[],Fusion:[]},wq=["EU","US","INT","Fusion"],jq=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function EE(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=jq(r);e[i].add(r)});const s={..._q};return wq.forEach(r=>{s[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),s}const Sq="EU",ey=EE(SE.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),AE=I.createContext(null),iN=(t,e)=>t.length===e.length&&t.every((s,r)=>s===e[r]);function Nq(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&iN(t.servers,e.servers)&&iN(t.classes,e.classes)}function kq(t,e){return t.key===e.key&&t.dir===e.dir}function Tq({children:t}){const[e,s]=I.useState({group:Sq,servers:[],classes:[],timeRange:"all"}),[r,i]=I.useState({key:"level",dir:"desc"}),[a,l]=I.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null}),d=I.useRef(new Map),[u,h]=I.useState(null),[p,g]=I.useState(null),[y,b]=I.useState(ey),S=I.useCallback(M=>{s(L=>{const k=typeof M=="function"?M(L):{...L,...M};return Nq(L,k)?L:k})},[]),N=I.useCallback(M=>{i(L=>{const k=typeof M=="function"?M(L):M;return kq(L,k)?L:k})},[]);I.useEffect(()=>{let M=!1;return(async()=>{const L=await gq();if(!M){if(L.ok){const k=EE(L.servers);if(Object.values(k).some(_=>_.length>0)){b(k);return}}b(ey)}})().catch(L=>{M||(console.error("[ToplistsProvider] unexpected error while loading server list",L),b(ey))}),()=>{M=!0}},[]),I.useEffect(()=>{let M=!1;return(async()=>{const L=await vq();M||h(L)})().catch(L=>{M||console.error("[ToplistsProvider] unexpected meta error",L)}),()=>{M=!0}},[]),I.useEffect(()=>{var E,w,A;let M=!1;const L="sum",k=w0({group:e.group,timeRange:e.timeRange,sort:L}),v=d.current.get(k),_=(v==null?void 0:v.list.ttlSec)!=null?v.list.ttlSec*1e3:null,P=v?_==null||Date.now()-v.cachedAt<_:!1;return v&&P?(l({rows:v.list.rows,loading:!1,error:null,lastUpdatedAt:(E=v.list.updatedAt)!=null?E:null,nextUpdateAt:(w=v.list.nextUpdateAt)!=null?w:null,ttlSec:(A=v.list.ttlSec)!=null?A:null,listId:k}),()=>{M=!0}):(l(B=>({...B,listId:k,loading:!0,error:null})),(async()=>{var F,z,H;const B=await bq({group:e.group,timeRange:e.timeRange,sort:L});if(M)return;if(B.ok){d.current.set(k,{list:B.list,cachedAt:Date.now()}),l({rows:B.list.rows,loading:!1,error:null,lastUpdatedAt:(F=B.list.updatedAt)!=null?F:null,nextUpdateAt:(z=B.list.nextUpdateAt)!=null?z:null,ttlSec:(H=B.list.ttlSec)!=null?H:null,listId:k});return}const D=B.detail?` (${B.detail})`:"";let $="Firestore Fehler";B.error==="not_found"?$="Topliste nicht verfuegbar":B.error==="decode_error"&&($="Fehler beim Lesen der Daten"),l({rows:[],loading:!1,error:`${$}${D}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:k})})().catch(B=>{M||(console.error("[ToplistsProvider] unexpected error",B),l({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:k}))}),()=>{M=!0})},[e.group,e.timeRange]),I.useEffect(()=>{var H,K;if(!u){g(null);return}const M=e.servers&&e.servers.length===1?e.servers[0]:"all",L=xq(e.group||"ALL",M||"all"),k=(H=u.thresholds)==null?void 0:H.players,v=typeof(k==null?void 0:k.minChanges)=="number"?k.minChanges:100,_=typeof(k==null?void 0:k.maxAgeDays)=="number"?k.maxAgeDays:7,P=(K=u.scopeChange)==null?void 0:K[L],E=typeof(P==null?void 0:P.lastRebuildAtMs)=="number"?P.lastRebuildAtMs:null,w=typeof(P==null?void 0:P.lastChangeAtMs)=="number"?P.lastChangeAtMs:null,A=typeof(P==null?void 0:P.changedSinceLastRebuild)=="number"?P.changedSinceLastRebuild:0,B=E?new Date(E):null,D=w?new Date(w):null,$=E!=null?(Date.now()-E)/(1e3*60*60*24):1/0,F=v>0?Math.min(1,Math.max(0,A/v)):0,z=!!B&&(_==null||$<=_)&&(v==null||A<v);g({scopeId:L,lastRebuildAt:B,lastChangeAt:D,changesSinceLastRebuild:A,minChanges:v!=null?v:null,maxAgeDays:_!=null?_:null,progress:F,isFresh:z})},[u,e.group,e.servers]);const T=I.useMemo(()=>({player:a,playerRows:a.rows,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:p,serverGroups:y,filters:e,sort:r,setFilters:S,setSort:N}),[a,e,r,y,S,N,p]);return n.jsx(AE.Provider,{value:T,children:t})}function IE(){const t=I.useContext(AE);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}function Cq(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function Eq(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function Aq(){return n.jsx(Tq,{children:n.jsx(Iq,{})})}function Iq(){const t=Hh(),{filterMode:e,setFilterMode:s,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:l,serverSheetOpen:d,setServerSheetOpen:u,servers:h,setServers:p,classes:g,range:y,sortBy:b}=t,{serverGroups:S}=IE();return n.jsxs(n.Fragment,{children:[n.jsxs(wt,{mode:"card",title:"Top Lists",actions:n.jsx(Pq,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?n.jsx(WW,{}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[n.jsx(mq,{}),r==="table"&&n.jsx(Rq,{servers:h!=null?h:[],classes:g!=null?g:[],range:y!=null?y:"all",sortKey:b!=null?b:"level"})]}),n.jsx(KW,{mode:"modal",open:d,onClose:()=>u(!1),serversByRegion:S,selected:h,onToggle:N=>p(T=>T.includes(N)?T.filter(M=>M!==N):[...T,N]),onSelectAllInRegion:N=>{var T;return p((T=S[N])!=null?T:[])},onClearAll:()=>p([])}),n.jsx(oq,{open:e==="sheet"&&a,onClose:()=>l(!1)})]})}function Rq({servers:t,classes:e,range:s,sortKey:r}){var T,M,L;const{playerRows:i,playerLoading:a,playerError:l,playerLastUpdatedAt:d,playerScopeStatus:u,setFilters:h,setSort:p}=IE();I.useEffect(()=>{const k=s==="all"?"all":s===60?"30d":`${s}d`,v=Eq(t);h({servers:t,classes:e,timeRange:k,group:v})},[t,e,s,h]),I.useEffect(()=>{const k=Cq(r);p(k)},[r,p]);const g=k=>k==null?"":new Intl.NumberFormat("en").format(k),y=k=>{if(k==null)return"";const v=g(Math.abs(k));return v?k>0?`+${v}`:`-${v}`:String(k)},b=k=>{if(k==null)return null;const v=k<1e12?k*1e3:k;return new Date(v).toLocaleString()},S=k=>k?k.toLocaleString():"",N=i||[];return n.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[n.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[a?"Loading...":l?"Error":"Ready"," - ",N.length," rows"]}),n.jsx("div",{children:d?`Updated: ${b(d)}`:null})]}),u&&n.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[n.jsxs("span",{children:["Scope ",u.scopeId,"  ",u.changesSinceLastRebuild,"/",(T=u.minChanges)!=null?T:"?"," changes since last rebuild"]}),n.jsxs("span",{children:["Auto rebuild at ",(M=u.minChanges)!=null?M:"?"," changes or after ",(L=u.maxAgeDays)!=null?L:"?"," days"]}),n.jsxs("span",{children:["Last rebuild: ",S(u.lastRebuildAt)]})]}),l&&n.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),n.jsx("div",{style:{wordBreak:"break-all"},children:l}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{padding:"8px 6px"},children:"#"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Flag"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Delta Rank"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Class"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Stats+"})]})}),n.jsxs("tbody",{children:[N.map((k,v)=>{var _,P,E,w;return n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("td",{style:{padding:"8px 6px"},children:v+1}),n.jsx("td",{style:{padding:"8px 6px"},children:(_=k.flag)!=null?_:""}),n.jsx("td",{style:{padding:"8px 6px"},children:y(k.deltaRank)}),n.jsx("td",{style:{padding:"8px 6px"},children:k.server}),n.jsx("td",{style:{padding:"8px 6px"},children:k.name}),n.jsx("td",{style:{padding:"8px 6px"},children:k.class}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.level)}),n.jsx("td",{style:{padding:"8px 6px"},children:(P=k.guild)!=null?P:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.main)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.con)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.sum)}),n.jsx("td",{style:{padding:"8px 6px"},children:(E=k.ratio)!=null?E:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.mine)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(k.treasury)}),n.jsx("td",{style:{padding:"8px 6px"},children:(w=k.lastScan)!=null?w:""}),n.jsx("td",{style:{padding:"8px 6px"},children:y(k.deltaSum)})]},`${k.name}-${k.server}-${v}`)}),a&&N.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"Loading..."})}),!a&&!l&&N.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"No results"})})]})]})})]})}function Pq(){const{filterMode:t,setFilterMode:e,listView:s,setListView:r,setBottomFilterOpen:i,setServerSheetOpen:a}=Hh();return n.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[n.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[n.jsx(aN,{to:"/toplists/players",label:"Players"}),n.jsx(aN,{to:"/toplists/guilds",label:"Guilds"})]}),n.jsx("span",{className:"hidden md:inline-block w-px h-6",style:{background:"#2B4C73"}}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"Filter UI",children:[n.jsx("button",{"aria-pressed":t==="hud",onClick:()=>e("hud"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="hud"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"HUD"}),n.jsx("button",{"aria-pressed":t==="sheet",onClick:()=>e("sheet"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="sheet"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Bottom Sheet"}),n.jsx("button",{onClick:()=>i(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},children:"Open"})]}),n.jsx("button",{onClick:()=>a(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},title:"Open Server Picker",children:"Servers"}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"List View",children:[n.jsx("button",{"aria-pressed":s==="cards",onClick:()=>r("cards"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="cards"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Cards"}),n.jsx("button",{"aria-pressed":s==="buttons",onClick:()=>r("buttons"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="buttons"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Buttons"}),n.jsx("button",{"aria-pressed":s==="table",onClick:()=>r("table"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="table"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Table"})]})]})}function aN({to:t,label:e}){return n.jsx(hs,{to:t,className:({isActive:s})=>["rounded-lg px-3 py-1.5 text-sm text-white border",s?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:e})}const Lq=[{rank:1,name:"Shadow Blades",server:"EU1",avgLevel:480,delta24h:1},{rank:2,name:"Arcane Legion",server:"EU2",avgLevel:472,delta24h:0}];function Dq(){return n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{opacity:.8,fontSize:12},children:"Guilds  snapshot (latest)"}),Lq.map(t=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"56px 1fr 120px 120px",padding:"10px 12px",borderRadius:10,border:"1px solid #2C4A73",background:"#14273E",fontSize:14,alignItems:"center"},children:[n.jsxs("div",{children:["#",t.rank]}),n.jsxs("div",{children:[t.name,"  ",t.server]}),n.jsxs("div",{children:["Avg Lv ",t.avgLevel]}),n.jsxs("div",{children:[" ",t.delta24h>0?`+${t.delta24h}`:t.delta24h," (24h)"]})]},t.rank))]})}function Mq(t="players"){const e=Vr(),{search:s,pathname:r}=ir();return[new URLSearchParams(s).get("tab")||t,d=>{const u=new URLSearchParams(s);u.set("tab",d),e(`${r}?${u.toString()}`,{replace:!1})}]}function Fq(){const[t]=Mq("players");return n.jsx(LW,{children:t==="players"?n.jsx(Aq,{}):n.jsx(Dq,{})})}function Bq(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Browse"})})}function $q(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Rankings"})})}function Oq(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Stats"})})}const Nm={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},Vq={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},er=(t,e)=>Math.min(Math.max(Math.round(t),0),e),Uq=t=>{var s,r,i,a;const e={...Nm,...t||{}};return{...e,class:er(e.class,15),race:er(e.race,8),mouth:er(e.mouth,30),hair:er(e.hair,40),hairColor:er(e.hairColor,12),horn:er(e.horn,10),hornColor:er(e.hornColor,10),brows:er(e.brows,10),eyes:er(e.eyes,20),beard:er(e.beard,15),nose:er(e.nose,10),ears:er(e.ears,10),extra:er(e.extra,20),special:er(e.special,200),showBorder:(s=e.showBorder)!=null?s:!0,background:(r=e.background)!=null?r:Nm.background,frame:(i=e.frame)!=null?i:Nm.frame,mirrorHorizontal:(a=e.mirrorHorizontal)!=null?a:Nm.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function RE({config:t,label:e}){const s=I.useRef(null),r=I.useRef(null),[i,a]=I.useState("idle"),l=I.useMemo(()=>({...Uq(t),background:"",frame:"",showBorder:!1}),[JSON.stringify(t||{})]);I.useEffect(()=>{let u=!1;a("loading");try{const h=s.current;if(!h){a("error");return}const p=new Ek(h,l);r.current=p,a("ready")}catch(h){console.error("[PortraitMaker] failed to initialize",h),u||a("error")}return()=>{var h,p;u=!0;try{(p=(h=r.current)==null?void 0:h.dispose)==null||p.call(h)}catch(g){}r.current=null}},[l]);const d=i!=="ready"?Vq[i]:null;return n.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[n.jsx("div",{className:"avatar-portrait__canvas-shell",children:n.jsx("canvas",{ref:s,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`})}),d&&n.jsx("span",{className:"avatar-portrait__status",children:d})]})}function zq({label:t,size:e=40}){const s=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return n.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:s||"?"})}function Hq({className:t,label:e,size:s=40}){const r=d=>d.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=qs.find(d=>r(d.label)===i)||qs.find(d=>r(d.label).startsWith(i)||i.startsWith(r(d.label))),l=a?Ur(a.iconUrl,s*2):null;return l?n.jsx("div",{className:"player-profile__class-avatar",style:{width:s,height:s},children:n.jsx("img",{src:l,alt:"",draggable:!1})}):n.jsx(zq,{label:e,size:s})}function Gq({data:t,loading:e,actionFeedback:s,onAction:r}){return n.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[n.jsx(RE,{config:t.portrait,label:t.playerName}),n.jsxs("div",{className:"player-profile__hero-body",children:[n.jsxs("div",{className:"player-profile__identity",children:[n.jsx(Hq,{className:t.className,label:t.playerName,size:48}),n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__player-name",children:t.playerName}),n.jsxs("div",{className:"player-profile__player-meta",children:[n.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&n.jsxs("span",{children:[" ",t.guild]}),t.server&&n.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&n.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),t.status&&n.jsx("div",{className:`player-profile__status player-profile__status--${t.status}`,children:t.status==="online"?"aktiv":"inaktiv"})]})]}),n.jsx("div",{className:"player-profile__hero-metrics",children:t.metrics.map(i=>n.jsxs("div",{className:"player-profile__hero-metric",children:[n.jsx("div",{className:"player-profile__hero-metric-label",children:i.label}),n.jsx("div",{className:"player-profile__hero-metric-value",children:i.value}),i.hint&&n.jsx("div",{className:"player-profile__hero-metric-hint",children:i.hint})]},i.label))}),t.badges.length>0&&n.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(i=>n.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${i.tone||"neutral"}`,title:i.hint,children:[i.icon&&n.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:i.icon}),n.jsx("span",{children:i.label}),n.jsx("strong",{children:i.value})]},i.label))}),t.actions.length>0&&n.jsxs("div",{className:"player-profile__hero-actions",children:[t.actions.map(i=>n.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||i.disabled,title:i.title,onClick:()=>r==null?void 0:r(i.key),children:i.label},i.key)),s&&n.jsx("p",{className:"player-profile__hero-feedback",children:s})]})]})]})}function Wq({data:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>n.jsxs("article",{className:"player-profile__card",children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&n.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),n.jsxs("div",{className:"player-profile__section",children:[n.jsxs("header",{className:"player-profile__section-head",children:[n.jsx("h3",{children:"Attribute"}),n.jsx("span",{children:"Basis vs. Gesamt"})]}),n.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>n.jsxs("div",{className:"player-profile__attr-card",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__attr-label",children:e.label}),n.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&n.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),n.jsxs("div",{className:"player-profile__split",children:[n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Resistenzen"})}),n.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]}),n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"konomie"})}),n.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function qq({items:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>n.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[n.jsxs("div",{className:"player-profile__progress-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),n.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),n.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:n.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&n.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function Kq({series:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var s;return n.jsxs("article",{className:"player-profile__trend-card",children:[n.jsxs("div",{className:"player-profile__trend-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),e.subLabel&&n.jsx("div",{className:"player-profile__card-hint",children:e.subLabel})]}),n.jsxs("div",{className:"player-profile__card-value",children:[(s=e.points[e.points.length-1])==null?void 0:s.toLocaleString("de-DE"),e.unit||""]})]}),n.jsx(Xq,{points:e.points})]},e.label)})})}function Qq({rows:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Serververgleich"})}),n.jsx("div",{className:"player-profile__comparison-wrapper",children:n.jsxs("table",{className:"player-profile__comparison",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Kategorie"}),n.jsx("th",{children:"Spieler"}),n.jsx("th",{children:"Cluster"}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.label}),n.jsx("td",{children:e.playerValue}),n.jsx("td",{children:e.benchmark}),n.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function Yq({entries:t}){return n.jsx("div",{className:"player-profile__tab-panel",children:n.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>n.jsxs("li",{children:[n.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),n.jsxs("div",{className:"player-profile__timeline-card",children:[n.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),n.jsx("div",{className:"player-profile__timeline-title",children:e.title}),n.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}function Xq({points:t}){if(!t.length)return n.jsx("div",{className:"player-profile__trend-chart player-profile__trend-chart--empty"});const e=Math.min(...t),s=Math.max(...t),r=Math.max(1,s-e||1),a=t.map((l,d)=>{const u=t.length>1?d/(t.length-1)*100:0,h=100-(l-e)/r*100;return`${d===0?"M":"L"}${u},${h}`}).join(" ");return n.jsx("div",{className:"player-profile__trend-chart",children:n.jsx("svg",{viewBox:"0 0 100 100",role:"img","aria-label":"Verlauf",children:n.jsx("path",{d:a})})})}const Jq=["Statistiken","Charts","Fortschritt","Vergleich","Historie"];function ty(){const t=Xf(),e=t.id||t.pid||t.playerId||t.player||"",s=Vr(),[r,i]=I.useState(!0),[a,l]=I.useState(null),[d,u]=I.useState(null),[h,p]=I.useState("Statistiken"),[g,y]=I.useState(null),b=I.useRef(null);I.useEffect(()=>{let k=!1;async function v(){var _,P,E,w,A,B,D,$,F,z,H,K,q,G,re;i(!0),l(null);try{const se=(e||"").trim();if(!se)throw new Error("Kein Spieler gewhlt.");const U=Gt(dt,`players/${se}/latest/latest`),Y=await vn(U);if(!Y.exists())throw new Error("Spieler nicht gefunden.");const ie=Y.data(),X=typeof ie.values=="object"&&ie.values?ie.values:{},pe=(P=Mu((_=ie.level)!=null?_:X==null?void 0:X.Level))!=null?P:null,ge=((w=(E=ie.className)!=null?E:X==null?void 0:X.Class)!=null?w:null)||null,he=((B=(A=ie.guildName)!=null?A:X==null?void 0:X.Guild)!=null?B:null)||null,ve=($=(D=ie.name)!=null?D:X==null?void 0:X.Name)!=null?$:se,_e=(z=(F=ie.server)!=null?F:X==null?void 0:X.Server)!=null?z:null,ce=(K=Mu((H=ie.totalStats)!=null?H:X==null?void 0:X["Total Stats"]))!=null?K:null,Ce=(re=Mu((G=(q=X==null?void 0:X.Album)!=null?q:X==null?void 0:X["Album %"])!=null?G:X==null?void 0:X.AlbumPct))!=null?re:null,ye=Zq(Mu(ie.timestamp)),Ze=typeof ie.portrait=="object"?ie.portrait:typeof ie.portraitOptions=="object"?ie.portraitOptions:typeof(X==null?void 0:X.portraitOptions)=="object"?X.portraitOptions:void 0;k||u({id:se,name:ve,className:ge,level:pe,guild:he,server:_e,scrapbookPct:Ce,totalStats:ce,lastScanDays:ye,values:X,portraitConfig:Ze})}catch(se){k||(u(null),l((se==null?void 0:se.message)||"Unbekannter Fehler beim Laden."))}finally{k||i(!1)}}return v(),()=>{k=!0}},[e]),I.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const S=I.useMemo(()=>d?nK(d):null,[d]),N=k=>{y(k),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>y(null),3500)},T=async k=>{if(d){if(k==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const v=`${window.location.origin}/players/profile/${d.id}`;try{await navigator.clipboard.writeText(v),N("Profil-Link wurde kopiert.")}catch(_){N("Konnte Link nicht kopieren.")}}return}if(k==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:d.name,text:`Shakes & Fidget Charakter ${d.name}`,url:window.location.href}),N("Profil geteilt.")}catch(v){N("Teilen abgebrochen.")}return}if(k==="guild"&&d.guild){s(`/guilds?search=${encodeURIComponent(d.guild)}`);return}if(k==="rescan"){N("Rescan-Queue folgt  aktuell noch Platzhalter.");return}}},M=()=>{if(!S)return null;switch(h){case"Statistiken":return n.jsx(Wq,{data:S.stats});case"Charts":return n.jsx(Kq,{series:S.charts});case"Fortschritt":return n.jsx(qq,{items:S.progress});case"Vergleich":return n.jsx(Qq,{rows:S.comparison});case"Historie":return n.jsx(Yq,{entries:S.history});default:return null}},L=()=>n.jsxs("div",{className:"player-profile__loading",children:[n.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),n.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>s("/"),style:{marginTop:12},children:"Zur Startseite"})]});return n.jsx(wt,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsxs("div",{className:"player-profile",children:[r&&!d&&n.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!d||!S)&&L(),S&&n.jsxs(n.Fragment,{children:[n.jsx(Gq,{data:S.hero,loading:r,actionFeedback:g,onAction:T}),n.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:Jq.map(k=>{const v=h===k;return n.jsx("button",{type:"button",role:"tab","aria-selected":v,className:`player-profile__tab-button ${v?"player-profile__tab-button--active":""}`,onClick:()=>p(k),children:k},k)})}),M()]})]})})}const Mu=t=>{if(t==null||t==="")return null;const e=String(t).replace(/[^0-9.-]/g,""),s=Number(e);return Number.isFinite(s)?s:null},Zq=t=>{if(!t)return null;const e=Date.now()/1e3,s=Math.max(0,e-t);return Math.floor(s/86400)},sy=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),eK=t=>{const e=new Map;return Object.entries(t||{}).forEach(([s,r])=>e.set(sy(s),r)),{number(s,r=null){for(const i of s){const a=Mu(e.get(sy(i)));if(a!=null)return a}return r},text(s,r=null){for(const i of s){const a=e.get(sy(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},PE=t=>{let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619);return()=>{e+=1831565813;let s=Math.imul(e^e>>>15,1|e);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}},Gs=(t,e="")=>t==null?e:t.toLocaleString("de-DE"),rf=t=>t==null?"":`${Math.round(t)}%`,oN=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,tK={warrior:1,berserker:1,paladin:1,scout:5,assassin:5,"demon hunter":6,bard:6,mage:8,"battle mage":8,necromancer:9,druid:9},sK=t=>{var r;if(t.portraitConfig)return t.portraitConfig;const e=PE(t.id||t.name),s=tK[((r=t.className)==null?void 0:r.toLowerCase())||""]||Math.floor(e()*10)+1;return{genderName:e()>.5?"female":"male",class:s,race:Math.floor(e()*8)+1,hair:Math.floor(e()*40)+1,hairColor:Math.floor(e()*10)+1,mouth:Math.floor(e()*20)+1,eyes:Math.floor(e()*20)+1,brows:Math.floor(e()*10)+1,beard:Math.floor(e()*10),nose:Math.floor(e()*10)+1,ears:Math.floor(e()*10)+1,extra:Math.floor(e()*10),background:e()>.5?"gradient":"retroGradient",frame:e()>.8?"goldenFrame":""}},nK=t=>{var z,H,K,q,G,re,se,U,Y,ie,X;const e=t.values||{},s=eK(e),r=PE(t.id),i=(z=t.level)!=null?z:s.number(["level"]),a=(H=t.scrapbookPct)!=null?H:s.number(["album","scrapbook","albumpct"]),l=s.number(["honor","ehre"]),d=(K=t.totalStats)!=null?K:s.number(["totalstats","stats"]),p=[["Base Strength","Strke","basestrength"],["Base Dexterity","Geschick","basedexterity"],["Base Intelligence","Intelligenz","baseintelligence"],["Base Constitution","Konstitution","baseconstitution"],["Base Luck","Glck","baseluck"]].map(pe=>{var ge;return(ge=s.number(pe,0))!=null?ge:0}).reduce((pe,ge)=>pe+(ge!=null?ge:0),0),g=a!=null?a:Math.round(r()*80+10),y=(q=s.number(["fortresslevel","fortress"]))!=null?q:Math.round(r()*20)+30,b=(G=s.number(["underworld","underworldlevel"]))!=null?G:Math.round(r()*10)+20,S=(re=s.number(["tower","towerfloor"]))!=null?re:Math.round(r()*90)+10,N=(se=s.number(["pets","petprogress"]))!=null?se:Math.round(r()*50)+25,T=(i!=null?i:0)*1200+p+Math.round((a!=null?a:0)*3200),M=(U=s.text(["mount","reittier"]))!=null?U:"Greifendrachen (280%)",L=(Y=s.text(["guildrole","role"]))!=null?Y:"Member",k=s.number(["hofrank","halloffamerank","hofposition"]),v=[{label:"Level",value:i?`Lvl ${Gs(i)}`:""},{label:"Power Score",value:Gs(T)},{label:"Scrapbook",value:rf(g)},{label:"Total Stats",value:Gs(d)}],_=[{label:"Mount",value:M,tone:"neutral"},{label:"Honor",value:Gs(l),tone:"success"},{label:"Gildenrolle",value:L,tone:"warning"},{label:"HoF",value:k?`#${Gs(k)}`:"",tone:"neutral"}],P={playerName:t.name,className:t.className,guild:t.guild,server:t.server,levelLabel:i?`Level ${Gs(i)}`:void 0,lastScanLabel:(ie=oN(t.lastScanDays))!=null?ie:void 0,status:t.lastScanDays!=null&&t.lastScanDays<=2?"online":"offline",metrics:v,badges:_,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guild},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:sK(t)},E=[{label:"Strke",base:["Base Strength"],total:["Strength"]},{label:"Geschick",base:["Base Dexterity"],total:["Dexterity"]},{label:"Intelligenz",base:["Base Intelligence"],total:["Intelligence"]},{label:"Konstitution",base:["Base Constitution"],total:["Constitution"]},{label:"Glck",base:["Base Luck"],total:["Luck"]}],w={summary:[{label:"Power Score",value:Gs(T),hint:"Level * SumBase"},{label:"Honor",value:Gs(l)},{label:"HoF Platz",value:k?`#${Gs(k)}`:""},{label:"Letzter Scan",value:(X=oN(t.lastScanDays))!=null?X:""}],attributes:E.map(pe=>({label:pe.label,baseLabel:Gs(s.number(pe.base)),totalLabel:s.number(pe.total)!=null?`Gesamt ${Gs(s.number(pe.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(r()*40+40)}%`},{label:"Schatten",value:`${Math.round(r()*40+35)}%`},{label:"Frost",value:`${Math.round(r()*30+30)}%`},{label:"Licht",value:`${Math.round(r()*20+30)}%`}],resources:[{label:"Gold/h",value:`${Gs(Math.round((i!=null?i:1)*(r()*8+3)))}k`},{label:"XP/h",value:`${Gs(Math.round((i!=null?i:1)*(r()*5+2)))}k`},{label:"Mount Bonus",value:M},{label:"Quest Slots",value:`${Math.round(r()*2)+3}`}]},A=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(g!=null?g:0)/100),targetLabel:`${rf(g)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:g!=null&&g>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,S/100),targetLabel:`Ebene ${Math.round(S)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudeausbau",progress:Math.min(1,y/25),targetLabel:`Lvl ${Math.round(y)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,b/30),targetLabel:`Lvl ${Math.round(b)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,N/100),targetLabel:`${Math.round(N)} / 100`,meta:"Habitate offen"}],B=(pe,ge=.12)=>{const he=pe!=null?pe:Math.round(r()*100),ve=[];let _e=he*.85;for(let ce=0;ce<8;ce++)_e+=_e*(r()*ge-ge/2),ve.push(Math.max(0,Math.round(_e)));return ve[ve.length-1]=he,ve},D=[{label:"Level Verlauf",points:B(i!=null?i:0,.06),unit:"",subLabel:"7 Tage"},{label:"Total Stats",points:B(d!=null?d:0,.18),unit:"",subLabel:"Summe Attribute"},{label:"Honor",points:B(l!=null?l:0,.25),unit:"",subLabel:"Hall of Fame"}],$=[{label:"Level",playerValue:i?`Lvl ${Gs(i)}`:"",benchmark:i?`Lvl ${Gs(Math.round(i*.92))}`:"",diffLabel:i?`+${Math.round(i*.08)}`:"",trend:"up"},{label:"Power Score",playerValue:Gs(T),benchmark:Gs(Math.round(T*.9)),diffLabel:`+${Gs(Math.round(T*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:rf(g),benchmark:`${Math.min(100,Math.round((g!=null?g:60)-8))}%`,diffLabel:g!=null?`+${Math.round(g-60)}%`:"",trend:g!=null&&g>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(y)}`,benchmark:`Lvl ${Math.round(y-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(b)}`,benchmark:`Lvl ${Math.round(b-2)}`,diffLabel:"+2",trend:"neutral"}],F=rK(t,s,r);return{hero:P,stats:w,progress:A,charts:D,comparison:$,history:F}},rK=(t,e,s)=>{var l,d;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:km(Math.round(s()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:km(2),title:"Level-Up",description:`Erreichte Level ${Gs(t.level)}`,tag:"Level"}),r.push({dateLabel:km(10),title:"Scrapbook Meilenstein",description:`${rf((l=t.scrapbookPct)!=null?l:Math.round(s()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:km(18),title:"Festung",description:`Fortress Level ${Math.round((d=e.number(["fortress"],Math.round(s()*20+15)))!=null?d:0)}`,tag:"Festung"}),r},km=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function hd(t,e=300){const[s,r]=ee.useState(t);return ee.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function pd(t){const e=ee.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[s,r]=ee.useState(()=>e());return ee.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=l=>r(l.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),s}const iK='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function md(t,e){ee.useEffect(()=>{var l;if(!e)return;const s=t.current;if(!s)return;const r=()=>s.querySelectorAll(iK);(l=r()[0])==null||l.focus();const a=d=>{if(d.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],p=u[u.length-1];d.shiftKey?document.activeElement===h&&(d.preventDefault(),p.focus()):document.activeElement===p&&(d.preventDefault(),h.focus())};return s.addEventListener("keydown",a),()=>s.removeEventListener("keydown",a)},[t,e])}const aK="_page_1jzf5_1",oK="_header_1jzf5_13",lK="_headerStack_1jzf5_25",cK="_kicker_1jzf5_37",dK="_title_1jzf5_53",uK="_subtitle_1jzf5_65",hK="_headerActions_1jzf5_79",pK="_secondaryAction_1jzf5_89",mK="_infoStrip_1jzf5_131",fK="_infoCard_1jzf5_143",gK="_infoLabel_1jzf5_163",xK="_inlineFilters_1jzf5_177",vK="_filterField_1jzf5_197",yK="_select_1jzf5_227",bK="_searchInput_1jzf5_229",_K="_layout_1jzf5_249",wK="_selectionColumn_1jzf5_261",jK="_selectionCard_1jzf5_273",SK="_slotHeader_1jzf5_293",NK="_slotLabel_1jzf5_307",kK="_slotStatus_1jzf5_323",TK="_clearButton_1jzf5_335",CK="_slotBody_1jzf5_355",EK="_resultList_1jzf5_367",AK="_emptyResult_1jzf5_385",IK="_resultItem_1jzf5_397",RK="_resultName_1jzf5_421",PK="_resultMeta_1jzf5_433",LK="_selectButton_1jzf5_445",DK="_selectedCard_1jzf5_465",MK="_selectedName_1jzf5_479",FK="_selectedMeta_1jzf5_489",BK="_selectedTagline_1jzf5_491",$K="_comparisonColumn_1jzf5_503",OK="_comparisonCard_1jzf5_515",VK="_comparisonHeader_1jzf5_535",UK="_sectionTitle_1jzf5_551",zK="_diffBadge_1jzf5_561",HK="_metricGrid_1jzf5_579",GK="_metricCard_1jzf5_591",WK="_metricLabel_1jzf5_611",qK="_metricValues_1jzf5_627",KK="_metricDivider_1jzf5_643",QK="_metricDelta_1jzf5_653",YK="_freshnessRow_1jzf5_665",XK="_freshnessItem_1jzf5_677",JK="_freshnessBadge_1jzf5_685",ZK="_freshnessPopover_1jzf5_733",eQ="_popoverTitle_1jzf5_757",tQ="_classCard_1jzf5_807",sQ="_classGrid_1jzf5_827",nQ="_classColumn_1jzf5_837",rQ="_classBar_1jzf5_857",iQ="_classSlice_1jzf5_873",aQ="_classLegend_1jzf5_907",oQ="_emptyState_1jzf5_931",lQ="_supportPanels_1jzf5_947",cQ="_checklistCard_1jzf5_959",dQ="_infoCardExtended_1jzf5_961",uQ="_checklist_1jzf5_959",hQ="_infoNote_1jzf5_1033",pQ="_sheetOverlay_1jzf5_1045",mQ="_sheetOpen_1jzf5_1073",fQ="_sheet_1jzf5_1045",gQ="_sheetHeader_1jzf5_1105",xQ="_sheetBody_1jzf5_1119",ae={page:aK,header:oK,headerStack:lK,kicker:cK,title:dK,subtitle:uK,headerActions:hK,secondaryAction:pK,infoStrip:mK,infoCard:fK,infoLabel:gK,inlineFilters:xK,filterField:vK,select:yK,searchInput:bK,layout:_K,selectionColumn:wK,selectionCard:jK,slotHeader:SK,slotLabel:NK,slotStatus:kK,clearButton:TK,slotBody:CK,resultList:EK,emptyResult:AK,resultItem:IK,resultName:RK,resultMeta:PK,selectButton:LK,selectedCard:DK,selectedName:MK,selectedMeta:FK,selectedTagline:BK,comparisonColumn:$K,comparisonCard:OK,comparisonHeader:VK,sectionTitle:UK,diffBadge:zK,metricGrid:HK,metricCard:GK,metricLabel:WK,metricValues:qK,metricDivider:KK,metricDelta:QK,freshnessRow:YK,freshnessItem:XK,freshnessBadge:JK,freshnessPopover:ZK,popoverTitle:eQ,classCard:tQ,classGrid:sQ,classColumn:nQ,classBar:rQ,classSlice:iQ,classLegend:aQ,emptyState:oQ,supportPanels:lQ,checklistCard:cQ,infoCardExtended:dQ,checklist:uQ,infoNote:hQ,sheetOverlay:pQ,sheetOpen:mQ,sheet:fQ,sheetHeader:gQ,sheetBody:xQ},LE=["Ari","Borin","Celeste","Doran","Lena","Nix"],vQ={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},Cb={raid:"Raid",event:"Event",task:"Task"},Eb={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},lN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},cN={urgent:4,high:3,medium:2,low:1},yQ={"7d":7,"30d":30,"90d":90,all:null},ny={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},bQ=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:rl(5,20),createdAt:Mn(2,14),updatedAt:Mn(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Cm(3),nextUpdateAt:Tm(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:rl(2,12),createdAt:Mn(4,9),updatedAt:Mn(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Cm(8),nextUpdateAt:Tm(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:rl(7,17),createdAt:Mn(1,10),updatedAt:Mn(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Cm(22),nextUpdateAt:Tm(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:Mn(1,19),createdAt:Mn(9,10),updatedAt:Mn(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:Mn(1,19),nextUpdateAt:rl(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:rl(12,18),createdAt:Mn(6,15),updatedAt:Mn(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Cm(1),nextUpdateAt:Tm(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:rl(18,13),createdAt:Mn(12,18),updatedAt:Mn(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:Mn(2,16),nextUpdateAt:rl(4,9)}];function rl(t,e=12){const s=new Date;return s.setDate(s.getDate()+t),s.setHours(e,0,0,0),s.toISOString()}function Tm(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function Mn(t,e=12){const s=new Date;return s.setDate(s.getDate()-t),s.setHours(e,0,0,0),s.toISOString()}function Cm(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function dN(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function _Q(t,e,s){const r=Date.now(),i=yQ[e.range];return t.filter(a=>{const l=s===""||a.title.toLowerCase().includes(s.toLowerCase())||a.description.toLowerCase().includes(s.toLowerCase()),d=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let p=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),y=r+i*24*60*60*1e3;p=g<=y}return l&&d&&u&&h&&p})}function wQ(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"dueAt":l=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":l=cN[i.priority]-cN[a.priority];break;case"title":l=i.title.localeCompare(a.title);break;default:l=0}return s==="asc"?l:-l}),r}function jQ(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function $i(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Gh(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function yh(t,e){const s=new Date(t).getTime()-e;if(s<=0)return"faellig";const r=Math.floor(s/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function SQ(t){return t.length===0?null:t.reduce((e,s)=>e?lN[s.freshness]>lN[e.freshness]?s:e:s,null)}const j0=["EU-01","EU-02","US-01","US-02","ASIA-01"],Qu=new Intl.NumberFormat("de-DE");function NQ(){const t=pd("(min-width: 768px)"),[e,s]=ee.useState("all"),[r,i]=ee.useState(null),[a,l]=ee.useState(null),[d,u]=ee.useState(null),[h,p]=ee.useState(null),g=[r,a].filter(Boolean).length,y=ee.useMemo(()=>{const D=[d,h].filter(Boolean);if(!D.length)return 0;const $=D.reduce((F,z)=>{var H;return F+((H=z.level)!=null?H:0)},0);return Math.round($/D.length)},[d,h]),[b,S]=ee.useState(null),[N,T]=ee.useState(!1),M=ee.useRef(null);md(M,N&&!t),ee.useEffect(()=>{t&&T(!1)},[t]),ee.useEffect(()=>{if(!b)return;const D=F=>{const z=F.target;z&&(z.closest(`.${ae.freshnessBadge}`)||z.closest(`.${ae.freshnessPopover}`)||S(null))},$=F=>{F.key==="Escape"&&S(null)};return document.addEventListener("pointerdown",D),document.addEventListener("keydown",$),()=>{document.removeEventListener("pointerdown",D),document.removeEventListener("keydown",$)}},[b]);const L=ee.useMemo(()=>d?yh(d.nextUpdateAt,Date.now()):"",[d]),k=ee.useMemo(()=>h?yh(h.nextUpdateAt,Date.now()):"",[h]),v=()=>T(!0),_=()=>T(!1),P=D=>{s(D)},E=(D,$)=>{D==="playerA"?(i($.id),u($)):(l($.id),p($))},w=D=>{D==="playerA"?(i(null),u(null)):(l(null),p(null))},A=D=>{S($=>$===D?null:D)},B=d&&h;return n.jsxs(wt,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[n.jsxs("div",{className:ae.page,children:[n.jsxs("header",{className:ae.header,children:[n.jsxs("div",{className:ae.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Players"}),n.jsx("h1",{className:ae.title,children:"Spieler vergleichen"}),n.jsx("p",{className:ae.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),n.jsx("div",{className:ae.headerActions,children:!t&&n.jsx("button",{type:"button",className:ae.secondaryAction,onClick:v,children:"Filter"})})]}),n.jsxs("div",{className:ae.infoStrip,children:[n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Slots gefuellt"}),n.jsxs("strong",{children:[Qu.format(g)," Spieler"]})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Durchschnittslevel"}),n.jsx("strong",{children:Qu.format(y)})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ae.inlineFilters,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:D=>P(D.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(D=>n.jsx("option",{value:D,children:D},D))]})]})})]}),n.jsxs("div",{className:ae.layout,children:[n.jsxs("section",{className:ae.selectionColumn,children:[n.jsx(uN,{title:"Spieler A",slot:"playerA",selectedPlayer:d,excludeId:a,onSelect:E,onClear:w,serverFilter:e,onServerChange:P}),n.jsx(uN,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:E,onClear:w,serverFilter:e,onServerChange:P})]}),n.jsxs("section",{className:ae.comparisonColumn,children:[n.jsxs("div",{className:ae.comparisonCard,children:[n.jsxs("div",{className:ae.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Vergleich"}),n.jsx("h2",{className:ae.sectionTitle,children:"Kennzahlen"})]}),B&&n.jsxs("span",{className:ae.diffBadge,children:["Delta Level: ",Qu.format(d.level-h.level)]})]}),B?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ae.metricGrid,children:[n.jsx(hN,{label:"Level",aValue:d.level,bValue:h.level}),n.jsx(hN,{label:"Scrapbook (%)",aValue:d.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),n.jsx(kQ,{playerA:d,playerB:h,countdownA:L,countdownB:k,activePopover:b,onToggle:A})]}),n.jsx(TQ,{playerA:d,playerB:h})]}):n.jsx("div",{className:ae.emptyState,children:n.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ae.supportPanels,children:[n.jsx(CQ,{}),n.jsx(EQ,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ae.sheetOverlay} ${N?ae.sheetOpen:""}`,children:n.jsxs("div",{className:ae.sheet,role:"dialog","aria-modal":"true",ref:M,children:[n.jsxs("header",{className:ae.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ae.clearButton,onClick:_,children:"Schliessen"})]}),n.jsx("div",{className:ae.sheetBody,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:D=>P(D.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(D=>n.jsx("option",{value:D,children:D},D))]})]})})]})})]})}function uN({title:t,slot:e,selectedPlayer:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=ee.useState(""),p=hd(u,300);ee.useEffect(()=>{h("")},[s,l]);const{results:g,loading:y}=AQ(p,l,r);return n.jsxs("article",{className:ae.selectionCard,children:[n.jsxs("div",{className:ae.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.slotLabel,children:t}),n.jsx("p",{className:ae.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ae.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ae.slotBody,children:[n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),j0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ae.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ae.resultList,role:"list",children:[y&&n.jsx("div",{className:ae.emptyResult,children:"Lade..."}),!y&&g.length===0&&n.jsx("div",{className:ae.emptyResult,children:"Kein Spieler gefunden."}),!y&&g.map(b=>n.jsxs("div",{className:ae.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.resultName,children:b.name}),n.jsxs("p",{className:ae.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),n.jsx("button",{type:"button",className:ae.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ae.selectedCard,children:[n.jsx("p",{className:ae.selectedName,children:s.name}),n.jsxs("p",{className:ae.selectedMeta,children:[s.server," - Level ",s.level," - ",s.className," -"," ",s.guildName||"ohne Gilde"]}),n.jsx("p",{className:ae.selectedTagline,children:s.tagline})]})]})]})}function hN({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):Qu.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):Qu.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:t}),n.jsxs("div",{className:ae.metricValues,children:[n.jsx("span",{"aria-label":"Spieler A",children:i(e)}),n.jsx("span",{className:ae.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Spieler B",children:i(s)})]}),n.jsx("p",{className:ae.metricDelta,children:l})]})}function kQ({playerA:t,playerB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Freshness"}),n.jsx("div",{className:ae.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ae.freshnessItem,children:[n.jsxs("button",{type:"button",className:ae.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:Gh(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ae.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ae.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Eb[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:$i(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[$i(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function TQ({playerA:t,playerB:e}){const s=ee.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return n.jsxs("div",{className:ae.classColumn,children:[n.jsx("h3",{children:i.name}),n.jsx("div",{className:ae.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(l=>n.jsxs("span",{style:{width:`${l.percent}%`},className:ae.classSlice,children:[n.jsx("small",{children:l.label}),n.jsxs("strong",{children:[l.percent,"%"]})]},`${i.id}-${l.label}`))})]})};return n.jsxs("div",{className:ae.classCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Stat-Verteilung"}),n.jsx("div",{className:ae.classGrid,children:[t,e].map(r)}),s.length>0&&n.jsx("ul",{className:ae.classLegend,children:s.map(i=>n.jsx("li",{children:i},i))})]})}function CQ(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return n.jsxs("section",{className:ae.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ae.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function EQ(){return n.jsxs("section",{className:ae.infoCardExtended,children:[n.jsx("h3",{children:"Matchup-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ae.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),n.jsx("button",{type:"button",className:ae.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function AQ(t,e,s){const[r,i]=ee.useState([]),[a,l]=ee.useState(!1);return ee.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const p=d.toLowerCase(),g=vg(dt,"latest"),y=await pn(Vn(g,mo("nameFold"),vl(p),yl(p+""),Un(15))),b=await pn(Vn(g,jl("nameNgrams","array-contains",p),Un(15))),S=new Set,N=[],T=M=>{var q,G,re,se,U,Y,ie,X,pe,ge,he,ve,_e,ce,Ce,ye,Ze,it,Rt,rs,cs,Os,ws,Ee,Pe,Ie,Ue,nt,pt;const L=M.data(),v=(q=M.ref.parent)==null?void 0:q.parent,_=v==null?void 0:v.parent;if((_==null?void 0:_.id)!=="players")return;const E=(re=(G=v==null?void 0:v.id)!=null?G:L.playerIdentifier)!=null?re:M.id;if(!E||S.has(E)||s&&E===s)return;const w=(Y=(U=L.name)!=null?U:(se=L.values)==null?void 0:se.Name)!=null?Y:"Unbekannter Spieler",A=(pe=(X=L.server)!=null?X:(ie=L.values)==null?void 0:ie.Server)!=null?pe:"Unknown";if(e!=="all"&&A!==e)return;const B=(ce=(_e=(he=L.className)!=null?he:(ge=L.values)==null?void 0:ge.Class)!=null?_e:(ve=L.values)==null?void 0:ve.Class)!=null?ce:"Unbekannte Klasse",D=(Ze=(ye=L.guildName)!=null?ye:(Ce=L.values)==null?void 0:Ce.Guild)!=null?Ze:"",$=ao(L.level)||ao((it=L.values)==null?void 0:it.Level)||ao((Rt=L.values)==null?void 0:Rt.Level),F=ao(L.scrapbookPct)||ao((rs=L.values)==null?void 0:rs["Album %"])||ao((cs=L.values)==null?void 0:cs.AlbumPct)||ao((Os=L.values)==null?void 0:Os["Scrapbook %"]),z=(Pe=(Ee=L.updatedAt)!=null?Ee:(ws=L.values)==null?void 0:ws.UpdatedAt)!=null?Pe:L.timestamp?new Date(L.timestamp*1e3).toISOString():new Date().toISOString(),H=(Ie=L.nextUpdateAt)!=null?Ie:RQ(12),K=IQ((Ue=L.values)!=null?Ue:L.stats);S.add(E),N.push({id:E,name:w,tagline:(nt=L.tagline)!=null?nt:D?`Mitglied in ${D}`:B,server:A,className:B,guildName:D,level:$||0,scrapbookPct:F,lastScanAt:z,updatedAt:z,nextUpdateAt:H,freshness:(pt=L.freshness)!=null?pt:"unknown",stats:K})};y.forEach(T),b.forEach(T),u||(N.sort((M,L)=>M.name.localeCompare(L.name)),i(N))}catch(p){console.error("[Players Compare] player search failed",p),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const pN={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function IQ(t={}){const e=Object.keys(pN).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:pN[r],value:ao(i)}}).filter(r=>r.value>0),s=e.reduce((r,i)=>r+i.value,0);return s?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/s*100))})):[]}function ao(t){const e=Number(t);return Number.isFinite(e)?e:0}function RQ(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function PQ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(mN,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),n.jsx(mN,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function mN({to:t,title:e,desc:s}){return n.jsxs(qt,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function LQ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function DQ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}function MQ(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}const FQ={weltenimwandel:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",freedom:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59"};function BQ(t){var s;const e=MQ(t);return(s=FQ[e])!=null?s:null}function $Q(t,e=128){var a,l;const s=BQ(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=Rl(s))!=null?a:null,i=r&&(l=Ur(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function bh(t,e=128){return $Q(t,e).thumb}const Vl={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},Dg=(t,e)=>({...t||{},...e||{}}),fN=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),s=Math.floor((Date.now()-e.getTime())/864e5);return s<=0?"today":s===1?"yesterday":`${s}d ago`},OQ=t=>Object.values(t||{}).reduce((e,s)=>e+(s||0),0),on=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function VQ(t){var y,b,S,N,T,M,L,k;const e=on(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const s=on(t==null?void 0:t.baseMain),r=on(t==null?void 0:t.conBase);if(s!=null&&r!=null)return s+r;const i=(t==null?void 0:t.baseStats)||{},a=on(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const l=on(i==null?void 0:i.main),d=on(i==null?void 0:i.con);if(l!=null&&d!=null)return l+d;const u=(t==null?void 0:t.values)||{},h=(b=(y=on(u==null?void 0:u.SumBaseTotal))!=null?y:on(u==null?void 0:u.sumBaseTotal))!=null?b:on(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const p=(T=(N=(S=on(u==null?void 0:u.Main))!=null?S:on(u==null?void 0:u.main))!=null?N:on(u==null?void 0:u.BaseMain))!=null?T:on(u==null?void 0:u.baseMain),g=(k=(L=(M=on(u==null?void 0:u.Con))!=null?M:on(u==null?void 0:u.con))!=null?L:on(u==null?void 0:u.ConBase))!=null?k:on(u==null?void 0:u.conBase);return p!=null&&g!=null?p+g:null}function il(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function UQ(t,e=56){if(!t)return;const s=il(t),r=qs.find(i=>il(i.label)===s||il(i.key)===s)||qs.find(i=>il(i.label).startsWith(s)||s.startsWith(il(i.label))||il(i.key).startsWith(s)||s.startsWith(il(i.key)));return r?Ur(r.iconUrl,e):void 0}function zQ({name:t,memberClass:e,online:s,theme:r=Vl}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=UQ(e,56);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const HQ={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},GQ=({role:t})=>n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(HQ[t]||""),children:t});function gN(t,e){const s=(t!=null?t:"").trim();if(s)return s;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function WQ(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,s=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:s!=null&&r!=null?s+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Em({label:t,value:e,theme:s=Vl}){return n.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:s.border,background:s.tile},children:[n.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),n.jsx("div",{className:"text-lg font-semibold",style:{color:s.title},children:e})]})}function qQ({member:t,theme:e,actions:s,extraKPIs:r}){var p,g,y,b,S,N,T,M,L;if(!t)return null;const i=Dg(Vl,e),a=t,l=gN((g=(p=a.guildJoined)!=null?p:a.joinedAt)!=null?g:null,(y=a.guildJoinedMs)!=null?y:null),d=gN((b=a.lastActivity)!=null?b:null,(S=a.lastActivityMs)!=null?S:typeof a.lastOnline=="number"?a.lastOnline:null),u=WQ(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return n.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),n.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[n.jsx("div",{className:"shrink-0",children:n.jsx(zQ,{name:t.name,memberClass:(M=(T=a.class)!=null?T:(N=a.values)==null?void 0:N.Class)!=null?M:null,online:a.online,theme:i})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&n.jsx(GQ,{role:a.role})]}),n.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",l,"  Last ",d]})]}),n.jsx("div",{className:"ml-auto",children:s})]}),n.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsx(Em,{label:"Level",value:(L=a.level)!=null?L:"",theme:i}),typeof a.scrapbook=="number"&&n.jsx(Em,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),n.jsx(Em,{label:"Sum Base",value:u,theme:i}),n.jsx(Em,{label:"Total Stats",value:h,theme:i}),r]})]})}function al(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function KQ(t,e=40){if(!t)return;const s=al(t);let r=qs.find(i=>al(i.label)===s||al(i.key)===s)||qs.find(i=>al(i.label).startsWith(s)||s.startsWith(al(i.label))||al(i.key).startsWith(s)||s.startsWith(al(i.key)));return r?Ur(r.iconUrl,e):void 0}function QQ({name:t,memberClass:e,online:s,theme:r=Vl}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=KQ(e,40);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const YQ=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function XQ({rows:t,selId:e,onSelect:s,rightCols:r,theme:i}){const a=Dg(Vl,i);return n.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[n.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),n.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[n.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((l,d)=>{var u,h,p;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(d%2?"bg-slate-800/10":"")+(l.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[n.jsx(QQ,{name:l.name,memberClass:(p=(h=l.class)!=null?h:(u=l.values)==null?void 0:u.Class)!=null?p:null,online:l.online,theme:a}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[l.class,l.server?`  ${l.server}`:""]})]}),n.jsx("div",{className:"justify-self-end",children:n.jsx(YQ,{role:l.role})}),r(l)]},l.id)})]})]})}function ol(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function JQ(t,e=40){if(!t)return;const s=ol(t);let r=qs.find(i=>ol(i.label)===s||ol(i.key)===s)||qs.find(i=>ol(i.label).startsWith(s)||s.startsWith(ol(i.label))||ol(i.key).startsWith(s)||s.startsWith(ol(i.key)));return r?Ur(r.iconUrl,e):void 0}function ZQ({rows:t,selId:e,onSelect:s,footer:r,theme:i}){const a=Dg(Vl,i);return n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(l=>{var y,b,S,N,T,M,L,k,v;const d=l,u=l.name.slice(0,2).toUpperCase(),h=JQ((S=(b=d.class)!=null?b:(y=d.values)==null?void 0:y.Class)!=null?S:null,40),p=typeof d.level=="number"?d.level:typeof((N=d.values)==null?void 0:N.Level)=="number"?d.values.Level:"",g=typeof d.scrapbook=="number"?`${d.scrapbook}%`:typeof((T=d.values)==null?void 0:T.Scrapbook)=="number"?`${d.values.Scrapbook}%`:null;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(l.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:l.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[h?n.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:_=>{const P=_.currentTarget.parentElement;P&&(P.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(k=(L=d.class)!=null?L:(M=d.values)==null?void 0:M.Class)!=null?k:"",d.server?`  ${d.server}`:""]})]}),n.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(v=d.role)!=null?v:""})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:p})]}),g&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),n.jsx("div",{className:"mt-3",children:r(l)})]},l.id)})})}const eY=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(s=>{const r=t[s];typeof r=="number"&&(e[s]=r)}),Object.keys(e).length?e:void 0};function tY({members:t,defaultView:e="list",defaultQuery:s="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:l,renderActions:d,renderKPIs:u,theme:h}){var B;const p=I.useMemo(()=>Dg(Vl,h),[h]),[g,y]=I.useState(e),[b,S]=I.useState(s),[N,T]=I.useState(r.key),[M,L]=I.useState(r.dir),[k,v]=I.useState((B=t[0])==null?void 0:B.id),_=a!=null?a:k,P=D=>{a||v(D);const $=t.find(F=>F.id===D);$&&l&&l($)},E=I.useMemo(()=>{const D=b.trim().toLowerCase();return D?t.filter($=>$.name.toLowerCase().includes(D)||$.class.toLowerCase().includes(D)||String($.role).toLowerCase().includes(D)):t},[t,b]),w=I.useMemo(()=>{const D=M==="asc"?1:-1,$=F=>{var z,H;switch(N){case"sumBaseStats":{const K=VQ(F);return K==null?-1/0:K}case"totalStats":return(H=(z=F.totalStats)!=null?z:OQ(eY(F.baseStats)))!=null?H:-1/0;default:return F[N]}};return[...E].sort((F,z)=>{const H=$(F),K=$(z);return H===K?0:H>K?D:-D})},[E,N,M]),A=I.useMemo(()=>w.find(D=>D.id===_)||w[0],[w,_]);return n.jsxs("div",{children:[i&&n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:p.tile,borderColor:p.border},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"View"}),n.jsxs("select",{value:g,onChange:D=>y(D.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[n.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),n.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Search"}),n.jsx("input",{value:b,onChange:D=>S(D.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:p.border}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:p.sub},children:"Sort by"}),n.jsxs("select",{value:String(N),onChange:D=>T(D.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:p.border},children:[n.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),n.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),n.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),n.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),n.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),n.jsx("button",{onClick:()=>L(D=>D==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:p.border},children:M==="asc"?"":""})]})]}),n.jsx(qQ,{member:A,actions:A&&(d?d(A):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Profile"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Compare"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:p.border},children:"Message"})]})),extraKPIs:A&&u?u(A):null,theme:p}),g==="list"?n.jsx(XQ,{rows:w,selId:_,onSelect:P,theme:p,rightCols:D=>{var $;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-right text-sm",children:($=D.level)!=null?$:""}),n.jsx("div",{className:"text-right text-xs",style:{color:p.sub},children:fN(D.lastOnline)})]})}}):n.jsx(ZQ,{rows:w,selId:_,onSelect:P,theme:p,footer:D=>n.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:p.sub},children:n.jsxs("span",{children:["Last ",fN(D.lastOnline)]})})})]})}function sY({guildName:t,server:e,emblemUrl:s,lastScanISO:r,members:i,avgLevel:a,totalPower:l,activity7d:d,topClasses:u,tickerItems:h,href:p,onClick:g,className:y}){const b=!!xE(),S=I.useMemo(()=>{if(!r)return null;const $=Date.now()-new Date(r).getTime(),F=Math.max(0,Math.floor($/6e4));if(F<60)return`${F}m`;const z=Math.floor(F/60);return z<24?`${z}h`:`${Math.floor(z/24)}d`},[r]),N=Lu(0),T=Lu(0),M=Lu(0),L=Lu(0),k=_m(N,$=>Math.round($).toString()),v=_m(T,$=>Math.round($).toString()),_=_m(M,$=>Math.round($).toLocaleString()),P=_m(L,$=>`${Math.round($)}%`);I.useEffect(()=>{const $=b?0:.6;if($===0){N.set(i),T.set(a),M.set(l!=null?l:0),L.set(d!=null?d:0);return}const F=[wm(N,i,{duration:$}),wm(T,a,{duration:$}),wm(M,l!=null?l:0,{duration:$}),wm(L,d!=null?d:0,{duration:$})];return()=>F.forEach(z=>z.stop())},[i,a,l,d,b]);const E=I.useRef(null);I.useEffect(()=>{if(b||!E.current)return;const $=E.current;let F=0,z=0;const H=()=>{z+=.016;const K=z*14%140-20;$.style.setProperty("--s-x",`${K}%`),F=requestAnimationFrame(H)};return F=requestAnimationFrame(H),()=>cancelAnimationFrame(F)},[b]);const w={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},A=100,B=p?"a":"div",D=p?{href:p}:{onClick:g};return n.jsxs(B,{...D,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",y!=null?y:""].join(" "),style:{background:`linear-gradient(135deg, ${w.bgFrom}, ${w.bgTo})`},children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),n.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[n.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[s?n.jsx("img",{src:s,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):n.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:n.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),n.jsx("div",{ref:E,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),S&&n.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:w.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${w.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",S]}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${A}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${A}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${A}deg, transparent 0 46px, ${w.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),n.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[n.jsx("h3",{className:"truncate font-extrabold",style:{color:w.title,fontSize:22},children:t}),n.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:w.soft,border:`1px solid ${w.border}`},children:e})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[n.jsx(Am,{label:"Members",value:k}),n.jsx(Am,{label:" Level",value:v}),n.jsx(Am,{label:"Total Power",value:_}),typeof d=="number"&&n.jsx(Am,{label:"Activity (7d)",value:P})]}),u!=null&&u.length?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:w.soft},children:"Top Classes"}),u.slice(0,3).map($=>n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${w.border}`,color:w.text},children:[$.iconUrl?n.jsx("img",{src:$.iconUrl,alt:$.key,className:"h-4 w-4 object-contain"}):n.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:w.accent,opacity:.85}}),n.jsxs("span",{className:"text-xs",children:[$.key," ",n.jsxs("span",{className:"opacity-70",children:["(",Math.round($.percent),"%)"]})]})]},$.key))]}):null]})]})]}),h!=null&&h.length?n.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${w.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:n.jsx(nY,{items:h,muted:b,color:w.soft})}):null]})}function Am({label:t,value:e}){return n.jsxs("div",{className:"relative z-10 min-w-0",children:[n.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),n.jsx(fE.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function nY({items:t,muted:e,color:s}){const r=I.useRef(null);return I.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,l=0;const d=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,l=requestAnimationFrame(d)};return l=requestAnimationFrame(d),()=>cancelAnimationFrame(l)},[e]),n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:s},children:t.concat(t).map((i,a)=>n.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const rY="_wrap_q5gkc_53",iY="_banner_q5gkc_59",aY="_bannerRowTop_q5gkc_61",oY="_bannerStripe_q5gkc_71",lY="_bannerTitle_q5gkc_79",cY="_bannerRowBottom_q5gkc_93",dY="_bannerSub_q5gkc_95",uY="_monthPickerWrap_q5gkc_101",hY="_monthPickerLabel_q5gkc_113",pY="_monthPicker_q5gkc_101",mY="_monthButton_q5gkc_131",fY="_monthButtonText_q5gkc_159",gY="_chev_q5gkc_161",xY="_monthList_q5gkc_165",vY="_monthOption_q5gkc_195",yY="_monthBadge_q5gkc_221",bY="_gridRow_q5gkc_237",_Y="_gridRowBottom_q5gkc_239",wY="_sideImage_q5gkc_253",jY="_sideImagePh_q5gkc_271",SY="_emblemPanel_q5gkc_275",NY="_emblemFrame_q5gkc_295",kY="_emblemImg_q5gkc_297",TY="_emblemPlaceholder_q5gkc_299",CY="_emblemShimmer_q5gkc_307",EY="_emblemCaption_q5gkc_315",AY="_card_q5gkc_319",IY="_cardHeader_q5gkc_331",RY="_cardTitle_q5gkc_339",PY="_cardSubtitle_q5gkc_341",LY="_headerRight_q5gkc_343",DY="_cardBody_q5gkc_345",MY="_tableWrap_q5gkc_349",FY="_tableTitle_q5gkc_351",BY="_table_q5gkc_349",$Y="_th_q5gkc_355",OY="_td_q5gkc_355",VY="_tdEmpty_q5gkc_365",UY="_sectionDivider_q5gkc_375",zY="_sectionStripe_q5gkc_389",HY="_sectionTitle_q5gkc_397",mt={wrap:rY,banner:iY,bannerRowTop:aY,bannerStripe:oY,bannerTitle:lY,bannerRowBottom:cY,bannerSub:dY,monthPickerWrap:uY,monthPickerLabel:hY,monthPicker:pY,monthButton:mY,monthButtonText:fY,chev:gY,monthList:xY,monthOption:vY,monthBadge:yY,gridRow:bY,gridRowBottom:_Y,sideImage:wY,sideImagePh:jY,emblemPanel:SY,emblemFrame:NY,emblemImg:kY,emblemPlaceholder:TY,emblemShimmer:CY,emblemCaption:EY,card:AY,cardHeader:IY,cardTitle:RY,cardSubtitle:PY,headerRight:LY,cardBody:DY,tableWrap:MY,tableTitle:FY,table:BY,th:$Y,td:OY,tdEmpty:VY,sectionDivider:UY,sectionStripe:zY,sectionTitle:HY};function GY(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function xN(t,e="de-DE"){const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const vN=({title:t,subtitle:e,children:s,rightBadge:r})=>n.jsxs("section",{className:mt.card,children:[(t||e||r)&&n.jsxs("header",{className:mt.cardHeader,children:[n.jsxs("div",{className:mt.headerTitles,children:[t&&n.jsx("h3",{className:mt.cardTitle,children:t}),e&&n.jsx("div",{className:mt.cardSubtitle,children:e})]}),r&&n.jsx("div",{className:mt.headerRight,children:r})]}),n.jsx("div",{className:mt.cardBody,children:s})]}),yN=({block:t})=>{var r,i;const e=t.columns,s=(r=t.rows)!=null?r:[];return n.jsxs("div",{className:mt.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&n.jsx("div",{className:mt.tableTitle,children:t.title}),n.jsxs("table",{className:mt.table,children:[n.jsx("thead",{children:n.jsx("tr",{children:e.map(a=>n.jsx("th",{className:mt.th,style:{width:a.width},children:a.label},a.key))})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{className:mt.tdEmpty,colSpan:e.length,children:"No data"})}):s.map((a,l)=>{var d;return n.jsx("tr",{children:e.map(u=>{var y;const h=a[u.key],p=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?GY(p):p;return n.jsx("td",{className:mt.td,"data-align":(y=u.align)!=null?y:"left",children:u.render?u.render(a):g},u.key)})},(d=a.id)!=null?d:l)})})]}),t.footer&&n.jsx("div",{className:mt.tableFooter,children:t.footer})]})},WY=(t,e)=>{I.useEffect(()=>{function s(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t,e])},qY=({months:t,currentKey:e,onChange:s,fallbackDate:r})=>{var p;if(!(Array.isArray(t)&&t.length>0&&e))return n.jsx("div",{className:mt.bannerSub,children:r!=null?r:""});const a=I.useRef(null),[l,d]=I.useState(!1);WY(a,()=>d(!1));const u=t.find(g=>g.key===e),h=u?`${xN(u.fromISO)}${xN(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return n.jsxs("div",{className:mt.monthPickerWrap,children:[n.jsx("div",{className:mt.monthPickerLabel,children:"Monat"}),n.jsxs("div",{className:mt.monthPicker,ref:a,children:[n.jsxs("button",{type:"button",className:mt.monthButton,onClick:()=>d(g=>!g),"aria-haspopup":"listbox","aria-expanded":l,children:[n.jsx("span",{className:mt.monthButtonText,children:(p=u==null?void 0:u.label)!=null?p:""}),n.jsx("svg",{className:mt.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),l&&n.jsx("ul",{className:mt.monthList,role:"listbox",children:t.map(g=>n.jsx("li",{children:n.jsx("button",{type:"button",className:mt.monthOption,onClick:()=>{d(!1),s==null||s(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&n.jsx("span",{className:mt.monthBadge,children:h})]})},KY=({title:t,monthRange:e,months:s,currentMonthKey:r,onMonthChange:i})=>n.jsxs("div",{className:mt.banner,children:[n.jsxs("div",{className:mt.bannerRowTop,children:[n.jsx("div",{className:mt.bannerStripe}),n.jsx("div",{className:mt.bannerTitle,children:t}),n.jsx("div",{className:mt.bannerStripe})]}),n.jsx("div",{className:mt.bannerRowBottom,children:n.jsx(qY,{months:s,currentKey:r,onChange:i,fallbackDate:e})})]}),QY=({emblemUrl:t,caption:e})=>n.jsxs("div",{className:mt.emblemPanel,children:[n.jsxs("div",{className:mt.emblemFrame,children:[t?n.jsx("img",{src:t,alt:"Guild Emblem",className:mt.emblemImg}):n.jsx("div",{className:mt.emblemPlaceholder,children:"Emblem"}),n.jsx("div",{className:mt.emblemShimmer})]}),e&&n.jsx("div",{className:mt.emblemCaption,children:e})]}),bN=({imgUrl:t,alt:e})=>n.jsx("div",{className:mt.sideImage,children:t?n.jsx("img",{src:t,alt:e!=null?e:"side"}):n.jsx("div",{className:mt.sideImagePh,children:"Image"})}),ry=({children:t,className:e})=>n.jsx("div",{className:`${mt.gridRow} ${e!=null?e:""}`,children:t}),YY=({children:t})=>n.jsxs("div",{className:mt.sectionDivider,children:[n.jsx("div",{className:mt.sectionStripe}),n.jsx("div",{className:mt.sectionTitle,children:t}),n.jsx("div",{className:mt.sectionStripe})]}),XY=({data:t,onMonthChange:e})=>{const{header:s,panels:r,tablesTop:i,tablesBottom:a}=t;return n.jsxs("div",{className:mt.wrap,children:[n.jsx(KY,{title:s.title,monthRange:s.monthRange,months:s.months,currentMonthKey:s.currentMonthKey,onMonthChange:e}),n.jsxs(ry,{children:[n.jsx(bN,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),n.jsx(QY,{emblemUrl:s.emblemUrl,caption:s.centerCaption}),n.jsx(bN,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),n.jsx(ry,{children:i.map((l,d)=>n.jsx(vN,{title:l.title,subtitle:l.subtitle,children:n.jsx(yN,{block:l})},d))}),n.jsx(YY,{children:"Guild Overview"}),n.jsx(ry,{className:mt.gridRowBottom,children:a.map((l,d)=>n.jsx(vN,{title:l.title,subtitle:l.subtitle,children:n.jsx(yN,{block:l})},d))})]})},JY=({guildId:t,guildName:e,guildServer:s})=>{const[r,i]=I.useState(!0),[a,l]=I.useState(null),[d,u]=I.useState(void 0),h=I.useRef({}),[p,g]=I.useState(()=>Im(e,s));I.useEffect(()=>{let b=!1;async function S(){var N,T,M,L,k;i(!0);try{const v=jd(dt,`guilds/${t}/history_monthly`),_=await pn(v),P=[];for(const A of _.docs){const B=A.id,D=A.data();if(!D)continue;h.current[B]=D;const $=(N=D==null?void 0:D.meta)!=null?N:{},F=$.fromISO||$.baselineISO||$.firstISO||"",z=$.toISO||$.latestISO||$.nowISO||"",H=Number((T=$.daysSpan)!=null?T:Math.floor((+new Date(z)-+new Date(F))/864e5))||0,K=!!((L=(M=D==null?void 0:D.status)==null?void 0:M.available)!=null?L:F&&z&&H<=40),q=$.label||new Date(B+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});P.push({key:B,label:q,fromISO:F||new Date(B+"-01").toISOString(),toISO:z||new Date(B+"-28").toISOString(),daysSpan:H,available:K,reason:K||(k=D==null?void 0:D.status)==null?void 0:k.reason})}if(P.sort((A,B)=>A.key<B.key?1:-1),b)return;if(P.length===0){l(null),u(void 0),g(Im(e,s)),i(!1);return}l(P);const E=P[0].key;u(E);const w=h.current[E];g(_N(w,{guildName:e,guildServer:s,currentMonthKey:E,months:P}))}catch(v){console.error(v),l(null),u(void 0),g(Im(e,s))}finally{b||i(!1)}}return S(),()=>{b=!0}},[t,e,s]);async function y(b){u(b);let S=h.current[b];if(!S)try{const N=Gt(dt,`guilds/${t}/history_monthly/${b}`),T=await vn(N);T.exists()?(S=T.data(),h.current[b]=S):S=null}catch(N){console.error(N),S=null}if(!S){g(Im(e,s,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(_N(S,{guildName:e,guildServer:s,currentMonthKey:b,months:a!=null?a:void 0}))}return n.jsx(XY,{data:p,onMonthChange:y})};function Im(t,e,s){return{header:{title:`${t}  Monthly Progress`,monthRange:"-",emblemUrl:bh(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:s==null?void 0:s.currentMonthKey,months:s==null?void 0:s.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[ll("Most Base Stats gained",e?`Server ${e}`:void 0),ll("Sum Base Stats"),ll("Highest Base Stats")],tablesBottom:[ll("Main & Con"),ll("Sum Base Stats"),ll("Highest Base Stats"),ll("Highest Total Stats")]}}function ll(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function _N(t,e){var l,d,u,h,p,g,y,b;(l=t==null?void 0:t.meta)!=null;const s={title:`${e.guildName}  Monthly Progress`,monthRange:void 0,emblemUrl:bh(e.guildName,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"",width:70,align:"right",format:"num"}],rows:((d=t==null?void 0:t.mostBaseGained)!=null?d:[]).map((S,N)=>{var T,M,L,k,v,_,P,E;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",level:(k=(L=S.levelLatest)!=null?L:S.level)!=null?k:null,base:(_=(v=S.baseLatest)!=null?v:S.base)!=null?_:null,delta:(E=(P=S.baseDelta)!=null?P:S.delta)!=null?E:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((S,N)=>{var T,M,L,k,v,_,P;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",base:(L=S.base)!=null?L:null,stam:(v=(k=S.stamDelta)!=null?k:S.staminaDelta)!=null?v:null,sho:(P=(_=S.shoDelta)!=null?_:S.shootingDelta)!=null?P:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((S,N)=>{var T,M,L,k,v;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",stats:(k=(L=S.stats)!=null?L:S.base)!=null?k:null,delta:(v=S.delta)!=null?v:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((p=t==null?void 0:t.mainAndCon)!=null?p:[]).map((S,N)=>{var T,M,L,k,v,_;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",class:(k=(L=S.class)!=null?L:S.className)!=null?k:"",stats:(v=S.stats)!=null?v:null,delta:(_=S.delta)!=null?_:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((S,N)=>{var T,M,L,k,v;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",base:(L=S.base)!=null?L:null,stam:(k=S.stamDelta)!=null?k:null,sho:(v=S.shoDelta)!=null?v:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((y=t==null?void 0:t.highestBaseStats)!=null?y:[]).map((S,N)=>{var T,M,L,k;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",stats:(L=S.stats)!=null?L:null,delta:(k=S.delta)!=null?k:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((S,N)=>{var T,M,L,k;return{id:(T=S.playerId)!=null?T:N,rank:N+1,name:(M=S.name)!=null?M:"-",total:(L=S.total)!=null?L:null,delta:(k=S.delta)!=null?k:null}})}];return{header:s,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const ZY="_root_r1uj3_5",eX="_sectionDivider_r1uj3_17",tX="_sectionStripe_r1uj3_31",sX="_sectionTitle_r1uj3_33",vu={root:ZY,sectionDivider:eX,sectionStripe:tX,sectionTitle:sX},nX="_root_4jywc_1",rX="_accent_4jywc_31",wN={root:nX,default:"_default_4jywc_29",accent:rX};function To({text:t,tone:e="default",className:s}){return n.jsx("div",{className:`${wN.root} ${wN[e]} ${s!=null?s:""}`.trim(),children:t})}const Rm=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function DE(t,e=64){if(!t)return;const s=Rm(t);let r=qs.find(i=>Rm(i.label)===s);return r||(r=qs.find(i=>Rm(i.label).startsWith(s)||s.startsWith(Rm(i.label)))),r?Ur(r.iconUrl,e):void 0}const iX="_card_vvv3s_3",aX="_wrap_vvv3s_31",oX="_divider_vvv3s_45",lX="_rows_vvv3s_77",cX="_row_vvv3s_77",dX="_left_vvv3s_109",uX="_label_vvv3s_111",hX="_avgHead_vvv3s_113",pX="_avgNum_vvv3s_115",mX="_top3_vvv3s_121",fX="_chip_vvv3s_123",gX="_badge_vvv3s_151",xX="_name_vvv3s_159",vX="_score_vvv3s_161",yX="_headerSpacer_vvv3s_167",$n={card:iX,wrap:aX,divider:oX,rows:lX,row:cX,left:dX,label:uX,avgHead:hX,avgNum:pX,top3:mX,chip:fX,badge:gX,name:xX,score:vX,headerSpacer:yX};function bX({name:t,value:e,classLabel:s,colors:r}){const i=DE(s,64);return n.jsxs("div",{className:$n.chip,children:[n.jsx("span",{className:$n.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:$n.name,children:t!=null?t:""}),n.jsx("span",{className:$n.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function _X({snapshot:t,colors:e,title:s="Base Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var p,g;return((p=h[d])!=null?p:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return n.jsxs("div",{className:$n.card,children:[n.jsx(To,{text:s}),n.jsx("div",{className:$n.headerSpacer}),n.jsxs("div",{className:$n.wrap,children:[n.jsx("div",{className:$n.divider}),n.jsx("div",{className:$n.rows,children:a.map((d,u)=>n.jsxs("div",{className:$n.row,children:[n.jsxs("div",{className:$n.left,children:[n.jsx("div",{className:$n.label,children:d.label}),n.jsx("div",{className:$n.avgHead,children:""}),n.jsx("div",{className:$n.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:$n.top3,children:d.list.map((h,p)=>n.jsx(bX,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}const wX="_card_1enwc_1",jX="_wrap_1enwc_1",SX="_divider_1enwc_1",NX="_rows_1enwc_1",kX="_row_1enwc_1",TX="_left_1enwc_1",CX="_label_1enwc_1",EX="_avgHead_1enwc_1",AX="_avgNum_1enwc_1",IX="_top3_1enwc_1",RX="_chip_1enwc_1",PX="_badge_1enwc_1",LX="_name_1enwc_1",DX="_score_1enwc_1",MX="_headerSpacer_1enwc_1",On={card:wX,wrap:jX,divider:SX,rows:NX,row:kX,left:TX,label:CX,avgHead:EX,avgNum:AX,top3:IX,chip:RX,badge:PX,name:LX,score:DX,headerSpacer:MX};function FX({name:t,value:e,classLabel:s,colors:r}){const i=DE(s,64);return n.jsxs("div",{className:On.chip,children:[n.jsx("span",{className:On.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:On.name,children:t!=null?t:""}),n.jsx("span",{className:On.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function BX({snapshot:t,colors:e,title:s="Total Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var p,g;return((p=h[d])!=null?p:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return n.jsxs("div",{className:On.card,children:[n.jsx(To,{text:s}),n.jsx("div",{className:On.headerSpacer}),n.jsxs("div",{className:On.wrap,children:[n.jsx("div",{className:On.divider}),n.jsx("div",{className:On.rows,children:a.map((d,u)=>n.jsxs("div",{className:On.row,children:[n.jsxs("div",{className:On.left,children:[n.jsx("div",{className:On.label,children:d.label}),n.jsx("div",{className:On.avgHead,children:""}),n.jsx("div",{className:On.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:On.top3,children:d.list.map((h,p)=>n.jsx(FX,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},p))})]},u))})]})]})}function $X({guild:t,snapshot:e,colors:s}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(To,{text:"General Info"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function OX({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(To,{text:"Fortress"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function VX({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(To,{text:"Rankings"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function UX({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(To,{text:"Serververgleich"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const zX=I.memo(function({guild:e,snapshot:s,emblemUrl:r,colors:i}){const a=i.icon,l=({text:d})=>n.jsxs("div",{className:vu.sectionDivider,children:[n.jsx("div",{className:vu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),n.jsx("div",{className:vu.sectionTitle,style:{color:i.soft},children:d}),n.jsx("div",{className:vu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return n.jsxs("div",{className:vu.root+" space-y-4",children:[n.jsx(l,{text:"GUILD OVERVIEW"}),n.jsx("div",{style:{marginTop:6,marginBottom:10},children:n.jsx(l,{text:"AVERAGE PLAYER STATS"})}),n.jsx($X,{guild:e,snapshot:s,colors:i}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(_X,{snapshot:s,colors:i}),n.jsx(BX,{snapshot:s,colors:i})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(OX,{colors:i}),n.jsx(VX,{colors:i})]}),n.jsx("div",{className:"mt-4",children:n.jsx(UX,{colors:i})})]})}),HX="_wrapper_zqchq_3",GX="_grid_zqchq_9",WX="_tile_zqchq_13",qX="_disabled_zqchq_37",KX="_crestWrap_zqchq_41",QX="_crest_zqchq_41",YX="_ring_zqchq_53",XX="_badge_zqchq_55",JX="_meta_zqchq_67",ZX="_nameRow_zqchq_69",eJ="_name_zqchq_69",tJ="_share_zqchq_73",sJ="_sub_zqchq_75",nJ="_tileButton_zqchq_79",rJ="_donutCard_zqchq_85",iJ="_donutHeader_zqchq_87",aJ="_legend_zqchq_91",oJ="_legendItem_zqchq_93",lJ="_legendSwatch_zqchq_95",cJ="_legendRight_zqchq_97",dJ="_centerLabel_zqchq_101",ys={wrapper:HX,grid:GX,tile:WX,disabled:qX,crestWrap:KX,crest:QX,ring:YX,badge:XX,meta:JX,nameRow:ZX,name:eJ,share:tJ,sub:sJ,tileButton:nJ,donutCard:rJ,donutHeader:iJ,legend:aJ,legendItem:oJ,legendSwatch:lJ,legendRight:cJ,centerLabel:dJ},S0=56;function $f(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function jN(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const uJ=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function hJ(t){return t?/drive\.google\.com/.test(t):!1}function SN(t,e=S0){if(t)return hJ(t)?Ur(t,e):t}function pJ(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const s={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return s[e]?s[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function mJ(t){var p,g,y,b,S,N;if(!t)return null;const e=t,s=t,r=(p=e.key)!=null?p:s.id,i=(g=e.label)!=null?g:s.name,a=(b=(y=s.crestUrl)!=null?y:e.iconUrl)!=null?b:s.iconUrl,l=(S=e.iconUrl)!=null?S:s.iconUrl,d=(N=e.fallback)!=null?N:s.fallback;if(!r||!i)return null;const u=SN(a,S0),h=SN(l,S0);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:d?String(d):void 0}}function ME(t,e){var p,g,y,b,S,N,T,M,L,k,v,_,P,E,w,A,B,D,$,F,z;const s={},r={},i={},a={},l=e.map(H=>H.id);for(const H of l)s[H]=0,r[H]=0,i[H]=0,a[H]=null;for(const H of Array.isArray(t)?t:[]){const K=(_=(k=(M=(N=(b=(y=(g=(p=H.classId)!=null?p:H.class)!=null?g:H.klass)!=null?y:H.playerClass)!=null?b:H.cls)!=null?N:(S=H.values)==null?void 0:S.Class)!=null?M:(T=H.values)==null?void 0:T.class)!=null?k:(L=H.values)==null?void 0:L.Klasse)!=null?_:(v=H.values)==null?void 0:v.klasse,q=pJ(K);if(!q||!l.includes(q))continue;s[q]+=1;const G=uJ((A=(E=H.level)!=null?E:(P=H.values)==null?void 0:P.Level)!=null?A:(w=H.values)==null?void 0:w.level);G!=null&&(r[q]+=G,i[q]+=1,(!a[q]||((D=(B=a[q])==null?void 0:B.level)!=null?D:-1/0)<G)&&(a[q]={id:H.id,name:(z=(F=H.name)!=null?F:($=H.values)==null?void 0:$.Name)!=null?z:null,level:G}))}const d=Object.values(s).reduce((H,K)=>H+K,0),u={},h={};return l.forEach(H=>{u[H]=d>0?s[H]/d*100:0,h[H]=i[H]>0?r[H]/i[H]:null}),{counts:s,shares:u,avg:h,top:a}}const fJ=({valuePct:t})=>{const s=2*Math.PI*28,r=s*(1-Math.max(0,Math.min(100,t))/100);return n.jsxs("svg",{className:ys.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:s,strokeDashoffset:r,strokeLinecap:"round"})]})},gJ=({data:t,classMeta:e,onPickClass:s})=>{const[r,i]=I.useState({}),a=Array.isArray(t)?t:[],l=Array.isArray(e)?e:[],{counts:d,shares:u,avg:h,top:p}=I.useMemo(()=>ME(a,l),[a,l]);return n.jsx("section",{className:ys.wrapper,children:n.jsx("div",{className:ys.grid,style:{gridTemplateColumns:"1fr"},children:l.map(g=>{var L,k,v;const y=(L=d[g.id])!=null?L:0,b=(k=u[g.id])!=null?k:0,S=h[g.id],N=p[g.id],T=y<=0,M=r[g.id]?void 0:g.crestUrl||g.iconUrl;return n.jsxs("div",{className:`${ys.tile} ${T?ys.disabled:""}`,title:T?`${g.name}: kein Mitglied`:`${g.name}  ${jN(y)}  ${$f(b)}${S?`   ${S.toFixed(1)}`:""}`,children:[n.jsxs("div",{className:ys.crestWrap,children:[M?n.jsx("img",{className:ys.crest,src:M,alt:g.name,onError:()=>i(_=>({..._,[g.id]:!0}))}):n.jsx("div",{className:ys.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(v=g.fallback)!=null?v:""}),n.jsx(fJ,{valuePct:b}),n.jsx("div",{className:ys.badge,children:jN(y)})]}),n.jsxs("div",{className:ys.meta,children:[n.jsxs("div",{className:ys.nameRow,children:[n.jsx("div",{className:ys.name,children:g.name}),n.jsx("div",{className:ys.share,children:$f(b)})]}),n.jsxs("div",{className:ys.sub,children:[S?` Lvl ${S.toFixed(1)}`:"",N?`  Top: ${N.name}${N.level?` (Lv ${N.level})`:""}`:""]})]}),!T&&s&&n.jsx("button",{className:ys.tileButton,onClick:()=>s(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},xJ=({data:t,classMeta:e})=>{const s=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=I.useMemo(()=>ME(s,r),[s,r]),l=I.useMemo(()=>Object.values(a).reduce((d,u)=>d+u,0),[a]);return n.jsxs("div",{className:ys.donutCard,children:[n.jsxs("div",{className:ys.donutHeader,children:[n.jsx("div",{children:"Klassen-Verteilung"}),n.jsxs("div",{className:ys.legendRight,children:["Gesamt: ",l]})]}),n.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[n.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[n.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,y=r.map((S,N)=>{var T;return{id:S.id,pct:(T=i[S.id])!=null?T:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*N)} 60% 55%)`}});let b=0;return y.map(S=>{const N=(S.pct||0)/100;if(N<=0)return null;const T=b,M=b+g*N;b=M;const L=M-T>Math.PI?1:0,k=130+100*Math.cos(T),v=130+100*Math.sin(T),_=130+100*Math.cos(M),P=130+100*Math.sin(M),E=130+64*Math.cos(M),w=130+64*Math.sin(M),A=130+64*Math.cos(T),B=130+64*Math.sin(T),D=`M ${k} ${v} A 100 100 0 ${L} 1 ${_} ${P} L ${E} ${w} A 64 64 0 ${L} 0 ${A} ${B} Z`;return n.jsx("path",{d:D,fill:S.color,opacity:.95},S.id)})})()]}),n.jsx("div",{className:ys.legend,children:r.map((d,u)=>{var g,y;const h=(g=i[d.id])!=null?g:0,p=(y=a[d.id])!=null?y:0;return n.jsxs("div",{className:ys.legendItem,title:`${d.name}: ${p}  ${$f(h)}`,children:[n.jsx("span",{className:ys.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),n.jsx("span",{children:d.name}),n.jsxs("span",{className:ys.legendRight,children:[p,"  ",$f(h)]})]},d.id)})})]}),n.jsx("div",{className:ys.centerLabel,children:"Anteile je Klasse"})]})},Bs={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},vJ=t=>{var e,s,r,i,a,l,d,u,h,p,g,y,b,S,N;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(s=t.class)!=null?s:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(l=t.baseMain)!=null?l:void 0,con:(d=t.conBase)!=null?d:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(p=t.treasury)!=null?p:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(y=t.attrTotal)!=null?y:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(S=t.lastScan)!=null?S:void 0,lastActivity:(N=t.lastActivity)!=null?N:void 0}}},iy=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},yJ=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function FE({title:t,right:e,children:s}){return n.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:Bs.tile,border:`1px solid ${Bs.line}`},children:[(t||e)&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:Bs.line},children:[n.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:Bs.soft},children:t}),e]}),n.jsx("div",{className:"p-4",children:s})]})}function yu({k:t,v:e}){return n.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[n.jsx("span",{className:"opacity-80",children:t}),n.jsx("span",{className:"font-semibold",style:{color:Bs.title},children:e})]})}function bJ({guild:t}){var s,r;const e=bh(t.name,800);return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:n.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?n.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):n.jsx("div",{className:"text-6xl",children:""})})}),n.jsx(FE,{title:"GILDEN INFO",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsx(yu,{k:"Mitglieder",v:(s=t.memberCount)!=null?s:""}),n.jsx(yu,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:""}),n.jsx(yu,{k:"Server",v:(r=t.server)!=null?r:""}),n.jsx(yu,{k:"Inaktiv",v:"0"}),n.jsx(yu,{k:"Aktivitt",v:"100%"})]})})]})}function ay(){var T,M,L,k,v,_;const t=Xf(),e=t.id||t.gid||t.guildId||t.guild||"",s=Vr(),[r,i]=I.useState(!0),[a,l]=I.useState(null),[d,u]=I.useState(null),[h,p]=I.useState(null),[g,y]=I.useState("grid"),b=I.useMemo(()=>(Array.isArray(qs)?qs:[]).map(mJ).filter(Boolean),[]);I.useEffect(()=>{let P=!1;async function E(){var w,A,B,D,$,F,z,H,K,q,G,re,se,U,Y,ie,X,pe,ge,he,ve,_e,ce,Ce,ye,Ze,it,Rt,rs,cs,Os,ws,Ee,Pe,Ie,Ue,nt;i(!0),l(null);try{const pt=e.trim();if(!pt){l("Keine Gilde gewhlt."),i(!1);return}const vt=Gt(dt,`guilds/${pt}/latest/latest`),Ut=await vn(vt);if(!Ut.exists()){l("Gilde nicht gefunden."),i(!1);return}const $t=Ut.data(),ar=(B=(A=$t.name)!=null?A:(w=$t.values)==null?void 0:w.Name)!=null?B:pt,bn=(F=($=$t.server)!=null?$:(D=$t.values)==null?void 0:D.Server)!=null?F:null,Vs=(G=iy((q=(H=$t.memberCount)!=null?H:(z=$t.values)==null?void 0:z["Guild Member Count"])!=null?q:(K=$t.values)==null?void 0:K.GuildMemberCount))!=null?G:null,jr=(he=iy((ge=(X=(Y=(se=$t.hofRank)!=null?se:(re=$t.values)==null?void 0:re["Hall of Fame Rank"])!=null?Y:(U=$t.values)==null?void 0:U.HoF)!=null?X:(ie=$t.values)==null?void 0:ie.Rank)!=null?ge:(pe=$t.values)==null?void 0:pe["Guild Rank"]))!=null?he:null,fi=yJ(iy($t.timestamp));P||u({id:pt,name:ar,server:bn,memberCount:Vs,hofRank:jr,lastScanDays:fi});const gi=Gt(dt,`guilds/${pt}/snapshots/members_summary`),zr=await vn(gi);if(zr.exists()&&!P){const is=zr.data(),Sr={guildId:String((ve=is.guildId)!=null?ve:pt),updatedAt:String((Ce=(ce=is.updatedAt)!=null?ce:(_e=$t.values)==null?void 0:_e.Timestamp)!=null?Ce:""),updatedAtMs:Number((Ze=(ye=is.updatedAtMs)!=null?ye:$t.timestamp*1e3)!=null?Ze:0),count:Number((it=is.count)!=null?it:0),hash:String((Rt=is.hash)!=null?Rt:""),avgLevel:(rs=is.avgLevel)!=null?rs:null,avgTreasury:(cs=is.avgTreasury)!=null?cs:null,avgMine:(Os=is.avgMine)!=null?Os:null,avgBaseMain:(ws=is.avgBaseMain)!=null?ws:null,avgConBase:(Ee=is.avgConBase)!=null?Ee:null,avgSumBaseTotal:(Pe=is.avgSumBaseTotal)!=null?Pe:null,avgAttrTotal:(Ie=is.avgAttrTotal)!=null?Ie:null,avgConTotal:(Ue=is.avgConTotal)!=null?Ue:null,avgTotalStats:(nt=is.avgTotalStats)!=null?nt:null,members:Array.isArray(is.members)?is.members:[]};p(Sr)}}catch(pt){P||l((pt==null?void 0:pt.message)||"Fehler beim Laden.")}finally{P||i(!1)}}return E(),()=>{P=!0}},[e]);const S=I.useMemo(()=>{var P;return((P=h==null?void 0:h.members)!=null?P:[]).map(E=>vJ(E))},[h]);if(r)return n.jsx(wt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsx("div",{className:"text-sm",style:{color:Bs.soft},children:"Lade Gildenprofil"})});if(!d)return n.jsx(wt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsxs("div",{className:"text-sm",style:{color:Bs.soft},children:[a!=null?a:"Unbekannter Fehler.",n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:()=>s("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const N=n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"px-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${Bs.line}`,position:"relative",zIndex:2},children:[n.jsx("div",{className:"min-w-[120px]",children:n.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:Bs.tile,border:`1px solid ${Bs.line}`,color:Bs.title},children:(T=d.server)!=null?T:"S?.EU"})}),n.jsx("div",{className:"flex-1 text-center",children:n.jsx("div",{className:"font-extrabold",style:{color:Bs.title,fontSize:26,lineHeight:1.15},children:d.name})}),n.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:Bs.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:""," ",n.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),n.jsx("div",{style:{height:1,background:Bs.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return n.jsxs(wt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[N,n.jsx("div",{className:"px-6 pb-8",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[n.jsx("div",{className:"col-span-12 md:col-span-3",children:n.jsx(bJ,{guild:d})}),n.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[n.jsx(zX,{guild:d,snapshot:h,emblemUrl:bh(d.name,512)||void 0,colors:Bs}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-full max-w-[980px]",children:n.jsx(sY,{guildName:d.name,server:(M=d.server)!=null?M:"",emblemUrl:bh(d.name,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(L=d.memberCount)!=null?L:0,avgLevel:(k=h==null?void 0:h.avgLevel)!=null?k:0,totalPower:(v=h==null?void 0:h.avgTotalStats)!=null?v:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(_=d.memberCount)!=null?_:0}`]:void 0})})}),n.jsx(_J,{members:S,guildId:d.id,guildName:d.name,guildServer:d.server})]}),n.jsxs("div",{className:"col-span-12 md:col-span-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>y("grid"),"aria-label":"Klassenbersicht",children:n.jsx(To,{text:"Klassenbersicht",tone:g==="grid"?"accent":"default"})}),n.jsx("button",{onClick:()=>y("donut"),"aria-label":"Klassenverteilung",children:n.jsx(To,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?n.jsx(gJ,{data:S,classMeta:b,onPickClass:P=>{const E=new URL(window.location.href);E.searchParams.set("tab","bersicht"),E.searchParams.set("class",P),window.location.href=E.toString()}}):n.jsx(xJ,{data:S,classMeta:b})]})]})})]})}function _J({members:t,guildId:e,guildName:s,guildServer:r}){const[i,a]=I.useState("bersicht");return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:Bs.line},role:"tablist",children:["bersicht","Rankings","Monthly Progress","Historie"].map(l=>{const d=l===i;return n.jsx("button",{role:"tab","aria-selected":d,onClick:()=>a(l),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${d?Bs.header:"transparent"}`,background:d?"rgba(45,78,120,0.35)":"transparent",color:Bs.title},children:l},l)})}),n.jsxs(FE,{children:[i==="bersicht"&&n.jsx(tY,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&n.jsxs("div",{className:"text-sm",style:{color:Bs.soft},children:["Platzhalter ",n.jsx("b",{children:"Rankings"}),"  Inhalt folgt."]}),i==="Monthly Progress"&&n.jsx(JY,{guildId:e,guildName:s,guildServer:r}),i==="Historie"&&n.jsxs("div",{className:"text-sm",style:{color:Bs.soft},children:["Platzhalter ",n.jsx("b",{children:"Historie"}),"  Inhalt folgt."]})]})]})}function wJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(NN,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),n.jsx(NN,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"})]})]})}function NN({to:t,title:e,desc:s}){return n.jsxs(qt,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function jJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function SJ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const Js={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function kN({children:t,style:e}){return n.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function NJ({size:t=36}){return n.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:n.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function Ec({label:t,value:e}){return n.jsxs("div",{style:{background:Js.tileAlt,border:`1px solid ${Js.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsx("div",{style:{fontSize:12,color:Js.textSoft,marginBottom:4},children:t}),n.jsx("div",{style:{fontSize:22,color:Js.title,fontWeight:700},children:e})]})}function kJ(t){const e=t.trim(),s=e.toUpperCase(),r=e.toLowerCase(),i=s.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let l="";const d=s.match(/^([A-Z]{2})(\d{1,3})$/);if(d){const u=d[1],h=String(parseInt(d[2],10)),p=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();l=`s${h}.sfgame.${p}`}return Array.from(new Set([e,s,r,i,a,l].filter(Boolean)))}function oy(){var N,T,M,L;const t=Xf(),e=Vr(),s=ir(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=I.useState(!0),[l,d]=I.useState(null),[u,h]=I.useState(null),[p,g]=I.useState(null);I.useEffect(()=>{let k=!1;async function v(){a(!0),d(null),h(null),g(null);try{const _=r.trim();if(!_)throw new Error("Kein Server gewhlt.");const P=Gt(dt,`servers/${_}`),E=await vn(P);if(E.exists()){k||(h(E.id),g(E.data()));return}const w=jd(dt,"servers"),A=kJ(_),B=[];for(const z of A)B.push(pn(Vn(w,jl("code","==",z),Un(1)))),B.push(pn(Vn(w,jl("displayName","==",z),Un(1)))),B.push(pn(Vn(w,jl("host","==",z),Un(1))));const D=await Promise.allSettled(B);let $=null,F=null;for(const z of D){if(z.status!=="fulfilled")continue;const H=z.value;if(!H.empty){const K=H.docs[0];$=K.id,F=K.data();break}}if(!$||!F)throw new Error("Server nicht gefunden.");k||(h($),g(F),$!==_&&e(`/server/${encodeURIComponent($)}`,{replace:!0,state:{from:s.pathname}}))}catch(_){k||d((_==null?void 0:_.message)||"Fehler beim Laden.")}finally{k||a(!1)}}return v(),()=>{k=!0}},[r,e,s.pathname]);const y=I.useMemo(()=>n.jsxs("div",{style:{padding:24,color:Js.textSoft},children:[l!=null?l:"Unbekannter Fehler.",n.jsx("div",{style:{marginTop:12},children:n.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:Js.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[l,e]);if(i)return n.jsx(wt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsx("div",{style:{padding:16,color:Js.textSoft},children:"Lade Serverprofil"})});if(!p)return n.jsx(wt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:y});const b=p.displayName||p.code||u||r,S=p.active===!0?"Aktiv":p.active===!1?"Inaktiv":"";return n.jsxs(wt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${Js.line}`},children:n.jsxs(kN,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[n.jsx(NJ,{size:36}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:18,color:Js.title,fontWeight:700},children:b}),n.jsxs("div",{style:{fontSize:12,color:Js.textSoft},children:[p.host||"","  ",p.region||"","  ",((N=p.type)==null?void 0:N.toUpperCase())||""]})]})]})}),n.jsxs(kN,{style:{paddingTop:12,paddingBottom:24},children:[n.jsxs("div",{style:{background:Js.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${Js.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0,color:Js.title,fontSize:24,fontWeight:800},children:b}),n.jsxs("div",{style:{marginTop:6,color:Js.textSoft,fontSize:13},children:[p.host||"","  ",p.region||"","  ",((T=p.type)==null?void 0:T.toUpperCase())||""]})]}),n.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[n.jsxs("span",{style:{color:Js.textSoft},children:["Status: ",S]}),n.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:p.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[n.jsx(Ec,{label:"Code",value:p.code||""}),n.jsx(Ec,{label:"Host",value:p.host||""}),n.jsx(Ec,{label:"Region",value:p.region||""}),n.jsx(Ec,{label:"Typ",value:((M=p.type)==null?void 0:M.toUpperCase())||""}),n.jsx(Ec,{label:"Numeric ID",value:(L=p.numericId)!=null?L:""}),n.jsx(Ec,{label:"Status",value:S})]}),n.jsxs("div",{style:{marginTop:16,background:Js.tileAlt,padding:15,borderRadius:12,border:`1px solid ${Js.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:Js.textSoft},children:["Platzhalter ",n.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const TJ="_page_177kv_1",CJ="_sectionCard_177kv_15",EJ="_identityCard_177kv_29",AJ="_identityGrid_177kv_39",IJ="_profileName_177kv_63",RJ="_identityMeta_177kv_77",PJ="_mainCharacter_177kv_95",LJ="_characterHeader_177kv_117",DJ="_characterTitle_177kv_131",MJ="_characterSubtitle_177kv_143",FJ="_classIcon_177kv_153",BJ="_metaGrid_177kv_181",$J="_metaLabel_177kv_193",OJ="_metaValue_177kv_207",VJ="_portrait_177kv_217",UJ="_sectionHeader_177kv_245",zJ="_sectionHint_177kv_265",HJ="_bioText_177kv_275",GJ="_tagGroups_177kv_295",WJ="_tagGroupLabel_177kv_309",qJ="_tagList_177kv_323",KJ="_tag_177kv_295",QJ="_showcaseGrid_177kv_353",YJ="_characterCard_177kv_365",XJ="_characterCardHeader_177kv_385",JJ="_characterName_177kv_399",ZJ="_badge_177kv_411",eZ="_characterMeta_177kv_433",tZ="_characterStats_177kv_449",sZ="_statGrid_177kv_465",nZ="_statTile_177kv_477",rZ="_statLabel_177kv_491",iZ="_statValue_177kv_505",aZ="_statSubtext_177kv_519",oZ="_emptyState_177kv_531",lZ="_recordsHighlights_177kv_551",cZ="_highlightCard_177kv_565",dZ="_recordType_177kv_579",uZ="_recordTitle_177kv_593",hZ="_timeline_177kv_607",pZ="_timelineItem_177kv_625",mZ="_timelineBullet_177kv_635",fZ="_timelineContent_177kv_653",gZ="_timelineTitle_177kv_661",xZ="_timelineMeta_177kv_673",vZ="_achievementsHighlights_177kv_685",yZ="_achievementCard_177kv_699",bZ="_achievementIcon_177kv_723",_Z="_achievementName_177kv_747",wZ="_achievementDesc_177kv_759",jZ="_achievementTier_177kv_771",SZ="_achievementDate_177kv_785",NZ="_achievementsGrid_177kv_795",kZ="_achievementBadge_177kv_807",TZ="_tierGold_177kv_831",CZ="_tierSilver_177kv_839",EZ="_tierBronze_177kv_847",Le={page:TJ,sectionCard:CJ,identityCard:EJ,identityGrid:AJ,profileName:IJ,identityMeta:RJ,mainCharacter:PJ,characterHeader:LJ,characterTitle:DJ,characterSubtitle:MJ,classIcon:FJ,metaGrid:BJ,metaLabel:$J,metaValue:OJ,portrait:VJ,sectionHeader:UJ,sectionHint:zJ,bioText:HJ,tagGroups:GJ,tagGroupLabel:WJ,tagList:qJ,tag:KJ,showcaseGrid:QJ,characterCard:YJ,characterCardHeader:XJ,characterName:JJ,badge:ZJ,characterMeta:eZ,characterStats:tZ,statGrid:sZ,statTile:nZ,statLabel:rZ,statValue:iZ,statSubtext:aZ,emptyState:oZ,recordsHighlights:lZ,highlightCard:cZ,recordType:dZ,recordTitle:uZ,timeline:hZ,timelineItem:pZ,timelineBullet:mZ,timelineContent:fZ,timelineTitle:gZ,timelineMeta:xZ,achievementsHighlights:vZ,achievementCard:yZ,achievementIcon:bZ,achievementName:_Z,achievementDesc:wZ,achievementTier:jZ,achievementDate:SZ,achievementsGrid:NZ,achievementBadge:kZ,tierGold:TZ,tierSilver:CZ,tierBronze:EZ},AZ={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},IZ=1e3*60*60*24,TN={gold:3,silver:2,bronze:1};function RZ(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const s=Date.now()-e;return s<0?0:Math.floor(s/IZ)}function Pm(t){const e=new Date(t);return Number.isNaN(e.getTime())?lt("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function PZ(){const{profileId:t}=Xf(),e=AZ,s=RZ(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(p=>p.type==="record").slice(0,3),a=[...e.achievements].sort((p,g)=>TN[g.tier]-TN[p.tier]).slice(0,3),l=[{label:lt("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:lt("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:lt("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:lt("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],d=s==null?lt("profile.public.identity.dateUnknown"):s===0?lt("profile.public.identity.lastScanToday"):`${s} ${lt("profile.public.identity.daysAgoSuffix")}`,u=lt("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):lt("profile.public.identity.unknownValue");return n.jsx(wt,{title:lt("profile.public.title"),subtitle:lt("profile.public.subtitle"),centerFramed:!1,padded:!0,children:n.jsxs("div",{className:Le.page,children:[n.jsx("section",{className:`${Le.sectionCard} ${Le.identityCard}`,children:n.jsxs("div",{className:Le.identityGrid,children:[n.jsxs("div",{children:[n.jsx("h1",{className:Le.profileName,children:e.profileUser.displayName}),n.jsxs("div",{className:Le.identityMeta,children:[n.jsxs("span",{children:[lt("profile.public.identity.profileIdLabel"),": ",t!=null?t:lt("profile.public.identity.unknownValue")]}),n.jsxs("span",{children:[lt("profile.public.identity.lastScanLabel"),": ",d]})]}),n.jsxs("article",{className:Le.mainCharacter,children:[n.jsxs("div",{className:Le.characterHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Le.metaLabel,children:lt("profile.public.identity.mainCharacterLabel")}),n.jsx("div",{className:Le.characterTitle,children:e.mainCharacter.name}),n.jsxs("div",{className:Le.characterSubtitle,children:[e.mainCharacter.class,"  ",lt("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),n.jsx("div",{className:Le.classIcon,children:e.mainCharacter.class.charAt(0)})]}),n.jsxs("div",{className:Le.metaGrid,children:[n.jsxs("div",{children:[n.jsx("div",{className:Le.metaLabel,children:lt("profile.public.identity.serverLabel")}),n.jsx("div",{className:Le.metaValue,children:e.mainCharacter.server})]}),n.jsxs("div",{children:[n.jsx("div",{className:Le.metaLabel,children:lt("profile.public.identity.guildLabel")}),n.jsx("div",{className:Le.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),n.jsx("div",{className:Le.portrait,children:u})]})}),n.jsxs("section",{className:Le.sectionCard,children:[n.jsx("div",{className:Le.sectionHeader,children:n.jsx("span",{children:lt("profile.public.bio.title")})}),n.jsx("p",{className:Le.bioText,children:e.bio}),n.jsxs("div",{className:Le.tagGroups,children:[n.jsxs("div",{children:[n.jsx("div",{className:Le.tagGroupLabel,children:lt("profile.public.bio.languagesLabel")}),n.jsx("div",{className:Le.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(p=>n.jsx("span",{className:Le.tag,children:p.toUpperCase()},p)):n.jsx("span",{className:Le.tag,children:lt("profile.public.identity.unknownValue")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:Le.tagGroupLabel,children:lt("profile.public.bio.rolesLabel")}),n.jsx("div",{className:Le.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(p=>n.jsx("span",{className:Le.tag,children:lt(`profile.public.roles.${p}`)},p)):n.jsx("span",{className:Le.tag,children:lt("profile.public.identity.unknownValue")})})]})]})]}),n.jsxs("section",{className:Le.sectionCard,children:[n.jsxs("div",{className:Le.sectionHeader,children:[n.jsx("span",{children:lt("profile.public.showcase.title")}),n.jsx("span",{className:Le.sectionHint,children:lt("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?n.jsx("div",{className:Le.emptyState,children:lt("profile.public.showcase.empty")}):n.jsx("div",{className:Le.showcaseGrid,children:e.showcaseCharacters.map(p=>n.jsxs("article",{className:Le.characterCard,children:[n.jsxs("div",{className:Le.characterCardHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Le.characterName,children:p.name}),n.jsxs("div",{className:Le.characterMeta,children:[n.jsx("span",{children:p.class}),n.jsxs("span",{children:[lt("profile.public.identity.levelShort")," ",p.level]})]})]}),n.jsx("span",{className:Le.badge,children:lt(`profile.public.showcase.tags.${p.tag}`)})]}),n.jsxs("div",{className:Le.characterMeta,children:[n.jsx("span",{children:p.server}),n.jsx("span",{children:p.guildName})]}),n.jsxs("div",{className:Le.characterStats,children:[n.jsxs("span",{children:[lt("profile.public.showcase.scrapbookLabel")," ",p.scrapbookPercent,"%"]}),n.jsxs("span",{children:[lt("profile.public.showcase.highlightLabel"),": ",p.highlightProgress]})]})]},p.id))})]}),n.jsxs("section",{className:Le.sectionCard,children:[n.jsx("div",{className:Le.sectionHeader,children:n.jsx("span",{children:lt("profile.public.stats.title")})}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Le.statGrid,children:l.map(p=>n.jsxs("article",{className:Le.statTile,children:[n.jsx("div",{className:Le.statLabel,children:p.label}),n.jsx("div",{className:Le.statValue,children:p.value})]},p.label))}),n.jsxs("div",{className:Le.statSubtext,children:[lt("profile.public.stats.topServersLabel"),": ",h]}),n.jsxs("div",{className:Le.statSubtext,children:[lt("profile.public.stats.firstScanLabel"),": ",Pm(e.scanStats.firstScanAt)]})]})]}),n.jsxs("section",{className:Le.sectionCard,children:[n.jsx("div",{className:Le.sectionHeader,children:n.jsx("span",{children:lt("profile.public.records.title")})}),e.recordsAndMilestones.length===0?n.jsx("div",{className:Le.emptyState,children:lt("profile.public.records.empty")}):n.jsxs(n.Fragment,{children:[i.length>0&&n.jsx("div",{className:Le.recordsHighlights,children:i.map(p=>n.jsxs("article",{className:Le.highlightCard,children:[n.jsx("div",{className:Le.recordType,children:lt(`profile.public.records.type.${p.type}`)}),n.jsx("div",{className:Le.recordTitle,children:p.title}),n.jsxs("div",{className:Le.timelineMeta,children:[Pm(p.when),"  ",p.context]})]},p.id))}),n.jsx("ul",{className:Le.timeline,children:e.recordsAndMilestones.map(p=>n.jsxs("li",{className:Le.timelineItem,children:[n.jsx("div",{className:Le.timelineBullet}),n.jsxs("div",{className:Le.timelineContent,children:[n.jsx("div",{className:Le.timelineTitle,children:p.title}),n.jsxs("div",{className:Le.timelineMeta,children:[Pm(p.when),"  ",p.context]})]})]},p.id))})]})]}),n.jsxs("section",{className:Le.sectionCard,children:[n.jsxs("div",{className:Le.sectionHeader,children:[n.jsx("span",{children:lt("profile.public.achievements.title")}),e.achievements.length>0&&n.jsx("span",{className:Le.sectionHint,children:lt("profile.public.achievements.highlights")})]}),e.achievements.length===0?n.jsx("div",{className:Le.emptyState,children:lt("profile.public.achievements.empty")}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:Le.achievementsHighlights,children:a.map(p=>n.jsxs("article",{className:Le.achievementCard,children:[n.jsx("div",{className:[Le.achievementIcon,p.tier==="gold"?Le.tierGold:p.tier==="silver"?Le.tierSilver:Le.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Le.achievementTier,children:lt(`profile.public.achievements.tiers.${p.tier}`)}),n.jsx("div",{className:Le.achievementName,children:lt(p.nameKey)}),n.jsx("div",{className:Le.achievementDesc,children:lt(p.descriptionKey)}),p.unlockedAt&&n.jsx("div",{className:Le.achievementDate,children:Pm(p.unlockedAt)})]},p.id))}),n.jsx("div",{className:Le.achievementsGrid,children:e.achievements.map(p=>n.jsxs("article",{className:Le.achievementBadge,children:[n.jsx("div",{className:[Le.achievementIcon,p.tier==="gold"?Le.tierGold:p.tier==="silver"?Le.tierSilver:Le.tierBronze].join(" "),children:p.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Le.achievementName,children:lt(p.nameKey)}),n.jsx("div",{className:Le.achievementDesc,children:lt(p.descriptionKey)})]},p.id))})]})]})]})})}const LZ="_wrap_k6pqt_1",DZ="_centerLogoWrap_k6pqt_21",MZ="_centerLogoLink_k6pqt_37",FZ="_centerLogo_k6pqt_21",BZ="_arc_k6pqt_55",$Z="_left_k6pqt_57",OZ="_right_k6pqt_59",VZ="_sub_k6pqt_61",UZ="_full_k6pqt_63",zZ="_arcItem_k6pqt_65",HZ="_iconBtn_k6pqt_71",GZ="_active_k6pqt_125",WZ="_iconImg_k6pqt_135",qZ="_placeholderIcon_k6pqt_139",KZ="_placeholderText_k6pqt_157",QZ="_iconLabel_k6pqt_161",dn={wrap:LZ,centerLogoWrap:DZ,centerLogoLink:MZ,centerLogo:FZ,arc:BZ,left:$Z,right:OZ,sub:VZ,full:UZ,arcItem:zZ,iconBtn:HZ,active:GZ,iconImg:WZ,placeholderIcon:qZ,placeholderText:KZ,iconLabel:QZ},YZ=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),h=l.get("sub2"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),y=p.get("sub"),b=p.get("sub2");r==="main"?a=d===g:r==="sub"?a=d===g&&!!y&&u===y:a=d===g&&!!y&&u===y&&!!b&&h===b}catch(l){a=!1}return n.jsxs(qt,{to:t,"aria-label":e,className:[dn.iconBtn,a?dn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:dn.iconImg}):n.jsx("div",{className:dn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:dn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:dn.iconLabel,children:e})]})},Lm=({items:t,side:e,anchorSide:s,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440,superOffset:d=660})=>{if((e==="sub"||e==="sub2")&&!s)return null;const u=I.useMemo(()=>{const g=t.length;if(g===0)return[];let y=-90,b=90;e==="left"?(y=90,b=270):e==="sub"||e==="sub2"?s==="left"?(y=90,b=270):(y=-90,b=90):e==="full"&&(y=0,b=360);const S=(b-y)/(g+1),N=r?190:250;return t.map((T,M)=>{const k=(y+S*(M+1))*Math.PI/180;return{it:T,x:Math.cos(k)*N,y:Math.sin(k)*N}})},[t,e,s,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`:e==="sub2"&&(g.left=s==="left"?`calc(50% - ${d}px)`:`calc(50% + ${d}px)`),g})(),p=e==="sub"?"sub":e==="sub2"?"sub2":"main";return n.jsx("div",{className:[dn.arc,e==="left"?dn.left:"",e==="right"?dn.right:"",e==="sub"?dn.sub:"",e==="sub2"?dn.sub2:"",e==="full"?dn.full:""].join(" "),style:h,children:u.map(({it:g,x:y,y:b})=>n.jsx("div",{className:dn.arcItem,style:{transform:`translate(${y}px, ${b}px)`},children:n.jsx(YZ,{to:g.to,label:g.label,icon:g.icon,variant:p})},g.key))})},XZ=({logoSrc:t,categories:e})=>{const[s]=Dl(),r=s.get("tab")||null,i=s.get("sub")||null;s.get("sub2");const a=I.useMemo(()=>e.find(k=>k.key===r)||null,[e,r]),l=(a==null?void 0:a.sub)||[],d=I.useMemo(()=>l.find(k=>k.key===i)||null,[l,i]),u=(d==null?void 0:d.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",p=I.useRef(null),[g,y]=I.useState(!1),[b,S]=I.useState(220),[N,T]=I.useState(440),[M,L]=I.useState(660);return I.useLayoutEffect(()=>{(()=>{var B,D;const _=((D=(B=p.current)==null?void 0:B.getBoundingClientRect().width)!=null?D:380)/2,E=Math.round(_+60),w=Math.round(E+220),A=Math.round(w+220);S(E),T(w),L(A),y(!0)})()},[]),I.useEffect(()=>{let k=0,v=null,_={main:b,out:N,sup:M};const P=()=>{v!=null&&window.clearTimeout(v),v=window.setTimeout(()=>{k=requestAnimationFrame(()=>{var K,q;const w=((q=(K=p.current)==null?void 0:K.getBoundingClientRect().width)!=null?q:380)/2,B=Math.round(w+60),D=Math.round(B+220),$=Math.round(D+220),F=Math.abs(B-_.main),z=Math.abs(D-_.out),H=Math.abs($-_.sup);F>1&&S(B),z>1&&T(D),H>1&&L($),_={main:B,out:D,sup:$}})},120)};return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),v!=null&&window.clearTimeout(v),k&&cancelAnimationFrame(k)}},[b,N,M]),n.jsxs("div",{className:dn.wrap,children:[n.jsx("div",{className:dn.centerLogoWrap,children:n.jsx(qt,{to:"/guidehub",className:dn.centerLogoLink,"aria-label":"Guide Hub Home",children:n.jsx("img",{ref:p,src:t,alt:"Guide Hub",className:dn.centerLogo})})}),g&&n.jsxs(n.Fragment,{children:[n.jsx(Lm,{items:e.filter(k=>k.side==="left").map(k=>({key:k.key,to:k.to,label:k.label,icon:k.icon})),side:"left",variant:"main",arcOffset:b}),n.jsx(Lm,{items:e.filter(k=>k.side==="right").map(k=>({key:k.key,to:k.to,label:k.label,icon:k.icon})),side:"right",variant:"main",arcOffset:b}),h&&l.length>0&&n.jsx(Lm,{items:l.map(k=>({key:k.key,to:k.to,label:k.label,icon:k.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:N,compact:!0}),h&&u.length>0&&n.jsx(Lm,{items:u.map(k=>({key:k.key,to:k.to,label:k.label,icon:k.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:M,compact:!0})]})]})},CN=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"event-list",label:"Event List",to:"/guidehub?tab=events&sub=event-list"},{key:"event-cycle",label:"Event Cycle",to:"/guidehub?tab=events&sub=event-cycle"},{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=progression&sub=early&sub2=max-item-stats-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=fortress-package-skip-order"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=underworld-pro-package-skip-order"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=early&sub2=gem-calculator"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=progression&sub=early&sub2=fortress-attack-duplication"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"dungeons",label:"Dungeons",to:"/guidehub?tab=dungeons",sub2:[]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]},{key:"class-book",label:"Class book",to:"/guidehub?tab=class-book",side:"right",sub:[]}],JZ="_topWrap_1vr4p_1",ZZ="_divider_1vr4p_19",eee="_contentArea_1vr4p_53",tee="_placeholder_1vr4p_65",see="_placeholderTitle_1vr4p_79",nee="_placeholderText_1vr4p_93",Ac={topWrap:JZ,divider:ZZ,contentArea:eee,placeholder:tee,placeholderTitle:see,placeholderText:nee},ree="/assets/logo_guidehub-c4zKGdF-.png";function Ul({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const iee=()=>n.jsx(Ul,{title:"Game Features"});function fs({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const aee=()=>n.jsx(fs,{title:"Progression"}),oee=()=>n.jsx(fs,{title:"Hellevator"}),lee=()=>n.jsx(fs,{title:"Legendary Dungeon"}),cee=()=>n.jsx(fs,{title:"Events"}),dee="_card_1rxdx_21",uee="_hoverLift_1rxdx_51",hee="_title_1rxdx_63",pee="_body_1rxdx_89",mee="_iconStack_1rxdx_99",bu={card:dee,hoverLift:uee,title:hee,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:pee,iconStack:mee};function fee({title:t,padding:e="md",hover:s=!0,className:r="",children:i}){return n.jsxs("div",{className:[bu.card,bu[`pad-${e}`],s?bu.hoverLift:"",r].join(" "),children:[t?n.jsx("div",{className:bu.title,children:t}):null,n.jsx("div",{className:bu.body,children:i})]})}const gee=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],xee="_grid_1amcc_3",vee="_tileBtn_1amcc_45",yee="_wrap_1amcc_87",bee="_headerBar_1amcc_99",_ee="_title_1amcc_117",_u={grid:xee,tileBtn:vee,wrap:yee,headerBar:bee,title:_ee};function wee(){const[t,e]=Dl(),s=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return n.jsxs("div",{className:_u.wrap,children:[n.jsx("div",{className:_u.headerBar,children:n.jsx("h2",{className:_u.title,children:"Calculators"})}),n.jsx("div",{className:_u.grid,children:gee.map(r=>n.jsx("button",{className:_u.tileBtn,onClick:()=>s(r.slug),"aria-label":r.title,children:n.jsx(fee,{title:r.title,padding:"md",hover:!0,children:n.jsx(n.Fragment,{children:" "})})},r.slug))})]})}const jee=()=>n.jsx(fs,{title:"Infographics (Dropdown inside page)"}),See=()=>n.jsx(fs,{title:"Class book"}),Nee=()=>n.jsx(fs,{title:"Dungeons"}),kee=()=>n.jsx(Ul,{title:"Fortress"}),Tee=()=>n.jsx(Ul,{title:"Fortress Calculator"}),Cee="_wrap_1skhh_7",Eee="_headerBar_1skhh_21",Aee="_title_1skhh_39",Iee="_meta_1skhh_55",Ree="_description_1skhh_67",Pee="_contentWrapper_1skhh_83",Lee="_tableSection_1skhh_97",Dee="_table_1skhh_97",Mee="_infoBox_1skhh_151",Fee="_sectionTitle_1skhh_165",Bee="_divider_1skhh_181",tr={wrap:Cee,headerBar:Eee,title:Aee,meta:Iee,description:Ree,contentWrapper:Pee,tableSection:Lee,table:Dee,infoBox:Mee,sectionTitle:Fee,divider:Bee};function $ee(){return n.jsxs("div",{className:tr.wrap,children:[n.jsxs("div",{className:tr.headerBar,children:[n.jsx("h2",{className:tr.title,children:"Fortress Package skip order"}),n.jsx("span",{className:tr.meta,children:"Last updated: 21.02.2025"})]}),n.jsx("p",{className:tr.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),n.jsxs("div",{className:tr.contentWrapper,children:[n.jsxs("section",{className:tr.tableSection,children:[n.jsx("h3",{className:tr.sectionTitle,children:"Fortress Build Order"}),n.jsxs("table",{className:tr.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Building"}),n.jsx("th",{children:"Level"}),n.jsx("th",{children:"Gold Cost"}),n.jsx("th",{children:"Shroom Cost"}),n.jsx("th",{children:"Wood Cost"}),n.jsx("th",{children:"Stone Cost"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"35"}),n.jsx("td",{children:"12"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:"50"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"138"}),n.jsx("td",{children:"46"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"440"}),n.jsx("td",{children:"140"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"406"}),n.jsx("td",{children:"129"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,100"}),n.jsx("td",{children:"333"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,015"}),n.jsx("td",{children:"308"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,500"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,308"}),n.jsx("td",{children:"738"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"6,000"}),n.jsx("td",{children:"2,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"5,538"}),n.jsx("td",{children:"1,849"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"7"}),n.jsx("td",{children:"70"}),n.jsx("td",{children:"48"}),n.jsx("td",{children:"13,417"}),n.jsx("td",{children:"4,433"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:"78"}),n.jsx("td",{children:"27,200"}),n.jsx("td",{children:"9,280"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"720"}),n.jsx("td",{children:"240"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"1,408"}),n.jsx("td",{children:"448"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"2,640"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Gem Mine"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"17"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Treasury"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"13"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"92"}),n.jsx("td",{children:"74"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"248"}),n.jsx("td",{children:"200"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"21"}),n.jsx("td",{children:"500"}),n.jsx("td",{children:"320"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"22"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"90"}),n.jsx("td",{children:"16"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"9"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"264"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"660"}),n.jsx("td",{children:"107"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"14"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"82"}),n.jsx("td",{children:"55"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Total cost"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"577"}),n.jsx("td",{children:"363"}),n.jsx("td",{children:"99,881"}),n.jsx("td",{children:"33,218"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress Pack ressources"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"300"}),n.jsx("td",{children:"100,000"}),n.jsx("td",{children:"50,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Left over"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-577"}),n.jsx("td",{children:"-63"}),n.jsx("td",{children:"119"}),n.jsx("td",{children:"16,782"})]})]})]})]}),n.jsxs("section",{className:tr.infoBox,children:[n.jsx("h3",{className:tr.sectionTitle,children:"Important"}),n.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Archery Guild"}),n.jsx("li",{children:"Mage's Tower"}),n.jsx("li",{children:"Fortifications"})]}),n.jsx("div",{className:tr.divider}),n.jsx("h3",{className:tr.sectionTitle,children:"Total Costs"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Gold:"})," 577 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Shrooms:"})," 363 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Wood:"})," 99,881 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Stone:"})," 33,218 ",n.jsx("br",{})]}),n.jsx("h3",{className:tr.sectionTitle,children:"Remaining Resources"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Remaining Gold:"})," -577 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Wood:"})," 119 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const Oee=()=>n.jsx(Ul,{title:"Fortress attack duplication guide"}),Vee=()=>n.jsx(Ul,{title:"Underworld"}),Uee=()=>n.jsx(Ul,{title:"Underworld Calculator"}),zee=()=>n.jsx(Ul,{title:"Underworld Pro Package skip order"}),Hee=()=>n.jsx(fs,{title:"Arena / AM"}),Gee="_wrap_mm7x0_5",Wee="_headerBar_mm7x0_19",qee="_title_mm7x0_37",Kee="_meta_mm7x0_51",Qee="_description_mm7x0_63",Yee="_controls_mm7x0_79",Xee="_search_mm7x0_83",Jee="_tableWrap_mm7x0_119",Zee="_table_mm7x0_119",ete="_thead_mm7x0_143",tte="_th_mm7x0_143",ste="_td_mm7x0_167",nte="_tierCell_mm7x0_179",rte="_amountCell_mm7x0_181",ite="_bonusCell_mm7x0_183",ate="_tags_mm7x0_185",ote="_tierBox_mm7x0_191",lte="_tierIcon_mm7x0_193",cte="_tierTexts_mm7x0_203",dte="_tierName_mm7x0_205",ute="_badge_mm7x0_211",hte="_badgeMax_mm7x0_231",pte="_badgeAchiev_mm7x0_233",mte="_badgeX2_mm7x0_235",fte="_badgeX12_mm7x0_237",gte="_badgeX60_mm7x0_239",xte="_iconHead_mm7x0_245",vte="_achiev_mm7x0_261",yte="_achievImg_mm7x0_263",bte="_dataRow_mm7x0_291",_te="_tierCellHover_mm7x0_311",ze={wrap:Gee,headerBar:Wee,title:qee,meta:Kee,description:Qee,controls:Yee,search:Xee,tableWrap:Jee,table:Zee,thead:ete,th:tte,td:ste,tierCell:nte,amountCell:rte,bonusCell:ite,tags:ate,tierBox:ote,tierIcon:lte,tierTexts:cte,tierName:dte,badge:ute,badgeMax:hte,badgeAchiev:pte,badgeX2:mte,badgeX12:fte,badgeX60:gte,iconHead:xte,achiev:vte,achievImg:yte,dataRow:bte,tierCellHover:_te};function BE(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function wte(t){const e=t.filter(Boolean).join(" ");return BE(e)}const jte={fortressbanner:"DRIVE_FILE_ID_HIER",woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",fortressgemcalculatoricon:"DRIVE_FILE_ID_HIER",fortressdiagram1:"DRIVE_FILE_ID_HIER",fortressdiagram2:"DRIVE_FILE_ID_HIER",underworldbanner:"DRIVE_FILE_ID_HIER",underworldcalculatoricon:"DRIVE_FILE_ID_HIER",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",infographicsbanner:"DRIVE_FILE_ID_HIER",classbookcover:"DRIVE_FILE_ID_HIER",classbookback:"DRIVE_FILE_ID_HIER",dungeonsbanner:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450"};function Ste(t){var s;const e=Array.isArray(t)?wte(t):BE(t!=null?t:"");return(s=jte[e])!=null?s:null}function Mg(t,e=512){var a,l;const s=Ste(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=Rl(s))!=null?a:null,i=r&&(l=Ur(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function Nl(t,e=512){return Mg(t,e).thumb}const to={gold:"rune_gold",xp:"rune_xp",hp:"rune_hp",totalRes:"rune_totalres",singleRes:"rune_singleres",elem:"rune_elemental",item:"rune_itemquality",epics:"rune_epics"},EN={Capitalist:"achiev_capitalist","Stinking rich":"achiev_stinkingrich","Rune Master":"achiev_runemaster"};function so({keyName:t,label:e}){const s=Mg(t,36);return n.jsxs("div",{className:ze.iconHead,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:e,width:36,height:36,style:{borderRadius:6,border:"1px solid #2B4C73"}}):n.jsx("div",{style:{width:36,height:36,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(s.fallback||e).slice(0,1).toUpperCase()}),n.jsx("span",{children:e})]})}function Nte({name:t}){const e=Object.keys(EN).find(r=>t.toLowerCase().includes(r.toLowerCase())),s=Mg(e?EN[e]:"achiev_generic",16);return n.jsxs("div",{className:ze.achiev,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:t,width:16,height:16,style:{borderRadius:3,border:"1px solid #2C4A73"}}):n.jsx("div",{className:ze.achievImg}),n.jsx("span",{children:t})]})}const Of=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",singleRes:"14%",elemDmg:"11%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",totalRes:"5%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%",elemDmg:"12%"},{tier:"Sextillion",amount:"1 E21",gold:"11%",epics:"11%"},{tier:"Sextillion",amount:"10 E22",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"100 E23",gold:"12%",totalRes:"6%",epics:"12%"},{tier:"Septillion",amount:"1 E24",singleRes:"17%",elemDmg:"14%"},{tier:"Septillion",amount:"10 E25",gold:"13%",epics:"13%"},{tier:"Septillion",amount:"100 E26",totalRes:"7%",singleRes:"18%",elemDmg:"15%"},{tier:"Octillion",amount:"1 E27",gold:"14%",epics:"14%"},{tier:"Octillion",amount:"10 E28",singleRes:"19%",elemDmg:"16%"},{tier:"Octillion",amount:"100 E29",gold:"15%",totalRes:"8%",epics:"15%"},{tier:"Nonillion",amount:"1 E30",singleRes:"20%",elemDmg:"17%"},{tier:"Nonillion",amount:"10 E31",gold:"16%",epics:"16%"},{tier:"Nonillion",amount:"100 E32",totalRes:"9%",singleRes:"21%",elemDmg:"18%"},{tier:"Decillion",amount:"1 E33",gold:"17%",epics:"17%"},{tier:"Decillion",amount:"10 E34",singleRes:"22%",elemDmg:"19%",note:"x2 Boost"},{tier:"Decillion",amount:"100 E35",gold:"18%",totalRes:"10%",epics:"18%"},{tier:"Undecillion",amount:"1 E36",singleRes:"23%",elemDmg:"20%"},{tier:"Undecillion",amount:"10 E37",gold:"19%",epics:"19%"},{tier:"Undecillion",amount:"100 E38",totalRes:"11%",singleRes:"24%",elemDmg:"21%"},{tier:"Duodecillion",amount:"1 E39",gold:"20%",epics:"20%"},{tier:"Duodecillion",amount:"10 E40",singleRes:"25%",elemDmg:"22%"},{tier:"Duodecillion",amount:"100 E41",gold:"21%",totalRes:"12%",epics:"21%"},{tier:"Tredecillion",amount:"1 E42",singleRes:"26%",elemDmg:"23%"},{tier:"Tredecillion",amount:"10 E43",gold:"22%",epics:"22%"},{tier:"Tredecillion",amount:"100 E44",totalRes:"13%",singleRes:"27%",elemDmg:"24%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"23%",epics:"23%"},{tier:"Quattuordecillion",amount:"10 E46",singleRes:"28%",elemDmg:"25%"},{tier:"Quattuordecillion",amount:"100 E47",gold:"24%",totalRes:"14%",epics:"24%"},{tier:"Quindecillion",amount:"1 E48",singleRes:"29%",elemDmg:"26%"},{tier:"Quindecillion",amount:"10 E49",gold:"25%",epics:"25%"},{tier:"Quindecillion",amount:"100 E50",totalRes:"15%",singleRes:"30%",elemDmg:"27%"},{tier:"Sexdecillion",amount:"1 E51",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"10 E52",singleRes:"31%",elemDmg:"28%"},{tier:"Sexdecillion",amount:"100 E53",gold:"27%",totalRes:"16%",epics:"27%"},{tier:"Septendecillion",amount:"1 E54",singleRes:"32%",elemDmg:"29%"},{tier:"Septendecillion",amount:"10 E55",gold:"28%",epics:"28%"},{tier:"Septendecillion",amount:"100 E56",totalRes:"17%",singleRes:"33%",elemDmg:"30%"},{tier:"Octodecillion",amount:"1 E57",gold:"29%",epics:"29%"},{tier:"Octodecillion",amount:"10 E58",singleRes:"34%",elemDmg:"31%"},{tier:"Octodecillion",amount:"100 E59",gold:"30%",totalRes:"18%",epics:"30%"},{tier:"Novemdecillion",amount:"1 E60",singleRes:"35%",elemDmg:"32%"},{tier:"Novemdecillion",amount:"10 E61",gold:"31%",epics:"31%"},{tier:"Novemdecillion",amount:"100 E62",totalRes:"19%",singleRes:"36%",elemDmg:"33%"},{tier:"Vigintillion",amount:"1 E63",gold:"32%",epics:"32%"},{tier:"Vigintillion",amount:"10 E64",singleRes:"37%",elemDmg:"34%"},{tier:"Vigintillion",amount:"100 E65",gold:"33%",totalRes:"20%",epics:"33%"},{tier:"Unvigintillion",amount:"1 E66",singleRes:"38%",elemDmg:"35%"},{tier:"Unvigintillion",amount:"10 E67",gold:"34%",epics:"34%"},{tier:"Unvigintillion",amount:"100 E68",totalRes:"21%",singleRes:"39%",elemDmg:"36%"},{tier:"Duovigintillion",amount:"1 E69",gold:"35%",epics:"35%"},{tier:"Duovigintillion",amount:"10 E70",note:"x12 Boost"},{tier:"Duovigintillion",amount:"100 E71",totalRes:"22%",singleRes:"40%",elemDmg:"37%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"41%",elemDmg:"38%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"23%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",singleRes:"42%",elemDmg:"39%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",totalRes:"24%",singleRes:"43%",elemDmg:"40%"},{tier:"Quinvigintillion",amount:"1 E78",gold:"39%",epics:"39%"},{tier:"Quinvigintillion",amount:"10 E79",singleRes:"44%",elemDmg:"41%"},{tier:"Quinvigintillion",amount:"100 E80",gold:"40%",totalRes:"25%",epics:"40%"},{tier:"Sexvigintillion",amount:"1 E81",singleRes:"45%",elemDmg:"42%"},{tier:"Sexvigintillion",amount:"10 E82",gold:"41%",epics:"41%"},{tier:"Sexvigintillion",amount:"100 E83",totalRes:"26%",singleRes:"46%",elemDmg:"43%"},{tier:"Septenvigintillion",amount:"1 E84",gold:"42%",epics:"42%"},{tier:"Septenvigintillion",amount:"10 E85",singleRes:"47%",elemDmg:"44%"},{tier:"Septenvigintillion",amount:"100 E86",gold:"43%",totalRes:"27%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"48%",elemDmg:"45%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",totalRes:"28%",singleRes:"49%",elemDmg:"46%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",singleRes:"50%",elemDmg:"47%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",totalRes:"29%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"51%",elemDmg:"48%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",totalRes:"30%",singleRes:"52%",elemDmg:"49%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"53%",elemDmg:"50%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",totalRes:"31%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"54%",elemDmg:"51%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",epics:"50%"},{tier:"Duotrigintillion",amount:"100 E101",totalRes:"32%",singleRes:"55%",elemDmg:"52%"},{tier:"Trestrigintillion",amount:"1 E102",gold:"51%",epics:"51%"},{tier:"Trestrigintillion",amount:"10 E103",singleRes:"56%",elemDmg:"53%"},{tier:"Trestrigintillion",amount:"100 E104",gold:"52%",totalRes:"33%",epics:"52%"},{tier:"Quattuortrigintillion",amount:"1 E105",singleRes:"57%",elemDmg:"54%"},{tier:"Quattuortrigintillion",amount:"10 E106",gold:"53%",epics:"53%"},{tier:"Quattuortrigintillion",amount:"100 E107",totalRes:"34%",singleRes:"58%",elemDmg:"55%"},{tier:"Quintrigintillion",amount:"1 E108",gold:"54%",epics:"54%"},{tier:"Quintrigintillion",amount:"10 E109",singleRes:"59%",elemDmg:"56%"},{tier:"Quintrigintillion",amount:"100 E110",gold:"55%",totalRes:"35%",epics:"55%"},{tier:"Sextrigintillion",amount:"1 E111",singleRes:"60%",elemDmg:"57%",note:"x60 Boost"},{tier:"Sextrigintillion",amount:"10 E112",gold:"56%",epics:"56%"},{tier:"Sextrigintillion",amount:"100 E113",totalRes:"36%",singleRes:"61%",elemDmg:"58%"},{tier:"Septentrigintillion",amount:"1 E114",gold:"57%",epics:"57%"},{tier:"Septentrigintillion",amount:"10 E115",singleRes:"62%",elemDmg:"59%"},{tier:"Septentrigintillion",amount:"100 E116",gold:"58%",totalRes:"37%",epics:"58%"},{tier:"Octotrigintillion",amount:"1 E117",singleRes:"63%",elemDmg:"60%"},{tier:"Octotrigintillion",amount:"10 E118",gold:"59%",epics:"59%"},{tier:"Octotrigintillion",amount:"100 E119",gold:"60%",totalRes:"38%",epics:"60%"},{tier:"Noventrigintillion",amount:"1 E120",singleRes:"64%",elemDmg:"61%"},{tier:"Noventrigintillion",amount:"10 E121",gold:"61%",epics:"61%"},{tier:"Noventrigintillion",amount:"100 E122",gold:"62%",totalRes:"39%",epics:"62%"},{tier:"Quadragintillion",amount:"1 E123",singleRes:"65%",elemDmg:"62%"},{tier:"Quadragintillion",amount:"10 E124",gold:"63%",epics:"63%"},{tier:"Quadragintillion",amount:"100 E125",gold:"64%",totalRes:"40%",epics:"64%"},{tier:"Unquadragintillion",amount:"1 E126",singleRes:"66%",elemDmg:"63%"},{tier:"Unquadragintillion",amount:"10 E127",gold:"65%",epics:"65%"},{tier:"Unquadragintillion",amount:"100 E128",gold:"66%",totalRes:"41%",epics:"66%"},{tier:"Duoquadragintillion",amount:"1 E129",singleRes:"67%",elemDmg:"64%"},{tier:"Duoquadragintillion",amount:"10 E130",gold:"67%",epics:"67%"},{tier:"Duoquadragintillion",amount:"100 E131",gold:"68%",totalRes:"42%",epics:"68%"},{tier:"Trequadragintillion",amount:"1 E132",singleRes:"68%",elemDmg:"65%"},{tier:"Trequadragintillion",amount:"10 E133",gold:"69%",epics:"69%"},{tier:"Trequadragintillion",amount:"100 E134",gold:"70%",totalRes:"43%",epics:"70%"},{tier:"Quattuorquadragintillion",amount:"1 E135",singleRes:"69%",elemDmg:"66%"},{tier:"Quattuorquadragintillion",amount:"10 E136",gold:"71%",epics:"71%"},{tier:"Quattuorquadragintillion",amount:"100 E137",gold:"72%",totalRes:"44%",epics:"72%"},{tier:"Quinquadragintillion",amount:"1 E138",singleRes:"70%",elemDmg:"67%"},{tier:"Quinquadragintillion",amount:"10 E139",gold:"73%",epics:"73%"},{tier:"Quinquadragintillion",amount:"100 E140",gold:"74%",totalRes:"45%",epics:"74%"},{tier:"Sexquadragintillion",amount:"1 E141",singleRes:"71%",elemDmg:"68%"},{tier:"Sexquadragintillion",amount:"10 E142",gold:"75%",epics:"75%"},{tier:"Sexquadragintillion",amount:"100 E143",gold:"76%",totalRes:"46%",epics:"76%"},{tier:"Septenquadragintillion",amount:"1 E144",singleRes:"72%",elemDmg:"69%"},{tier:"Septenquadragintillion",amount:"10 E145",gold:"77%",epics:"77%"},{tier:"Septenquadragintillion",amount:"100 E146",gold:"78%",totalRes:"47%",epics:"78%"},{tier:"Octoquadragintillion",amount:"1 E147",singleRes:"73%",elemDmg:"70%"},{tier:"Octoquadragintillion",amount:"10 E148",gold:"79%",epics:"79%"},{tier:"Octoquadragintillion",amount:"100 E149",gold:"80%",totalRes:"48%",epics:"80%"},{tier:"Novenquadragintillion",amount:"1 E150",singleRes:"74%",elemDmg:"71%"},{tier:"Novenquadragintillion",amount:"10 E151",gold:"81%",epics:"81%"},{tier:"Novenquadragintillion",amount:"100 E152",gold:"82%",totalRes:"49%",epics:"82%"},{tier:"Quinquagintillion",amount:"1 E153",singleRes:"75%",elemDmg:"72%"},{tier:"Quinquagintillion",amount:"10 E154",gold:"83%",epics:"83%"},{tier:"Quinquagintillion",amount:"100 E155",gold:"84%",totalRes:"50%",epics:"84%"}];function ly(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function kte(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function Tte(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}const AN={Quintillion:"Capitalist Achievement",Septillion:"Stinking rich Achievement",Decillion:"Rune Master"},Cte="Komplette bersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Achievements und Breakpoints sind markiert.";function Ete(t){const e=t.trim().toLowerCase();return e?Of.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):Of}function Ate(){const[t,e]=I.useState(""),[s,r]=I.useState(null),i=Ete(t),a=I.useMemo(()=>Math.max(...Of.map(d=>ly(d.amount))),[]),l=I.useMemo(()=>{const d=new Map;for(const h of i)d.has(h.tier)||d.set(h.tier,[]),d.get(h.tier).push(h);const u=Array.from(new Set(Of.map(h=>h.tier)));return Array.from(d.entries()).sort((h,p)=>u.indexOf(h[0])-u.indexOf(p[0]))},[i]);return n.jsxs("div",{className:ze.wrap,children:[n.jsxs("div",{className:ze.headerBar,children:[n.jsx("h2",{className:ze.title,children:"Arena Manager  Rune bonuses"}),n.jsx("span",{className:ze.meta,children:"last updated: 15.01.2025"})]}),n.jsx("p",{className:ze.description,children:Cte}),n.jsx("div",{className:ze.controls,children:n.jsx("input",{className:ze.search,placeholder:"Suche (z. B. thousand, E34, x60)",value:t,onChange:d=>e(d.target.value)})}),n.jsx("div",{className:ze.tableWrap,children:n.jsxs("table",{className:ze.table,children:[n.jsx("thead",{className:ze.thead,children:n.jsxs("tr",{className:ze.headRow,children:[n.jsx("th",{className:`${ze.th} ${ze.tierCell}`,children:"Tier"}),n.jsx("th",{className:`${ze.th} ${ze.amountCell}`,children:"Amount"}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.gold,label:"Gold Bonus"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.xp,label:"XP Bonus"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.hp,label:"HP Bonus"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.totalRes,label:"Total Resistance"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.singleRes,label:"Single Resistance"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.elem,label:"Elemental Damage"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.item,label:"Improved Item Quality"})}),n.jsx("th",{className:ze.th,children:n.jsx(so,{keyName:to.epics,label:"Chances of Epics"})}),n.jsx("th",{className:ze.th,children:"Tags"})]})}),n.jsx("tbody",{children:l.map(([d,u])=>{const h=Math.max(...u.map(p=>ly(p.amount)));return u.map((p,g)=>{var S,N,T,M,L,k,v,_;const y=Math.abs(ly(p.amount)-a)<1e-6,b=Tte(p.note);return n.jsxs("tr",{className:ze.dataRow,onMouseEnter:()=>r(d),onMouseLeave:()=>r(null),children:[g===0&&n.jsx("td",{className:`${ze.td} ${ze.tierCell} ${Math.abs(h-a)<1e-6?ze.tierMax:""} ${s===d?ze.tierCellHover:""}`,rowSpan:u.length,children:n.jsxs("div",{className:ze.tierBox,children:[n.jsx("div",{className:ze.tierIcon,children:d.slice(0,1).toUpperCase()}),n.jsxs("div",{className:ze.tierTexts,children:[n.jsx("div",{className:ze.tierName,children:d}),AN[d]&&n.jsx(Nte,{name:AN[d]})]})]})}),n.jsx("td",{className:`${ze.td} ${ze.amountCell}`,children:p.amount}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(S=p.gold)!=null?S:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(N=p.xp)!=null?N:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(T=p.hp)!=null?T:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(M=p.totalRes)!=null?M:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(L=p.singleRes)!=null?L:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(k=p.elemDmg)!=null?k:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(v=p.itemQuality)!=null?v:""}),n.jsx("td",{className:`${ze.td} ${ze.bonusCell}`,children:(_=p.epics)!=null?_:""}),n.jsxs("td",{className:`${ze.td} ${ze.tags}`,children:[y&&n.jsx("span",{className:`${ze.badge} ${ze.badgeMax}`,children:"MAX"}),kte(p.note)&&n.jsx("span",{className:`${ze.badge} ${ze.badgeAchiev}`,children:"Achievement"}),b==="x2"&&n.jsx("span",{className:`${ze.badge} ${ze.badgeX2}`,children:"x2"}),b==="x12"&&n.jsx("span",{className:`${ze.badge} ${ze.badgeX12}`,children:"x12"}),b==="x60"&&n.jsx("span",{className:`${ze.badge} ${ze.badgeX60}`,children:"x60"}),b==="x8"&&n.jsx("span",{className:ze.badge,children:"x8"})]})]},`${d}-${g}`)})})})]})})]})}const Ite="_wrap_zrza7_11",Rte="_headerBar_zrza7_15",Pte="_title_zrza7_31",Lte="_meta_zrza7_33",Dte="_centerCol_zrza7_37",Mte="_text_zrza7_53",Fte="_imageBox_zrza7_55",Bte="_imageFallback_zrza7_57",$te="_credit_zrza7_59",ra={wrap:Ite,headerBar:Rte,title:Pte,meta:Lte,centerCol:Dte,text:Mte,imageBox:Fte,imageFallback:Bte,credit:$te};function Ote(){const t=Mg("ambuildorder"),e=I.useMemo(()=>t.id?`https://drive.google.com/thumbnail?id=${t.id}&sz=w1024`:null,[t.id]),s=I.useMemo(()=>t.id?`https://drive.google.com/uc?export=view&id=${t.id}`:null,[t.id]),r=t.thumb||null,i=e||s||r;return n.jsxs("div",{className:ra.wrap,children:[n.jsxs("div",{className:ra.headerBar,children:[n.jsx("h2",{className:ra.title,children:"Arena Manager  Build Order"}),n.jsx("span",{className:ra.meta,children:"Last updated: 30.11.2024"})]}),n.jsxs("div",{className:ra.centerCol,children:[n.jsxs("div",{className:ra.text,children:[n.jsx("p",{children:"Build your Attractions according to the picture below for maximum efficiency."}),n.jsxs("p",{children:["Upgrading to full Platinum on all Attractions will cost you ",n.jsx("strong",{children:"4300 Mushrooms"}),"."]})]}),i?n.jsx("div",{className:ra.imageBox,children:n.jsx("img",{src:i,alt:"Arena Manager build order",loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):n.jsx("div",{className:ra.imageFallback,children:""}),n.jsxs("p",{className:ra.credit,children:["Credit to ",n.jsx("em",{children:"SF Tavern Discord"}),"."]})]})]})}const Vte=()=>n.jsx(fs,{title:"Hellevator Guide"}),Ute=()=>n.jsx(fs,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),zte=()=>n.jsx(fs,{title:"Event List"}),Hte=()=>n.jsx(fs,{title:"Event Cycle"}),Gte="_foCalc_18a5w_3",Wte="_panel_18a5w_211",qte="_panelHead_18a5w_227",Kte="_panelTitle_18a5w_241",Qte="_controls_18a5w_243",Yte="_ctrlLabel_18a5w_245",Xte="_ctrlSelect_18a5w_249",Jte="_tableWrap_18a5w_291",Zte="_table_18a5w_291",ese="_th_18a5w_305",tse="_td_18a5w_321",sse="_row_18a5w_333",nse="_note_18a5w_335",vs={foCalc:Gte,panel:Wte,panelHead:qte,panelTitle:Kte,controls:Qte,ctrlLabel:Yte,ctrlSelect:Xte,tableWrap:Jte,table:Zte,th:ese,td:tse,row:sse,note:nse},$E={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Es=(t,e=0)=>t*3600+e*60,ne=[Es(0,15),Es(0,31),Es(1,6),Es(2,20),Es(5,0),Es(8,0),Es(11,25),Es(18,27),Es(40,0),Es(87,16),Es(190,46),Es(320,0),Es(480,0),Es(615,33),Es(800,0)],Lt=[Es(1054,17),Es(1122,51),Es(1245,42),Es(1343,20),Es(1440,0)],rse={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:ne[0]},{level:2,wood:150,stone:50,gold:20,timeSec:ne[1]},{level:3,wood:440,stone:140,gold:30,timeSec:ne[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:ne[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:ne[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:ne[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:ne[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:ne[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:ne[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:ne[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:ne[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:ne[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:ne[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:ne[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:ne[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:Lt[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:Lt[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:Lt[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:Lt[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:Lt[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:ne[0]},{level:2,wood:138,stone:46,gold:10,timeSec:ne[1]},{level:3,wood:406,stone:129,gold:15,timeSec:ne[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:ne[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:ne[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:ne[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:ne[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:ne[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:ne[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:ne[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:ne[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:ne[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:ne[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:ne[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:ne[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:ne[0]},{level:2,wood:28,stone:37,gold:14,timeSec:ne[1]},{level:3,wood:81,stone:103,gold:21,timeSec:ne[2]},{level:4,wood:203,stone:246,gold:28,timeSec:ne[3]},{level:5,wood:462,stone:591,gold:35,timeSec:ne[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:ne[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:ne[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:ne[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:ne[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:ne[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:ne[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:ne[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:ne[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:ne[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:ne[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:Lt[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:Lt[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:Lt[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:Lt[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:Lt[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:ne[0]},{level:2,wood:160,stone:53,gold:50,timeSec:ne[1]},{level:3,wood:469,stone:149,gold:75,timeSec:ne[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:ne[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:ne[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:ne[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:ne[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:ne[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:ne[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:ne[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:ne[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:ne[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:ne[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:ne[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:ne[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:ne[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:ne[0]},{level:2,wood:200,stone:67,gold:30,timeSec:ne[1]},{level:3,wood:587,stone:187,gold:45,timeSec:ne[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:ne[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:ne[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:ne[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:ne[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:ne[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:ne[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:ne[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:ne[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:ne[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:ne[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:ne[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:ne[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:Lt[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:Lt[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:Lt[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:Lt[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:Lt[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Es(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:ne[0]},{level:2,wood:30,stone:20,gold:4,timeSec:ne[1]},{level:3,wood:88,stone:56,gold:6,timeSec:ne[2]},{level:4,wood:220,stone:133,gold:8,timeSec:ne[3]},{level:5,wood:500,stone:320,gold:10,timeSec:ne[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:ne[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:ne[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:ne[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:ne[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:ne[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:ne[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:ne[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:ne[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:ne[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:ne[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:Lt[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:Lt[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:Lt[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:Lt[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:Lt[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:ne[0]},{level:2,wood:90,stone:16,gold:6,timeSec:ne[1]},{level:3,wood:264,stone:45,gold:9,timeSec:ne[2]},{level:4,wood:660,stone:107,gold:12,timeSec:ne[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:ne[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:ne[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:ne[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:ne[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:ne[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:ne[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:ne[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:ne[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:ne[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:ne[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:ne[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:Lt[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:Lt[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:Lt[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:Lt[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:Lt[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:ne[0]},{level:2,wood:82,stone:55,gold:8,timeSec:ne[1]},{level:3,wood:240,stone:153,gold:12,timeSec:ne[2]},{level:4,wood:600,stone:364,gold:16,timeSec:ne[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:ne[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:ne[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:ne[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:ne[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:ne[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:ne[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:ne[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:ne[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:ne[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:ne[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:ne[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:ne[0]},{level:2,wood:100,stone:33,gold:8,timeSec:ne[1]},{level:3,wood:293,stone:93,gold:12,timeSec:ne[2]},{level:4,wood:733,stone:222,gold:16,timeSec:ne[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:ne[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:ne[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:ne[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:ne[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:ne[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:ne[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:ne[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:ne[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:ne[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:ne[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:ne[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:Lt[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:Lt[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:Lt[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:Lt[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:Lt[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:ne[0]},{level:2,wood:240,stone:61,gold:12,timeSec:ne[1]},{level:3,wood:675,stone:205,gold:18,timeSec:ne[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:ne[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:ne[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:ne[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:ne[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:ne[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:ne[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:ne[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:ne[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:ne[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:ne[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:ne[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:ne[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:ne[0]},{level:2,wood:164,stone:27,gold:10,timeSec:ne[1]},{level:3,wood:480,stone:76,gold:15,timeSec:ne[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:ne[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:ne[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:ne[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:ne[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:ne[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:ne[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:ne[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:ne[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:ne[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:ne[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:ne[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:ne[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:ne[0]},{level:2,wood:120,stone:53,gold:30,timeSec:ne[1]},{level:3,wood:352,stone:149,gold:45,timeSec:ne[2]},{level:4,wood:880,stone:356,gold:60,timeSec:ne[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:ne[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:ne[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:ne[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:ne[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:ne[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:ne[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:ne[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:ne[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:ne[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:ne[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:ne[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:Lt[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:Lt[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:Lt[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:Lt[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:Lt[4]}]}},ise=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],ase="fortress",ose={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function lse(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function IN(t){const e=Math.max(0,Math.round(t)),s=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=l=>l.toString().padStart(2,"0");return`${a(s)}:${a(r)}:${a(i)}`}const cse=()=>{const[t,e]=I.useState(ase),[s,r]=I.useState(1),i=I.useMemo(()=>{var p;const d=ose[t],u=$E[d],h=(p=u==null?void 0:u.id)!=null?p:u;return Rl.gifProxy(h)||Rl.gif(h)||""},[t]),a=I.useMemo(()=>{var d,u;return(u=(d=rse[t])==null?void 0:d.costs)!=null?u:[]},[t]),l=I.useMemo(()=>lse(s),[s]);return n.jsxs("div",{className:`${vs.foCalc}`,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:ise.map(d=>n.jsx("option",{value:d.key,children:d.label},d.key))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:vs.panel,children:[n.jsxs("div",{className:vs.panelHead,children:[n.jsxs("div",{className:vs.panelTitle,children:["Fortress  ",t]}),n.jsxs("div",{className:vs.controls,children:[n.jsx("span",{className:vs.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{className:vs.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:16},(d,u)=>u).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:vs.tableWrap,children:n.jsxs("table",{className:vs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:vs.th,children:"Level"}),n.jsx("th",{className:vs.th,children:"Wood"}),n.jsx("th",{className:vs.th,children:"Stone"}),n.jsx("th",{className:vs.th,children:"Build Time"}),n.jsx("th",{className:vs.th,children:"Build Time (L2)"}),n.jsx("th",{className:vs.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:a.map(d=>{var g,y,b,S,N,T,M;const u=(g=d.timeSec)!=null?g:0,h=Math.round(u*(1-l)),p=Math.ceil(Math.ceil(h/60)/10);return n.jsxs("tr",{className:vs.row,children:[n.jsx("td",{className:vs.td,children:d.level}),n.jsx("td",{className:vs.td,children:(S=(b=(y=d.wood)==null?void 0:y.toLocaleString)==null?void 0:b.call(y))!=null?S:d.wood}),n.jsx("td",{className:vs.td,children:(M=(T=(N=d.stone)==null?void 0:N.toLocaleString)==null?void 0:T.call(N))!=null?M:d.stone}),n.jsx("td",{className:vs.td,children:IN(u)}),n.jsx("td",{className:vs.td,children:IN(h)}),n.jsx("td",{className:vs.td,children:p.toLocaleString()})]},d.level)})})]})}),n.jsx("div",{className:vs.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},dse="_uwCalc_64lws_3",use="_panel_64lws_211",hse="_panelHead_64lws_227",pse="_panelTitle_64lws_241",mse="_controls_64lws_243",fse="_ctrlLabel_64lws_245",gse="_ctrlSelect_64lws_251",xse="_tableWrap_64lws_295",vse="_table_64lws_295",yse="_th_64lws_309",bse="_td_64lws_325",_se="_row_64lws_337",wse="_note_64lws_339",ls={uwCalc:dse,panel:use,panelHead:hse,panelTitle:pse,controls:mse,ctrlLabel:fse,ctrlSelect:gse,tableWrap:xse,table:vse,th:yse,td:bse,row:_se,note:wse},jse={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},Sse={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Nse(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function kse(t){const e=Math.max(0,t),s=Math.round(e),r=Math.floor(s/3600),i=Math.floor(s%3600/60),a=s%60;return{h:r,m:i,s:a}}function RN(t){const{h:e,m:s,s:r}=kse(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(s)}:${i(r)}`}function Tse(t,e){var i,a;const s=Nse(e);return((a=(i=Sse[t])==null?void 0:i.costs)!=null?a:[]).map(l=>{const d=l.timeSec*(1-s),u=Math.ceil(Math.ceil(d/60)/10);return{...l,timeAdjSec:d,skipMushroomsAdj:u}})}const Cse=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],Ese=()=>{const[t,e]=I.useState("hearthofdarkngif"),[s,r]=I.useState(1),i=I.useMemo(()=>{var h;const d=$E[t],u=(h=d==null?void 0:d.id)!=null?h:d;return Rl.gifProxy(u)||Rl.gif(u)||""},[t]),a=I.useMemo(()=>{var d;return(d=jse[t])!=null?d:"hearthofdarkn"},[t]),l=I.useMemo(()=>Tse(a,s),[a,s]);return n.jsxs("div",{className:ls.uwCalc,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:Cse.map(d=>n.jsx("option",{value:d,children:d.replace(/gif$/i,"")},d))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:ls.panel,children:[n.jsxs("div",{className:ls.panelHead,children:[n.jsxs("div",{className:ls.panelTitle,children:["Underworld  ",a]}),n.jsxs("div",{className:ls.controls,children:[n.jsx("label",{htmlFor:"uw-l2",className:ls.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{id:"uw-l2",className:ls.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:15},(d,u)=>u+1).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:ls.tableWrap,children:n.jsxs("table",{className:ls.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:ls.th,children:"Level"}),n.jsx("th",{className:ls.th,children:"Soul"}),n.jsx("th",{className:ls.th,children:"Gold"}),n.jsx("th",{className:ls.th,children:"Build Time"}),n.jsx("th",{className:ls.th,children:"Build Time (L2)"}),n.jsx("th",{className:ls.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:l.length===0?n.jsx("tr",{className:ls.row,children:n.jsx("td",{className:ls.td,colSpan:6,children:"No data for this building yet."})}):l.map(d=>n.jsxs("tr",{className:ls.row,children:[n.jsx("td",{className:ls.td,children:d.level}),n.jsx("td",{className:ls.td,children:d.soul}),n.jsx("td",{className:ls.td,children:d.gold}),n.jsx("td",{className:ls.td,children:RN(d.timeSec)}),n.jsx("td",{className:ls.td,children:RN(d.timeAdjSec)}),n.jsx("td",{className:ls.td,children:d.skipMushroomsAdj})]},d.level))})]})}),n.jsx("p",{className:ls.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},Ase=()=>n.jsx(fs,{title:"Max Item Stats Calculator"}),Ise="_wrap_mnr0g_1",Rse="_card_mnr0g_13",Pse="_title_mnr0g_33",Lse="_form_mnr0g_45",Dse="_field_mnr0g_57",Mse="_input_mnr0g_71",Fse="_gemsRow_mnr0g_87",Bse="_gemBox_mnr0g_101",$se="_disabled_mnr0g_127",Ose="_gemImg_mnr0g_135",Vse="_gemFallback_mnr0g_149",Use="_normalGem_mnr0g_165",zse="_blackGem_mnr0g_173",Hse="_legendaryGem_mnr0g_181",Gse="_gemLabel_mnr0g_189",Wse="_gemValue_mnr0g_199",qse="_hint_mnr0g_211",Vt={wrap:Ise,card:Rse,title:Pse,form:Lse,field:Dse,input:Mse,gemsRow:Fse,gemBox:Bse,disabled:$se,gemImg:Ose,gemFallback:Vse,normalGem:Use,blackGem:zse,legendaryGem:Hse,gemLabel:Gse,gemValue:Wse,hint:qse},Kse={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},Qse=.25,Vf=t=>Math.round(Number.isFinite(t)?t:0);function Yse(t){const e=Number(t.charLevel),s=Number(t.mineLevel),r=Number(t.guildHoK);if(s<25){const T=e*Qse*(1+(s-1)*.25)+r/3;return Vf(T)}const{A:i,B:a,C:l,D:d,E:u,F:h,G:p,H:g,I:y,J:b}=Kse,N=i+a*e+l/s+d*e**2+u/s**2+h*e/s+p*e**3+g/s**3+y*e/s**2+b*e**2/s+r/3;return Vf(N)}function Xse(t){return Vf(t*(2/3))}function Jse(t){return Vf(t)}const cy={char:1e3,mine:100,hok:1e3},OE=({initialState:t,onStateChange:e})=>{var N,T,M;const[s,r]=I.useState((N=t==null?void 0:t.charLevel)!=null?N:""),[i,a]=I.useState((T=t==null?void 0:t.mineLevel)!=null?T:""),[l,d]=I.useState((M=t==null?void 0:t.guildHoKLevel)!=null?M:""),u=(L,k,v)=>{e&&(typeof L!="number"||typeof k!="number"||typeof v!="number"||e({charLevel:L,mineLevel:k,guildHoKLevel:v}))},h=I.useMemo(()=>s===""||i===""||l===""?null:Yse({charLevel:Number(s),mineLevel:Number(i),guildHoK:Number(l)}),[s,i,l]),p=I.useMemo(()=>h==null?null:Xse(h),[h]),g=I.useMemo(()=>h==null?null:Jse(h),[h]),y=Nl("luckbig"),b=Nl("blackbig"),S=Nl("legendarybig");return n.jsx("div",{className:Vt.wrap,children:n.jsxs("div",{className:Vt.card,children:[n.jsx("h2",{className:Vt.title,children:"Gem Calculator"}),n.jsxs("div",{className:Vt.form,children:[n.jsxs("label",{className:Vt.field,children:[n.jsx("span",{children:"Char Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Vt.input,placeholder:"e.g., 360",value:s,onChange:L=>{const k=L.currentTarget.value;if(k===""){r("");return}const v=Number(k),_=Number.isFinite(v)?v:"";r(_),u(_,i,l)},max:cy.char})]}),n.jsxs("label",{className:Vt.field,children:[n.jsx("span",{children:"Mine Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Vt.input,placeholder:"e.g., 10",value:i,onChange:L=>{const k=L.currentTarget.value;if(k===""){a("");return}const v=Number(k),_=Number.isFinite(v)?v:"";a(_),u(s,_,l)},max:cy.mine})]}),n.jsxs("label",{className:Vt.field,children:[n.jsx("span",{children:"Guild HoK"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Vt.input,placeholder:"e.g., 840",value:l,onChange:L=>{const k=L.currentTarget.value;if(k===""){d("");return}const v=Number(k),_=Number.isFinite(v)?v:"";d(_),u(s,i,_)},max:cy.hok})]})]}),n.jsxs("div",{className:Vt.gemsRow,children:[n.jsxs("div",{className:`${Vt.gemBox} ${h==null?Vt.disabled:""}`,children:[y?n.jsx("img",{className:Vt.gemImg,src:y,alt:"Normal Gem"}):n.jsx("div",{className:`${Vt.gemFallback} ${Vt.normalGem}`}),n.jsx("div",{className:Vt.gemLabel,children:"Normal"}),n.jsx("div",{className:Vt.gemValue,children:h!=null?h:"-"})]}),n.jsxs("div",{className:`${Vt.gemBox} ${p==null?Vt.disabled:""}`,children:[b?n.jsx("img",{className:Vt.gemImg,src:b,alt:"Black Gem"}):n.jsx("div",{className:`${Vt.gemFallback} ${Vt.blackGem}`}),n.jsx("div",{className:Vt.gemLabel,children:"Black"}),n.jsx("div",{className:Vt.gemValue,children:p!=null?p:"-"})]}),n.jsxs("div",{className:`${Vt.gemBox} ${g==null?Vt.disabled:""}`,children:[S?n.jsx("img",{className:Vt.gemImg,src:S,alt:"Legendary Gem"}):n.jsx("div",{className:`${Vt.gemFallback} ${Vt.legendaryGem}`}),n.jsx("div",{className:Vt.gemLabel,children:"Legendary"}),n.jsx("div",{className:Vt.gemValue,children:g!=null?g:"-"})]})]}),n.jsxs("p",{className:Vt.hint,children:["The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find. Actual results may vary slightly."]})]})})},Zse="_container_19zdf_1",ene="_headerBar_19zdf_13",tne="_title_19zdf_31",sne="_meta_19zdf_47",nne="_description_19zdf_59",wu={container:Zse,headerBar:ene,title:tne,meta:sne,description:nne},VE=({title:t,meta:e,description:s})=>n.jsxs("header",{className:wu.container,children:[n.jsxs("div",{className:wu.headerBar,children:[n.jsx("h2",{className:wu.title,children:t}),e&&n.jsx("span",{className:wu.meta,children:e})]}),s&&n.jsx("p",{className:wu.description,children:s})]}),rne=()=>n.jsxs(n.Fragment,{children:[n.jsx(VE,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:n.jsxs(n.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find."]})}),n.jsx(OE,{})]}),ine="_wrapper_67xyv_1",ane="_panel_67xyv_11",one="_header_67xyv_27",lne="_title_67xyv_41",cne="_resetBtn_67xyv_53",dne="_table_67xyv_73",une="_row_67xyv_99",hne="_name_67xyv_115",pne="_selectCell_67xyv_125",mne="_sumCell_67xyv_143",fne="_footer_67xyv_155",gne="_footerLine_67xyv_175",xne="_note_67xyv_187",Is={wrapper:ine,panel:ane,header:one,title:lne,resetBtn:cne,table:dne,row:une,name:hne,selectCell:pne,sumCell:mne,footer:fne,footerLine:gne,note:xne};function Yu(t,e,s){var l;if(!Array.isArray(t)||e<=0||s<=0)return 0;const r=Math.min(e,s),i=Math.max(e,s);let a=0;for(let d=r;d<=i;d++)a+=(l=t[d])!=null?l:0;return a}function vne(t){const e=[0];for(let s=1;s<=t;s++)e.push(s);return e}function bt(t,e){const s=[0,...t.map(r=>Number(r)||0)];if(e&&s.length<e+1)for(;s.length<e+1;)s.push(0);return s}const yne=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:bt([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:bt([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:bt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:bt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:bt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"light_19_easteros",name:"19 Easteros",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:bt([0,0,0,9e8,0,0,0,0,0,0],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:bt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:bt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:bt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:bt([0,0,0,0,0,0,0,0,0,0],10)}],bne=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:bt([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:bt([165631756,175491135,186285917,197984244,210662291,224327317,239040847,254786681,271632931,301959487],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:bt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:bt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:bt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"shadow_19_easteros",name:"Easteros",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:bt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:bt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:bt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:bt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:bt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:bt([0,0,0,0,0,0,0,0,0,0],10)}],PN=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],_ne=(()=>{const t=[0,...PN],e=1e3-PN.length;for(let s=0;s<e;s++)t.push(3e7);return t})(),wne=bt([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),jne=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),da={light:yne.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:bne.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:_ne,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:wne,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:jne,specialType:"sandstorm"}]},Uf=t=>t.toLocaleString("en-US");function LN(){const t={},e={},s={};return da.light.forEach(r=>t[r.key]={from:0,to:0}),da.shadow.forEach(r=>e[r.key]={from:0,to:0}),da.special.forEach(r=>{r.specialType==="twister"?s[r.key]={from:486,to:1e3}:r.specialType==="cloi"?s[r.key]={from:2,to:11}:s[r.key]={from:0,to:0}}),{light:t,shadow:e,special:s}}function UE({row:t,range:e,onChange:s}){var d,u;const r=I.useMemo(()=>vne(t.maxLevel),[t.maxLevel]),i=(d=e.from)!=null?d:0,a=(u=e.to)!=null?u:0,l=I.useMemo(()=>i===0||a===0?0:Yu(t.levels,i,a),[t.levels,i,a]);return n.jsxs("tr",{className:Is.row,children:[n.jsx("td",{className:Is.name,children:t.name}),n.jsx("td",{className:Is.selectCell,children:n.jsx("select",{value:i,onChange:h=>s({from:Number(h.target.value),to:a}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsx("td",{className:Is.selectCell,children:n.jsx("select",{value:a,onChange:h=>s({from:i,to:Number(h.target.value)}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsxs("td",{className:Is.sumCell,children:[Uf(l)," XP"]})]})}function DN({title:t,rows:e,ranges:s,setRanges:r}){const i=I.useMemo(()=>e.reduce((a,l)=>{const d=s[l.key]||{from:0,to:0};return a+Yu(l.levels,d.from,d.to)},0),[e,s]);return n.jsxs("div",{className:Is.panel,children:[n.jsx("div",{className:Is.header,children:n.jsx("div",{className:Is.title,children:t})}),n.jsxs("table",{className:Is.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum XP"})]})}),n.jsx("tbody",{children:e.map(a=>{var l;return n.jsx(UE,{row:a,range:(l=s[a.key])!=null?l:{from:0,to:0},onChange:d=>r(a.key,d)},a.key)})})]}),n.jsx("div",{className:Is.footer,children:n.jsxs("div",{className:Is.footerLine,children:[n.jsxs("span",{children:["Sum Total ",t]}),n.jsxs("span",{children:[Uf(i)," XP"]})]})})]})}function zE({initialState:t,onStateChange:e}){var L,k,v;const s=I.useMemo(()=>LN(),[]),[r,i]=I.useState((L=t==null?void 0:t.light)!=null?L:s.light),[a,l]=I.useState((k=t==null?void 0:t.shadow)!=null?k:s.shadow),[d,u]=I.useState((v=t==null?void 0:t.special)!=null?v:s.special),h=(_,P,E)=>{e&&e({light:_,shadow:P,special:E})},p=(_,P)=>{i(E=>{const w={...E,[_]:P};return h(w,a,d),w})},g=(_,P)=>{l(E=>{const w={...E,[_]:P};return h(r,w,d),w})},y=(_,P)=>{u(E=>{const w={...E,[_]:P};return h(r,a,w),w})};I.useEffect(()=>{var _,P,E;if(t){i((_=t.light)!=null?_:s.light),l((P=t.shadow)!=null?P:s.shadow),u((E=t.special)!=null?E:s.special);return}i(s.light),l(s.shadow),u(s.special)},[t,s]);const b=I.useMemo(()=>da.light.reduce((_,P)=>{const E=r[P.key];return _+(E?Yu(P.levels,E.from,E.to):0)},0),[r]),S=I.useMemo(()=>da.shadow.reduce((_,P)=>{const E=a[P.key];return _+(E?Yu(P.levels,E.from,E.to):0)},0),[a]),N=I.useMemo(()=>da.special.reduce((_,P)=>{const E=d[P.key];return _+(E?Yu(P.levels,E.from,E.to):0)},0),[d]),T=b+S+N,M=()=>{const _=LN();i(_.light),l(_.shadow),u(_.special),h(_.light,_.shadow,_.special)};return n.jsxs("div",{className:Is.wrapper,children:[n.jsx(DN,{title:"Light World",rows:da.light,ranges:r,setRanges:p}),n.jsx(DN,{title:"Shadow World",rows:da.shadow,ranges:a,setRanges:g}),n.jsxs("div",{className:Is.panel,children:[n.jsxs("div",{className:Is.header,children:[n.jsx("div",{className:Is.title,children:"Special Dungeons"}),n.jsx("button",{className:Is.resetBtn,onClick:M,children:"RESET"})]}),n.jsxs("table",{className:Is.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum"})]})}),n.jsx("tbody",{children:da.special.map(_=>{var P;return n.jsx(UE,{row:_,range:(P=d[_.key])!=null?P:{from:0,to:0},onChange:E=>y(_.key,E)},_.key)})})]}),n.jsxs("div",{className:Is.footer,children:[n.jsxs("div",{className:Is.footerLine,children:[n.jsx("span",{children:"Sum Total Special"}),n.jsxs("span",{children:[Uf(N)," XP"]})]}),n.jsxs("div",{className:Is.footerLine,children:[n.jsx("span",{children:"Total XP"}),n.jsxs("span",{children:[Uf(T)," XP"]})]}),n.jsxs("div",{className:Is.note,children:["Flle die XP-Arrays in ",n.jsx("code",{children:"src/lib/calculators/dungeonPauseOpenXP/data.ts"}),", dann rechnet es 1:1 wie im Sheet."]})]})]})]})}function Sne(){return n.jsx("div",{style:{padding:12},children:n.jsx(zE,{})})}const Nne=()=>n.jsx(fs,{title:"Progression  Early Game"}),kne="_wrap_n2poq_31",Tne="_title_n2poq_33",Cne="_infoBox_n2poq_39",Ene="_infoTitle_n2poq_63",Ane="_infoList_n2poq_73",Ine="_section_n2poq_89",Rne="_h2_n2poq_101",Pne="_h3_n2poq_103",Lne="_intro_n2poq_105",Dne="_ul_n2poq_107",Mne="_img_n2poq_113",Xt={wrap:kne,title:Tne,infoBox:Cne,infoTitle:Ene,infoList:Ane,section:Ine,h2:Rne,h3:Pne,intro:Lne,ul:Dne,img:Mne},Fne=()=>{Dl();const t=[Nl("first-weekend-guide-day1",900),Nl("first-weekend-guide-day2",900),Nl("first-weekend-guide-day3",900)];return n.jsxs("div",{className:Xt.wrap,children:[n.jsx("h1",{className:Xt.title,children:"First Weekend Guide"}),n.jsxs("aside",{className:Xt.infoBox,role:"note","aria-label":"Important Level Tips",children:[n.jsx("div",{className:Xt.infoTitle,children:"Important Level Tips"}),n.jsxs("ul",{className:Xt.infoList,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),n.jsx("p",{className:Xt.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),n.jsxs("div",{className:Xt.section,children:[n.jsx("h2",{className:Xt.h2,children:"Preparation before launch"}),n.jsxs("ul",{className:Xt.ul,children:[n.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),n.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),n.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),n.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),n.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),n.jsxs("div",{className:Xt.section,children:[n.jsx("h2",{className:Xt.h2,children:"Day 1"}),n.jsx("h3",{className:Xt.h3,children:"Level 13"}),n.jsxs("ul",{className:Xt.ul,children:[n.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),n.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&n.jsx("img",{className:Xt.img,src:t[0],alt:"Day 1 overview"})]}),n.jsxs("div",{className:Xt.section,children:[n.jsx("h3",{className:Xt.h3,children:"Level 410"}),n.jsxs("ul",{className:Xt.ul,children:[n.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),n.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),n.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),n.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),n.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),n.jsxs("div",{className:Xt.section,children:[n.jsx("h2",{className:Xt.h2,children:"Day 2"}),n.jsx("h3",{className:Xt.h3,children:"Level 1015"}),n.jsxs("ul",{className:Xt.ul,children:[n.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),n.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),n.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),n.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&n.jsx("img",{className:Xt.img,src:t[1],alt:"Day 2 overview"})]}),n.jsxs("div",{className:Xt.section,children:[n.jsx("h2",{className:Xt.h2,children:"Day 3"}),n.jsx("h3",{className:Xt.h3,children:"Level 1520"}),n.jsxs("ul",{className:Xt.ul,children:[n.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),n.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&n.jsx("img",{className:Xt.img,src:t[2],alt:"Day 3 overview"})]})]})},Bne=()=>n.jsx(fs,{title:"Max Item Stats Calculator"}),$ne=()=>n.jsx(fs,{title:"Fortress Package skip order (Early)"}),One=()=>n.jsx(fs,{title:"Underworld Pro Package skip order (Early)"}),Vne=()=>n.jsx(fs,{title:"Gem Calculator (Early)"}),Une=()=>n.jsx(fs,{title:"Fortress attack duplication guide (Early)"}),zne=()=>n.jsx(fs,{title:"Progression  Mid Game"}),Hne="_wrap_1x7jo_31",Gne="_header_1x7jo_35",Wne="_titles_1x7jo_55",qne="_h1_1x7jo_57",Kne="_lead_1x7jo_59",Qne="_ctaRow_1x7jo_63",Yne="_cta_1x7jo_63",Xne="_section_1x7jo_85",Jne="_sectionGrid_1x7jo_87",Zne="_card_1x7jo_99",ere="_h2_1x7jo_103",tre="_h3_1x7jo_105",sre="_p_1x7jo_107",nre="_ul_1x7jo_111",rre="_ol_1x7jo_111",ire="_figure_1x7jo_117",are="_figureNarrow_1x7jo_139",ore="_img_1x7jo_149",lre="_fallbackImg_1x7jo_151",cre="_figCaption_1x7jo_159",dre="_tableWrap_1x7jo_163",ure="_table_1x7jo_163",hre="_footer_1x7jo_217",pre="_tools_1x7jo_219",mre="_toolBtn_1x7jo_221",At={wrap:Hne,header:Gne,titles:Wne,h1:qne,lead:Kne,ctaRow:Qne,cta:Yne,section:Xne,sectionGrid:Jne,card:Zne,h2:ere,h3:tre,p:sre,ul:nre,ol:rre,figure:ire,figureNarrow:are,img:ore,fallbackImg:lre,figCaption:cre,tableWrap:dre,table:ure,footer:hre,tools:pre,toolBtn:mre},fre=1400;function gre(){const t=I.useMemo(()=>Nl("goldxpcurve",fre),[]);return n.jsxs("div",{className:At.wrap,children:[n.jsxs("header",{className:At.header,children:[n.jsxs("div",{className:At.titles,children:[n.jsx("h1",{className:At.h1,children:"Dungeon Pause"}),n.jsx("p",{className:At.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),n.jsxs("div",{className:At.ctaRow,children:[n.jsx(qt,{className:At.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),n.jsx(qt,{className:At.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),n.jsxs("section",{className:At.section,children:[n.jsx("h2",{className:At.h2,children:"Worum gehts?"}),n.jsxs("p",{className:At.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",n.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",n.jsx("strong",{children:"Level 370"})," und endet um ",n.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),n.jsxs("section",{className:At.section,children:[n.jsx("h3",{className:At.h3,children:"XP & Gold  Verlauf"}),n.jsxs("div",{className:`${At.figure} ${At.figureNarrow}`,children:[t?n.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:At.img}):n.jsx("div",{className:At.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),n.jsx("div",{className:At.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),n.jsxs("section",{className:At.sectionGrid,children:[n.jsxs("div",{className:At.card,children:[n.jsx("h3",{className:At.h3,children:"Start & Ende"}),n.jsxs("ul",{className:At.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",n.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",n.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),n.jsxs("div",{className:At.card,children:[n.jsx("h3",{className:At.h3,children:"Twister & Light/Shadow"}),n.jsxs("ul",{className:At.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Twister:"})," bei ca. ",n.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),n.jsxs("li",{children:["Whrend der Pause weiterhin ",n.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",n.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",n.jsx("em",{children:"Devilsatt"})," &"," ",n.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),n.jsxs("section",{className:At.section,children:[n.jsx("h3",{className:At.h3,children:"Vorgehen"}),n.jsxs("ol",{className:At.ol,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",n.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",n.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",n.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),n.jsxs("section",{className:At.section,children:[n.jsx("h3",{className:At.h3,children:"Kompaktbersicht"}),n.jsx("div",{className:At.tableWrap,children:n.jsxs("table",{className:At.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Aspekt"}),n.jsx("th",{children:"Empfehlung"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Start (Faustregel)"}),n.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Ende (Faustregel)"}),n.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Open XP vor Eintritt"}),n.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Twister"}),n.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Light/Shadow"}),n.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Whrend der Pause"}),n.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Pets"}),n.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Optimaler Exit"}),n.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),n.jsx("footer",{className:At.footer,children:n.jsxs("div",{className:At.tools,children:[n.jsx(qt,{className:At.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),n.jsx(qt,{className:At.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const xre=()=>n.jsx(fs,{title:"Dungeon Pause open XP Calculator"}),vre="_wrap_1uhww_3",yre="_headerBar_1uhww_15",bre="_title_1uhww_33",_re="_meta_1uhww_45",wre="_description_1uhww_55",jre="_section_1uhww_69",Sre="_sectionTitle_1uhww_77",Nre="_steps_1uhww_87",ki={wrap:vre,headerBar:yre,title:bre,meta:_re,description:wre,section:jre,sectionTitle:Sre,steps:Nre};function kre(){return n.jsxs("div",{className:ki.wrap,children:[n.jsxs("div",{className:ki.headerBar,children:[n.jsx("h2",{className:ki.title,children:"Dungeon Pause Exit"}),n.jsx("span",{className:ki.meta,children:"Last updated: 28.03.2025"})]}),n.jsx("p",{className:ki.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),n.jsxs("section",{className:ki.section,children:[n.jsx("h3",{className:ki.sectionTitle,children:"Sequence for the Exit"}),n.jsxs("ol",{className:ki.steps,children:[n.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),n.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),n.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),n.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),n.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),n.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),n.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),n.jsxs("section",{className:ki.section,children:[n.jsx("h3",{className:ki.sectionTitle,children:"Extra Tip"}),n.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const Tre=()=>n.jsx(fs,{title:"Gem Calculator (Mid)"}),Cre=()=>n.jsx(fs,{title:"Calendar Skip"}),Ere=()=>n.jsx(fs,{title:"Progression  Late Game"}),Are="_layout_13sgm_29",Ire="_side_13sgm_49",Rre="_sideHead_13sgm_61",Pre="_search_13sgm_71",Lre="_spotBtn_13sgm_89",Dre="_sideList_13sgm_109",Mre="_sideItem_13sgm_111",Fre="_active_13sgm_119",Bre="_sideTitle_13sgm_121",$re="_ico_13sgm_123",Ore="_badge_13sgm_125",Vre="_detail_13sgm_139",Ure="_detailInner_13sgm_141",zre="_detailHead_13sgm_143",Hre="_detailTitle_13sgm_145",Gre="_empty_13sgm_147",Wre="_grid_13sgm_151",qre="_card_13sgm_157",Kre="_cardHead_13sgm_175",Qre="_btnGrid_13sgm_177",Yre="_itemBtn_13sgm_179",Xre="_spotWrap_13sgm_203",Jre="_spot_13sgm_89",Zre="_spotHead_13sgm_227",eie="_spotSearch_13sgm_235",tie="_spotClose_13sgm_243",sie="_spotList_13sgm_253",nie="_spotItem_13sgm_255",rie="_spotItemEmpty_13sgm_259",iie="_spotCat_13sgm_261",aie="_spotLabel_13sgm_263",oie="_mark_13sgm_267",kt={layout:Are,side:Ire,sideHead:Rre,search:Pre,spotBtn:Lre,sideList:Dre,sideItem:Mre,active:Fre,sideTitle:Bre,ico:$re,badge:Ore,detail:Vre,detailInner:Ure,detailHead:zre,detailTitle:Hre,empty:Gre,grid:Wre,card:qre,cardHead:Kre,btnGrid:Qre,itemBtn:Yre,spotWrap:Xre,spot:Jre,spotHead:Zre,spotSearch:eie,spotClose:tie,spotList:sie,spotItem:nie,spotItemEmpty:rie,spotCat:iie,spotLabel:aie,mark:oie};function lie(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ju(t,e){if(!e)return t;const s=new RegExp(`(${lie(e)})`,"ig");return t.replace(s,`<mark class="${kt.mark}">$1</mark>`)}function MN(t){if(!t||!t.length)return 0;let e=0;for(const s of t)if(s.sub2&&s.sub2.length)if(s.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of s.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=s.sub2.length;else e+=1;return e}function cie(t){const e=[];for(const s of t){const r=s.label;if(!(!s.sub||!s.sub.length))for(const i of s.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(l=>l.sub2&&l.sub2.length))for(const l of i.sub2)if(l.sub2&&l.sub2.length)for(const d of l.sub2)e.push({full:`${r}  ${i.label}  ${l.label}  ${d.label}`,catKey:s.key,subKey:i.key,sub2Key:d.key});else e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else for(const l of i.sub2)e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else e.push({full:`${r}  ${i.label}`,catKey:s.key,subKey:i.key})}return e}function die(t,e){var s;return e&&t.some(r=>r.key===e)?e:((s=t==null?void 0:t[0])==null?void 0:s.key)||""}const uie=({categories:t,onNavigate:e,autoFocusSearch:s})=>{const[r,i]=I.useState(()=>{var L;return((L=t==null?void 0:t[0])==null?void 0:L.key)||""}),[a,l]=I.useState(""),[d,u]=I.useState(!1),h=I.useRef(null),p=I.useMemo(()=>{const L=a.trim().toLowerCase();if(!L)return t;const k=v=>v.toLowerCase().includes(L);return t.map(v=>{const _=k(v.label),P=[];for(const E of v.sub||[]){const w=k(E.label);if(E.sub2&&E.sub2.length)if(E.sub2.some(B=>B.sub2&&B.sub2.length)){const B=[];for(const D of E.sub2)if(D.sub2&&D.sub2.length){const $=D.sub2.filter(F=>k(F.label));$.length&&B.push({...D,sub2:$})}else k(D.label)&&B.push(D);(w||B.length)&&P.push({...E,sub2:B})}else{const B=E.sub2.filter(D=>k(D.label));(w||B.length)&&P.push({...E,sub2:B})}else w&&P.push(E)}return _||P.length?{...v,sub:P.length?P:v.sub}:null}).filter(Boolean)},[t,a]),g=I.useMemo(()=>{const L=p.length?p:t,k=die(L,r);return L.find(v=>v.key===k)||L[0]||null},[p,t,r]),y=I.useMemo(()=>cie(t),[t]),[b,S]=I.useState(""),N=I.useMemo(()=>{const L=b.trim().toLowerCase();return L?y.filter(k=>k.full.toLowerCase().includes(L)):y},[y,b]);I.useEffect(()=>{const L=k=>{const v=k.key.toLowerCase()==="k";(k.metaKey||k.ctrlKey)&&v&&(k.preventDefault(),u(!0),setTimeout(()=>{var _;return(_=h.current)==null?void 0:_.focus()},0)),k.key==="Escape"&&u(!1)};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[]);const T=I.useRef(null);I.useEffect(()=>{var L;s&&((L=T.current)==null||L.focus())},[s]);const M=()=>{var P;const L=a.trim().toLowerCase(),k=(L?y.find(E=>E.full.toLowerCase().includes(L)):y[0])||null;if(k){e({tab:k.catKey,sub:k.subKey,sub2:k.sub2Key});return}const v=g,_=(P=v==null?void 0:v.sub)==null?void 0:P[0];if(!(!v||!_))if(_.sub2&&_.sub2.length)if(_.sub2.some(w=>w.sub2&&w.sub2.length)){const w=_.sub2[0];w.sub2&&w.sub2.length?e({tab:v.key,sub:_.key,sub2:w.sub2[0].key}):e({tab:v.key,sub:_.key,sub2:w.key})}else e({tab:v.key,sub:_.key,sub2:_.sub2[0].key});else e({tab:v.key,sub:_.key})};return n.jsxs("div",{className:kt.layout,children:[n.jsxs("div",{className:kt.side,children:[n.jsxs("div",{className:kt.sideHead,children:[n.jsx("input",{ref:T,className:kt.search,type:"search",placeholder:"Suche",value:a,onChange:L=>l(L.target.value),onKeyDown:L=>{L.key==="Enter"&&M()}}),n.jsx("button",{className:kt.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var L;return(L=h.current)==null?void 0:L.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),n.jsx("div",{className:kt.sideList,children:(p.length?p:t).map(L=>n.jsxs("div",{className:`${kt.sideItem} ${(g==null?void 0:g.key)===L.key?kt.active:""}`,onClick:()=>i(L.key),children:[n.jsxs("span",{className:kt.sideTitle,children:[L.icon?n.jsx("span",{className:kt.ico,"aria-hidden":!0,children:L.icon}):null,L.label]}),n.jsx("span",{className:kt.badge,children:MN(L.sub)})]},L.key))})]}),n.jsx("div",{className:kt.detail,children:g?n.jsxs("div",{className:kt.detailInner,children:[n.jsxs("div",{className:kt.detailHead,children:[n.jsxs("h3",{className:kt.detailTitle,children:[g.icon?n.jsx("span",{className:kt.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),n.jsxs("div",{className:kt.badge,children:[MN(g.sub)," Eintrge"]})]}),n.jsx("div",{className:kt.grid,children:(g.sub||[]).map(L=>{const k=L.sub2&&L.sub2.length>0,v=k&&L.sub2.some(_=>_.sub2&&_.sub2.length);return n.jsxs("div",{className:kt.card,children:[n.jsx("div",{className:kt.cardHead,dangerouslySetInnerHTML:{__html:ju(L.label,a)}}),k?n.jsx("div",{className:kt.btnGrid,children:v?L.sub2.flatMap(_=>_.sub2&&_.sub2.length?_.sub2.map(P=>n.jsx("button",{className:kt.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:P.key}),dangerouslySetInnerHTML:{__html:ju(`${_.label}  ${P.label}`,a)}},`${_.key}__${P.key}`)):[n.jsx("button",{className:kt.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:ju(_.label,a)}},_.key)]):L.sub2.map(_=>n.jsx("button",{className:kt.itemBtn,onClick:()=>e({tab:g.key,sub:L.key,sub2:_.key}),dangerouslySetInnerHTML:{__html:ju(_.label,a)}},_.key))}):n.jsx("div",{className:kt.btnGrid,children:n.jsx("button",{className:kt.itemBtn,onClick:()=>e({tab:g.key,sub:L.key}),dangerouslySetInnerHTML:{__html:ju(L.label,a)}})})]},L.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(L=>!L.sub2||!L.sub2.length?!L.label.toLowerCase().includes(a.trim().toLowerCase()):L.sub2.some(v=>v.sub2&&v.sub2.length)?L.sub2.every(v=>v.sub2&&v.sub2.length?v.sub2.every(_=>!_.label.toLowerCase().includes(a.trim().toLowerCase())):!v.label.toLowerCase().includes(a.trim().toLowerCase())):L.sub2.every(v=>!v.label.toLowerCase().includes(a.trim().toLowerCase())))?n.jsxs("div",{className:kt.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):n.jsx("div",{className:kt.empty,children:"Keine Kategorie gefunden."})}),d&&n.jsx("div",{className:kt.spotWrap,onClick:()=>u(!1),children:n.jsxs("div",{className:kt.spot,onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:kt.spotHead,children:[n.jsx("input",{ref:h,className:kt.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:L=>S(L.target.value)}),n.jsx("button",{className:kt.spotClose,onClick:()=>u(!1),children:"Esc"})]}),n.jsx("div",{className:kt.spotList,children:N.length===0?n.jsx("div",{className:kt.spotItemEmpty,children:"Keine Treffer"}):N.map((L,k)=>n.jsxs("div",{className:kt.spotItem,onClick:()=>{u(!1),e({tab:L.catKey,sub:L.subKey,sub2:L.sub2Key})},children:[n.jsx("div",{className:kt.spotCat,children:L.catKey}),n.jsx("div",{className:kt.spotLabel,children:L.full})]},k))})]})})]})},hie={gamefeatures:iee,progression:aee,hellevator:oee,"legendary-dungeon":lee,events:cee,calculators:wee,infographics:jee,"class-book":See,dungeons:Nee},FN={gamefeatures:{fortress:kee,underworld:Vee,arenaam:Hee},hellevator:{"hellevator-guide":Vte},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":Ute},events:{"event-list":zte,"event-cycle":Hte},calculators:{"fortress-calculator":cse,"underworld-calculator":Ese,"max-item-stats-calculator":Ase,"gem-calculator":rne,"dungeon-pause-open-xp-calculator":Sne},progression:{early:Nne,mid:zne,late:Ere}},dy={gamefeatures:{arenaam:{"am-rune-bonuses":Ate,"am-build-order":Ote},underworld:{"underworld-calculator":Uee,"underworld-pro-package-skip-order":zee},fortress:{"fortress-calculator":Tee,"fortress-package-skip-order":$ee,"fortress-attack-duplication":Oee}},progression:{early:{"first-weekend-guide":Fne,"max-item-stats-calculator":Bne,"fortress-package-skip-order":$ne,"underworld-pro-package-skip-order":One,"gem-calculator":Vne,"fortress-attack-duplication":Une},mid:{"dungeon-pause":gre,"dungeon-pause-open-xp-calculator":xre,"dungeon-pause-exit":kre,"gem-calculator":Tre,"calendar-skip":Cre}}};function pie(){const[t,e]=Dl(),s=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;s?s&&!r?a=hie[s]||null:s&&r&&!i?a=FN[s]&&FN[s][r]||null:s&&r&&i&&(a=dy[s]&&dy[s][r]&&dy[s][r][i]||null):a=null;const l=d=>{const u=new URLSearchParams(t);u.set("tab",d.tab),d.sub?u.set("sub",d.sub):u.delete("sub"),d.sub2?u.set("sub2",d.sub2):u.delete("sub2"),e(u,{replace:!1})};return n.jsxs(wt,{children:[n.jsx("div",{className:Ac.topWrap,children:n.jsx(XZ,{logoSrc:ree,categories:CN,titleI18nKey:"guides.index.title"})}),n.jsx("div",{className:Ac.divider}),n.jsx("div",{className:Ac.contentArea,children:a?n.jsx(a,{}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Ac.placeholder,children:[n.jsx("h2",{className:Ac.placeholderTitle,children:"Guides"}),n.jsx("p",{className:Ac.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),n.jsx(uie,{categories:CN,onNavigate:l,autoFocusSearch:!1})]})})]})}const mie="_wrap_1353r_1",fie="_centerLogoWrap_1353r_21",gie="_centerLogoLink_1353r_37",xie="_centerLogo_1353r_21",vie="_arc_1353r_71",yie="_left_1353r_73",bie="_right_1353r_75",_ie="_sub_1353r_77",wie="_full_1353r_79",jie="_arcItem_1353r_81",Sie="_iconBtn_1353r_87",Nie="_active_1353r_141",kie="_iconImg_1353r_151",Tie="_placeholderIcon_1353r_155",Cie="_placeholderText_1353r_173",Eie="_iconLabel_1353r_177",un={wrap:mie,centerLogoWrap:fie,centerLogoLink:gie,centerLogo:xie,arc:vie,left:yie,right:bie,sub:_ie,full:wie,arcItem:jie,iconBtn:Sie,active:Nie,iconImg:kie,placeholderIcon:Tie,placeholderText:Cie,iconLabel:Eie},Aie=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=ir();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),p=new URL(t,window.location.origin).searchParams,g=p.get("tab"),y=p.get("sub");a=r==="sub"?d===g&&!!y&&u===y:d===g}catch(l){a=!1}return n.jsxs(qt,{to:t,"aria-label":e,className:[un.iconBtn,r==="sub"?un.muted:"",a?un.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:un.iconImg}):n.jsx("div",{className:un.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:un.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:un.iconLabel,children:e})]})},uy=({items:t,side:e,anchorSide:s="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440})=>{const d=I.useMemo(()=>{const h=t.length;if(h===0)return[];let p=-90,g=90;e==="left"?(p=90,g=270):e==="sub"?s==="left"?(p=90,g=270):(p=-90,g=90):e==="full"&&(p=0,g=360);const y=(g-p)/(h+1),b=r?190:250;return t.map((S,N)=>{const M=(p+y*(N+1))*Math.PI/180;return{it:S,x:Math.cos(M)*b,y:Math.sin(M)*b}})},[t,e,s,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`),h})();return n.jsx("div",{className:[un.arc,e==="left"?un.left:"",e==="right"?un.right:"",e==="sub"?un.sub:"",e==="full"?un.full:""].join(" "),style:u,children:d.map(({it:h,x:p,y:g})=>n.jsx("div",{className:un.arcItem,style:{transform:`translate(${p}px, ${g}px)`},children:n.jsx(Aie,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},Iie=["creators","scans","predictions","news","records","feedback"],N0=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],Rie={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},Pie=new Set(Iie),Lie=N0.reduce((t,e)=>(t[e.key]=e,t),{}),Die=t=>typeof t=="string"&&Pie.has(t),Mie=({logoSrc:t})=>{const[e]=Dl(),s=e.get("tab")||null,r=I.useMemo(()=>N0.filter(b=>b.side==="left"),[]),i=I.useMemo(()=>N0.filter(b=>b.side==="right"),[]),a=Die(s)?s:null,l=a?Rie[a]:[],d=a?Lie[a].side:"right",u=I.useRef(null),[h,p]=I.useState(220),[g,y]=I.useState(440);return I.useEffect(()=>{const b=()=>{var k,v;const N=((v=(k=u.current)==null?void 0:k.offsetWidth)!=null?v:380)/2,M=Math.round(N+60),L=Math.round(M+220);p(M),y(L)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),n.jsxs("div",{className:un.wrap,children:[n.jsx("div",{className:un.centerLogoWrap,children:n.jsx(qt,{to:"/community",className:un.centerLogoLink,"aria-label":"Community Hub Home",children:n.jsx("img",{ref:u,src:t,alt:"Community Hub",className:un.centerLogo})})}),n.jsx(uy,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),n.jsx(uy,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),l.length>0&&n.jsx(uy,{items:l.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:d,compact:!0,variant:"sub",outerOffset:g})]})},Fie="_topWrap_1rivx_1",Bie="_divider_1rivx_19",$ie="_contentArea_1rivx_53",Oie="_placeholder_1rivx_63",Vie="_placeholderTitle_1rivx_77",Uie="_placeholderText_1rivx_91",Ic={topWrap:Fie,divider:Bie,contentArea:$ie,placeholder:Oie,placeholderTitle:Vie,placeholderText:Uie},zie="/assets/logo_communityhub-LVMLHRD6.png",Hie=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function HE(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function Gie(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(l=>parseInt(l,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const s=new Date(t);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function hy(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function Wie(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function qie(t){return t.avatar?t.avatar:`/avatars/${HE(t.code||t.name||"creator")}.png`}function Kie(t){const e=HE(t.code||t.name||"creator"),s=[],r=hy(t.youtube);r&&s.push({type:"YouTube",url:r});const i=hy(t.twitch);i&&s.push({type:"Twitch",url:i});const a=hy(t.discord);return a&&s.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:qie(t),description:Wie(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:Gie(t.latestActivity),platforms:s}}function Qie(t){var s,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(s=t==null?void 0:t.generatedAt)!=null?s:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function GE(t="/data/creators-live.json"){const[e,s]=I.useState(null),[r,i]=I.useState(""),[a,l]=I.useState(!1),[d,u]=I.useState(0);return I.useEffect(()=>{let h=!1;async function p(){l(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const y=await g.json();h||s(Qie(y))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),s(null))}finally{h||l(!1)}}return p(),()=>{h=!0}},[t,d]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const Yie=Hie,Xie=Yie.map(Kie),Jie=[...Xie];function WE(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function fo(t,e,s=WE){if(t<=0)return"";const r=s(t);return e?`${r} ${e}`:r}function _h(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function Zie(t,e){const s=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*s;case"views":return(r.totalViews-i.totalViews)*s;case"activity":return(_h(r.lastActive)-_h(i.lastActive))*s*-1;case"language":return r.language.localeCompare(i.language)*s;default:return 0}}}function eae(t){const e={width:16,height:16};switch(t){case"YouTube":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[n.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),n.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[n.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),n.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),n.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[n.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),n.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),n.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[n.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),n.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),n.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function BN({c:t}){return n.jsxs("article",{className:"cc-card",children:[n.jsxs("header",{className:"cc-card-head",children:[n.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const s=e.currentTarget;s.onerror=null,s.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),n.jsxs("div",{className:"cc-card-title",children:[n.jsx("h3",{className:"cc-name",children:t.name}),n.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[eae(e.type),n.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),n.jsx("p",{className:"cc-desc",children:t.description}),n.jsxs("div",{className:"cc-stats",children:[n.jsx("span",{title:"Subscribers",children:fo(t.subscribers,"subs")}),n.jsx("span",{title:"Total views",children:fo(t.totalViews,"views")}),n.jsx("span",{title:"Weekly views",children:fo(t.weeklyViews,"/wk")}),n.jsx("span",{title:"Weekly posts",children:fo(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),n.jsxs("footer",{className:"cc-meta",children:[n.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),n.jsxs("span",{className:"cc-meta-right",children:["active ",_h(t.lastActive),"d ago"]})]})]},t.id)}function tae({data:t}){return n.jsx("div",{className:"cc-table-wrap",children:n.jsxs("table",{className:"cc-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Lang"}),n.jsx("th",{children:"Subs"}),n.jsx("th",{children:"Total Views"}),n.jsx("th",{children:"Weekly Views"}),n.jsx("th",{children:"Weekly Posts"}),n.jsx("th",{children:"Active"})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"cc-table-name",children:[n.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),n.jsx("span",{children:e.name})]})}),n.jsx("td",{children:e.language.toUpperCase()}),n.jsx("td",{children:fo(e.subscribers)}),n.jsx("td",{children:fo(e.totalViews)}),n.jsx("td",{children:fo(e.weeklyViews)}),n.jsx("td",{children:fo(e.weeklyPosts,void 0,s=>`${s}`)}),n.jsxs("td",{children:[_h(e.lastActive),"d"]})]},e.id))})]})})}function qE(){var Y,ie;const[t,e]=I.useState("static"),[s,r]=I.useState("cards"),[i,a]=I.useState("subs"),[l,d]=I.useState("desc"),[u,h]=I.useState("all"),[p,g]=I.useState("all"),[y,b]=I.useState(0),[S,N]=I.useState(365),[T,M]=I.useState(null),[L,k]=I.useState(""),[v,_]=I.useState(!1),[P,E]=I.useState(""),[w,A]=I.useState(null),{snapshot:B,error:D}=GE(),$=(Y=B==null?void 0:B.data)!=null&&Y.length?B.data:null,F=$!=null?$:Jie,z=t==="static"?F:(ie=w!=null?w:$)!=null?ie:[],H=I.useMemo(()=>{const X=new Set(z.map(pe=>pe.language));return Array.from(X).sort()},[z]),K=I.useMemo(()=>z.filter(X=>u==="all"?!0:X.language===u).filter(X=>p==="all"?!0:X.platforms.some(pe=>pe.type===p)).filter(X=>X.subscribers>=y).filter(X=>_h(X.lastActive)<=S).slice().sort(Zie(i,l)),[z,u,p,y,S,i,l]);I.useEffect(()=>{if(!T&&K.length){const X=K[Math.floor(Math.random()*K.length)];M(X.id)}},[K,T]);const q=I.useMemo(()=>K.find(X=>X.id===T)||null,[K,T]),G=I.useMemo(()=>K.slice().sort((X,pe)=>pe.weeklyViews-X.weeklyViews).slice(0,5),[K]),re=I.useMemo(()=>K.slice().sort((X,pe)=>pe.weeklyPosts-X.weeklyPosts).slice(0,5),[K]);async function se(){E(""),_(!0);try{const X=await fetch(L,{headers:{Accept:"application/json"}});if(!X.ok)throw new Error(`HTTP ${X.status}`);const pe=await X.json(),ge=Array.isArray(pe)?pe:Array.isArray(pe==null?void 0:pe.data)?pe.data:[];A(ge)}catch(X){E((X==null?void 0:X.message)||"Fetch failed")}finally{_(!1)}}const U=K.length===0;return n.jsxs("section",{className:"cc-wrap",children:[n.jsxs("div",{className:"cc-heading",children:[n.jsx("h1",{children:"Content Creator Hub"}),n.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),B&&n.jsxs("p",{className:"cc-sync",children:[n.jsxs("span",{children:["Live stats synced ",new Date(B.generatedAt).toLocaleString()]}),n.jsxs("span",{children:[B.data.length," profiles"]})]}),D&&n.jsx("p",{className:"cc-sync-error",children:D})]}),n.jsxs("div",{className:"cc-toolbar",children:[n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Data"}),n.jsxs("select",{value:t,onChange:X=>e(X.target.value),children:[n.jsx("option",{value:"static",children:"Static"}),n.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"View"}),n.jsxs("select",{value:s,onChange:X=>r(X.target.value),children:[n.jsx("option",{value:"cards",children:"Cards"}),n.jsx("option",{value:"table",children:"Table"}),n.jsx("option",{value:"json",children:"JSON"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Sort by"}),n.jsxs("select",{value:i,onChange:X=>a(X.target.value),children:[n.jsx("option",{value:"subs",children:"Subs"}),n.jsx("option",{value:"views",children:"Views"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"language",children:"Language"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Dir"}),n.jsxs("select",{value:l,onChange:X=>d(X.target.value),children:[n.jsx("option",{value:"desc",children:"Desc"}),n.jsx("option",{value:"asc",children:"Asc"})]})]})]}),n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Language"}),n.jsxs("select",{value:u,onChange:X=>h(X.target.value),children:[n.jsx("option",{value:"all",children:"All"}),H.map(X=>n.jsx("option",{value:X,children:X.toUpperCase()},X))]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Platform"}),n.jsxs("select",{value:p,onChange:X=>g(X.target.value),children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"YouTube",children:"YouTube"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"TikTok",children:"TikTok"}),n.jsx("option",{value:"Discord",children:"Discord"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Min subs"}),n.jsx("input",{type:"number",min:0,value:y,onChange:X=>b(Number(X.target.value||0)),placeholder:"0"})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Active within"}),n.jsxs("select",{value:S,onChange:X=>N(Number(X.target.value)),children:[n.jsx("option",{value:7,children:"7 days"}),n.jsx("option",{value:30,children:"30 days"}),n.jsx("option",{value:90,children:"90 days"}),n.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&n.jsxs("div",{className:"cc-api",children:[n.jsxs("div",{className:"cc-api-ctrls",children:[n.jsxs("label",{className:"cc-field cc-field-grow",children:[n.jsx("span",{children:"API URL"}),n.jsx("input",{type:"url",value:L,onChange:X=>k(X.target.value),placeholder:"https://api.example.com/creators"})]}),n.jsx("button",{className:"cc-btn",onClick:se,disabled:!L||v,children:v?"Loading":"Fetch"})]}),P&&n.jsx("div",{className:"cc-api-error",children:P}),n.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),q&&n.jsxs("div",{className:"cc-spotlight",children:[n.jsxs("div",{className:"cc-spot-head",children:[n.jsx("h2",{children:"Random CC Spotlight"}),n.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!K.length)return;const X=K[Math.floor(Math.random()*K.length)];M(X.id)},children:"Shuffle"})]}),n.jsx(BN,{c:q})]}),n.jsxs("div",{className:"cc-main",children:[n.jsxs("div",{className:"cc-main-left",children:[U&&n.jsxs("div",{className:"cc-empty",children:[n.jsx("h3",{children:"No creators match the filters"}),n.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!U&&s==="cards"&&n.jsx("div",{className:"cc-grid",children:K.map(X=>n.jsx(BN,{c:X},X.id))}),!U&&s==="table"&&n.jsx(tae,{data:K}),s==="json"&&n.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(K,null,2)})]}),n.jsxs("aside",{className:"cc-main-right",children:[n.jsxs("div",{className:"cc-side",children:[n.jsx("h3",{children:"Weekly Toplists"}),n.jsxs("div",{className:"cc-toplist",children:[n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Views"}),n.jsx("ol",{children:G.map(X=>n.jsxs("li",{children:[n.jsx("span",{children:X.name}),n.jsx("span",{className:"cc-top-val",children:WE(X.weeklyViews)})]},X.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Posts"}),n.jsx("ol",{children:re.map(X=>n.jsxs("li",{children:[n.jsx("span",{children:X.name}),n.jsx("span",{className:"cc-top-val",children:X.weeklyPosts})]},X.id))})]})]})]}),n.jsxs("div",{className:"cc-side cc-legal",children:[n.jsx("h3",{children:"Legal & Disclaimer"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Only public data; no embedding without permission."}),n.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),n.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function KE(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Scans"}),n.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function QE(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Predictions"}),n.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function YE(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  News"}),n.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function XE(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Feedback"}),n.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const sae=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],py=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],nae={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},rae=t=>nae[t],iae=(t,e=64)=>{var i;const s=rae(t),r=Rl(s);return r&&(i=Ur(r,e))!=null?i:null},aae="_recordsPage_kdw96_1",oae="_navArea_kdw96_15",lae="_tabList_kdw96_27",cae="_tabButton_kdw96_55",dae="_tabButtonActive_kdw96_101",uae="_sectionContent_kdw96_115",hae="_placeholderPanel_kdw96_127",pae="_placeholderTitle_kdw96_143",mae="_placeholderText_kdw96_157",fae="_milestoneSection_kdw96_171",gae="_sectionHeader_kdw96_183",xae="_filterBar_kdw96_197",vae="_filterButtons_kdw96_231",yae="_filterButton_kdw96_231",bae="_filterButtonActive_kdw96_295",_ae="_filterSelectWrapper_kdw96_309",wae="_filterLabel_kdw96_321",jae="_filterSelect_kdw96_309",Sae="_emptyFilterMessage_kdw96_355",Nae="_currentSection_kdw96_369",kae="_currentGrid_kdw96_381",Tae="_currentCard_kdw96_393",Cae="_categoryLabel_kdw96_419",Eae="_recordTitle_kdw96_433",Aae="_currentDetails_kdw96_445",Iae="_notes_kdw96_457",Rae="_infoPanel_kdw96_469",Pae="_infoCard_kdw96_481",Lae="_disclaimerCard_kdw96_483",Dae="_infoHeader_kdw96_525",Mae="_infoAuthor_kdw96_539",Fae="_authorName_kdw96_557",Bae="_authorBadge_kdw96_565",$ae="_infoAuthorIcon_kdw96_591",Oae="_infoDate_kdw96_623",Vae="_infoBody_kdw96_633",Uae="_infoTitle_kdw96_645",zae="_infoLink_kdw96_665",Hae="_milestoneGrid_kdw96_719",Gae="_milestoneCard_kdw96_731",Wae="_milestoneCategory_kdw96_757",qae="_milestoneTitle_kdw96_771",Kae="_milestoneDetails_kdw96_785",Qae="_detailRow_kdw96_797",Yae="_detailLabel_kdw96_809",Xae="_detailValue_kdw96_823",Jae="_sourceLink_kdw96_833",Zae="_emptyState_kdw96_855",Oe={recordsPage:aae,navArea:oae,tabList:lae,tabButton:cae,tabButtonActive:dae,sectionContent:uae,placeholderPanel:hae,placeholderTitle:pae,placeholderText:mae,milestoneSection:fae,sectionHeader:gae,filterBar:xae,filterButtons:vae,filterButton:yae,filterButtonActive:bae,filterSelectWrapper:_ae,filterLabel:wae,filterSelect:jae,emptyFilterMessage:Sae,currentSection:Nae,currentGrid:kae,currentCard:Tae,categoryLabel:Cae,recordTitle:Eae,currentDetails:Aae,notes:Iae,infoPanel:Rae,infoCard:Pae,disclaimerCard:Lae,infoHeader:Dae,infoAuthor:Mae,authorName:Fae,authorBadge:Bae,infoAuthorIcon:$ae,infoDate:Oae,infoBody:Vae,infoTitle:Uae,infoLink:zae,milestoneGrid:Hae,milestoneCard:Gae,milestoneCategory:Wae,milestoneTitle:qae,milestoneDetails:Kae,detailRow:Qae,detailLabel:Yae,detailValue:Xae,sourceLink:Jae,emptyState:Zae},eoe=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],toe={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},soe=({title:t,description:e,hint:s})=>n.jsxs("article",{className:Oe.placeholderPanel,children:[n.jsx("h2",{className:Oe.placeholderTitle,children:t}),n.jsx("p",{className:Oe.placeholderText,children:e}),s&&n.jsx("p",{className:Oe.emptyState,children:s})]}),noe=()=>{const[t,e]=I.useState("all"),s=I.useMemo(()=>{const a=new Set,l=[];for(const d of py)a.has(d.category)||(a.add(d.category),l.push(d.category));return["all",...l]},[]),r=t==="all"?py:py.filter(a=>a.category===t),i=a=>{e(a)};return n.jsxs("section",{className:Oe.milestoneSection,"aria-label":"Records milestones",children:[n.jsxs("div",{className:Oe.sectionHeader,children:[n.jsx("p",{children:"Milestones"}),n.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),n.jsxs("div",{className:Oe.filterBar,children:[n.jsx("div",{className:Oe.filterButtons,children:s.map(a=>n.jsx("button",{type:"button",className:[Oe.filterButton,t===a&&Oe.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),n.jsxs("label",{className:Oe.filterSelectWrapper,children:[n.jsx("span",{className:Oe.filterLabel,children:"Category"}),n.jsx("select",{value:t,onChange:a=>i(a.target.value),className:Oe.filterSelect,children:s.map(a=>n.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?n.jsx("p",{className:Oe.emptyFilterMessage,children:"No milestones fall into this category yet."}):n.jsx("div",{className:Oe.milestoneGrid,children:r.map(a=>n.jsxs("article",{className:Oe.milestoneCard,children:[n.jsx("span",{className:Oe.milestoneCategory,children:a.category}),n.jsx("h3",{className:Oe.milestoneTitle,children:a.achievement}),n.jsxs("div",{className:Oe.milestoneDetails,children:[n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Name"}),n.jsx("span",{className:Oe.detailValue,children:a.name})]}),n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Server"}),n.jsx("span",{className:Oe.detailValue,children:a.server})]}),n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Date"}),n.jsx("span",{className:Oe.detailValue,children:a.date})]}),a.notes&&n.jsx("p",{className:Oe.notes,children:a.notes}),a.source&&n.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:Oe.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},roe=()=>n.jsxs("section",{className:Oe.currentSection,"aria-label":"Current community records",children:[n.jsxs("div",{className:Oe.sectionHeader,children:[n.jsx("p",{children:"Current Records"}),n.jsx("h2",{children:"The latest verified achievements"})]}),n.jsx("div",{className:Oe.currentGrid,children:sae.map((t,e)=>n.jsxs("article",{className:Oe.currentCard,children:[n.jsx("span",{className:Oe.categoryLabel,children:t.category}),n.jsx("h3",{className:Oe.recordTitle,children:t.record}),n.jsxs("div",{className:Oe.currentDetails,children:[n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Class"}),n.jsx("span",{className:Oe.detailValue,children:t.classType})]}),n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Player"}),n.jsx("span",{className:Oe.detailValue,children:t.playerName})]}),n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Server"}),n.jsx("span",{className:Oe.detailValue,children:t.server})]}),n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Days"}),n.jsx("span",{className:Oe.detailValue,children:t.days})]}),t.release&&n.jsxs("div",{className:Oe.detailRow,children:[n.jsx("span",{className:Oe.detailLabel,children:"Release"}),n.jsx("span",{className:Oe.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&n.jsxs("p",{className:Oe.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&n.jsx("p",{className:Oe.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),Su={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function JE(){const[t,e]=I.useState("current"),s=iae("infoCard",32),r=()=>{if(t==="current")return n.jsx(roe,{});if(t==="milestones")return n.jsx(noe,{});const i=toe[t];return n.jsx(soe,{title:i.title,description:i.description,hint:i.hint})};return n.jsxs("section",{className:Oe.recordsPage,children:[n.jsx(VE,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),n.jsxs("div",{className:Oe.infoPanel,children:[n.jsxs("div",{className:Oe.infoCard,children:[n.jsxs("div",{className:Oe.infoHeader,children:[n.jsxs("div",{className:Oe.infoAuthor,children:[s?n.jsx("img",{src:s,alt:"Community Data",className:Oe.infoAuthorIcon}):null,n.jsx("span",{className:Oe.authorName,children:"S&F Tavern Info"}),n.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:Oe.authorBadge,children:"Discord"})]}),n.jsx("span",{className:Oe.infoDate,children:"11.12.2020 14:08"})]}),n.jsxs("div",{className:Oe.infoBody,children:[n.jsx("h3",{className:Oe.infoTitle,children:Su.title}),Su.paragraphs.map(i=>n.jsx("p",{children:i},i))]}),n.jsxs("div",{className:Oe.infoLink,children:[n.jsx("span",{children:Su.linkLabel}),n.jsx("a",{href:Su.linkUrl,target:"_blank",rel:"noreferrer",children:Su.linkUrl})]})]}),n.jsxs("div",{className:Oe.disclaimerCard,children:[n.jsx("h3",{className:Oe.infoTitle,children:"Disclaimer"}),n.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),n.jsx("div",{className:Oe.navArea,children:n.jsx("nav",{className:Oe.tabList,"aria-label":"Records navigation",children:eoe.map(i=>n.jsx("button",{type:"button",className:`${Oe.tabButton} ${t===i.key?Oe.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),n.jsx("div",{className:Oe.sectionContent,children:r()})]})}const ioe={creators:qE,scans:KE,predictions:QE,news:YE,records:JE,feedback:XE};function aoe(){const[t]=Dl(),e=t.get("tab")||"",s=ioe[e];return n.jsxs(wt,{children:[n.jsx("div",{className:Ic.topWrap,children:n.jsx(Mie,{logoSrc:zie})}),n.jsx("div",{className:Ic.divider}),n.jsx("div",{className:Ic.contentArea,children:s?n.jsx(s,{}):n.jsxs("div",{className:Ic.placeholder,children:[n.jsx("h2",{className:Ic.placeholderTitle,children:"Community"}),n.jsx("p",{className:Ic.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function ooe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsxs(qt,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),n.jsxs(qt,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),n.jsxs(qt,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function loe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Letzter Scan"}),n.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function coe(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Archiv"}),n.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function doe(){return n.jsx(wt,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:n.jsx(uoe,{}),right:n.jsx(hoe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[n.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx(qt,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),n.jsx(qt,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(Dm,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),n.jsx(Dm,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),n.jsx(Dm,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),n.jsx(Dm,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function uoe(){return n.jsxs("nav",{className:"space-y-2 text-sm",children:[n.jsx(Nu,{to:"/guild-hub/planner",children:"Planner"}),n.jsx(Nu,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),n.jsx(Nu,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),n.jsx(Nu,{to:"/guild-hub/waitlist",children:"Waitlist"}),n.jsx(Nu,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function hoe(){return n.jsxs("aside",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function Dm({to:t,title:e,desc:s}){return n.jsxs(qt,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Nu({to:t,children:e}){return n.jsx(hs,{to:t,className:({isActive:s})=>`block rounded-lg border px-3 py-2 no-underline ${s?"font-semibold":""}`,style:({isActive:s})=>({borderColor:s?"#2B6DE0":"#2B4C73",background:s?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:s?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const poe="_page_1mlmy_1",moe="_header_1mlmy_13",foe="_headerStack_1mlmy_25",goe="_kicker_1mlmy_37",xoe="_title_1mlmy_53",voe="_headerActions_1mlmy_65",yoe="_primaryAction_1mlmy_77",boe="_secondaryAction_1mlmy_79",_oe="_infoStrip_1mlmy_127",woe="_infoBlock_1mlmy_147",joe="_infoLabel_1mlmy_161",Soe="_freshnessWrapper_1mlmy_181",Noe="_freshnessBadge_1mlmy_189",koe="_badge_f0_1mlmy_213",Toe="_badge_f1_1mlmy_215",Coe="_badge_f2_1mlmy_217",Eoe="_badge_f3_1mlmy_219",Aoe="_badge_f4_1mlmy_221",Ioe="_badge_f5_1mlmy_223",Roe="_badge_f6_1mlmy_225",Poe="_badge_f7_1mlmy_227",Loe="_badge_unknown_1mlmy_229",Doe="_popover_1mlmy_233",Moe="_popoverLabel_1mlmy_265",Foe="_filterToolbar_1mlmy_275",Boe="_filterSheetButton_1mlmy_285",$oe="_inlineFilters_1mlmy_303",Ooe="_searchInput_1mlmy_315",Voe="_select_1mlmy_317",Uoe="_ownerGroup_1mlmy_335",zoe="_ownerChip_1mlmy_347",Hoe="_ownerChipActive_1mlmy_365",Goe="_sortGroup_1mlmy_375",Woe="_sortLabel_1mlmy_387",qoe="_directionButton_1mlmy_397",Koe="_listBody_1mlmy_415",Qoe="_tableWrapper_1mlmy_427",Yoe="_table_1mlmy_427",Xoe="_stickyColumn_1mlmy_481",Joe="_rowTitleButton_1mlmy_495",Zoe="_tableStatus_1mlmy_513",ele="_cardList_1mlmy_533",tle="_card_1mlmy_533",sle="_cardHeader_1mlmy_565",nle="_cardTitle_1mlmy_577",rle="_cardMeta_1mlmy_595",ile="_cardDescription_1mlmy_611",ale="_cardFooter_1mlmy_623",ole="_cardLabel_1mlmy_639",lle="_scanBadge_1mlmy_649",cle="_emptyState_1mlmy_665",dle="_sheetBackdrop_1mlmy_681",ule="_sheet_1mlmy_681",hle="_sheetHandle_1mlmy_721",ple="_sheetBody_1mlmy_739",mle="_sheetLabel_1mlmy_755",fle="_sheetActions_1mlmy_793",gle="_overlay_1mlmy_807",xle="_panel_1mlmy_825",vle="_modal_1mlmy_851",yle="_drawer_1mlmy_861",ble="_panelHeader_1mlmy_869",_le="_panelControls_1mlmy_883",wle="_panelDescription_1mlmy_913",jle="_detailGrid_1mlmy_925",Sle="_panelFooter_1mlmy_957",Nle="_formOverlay_1mlmy_969",kle="_formPanel_1mlmy_991",Tle="_formGrid_1mlmy_1017",Cle="_menuWrapper_1mlmy_1029",Ele="_dotsButton_1mlmy_1037",Ale="_menu_1mlmy_1029",Ile="_pagination_1mlmy_1109",Se={page:poe,header:moe,headerStack:foe,kicker:goe,title:xoe,headerActions:voe,primaryAction:yoe,secondaryAction:boe,infoStrip:_oe,infoBlock:woe,infoLabel:joe,freshnessWrapper:Soe,freshnessBadge:Noe,badge_f0:koe,badge_f1:Toe,badge_f2:Coe,badge_f3:Eoe,badge_f4:Aoe,badge_f5:Ioe,badge_f6:Roe,badge_f7:Poe,badge_unknown:Loe,popover:Doe,popoverLabel:Moe,filterToolbar:Foe,filterSheetButton:Boe,inlineFilters:$oe,searchInput:Ooe,select:Voe,ownerGroup:Uoe,ownerChip:zoe,ownerChipActive:Hoe,sortGroup:Goe,sortLabel:Woe,directionButton:qoe,listBody:Koe,tableWrapper:Qoe,table:Yoe,stickyColumn:Xoe,rowTitleButton:Joe,tableStatus:Zoe,cardList:ele,card:tle,cardHeader:sle,cardTitle:nle,cardMeta:rle,cardDescription:ile,cardFooter:ale,cardLabel:ole,scanBadge:lle,emptyState:cle,sheetBackdrop:dle,sheet:ule,sheetHandle:hle,sheetBody:ple,sheetLabel:mle,sheetActions:fle,overlay:gle,panel:xle,modal:vle,drawer:yle,panelHeader:ble,panelControls:_le,panelDescription:wle,detailGrid:jle,panelFooter:Sle,formOverlay:Nle,formPanel:kle,formGrid:Tle,menuWrapper:Cle,dotsButton:Ele,menu:Ale,pagination:Ile};function Rle(){var se;const[t,e]=ee.useState(bQ),[s,r]=ee.useState(ny),[i,a]=ee.useState(ny),l=hd(s.q,300),d=ee.useMemo(()=>{const U=_Q(t,s,l);return wQ(U,s.sort,s.dir)},[t,s,l]),u=ee.useMemo(()=>jQ(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),p=ee.useMemo(()=>Array.from(new Set(t.map(U=>U.owner))),[t]),g=pd("(min-width: 768px)"),y=pd("(min-width: 1024px)"),[b,S]=ee.useState(!1),[N,T]=ee.useState(null),M=(se=t.find(U=>U.id===N))!=null?se:null,L=ee.useRef(null);md(L,!!M&&!y);const[k,v]=ee.useState(null),[_,P]=ee.useState(!1),E=ee.useRef(null);md(E,_);const w=ee.useMemo(()=>SQ(t),[t]),A=ee.useMemo(()=>w?yh(w.nextUpdateAt,Date.now()):"",[w]),B=g,D=y,$=n.jsxs("div",{className:Se.headerActions,children:[n.jsx("button",{type:"button",className:Se.primaryAction,onClick:()=>{v(null),P(!0)},children:"Neuer Eintrag"}),!g&&n.jsx("button",{type:"button",className:Se.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>S(!0),children:"Filter"})]}),F=U=>{const Y=dN(U);r(Y),a(Y)},z=(U,Y)=>{const ie=dN({...s,[U]:Y,page:U==="page"||U==="pageSize"?Y:1});F(ie)},H=()=>{F(i),S(!1)},K=()=>{F(ny),S(!1)},q=(U,Y=!1)=>{if(Y)a(ie=>{const pe=ie.owner.includes(U)?ie.owner.filter(ge=>ge!==U):[...ie.owner,U];return{...ie,owner:pe}});else{const X=s.owner.includes(U)?s.owner.filter(pe=>pe!==U):[...s.owner,U];z("owner",X)}},G=(U,Y)=>{e(ie=>ie.map(X=>X.id===U?{...X,status:Y,updatedAt:new Date().toISOString()}:X))},re=U=>{e(Y=>Y.some(X=>X.id===U.id)?Y.map(X=>X.id===U.id?U:X):[U,...Y]),P(!1)};return n.jsxs(wt,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[n.jsxs("div",{className:Se.page,children:[n.jsxs("header",{className:Se.header,children:[n.jsxs("div",{className:Se.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Se.kicker,children:"Deployment"}),n.jsx("h1",{className:Se.title,children:"Planer"})]}),$]}),n.jsxs("div",{className:Se.infoStrip,children:[n.jsxs("div",{className:Se.infoBlock,children:[n.jsx("span",{className:Se.infoLabel,children:"Offen"}),n.jsx("strong",{children:d.filter(U=>U.status==="open").length})]}),n.jsxs("div",{className:Se.infoBlock,children:[n.jsx("span",{className:Se.infoLabel,children:"In Arbeit"}),n.jsx("strong",{children:d.filter(U=>U.status==="in_progress").length})]}),w&&n.jsx(Ple,{code:w.freshness,label:Eb[w.freshness],updatedAt:w.lastScanAt,nextUpdateAt:w.nextUpdateAt,countdown:A})]})]}),n.jsx("section",{className:Se.filterToolbar,children:g?n.jsx(Lle,{filters:s,owners:p,onChange:z,onOwnerToggle:U=>q(U,!1)}):n.jsx("button",{type:"button",className:Se.filterSheetButton,onClick:()=>S(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),n.jsx("section",{className:Se.listBody,children:B?n.jsx(Dle,{items:u,sort:s.sort,dir:s.dir,onSortChange:U=>{const Y=s.sort===U&&s.dir==="asc"?"desc":"asc";z("sort",U),z("dir",Y)},onSelect:U=>T(U.id),onStatusChange:G,onEdit:U=>{v(U),P(!0)}}):n.jsx(Mle,{items:u,onSelect:U=>T(U.id),onStatusChange:G,onEdit:U=>{v(U),P(!0)}})}),n.jsx(Ble,{page:s.page,totalPages:h,onChange:U=>z("page",U)})]}),b&&n.jsx(Fle,{filters:i,owners:p,onChange:a,onOwnerToggle:U=>q(U,!0),onClose:()=>S(!1),onApply:H,onReset:K}),M&&n.jsx(eA,{ref:L,item:M,mode:D?"drawer":"modal",onClose:()=>T(null),onEdit:()=>{v(M),P(!0),T(null)},onStatusChange:G}),_&&n.jsx(tA,{ref:E,owners:p.length?p:LE,item:k,onClose:()=>P(!1),onSubmit:re})]})}function Ple({code:t,label:e,updatedAt:s,nextUpdateAt:r,countdown:i}){var d;const[a,l]=ee.useState(!1);return n.jsxs("div",{className:Se.freshnessWrapper,children:[n.jsx("button",{type:"button",className:`${Se.freshnessBadge} ${(d=Se[`badge_${t}`])!=null?d:""}`,"aria-label":`Freshness ${e}`,onClick:()=>l(u=>!u),children:e}),a&&n.jsxs("div",{className:Se.popover,role:"dialog","aria-label":"Freshness Details",children:[n.jsxs("div",{children:[n.jsx("span",{className:Se.popoverLabel,children:"Zuletzt gescannt"}),n.jsx("strong",{children:$i(s)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Se.popoverLabel,children:"Naechster Scan"}),n.jsx("strong",{children:$i(r)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Se.popoverLabel,children:"Countdown"}),n.jsx("strong",{children:i})]})]})]})}function Lle({filters:t,owners:e,onChange:s,onOwnerToggle:r}){return n.jsxs("div",{className:Se.inlineFilters,children:[n.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:Se.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>s("q",i.target.value)}),n.jsxs("select",{className:Se.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>s("type",i.target.value),children:[n.jsx("option",{value:"all",children:"Typ (alle)"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]}),n.jsxs("select",{className:Se.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>s("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("select",{className:Se.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>s("range",i.target.value),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]}),n.jsx("div",{className:Se.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return n.jsx("button",{type:"button",className:`${Se.ownerChip} ${a?Se.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Se.sortGroup,children:[n.jsx("label",{htmlFor:"planner-sort",className:Se.sortLabel,children:"Sortieren"}),n.jsxs("select",{id:"planner-sort",name:"plannerSort",className:Se.select,value:t.sort,onChange:i=>s("sort",i.target.value),children:[n.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),n.jsx("option",{value:"priority",children:"Prioritaet"}),n.jsx("option",{value:"title",children:"Titel"})]}),n.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:Se.directionButton,onClick:()=>s("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function Dle({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:l}){const d=u=>e===u?s==="asc"?" ":" ":"";return t.length===0?n.jsx(ZE,{}):n.jsx("div",{className:Se.tableWrapper,children:n.jsxs("table",{className:Se.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Se.stickyColumn,onClick:()=>r("title"),children:["Titel",d("title")]}),n.jsx("th",{children:"Typ"}),n.jsx("th",{children:"Owner"}),n.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",d("dueAt")]}),n.jsx("th",{children:"Status"}),n.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",d("updatedAt")]}),n.jsx("th",{})]})}),n.jsx("tbody",{children:t.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:Se.stickyColumn,children:n.jsx("button",{type:"button",className:Se.rowTitleButton,onClick:()=>i(u),children:u.title})}),n.jsx("td",{children:Cb[u.type]}),n.jsx("td",{children:u.owner}),n.jsx("td",{children:$i(u.dueAt)}),n.jsx("td",{children:n.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:Se.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),n.jsx("td",{children:Gh(u.updatedAt)}),n.jsx("td",{children:n.jsx(sA,{onEdit:()=>l(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function Mle({items:t,onSelect:e,onStatusChange:s,onEdit:r}){return t.length===0?n.jsx(ZE,{}):n.jsx("div",{className:Se.cardList,children:t.map(i=>n.jsxs("article",{className:Se.card,children:[n.jsxs("div",{className:Se.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Se.cardTitle,onClick:()=>e(i),children:i.title}),n.jsxs("div",{className:Se.cardMeta,children:[n.jsx("span",{children:Cb[i.type]}),n.jsx("span",{children:vQ[i.status]}),n.jsxs("span",{children:["Due ",$i(i.dueAt)]})]})]}),n.jsx(sA,{onEdit:()=>r(i),onComplete:()=>s(i.id,"done")})]}),n.jsx("p",{className:Se.cardDescription,children:i.description}),n.jsxs("div",{className:Se.cardFooter,children:[n.jsxs("div",{children:[n.jsx("span",{className:Se.cardLabel,children:"Owner"}),n.jsx("strong",{children:i.owner})]}),n.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:Se.tableStatus,value:i.status,onChange:a=>s(i.id,a.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("span",{className:Se.scanBadge,children:["Letzter Scan ",Gh(i.lastScanAt)]})]})]},i.id))})}function ZE(){return n.jsx("div",{className:Se.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Fle({filters:t,owners:e,onChange:s,onOwnerToggle:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Se.sheetBackdrop,role:"presentation",onClick:i,children:n.jsxs("div",{className:Se.sheet,role:"dialog","aria-label":"Filter",onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Se.sheetHandle}),n.jsxs("div",{className:Se.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Se.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:d=>s(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Typ",n.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:d=>s(u=>({...u,type:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Status",n.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:d=>s(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Zeitraum",n.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:d=>s(u=>({...u,range:d.target.value})),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]})]}),n.jsxs("div",{className:Se.sheetLabel,children:["Owner",n.jsx("div",{className:Se.ownerGroup,children:e.map(d=>{const u=t.owner.includes(d);return n.jsx("button",{type:"button",className:`${Se.ownerChip} ${u?Se.ownerChipActive:""}`,onClick:()=>r(d),children:d},d)})})]})]}),n.jsxs("div",{className:Se.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Se.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const eA=ee.forwardRef(({item:t,mode:e,onClose:s,onEdit:r,onStatusChange:i},a)=>n.jsx("div",{className:Se.overlay,children:n.jsxs("div",{ref:a,className:`${Se.panel} ${e==="drawer"?Se.drawer:Se.modal}`,children:[n.jsxs("header",{className:Se.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Se.cardLabel,children:Cb[t.type]}),n.jsx("h2",{children:t.title})]}),n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("div",{className:Se.panelControls,children:[n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:l=>i(t.id,l.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{disabled:!0,value:t.priority,children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsx("p",{className:Se.panelDescription,children:t.description}),n.jsxs("dl",{className:Se.detailGrid,children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Owner"}),n.jsx("dd",{children:t.owner})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Assignees"}),n.jsx("dd",{children:t.assignees.join(", ")})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Termin"}),n.jsx("dd",{children:$i(t.dueAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt aktualisiert"}),n.jsx("dd",{children:Gh(t.updatedAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Erstellt"}),n.jsx("dd",{children:$i(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Tags"}),n.jsx("dd",{children:t.tags.join(", ")})]})]}),n.jsxs("div",{className:Se.panelFooter,children:[n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Se.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));eA.displayName="DetailPanel";const tA=ee.forwardRef(({owners:t,item:e,onClose:s,onSubmit:r},i)=>{const[a,l]=ee.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:LE[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});ee.useEffect(()=>{e&&l(e)},[JSON.stringify(e)]);const d=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{l(p=>{const y=p.tags.includes(h)?p.tags.filter(b=>b!==h):[...p.tags,h];return{...p,tags:y}})};return n.jsx("div",{className:Se.formOverlay,children:n.jsxs("form",{ref:i,className:Se.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Se.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Se.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),n.jsx("h2",{children:e?e.title:"Planner Task"})]}),n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Titel",n.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>l(p=>({...p,title:h.target.value})),required:!0})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Beschreibung",n.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>l(p=>({...p,description:h.target.value})),rows:4})]}),n.jsxs("div",{className:Se.formGrid,children:[n.jsxs("label",{children:["Typ",n.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>l(p=>({...p,type:h.target.value})),children:[n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>l(p=>({...p,status:h.target.value})),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Owner",n.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>l(p=>({...p,owner:h.target.value})),children:t.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>l(p=>({...p,priority:h.target.value})),children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsxs("label",{className:Se.sheetLabel,children:["Termin",n.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>l(p=>({...p,dueAt:new Date(h.target.value).toISOString()}))})]}),n.jsxs("div",{className:Se.sheetLabel,children:["Tags",n.jsx("div",{className:Se.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const p=a.tags.includes(h);return n.jsx("button",{type:"button",className:`${Se.ownerChip} ${p?Se.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),n.jsxs("footer",{className:Se.panelFooter,children:[n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Se.primaryAction,children:"Speichern"})]})]})})});tA.displayName="PlannerFormOverlay";function sA({onEdit:t,onComplete:e}){const[s,r]=ee.useState(!1),i=ee.useRef(null);return ee.useEffect(()=>{if(!s)return;const a=l=>{var d;(d=i.current)!=null&&d.contains(l.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[s]),n.jsxs("div",{className:Se.menuWrapper,ref:i,children:[n.jsx("button",{type:"button",className:Se.dotsButton,"aria-haspopup":"menu","aria-expanded":s,onClick:()=>r(a=>!a),children:"..."}),s&&n.jsxs("div",{className:Se.menu,role:"menu",children:[n.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),n.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),n.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function Ble({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Se.pagination,children:[n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Se.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const $le="_page_1cvuk_1",Ole="_header_1cvuk_13",Vle="_headerLeading_1cvuk_29",Ule="_backLink_1cvuk_41",zle="_headerStack_1cvuk_77",Hle="_kicker_1cvuk_89",Gle="_title_1cvuk_105",Wle="_subtitle_1cvuk_117",qle="_headerActions_1cvuk_129",Kle="_plannerNotice_1cvuk_141",Qle="_noticeItem_1cvuk_163",Yle="_noticeWarning_1cvuk_185",Xle="_noticeDot_1cvuk_197",Jle="_tabSection_1cvuk_213",Zle="_tabBar_1cvuk_225",ece="_tabItem_1cvuk_239",tce="_tabItemActive_1cvuk_279",sce="_tabLabel_1cvuk_291",nce="_tabHelper_1cvuk_301",rce="_tabPanel_1cvuk_311",ice="_tabBadge_1cvuk_331",ace="_primaryAction_1cvuk_1331",oce="_secondaryAction_1cvuk_1333",lce="_infoStrip_1cvuk_1383",cce="_infoBlock_1cvuk_1403",dce="_infoLabel_1cvuk_1415",uce="_infoHint_1cvuk_1441",hce="_stageGrid_1cvuk_1453",pce="_panel_1cvuk_1465",mce="_panelHeader_1cvuk_1487",fce="_panelKicker_1cvuk_1501",gce="_panelTitle_1cvuk_1517",xce="_panelLead_1cvuk_1529",vce="_badge_1cvuk_1541",yce="_panelBody_1cvuk_1563",bce="_placeholderGrid_1cvuk_1575",_ce="_placeholderCard_1cvuk_1587",wce="_placeholderTitle_1cvuk_1609",jce="_placeholderText_1cvuk_1619",Sce="_helperSection_1cvuk_1631",Nce="_helperCard_1cvuk_1639",kce="_helperKicker_1cvuk_1661",Tce="_helperTitle_1cvuk_1677",Cce="_helperText_1cvuk_1689",Ece="_helperActions_1cvuk_1701",Xe={page:$le,header:Ole,headerLeading:Vle,backLink:Ule,headerStack:zle,kicker:Hle,title:Gle,subtitle:Wle,headerActions:qle,plannerNotice:Kle,noticeItem:Qle,noticeWarning:Yle,noticeDot:Xle,tabSection:Jle,tabBar:Zle,tabItem:ece,tabItemActive:tce,tabLabel:sce,tabHelper:nce,tabPanel:rce,tabBadge:ice,primaryAction:ace,secondaryAction:oce,infoStrip:lce,infoBlock:cce,infoLabel:dce,infoHint:uce,stageGrid:hce,panel:pce,panelHeader:mce,panelKicker:fce,panelTitle:gce,panelLead:xce,badge:vce,panelBody:yce,placeholderGrid:bce,placeholderCard:_ce,placeholderTitle:wce,placeholderText:jce,helperSection:Sce,helperCard:Nce,helperKicker:kce,helperTitle:Tce,helperText:Cce,helperActions:Ece},Ace="_setupGrid_rdp6l_1",Ice="_setupLeft_rdp6l_13",Rce="_setupRight_rdp6l_15",Pce="_card_rdp6l_27",Lce="_cardHeader_rdp6l_49",Dce="_cardKicker_rdp6l_61",Mce="_cardTitle_rdp6l_77",Fce="_cardText_rdp6l_89",Bce="_toggleGroup_rdp6l_101",$ce="_toggleButton_rdp6l_113",Oce="_toggleButtonActive_rdp6l_143",Vce="_modeHint_rdp6l_155",Uce="_formGrid_rdp6l_167",zce="_formField_rdp6l_179",Hce="_formLabel_rdp6l_191",Gce="_input_rdp6l_201",Wce="_suggestions_rdp6l_231",qce="_suggestionBtn_rdp6l_257",Kce="_suggestionName_rdp6l_297",Qce="_suggestionMeta_rdp6l_305",Yce="_partnerActions_rdp6l_315",Xce="_primaryAction_rdp6l_329",Jce="_secondaryAction_rdp6l_331",Zce="_partnerList_rdp6l_381",ede="_partnerRow_rdp6l_393",tde="_partnerName_rdp6l_413",sde="_partnerMeta_rdp6l_423",nde="_removeButton_rdp6l_433",rde="_emptyState_rdp6l_463",ide="_previewBlock_rdp6l_473",ade="_previewLabel_rdp6l_485",ode="_previewValue_rdp6l_499",lde="_previewCard_rdp6l_509",cde="_previewTitle_rdp6l_523",dde="_previewMeta_rdp6l_533",ude="_previewList_rdp6l_543",hde="_previewItem_rdp6l_555",pde="_setupInfo_rdp6l_569",mde="_setupWarning_rdp6l_593",fde="_setupInfoIcon_rdp6l_605",gde="_setupInfoTitle_rdp6l_629",xde="_setupInfoText_rdp6l_639",De={setupGrid:Ace,setupLeft:Ice,setupRight:Rce,card:Pce,cardHeader:Lce,cardKicker:Dce,cardTitle:Mce,cardText:Fce,toggleGroup:Bce,toggleButton:$ce,toggleButtonActive:Oce,modeHint:Vce,formGrid:Uce,formField:zce,formLabel:Hce,input:Gce,suggestions:Wce,suggestionBtn:qce,suggestionName:Kce,suggestionMeta:Qce,partnerActions:Yce,primaryAction:Xce,secondaryAction:Jce,partnerList:Zce,partnerRow:ede,partnerName:tde,partnerMeta:sde,removeButton:nde,emptyState:rde,previewBlock:ide,previewLabel:ade,previewValue:ode,previewCard:lde,previewTitle:cde,previewMeta:dde,previewList:ude,previewItem:hde,setupInfo:pde,setupWarning:mde,setupInfoIcon:fde,setupInfoTitle:gde,setupInfoText:xde};function vde({setupState:t,onChangeMode:e,onChangeBaseGuild:s,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var T,M,L,k,v,_,P,E,w,A;const[a,l]=ee.useState(()=>{var B,D,$,F;return{name:(D=(B=t.baseGuild)==null?void 0:B.name)!=null?D:"",server:(F=($=t.baseGuild)==null?void 0:$.server)!=null?F:""}}),[d,u]=ee.useState({id:void 0,name:"",server:""}),h=hd(a.name,250),p=hd(d.name,250),g=$N(h,a.server||"all"),y=$N(p,d.server||"all"),b=!!((M=(T=t.baseGuild)==null?void 0:T.name)!=null&&M.trim()&&((k=(L=t.baseGuild)==null?void 0:L.server)!=null&&k.trim())),S=t.partnerGuilds.length>0;ee.useEffect(()=>{var D,$,F,z;const B={name:($=(D=t.baseGuild)==null?void 0:D.name)!=null?$:"",server:(z=(F=t.baseGuild)==null?void 0:F.server)!=null?z:""};(B.name!==a.name||B.server!==a.server)&&l(B)},[(v=t.baseGuild)==null?void 0:v.name,(_=t.baseGuild)==null?void 0:_.server]);const N=()=>{!d.name.trim()||!d.server.trim()||(r(d),u({id:void 0,name:"",server:""}))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:De.setupGrid,children:[n.jsxs("div",{className:De.setupLeft,children:[n.jsxs("div",{className:De.card,children:[n.jsx("div",{className:De.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:De.cardKicker,children:"Modus"}),n.jsx("h3",{className:De.cardTitle,children:"Scan-based oder manuell"}),n.jsx("p",{className:De.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),n.jsxs("div",{className:De.toggleGroup,role:"group","aria-label":"Setup Modus",children:[n.jsx("button",{type:"button",className:`${De.toggleButton} ${t.mode==="scan"?De.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),n.jsx("button",{type:"button",className:`${De.toggleButton} ${t.mode==="manual"?De.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),n.jsx("p",{className:De.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),n.jsxs("div",{className:De.card,children:[n.jsx("div",{className:De.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:De.cardKicker,children:"Base Guild"}),n.jsx("h3",{className:De.cardTitle,children:"Stammdaten"}),n.jsx("p",{className:De.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),n.jsxs("div",{className:De.formGrid,children:[n.jsxs("label",{className:De.formField,children:[n.jsx("span",{className:De.formLabel,children:"Guild name"}),n.jsx("input",{type:"text",className:De.input,value:a.name,onChange:B=>{const D=B.target.value;l($=>({...$,name:D}))},onBlur:()=>s({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&n.jsx("div",{className:De.suggestions,children:g.map(B=>n.jsxs("button",{type:"button",className:De.suggestionBtn,onClick:()=>{l({name:B.name,server:B.server}),s({id:B.id,name:B.name,server:B.server})},children:[n.jsx("span",{className:De.suggestionName,children:B.name}),n.jsx("span",{className:De.suggestionMeta,children:B.server})]},B.id))})]}),n.jsxs("label",{className:De.formField,children:[n.jsx("span",{className:De.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:De.input,value:a.server,onChange:B=>{const D=B.target.value;l($=>({...$,server:D}))},onBlur:()=>s({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),n.jsxs("div",{className:De.card,children:[n.jsx("div",{className:De.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:De.cardKicker,children:"Partner Guilds"}),n.jsx("h3",{className:De.cardTitle,children:"Partner hinzufuegen"}),n.jsx("p",{className:De.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),n.jsxs("div",{className:De.formGrid,children:[n.jsxs("label",{className:De.formField,children:[n.jsx("span",{className:De.formLabel,children:"Name"}),n.jsx("input",{type:"text",className:De.input,value:d.name,onChange:B=>u(D=>({...D,name:B.target.value})),placeholder:"z.B. Nova Alliance"}),y.length>0&&n.jsx("div",{className:De.suggestions,children:y.map(B=>n.jsxs("button",{type:"button",className:De.suggestionBtn,onClick:()=>u({id:B.id,name:B.name,server:B.server}),children:[n.jsx("span",{className:De.suggestionName,children:B.name}),n.jsx("span",{className:De.suggestionMeta,children:B.server})]},B.id))})]}),n.jsxs("label",{className:De.formField,children:[n.jsx("span",{className:De.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:De.input,value:d.server,onChange:B=>u(D=>({...D,server:B.target.value})),placeholder:"z.B. EU-02"})]})]}),n.jsxs("div",{className:De.partnerActions,children:[n.jsx("button",{type:"button",className:De.primaryAction,onClick:N,children:"Add partner guild"}),n.jsx("button",{type:"button",className:De.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),n.jsx("div",{className:De.partnerList,children:t.partnerGuilds.length===0?n.jsx("div",{className:De.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(B=>n.jsxs("div",{className:De.partnerRow,children:[n.jsxs("div",{children:[n.jsx("div",{className:De.partnerName,children:B.name||"Unbenannt"}),n.jsx("div",{className:De.partnerMeta,children:B.server||"Server n/a"})]}),n.jsx("button",{type:"button",className:De.removeButton,onClick:()=>i(B.id),children:"Remove"})]},B.id))})]})]}),n.jsx("aside",{className:De.setupRight,children:n.jsxs("div",{className:De.card,children:[n.jsx("div",{className:De.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:De.cardKicker,children:"Preview"}),n.jsx("h3",{className:De.cardTitle,children:"Uebersicht"}),n.jsx("p",{className:De.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),n.jsxs("div",{className:De.previewBlock,children:[n.jsx("div",{className:De.previewLabel,children:"Modus"}),n.jsx("div",{className:De.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),n.jsxs("div",{className:De.previewBlock,children:[n.jsx("div",{className:De.previewLabel,children:"Base Guild"}),n.jsx("div",{className:De.previewCard,children:(P=t.baseGuild)!=null&&P.name||(E=t.baseGuild)!=null&&E.server?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:De.previewTitle,children:((w=t.baseGuild)==null?void 0:w.name)||"Unbenannt"}),n.jsx("div",{className:De.previewMeta,children:((A=t.baseGuild)==null?void 0:A.server)||"Server n/a"})]}):n.jsx("div",{className:De.emptyState,children:"No base guild selected yet."})})]}),n.jsxs("div",{className:De.previewBlock,children:[n.jsx("div",{className:De.previewLabel,children:"Partner Guilds"}),n.jsx("div",{className:De.previewList,children:t.partnerGuilds.length===0?n.jsx("div",{className:De.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(B=>n.jsxs("div",{className:De.previewItem,children:[n.jsx("div",{className:De.previewTitle,children:B.name||"Unbenannt"}),n.jsx("div",{className:De.previewMeta,children:B.server||"Server n/a"})]},B.id))})]})]})})]}),b?S?null:n.jsxs("div",{className:De.setupInfo,role:"status","aria-live":"polite",children:[n.jsx("span",{className:De.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:De.setupInfoTitle,children:"Optional: add partner guilds."}),n.jsx("p",{className:De.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):n.jsxs("div",{className:`${De.setupInfo} ${De.setupWarning}`,role:"status","aria-live":"polite",children:[n.jsx("span",{className:De.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:De.setupInfoTitle,children:"No base guild selected yet."}),n.jsx("p",{className:De.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function $N(t,e){const[s,r]=ee.useState([]);return ee.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function l(){try{const d=vg(dt,"latest"),u=await pn(Vn(d,mo("nameFold"),vl(i),yl(i+""),Un(12))),h=await pn(Vn(d,jl("nameNgrams","array-contains",i),Un(12))),p=new Set,g=[],y=b=>{var _,P,E,w,A,B,D,$,F,z;const S=b.data(),T=(_=b.ref.parent)==null?void 0:_.parent;if(((P=T==null?void 0:T.parent)==null?void 0:P.id)!=="guilds")return;const L=(w=(E=T==null?void 0:T.id)!=null?E:S.guildIdentifier)!=null?w:b.id;if(!L||p.has(L))return;const k=(D=(B=S.server)!=null?B:(A=S.values)==null?void 0:A.Server)!=null?D:"Unknown";if(e!=="all"&&k!==e)return;const v=(z=(F=S.name)!=null?F:($=S.values)==null?void 0:$.Name)!=null?z:"Unbekannte Gilde";p.add(L),g.push({id:L,name:v,server:k})};u.forEach(y),h.forEach(y),a||(g.sort((b,S)=>b.name.localeCompare(S.name)),r(g))}catch(d){console.error("[FusionPlanner] guild search failed",d),a||r([])}}return l(),()=>{a=!0}},[t,e]),s}const yde="_membersContainer_1ctw8_1",bde="_scenarioSwitcher_1ctw8_13",_de="_scenarioButton_1ctw8_25",wde="_scenarioButtonActive_1ctw8_63",jde="_scenarioButtonName_1ctw8_75",Sde="_scenarioButtonDesc_1ctw8_83",Nde="_setupInfo_1ctw8_93",kde="_setupInfoHeader_1ctw8_113",Tde="_setupInfoTitle_1ctw8_127",Cde="_setupInfoMode_1ctw8_139",Ede="_setupInfoRow_1ctw8_163",Ade="_setupInfoLabel_1ctw8_175",Ide="_setupInfoValue_1ctw8_189",Rde="_setupInfoMeta_1ctw8_199",Pde="_setupInfoPartners_1ctw8_209",Lde="_setupInfoBadge_1ctw8_221",Dde="_setupInfoEmpty_1ctw8_245",Mde="_membersSummary_1ctw8_255",Fde="_membersSummaryItem_1ctw8_275",Bde="_membersSummaryLabel_1ctw8_287",$de="_membersSummaryValue_1ctw8_301",Ode="_maxSlotsInput_1ctw8_313",Vde="_membersTable_1ctw8_331",Ude="_membersRow_1ctw8_349",zde="_membersHead_1ctw8_375",Hde="_membersCell_1ctw8_385",Gde="_memberName_1ctw8_395",Wde="_memberBadge_1ctw8_403",qde="_assignmentCell_1ctw8_427",Kde="_assignmentBadge_1ctw8_439",Qde="_assignmentBadgeMain_1ctw8_463",Yde="_assignmentBadgePartner_1ctw8_475",Xde="_assignmentBadgeWatch_1ctw8_487",Jde="_assignmentBadgeIdle_1ctw8_499",Zde="_assignmentActions_1ctw8_507",eue="_assignmentButton_1ctw8_519",tue="_assignmentButtonActive_1ctw8_551",sue="_decisionGroup_1ctw8_563",nue="_decisionButton_1ctw8_575",rue="_decisionButtonActive_1ctw8_607",iue="_emptyWrap_1ctw8_619",aue="_emptyTitle_1ctw8_633",oue="_emptyText_1ctw8_641",lue="_contextMenuBackdrop_1ctw8_651",cue="_contextMenu_1ctw8_651",due="_contextMenuItem_1ctw8_693",uue="_partnerPickerCell_1ctw8_725",hue="_partnerLabel_1ctw8_737",pue="_partnerSelect_1ctw8_751",Ae={membersContainer:yde,scenarioSwitcher:bde,scenarioButton:_de,scenarioButtonActive:wde,scenarioButtonName:jde,scenarioButtonDesc:Sde,setupInfo:Nde,setupInfoHeader:kde,setupInfoTitle:Tde,setupInfoMode:Cde,setupInfoRow:Ede,setupInfoLabel:Ade,setupInfoValue:Ide,setupInfoMeta:Rde,setupInfoPartners:Pde,setupInfoBadge:Lde,setupInfoEmpty:Dde,membersSummary:Mde,membersSummaryItem:Fde,membersSummaryLabel:Bde,membersSummaryValue:$de,maxSlotsInput:Ode,membersTable:Vde,membersRow:Ude,membersHead:zde,membersCell:Hde,memberName:Gde,memberBadge:Wde,assignmentCell:qde,assignmentBadge:Kde,assignmentBadgeMain:Qde,assignmentBadgePartner:Yde,assignmentBadgeWatch:Xde,assignmentBadgeIdle:Jde,assignmentActions:Zde,assignmentButton:eue,assignmentButtonActive:tue,decisionGroup:sue,decisionButton:nue,decisionButtonActive:rue,emptyWrap:iue,emptyTitle:aue,emptyText:oue,contextMenuBackdrop:lue,contextMenu:cue,contextMenuItem:due,partnerPickerCell:uue,partnerLabel:hue,partnerSelect:pue};function mue({members:t,scenario:e,onChangeScenarioDecision:s,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var E,w,A,B,D,$;const[l,d]=ee.useState(null),u=ee.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map((F,z)=>({id:F.id,label:F.name||`Partner ${z+1}`})):[{id:"partner-default",label:"Partner guild"}],p=ee.useCallback((F,z)=>{d({memberId:F,...z})},[]),g=ee.useCallback(()=>{d(null)},[]),y=ee.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=ee.useCallback((F,z,H)=>{y(),u.current=window.setTimeout(()=>{p(F,{x:z,y:H})},550)},[y,p]);ee.useEffect(()=>()=>y(),[y]);const S=ee.useCallback((F,z,H)=>{if(z==="main")s(F,"take"),r(F,"main");else if(z==="partner"){const K=H?`partner:${H}`:"partner";s(F,"take"),r(F,K)}else s(F,"bench"),r(F,"none");g()},[g,s,r]),N=ee.useCallback((F,z)=>{s(F,z),z==="take"?r(F,"main"):r(F,"none")},[s,r]);if(!!!((w=(E=a.baseGuild)==null?void 0:E.name)!=null&&w.trim()&&((B=(A=a.baseGuild)==null?void 0:A.server)!=null&&B.trim())))return n.jsxs("div",{className:Ae.emptyWrap,children:[n.jsx("h3",{className:Ae.emptyTitle,children:"No base guild configured"}),n.jsx("p",{className:Ae.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return n.jsxs("div",{className:Ae.emptyWrap,children:[n.jsx("h3",{className:Ae.emptyTitle,children:"Members & Slots"}),n.jsx("p",{className:Ae.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return n.jsxs("div",{className:Ae.emptyWrap,children:[n.jsx("h3",{className:Ae.emptyTitle,children:"No members found"}),n.jsx("p",{className:Ae.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const M=(D=e.decisions)!=null?D:{},L=($=e.targetGuildAssignments)!=null?$:{},k=t.filter(F=>M[F.id]==="take").length,v=t.filter(F=>M[F.id]==="bench").length,_=t.filter(F=>M[F.id]==="drop").length,P=Math.max(0,e.maxSlots-e.reservedSlots-k);return n.jsxs("div",{className:Ae.membersContainer,children:[n.jsx("div",{className:Ae.scenarioSwitcher,children:n.jsxs("div",{className:`${Ae.scenarioButton} ${Ae.scenarioButtonActive}`,children:[n.jsx("span",{className:Ae.scenarioButtonName,children:e.name}),e.description?n.jsx("span",{className:Ae.scenarioButtonDesc,children:e.description}):null]})}),n.jsxs("div",{className:Ae.setupInfo,children:[n.jsxs("div",{className:Ae.setupInfoHeader,children:[n.jsx("div",{className:Ae.setupInfoTitle,children:"Planning for"}),n.jsx("span",{className:Ae.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?n.jsxs("div",{className:Ae.setupInfoRow,children:[n.jsx("span",{className:Ae.setupInfoLabel,children:"Base Guild"}),n.jsxs("span",{className:Ae.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:Ae.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):n.jsx("div",{className:Ae.setupInfoEmpty,children:"No base guild selected in Setup tab."}),n.jsxs("div",{className:Ae.setupInfoRow,children:[n.jsx("span",{className:Ae.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?n.jsx("div",{className:Ae.setupInfoPartners,children:a.partnerGuilds.map(F=>n.jsxs("span",{className:Ae.setupInfoBadge,children:[F.name||"Unbenannt",n.jsxs("span",{className:Ae.setupInfoMeta,children:[" (",F.server||"Server n/a",")"]})]},F.id))}):n.jsx("span",{className:Ae.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),n.jsxs("div",{className:Ae.membersSummary,children:[n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Selected"}),n.jsxs("div",{className:Ae.membersSummaryValue,children:[k," / ",e.maxSlots]})]}),n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Free slots"}),n.jsx("div",{className:Ae.membersSummaryValue,children:P})]}),n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Bench"}),n.jsx("div",{className:Ae.membersSummaryValue,children:v})]}),n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Drop"}),n.jsx("div",{className:Ae.membersSummaryValue,children:_})]}),n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Reserved"}),n.jsx("div",{className:Ae.membersSummaryValue,children:e.reservedSlots})]}),n.jsxs("div",{className:Ae.membersSummaryItem,children:[n.jsx("div",{className:Ae.membersSummaryLabel,children:"Max slots"}),n.jsx("input",{type:"number",className:Ae.maxSlotsInput,value:e.maxSlots,min:0,onChange:F=>i(Number(F.target.value))})]})]}),n.jsxs("div",{className:Ae.membersTable,children:[n.jsxs("div",{className:`${Ae.membersRow} ${Ae.membersHead}`,children:[n.jsx("div",{className:Ae.membersCell,children:"Name"}),n.jsx("div",{className:Ae.membersCell,children:"Level"}),n.jsx("div",{className:Ae.membersCell,children:"Guild"}),n.jsx("div",{className:Ae.membersCell,children:"Class"}),n.jsx("div",{className:Ae.membersCell,children:"Plan"}),n.jsx("div",{className:Ae.membersCell,children:"Decision"}),n.jsx("div",{className:Ae.membersCell,children:"Partner"})]}),t.map(F=>{var se,U,Y,ie,X,pe,ge,he,ve;const z=(se=M[F.id])!=null?se:"undecided",H=(U=L[F.id])!=null?U:"none",K=H&&H.toString().startsWith("partner:")?H.split(":")[1]:null,q=(pe=(Y=h.find(_e=>_e.id===K))==null?void 0:Y.label)!=null?pe:H==="partner"?(X=(ie=h[0])==null?void 0:ie.label)!=null?X:"Partner guild":null,G=z==="take"&&H==="main"?"main":z==="take"&&(H==="partner"||K)?"partner":z==="bench"?"watch":"unassigned",re=G==="main"?"Main guild":G==="partner"?q||"Partner guild":G==="watch"?"Watchlist":"Not planned";return n.jsxs("div",{className:Ae.membersRow,onContextMenu:_e=>{_e.preventDefault(),p(F.id,{x:_e.clientX,y:_e.clientY})},onTouchStart:_e=>{const ce=_e.touches[0];ce&&b(F.id,ce.clientX,ce.clientY)},onTouchEnd:y,onTouchCancel:y,children:[n.jsx("div",{className:Ae.membersCell,children:n.jsx("div",{className:Ae.memberName,children:F.name})}),n.jsx("div",{className:Ae.membersCell,children:n.jsxs("span",{className:Ae.memberBadge,children:["Lvl ",F.level]})}),n.jsx("div",{className:Ae.membersCell,children:F.guildName}),n.jsx("div",{className:Ae.membersCell,children:(he=(ge=F.className)!=null?ge:F.class)!=null?he:"?"}),n.jsxs("div",{className:`${Ae.membersCell} ${Ae.assignmentCell}`,children:[n.jsx("span",{className:`${Ae.assignmentBadge} ${G==="main"?Ae.assignmentBadgeMain:G==="partner"?Ae.assignmentBadgePartner:G==="watch"?Ae.assignmentBadgeWatch:Ae.assignmentBadgeIdle}`,children:re}),n.jsxs("div",{className:Ae.assignmentActions,role:"group","aria-label":"Target guild selection",children:[n.jsx("button",{type:"button",className:`${Ae.assignmentButton} ${G==="main"?Ae.assignmentButtonActive:""}`,onClick:()=>S(F.id,"main"),children:"Main"}),n.jsx("button",{type:"button",className:`${Ae.assignmentButton} ${G==="watch"?Ae.assignmentButtonActive:""}`,onClick:()=>S(F.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",className:`${Ae.assignmentButton} ${G==="partner"?Ae.assignmentButtonActive:""}`,onClick:()=>S(F.id,"partner"),children:"Partner"})]})]}),n.jsx("div",{className:Ae.membersCell,children:n.jsx("div",{className:Ae.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(_e=>n.jsx("button",{type:"button",className:`${Ae.decisionButton} ${z===_e?Ae.decisionButtonActive:""}`,onClick:()=>N(F.id,_e),children:_e==="take"?"Take":_e==="bench"?"Bench":_e==="drop"?"Drop":"?"},_e))})}),n.jsxs("div",{className:`${Ae.membersCell} ${Ae.partnerPickerCell}`,children:[n.jsx("label",{className:Ae.partnerLabel,htmlFor:`partner-select-${F.id}`,children:"Partner"}),n.jsx("select",{id:`partner-select-${F.id}`,className:Ae.partnerSelect,value:K!=null?K:(ve=h[0])==null?void 0:ve.id,onChange:_e=>S(F.id,"partner",_e.target.value),children:h.map(_e=>n.jsx("option",{value:_e.id,children:_e.label},_e.id))})]})]},F.id)})]}),l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Ae.contextMenuBackdrop,onClick:g}),n.jsxs("div",{className:Ae.contextMenu,style:{top:l.y,left:l.x},children:[n.jsx("button",{type:"button",className:Ae.contextMenuItem,onClick:()=>S(l.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Ae.contextMenuItem,onClick:()=>S(l.memberId,"watch"),children:"Move to Watchlist"}),h.map(F=>n.jsxs("button",{type:"button",className:Ae.contextMenuItem,onClick:()=>S(l.memberId,"partner",F.id),children:["Move to ",F.label]},F.id))]})]}):null]})}const fue="_overview_6ytw3_1",gue="_contextBox_6ytw3_15",xue="_contextKicker_6ytw3_35",vue="_contextTitle_6ytw3_51",yue="_contextText_6ytw3_61",bue="_contextDetails_6ytw3_71",_ue="_detailItem_6ytw3_85",wue="_detailLabel_6ytw3_99",jue="_detailValue_6ytw3_113",Sue="_kpiGrid_6ytw3_121",Nue="_kpiCard_6ytw3_133",kue="_kpiLabel_6ytw3_153",Tue="_kpiValue_6ytw3_167",Cue="_columnsWrapper_6ytw3_177",Eue="_column_6ytw3_177",Aue="_columnDropTarget_6ytw3_213",Iue="_columnHeader_6ytw3_223",Rue="_columnKicker_6ytw3_235",Pue="_columnTitle_6ytw3_251",Lue="_columnCount_6ytw3_259",Due="_columnBody_6ytw3_281",Mue="_memberCard_6ytw3_293",Fue="_memberTop_6ytw3_337",Bue="_memberName_6ytw3_349",$ue="_memberMeta_6ytw3_357",Oue="_memberBadge_6ytw3_369",Vue="_memberBottom_6ytw3_395",Uue="_memberGuild_6ytw3_409",zue="_memberServer_6ytw3_419",Hue="_memberActions_6ytw3_427",Gue="_emptyList_6ytw3_469",Wue="_emptyWrap_6ytw3_487",que="_emptyTitle_6ytw3_501",Kue="_emptyText_6ytw3_509",Que="_addPartnerCard_6ytw3_519",Yue="_contextMenuBackdrop_6ytw3_559",Xue="_contextMenu_6ytw3_559",Jue="_contextMenuItem_6ytw3_601",Ke={overview:fue,contextBox:gue,contextKicker:xue,contextTitle:vue,contextText:yue,contextDetails:bue,detailItem:_ue,detailLabel:wue,detailValue:jue,kpiGrid:Sue,kpiCard:Nue,kpiLabel:kue,kpiValue:Tue,columnsWrapper:Cue,column:Eue,columnDropTarget:Aue,columnHeader:Iue,columnKicker:Rue,columnTitle:Pue,columnCount:Lue,columnBody:Due,memberCard:Mue,memberTop:Fue,memberName:Bue,memberMeta:$ue,memberBadge:Oue,memberBottom:Vue,memberGuild:Uue,memberServer:zue,memberActions:Hue,emptyList:Gue,emptyWrap:Wue,emptyTitle:que,emptyText:Kue,addPartnerCard:Que,contextMenuBackdrop:Yue,contextMenu:Xue,contextMenuItem:Jue};function Zue({members:t,scenario:e,setupState:s,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var H,K,q;const l=(H=e==null?void 0:e.decisions)!=null?H:{},d=(K=e==null?void 0:e.targetGuildAssignments)!=null?K:{},u=s.partnerGuilds.length>0?s.partnerGuilds.map((G,re)=>({id:G.id,label:G.name||`Partner ${re+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(G=>l[G.id]==="take"&&d[G.id]==="main"),p=t.filter(G=>l[G.id]==="bench"),g=u.reduce((G,re)=>(G[re.id]=t.filter(se=>{const U=d[se.id];return l[se.id]==="take"&&(U===`partner:${re.id}`||U==="partner")}),G),{}),y=t.filter(G=>!h.includes(G)&&!p.includes(G)&&!Object.values(g).some(re=>re.includes(G))),[b,S]=ee.useState(null),[N,T]=ee.useState(null),M=ee.useRef(null),L=t.length,k=h.length,v=p.length,_=Object.values(g).reduce((G,re)=>G+re.length,0),P=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-k-_):0,E=ee.useCallback((G,re,se)=>{G&&(re==="main"?(r(G,"take"),i(G,"main")):re==="partner"?(r(G,"take"),i(G,se?`partner:${se}`:"partner")):re==="unassigned"?(r(G,"undecided"),i(G,"none")):(r(G,"bench"),i(G,"none")),T(null))},[r,i]),w=ee.useCallback((G,re)=>se=>{se.preventDefault();const U=se.dataTransfer.getData("text/plain");U&&E(U,G,re),S(null)},[E]),A=ee.useCallback(G=>re=>{re.preventDefault(),S(G)},[]),B=ee.useCallback(()=>S(null),[]),D=ee.useCallback((G,re)=>{T({memberId:G,...re})},[]),$=ee.useCallback(()=>{M.current!==null&&(window.clearTimeout(M.current),M.current=null)},[]),F=ee.useCallback((G,re,se)=>{$(),M.current=window.setTimeout(()=>{D(G,{x:re,y:se})},550)},[$,D]);if(ee.useEffect(()=>()=>$(),[$]),!e)return n.jsxs("div",{className:Ke.emptyWrap,children:[n.jsx("h3",{className:Ke.emptyTitle,children:"Overview"}),n.jsx("p",{className:Ke.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return n.jsxs("div",{className:Ke.emptyWrap,children:[n.jsx("h3",{className:Ke.emptyTitle,children:"No members loaded"}),n.jsx("p",{className:Ke.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const z=(G,re,se,U,Y)=>n.jsxs("div",{className:`${Ke.column} ${b===G?Ke.columnDropTarget:""}`,onDragOver:A(G),onDragEnter:A(G),onDragLeave:B,onDrop:w(G,Y),children:[n.jsxs("div",{className:Ke.columnHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ke.columnKicker,children:se}),n.jsx("h4",{className:Ke.columnTitle,children:re})]}),n.jsx("span",{className:Ke.columnCount,children:U.length})]}),n.jsx("div",{className:Ke.columnBody,children:U.length?U.map(ie=>{var X,pe,ge,he;return n.jsxs("div",{className:Ke.memberCard,draggable:!0,onDragStart:ve=>ve.dataTransfer.setData("text/plain",ie.id),onContextMenu:ve=>{ve.preventDefault(),D(ie.id,{x:ve.clientX,y:ve.clientY})},onTouchStart:ve=>{const _e=ve.touches[0];_e&&F(ie.id,_e.clientX,_e.clientY)},onTouchEnd:$,onTouchCancel:$,children:[n.jsxs("div",{className:Ke.memberTop,children:[n.jsxs("div",{children:[n.jsx("div",{className:Ke.memberName,children:ie.name}),n.jsxs("p",{className:Ke.memberMeta,children:[(pe=(X=ie.className)!=null?X:ie.class)!=null?pe:"Unknown","  ",(ge=ie.role)!=null?ge:"Unknown"]})]}),n.jsxs("span",{className:Ke.memberBadge,children:["Lvl ",(he=ie.level)!=null?he:"?"]})]}),n.jsxs("div",{className:Ke.memberBottom,children:[n.jsxs("span",{className:Ke.memberGuild,children:[ie.guildName," ",n.jsxs("span",{className:Ke.memberServer,children:["(",ie.server||"Server n/a",")"]})]}),n.jsxs("div",{className:Ke.memberActions,children:[n.jsx("button",{type:"button",onClick:()=>E(ie.id,"main"),children:"Main"}),n.jsx("button",{type:"button",onClick:()=>E(ie.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",onClick:()=>E(ie.id,"partner"),children:"Partner"})]})]})]},ie.id)}):n.jsx("div",{className:Ke.emptyList,children:"No players in this list yet."})})]});return n.jsxs("div",{className:Ke.overview,children:[n.jsxs("div",{className:Ke.contextBox,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ke.contextKicker,children:"Setup"}),n.jsx("h3",{className:Ke.contextTitle,children:"Fusion Overview"}),n.jsx("p",{className:Ke.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),n.jsxs("div",{className:Ke.contextDetails,children:[n.jsxs("div",{className:Ke.detailItem,children:[n.jsx("span",{className:Ke.detailLabel,children:"Base Guild"}),n.jsx("strong",{className:Ke.detailValue,children:((q=s.baseGuild)==null?void 0:q.name)||"Unbenannt"})]}),n.jsxs("div",{className:Ke.detailItem,children:[n.jsx("span",{className:Ke.detailLabel,children:"Partner Guilds"}),n.jsx("strong",{className:Ke.detailValue,children:s.partnerGuilds.length})]}),n.jsxs("div",{className:Ke.detailItem,children:[n.jsx("span",{className:Ke.detailLabel,children:"Max Slots"}),n.jsx("strong",{className:Ke.detailValue,children:e.maxSlots})]})]})]}),n.jsxs("div",{className:Ke.kpiGrid,children:[n.jsxs("div",{className:Ke.kpiCard,children:[n.jsx("span",{className:Ke.kpiLabel,children:"Total players"}),n.jsx("strong",{className:Ke.kpiValue,children:L})]}),n.jsxs("div",{className:Ke.kpiCard,children:[n.jsx("span",{className:Ke.kpiLabel,children:"Main guild"}),n.jsx("strong",{className:Ke.kpiValue,children:k})]}),n.jsxs("div",{className:Ke.kpiCard,children:[n.jsx("span",{className:Ke.kpiLabel,children:"Watchlist"}),n.jsx("strong",{className:Ke.kpiValue,children:v})]}),n.jsxs("div",{className:Ke.kpiCard,children:[n.jsx("span",{className:Ke.kpiLabel,children:"Partner guild"}),n.jsx("strong",{className:Ke.kpiValue,children:_})]}),n.jsxs("div",{className:Ke.kpiCard,children:[n.jsx("span",{className:Ke.kpiLabel,children:"Free slots"}),n.jsx("strong",{className:Ke.kpiValue,children:P})]})]}),n.jsxs("div",{className:Ke.columnsWrapper,children:[z("unassigned","Unassigned","Noch ohne Planung",y),z("main","Main guild","Take & Assign main",h),z("watch","Watchlist","Bench for review",p),u.map(G=>{var re;return z("partner",G.label,"Take & Assign partner",(re=g[G.id])!=null?re:[],G.id)}),n.jsx("button",{type:"button",className:Ke.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Ke.contextMenuBackdrop,onClick:()=>T(null)}),n.jsxs("div",{className:Ke.contextMenu,style:{top:N.y,left:N.x},children:[n.jsx("button",{type:"button",className:Ke.contextMenuItem,onClick:()=>E(N.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Ke.contextMenuItem,onClick:()=>E(N.memberId,"watch"),children:"Move to Watchlist"}),u.map(G=>n.jsxs("button",{type:"button",className:Ke.contextMenuItem,onClick:()=>E(N.memberId,"partner",G.id),children:["Move to ",G.label]},G.id))]})]}):null]})}const ehe="_scenariosTab_3v4iw_1",the="_scenariosHeader_3v4iw_13",she="_scenariosTitle_3v4iw_35",nhe="_scenariosText_3v4iw_45",rhe="_scenarioInfo_3v4iw_57",ihe="_headerActions_3v4iw_71",ahe="_createButton_3v4iw_81",ohe="_scenarioList_3v4iw_115",lhe="_scenarioCard_3v4iw_127",che="_scenarioCardActive_3v4iw_147",dhe="_scenarioCardTop_3v4iw_157",uhe="_cardKicker_3v4iw_169",hhe="_cardTitle_3v4iw_185",phe="_cardText_3v4iw_197",mhe="_scenarioActiveBadge_3v4iw_209",fhe="_scenarioMeta_3v4iw_231",ghe="_scenarioMetaLabel_3v4iw_243",xhe="_scenarioMetaValue_3v4iw_259",vhe="_scenarioStats_3v4iw_269",yhe="_scenarioStatItem_3v4iw_281",bhe="_scenarioStatLabel_3v4iw_295",_he="_scenarioStatValue_3v4iw_311",whe="_scenarioActions_3v4iw_321",jhe="_scenarioActionButton_3v4iw_337",She="_scenarioActionActive_3v4iw_367",Nhe="_scenarioActionGroup_3v4iw_377",khe="_secondaryActionButton_3v4iw_389",The="_deleteActionButton_3v4iw_391",Che="_deleteActionDisabled_3v4iw_443",_t={scenariosTab:ehe,scenariosHeader:the,scenariosTitle:she,scenariosText:nhe,scenarioInfo:rhe,headerActions:ihe,createButton:ahe,scenarioList:ohe,scenarioCard:lhe,scenarioCardActive:che,scenarioCardTop:dhe,cardKicker:uhe,cardTitle:hhe,cardText:phe,scenarioActiveBadge:mhe,scenarioMeta:fhe,scenarioMetaLabel:ghe,scenarioMetaValue:xhe,scenarioStats:vhe,scenarioStatItem:yhe,scenarioStatLabel:bhe,scenarioStatValue:_he,scenarioActions:whe,scenarioActionButton:jhe,scenarioActionActive:She,scenarioActionGroup:Nhe,secondaryActionButton:khe,deleteActionButton:The,deleteActionDisabled:Che};function Ehe({scenarios:t,activeScenarioId:e,onSetActiveScenario:s,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:l}){const d=ee.useCallback(p=>{const g=Object.values(p.decisions),y=g.filter(T=>T==="take").length,b=g.filter(T=>T==="bench").length,S=g.filter(T=>T==="drop").length,N=Math.max(0,p.maxSlots-p.reservedSlots-y);return{selected:y,bench:b,drop:S,free:N}},[]),u=p=>{const g=window.prompt("Neuer Szenario-Name",p.name);g!==null&&a(p.id,g)},h=p=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&l(p.id)};return n.jsxs("div",{className:_t.scenariosTab,children:[n.jsxs("div",{className:_t.scenariosHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:_t.cardKicker,children:"Scenarios"}),n.jsx("h3",{className:_t.scenariosTitle,children:"Fusion Plans verwalten"}),n.jsx("p",{className:_t.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),n.jsx("div",{className:_t.headerActions,children:n.jsx("button",{type:"button",className:_t.createButton,onClick:r,children:"Neues Szenario"})})]}),n.jsx("p",{className:_t.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),n.jsx("div",{className:_t.scenarioList,children:t.map(p=>{const g=d(p),y=p.id===e,b=t.length<=1;return n.jsxs("article",{className:`${_t.scenarioCard} ${y?_t.scenarioCardActive:""}`,children:[n.jsxs("div",{className:_t.scenarioCardTop,children:[n.jsxs("div",{children:[n.jsx("p",{className:_t.cardKicker,children:"Scenario"}),n.jsx("h3",{className:_t.cardTitle,children:p.name}),p.description?n.jsx("p",{className:_t.cardText,children:p.description}):null]}),y?n.jsx("span",{className:_t.scenarioActiveBadge,children:"Active"}):null]}),n.jsxs("div",{className:_t.scenarioMeta,children:[n.jsxs("div",{children:[n.jsx("span",{className:_t.scenarioMetaLabel,children:"Max slots"}),n.jsx("span",{className:_t.scenarioMetaValue,children:p.maxSlots})]}),n.jsxs("div",{children:[n.jsx("span",{className:_t.scenarioMetaLabel,children:"Reserved"}),n.jsx("span",{className:_t.scenarioMetaValue,children:p.reservedSlots})]})]}),n.jsxs("div",{className:_t.scenarioStats,children:[n.jsxs("div",{className:_t.scenarioStatItem,children:[n.jsx("span",{className:_t.scenarioStatLabel,children:"Selected"}),n.jsx("strong",{className:_t.scenarioStatValue,children:g.selected})]}),n.jsxs("div",{className:_t.scenarioStatItem,children:[n.jsx("span",{className:_t.scenarioStatLabel,children:"Free"}),n.jsx("strong",{className:_t.scenarioStatValue,children:g.free})]}),n.jsxs("div",{className:_t.scenarioStatItem,children:[n.jsx("span",{className:_t.scenarioStatLabel,children:"Bench"}),n.jsx("strong",{className:_t.scenarioStatValue,children:g.bench})]}),n.jsxs("div",{className:_t.scenarioStatItem,children:[n.jsx("span",{className:_t.scenarioStatLabel,children:"Drop"}),n.jsx("strong",{className:_t.scenarioStatValue,children:g.drop})]})]}),n.jsxs("div",{className:_t.scenarioActions,children:[n.jsx("button",{type:"button",className:`${_t.scenarioActionButton} ${y?_t.scenarioActionActive:""}`,onClick:()=>s(p.id),children:"Set active"}),n.jsxs("div",{className:_t.scenarioActionGroup,children:[n.jsx("button",{type:"button",className:_t.secondaryActionButton,onClick:()=>i(p.id),children:"Duplicate"}),n.jsx("button",{type:"button",className:_t.secondaryActionButton,onClick:()=>u(p),children:"Rename"}),n.jsx("button",{type:"button",className:`${_t.deleteActionButton} ${b?_t.deleteActionDisabled:""}`,onClick:()=>h(p),disabled:b,children:"Delete"})]})]})]},p.id)})})]})}const Ahe="_resultWrap_179wi_1",Ihe="_emptyState_179wi_13",Rhe="_emptyTitle_179wi_35",Phe="_emptyText_179wi_43",Lhe="_resultHeader_179wi_55",Dhe="_resultKicker_179wi_79",Mhe="_resultTitle_179wi_95",Fhe="_resultText_179wi_107",Bhe="_emptyNote_179wi_119",$he="_setupSummary_179wi_131",Ohe="_setupSummaryTitle_179wi_149",Vhe="_setupSummaryRow_179wi_159",Uhe="_setupSummaryLabel_179wi_171",zhe="_setupSummaryValue_179wi_185",Hhe="_setupSummaryMeta_179wi_195",Ghe="_setupSummaryTags_179wi_205",Whe="_setupSummaryTag_179wi_205",qhe="_classDistribution_179wi_241",Khe="_resultStats_179wi_253",Qhe="_resultStatBadge_179wi_267",Yhe="_resultStatBadgeMuted_179wi_269",Xhe="_group_179wi_307",Jhe="_groupHeader_179wi_327",Zhe="_groupTitle_179wi_341",epe="_groupHint_179wi_351",tpe="_groupBadge_179wi_361",spe="_badgeSuccess_179wi_387",npe="_badgeMuted_179wi_399",rpe="_badgeDanger_179wi_409",ipe="_groupEmpty_179wi_421",ape="_groupTable_179wi_437",ope="_groupRow_179wi_455",lpe="_groupHead_179wi_327",cpe="_groupCell_179wi_491",dpe="_memberName_179wi_501",upe="_memberBadge_179wi_509",Ye={resultWrap:Ahe,emptyState:Ihe,emptyTitle:Rhe,emptyText:Phe,resultHeader:Lhe,resultKicker:Dhe,resultTitle:Mhe,resultText:Fhe,emptyNote:Bhe,setupSummary:$he,setupSummaryTitle:Ohe,setupSummaryRow:Vhe,setupSummaryLabel:Uhe,setupSummaryValue:zhe,setupSummaryMeta:Hhe,setupSummaryTags:Ghe,setupSummaryTag:Whe,classDistribution:qhe,resultStats:Khe,resultStatBadge:Qhe,resultStatBadgeMuted:Yhe,group:Xhe,groupHeader:Jhe,groupTitle:Zhe,groupHint:epe,groupBadge:tpe,badgeSuccess:spe,badgeMuted:npe,badgeDanger:rpe,groupEmpty:ipe,groupTable:ape,groupRow:ope,groupHead:lpe,groupCell:cpe,memberName:dpe,memberBadge:upe};function hpe({members:t,scenario:e,setupState:s}){var S;if(!e)return n.jsxs("div",{className:Ye.emptyState,children:[n.jsx("h3",{className:Ye.emptyTitle,children:"No scenario selected"}),n.jsx("p",{className:Ye.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return n.jsxs("div",{className:Ye.emptyState,children:[n.jsx("h3",{className:Ye.emptyTitle,children:"No members available"}),n.jsx("p",{className:Ye.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:l}=ee.useMemo(()=>{const N=[],T=[],M=[],L=[];return t.forEach(k=>{var _;const v=(_=e.decisions[k.id])!=null?_:"undecided";v==="take"?N.push(k):v==="bench"?T.push(k):v==="drop"?M.push(k):L.push(k)}),{takeMembers:N,benchMembers:T,dropMembers:M,undecidedMembers:L}},[t,e.decisions]),d=r.length,u=i.length,h=a.length,p=Math.max(0,e.maxSlots-d),g=e.maxSlots?Math.round(d/e.maxSlots*100):0,y=ee.useMemo(()=>{const N=r.reduce((M,L)=>{var v,_;const k=(v=L.className)!=null?v:L.class;return k&&(M[k]=((_=M[k])!=null?_:0)+1),M},{});return Object.entries(N).map(([M,L])=>`${M}: ${L}`).join(" | ")},[r]),b=(N,T,M,L)=>n.jsxs("div",{className:Ye.group,children:[n.jsxs("div",{className:Ye.groupHeader,children:[n.jsxs("div",{children:[n.jsx("h4",{className:Ye.groupTitle,children:N}),n.jsx("span",{className:Ye.groupHint,children:T})]}),n.jsx("span",{className:`${Ye.groupBadge} ${L}`,children:M.length})]}),M.length===0?n.jsx("div",{className:Ye.groupEmpty,children:"No players in this group."}):n.jsxs("div",{className:Ye.groupTable,role:"table",children:[n.jsxs("div",{className:`${Ye.groupRow} ${Ye.groupHead}`,role:"row",children:[n.jsx("div",{className:Ye.groupCell,role:"columnheader",children:"Name"}),n.jsx("div",{className:Ye.groupCell,role:"columnheader",children:"Level"}),n.jsx("div",{className:Ye.groupCell,role:"columnheader",children:"Guild"}),n.jsx("div",{className:Ye.groupCell,role:"columnheader",children:"Class"})]}),M.map(k=>{var v,_;return n.jsxs("div",{className:Ye.groupRow,role:"row",children:[n.jsx("div",{className:Ye.groupCell,role:"cell",children:n.jsx("span",{className:Ye.memberName,children:k.name})}),n.jsx("div",{className:Ye.groupCell,role:"cell",children:n.jsxs("span",{className:Ye.memberBadge,children:["Lvl ",k.level]})}),n.jsx("div",{className:Ye.groupCell,role:"cell",children:k.guildName}),n.jsx("div",{className:Ye.groupCell,role:"cell",children:(_=(v=k.className)!=null?v:k.class)!=null?_:"-"})]},k.id)})]})]});return n.jsxs("div",{className:Ye.resultWrap,children:[n.jsxs("div",{className:Ye.resultHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ye.resultKicker,children:"Final Plan"}),n.jsx("h3",{className:Ye.resultTitle,children:e.name}),n.jsx("p",{className:Ye.resultText,children:(S=e.description)!=null?S:"Zusammenfassung des aktuellen Plans."}),r.length===0?n.jsx("p",{className:Ye.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,y?n.jsxs("p",{className:Ye.classDistribution,children:["Class distribution: ",y]}):null,n.jsxs("div",{className:Ye.setupSummary,children:[n.jsx("div",{className:Ye.setupSummaryTitle,children:"Fusion plan between"}),s.baseGuild?n.jsxs("div",{className:Ye.setupSummaryRow,children:[n.jsx("span",{className:Ye.setupSummaryLabel,children:"Base"}),n.jsxs("span",{className:Ye.setupSummaryValue,children:[s.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:Ye.setupSummaryMeta,children:["(",s.baseGuild.server||"Server n/a",")"]})]})]}):n.jsxs("div",{className:Ye.setupSummaryRow,children:[n.jsx("span",{className:Ye.setupSummaryLabel,children:"Base"}),n.jsx("span",{className:Ye.setupSummaryMeta,children:"No base guild selected."})]}),n.jsxs("div",{className:Ye.setupSummaryRow,children:[n.jsx("span",{className:Ye.setupSummaryLabel,children:"Partners"}),s.partnerGuilds.length?n.jsx("div",{className:Ye.setupSummaryTags,children:s.partnerGuilds.map(N=>n.jsxs("span",{className:Ye.setupSummaryTag,children:[N.name||"Unbenannt"," ",n.jsxs("span",{className:Ye.setupSummaryMeta,children:["(",N.server||"Server n/a",")"]})]},N.id))}):n.jsx("span",{className:Ye.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),n.jsxs("div",{className:Ye.resultStats,children:[n.jsxs("span",{className:Ye.resultStatBadge,children:["Members selected: ",d," / ",e.maxSlots]}),n.jsxs("span",{className:Ye.resultStatBadge,children:["Bench: ",u]}),n.jsxs("span",{className:Ye.resultStatBadge,children:["Drop: ",h]}),n.jsxs("span",{className:Ye.resultStatBadge,children:["Free slots: ",p]}),n.jsxs("span",{className:Ye.resultStatBadge,children:["Utilization: ",g,"%"]}),l.length>0?n.jsxs("span",{className:Ye.resultStatBadgeMuted,children:["Undecided: ",l.length]}):null]})]}),b("Final roster (selected)","Take",r,Ye.badgeSuccess),b("Bench (waiting list)","Bench",i,Ye.badgeMuted),b("Not included","Drop",a,Ye.badgeDanger)]})}const Mm=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],ON=t=>t.reduce((e,s)=>(e[s.id]="undecided",e),{}),VN=t=>t.reduce((e,s)=>(e[s.id]="none",e),{}),ppe=(t,e,s)=>{var r,i,a,l,d,u,h,p,g,y,b,S,N,T,M,L;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(l=t.role)!=null?l:"Unknown",level:(d=t.level)!=null?d:void 0,guildName:e,server:s,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(p=t.conBase)!=null?p:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(y=t.totalStats)!=null?y:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(S=t.mine)!=null?S:void 0,attrTotal:(N=t.attrTotal)!=null?N:void 0,conTotal:(T=t.conTotal)!=null?T:void 0,lastScan:(M=t.lastScan)!=null?M:void 0,lastActivity:(L=t.lastActivity)!=null?L:void 0}}},mpe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const s=(i=t.name)==null?void 0:i.trim();return s||null},UN=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,zN=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],fpe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function gpe(){var F;const[t,e]=ee.useState("setup"),[s,r]=ee.useState(Mm),[i,a]=ee.useState(!1),[l,d]=ee.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=ee.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:ON(Mm),targetGuildAssignments:VN(Mm),isDefault:!0}]),[p,g]=ee.useState("plan-a"),y=ee.useMemo(()=>{var z,H;return(H=(z=u.find(K=>K.id===p))!=null?z:u[0])!=null?H:null},[p,u]),b=ee.useMemo(()=>{var q,G;const z=l.baseGuild,H=(q=z==null?void 0:z.name)==null?void 0:q.trim(),K=(G=z==null?void 0:z.server)==null?void 0:G.trim();return!!(H&&K)},[l.baseGuild]),S=ee.useMemo(()=>s.length>0,[s.length]),N=ee.useMemo(()=>u.length>0,[u.length]),T=ee.useMemo(()=>{const z=[];return b||z.push("Setup incomplete - no base guild selected."),b&&!S&&z.push("No members loaded yet. Check scans or setup."),N||z.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),z},[b,S,N]),M=(z,H)=>{h(K=>K.map(q=>q.id===p?{...q,decisions:{...q.decisions,[z]:H}}:q))},L=(z,H)=>{h(K=>K.map(q=>{var G;return q.id===p?{...q,targetGuildAssignments:{...(G=q.targetGuildAssignments)!=null?G:{},[z]:H}}:q}))},k=z=>{const H=Number(z)||0;h(K=>K.map(q=>q.id===p?{...q,maxSlots:Math.max(0,H)}:q))},v=()=>{h(z=>{const H={id:UN(),name:`Plan ${z.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:ON(s),targetGuildAssignments:VN(s)};return g(H.id),[...z,H]})},_=z=>{h(H=>{var G;const K=H.find(re=>re.id===z);if(!K)return H;const q={...K,id:UN(),name:`${K.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...K.decisions},targetGuildAssignments:{...(G=K.targetGuildAssignments)!=null?G:{}}};return g(q.id),[...H,q]})},P=(z,H)=>{const K=H.trim();K&&h(q=>q.map(G=>G.id===z?{...G,name:K}:G))},E=z=>{h(H=>{if(H.length<=1)return H;const K=H.filter(q=>q.id!==z);return K.length?(p===z&&g(K[0].id),K):H})};ee.useEffect(()=>{if(l.mode!=="scan"){a(!1),r(Mm);return}const z=[l.baseGuild,...l.partnerGuilds].filter(Boolean);if(z.length===0){a(!1),r([]);return}let H=!1;async function K(){var q,G,re,se,U,Y,ie,X,pe,ge;a(!0);try{const he=[];for(const ve of z){const _e=mpe(ve);if(!_e)continue;const ce=Gt(dt,`guilds/${_e}/latest/latest`),Ce=await vn(ce),ye=Ce.exists()?Ce.data():null,Ze=(U=(se=(G=(q=ve.name)==null?void 0:q.trim())!=null?G:ye==null?void 0:ye.name)!=null?se:(re=ye==null?void 0:ye.values)==null?void 0:re.Name)!=null?U:_e,it=(ge=(pe=(ie=(Y=ve.server)==null?void 0:Y.trim())!=null?ie:ye==null?void 0:ye.server)!=null?pe:(X=ye==null?void 0:ye.values)==null?void 0:X.Server)!=null?ge:null,Rt=Gt(dt,`guilds/${_e}/snapshots/members_summary`),rs=await vn(Rt);if(!rs.exists())continue;const cs=rs.data();(Array.isArray(cs.members)?cs.members:[]).forEach(ws=>{he.push(ppe(ws,Ze,it))})}H||r(he)}catch(he){console.error("[FusionPlanner] Failed to load members",he),H||r([])}finally{H||a(!1)}}return r([]),K(),()=>{H=!0}},[l.baseGuild,l.partnerGuilds,l.mode]),ee.useEffect(()=>{i||h(z=>z.map(H=>{var re;const K=new Set(s.map(se=>se.id)),q={...H.decisions},G={...(re=H.targetGuildAssignments)!=null?re:{}};return s.forEach(se=>{q[se.id]||(q[se.id]="undecided"),G[se.id]||(G[se.id]="none")}),Object.keys(q).forEach(se=>{K.has(se)||delete q[se]}),Object.keys(G).forEach(se=>{K.has(se)||delete G[se]}),{...H,decisions:q,targetGuildAssignments:G}}))},[s,i]);const w=z=>{d(H=>({...H,mode:z}))},A=z=>{d(H=>{var q,G,re;const K=(q=H.baseGuild)!=null?q:{id:"base-1",kind:"base",name:"",server:""};return{...H,baseGuild:{...K,...z.id?{id:z.id}:{},name:(G=z.name)!=null?G:K.name,server:(re=z.server)!=null?re:K.server}}})},B=z=>{var G;if(!z.name.trim()||!z.server.trim())return;const H=z.name.trim(),K=z.server.trim(),q=(G=z.id)==null?void 0:G.trim();d(re=>({...re,partnerGuilds:[...re.partnerGuilds,{id:q&&!q.startsWith("partner-")?q:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:H,server:K,kind:"partner"}]}))},D=z=>{d(H=>({...H,partnerGuilds:H.partnerGuilds.filter(K=>K.id!==z)}))},$=()=>{switch(t){case"setup":return n.jsx(vde,{setupState:l,onChangeMode:w,onChangeBaseGuild:A,onAddPartnerGuild:B,onRemovePartnerGuild:D});case"members":return n.jsx(mue,{members:s,scenario:y,onChangeScenarioDecision:M,onChangeScenarioTargetGuild:L,onChangeScenarioMaxSlots:k,setupState:l});case"overview":return n.jsx(Zue,{members:s,scenario:y,setupState:l,onChangeScenarioDecision:M,onChangeScenarioTargetGuild:L,onAddPartnerGuild:z=>B({name:z,server:"tbd"})});case"scenarios":return n.jsx(Ehe,{scenarios:u,activeScenarioId:p,onSetActiveScenario:g,onCreateScenario:v,onDuplicateScenario:_,onRenameScenario:P,onDeleteScenario:E});case"result":return n.jsx(hpe,{members:s,scenario:y,setupState:l});default:return null}};return n.jsx(wt,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:n.jsxs("div",{className:Xe.page,children:[n.jsxs("header",{className:Xe.header,children:[n.jsxs("div",{className:Xe.headerLeading,children:[n.jsx(qt,{to:"/guild-hub",className:Xe.backLink,children:"Back to Guild Hub"}),n.jsxs("div",{className:Xe.headerStack,children:[n.jsx("p",{className:Xe.kicker,children:"Guild Hub"}),n.jsx("h1",{className:Xe.title,children:"Fusion Planner"}),n.jsx("p",{className:Xe.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),n.jsxs("div",{className:Xe.headerActions,children:[n.jsx("button",{type:"button",className:Xe.primaryAction,children:"Neues Setup"}),n.jsx("button",{type:"button",className:Xe.secondaryAction,children:"Checkliste"})]})]}),T.length?n.jsx("div",{className:Xe.plannerNotice,role:"status","aria-live":"polite",children:T.map(z=>n.jsxs("div",{className:`${Xe.noticeItem} ${z.toLowerCase().includes("no base guild")?Xe.noticeWarning:""}`,children:[n.jsx("span",{className:Xe.noticeDot,"aria-hidden":!0}),n.jsx("span",{children:z})]},z))}):null,n.jsxs("section",{className:Xe.tabSection,"aria-label":"Fusion Planner Tabs",children:[n.jsx("div",{className:Xe.tabBar,children:zN.map(z=>{const H=z.key===t;return n.jsxs("button",{type:"button",className:`${Xe.tabItem} ${H?Xe.tabItemActive:""}`,onClick:()=>e(z.key),"aria-pressed":H,children:[n.jsx("span",{className:Xe.tabLabel,children:z.label}),n.jsx("span",{className:Xe.tabHelper,children:z.helper})]},z.key)})}),n.jsxs("div",{className:Xe.tabPanel,children:[n.jsx("span",{className:Xe.tabBadge,children:(F=zN.find(z=>z.key===t))==null?void 0:F.label}),$()]})]}),n.jsxs("section",{className:Xe.infoStrip,children:[n.jsxs("div",{className:Xe.infoBlock,children:[n.jsx("span",{className:Xe.infoLabel,children:"Status"}),n.jsx("strong",{children:"Entwurf"}),n.jsx("p",{className:Xe.infoHint,children:"Bereit fuer weitere Eingaben."})]}),n.jsxs("div",{className:Xe.infoBlock,children:[n.jsx("span",{className:Xe.infoLabel,children:"Slots geplant"}),n.jsx("strong",{children:"0 / 40"}),n.jsx("p",{className:Xe.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),n.jsxs("div",{className:Xe.infoBlock,children:[n.jsx("span",{className:Xe.infoLabel,children:"Szenarien"}),n.jsx("strong",{children:"3"}),n.jsx("p",{className:Xe.infoHint,children:"Baseline, Optimistic, Risiko."})]}),n.jsxs("div",{className:Xe.infoBlock,children:[n.jsx("span",{className:Xe.infoLabel,children:"Letztes Update"}),n.jsx("strong",{children:"vor wenigen Minuten"}),n.jsx("p",{className:Xe.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),n.jsx("section",{className:Xe.stageGrid,children:fpe.map(z=>n.jsxs("article",{className:Xe.panel,children:[n.jsxs("div",{className:Xe.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Xe.panelKicker,children:z.step}),n.jsx("h2",{className:Xe.panelTitle,children:z.title}),n.jsx("p",{className:Xe.panelLead,children:z.description})]}),z.badge?n.jsx("span",{className:Xe.badge,children:z.badge}):null]}),n.jsx("div",{className:Xe.panelBody,children:n.jsx("div",{className:Xe.placeholderGrid,children:z.placeholders.map(H=>n.jsxs("div",{className:Xe.placeholderCard,children:[n.jsx("div",{className:Xe.placeholderTitle,children:H}),n.jsx("p",{className:Xe.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},H))})})]},z.key))}),n.jsx("section",{className:Xe.helperSection,children:n.jsxs("div",{className:Xe.helperCard,children:[n.jsxs("div",{children:[n.jsx("p",{className:Xe.helperKicker,children:"Result"}),n.jsx("h3",{className:Xe.helperTitle,children:"Finaler Merge-Plan"}),n.jsx("p",{className:Xe.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),n.jsxs("div",{className:Xe.helperActions,children:[n.jsx("button",{type:"button",className:Xe.secondaryAction,children:"Teilen"}),n.jsx("button",{type:"button",className:Xe.primaryAction,children:"Review starten"})]})]})})]})})}const k0=["EU-01","EU-02","US-01","US-02","ASIA-01"],Xu=new Intl.NumberFormat("de-DE");function xpe(){const t=pd("(min-width: 768px)"),[e,s]=ee.useState("all"),[r,i]=ee.useState(null),[a,l]=ee.useState(null),[d,u]=ee.useState(null),[h,p]=ee.useState(null),g=[r,a].filter(Boolean).length,y=ee.useMemo(()=>{const D=[d,h].filter(Boolean);if(!D.length)return 0;const $=D.reduce((F,z)=>{var H;return F+((H=z.members)!=null?H:0)},0);return Math.round($/D.length)},[d,h]),[b,S]=ee.useState(null),[N,T]=ee.useState(!1),M=ee.useRef(null);md(M,N&&!t),ee.useEffect(()=>{t&&T(!1)},[t]),ee.useEffect(()=>{if(!b)return;const D=F=>{const z=F.target;z&&(z.closest(`.${ae.freshnessBadge}`)||z.closest(`.${ae.freshnessPopover}`)||S(null))},$=F=>{F.key==="Escape"&&S(null)};return document.addEventListener("pointerdown",D),document.addEventListener("keydown",$),()=>{document.removeEventListener("pointerdown",D),document.removeEventListener("keydown",$)}},[b]);const L=ee.useMemo(()=>d?yh(d.nextUpdateAt,Date.now()):"",[d]),k=ee.useMemo(()=>h?yh(h.nextUpdateAt,Date.now()):"",[h]),v=()=>T(!0),_=()=>T(!1),P=D=>{s(D)},E=(D,$)=>{D==="guildA"?(i($.id),u($)):(l($.id),p($))},w=D=>{D==="guildA"?(i(null),u(null)):(l(null),p(null))},A=D=>{S($=>$===D?null:D)},B=d&&h;return n.jsxs(wt,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[n.jsxs("div",{className:ae.page,children:[n.jsxs("header",{className:ae.header,children:[n.jsxs("div",{className:ae.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Guild Hub"}),n.jsx("h1",{className:ae.title,children:"Gilden vergleichen"}),n.jsx("p",{className:ae.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),n.jsx("div",{className:ae.headerActions,children:!t&&n.jsx("button",{type:"button",className:ae.secondaryAction,onClick:v,children:"Filter"})})]}),n.jsxs("div",{className:ae.infoStrip,children:[n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Pool"}),n.jsxs("strong",{children:[Xu.format(g)," Gilden"]})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Durchschnitt Mitglieder"}),n.jsx("strong",{children:Xu.format(y)})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ae.inlineFilters,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:D=>P(D.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(D=>n.jsx("option",{value:D,children:D},D))]})]})})]}),n.jsxs("div",{className:ae.layout,children:[n.jsxs("section",{className:ae.selectionColumn,children:[n.jsx(HN,{title:"Gilde A",slot:"guildA",selectedGuild:d,excludeId:a,onSelect:E,onClear:w,serverFilter:e,onServerChange:P}),n.jsx(HN,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:E,onClear:w,serverFilter:e,onServerChange:P})]}),n.jsxs("section",{className:ae.comparisonColumn,children:[n.jsxs("div",{className:ae.comparisonCard,children:[n.jsxs("div",{className:ae.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Vergleich"}),n.jsx("h2",{className:ae.sectionTitle,children:"Kennzahlen"})]}),B&&n.jsxs("span",{className:ae.diffBadge,children:["Delta Mitglieder:"," ",Xu.format(d.members-h.members)]})]}),B?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ae.metricGrid,children:[n.jsx(GN,{label:"Mitglieder",aValue:d.members,bValue:h.members}),n.jsx(GN,{label:"Durchschnittslevel",aValue:d.avgLevel,bValue:h.avgLevel,isDecimal:!0}),n.jsx(vpe,{guildA:d,guildB:h,countdownA:L,countdownB:k,activePopover:b,onToggle:A})]}),n.jsx(ype,{guildA:d,guildB:h})]}):n.jsx("div",{className:ae.emptyState,children:n.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ae.supportPanels,children:[n.jsx(bpe,{}),n.jsx(_pe,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ae.sheetOverlay} ${N?ae.sheetOpen:""}`,children:n.jsxs("div",{className:ae.sheet,role:"dialog","aria-modal":"true",ref:M,children:[n.jsxs("header",{className:ae.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ae.clearButton,onClick:_,children:"Schliessen"})]}),n.jsx("div",{className:ae.sheetBody,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:D=>P(D.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(D=>n.jsx("option",{value:D,children:D},D))]})]})})]})})]})}function HN({title:t,slot:e,selectedGuild:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=ee.useState(""),p=hd(u,300);ee.useEffect(()=>{h("")},[s,l]);const{results:g,loading:y}=wpe(p,l,r);return n.jsxs("article",{className:ae.selectionCard,children:[n.jsxs("div",{className:ae.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.slotLabel,children:t}),n.jsx("p",{className:ae.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ae.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ae.slotBody,children:[n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),k0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ae.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ae.resultList,role:"list",children:[y&&n.jsx("div",{className:ae.emptyResult,children:"Lade..."}),!y&&g.length===0&&n.jsx("div",{className:ae.emptyResult,children:"Keine Gilde gefunden."}),!y&&g.map(b=>n.jsxs("div",{className:ae.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.resultName,children:b.name}),n.jsxs("p",{className:ae.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),n.jsx("button",{type:"button",className:ae.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ae.selectedCard,children:[n.jsx("p",{className:ae.selectedName,children:s.name}),n.jsxs("p",{className:ae.selectedMeta,children:[s.server," - ",s.members," Mitglieder - Durchschnittslevel"," ",s.avgLevel.toFixed(1)]}),n.jsx("p",{className:ae.selectedTagline,children:s.tagline})]})]})]})}function GN({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):Xu.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):Xu.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:t}),n.jsxs("div",{className:ae.metricValues,children:[n.jsx("span",{"aria-label":"Gilde A",children:i(e)}),n.jsx("span",{className:ae.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Gilde B",children:i(s)})]}),n.jsx("p",{className:ae.metricDelta,children:l})]})}function vpe({guildA:t,guildB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Freshness"}),n.jsx("div",{className:ae.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ae.freshnessItem,children:[n.jsxs("button",{type:"button",className:ae.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:Gh(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ae.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ae.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Eb[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:$i(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[$i(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function ype({guildA:t,guildB:e}){const s=ee.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return n.jsxs("div",{className:ae.classCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Klassenverteilung"}),n.jsx("div",{className:ae.classGrid,children:[t,e].map(r=>n.jsxs("div",{className:ae.classColumn,children:[n.jsx("h3",{children:r.name}),n.jsx("div",{className:ae.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>n.jsxs("span",{style:{width:`${i.percent}%`},className:ae.classSlice,children:[n.jsx("small",{children:i.label}),n.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),n.jsx("ul",{className:ae.classLegend,children:s.map(r=>n.jsx("li",{children:r},r))})]})}function bpe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return n.jsxs("section",{className:ae.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ae.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function _pe(){return n.jsxs("section",{className:ae.infoCardExtended,children:[n.jsx("h3",{children:"Transfers-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ae.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),n.jsx("button",{type:"button",className:ae.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function wpe(t,e,s){const[r,i]=ee.useState([]),[a,l]=ee.useState(!1);return ee.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const p=d.toLowerCase(),g=vg(dt,"latest"),y=await pn(Vn(g,mo("nameFold"),vl(p),yl(p+""),Un(15))),b=await pn(Vn(g,jl("nameNgrams","array-contains",p),Un(15))),S=new Set,N=[],T=M=>{var $,F,z,H,K,q,G,re,se,U,Y,ie,X,pe,ge,he,ve,_e,ce,Ce,ye;const L=M.data(),v=($=M.ref.parent)==null?void 0:$.parent,_=v==null?void 0:v.parent;if((_==null?void 0:_.id)!=="guilds")return;const E=(z=(F=v==null?void 0:v.id)!=null?F:L.guildIdentifier)!=null?z:M.id;if(!E||S.has(E)||s&&E===s)return;const w=(q=(K=L.name)!=null?K:(H=L.values)==null?void 0:H.Name)!=null?q:"Unbekannte Gilde",A=(se=(re=L.server)!=null?re:(G=L.values)==null?void 0:G.Server)!=null?se:"Unknown";if(e!=="all"&&A!==e)return;const B=(pe=(X=(Y=L.memberCount)!=null?Y:(U=L.values)==null?void 0:U["Guild Member Count"])!=null?X:(ie=L.values)==null?void 0:ie.GuildMemberCount)!=null?pe:0,D=(ve=(he=L.updatedAt)!=null?he:(ge=L.values)==null?void 0:ge.UpdatedAt)!=null?ve:L.timestamp?new Date(L.timestamp*1e3).toISOString():new Date().toISOString();S.add(E),N.push({id:E,name:w,tagline:(_e=L.tagline)!=null?_e:"",server:A,members:B,avgLevel:(ye=(Ce=L.avgLevel)!=null?Ce:(ce=L.values)==null?void 0:ce.AvgLevel)!=null?ye:0,lastScanAt:D,updatedAt:D,nextUpdateAt:D,freshness:"unknown",classes:[]})};y.forEach(T),b.forEach(T),u||(N.sort((M,L)=>M.name.localeCompare(L.name)),i(N))}catch(p){console.error("[GuildHub CompareGuilds] guild search failed",p),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const jpe="_page_o27vc_1",Spe="_header_o27vc_13",Npe="_headerStack_o27vc_25",kpe="_kicker_o27vc_37",Tpe="_title_o27vc_53",Cpe="_headerActions_o27vc_65",Epe="_primaryAction_o27vc_77",Ape="_secondaryAction_o27vc_79",Ipe="_infoStrip_o27vc_109",Rpe="_infoPill_o27vc_129",Ppe="_freshnessWrapper_o27vc_163",Lpe="_freshnessBadge_o27vc_171",Dpe="_popover_o27vc_191",Mpe="_popoverLabel_o27vc_221",Fpe="_filterToolbar_o27vc_231",Bpe="_filterSheetButton_o27vc_241",$pe="_inlineFilters_o27vc_259",Ope="_searchInput_o27vc_271",Vpe="_select_o27vc_273",Upe="_chipGroup_o27vc_295",zpe="_chip_o27vc_295",Hpe="_chipActive_o27vc_325",Gpe="_levelRow_o27vc_335",Wpe="_sortControls_o27vc_363",qpe="_sortLabel_o27vc_375",Kpe="_directionButton_o27vc_385",Qpe="_listBody_o27vc_403",Ype="_tableWrapper_o27vc_415",Xpe="_table_o27vc_415",Jpe="_cardFooter_o27vc_459",Zpe="_panel_o27vc_461",eme="_formPanel_o27vc_463",tme="_statusSelect_o27vc_481",sme="_stickyColumn_o27vc_515",nme="_rowButton_o27vc_529",rme="_scanBadge_o27vc_545",ime="_cardList_o27vc_561",ame="_card_o27vc_459",ome="_cardHeader_o27vc_593",lme="_cardTitle_o27vc_605",cme="_cardMeta_o27vc_623",dme="_cardNotes_o27vc_635",ume="_emptyState_o27vc_659",hme="_sheetBackdrop_o27vc_675",pme="_sheet_o27vc_675",mme="_sheetHandle_o27vc_717",fme="_sheetBody_o27vc_733",gme="_sheetLabel_o27vc_749",xme="_sheetActions_o27vc_785",vme="_overlay_o27vc_797",yme="_drawer_o27vc_837",bme="_modal_o27vc_845",_me="_panelHeader_o27vc_853",wme="_section_o27vc_867",jme="_tagRow_o27vc_899",Sme="_historyList_o27vc_913",Nme="_panelFooter_o27vc_943",kme="_formOverlay_o27vc_955",Tme="_formGrid_o27vc_1003",Cme="_warning_o27vc_1015",Eme="_pagination_o27vc_1033",Ne={page:jpe,header:Spe,headerStack:Npe,kicker:kpe,title:Tpe,headerActions:Cpe,primaryAction:Epe,secondaryAction:Ape,infoStrip:Ipe,infoPill:Rpe,freshnessWrapper:Ppe,freshnessBadge:Lpe,popover:Dpe,popoverLabel:Mpe,filterToolbar:Fpe,filterSheetButton:Bpe,inlineFilters:$pe,searchInput:Ope,select:Vpe,chipGroup:Upe,chip:zpe,chipActive:Hpe,levelRow:Gpe,sortControls:Wpe,sortLabel:qpe,directionButton:Kpe,listBody:Qpe,tableWrapper:Ype,table:Xpe,cardFooter:Jpe,panel:Zpe,formPanel:eme,statusSelect:tme,stickyColumn:sme,rowButton:nme,scanBadge:rme,cardList:ime,card:ame,cardHeader:ome,cardTitle:lme,cardMeta:cme,cardNotes:dme,emptyState:ume,sheetBackdrop:hme,sheet:pme,sheetHandle:mme,sheetBody:fme,sheetLabel:gme,sheetActions:xme,overlay:vme,drawer:yme,modal:bme,panelHeader:_me,section:wme,tagRow:jme,historyList:Sme,panelFooter:Nme,formOverlay:kme,formGrid:Tme,warning:Cme,pagination:Eme},zf=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],Hf=["EU-01","EU-02","US-01","US-02","ASIA-01"],Ab={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},WN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},my={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},Ame=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:no(2),updatedAt:no(3),freshness:"f1",history:[{date:xr(1),message:"Interview abgeschlossen"},{date:xr(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:no(10),updatedAt:no(11),freshness:"f3",history:[{date:xr(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:no(20),updatedAt:no(5),freshness:"f4",history:[{date:xr(4),message:"Probe erfolgreich"},{date:xr(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:xr(2),updatedAt:xr(2),freshness:"f5",history:[{date:xr(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:xr(3),updatedAt:xr(1),freshness:"f6",history:[{date:xr(1),message:"Bewerbung zurueckgezogen"},{date:xr(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:no(5),updatedAt:no(5),freshness:"f2",history:[{date:xr(1),message:"Profil verifiziert"}]}];function qN(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function Ime(t,e,s){const r=s.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),l=e.status==="all"||i.status===e.status,d=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&l&&d&&u&&h})}function Rme(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"name":l=i.name.localeCompare(a.name);break;case"level":l=i.level-a.level;break;case"status":l=i.status.localeCompare(a.status);break;case"lastScan":l=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return s==="asc"?l:-l}),r}function Pme(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function af(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Lme(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function Dme(t){return t.length?t.reduce((e,s)=>e?WN[s.freshness]>WN[e.freshness]?s:e:s,null):null}function xr(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function no(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function Mme(){var H;const[t,e]=ee.useState(Ame),[s,r]=ee.useState(my),[i,a]=ee.useState(my),l=hd(s.q,300),d=ee.useMemo(()=>{const K=Ime(t,s,l);return Rme(K,s.sort,s.dir)},[t,s,l]),u=ee.useMemo(()=>Pme(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),p=pd("(min-width: 768px)"),g=pd("(min-width: 1024px)"),[y,b]=ee.useState(!1),[S,N]=ee.useState(null),T=(H=t.find(K=>K.id===S))!=null?H:null,M=ee.useRef(null);md(M,!!T&&!g);const[L,k]=ee.useState(null),[v,_]=ee.useState(!1),P=ee.useRef(null);md(P,v);const E=ee.useMemo(()=>Dme(t),[t]),w=E&&E.lastScanAt?Lme(E.lastScanAt):"unbekannt",A=K=>{const q=qN(K);r(q),a(q)},B=(K,q)=>{const G=qN({...s,[K]:q,page:K==="page"?q:1});A(G)},D=()=>{A(i),b(!1)},$=()=>{A(my),b(!1)},F=(K,q)=>{e(G=>G.map(re=>re.id===K?{...re,status:q,updatedAt:new Date().toISOString()}:re))},z=K=>{e(q=>q.some(re=>re.id===K.id)?q.map(re=>re.id===K.id?K:re):[K,...q]),_(!1)};return n.jsxs(wt,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[n.jsxs("div",{className:Ne.page,children:[n.jsxs("header",{className:Ne.header,children:[n.jsxs("div",{className:Ne.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ne.kicker,children:"Recruiting"}),n.jsx("h1",{className:Ne.title,children:"Waitlist"})]}),n.jsxs("div",{className:Ne.headerActions,children:[n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:()=>{k(null),_(!0)},children:"Neuer Eintrag"}),!p&&n.jsx("button",{type:"button",className:Ne.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),n.jsxs("div",{className:Ne.infoStrip,children:[n.jsx(fy,{label:"Neu",value:d.filter(K=>K.status==="new").length}),n.jsx(fy,{label:"In Review",value:d.filter(K=>K.status==="in_review").length}),n.jsx(fy,{label:"Zugesagt",value:d.filter(K=>K.status==="accepted").length}),E&&n.jsx(Fme,{label:Ab[E.freshness],updatedAt:E.lastScanAt,countdown:w})]})]}),n.jsx("section",{className:Ne.filterToolbar,children:p?n.jsx(Bme,{filters:s,onChange:B,onToggleClass:K=>{const q=s.classes.includes(K)?s.classes.filter(G=>G!==K):[...s.classes,K];B("classes",q)},onToggleServer:K=>{const q=s.servers.includes(K)?s.servers.filter(G=>G!==K):[...s.servers,K];B("servers",q)}}):n.jsx("button",{type:"button",className:Ne.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),n.jsx("section",{className:Ne.listBody,children:p?n.jsx($me,{items:u,sort:s.sort,dir:s.dir,onSortChange:K=>{const q=s.sort===K&&s.dir==="asc"?"desc":"asc";B("sort",K),B("dir",q)},onSelect:N,onStatusChange:F}):n.jsx(Ome,{items:u,onSelect:N,onStatusChange:F})}),n.jsx(Ume,{page:s.page,totalPages:h,onChange:K=>B("page",K)})]}),y&&n.jsx(Vme,{filters:i,onChange:a,onToggleClass:K=>a(q=>({...q,classes:q.classes.includes(K)?q.classes.filter(G=>G!==K):[...q.classes,K]})),onToggleServer:K=>a(q=>({...q,servers:q.servers.includes(K)?q.servers.filter(G=>G!==K):[...q.servers,K]})),onClose:()=>b(!1),onApply:D,onReset:$}),T&&n.jsx(rA,{ref:M,item:T,mode:g?"drawer":"modal",onClose:()=>N(null),onEdit:()=>{k(T),_(!0),N(null)}}),v&&n.jsx(iA,{ref:P,item:L,entries:t,onClose:()=>_(!1),onSubmit:z})]})}function fy({label:t,value:e}){return n.jsxs("div",{className:Ne.infoPill,children:[n.jsx("span",{children:t}),n.jsx("strong",{children:e})]})}function Fme({label:t,updatedAt:e,countdown:s}){const[r,i]=ee.useState(!1);return n.jsxs("div",{className:Ne.freshnessWrapper,children:[n.jsx("button",{type:"button",className:Ne.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&n.jsxs("div",{className:Ne.popover,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ne.popoverLabel,children:"Letzter Scan"}),n.jsx("strong",{children:af(e)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ne.popoverLabel,children:"Aktualisiert"}),n.jsx("strong",{children:s})]})]})]})}function Bme({filters:t,onChange:e,onToggleClass:s,onToggleServer:r}){return n.jsxs("div",{className:Ne.inlineFilters,children:[n.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:Ne.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),n.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:Ne.select,value:t.status,onChange:i=>e("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("div",{className:Ne.chipGroup,children:zf.map(i=>{const a=t.classes.includes(i);return n.jsx("button",{type:"button",className:`${Ne.chip} ${a?Ne.chipActive:""}`,onClick:()=>s(i),children:i},i)})}),n.jsx("div",{className:Ne.chipGroup,children:Hf.map(i=>{const a=t.servers.includes(i);return n.jsx("button",{type:"button",className:`${Ne.chip} ${a?Ne.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ne.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),n.jsxs("div",{className:Ne.sortControls,children:[n.jsx("label",{className:Ne.sortLabel,children:"Sortieren"}),n.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastScan",children:"Letzter Scan"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),n.jsx("button",{type:"button",className:Ne.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function $me({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a}){const l=d=>e===d?s==="asc"?" ":" ":"";return t.length?n.jsx("div",{className:Ne.tableWrapper,children:n.jsxs("table",{className:Ne.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ne.stickyColumn,onClick:()=>r("name"),children:["Name",l("name")]}),n.jsx("th",{children:"Klasse"}),n.jsxs("th",{onClick:()=>r("level"),children:["Level",l("level")]}),n.jsx("th",{children:"Server"}),n.jsxs("th",{onClick:()=>r("status"),children:["Status",l("status")]}),n.jsx("th",{children:"Notizen"}),n.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",l("lastScan")]})]})}),n.jsx("tbody",{children:t.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:Ne.stickyColumn,children:n.jsx("button",{type:"button",className:Ne.rowButton,onClick:()=>i(d.id),children:d.name})}),n.jsx("td",{children:d.classRole}),n.jsx("td",{children:d.level}),n.jsx("td",{children:d.server}),n.jsx("td",{children:n.jsxs("select",{className:Ne.statusSelect,name:`waitlistStatus-${d.id}`,"aria-label":`Status fuer ${d.name}`,value:d.status,onChange:u=>a(d.id,u.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),n.jsxs("td",{children:[d.notes.slice(0,64),"..."]}),n.jsx("td",{children:n.jsx("span",{className:Ne.scanBadge,children:Ab[d.freshness]})})]},d.id))})]})}):n.jsx(nA,{})}function Ome({items:t,onSelect:e,onStatusChange:s}){return t.length?n.jsx("div",{className:Ne.cardList,children:t.map(r=>n.jsxs("article",{className:Ne.card,children:[n.jsxs("div",{className:Ne.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ne.cardTitle,onClick:()=>e(r.id),children:r.name}),n.jsxs("p",{className:Ne.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),n.jsx("span",{className:Ne.scanBadge,children:Ab[r.freshness]})]}),n.jsxs("p",{className:Ne.cardNotes,children:[r.notes.slice(0,160),"..."]}),n.jsxs("div",{className:Ne.cardFooter,children:[n.jsxs("select",{className:Ne.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>s(r.id,i.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):n.jsx(nA,{})}function nA(){return n.jsx("div",{className:Ne.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Vme({filters:t,onChange:e,onToggleClass:s,onToggleServer:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ne.sheetBackdrop,onClick:i,children:n.jsxs("div",{className:Ne.sheet,onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ne.sheetHandle}),n.jsxs("div",{className:Ne.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ne.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:d=>e(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Status",n.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:d=>e(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),n.jsxs("div",{className:Ne.sheetLabel,children:["Klassen",n.jsx("div",{className:Ne.chipGroup,children:zf.map(d=>{const u=t.classes.includes(d);return n.jsx("button",{type:"button",className:`${Ne.chip} ${u?Ne.chipActive:""}`,"aria-label":`Klasse ${d}`,onClick:()=>s(d),children:d},d)})})]}),n.jsxs("div",{className:Ne.sheetLabel,children:["Server",n.jsx("div",{className:Ne.chipGroup,children:Hf.map(d=>{const u=t.servers.includes(d);return n.jsx("button",{type:"button",className:`${Ne.chip} ${u?Ne.chipActive:""}`,"aria-label":`Server ${d}`,onClick:()=>r(d),children:d},d)})})]}),n.jsxs("div",{className:Ne.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:d=>e(u=>({...u,lvMin:Number(d.target.value)}))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:d=>e(u=>({...u,lvMax:Number(d.target.value)}))})]})]})]}),n.jsxs("div",{className:Ne.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const rA=ee.forwardRef(({item:t,mode:e,onClose:s,onEdit:r},i)=>n.jsx("div",{className:Ne.overlay,children:n.jsxs("div",{ref:i,className:`${Ne.panel} ${e==="drawer"?Ne.drawer:Ne.modal}`,children:[n.jsxs("header",{className:Ne.panelHeader,children:[n.jsxs("div",{children:[n.jsxs("p",{className:Ne.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),n.jsx("h2",{children:t.name})]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("section",{className:Ne.section,children:[n.jsx("h3",{children:"Kontakt"}),n.jsx("p",{children:t.contact}),n.jsxs("p",{children:["Quelle: ",t.source]})]}),n.jsxs("section",{className:Ne.section,children:[n.jsx("h3",{children:"Notizen"}),n.jsx("p",{children:t.notes})]}),n.jsxs("section",{className:Ne.section,children:[n.jsx("h3",{children:"Tags"}),n.jsx("div",{className:Ne.tagRow,children:t.tags.length?t.tags.map(a=>n.jsx("span",{children:a},a)):n.jsx("span",{children:"Keine"})})]}),n.jsxs("section",{className:Ne.section,children:[n.jsx("h3",{children:"Historie"}),n.jsx("ul",{className:Ne.historyList,children:t.history.map(a=>n.jsxs("li",{children:[n.jsx("span",{children:af(a.date)}),n.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),n.jsxs("section",{className:Ne.section,children:[n.jsx("h3",{children:"Scan-Infos"}),n.jsxs("p",{children:["Letzter Scan: ",af(t.lastScanAt)]}),n.jsxs("p",{children:["Aktualisiert: ",af(t.updatedAt)]})]}),n.jsxs("footer",{className:Ne.panelFooter,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ne.primaryAction,onClick:s,children:"Schliessen"})]})]})}));rA.displayName="DetailPanel";const iA=ee.forwardRef(({item:t,entries:e,onClose:s,onSubmit:r},i)=>{const[a,l]=ee.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:zf[0],level:1,server:Hf[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});ee.useEffect(()=>{t&&l(t)},[JSON.stringify(t)]);const d=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return n.jsx("div",{className:Ne.formOverlay,children:n.jsxs("form",{ref:i,className:Ne.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ne.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ne.cardMeta,children:t?"Bearbeiten":"Neu"}),n.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Schliessen"})]}),u&&n.jsx("div",{className:Ne.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),n.jsxs("label",{className:Ne.sheetLabel,children:["Name",n.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>l(p=>({...p,name:h.target.value}))})]}),n.jsxs("div",{className:Ne.formGrid,children:[n.jsxs("label",{children:["Klasse",n.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>l(p=>({...p,classRole:h.target.value})),children:zf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Level",n.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>l(p=>({...p,level:Number(h.target.value)}))})]}),n.jsxs("label",{children:["Server",n.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>l(p=>({...p,server:h.target.value})),children:Hf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>l(p=>({...p,status:h.target.value})),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Kontakt",n.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>l(p=>({...p,contact:h.target.value}))})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Quelle",n.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>l(p=>({...p,source:h.target.value}))})]}),n.jsxs("label",{className:Ne.sheetLabel,children:["Notizen",n.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>l(p=>({...p,notes:h.target.value})),rows:4})]}),n.jsxs("footer",{className:Ne.panelFooter,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ne.primaryAction,children:"Speichern"})]})]})})});iA.displayName="WaitlistForm";function Ume({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ne.pagination,children:[n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ne.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const zme=["tab","sub","sub2","q","sort","dir","page","pageSize"];function kd(t=[]){const[e,s]=Dl(),r=ee.useMemo(()=>[...t].sort().join("|"),[t]),i=ee.useMemo(()=>{const p=new Set([...zme]);return t.forEach(g=>p.add(g)),Array.from(p)},[r]),a=ee.useMemo(()=>{const p={};return i.forEach(g=>{const y=e.get(g);y!==null&&(p[g]=y)}),p},[e,i]),l=ee.useCallback((p,g)=>{var b;const y=new URLSearchParams(e);Object.entries(p).forEach(([S,N])=>{N==null||N===""?y.delete(S):y.set(S,String(N))}),s(y,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,s]),d=ee.useCallback(p=>{const g=new URLSearchParams(e);(p&&p.length>0?p:i).forEach(b=>g.delete(b)),s(g,{replace:!0})},[e,s,i]),u=ee.useCallback((p,g="")=>{var y;return(y=a[p])!=null?y:g},[a]),h=ee.useCallback((p,g=0)=>{const y=a[p],b=y?Number(y):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:l,resetParams:d}}function Hme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Activity"})})}function Gme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Imports"})})}function Wme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Announcements"})})}function qme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Events"})})}function Kme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Roles"})})}function Qme(){return kd(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Settings"})})}const Yme=[{icon:n.jsx(tg,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:n.jsx(j6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:n.jsx(p6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],Xme=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],Jme=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function Zme(){return n.jsx(wt,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(qt,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:n.jsx(efe,{}),right:n.jsx(tfe,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:Yme.map(t=>n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),n.jsx(qt,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),n.jsx("ul",{className:"space-y-3",children:Xme.map(t=>n.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[n.jsx(H0,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),n.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),n.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function efe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),n.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[n.jsx(qt,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),n.jsx(qt,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),n.jsx(qt,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),n.jsx(qt,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),n.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[n.jsx("li",{children:" Pager rotation: Ops Team"}),n.jsx("li",{children:" Slack channel: #sf-alerts"}),n.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function tfe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),n.jsx("ul",{className:"mt-3 space-y-2",children:Jme.map(t=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),n.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),n.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const sfe=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function nfe(){return n.jsx(wt,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:n.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Time"}),n.jsx("span",{children:"Service"}),n.jsx("span",{className:"text-right",children:"Severity"})]}),n.jsx("ul",{children:sfe.map(t=>n.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),n.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:rfe(t.severity)},children:t.severity})]},t.id))})]})})}function rfe(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const ui={background:"#152A42",borderColor:"#2B4C73"},zc={background:"#1A2F4A",borderColor:"#2B4C73"},gy=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function ife(){const{data:t,loading:e,refreshing:s,error:r,refresh:i}=cfe(),a=ee.useMemo(()=>[{label:"Total uploads",value:Fr(t.metrics.totalUploads),hint:`${Fr(t.metrics.last24h)} in the last 24h`,icon:n.jsx(LP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:wh(t.metrics.successRate),hint:`${Fr(t.metrics.failed)} failed`,icon:n.jsx(wP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?xy(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${xy(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:n.jsx(RP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:KN(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:n.jsx(BP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:Fr(t.metrics.uniqueUploaders),hint:`${Fr(t.metrics.uniqueGuilds)} guilds represented`,icon:n.jsx(tg,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:Fr(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:n.jsx(sT,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return n.jsx(wt,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:n.jsx(afe,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:s}),right:n.jsx(ofe,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(l=>n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[l.icon,l.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:l.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:l.hint})]},l.label))}),n.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:zc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Hc(l.status)},"aria-hidden":"true"}),Ib(l.status)]}),n.jsx("span",{className:"font-semibold",children:Fr(l.count)})]}),n.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:n.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(l.share*100,100).toFixed(1)}%`,backgroundColor:Hc(l.status)}})}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[wh(l.share)," of window"]})]},l.status))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:zc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-semibold",children:l.hourLabel}),n.jsxs("span",{children:[Fr(l.total)," uploads"]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Hc("success")},"aria-hidden":"true"}),"Success ",Fr(l.success)]}),n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:Hc("failed")},"aria-hidden":"true"}),"Failed ",Fr(l.failed)]})]})]},l.hourLabel))})]})]}),n.jsxs("section",{className:"rounded-2xl border",style:ui,children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(go,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?n.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[n.jsx(H0,{className:"h-3.5 w-3.5"}),r]}):n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(mP,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),n.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Status"}),n.jsx("span",{children:"Uploader"}),n.jsx("span",{children:"Guild"}),n.jsx("span",{className:"text-right",children:"Processing"}),n.jsx("span",{className:"text-right",children:"File size"})]}),n.jsx("ul",{children:t.recentUploads.map(l=>{var d,u,h,p;return n.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:l.id}),n.jsx("span",{children:n.jsx(lfe,{status:l.status})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(d=l.uploaderName)!=null?d:l.uploaderId)!=null?u:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.uploadedAt?l.uploadedAt.toLocaleString():"Timestamp missing"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(p=(h=l.guildName)!=null?h:l.guildId)!=null?p:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.errorCode?`Issue: ${l.errorCode}`:"Healthy"})]}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.processingMs?xy(l.processingMs):"Pending"}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.fileSizeBytes?KN(l.fileSizeBytes):""})]},l.id)})})]})]})})}function afe({breakdown:t,onRefresh:e,loading:s,refreshing:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{className:"rounded-2xl border p-4",style:ui,children:[n.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[n.jsx("span",{children:"Controls"}),n.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[n.jsx(eg,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),n.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:ui,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>n.jsxs("li",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:Hc(i.status)},"aria-hidden":"true"}),Ib(i.status)]}),n.jsx("span",{children:wh(i.share)})]},i.status))}),s&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[n.jsx(go,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:ui,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zm,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function ofe({issues:t,failures:e,uploaders:s,guilds:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(sT,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),n.jsx("span",{children:"Top failure signatures"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:zc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{children:i.code}),n.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(H0,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("span",{children:"Latest failed uploads"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:zc,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),n.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(tg,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Uploader leaderboard"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:s.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:zc,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",wh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Fr(i.count)})]},i.id))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:ui,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(VP,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Guild spotlight"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:zc,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",wh(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:Fr(i.count)})]},i.id))})]})]})}function lfe({status:t}){const e=Hc(t);return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[n.jsx(zm,{className:"h-3 w-3","aria-hidden":"true"}),Ib(t)]})}function cfe(){const[t,e]=ee.useState(gy),[s,r]=ee.useState(!0),[i,a]=ee.useState(!1),[l,d]=ee.useState(null),u=ee.useCallback(async(p=!1)=>{p?a(!0):r(!0);try{const g=jd(dt,"scanUploads"),y=Vn(g,mo("uploadedAt","desc"),Un(100)),S=(await pn(y)).docs.map(N=>dfe(N.id,N.data()));S.length>0?(e(S),d(null)):(e(gy),d("No uploads in window  showing fallback snapshot"))}catch(g){console.error("[ScansUploaded] Failed to load Firestore data",g),d("Live data unavailable  fallback snapshot active"),e(gy)}finally{p?a(!1):r(!1)}},[]);ee.useEffect(()=>{u(!1)},[u]);const h=ee.useMemo(()=>hfe(t),[t]);return{loading:s,refreshing:i,error:l,data:h,refresh:ee.useCallback(()=>u(!0),[u])}}function dfe(t,e){const s=ufe(e.status);return{id:t,status:s,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof ks?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function ufe(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function hfe(t){var A,B;const e=new Map,s=new Map,r=new Map,i=new Map,a=[];let l=0,d=0;const h=Date.now()-1440*60*1e3,p=new Map;t.forEach(D=>{var H,K,q,G,re,se,U,Y,ie,X,pe,ge,he,ve,_e,ce,Ce;const $=(H=e.get(D.status))!=null?H:0;if(e.set(D.status,$+1),D.uploadedAt&&D.uploadedAt.getTime()>=h&&(d+=1),D.processingMs!=null&&a.push(D.processingMs),D.fileSizeBytes!=null&&(l+=D.fileSizeBytes),D.status==="failed"&&D.errorCode){const ye=(K=s.get(D.errorCode))!=null?K:{count:0,lastSeen:null};s.set(D.errorCode,{count:ye.count+1,lastSeen:!ye.lastSeen||D.uploadedAt&&ye.lastSeen<D.uploadedAt?D.uploadedAt:ye.lastSeen})}const F=(G=(q=D.uploaderId)!=null?q:D.uploaderName)!=null?G:`anon-${D.id}`,z=(U=r.get(F))!=null?U:{name:(se=(re=D.uploaderName)!=null?re:D.uploaderId)!=null?se:"Unknown",success:0,total:0};if(r.set(F,{name:(ie=(Y=D.uploaderName)!=null?Y:D.uploaderId)!=null?ie:"Unknown",success:z.success+(D.status==="success"?1:0),total:z.total+1}),D.guildId||D.guildName){const ye=(pe=(X=D.guildId)!=null?X:D.guildName)!=null?pe:`guild-${D.id}`,Ze=(ve=i.get(ye))!=null?ve:{name:(he=(ge=D.guildName)!=null?ge:D.guildId)!=null?he:"Unknown",success:0,total:0};i.set(ye,{name:(ce=(_e=D.guildName)!=null?_e:D.guildId)!=null?ce:"Unknown",success:Ze.success+(D.status==="success"?1:0),total:Ze.total+1})}if(D.uploadedAt){const ye=new Date(D.uploadedAt);ye.setMinutes(0,0,0);const Ze=ye.toISOString(),it=(Ce=p.get(Ze))!=null?Ce:{hourLabel:mfe(ye),timestamp:ye,total:0,success:0,failed:0};p.set(Ze,{hourLabel:it.hourLabel,timestamp:it.timestamp,total:it.total+1,success:it.success+(D.status==="success"?1:0),failed:it.failed+(D.status==="failed"?1:0)})}});const g=t.length,y=(A=e.get("success"))!=null?A:0,b=(B=e.get("failed"))!=null?B:0,S=a.length?a.reduce((D,$)=>D+$,0)/a.length:null,N=a.length?pfe(a,95):null,T=r.size,M=i.size,L=Array.from(e.entries()).map(([D,$])=>({status:D,count:$,share:g?$/g:0})).sort((D,$)=>$.count-D.count),k=Array.from(p.values()).sort((D,$)=>$.timestamp.getTime()-D.timestamp.getTime()).slice(0,12),v=Array.from(s.entries()).map(([D,$])=>({code:D,...$})).sort((D,$)=>$.count-D.count).slice(0,6),_=[...t].sort((D,$)=>{var F,z,H,K;return((z=(F=$.uploadedAt)==null?void 0:F.getTime())!=null?z:0)-((K=(H=D.uploadedAt)==null?void 0:H.getTime())!=null?K:0)}).slice(0,12),P=t.filter(D=>D.status==="failed").sort((D,$)=>{var F,z,H,K;return((z=(F=$.uploadedAt)==null?void 0:F.getTime())!=null?z:0)-((K=(H=D.uploadedAt)==null?void 0:H.getTime())!=null?K:0)}),E=Array.from(r.entries()).map(([D,$])=>({id:D,name:$.name,count:$.total,successRate:$.total?$.success/$.total:0})).sort((D,$)=>$.count-D.count).slice(0,5),w=Array.from(i.entries()).map(([D,$])=>({id:D,name:$.name,count:$.total,successRate:$.total?$.success/$.total:0})).sort((D,$)=>$.count-D.count).slice(0,5);return{metrics:{totalUploads:g,last24h:d,successRate:g?y/g:0,failed:b,avgProcessingMs:S,p95ProcessingMs:N,uniqueUploaders:T,uniqueGuilds:M,totalFileSizeBytes:l},statusBreakdown:L,timeline:k,issues:v,recentFailures:P,recentUploads:_,topUploaders:E,topGuilds:w}}function pfe(t,e){const s=[...t].sort((d,u)=>d-u);if(s.length===0)return 0;const r=e/100*(s.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return s[i];const l=r-i;return s[i]*(1-l)+s[a]*l}function Fr(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function wh(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function xy(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function KN(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let s=t,r=0;for(;s>=1024&&r<e.length-1;)s/=1024,r+=1;return`${s.toFixed(s>=10?0:1)} ${e[r]}`}function Hc(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function Ib(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function mfe(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function vy({label:t,value:e,hint:s}){return n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),n.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),s&&n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:s})]})}function ffe(){var d,u,h,p,g,y;const{snapshot:t,error:e,loading:s,refresh:r}=GE(),i=(d=t==null?void 0:t.warnings)!=null?d:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,l=(p=t==null?void 0:t.stats)!=null?p:{};return n.jsx(wt,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:s,children:s?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(vy,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),n.jsx(vy,{label:"Creators tracked",value:a?a.toString():"0"}),n.jsx(vy,{label:"API lookups",value:`${(g=l.youtubeLookups)!=null?g:0}  ${(y=l.twitchLookups)!=null?y:0}`,hint:"YouTube  Twitch"})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?n.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):n.jsx("ul",{className:"space-y-2",children:i.map((b,S)=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),n.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${S}`))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),n.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{children:["Add the following environment variables (e.g. in ",n.jsx("code",{children:".env.local"}),"):",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),n.jsxs("li",{children:["Execute the sync script:",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),n.jsxs("li",{children:["Commit/deploy the generated ",n.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&n.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const Fg=`${Co}/admin/users`,gfe=25,Rb=()=>{if(!Fg)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},QN=t=>typeof t!="number"?null:ks.fromMillis(t),Pb=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:QN(t.createdAt),lastLoginAt:QN(t.lastLoginAt),status:t.status,notes:t.notes}},xfe=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:gfe)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const s=e.toString();return s?`?${s}`:""},Lb=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function YN(t={}){var r;Rb();const e=xfe(t),s=`${Fg}${e}`;try{const i=await fetch(s,{credentials:"include"});if(!i.ok)throw await Lb(i);const a=await i.json();return{users:a.users.map(Pb),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function vfe(t){Rb();const e=await fetch(`${Fg}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await Lb(e);const s=await e.json();return Pb(s.user)}async function yfe(t,e){Rb();const s=await fetch(`${Fg}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw await Lb(s);const r=await s.json();return Pb(r.user)}const aA=`${Co}/admin/audit-events`,bfe=50,_fe=()=>{if(!aA)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},wfe=t=>typeof t!="number"?null:ks.fromMillis(t),jfe=t=>{var e,s;return{id:t.id,createdAt:wfe(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(s=t.changes)!=null?s:{},context:t.context}},Sfe=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:bfe)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const s=e.toString();return s?`?${s}`:""},Nfe=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function T0(t={}){var i;_fe();const e=`${aA}${Sfe(t)}`,s=await fetch(e,{credentials:"include"});if(!s.ok)throw await Nfe(s);const r=await s.json();return{events:r.events.map(jfe),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function kfe(t,e=10){return T0({targetUserId:t,limit:e})}const Tfe=20,Cfe=50,Ju={borderColor:"#2B4C73",background:"#152A42"},oA={background:"#1A2F4A"};function Efe(){var d;const{status:t,user:e}=$l(),s=(d=e==null?void 0:e.roles)!=null?d:[],r=s.includes("admin"),i=r||s.includes("mod"),[a,l]=I.useState("users");return t==="loading"||t==="idle"?n.jsx(wt,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[n.jsx(go,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?n.jsx(wt,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:n.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[n.jsx(Ml,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:n.jsx(Afe,{activeTab:a,onChange:l}),children:a==="users"?n.jsx(Ife,{isAdmin:r}):n.jsx(Rfe,{isAdmin:r,onSelectUser:u=>{l("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):n.jsx(wt,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[n.jsx(nT,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),n.jsxs("p",{children:["You need at least the ",n.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function Afe({activeTab:t,onChange:e}){const s=[{key:"users",label:"Users",icon:n.jsx(tg,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:n.jsx(d6,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2",children:s.map(r=>n.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function Ife({isAdmin:t}){const[e,s]=I.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=I.useState(""),a=E0(r,350);I.useEffect(()=>{s(ce=>ce.search===a?ce:{...ce,search:a})},[a]);const[l,d]=I.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=I.useState(0),p=I.useMemo(()=>({pageSize:Tfe,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);I.useEffect(()=>{let ce=!1;return d(Ce=>({...Ce,loading:!0,error:null})),YN(p).then(Ce=>{ce||d({items:Ce.users,cursor:Ce.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(Ce=>{ce||d(ye=>({...ye,loading:!1,loadingMore:!1,error:Ce instanceof Error?Ce.message:"Failed to load users"}))}),()=>{ce=!0}},[p,u]);const g=()=>h(ce=>ce+1),y=async()=>{if(l.cursor){d(ce=>({...ce,loadingMore:!0,error:null}));try{const ce=await YN({...p,cursor:l.cursor});d(Ce=>({items:[...Ce.items,...ce.users],cursor:ce.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(ce){d(Ce=>{var ye;return{...Ce,loadingMore:!1,error:(ye=ce==null?void 0:ce.message)!=null?ye:"Failed to load additional users"}})}}},[b,S]=I.useState(null),[N,T]=I.useState(null),[M,L]=I.useState(!1),[k,v]=I.useState(null),[_,P]=I.useState(""),[E,w]=I.useState(!1),[A,B]=I.useState(null),[D,$]=I.useState(!1),[F,z]=I.useState(!1),[H,K]=I.useState([]),[q,G]=I.useState(!1),[re,se]=I.useState(null),U=I.useRef(null);I.useEffect(()=>{U.current=b},[b]);const Y=I.useRef(!1);I.useEffect(()=>{Y.current=E},[E]);const ie=I.useCallback(async ce=>{var Ce;G(!0),se(null);try{const ye=await kfe(ce,12);U.current===ce&&K(ye.events)}catch(ye){U.current===ce&&se((Ce=ye==null?void 0:ye.message)!=null?Ce:"Failed to load audit history")}finally{U.current===ce&&G(!1)}},[]);I.useEffect(()=>{var Ze;if(!b){T(null),P(""),w(!1),K([]),se(null),z(!1);return}const ce=b,Ce=l.items.find(it=>it.id===ce);Ce?(T(Ce),P((Ze=Ce.notes)!=null?Ze:"")):(T(null),P("")),w(!1),L(!0),v(null);let ye=!1;return vfe(ce).then(it=>{var Rt;ye||U.current!==ce||(T(it),P((Rt=it.notes)!=null?Rt:""),w(!1),L(!1))}).catch(it=>{var Rt;ye||U.current!==ce||(L(!1),v((Rt=it==null?void 0:it.message)!=null?Rt:"Failed to load user"))}),ie(ce),()=>{ye=!0}},[b,l.items,ie]),I.useEffect(()=>{var Ce;if(!b)return;const ce=l.items.find(ye=>ye.id===b);ce&&(T(ye=>ye&&ye.id===ce.id?{...ye,...ce}:ce),Y.current||P((Ce=ce.notes)!=null?Ce:""))},[l.items,b]);const X=I.useCallback(ce=>{d(Ce=>({...Ce,items:Ce.items.map(ye=>ye.id===ce.id?ce:ye)}))},[]),pe=I.useCallback(async ce=>{var Ce,ye;if(N){$(!0),B(null);try{const Ze=await yfe(N.id,ce);T(Ze),X(Ze),"notes"in ce&&(w(!1),P((Ce=Ze.notes)!=null?Ce:"")),await ie(Ze.id)}catch(Ze){B((ye=Ze==null?void 0:Ze.message)!=null?ye:"Failed to update user")}finally{$(!1)}}},[N,ie,X]),ge=ce=>{if(!N||!t||ce==="user")return;const Ce=new Set(N.roles);Ce.has(ce)?Ce.delete(ce):Ce.add(ce),Ce.add("user"),pe({roles:Array.from(Ce)})},he=ce=>{!N||!t||C0(N.status)===ce||ce==="banned"&&!window.confirm(`Ban ${Zu(N)}? They will lose access to the control panel.`)||pe({status:ce})},ve=ce=>{P(ce),w(!0)},_e=()=>{!N||!t||!E||pe({notes:_.trim().length?_:null})};return I.useEffect(()=>{if(typeof window=="undefined")return;const ce=Ce=>{const ye=Ce.detail;ye!=null&&ye.userId&&S(ye.userId)};return window.addEventListener("sf-admin-open-user",ce),()=>{window.removeEventListener("sf-admin-open-user",ce)}},[]),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Ju,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(My,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:ce=>i(ce.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(of,{label:"Role",value:e.role,onChange:ce=>s(Ce=>({...Ce,role:ce})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),n.jsx(of,{label:"Status",value:e.status,onChange:ce=>s(Ce=>({...Ce,status:ce})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),n.jsx(of,{label:"Provider",value:e.provider,onChange:ce=>s(Ce=>({...Ce,provider:ce})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(eg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("div",{className:"rounded-2xl border",style:Ju,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#B0C4D9]",children:[l.items.length," users ",e.search?"filtered":""]}),l.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(go,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:oA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"User ID"}),n.jsx("th",{className:"px-4 py-2",children:"Display name"}),n.jsx("th",{className:"px-4 py-2",children:"Role"}),n.jsx("th",{className:"px-4 py-2",children:"Status"}),n.jsx("th",{className:"px-4 py-2",children:"Providers"}),n.jsx("th",{className:"px-4 py-2",children:"Created"}),n.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),n.jsx("tbody",{children:l.items.map(ce=>{var ye,Ze,it;const Ce=ce.id===b;return n.jsxs("tr",{onClick:()=>S(ce.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${Ce?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:ce.userId}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cA,{url:hA(ce),name:Zu(ce)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:Zu(ce)}),(ye=ce.profile)!=null&&ye.displayName&&ce.profile.displayName!==ce.displayName?n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:ce.profile.displayName}):null]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(dA,{role:uA(ce.roles)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(Lfe,{status:C0(ce.status)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Gf,{provider:"discord",active:!!((Ze=ce.providers)!=null&&Ze.discord)}),n.jsx(Gf,{provider:"google",active:!!((it=ce.providers)!=null&&it.google)})]})}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:Yc(ce.createdAt)}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:Yc(ce.lastLoginAt)})]},ce.id)})})]}),!l.loading&&!l.items.length&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),l.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Bu,{className:"h-3.5 w-3.5"}),l.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:l.cursor?"More users available":"End of list"}),n.jsx("button",{type:"button",onClick:y,disabled:!l.cursor||l.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:l.loadingMore?"Loading...":"Load more"})]})]}),n.jsx("aside",{className:"rounded-2xl border p-3",style:Ju,children:N?n.jsx(Pfe,{user:N,isAdmin:t,detailLoading:M,detailError:k,notesValue:_,notesDirty:E,onNotesChange:ve,onNotesSave:_e,onRoleToggle:ge,onStatusChange:he,actionError:A,actionPending:D,auditEntries:H,auditLoading:q,auditError:re,onRefreshAudit:()=>N&&ie(N.id),showRawJson:F,toggleRawJson:()=>z(ce=>!ce)}):n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[n.jsx(AP,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function Rfe({isAdmin:t,onSelectUser:e}){const[s,r]=I.useState({actor:"",target:"",action:"all"}),[i,a]=I.useState(""),[l,d]=I.useState(""),u=E0(i,350),h=E0(l,350);I.useEffect(()=>{r(M=>M.actor===u&&M.target===h?M:{...M,actor:u,target:h})},[u,h]);const[p,g]=I.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[y,b]=I.useState(0),S=I.useMemo(()=>{const M=s.action==="all"?void 0:s.action,L=s.actor.includes(":")?s.actor:void 0,k=s.target.includes(":")?s.target:void 0;return{limit:Cfe,action:M,actorUserId:L,targetUserId:k}},[s]);I.useEffect(()=>{let M=!1;return g(L=>({...L,loading:!0,error:null})),T0(S).then(L=>{M||g({items:L.events,cursor:L.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(L=>{M||g(k=>{var v;return{...k,loading:!1,loadingMore:!1,error:(v=L==null?void 0:L.message)!=null?v:"Failed to load audit log"}})}),()=>{M=!0}},[S,y]);const N=async()=>{if(p.cursor){g(M=>({...M,loadingMore:!0,error:null}));try{const M=await T0({...S,cursor:p.cursor});g(L=>({items:[...L.items,...M.events],cursor:M.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(M){g(L=>{var k;return{...L,loadingMore:!1,error:(k=M==null?void 0:M.message)!=null?k:"Failed to load more events"}})}}},T=I.useMemo(()=>{const M=s.actor.trim().toLowerCase(),L=s.target.trim().toLowerCase();return p.items.filter(k=>{var P;const v=!M||k.actorUserId.toLowerCase().includes(M)||((P=k.actorDisplayName)!=null?P:"").toLowerCase().includes(M),_=!L||k.targetUserId.toLowerCase().includes(L);return v&&_})},[p.items,s.actor,s.target]);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:Ju,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(My,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:M=>a(M.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(My,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Target user id",value:l,onChange:M=>d(M.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(of,{label:"Action",value:s.action,onChange:M=>r(L=>({...L,action:M})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:()=>b(M=>M+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(eg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"rounded-2xl border",style:Ju,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#8AA5C4]",children:[T.length," events"]}),p.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(go,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:oA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"Time"}),n.jsx("th",{className:"px-4 py-2",children:"Actor"}),n.jsx("th",{className:"px-4 py-2",children:"Target User"}),n.jsx("th",{className:"px-4 py-2",children:"Action"}),n.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),n.jsx("tbody",{children:T.map(M=>{var L;return n.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:Yc(M.createdAt)}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("div",{className:"text-white",children:(L=M.actorDisplayName)!=null?L:"N/A"}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:M.actorUserId})]}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(M.targetUserId),children:M.targetUserId})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(lA,{action:M.action})}),n.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:M.summary})]},M.id)})})]}),!T.length&&!p.loading&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),p.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Bu,{className:"h-3.5 w-3.5"}),p.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:p.cursor?"More events available":"End of audit log"}),n.jsx("button",{type:"button",onClick:N,disabled:!p.cursor||p.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:p.loadingMore?"Loading...":"Load more"})]})]}),!t&&n.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function Pfe({user:t,isAdmin:e,detailLoading:s,detailError:r,notesValue:i,notesDirty:a,onNotesChange:l,onNotesSave:d,onRoleToggle:u,onStatusChange:h,actionError:p,actionPending:g,auditEntries:y,auditLoading:b,auditError:S,onRefreshAudit:N,showRawJson:T,toggleRawJson:M}){var k,v;const L=uA(t.roles);return n.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[s&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[n.jsx(go,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[n.jsx(Bu,{className:"h-3.5 w-3.5"}),r]}),n.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(cA,{url:hA(t),name:Zu(t),size:56}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"truncate text-base text-white",children:Zu(t)}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),n.jsxs("div",{className:"mt-1 flex gap-1",children:[n.jsx(dA,{role:L}),n.jsx(Gf,{provider:"discord",active:!!((k=t.providers)!=null&&k.discord)}),n.jsx(Gf,{provider:"google",active:!!((v=t.providers)!=null&&v.google)})]})]})]})}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(_=>n.jsx("button",{type:"button",onClick:()=>u(_),disabled:!e||_==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(_)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:_},_))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),n.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(_=>n.jsx("button",{type:"button",onClick:()=>h(_),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${C0(t.status)===_?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:_},_))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&n.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),n.jsx("textarea",{value:i,onChange:_=>l(_.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(go,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&n.jsx("button",{type:"button",onClick:d,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),p&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Bu,{className:"h-3 w-3"}),p]})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),n.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsx(eg,{className:"h-3 w-3"}),"Refresh"]})]}),b&&n.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[n.jsx(go,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),S&&n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Bu,{className:"h-3 w-3"}),S]}),!b&&!y.length&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),n.jsx("ul",{className:"space-y-2",children:y.map(_=>{var P;return n.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[n.jsx("span",{children:Yc(_.createdAt)}),n.jsx(lA,{action:_.action})]}),n.jsx("div",{className:"mt-1 text-white",children:(P=_.actorDisplayName)!=null?P:_.actorUserId}),n.jsx("div",{className:"text-[#C8D6EC]",children:_.summary})]},_.id)})})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),n.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[n.jsx(T6,{className:"h-3 w-3"}),T?"Hide raw JSON":"Show raw JSON"]})]}),n.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[n.jsx(Fm,{label:"Created",value:Yc(t.createdAt)}),n.jsx(Fm,{label:"Last login",value:Yc(t.lastLoginAt)}),n.jsx(Fm,{label:"Primary provider",value:t.primaryProvider}),n.jsx(Fm,{label:"Roles",value:t.roles.join(", ")})]}),T&&n.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function lA({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return n.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function Fm({label:t,value:e}){return e?n.jsxs("div",{className:"flex justify-between gap-2",children:[n.jsx("span",{className:"text-[#6E86A6]",children:t}),n.jsx("span",{className:"text-white",children:e})]}):null}function of({label:t,value:e,options:s,onChange:r}){return n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[#8AA5C4]",children:t}),n.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:s.map(i=>n.jsx("option",{value:i.value,children:i.label},i.value))})]})}function cA({url:t,name:e,size:s=32}){return t?n.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:s,height:s,borderColor:"#2B4C73"}}):n.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:s,height:s,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function dA({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return n.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function Lfe({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:n.jsx(TP,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:n.jsx(Ml,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:n.jsx(gP,{className:"h-3 w-3"})}},{label:s,color:r,icon:i}=e[t];return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,s]})}function Gf({provider:t,active:e}){const s=t==="discord"?"D":"G";return n.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:s})}function uA(t){const e=["admin","mod","creator","user"];for(const s of e)if(t.includes(s))return s;return"user"}function Zu(t){var e,s,r,i,a,l,d,u,h;return(h=(u=(a=(s=t.displayName)!=null?s:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(d=(l=t.providers)==null?void 0:l.google)==null?void 0:d.displayName)!=null?h:t.userId}function hA(t){var e,s,r,i,a,l,d;return(d=(l=(r=t.avatarUrl)!=null?r:(s=(e=t.providers)==null?void 0:e.discord)==null?void 0:s.avatarUrl)!=null?l:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?d:null}function C0(t){return t!=null?t:"active"}function Yc(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function E0(t,e){const[s,r]=I.useState(t);return I.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function Dfe(){return n.jsx(wt,{title:"Einstellungen",subtitle:"Profil, Sicherheit, Anzeige",centerFramed:!0,children:n.jsx("div",{className:"space-y-4",children:n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsx("h3",{className:"mb-2 text-sm",style:{color:"#F5F9FF"},children:"Profil"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["Anzeigename",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]}),n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["E-Mail",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]})]})]})})})}const pA="user_settings";async function XN(t){if(!t)return null;try{const e=Gt(dt,pA,t),s=await vn(e);if(!s.exists())return null;const r=s.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function Mfe(t,e){if(t)try{const s=Gt(dt,pA,t);await No(s,e,{merge:!0})}catch(s){throw console.error("[UserSettings] Failed to update settings",s),s}}const mA="user_tools_state";async function Ffe(t){var e;if(!t)return null;try{const s=Gt(dt,mA,t),r=await vn(s);return r.exists()&&(e=r.data())!=null?e:null}catch(s){return console.warn("[UserToolsSettings] Failed to load tools settings",s),null}}async function Bfe(t,e){if(t)try{const s=Gt(dt,mA,t),r={...e,updatedAt:new Date().toISOString()};await No(s,r,{merge:!0})}catch(s){throw console.error("[UserToolsSettings] Failed to save tools settings",s),s}}const $fe="_page_rpt6g_1",Ofe="_tabs_rpt6g_17",Vfe="_tab_rpt6g_17",Ufe="_tabActive_rpt6g_71",zfe="_banner_rpt6g_87",Hfe="_bannerSuccess_rpt6g_101",Gfe="_bannerError_rpt6g_113",Wfe="_card_rpt6g_125",qfe="_cardTitle_rpt6g_145",Kfe="_settingsForm_rpt6g_159",Qfe="_formRow_rpt6g_173",Yfe="_selectInput_rpt6g_185",Xfe="_checkboxRow_rpt6g_203",Jfe="_settingsFooter_rpt6g_227",Zfe="_inlineStatus_rpt6g_245",ege="_helperText_rpt6g_259",tge="_secondaryButton_rpt6g_271",sge="_cardSubtitle_rpt6g_297",nge="_identityHeader_rpt6g_309",rge="_identityAvatar_rpt6g_323",ige="_identityName_rpt6g_337",age="_identityProvider_rpt6g_351",oge="_identityForm_rpt6g_363",lge="_nameInputWrap_rpt6g_379",cge="_nameLabel_rpt6g_395",dge="_nameInput_rpt6g_379",uge="_nameSaveButton_rpt6g_427",hge="_feedbackError_rpt6g_471",pge="_feedbackSuccess_rpt6g_483",mge="_metaGrid_rpt6g_495",fge="_metaItem_rpt6g_507",gge="_metaLabel_rpt6g_521",xge="_metaValue_rpt6g_535",vge="_serviceList_rpt6g_549",yge="_serviceRow_rpt6g_559",bge="_serviceName_rpt6g_587",_ge="_serviceStatus_rpt6g_601",wge="_serviceAction_rpt6g_613",jge="_securityText_rpt6g_645",Sge="_securityNote_rpt6g_657",Nge="_logoutButton_rpt6g_669",kge="_loadingState_rpt6g_701",Tge="_emptyState_rpt6g_703",Cge="_emptyStateTitle_rpt6g_721",Ege="_emptyStateText_rpt6g_733",Age="_primaryButton_rpt6g_745",Fe={page:$fe,tabs:Ofe,tab:Vfe,tabActive:Ufe,banner:zfe,bannerSuccess:Hfe,bannerError:Gfe,card:Wfe,cardTitle:qfe,settingsForm:Kfe,formRow:Qfe,selectInput:Yfe,checkboxRow:Xfe,settingsFooter:Jfe,inlineStatus:Zfe,helperText:ege,secondaryButton:tge,cardSubtitle:sge,identityHeader:nge,identityAvatar:rge,identityName:ige,identityProvider:age,identityForm:oge,nameInputWrap:lge,nameLabel:cge,nameInput:dge,nameSaveButton:uge,feedbackError:hge,feedbackSuccess:pge,metaGrid:mge,metaItem:fge,metaLabel:gge,metaValue:xge,serviceList:vge,serviceRow:yge,serviceName:bge,serviceStatus:_ge,serviceAction:wge,securityText:jge,securityNote:Sge,logoutButton:Nge,loadingState:kge,emptyState:Tge,emptyStateTitle:Cge,emptyStateText:Ege,primaryButton:Age},Ige="https://i.pravatar.cc/72",Bm=`${Co}/auth/account/profile`,yy=`${Co}/auth/google/link/start`,JN=3,ZN=32,ek=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},Rge=()=>{const{status:t,user:e,logout:s,refreshSession:r}=$l(),i=Vr(),a=ir(),{t:l,i18n:d}=fd(),[u,h]=I.useState("overview"),[p,g]=I.useState(null),[y,b]=I.useState(null),[S,N]=I.useState(!1),[T,M]=I.useState(null),[L,k]=I.useState(!1),[v,_]=I.useState(!1),[P,E]=I.useState(null),[w,A]=I.useState(null),[B,D]=I.useState(!0),[$,F]=I.useState(!1),[z,H]=I.useState(null),[K,q]=I.useState(!1),G=I.useMemo(()=>{const Pe=new URLSearchParams(a.search);return Pe.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:Pe.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),re=t==="loading"||t==="idle",se=t==="authenticated"&&!!e,U=e==null?void 0:e.id,Y=I.useMemo(()=>({language:d.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[d.language]);I.useEffect(()=>{if(!U){g(null),b(null),M(null),N(!1),E(null),A(null),D(!1),F(!1),H(null),q(!1);return}let Pe=!0;return(async()=>{N(!0),M(null),_(!1);try{const Ue=await XN(U),nt=Ue?{...Y,...Ue}:Y;if(!Pe)return;g(nt),b(nt)}catch(Ue){if(!Pe)return;M(l("account.settings.error","Could not load settings."))}finally{Pe&&N(!1)}})(),()=>{Pe=!1}},[U,Y,l]),I.useEffect(()=>{if(!U)return;let Pe=!0;const Ie={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{D(!0),H(null),q(!1);try{const nt=await Ffe(U);if(!Pe)return;const pt=nt?{...Ie,...nt}:Ie;E(pt),A(pt)}catch(nt){if(!Pe)return;H(l("account.tools.loadError","Could not load tools settings."))}finally{Pe&&D(!1)}})(),()=>{Pe=!1}},[U,l]);const ie=()=>{i("/login")},X=async()=>{await s(),i("/")},pe=()=>{if(!yy){window.alert("Auth service is not configured for Google linking.");return}window.location.href=yy},ge=()=>n.jsx("div",{className:Fe.loadingState,children:"Checking session..."}),he=()=>n.jsxs("div",{className:Fe.emptyState,children:[n.jsx("p",{className:Fe.emptyStateTitle,children:"You are not signed in."}),n.jsx("p",{className:Fe.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),n.jsx("button",{type:"button",className:Fe.primaryButton,onClick:ie,children:"Go to sign-in"})]}),ve=()=>{if(!G)return null;const Pe=G.type==="success"?`${Fe.banner} ${Fe.bannerSuccess}`:`${Fe.banner} ${Fe.bannerError}`;return n.jsx("div",{className:Pe,children:G.message})},_e=()=>{var $t,ar,bn;if(!e)return null;const Pe=($t=e.providers)==null?void 0:$t.discord,Ie=(ar=e.providers)==null?void 0:ar.google,Ue=!!Pe,nt=!!Ie,pt=!!yy,vt=pt?nt?Ie!=null&&Ie.displayName?`Connected as ${Ie.displayName}`:"Connected":"Not connected":"Auth service not configured",Ut=[{key:"discord",name:"Discord",status:Ue?`Connected as ${(bn=Pe==null?void 0:Pe.displayName)!=null?bn:e.displayName}`:"Not connected",actionLabel:Ue?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:vt,actionLabel:nt?"Connected":"Connect",disabled:nt||!pt,onClick:nt||!pt?void 0:pe},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:"Connected services"}),n.jsx("p",{className:Fe.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),n.jsx("div",{className:Fe.serviceList,children:Ut.map(Vs=>n.jsxs("div",{className:Fe.serviceRow,children:[n.jsxs("div",{children:[n.jsx("p",{className:Fe.serviceName,children:Vs.name}),n.jsx("p",{className:Fe.serviceStatus,children:Vs.status})]}),n.jsx("button",{type:"button",className:Fe.serviceAction,disabled:Vs.disabled,onClick:Vs.onClick,children:Vs.actionLabel})]},Vs.key))})]})},ce=()=>n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:"Security & session"}),n.jsx("p",{className:Fe.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),n.jsx("p",{className:Fe.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),n.jsx("button",{type:"button",className:Fe.logoutButton,onClick:X,children:"Log out from this device"}),n.jsx("p",{className:Fe.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),Ce=(Pe,Ie)=>{p&&(g(Ue=>({...Ue!=null?Ue:Y,[Pe]:Ie})),_(!1))},ye=!!(p&&y&&JSON.stringify(p)!==JSON.stringify(y)),Ze=!!(P&&w&&JSON.stringify(P)!==JSON.stringify(w)),it=async()=>{if(!(!U||!p||L||!ye))try{k(!0),M(null),await Mfe(U,p),b(p),_(!0)}catch(Pe){M(l("account.settings.saveError","Could not save settings. Please try again."))}finally{k(!1)}},Rt=(Pe,Ie)=>{P&&(E(Ue=>({...Ue!=null?Ue:{},[Pe]:Ie})),q(!1))},rs=async()=>{if(!(!U||!P||$||!Ze))try{F(!0),H(null),await Bfe(U,P),A(P),q(!0)}catch(Pe){H(l("account.tools.save.error","Could not save settings. Please try again."))}finally{F(!1)}},cs=()=>{var Pe,Ie;return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:l("account.settings.title","Settings")}),n.jsx("p",{className:Fe.cardSubtitle,children:l("account.settings.subtitle","Configure your personal preferences.")}),S&&n.jsx("p",{className:Fe.helperText,children:l("account.settings.loading","Loading settings...")}),T&&n.jsxs("div",{className:Fe.feedbackError,children:[n.jsx("p",{children:T}),n.jsx("button",{type:"button",className:Fe.secondaryButton,onClick:()=>{U&&(M(null),_(!1),N(!0),XN(U).then(Ue=>{const nt=Ue?{...Y,...Ue}:Y;g(nt),b(nt)}).catch(()=>{M(l("account.settings.error","Could not load settings."))}).finally(()=>N(!1)))},children:l("account.settings.retry","Retry")})]}),p&&!S&&n.jsxs("div",{className:Fe.settingsForm,children:[n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"settings-language",children:l("account.settings.language.label","Preferred language")}),n.jsxs("select",{id:"settings-language",className:Fe.selectInput,value:(Pe=p.language)!=null?Pe:Y.language,onChange:Ue=>Ce("language",Ue.target.value),children:[n.jsx("option",{value:"en",children:l("topbar.lang_en","English")}),n.jsx("option",{value:"de",children:l("topbar.lang_de","Deutsch")})]})]}),n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"settings-section",children:l("account.settings.defaultSection.label","Default section")}),n.jsxs("select",{id:"settings-section",className:Fe.selectInput,value:(Ie=p.defaultSection)!=null?Ie:Y.defaultSection,onChange:Ue=>Ce("defaultSection",Ue.target.value),children:[n.jsx("option",{value:"home",children:l("nav.home","Home")}),n.jsx("option",{value:"toplists",children:l("nav.toplists","Top Lists")}),n.jsx("option",{value:"guilds",children:l("nav.guilds","Guilds")}),n.jsx("option",{value:"tools",children:l("nav.tools","Tools")}),n.jsx("option",{value:"community",children:l("nav.community","Community")})]})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!p.compactTables,onChange:Ue=>Ce("compactTables",Ue.target.checked)}),n.jsx("span",{children:l("account.settings.compactTables.label","Use compact table layout")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!p.showExperimentalFeatures,onChange:Ue=>Ce("showExperimentalFeatures",Ue.target.checked)}),n.jsx("span",{children:l("account.settings.experimental.label","Enable experimental features")})]})]}),n.jsxs("div",{className:Fe.settingsFooter,children:[n.jsxs("div",{className:Fe.inlineStatus,children:[v?n.jsx("span",{className:Fe.feedbackSuccess,children:l("account.settings.saved","Settings saved.")}):ye?null:n.jsx("span",{className:Fe.helperText,children:l("account.settings.noChanges","No changes to save.")}),L&&n.jsx("span",{className:Fe.helperText,children:l("account.settings.saving","Saving...")})]}),n.jsx("button",{type:"button",className:Fe.primaryButton,disabled:!ye||L||!p,onClick:it,children:l("account.settings.save","Save settings")})]})]})},Os=()=>{const Pe=[{key:"overview",label:"Overview"},{key:"settings",label:"Settings"},{key:"tools",label:"Tools"}];return n.jsx("div",{className:Fe.tabs,role:"tablist","aria-label":"Account sections",children:Pe.map(Ie=>{const Ue=u===Ie.key;return n.jsx("button",{type:"button",className:`${Fe.tab} ${Ue?Fe.tabActive:""}`,onClick:()=>h(Ie.key),role:"tab","aria-selected":Ue,children:Ie.label},Ie.key)})})},ws=()=>{var Pe;if(!e)return null;switch(u){case"overview":return n.jsxs(n.Fragment,{children:[n.jsx(Pge,{user:e,refreshSession:r}),_e(),ce()]});case"settings":return cs();case"tools":return n.jsxs("section",{className:Fe.card,children:[n.jsx("h2",{className:Fe.cardTitle,children:l("account.tools.title","Tools settings")}),n.jsx("p",{className:Fe.cardSubtitle,children:l("account.tools.subtitle","Configure how tools behave for your account.")}),B&&n.jsx("p",{className:Fe.helperText,children:l("account.tools.loading","Loading tools settings...")}),z&&n.jsx("p",{className:Fe.feedbackError,children:z}),P&&!B&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Fe.settingsForm,children:[n.jsxs("div",{className:Fe.formRow,children:[n.jsx("label",{className:Fe.nameLabel,htmlFor:"tools-default-set",children:l("account.tools.defaultSet.label","Default set ID")}),n.jsx("input",{id:"tools-default-set",type:"text",className:Fe.nameInput,value:(Pe=P.defaultSetId)!=null?Pe:"",onChange:Ie=>Rt("defaultSetId",Ie.target.value),placeholder:l("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!P.showToolsIntro,onChange:Ie=>Rt("showToolsIntro",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.showIntro.label","Show tools intro")})]}),n.jsxs("label",{className:Fe.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!P.enableExperimentalTools,onChange:Ie=>Rt("enableExperimentalTools",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.experimental.label","Enable experimental tools")})]})]}),n.jsxs("div",{className:Fe.settingsFooter,children:[n.jsxs("div",{className:Fe.inlineStatus,children:[K?n.jsx("span",{className:Fe.feedbackSuccess,children:l("account.tools.save.success","Settings saved.")}):Ze?null:n.jsx("span",{className:Fe.helperText,children:l("account.tools.save.noChanges","No changes to save.")}),$&&n.jsx("span",{className:Fe.helperText,children:l("account.tools.save.saving","Saving...")})]}),n.jsx("button",{type:"button",className:Fe.primaryButton,disabled:B||$||!Ze||!P,onClick:rs,children:l("account.tools.save.cta","Save settings")})]})]})]});default:return null}},Ee=()=>re?ge():se?n.jsxs(n.Fragment,{children:[Os(),ws()]}):he();return n.jsx(wt,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:n.jsxs("div",{className:Fe.page,children:[ve(),Ee()]})})};function Pge({user:t,refreshSession:e}){var P;const[s,r]=I.useState(()=>{var E;return(E=t==null?void 0:t.displayName)!=null?E:""}),[i,a]=I.useState(!1),[l,d]=I.useState(null),[u,h]=I.useState(!1),p=(t==null?void 0:t.avatarUrl)||Ige,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",y=(P=t==null?void 0:t.displayName)!=null?P:"",b=s.trim(),S=b.length===0||b.length>=JN&&b.length<=ZN,N=!!t&&b.length>0&&b!==y,T=!!(Bm&&S&&N&&!i),M=b.length>0&&!S?`Name must be between ${JN} and ${ZN} characters.`:null;I.useEffect(()=>{var E;r((E=t==null?void 0:t.displayName)!=null?E:""),h(!1),d(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const L=I.useMemo(()=>{var E;return t?[{label:"SFDataHub ID",value:t.id},(E=t.roles)!=null&&E.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:ek(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:ek(t.lastLoginAt)}:null].filter(w=>!!(w!=null&&w.value)):[]},[t]),k=async()=>{var E,w;if(!T||!Bm){Bm||d("Auth service is not configured.");return}try{a(!0),d(null),h(!1);const A=await fetch(Bm,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!A.ok){const B=await A.json().catch(()=>null);throw new Error((E=B==null?void 0:B.error)!=null?E:"Failed to update name.")}await e(),h(!0),r(b)}catch(A){const B=(w=A==null?void 0:A.message)!=null?w:"Failed to update name.";d(B)}finally{a(!1)}},v=E=>{E.key==="Enter"&&(E.preventDefault(),T&&k())},_=()=>{T&&k()};return t?n.jsxs("section",{className:Fe.card,children:[n.jsxs("div",{className:Fe.identityHeader,children:[n.jsx("img",{src:p,alt:"",className:Fe.identityAvatar}),n.jsxs("div",{children:[n.jsx("p",{className:Fe.identityName,children:t.displayName||"Unbenannter Nutzer"}),n.jsxs("p",{className:Fe.identityProvider,children:[g," sign-in"]})]}),n.jsx("span",{className:Fe.statusBadge,children:"Verified"})]}),n.jsxs("div",{className:Fe.identityForm,children:[n.jsxs("div",{className:Fe.nameInputWrap,children:[n.jsx("label",{className:Fe.nameLabel,children:"Display name"}),n.jsx("input",{type:"text",className:Fe.nameInput,value:s,onChange:E=>r(E.target.value),onKeyDown:v,onBlur:_,placeholder:"Enter your display name"})]}),n.jsx("button",{type:"button",className:Fe.nameSaveButton,disabled:!T,onClick:k,children:i?"Saving...":"Save"})]}),M&&n.jsx("p",{className:Fe.feedbackError,children:M}),l&&n.jsx("p",{className:Fe.feedbackError,children:l}),u&&n.jsx("p",{className:Fe.feedbackSuccess,children:"Name updated."}),L.length>0&&n.jsx("div",{className:Fe.metaGrid,children:L.map(E=>n.jsxs("div",{className:Fe.metaItem,children:[n.jsx("span",{className:Fe.metaLabel,children:E.label}),n.jsx("span",{className:Fe.metaValue,children:E.value})]},E.label))})]}):null}const Ct={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function Lge(){return n.jsx("div",{style:Ct.wrap,children:n.jsxs("div",{style:Ct.grid,children:[n.jsxs("aside",{style:Ct.tile,children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),n.jsx("p",{style:Ct.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),n.jsxs("nav",{children:[n.jsx("div",{style:Ct.groupLabel,children:"Allgemein"}),n.jsx(hs,{to:"list-views",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"List-View Switcher"}),n.jsx(hs,{to:"rescan-widget",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Rescan Widget (auto)"}),n.jsx(hs,{to:"upload-sim",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Upload Simulator"}),n.jsx(hs,{to:"hud/game-buttons",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"HUD  Game Buttons"}),n.jsx(hs,{to:"theme-maker",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Theme / Template Maker"}),n.jsx(hs,{to:"theme-maker-pro",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Theme / Template Maker  Pro"}),n.jsx("div",{style:Ct.groupLabel,children:"Templates"}),n.jsx(hs,{to:"templates/content-shell",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"ContentShell Template"}),n.jsx(hs,{to:"templates/blank",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Leere Vorlage"}),n.jsx(hs,{to:"templates/blank-alt",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Leere Vorlage (Neu)"}),n.jsx(hs,{to:"templates/blank-layout-2",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Leere Vorlage  Layout 2"}),n.jsx(hs,{to:"templates/blank-layout-3",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Leere Vorlage  Layout 3"}),n.jsx(hs,{to:"templates/blank-layout-4",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"Leere Vorlage  Layout 4"}),n.jsx("div",{style:Ct.groupLabel,children:"Guide Hub Demos"}),n.jsx(hs,{to:"am-rune-bonuses-demos",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),n.jsx("div",{style:Ct.groupLabel,children:"Graphics / Portraits"}),n.jsx(hs,{to:"portrait-maker",style:({isActive:t})=>({...Ct.link,...t?Ct.active:{}}),children:"PortraitMaker Demo"})]})]}),n.jsx("section",{style:Ct.tile,children:n.jsx(Wk,{})})]})})}const Dge="_page_1kokx_1",Mge="_topBar_1kokx_17",Fge="_tabs_1kokx_31",Bge="_tab_1kokx_31",$ge="_tabActive_1kokx_63",Oge="_searchWrap_1kokx_73",Vge="_input_1kokx_85",Uge="_stickyIcons_1kokx_105",zge="_iconBtn_1kokx_129",Hge="_tableWrap_1kokx_161",Gge="_table_1kokx_161",Wge="_th_1kokx_181",qge="_td_1kokx_181",Kge="_row_1kokx_201",Qge="_chips_1kokx_219",Yge="_chip_1kokx_219",Xge="_badges_1kokx_249",Jge="_badge_1kokx_249",Zge="_badgeMax_1kokx_275",exe="_badgeAchiev_1kokx_277",txe="_badgeX2_1kokx_279",sxe="_badgeX12_1kokx_281",nxe="_badgeX60_1kokx_283",rxe="_section_1kokx_289",ixe="_sectionHeader_1kokx_297",axe="_cardList_1kokx_315",oxe="_card_1kokx_315",lxe="_cardMax_1kokx_353",cxe="_iconXL_1kokx_355",dxe="_split_1kokx_369",uxe="_left_1kokx_379",hxe="_leftBtn_1kokx_399",pxe="_leftBtnActive_1kokx_411",mxe="_detail_1kokx_413",fxe="_grid_1kokx_433",gxe="_tile_1kokx_443",xxe="_drawer_1kokx_457",vxe="_timeline_1kokx_487",yxe="_node_1kokx_493",bxe="_dot_1kokx_501",rt={page:Dge,topBar:Mge,tabs:Fge,tab:Bge,tabActive:$ge,searchWrap:Oge,input:Vge,stickyIcons:Uge,iconBtn:zge,tableWrap:Hge,table:Gge,th:Wge,td:qge,row:Kge,chips:Qge,chip:Yge,badges:Xge,badge:Jge,badgeMax:Zge,badgeAchiev:exe,badgeX2:txe,badgeX12:sxe,badgeX60:nxe,section:rxe,sectionHeader:ixe,cardList:axe,card:oxe,cardMax:lxe,iconXL:cxe,split:dxe,left:uxe,leftBtn:hxe,leftBtnActive:pxe,detail:mxe,grid:fxe,tile:gxe,drawer:xxe,timeline:vxe,node:yxe,dot:bxe},tk=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function Br(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function _xe(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function wxe(t){var s,r;const e=(r=(s=t.note)==null?void 0:s.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function Wf({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:rt.iconBtn,title:t||"Rune",children:e})}function Db({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:rt.iconXL,title:t||"Rune",children:e})}function jxe(t){const e=new Map;for(const s of t){const r=s.tier&&s.tier.trim()!==""?s.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(s)}return Array.from(e.entries())}function Wh({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),n.jsx("div",{className:rt.chips,children:e.map((s,r)=>n.jsx("span",{className:rt.chip,children:s},r))})}function qh({r:t,isMax:e}){const s=[];e&&s.push({label:"MAX",cls:rt.badgeMax}),_xe(t)&&s.push({label:"Achievement",cls:rt.badgeAchiev});const r=wxe(t);return r==="x2"&&s.push({label:"x2",cls:rt.badgeX2}),r==="x12"&&s.push({label:"x12",cls:rt.badgeX12}),r==="x60"&&s.push({label:"x60",cls:rt.badgeX60}),s.length===0?null:n.jsx("div",{className:rt.badges,children:s.map((i,a)=>{var l;return n.jsx("span",{className:`${rt.badge} ${(l=i.cls)!=null?l:""}`,children:i.label},a)})})}function Sxe(t){const e=t.trim().toLowerCase();return e?tk.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):tk}function Nxe({data:t}){const e=Math.max(...t.map(i=>Br(i.amount))),s=I.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:rt.stickyIcons,children:s.map((i,a)=>n.jsx("div",{onClick:()=>r(i),children:n.jsx(Wf,{label:i||"(no tier)"})},a))}),n.jsx("div",{className:rt.tableWrap,children:n.jsxs("table",{className:rt.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:rt.th,style:{width:42}}),n.jsx("th",{className:rt.th,style:{width:120},children:"Amount"}),n.jsx("th",{className:rt.th,children:"Bonuses"}),n.jsx("th",{className:rt.th,style:{width:220},children:"Tags"})]})}),n.jsx("tbody",{children:t.map((i,a)=>{const l=Math.abs(Br(i.amount)-e)<1e-6;return n.jsxs("tr",{className:rt.row,"data-tier":i.tier||"(no tier)",children:[n.jsx("td",{className:rt.td,children:n.jsx(Wf,{label:i.tier||""})}),n.jsx("td",{className:rt.td,children:i.amount}),n.jsx("td",{className:rt.td,children:n.jsx(Wh,{r:i})}),n.jsx("td",{className:rt.td,children:n.jsx(qh,{r:i,isMax:l})})]},a)})})]})})]})}function kxe({data:t}){const e=jxe(t),s=Math.max(...t.map(r=>Br(r.amount)));return n.jsx(n.Fragment,{children:e.map(([r,i])=>n.jsxs("section",{className:rt.section,children:[n.jsx("div",{className:rt.sectionHeader,children:r}),n.jsx("div",{className:rt.cardList,children:i.map((a,l)=>{const d=Math.abs(Br(a.amount)-s)<1e-6;return n.jsxs("div",{className:`${rt.card} ${d?rt.cardMax:""}`,children:[n.jsx(Db,{label:r}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:a.amount}),n.jsx(qh,{r:a,isMax:d})]}),n.jsx(Wh,{r:a})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},l)})})]},r))})}function Txe({data:t}){var l;const e=Array.from(new Set(t.map(d=>d.tier||"(no tier)"))),[s,r]=I.useState((l=e[0])!=null?l:""),i=t.filter(d=>(d.tier||"(no tier)")===s),a=Math.max(...t.map(d=>Br(d.amount)));return n.jsxs("div",{className:rt.split,children:[n.jsx("div",{className:rt.left,children:e.map(d=>n.jsxs("button",{className:`${rt.leftBtn} ${d===s?rt.leftBtnActive:""}`,onClick:()=>r(d),children:[n.jsx(Wf,{label:d}),n.jsx("span",{children:d})]},d))}),n.jsxs("div",{className:rt.detail,children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(Db,{label:s}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:s}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((d,u)=>{const h=Math.abs(Br(d.amount)-a)<1e-6;return n.jsxs("div",{className:rt.card,style:{gridTemplateColumns:"1fr auto"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:d.amount}),n.jsx(qh,{r:d,isMax:h})]}),n.jsx(Wh,{r:d})]}),n.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function Cxe({data:t}){const[e,s]=I.useState(null),r=Math.max(...t.map(i=>Br(i.amount)));return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:rt.grid,children:t.map((i,a)=>n.jsx("div",{className:rt.tile,onClick:()=>s(i),title:i.tier||"",children:n.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[n.jsx(Wf,{label:i.tier||""}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&n.jsxs("div",{className:rt.drawer,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx(Db,{label:e.tier||""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:e.amount}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),n.jsx("button",{className:rt.tab,onClick:()=>s(null),children:"Close"})]}),n.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:n.jsx(qh,{r:e,isMax:Math.abs(Br(e.amount)-r)<1e-6})}),n.jsx(Wh,{r:e})]})]})}function Exe({data:t}){const e=Math.max(...t.map(r=>Br(r.amount))),s=[...t].sort((r,i)=>Br(r.amount)-Br(i.amount));return n.jsx("div",{className:rt.timeline,children:s.map((r,i)=>{const a=Math.abs(Br(r.amount)-e)<1e-6;return n.jsxs("div",{className:rt.node,children:[n.jsx("div",{className:rt.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx("strong",{children:r.amount}),n.jsx(qh,{r,isMax:a})]}),n.jsx(Wh,{r})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const Axe=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function Ixe(){const[t,e]=I.useState("A: Compact Table"),[s,r]=I.useState(""),i=Sxe(s);return n.jsxs("div",{className:rt.page,children:[n.jsxs("div",{className:rt.topBar,children:[n.jsx("div",{className:rt.tabs,children:Axe.map(a=>n.jsx("button",{onClick:()=>e(a),className:`${rt.tab} ${t===a?rt.tabActive:""}`,children:a},a))}),n.jsx("div",{className:rt.searchWrap,children:n.jsx("input",{className:rt.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:s,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&n.jsx(Nxe,{data:i}),t==="B: Card Track"&&n.jsx(kxe,{data:i}),t==="C: Two-Pane"&&n.jsx(Txe,{data:i}),t==="D: Icon Grid + Drawer"&&n.jsx(Cxe,{data:i}),t==="E: Timeline"&&n.jsx(Exe,{data:i})]})}function Rxe(){return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),n.jsx("div",{className:"mt-4 grid gap-3",children:n.jsx(hs,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const be={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},Pxe=()=>n.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),gl={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function Lxe(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function Td(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",Lxe(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function fA(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",s={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},l={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},d={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},p={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},y={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:s,crystal:r,carbon:i,chrome:a,gold:l,obsidian:d,neon:u,plasma:h,aurora:p,satin:g,matte:y,holo:b}[t.material]}function Io(t){const e={color:be.title,borderColor:be.border,...fA(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const Kh=({children:t})=>n.jsx("span",{className:"relative z-10",children:t});function Cd({fx:t,clip:e}){return n.jsxs(n.Fragment,{children:[t.shine&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:n.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&n.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&n.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&n.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((s,r)=>n.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function Dxe({fx:t,children:e}){const s=Td(t),r=Io(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),n.jsx(Cd,{fx:t,clip:i}),t.withIcon&&n.jsx(Zk,{size:16,className:"relative z-10"}),n.jsx(Kh,{children:e})]})}function Mxe({fx:t,children:e}){const s=Td(t),r=Io(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Cd,{fx:t,clip:i}),t.withIcon&&n.jsx(eT,{size:16,className:"relative z-10"}),n.jsx(Kh,{children:e})]})}function Fxe({fx:t,children:e}){const s=Td(t),r=Io(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Cd,{fx:t,clip:i}),t.withIcon&&n.jsx(Ml,{size:16,className:"relative z-10"}),n.jsx(Kh,{children:e})]})}function Bxe({fx:t,children:e}){const s=Td(t),r=Io(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${be.tile}, ${be.active})`}}),n.jsx(Cd,{fx:t,clip:i}),t.withIcon&&n.jsx(tT,{size:16,className:"relative z-10"}),n.jsx(Kh,{children:e})]})}function $xe({fx:t,children:e}){const s=Td(t),r=Io(t);return n.jsxs("button",{disabled:t.disabled,className:`${s} rounded-full overflow-hidden`,style:r,children:[n.jsx(Cd,{fx:t}),t.withIcon&&n.jsx(Zf,{size:16,className:"relative z-10"}),n.jsx(Kh,{children:e})]})}function Oxe({fx:t,tabs:e}){const[s,r]=I.useState(0);return n.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:e.map((i,a)=>n.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===s?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===s?be.active:"transparent",border:a===s&&t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[t.withIcon&&a===s&&n.jsx(Zf,{size:14,className:"inline mr-1"}),i]},a))})}function Vxe({fx:t}){const e=Td(t),s=Io(t);return n.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:s,"aria-label":"Icon action",children:n.jsx(rT,{})})}const A0={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function Uxe({fx:t,setFx:e}){const s=(d,u)=>e(h=>({...h,[d]:u})),r=d=>e(u=>({...u,[d]:!u[d]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],l=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return n.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${be.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:be.title},children:"Presets"}),Object.keys(A0).map(d=>n.jsx("button",{onClick:()=>e(u=>A0[d](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:be.btn,borderColor:be.border,color:be.title},children:d},d))]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${be.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:be.title},children:"Material"}),i.map(d=>n.jsx("button",{onClick:()=>s("material",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===d?"":"opacity-70"}`,style:{backgroundColor:t.material===d?be.active:be.btn,borderColor:be.border,color:be.title},children:d},d)),n.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:be.title},children:"Size"}),["sm","md","lg"].map(d=>n.jsx("button",{onClick:()=>s("size",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===d?"":"opacity-70"}`,style:{backgroundColor:t.size===d?be.active:be.btn,borderColor:be.border,color:be.title},children:d.toUpperCase()},d)),n.jsx("button",{onClick:()=>e(d=>({...d,withIcon:!d.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?be.active:be.btn,borderColor:be.border,color:be.title},children:"Icon"}),n.jsx("button",{onClick:()=>e(d=>({...d,disabled:!d.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?be.active:be.btn,borderColor:be.border,color:be.title},children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${be.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:be.title},children:"Core FX"}),a.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?be.active:be.btn,borderColor:be.border,color:be.title},children:u},d))]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:be.title},children:"Advanced"}),l.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?be.active:be.btn,borderColor:be.border,color:be.title},children:u},d))]}),n.jsx("button",{onClick:()=>e(gl),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:be.btn,borderColor:be.border,color:be.title},children:"Reset"})]})}function ss({fx:t,className:e="",style:s={},children:r,clip:i}){const a=Io(t);return n.jsxs("div",{className:`relative ${e}`,style:{...a,...s},children:[n.jsx(Cd,{fx:t,clip:i}),n.jsx("div",{className:"relative z-10",children:r})]})}function zn({fx:t,className:e="",children:s}){return n.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:s})}function zxe({fx:t}){const[e,s]=I.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Toggle Chips"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return n.jsx(ss,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:be.border},children:n.jsx("button",{onClick:()=>s(l=>a?l.filter(d=>d!==i):[...l,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function Hxe({fx:t}){return n.jsxs(zn,{fx:t,className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",style:{color:be.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>n.jsx(ss,{fx:t,className:"rounded-xl border p-2",style:{borderColor:be.border},children:n.jsxs("button",{className:"relative",children:[n.jsx(rT,{size:16}),e===3&&n.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function Gxe({fx:t}){return n.jsxs(ss,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Breadcrumb HUD"}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>n.jsx(ss,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:be.border},children:e},e))})]})}function Wxe({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Stat Tiles"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(s=>n.jsxs(ss,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:be.border},children:[n.jsx("div",{className:"text-[10px] opacity-80",children:s.k}),n.jsx("div",{className:"text-sm",children:s.v}),n.jsx("div",{className:"text-[11px] opacity-80",children:s.d})]},s.k))})]})}function qxe({fx:t}){const[e,s]=I.useState(.66);return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Meter / Energy Bar"}),n.jsx(ss,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:be.border},children:n.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),n.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsxs("button",{onClick:()=>s(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function Kxe({fx:t}){return n.jsxs(zn,{fx:t,className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-sm",style:{color:be.title},children:"Badge / Medal"}),n.jsxs(ss,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:be.border},children:[n.jsx(Ml,{size:16}),n.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function Qxe({fx:t}){const[e,s]=I.useState(!1);return n.jsxs(zn,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:be.title},children:"Toast / Notification"}),n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&n.jsxs(ss,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:be.border},children:[n.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),n.jsx("button",{onClick:()=>s(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function Yxe({fx:t}){const[e,s]=I.useState(!0);return n.jsxs(zn,{fx:t,className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:be.title},children:"Toggle Switch"}),n.jsxs(ss,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:be.border},children:[n.jsx("button",{onClick:()=>s(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),n.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function Xxe({fx:t}){const[e,s]=I.useState(!1),r=["Overview","Stats","Activity","Hydra"];return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Dropdown HUD"}),n.jsx(ss,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:be.border},children:n.jsx("button",{onClick:()=>s(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&n.jsx(ss,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:be.border},children:r.map(i=>n.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function Jxe({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Radial Menu (Preview)"}),n.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[n.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"}}),e.map((s,r)=>{const i=r/e.length*Math.PI*2,a=56,l=56+Math.cos(i)*a,d=56+Math.sin(i)*a;return n.jsx(ss,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:l,top:d,borderColor:be.border},children:s},s)}),n.jsx(ss,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:be.border},children:"Menu"})]})]})}function Zxe({fx:t}){const e=[1,2,3,4,5],[s,r]=I.useState(2);return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Pagination HUD"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>n.jsx(ss,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===s?"":"opacity-80"}`,style:{borderColor:be.border},children:n.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function eve({fx:t}){const[e,s]=I.useState(!1);return n.jsxs(zn,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:be.title},children:"Modal HUD"}),n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&n.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:n.jsxs(ss,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:be.border},children:[n.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),n.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>s(!1),children:"Cancel"})}),n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function tve({fx:t}){const[e,s]=I.useState("");return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Search HUD"}),n.jsx(ss,{fx:t,className:"rounded-lg border p-2",style:{borderColor:be.border},children:n.jsx("input",{value:e,onChange:r=>s(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function sve({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[s,r]=I.useState("Bravo");return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"List Selectable"}),n.jsx("div",{className:"space-y-2",children:e.map(i=>n.jsx(ss,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${s===i?"":"opacity-80"}`,style:{borderColor:be.border},children:n.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function nve({fx:t}){const e=["Init","Scan","Verify","Done"],[s,r]=I.useState(1);return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Steps"}),n.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>n.jsxs(ee.Fragment,{children:[n.jsx(ss,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=s?"":"opacity-70"}`,style:{borderColor:be.border},children:a+1}),a<e.length-1&&n.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,s-1)),children:"Back"})}),n.jsx(ss,{fx:t,className:"rounded-md border",style:{borderColor:be.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,s+1)),children:"Next"})})]})]})}function rve({fx:t}){const e=["","","","","",""];return n.jsxs(zn,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:be.title},children:"Dock Bar"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map((s,r)=>n.jsx(ss,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:be.border},children:s},r))})]})}function ive(){const[t,e]=I.useState(gl);return n.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:be.bg,color:be.txt},children:[n.jsx(Pxe,{}),n.jsxs("header",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(YP,{}),n.jsx("h1",{className:"text-xl font-bold",style:{color:be.title},children:"Game Buttons Playground"}),n.jsx("span",{className:"text-xs",style:{color:be.txt2},children:"(Materials + FX extended + Presets)"})]})}),n.jsx(Uxe,{fx:t,setFx:e})]}),n.jsxs("section",{className:"grid gap-4",children:[n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:be.title},children:"Shapes"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(Dxe,{fx:t,children:[n.jsx(Zk,{size:16})," Diamond"]}),n.jsxs(Mxe,{fx:t,children:[n.jsx(eT,{size:16})," Hex"]}),n.jsxs(Fxe,{fx:t,children:[n.jsx(Ml,{size:16})," Octagon/Shield"]}),n.jsxs(Bxe,{fx:t,children:[n.jsx(tT,{size:16})," Shard"]}),n.jsxs($xe,{fx:t,children:[n.jsx(Zf,{size:16})," Pill/Chip"]}),n.jsx(Vxe,{fx:t})]})]}),n.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold",style:{color:be.title},children:"Tabs"}),n.jsx(Oxe,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),n.jsx("section",{className:"grid gap-4",children:n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:be.tile,border:t.baseBorder?`1px solid ${be.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:be.title},children:"More HUD Patterns"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[n.jsx(zxe,{fx:t}),n.jsx(Hxe,{fx:t}),n.jsx(Gxe,{fx:t}),n.jsx(Wxe,{fx:t}),n.jsx(qxe,{fx:t}),n.jsx(Kxe,{fx:t}),n.jsx(Qxe,{fx:t}),n.jsx(Yxe,{fx:t}),n.jsx(Xxe,{fx:t}),n.jsx(Jxe,{fx:t}),n.jsx(Zxe,{fx:t}),n.jsx(eve,{fx:t}),n.jsx(tve,{fx:t}),n.jsx(sve,{fx:t}),n.jsx(nve,{fx:t}),n.jsx(rve,{fx:t})]})]})}),n.jsx(ave,{}),n.jsx("footer",{className:"text-center text-xs",style:{color:be.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function ave(){return I.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(gl.material),"Material type present");const e=Io(gl);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=fA({...gl,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof gl[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries(A0).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...gl});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const eh={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},sk={Arcade:{...eh,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...eh,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},Rc={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},gA={display:"grid",gap:8,alignItems:"center"};function ia({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...gA,gridTemplateColumns:"120px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function by({label:t,value:e,min:s,max:r,onChange:i}){return n.jsxs("label",{style:{...gA,gridTemplateColumns:"120px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),n.jsx("input",{type:"number",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function nk(){const[t,e]=ee.useState(eh),s=ee.useRef(null),r=u=>{const h=s.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};ee.useEffect(()=>{r(t)},[t]);const i=u=>e(sk[u]),a=()=>e(eh),l=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},d=async u=>{const h=await u.text();e({...eh,...JSON.parse(h)})};return n.jsxs("div",{ref:s,style:{color:"var(--text, #FFFFFF)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(sk).map(u=>n.jsx("button",{style:Rc,onClick:()=>i(u),children:u},u)),n.jsx("button",{style:Rc,onClick:a,children:"Default"}),n.jsx("button",{style:Rc,onClick:l,children:"Export JSON"}),n.jsxs("label",{style:{...Rc,display:"inline-block"},children:["Import JSON",n.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&d(u.target.files[0]),style:{display:"none"}})]})]}),n.jsx(ia,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),n.jsx(ia,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),n.jsx(ia,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),n.jsx(ia,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),n.jsx(ia,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),n.jsx(ia,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),n.jsx(ia,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),n.jsx(ia,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),n.jsx(ia,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),n.jsx(by,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),n.jsx(by,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),n.jsx(by,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),n.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[n.jsx("button",{style:{...Rc,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),n.jsx("button",{style:Rc,children:"Secondary"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const I0={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},rk={"SFDataHub (Default)":{...I0},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},Bg={display:"grid",gap:8,alignItems:"center"},cl={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},dl={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function Dr({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...Bg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function aa({label:t,value:e,min:s,max:r,step:i=1,onChange:a,suffix:l}){return n.jsxs("label",{style:{...Bg,gridTemplateColumns:"140px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value))}),n.jsx("input",{type:"number",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value||"0"))})]})}function ove({label:t,checked:e,onChange:s}){return n.jsxs("label",{style:{...Bg,gridTemplateColumns:"1fr 46px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"checkbox",checked:e,onChange:r=>s(r.target.checked)})]})}function ik(){const[t,e]=ee.useState(I0),s=ee.useRef(null),r=h=>{const p=s.current;p&&(p.style.setProperty("--page",h.page),p.style.setProperty("--tile",h.tile),p.style.setProperty("--tile-hover",h.tileHover),p.style.setProperty("--nav",h.nav),p.style.setProperty("--active",h.active),p.style.setProperty("--text",h.text),p.style.setProperty("--text-soft",h.textSoft),p.style.setProperty("--title",h.title),p.style.setProperty("--line",h.line),p.style.setProperty("--accent",h.accent),p.style.setProperty("--success",h.success),p.style.setProperty("--warning",h.warning),p.style.setProperty("--danger",h.danger),p.style.setProperty("--radius",`${h.radius}px`),p.style.setProperty("--border",`${h.border}px`),p.style.setProperty("--gap",`${h.gap}px`),p.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),p.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),p.style.setProperty("--noise",`${h.noise}%`),p.style.setProperty("--font",h.fontFamily),p.style.setProperty("--font-size",`${h.fontSize}px`),p.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),p.style.setProperty("--glow",`${h.glow}`),p.style.setProperty("--scanlines",`${h.scanlines}`))};ee.useEffect(()=>{r(t)},[t]);const i=(h,p)=>e(g=>({...g,[h]:p})),a=h=>e(p=>({...p,...rk[h]})),l=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download="sfdatahub-theme-pro.json",p.click()},d=async h=>{try{const p=await h.text(),g=JSON.parse(p);e({...t,...g})}catch(p){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return n.jsxs("div",{ref:s,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(rk).map(h=>n.jsx("button",{style:cl,onClick:()=>a(h),children:h},h)),n.jsx("button",{style:cl,onClick:()=>e(I0),children:"Reset"}),n.jsx("button",{style:cl,onClick:l,children:"Export"}),n.jsxs("label",{style:{...cl,display:"inline-block"},children:["Import",n.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&d(h.target.files[0])})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(Dr,{label:"Page",value:t.page,onChange:h=>i("page",h)}),n.jsx(Dr,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),n.jsx(Dr,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),n.jsx(Dr,{label:"Active",value:t.active,onChange:h=>i("active",h)}),n.jsx(Dr,{label:"Text",value:t.text,onChange:h=>i("text",h)}),n.jsx(Dr,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),n.jsx(Dr,{label:"Title",value:t.title,onChange:h=>i("title",h)}),n.jsx(Dr,{label:"Line",value:t.line,onChange:h=>i("line",h)}),n.jsx(Dr,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[n.jsx(Dr,{label:"Success",value:t.success,onChange:h=>i("success",h)}),n.jsx(Dr,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),n.jsx(Dr,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(aa,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),n.jsx(aa,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),n.jsx(aa,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),n.jsx(aa,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),n.jsx(aa,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),n.jsx(aa,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("label",{style:{...Bg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),n.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),n.jsx(aa,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),n.jsx(ove,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(aa,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),n.jsx(aa,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[n.jsxs("span",{style:dl,children:[n.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),n.jsx("span",{style:{...dl,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),n.jsx("span",{style:{...dl,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),n.jsx("span",{style:{...dl,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),n.jsxs("span",{style:dl,children:["Radius: ",t.radius]}),n.jsxs("span",{style:dl,children:["Shadow: ",t.shadow]}),n.jsxs("span",{style:dl,children:["Noise: ",t.noise,"%"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),n.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",n.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),n.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,p)=>n.jsxs("div",{style:{display:"grid",gap:4},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[n.jsx("span",{children:h.label}),n.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),n.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:n.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},p))}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[n.jsx("button",{style:{...cl,background:"var(--tile-hover)"},children:"Open Profile"}),n.jsx("button",{style:{...cl,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,p)=>n.jsx("button",{style:{...cl,background:p===0?"var(--tile-hover)":"transparent",borderColor:p===0?"var(--active)":"var(--line)",boxShadow:p===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,p)=>n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),n.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),n.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},p))}),n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[n.jsx("div",{style:{padding:10},children:"Attribute"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,p)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:p%2?"rgba(255,255,255,.025)":"transparent"},children:[n.jsx("div",{style:{padding:10},children:h[0]}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),n.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},p))]})]})]}),n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const ak=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function lve(t=120){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,className:ak[s%ak.length],level:200+s%50,guild:s%3===0?`Guild ${s%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const _y={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function ok(){const[t,e]=I.useState("rows"),[s,r]=I.useState(0),[i,a]=I.useState(""),[l,d]=I.useState(60),u=I.useMemo(()=>lve(240),[]),h=I.useMemo(()=>u.filter(p=>p.level>=s).filter(p=>p.name.toLowerCase().includes(i.toLowerCase())).slice(0,l),[u,s,i,l]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("select",{value:t,onChange:p=>e(p.target.value),children:[n.jsx("option",{value:"rows",children:"Compact Rows"}),n.jsx("option",{value:"cards",children:"Card Grid"}),n.jsx("option",{value:"masonry",children:"Masonry"})]}),n.jsx("input",{placeholder:"Search",value:i,onChange:p=>a(p.target.value)}),n.jsxs("label",{children:["Min Level ",n.jsx("input",{type:"number",value:s,onChange:p=>r(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]}),n.jsxs("label",{children:["Limit ",n.jsx("input",{type:"number",value:l,onChange:p=>d(parseInt(p.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&n.jsx("div",{style:{..._y,padding:0,overflow:"hidden"},children:h.map(p=>{var g;return n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:700},children:[p.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),n.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>{var g;return n.jsxs("div",{style:_y,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:p.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),n.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[n.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),n.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=p.kpi)==null?void 0:g.toFixed(1)})]})]},p.id)})}),t==="masonry"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(p=>n.jsxs("div",{style:{..._y,height:140+parseInt(p.id)%3*40},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:p.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:p.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",p.level," ",p.guild?` ${p.guild}`:""]}),n.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},p.id))})]})}function lk(t=24){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,server:`EU${1+s%3}`,lastScanMinsAgo:60+s*7%240});return e}function ck(){const[t,e]=I.useState(120),[s,r]=I.useState(()=>lk(24));I.useEffect(()=>{const a=setInterval(()=>{r(l=>{if(!l.length)return l;const d=Math.floor(Math.random()*l.length),u=[...l];return u[d]={...u[d],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),I.useEffect(()=>{const a=setInterval(()=>{r(l=>l.map(d=>({...d,lastScanMinsAgo:d.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=I.useMemo(()=>s.filter(a=>a.lastScanMinsAgo>t),[s,t]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Freshness TTL (min) ",n.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),n.jsx("button",{onClick:()=>r(lk(24)),children:"Reset Demo Data"})]}),n.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),n.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[n.jsx("div",{children:"Player"}),n.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{children:[a.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),n.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&n.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function cve(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),s=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:s}}function dk(){const[t,e]=I.useState("idle"),[s,r]=I.useState(null),[i,a]=I.useState(!1),l=I.useCallback(async d=>{var h;d.preventDefault(),a(!1);const u=(h=d.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const p=await u.text(),{isHar:g,isSf:y}=cve(p);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!y){e("error"),r({isHar:g,isSf:y,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:y,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":y?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(p.length/2500)} (rough).`})}catch(p){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(p==null?void 0:p.message)||"Parse failed"})}}},[]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),n.jsx("div",{onDragOver:d=>{d.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:l,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),n.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),n.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Status:"})," ",t]}),s?n.jsxs("ul",{children:[n.jsxs("li",{children:["isHar: ",String(s.isHar)]}),n.jsxs("li",{children:["isSf: ",String(s.isSf)]}),n.jsxs("li",{children:["sizeKB: ",s.sizeKB]}),s.error&&n.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",s.error]}),s.summary&&n.jsxs("li",{children:["summary: ",s.summary]})]}):n.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const dve="_wrap_hxkkn_3",uve="_left_hxkkn_17",hve="_right_hxkkn_25",pve="_canvasCard_hxkkn_33",mve="_hint_hxkkn_83",fve="_panel_hxkkn_95",gve="_panelTitle_hxkkn_109",xve="_panelBody_hxkkn_121",oa={wrap:dve,left:uve,right:hve,canvasCard:pve,hint:mve,panel:fve,panelTitle:gve,panelBody:xve},vve=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],yve=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function bve(){const[t,e]=I.useState("Canvas ist vorbereitet (526526)."),s=I.useRef(null),[r,i]=I.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,l]=I.useState(!0);I.useEffect(()=>{const p=document.getElementById("PortraitCanvas");if(!p){e("Fehler: Canvas nicht gefunden.");return}try{s.current&&typeof s.current.dispose=="function"&&s.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var N;const S=String((N=b==null?void 0:b[0])!=null?N:"");S.includes("Failed to load URL")&&S.includes("PortraitMaker-res/portraits/")||g(...b)});let y=null;try{y=new Ek(p,{...r}),s.current=y,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return y&&(y.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{y&&typeof y.dispose=="function"&&y.dispose()}finally{a&&(console.error=g)}}},[r,a]);const d=()=>{const p=document.getElementById("PortraitCanvas");if(!p)return;const g=p.toDataURL("image/png"),y=document.createElement("a");y.href=g,y.download="portrait.png",y.click()},u=p=>{i(g=>({...g,genderName:p,beard:p==="female"?0:g.beard}))},h=r.special!==0;return n.jsxs("div",{className:oa.wrap,children:[n.jsx("div",{className:oa.left,children:n.jsxs("div",{className:oa.canvasCard,children:[n.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),n.jsx("div",{className:oa.hint,children:t})]})}),n.jsx("div",{className:oa.right,children:n.jsxs("div",{className:oa.panel,children:[n.jsx("h2",{className:oa.panelTitle,children:"Controls"}),n.jsx("div",{className:oa.panelBody,children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",n.jsx("input",{type:"number",value:r.special,onChange:p=>i(g=>({...g,special:Number(p.target.value||0)})),style:{width:100}})]}),n.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[n.jsxs("label",{children:["Gender:",n.jsxs("select",{value:r.genderName,onChange:p=>u(p.target.value),children:[n.jsx("option",{value:"male",children:"male"}),n.jsx("option",{value:"female",children:"female"})]})]}),n.jsxs("label",{children:["Class:",n.jsx("input",{type:"number",min:1,value:r.class,onChange:p=>i(g=>({...g,class:Number(p.target.value||0)})),style:{width:80}})]}),n.jsxs("label",{children:["Race:",n.jsx("input",{type:"number",min:1,value:r.race,onChange:p=>i(g=>({...g,race:Number(p.target.value||0)})),style:{width:80}})]})]}),n.jsxs("label",{children:["Background:",n.jsx("select",{value:r.background,onChange:p=>i(g=>({...g,background:p.target.value})),children:vve.map(p=>n.jsx("option",{value:p,children:p===""?"transparent":p},p))})]}),n.jsxs("label",{children:["Frame:",n.jsx("select",{value:r.frame,onChange:p=>i(g=>({...g,frame:p.target.value})),children:yve.map(p=>n.jsx("option",{value:p,children:p===""?"none":p},p))})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:p=>i(g=>({...g,showBorder:p.target.checked}))}),"showBorder"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:a,onChange:p=>l(p.target.checked)}),"Mute 404 logs (Playground)"]}),n.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:n.jsx("button",{onClick:d,children:"Export PNG"})}),h&&n.jsxs("div",{className:oa.hint,children:["Hinweis: Bei ",n.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const _ve=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],wve=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],jve=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function Sve(){return n.jsx(wt,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),n.jsx("ul",{className:"mt-2 space-y-2",children:_ve.map(t=>n.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[n.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),n.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),n.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[n.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),n.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),n.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),n.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:wve.map(t=>n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),n.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),n.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),n.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:jve.map(t=>n.jsx("li",{children:t},t))})]})]}),children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),n.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),n.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),n.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),n.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),n.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),n.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),n.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),n.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),n.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const Nve={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function kve(){return n.jsx(wt,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:n.jsx("div",{className:"flex w-full justify-center pt-10",children:n.jsx(RE,{config:Nve,label:"Playground Avatar"})})})}const Tve=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function Cve(){return n.jsx(wt,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:Tve.map(t=>n.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),n.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),n.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const Eve="_avatarFrameMask_1pzs8_5",Ave="_avatarFrameOverlay_1pzs8_7",uk={avatarFrameMask:Eve,avatarFrameOverlay:Ave},Ive=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function Rve(){return n.jsx(wt,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:n.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[n.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:Ive.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),n.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),n.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),n.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:uk.avatarFrameMask,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:uk.avatarFrameOverlay,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const Pve=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function Lve(){return n.jsx(wt,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"flex w-full flex-col gap-4",children:Pve.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,n.jsx("span",{children:"Leer"})]}),n.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),n.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function Dve(){return n.jsx(wt,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),n.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const Z={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},Mve={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Fve={maxWidth:1200,margin:"0 auto"},Bve={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function $ve(){return n.jsx("div",{style:Mve,children:n.jsxs("div",{style:Fve,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"HAR Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Bve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),n.jsxs("div",{style:{border:`1px dashed ${Z.line}`,borderRadius:12,padding:24,textAlign:"center",background:Z.tileAlt},children:["Drop .har file here or"," ",n.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),n.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const Ove={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Vve={maxWidth:1200,margin:"0 auto"},Uve={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function zve(){return n.jsx("div",{style:Ove,children:n.jsxs("div",{style:Vve,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"JSON/CSV Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Uve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{children:["Upload JSON ",n.jsx("input",{type:"file",accept:".json"})]}),n.jsxs("label",{children:["Upload CSV ",n.jsx("input",{type:"file",accept:".csv"})]})]}),n.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const Hve={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Gve={maxWidth:1200,margin:"0 auto"},Wve={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function qve(){return n.jsx("div",{style:Hve,children:n.jsxs("div",{style:Gve,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Index Schema Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Wve,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const Kve={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Qve={maxWidth:1200,margin:"0 auto"},Yve={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Xve(){return n.jsx("div",{style:Kve,children:n.jsxs("div",{style:Qve,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Player Profile (Contained) Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Yve,children:[n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${Z.line}`}}),n.jsxs("div",{children:[n.jsx("h3",{style:{margin:"4px 0",color:Z.title},children:"NightRaven"}),n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>n.jsx("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const Jve={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Zve={maxWidth:1200,margin:"0 auto"},eye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function tye(){return n.jsx("div",{style:Jve,children:n.jsxs("div",{style:Zve,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Guild Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:eye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Z.title},children:"Ravens"}),n.jsx("span",{children:"Avg Lvl 465"}),n.jsx("span",{children:"Fresh scans 82%"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Z.title},children:"Arcana"}),n.jsx("span",{children:"Avg Lvl 458"}),n.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const sye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},nye={maxWidth:1200,margin:"0 auto"},rye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function iye(){return n.jsx("div",{style:sye,children:n.jsxs("div",{style:nye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Server Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:rye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const aye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},oye={maxWidth:1200,margin:"0 auto"},lye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function cye(){return n.jsx("div",{style:aye,children:n.jsxs("div",{style:oye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Rankings Views Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:lye,children:[n.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>n.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${Z.line}`,borderRadius:10},children:t},t))}),n.jsx("div",{style:{border:`1px solid ${Z.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[n.jsx("b",{style:{color:Z.title},children:t.name}),n.jsx("span",{children:t.delta}),n.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const dye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},uye={maxWidth:1200,margin:"0 auto"},hye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function pye(){return n.jsx("div",{style:dye,children:n.jsxs("div",{style:uye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"KPI Dashboard Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:hye,children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>n.jsx("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const mye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},fye={maxWidth:1200,margin:"0 auto"},gye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function xye(){return n.jsx("div",{style:mye,children:n.jsxs("div",{style:fye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Progression Tracker Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:gye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Z.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const vye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},yye={maxWidth:1200,margin:"0 auto"},bye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function _ye(){return n.jsx("div",{style:vye,children:n.jsxs("div",{style:yye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Legendary & Pets Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:bye,children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:"Legendary Tracker"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Shadow Bow "}),n.jsx("li",{children:"Mythic Ring "})]})]}),n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:"Pets"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Firewolf 4/5"}),n.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const wye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},jye={maxWidth:1200,margin:"0 auto"},Sye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Nye(){return n.jsx("div",{style:wye,children:n.jsxs("div",{style:jye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Community Scans Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Sye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>n.jsx("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const kye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Tye={maxWidth:1200,margin:"0 auto"},Cye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Eye(){return n.jsx("div",{style:kye,children:n.jsxs("div",{style:Tye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Creator Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Cye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const Aye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Iye={maxWidth:1200,margin:"0 auto"},Rye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Pye(){return n.jsx("div",{style:Aye,children:n.jsxs("div",{style:Iye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Feedback Form Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Rye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Category"}),n.jsxs("select",{style:{background:"#152A42",color:Z.text,border:`1px solid ${Z.line}`,borderRadius:8,padding:"6px 8px"},children:[n.jsx("option",{children:"UI"}),n.jsx("option",{children:"Data"}),n.jsx("option",{children:"Bug"})]})]}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Message"}),n.jsx("textarea",{rows:4,style:{background:"#152A42",color:Z.text,border:`1px solid ${Z.line}`,borderRadius:8,padding:"6px 8px"}})]}),n.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${Z.line}`,borderRadius:10},children:"Send"})]})})]})})}const Lye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Dye={maxWidth:1200,margin:"0 auto"},Mye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Fye(){return n.jsx("div",{style:Lye,children:n.jsxs("div",{style:Dye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Feedback Admin Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Mye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),n.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("span",{children:t}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),n.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const Bye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},$ye={maxWidth:1200,margin:"0 auto"},Oye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Vye(){return n.jsx("div",{style:Bye,children:n.jsxs("div",{style:$ye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Tutorials Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Oye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Step highlights"}),n.jsx("li",{children:"Progress bar"}),n.jsx("li",{children:"Badges"})]})]})})]})})}const Uye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},zye={maxWidth:1200,margin:"0 auto"},Hye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Gye(){return n.jsx("div",{style:Uye,children:n.jsxs("div",{style:zye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Wiki & FAQ Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Hye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),n.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${Z.line}`,borderRadius:10}}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"How to import HAR?"}),n.jsx("li",{children:"What data is stored?"})]})]})})]})})}const Wye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},qye={maxWidth:1200,margin:"0 auto"},Kye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Qye(){return n.jsx("div",{style:Wye,children:n.jsxs("div",{style:qye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Settings Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Kye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("label",{children:["Language",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"EN"}),n.jsx("option",{children:"DE"})]})]}),n.jsxs("label",{children:["Theme",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"Dark"}),n.jsx("option",{children:"Custom"})]})]}),n.jsxs("label",{children:["Notifications",n.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),n.jsxs("label",{children:["Privacy",n.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const Yye={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Xye={maxWidth:1200,margin:"0 auto"},Jye={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function Zye(){return n.jsx("div",{style:Yye,children:n.jsxs("div",{style:Xye,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"ToS & Privacy Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Jye,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),n.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${Z.line}`,borderRadius:10,padding:10,marginTop:8},children:n.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),n.jsxs("label",{style:{marginTop:8},children:[n.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const e0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},t0e={maxWidth:1200,margin:"0 auto"},s0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function n0e(){return n.jsx("div",{style:e0e,children:n.jsxs("div",{style:t0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Transparency Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:s0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),n.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${Z.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const r0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},i0e={maxWidth:1200,margin:"0 auto"},a0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function o0e(){return n.jsx("div",{style:r0e,children:n.jsxs("div",{style:i0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"PWA Update Flow Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:a0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const l0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},c0e={maxWidth:1200,margin:"0 auto"},d0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function u0e(){return n.jsx("div",{style:l0e,children:n.jsxs("div",{style:c0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"PWA Install Prompt Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:d0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[n.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${Z.line}`,borderRadius:20}}),n.jsxs("div",{children:[n.jsx("b",{style:{color:Z.title},children:"Install SFDataHub"}),n.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const h0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},p0e={maxWidth:1200,margin:"0 auto"},m0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function f0e(){return n.jsx("div",{style:h0e,children:n.jsxs("div",{style:p0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Connect Manual Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:m0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10,marginTop:8},children:[n.jsx("b",{style:{color:Z.title},children:"View source"}),n.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const g0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},x0e={maxWidth:1200,margin:"0 auto"},v0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function y0e(){return n.jsx("div",{style:g0e,children:n.jsxs("div",{style:x0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Connect Userscript Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:v0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx("div",{children:"Install/Enable check"}),n.jsx("div",{children:"Events preview"})]})]})})]})})}const b0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},_0e={maxWidth:1200,margin:"0 auto"},w0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function j0e(){return n.jsx("div",{style:b0e,children:n.jsxs("div",{style:_0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Exports Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:w0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:"CSV/Excel"}),n.jsx("div",{children:"Tabs, widths, locales"})]}),n.jsxs("div",{style:{background:Z.tileAlt,border:`1px solid ${Z.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Z.title},children:"JSON API"}),n.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const S0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},N0e={maxWidth:1200,margin:"0 auto"},k0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function T0e(){return n.jsx("div",{style:S0e,children:n.jsxs("div",{style:N0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Deeplinks Demo Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:k0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),n.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${Z.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const C0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},E0e={maxWidth:1200,margin:"0 auto"},A0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function I0e(){return n.jsx("div",{style:C0e,children:n.jsxs("div",{style:E0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Servers Editor Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:A0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[n.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),n.jsxs("select",{children:[n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Disabled"})]}),n.jsx("button",{children:"Add"})]})]})})]})})}const R0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},P0e={maxWidth:1200,margin:"0 auto"},L0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function D0e(){return n.jsx("div",{style:R0e,children:n.jsxs("div",{style:P0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Jobs & Queues Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:L0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),n.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const M0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},F0e={maxWidth:1200,margin:"0 auto"},B0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function $0e(){return n.jsx("div",{style:M0e,children:n.jsxs("div",{style:F0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Feature Flags Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:B0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[n.jsx("span",{children:"Beta: New Rankings"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox",defaultChecked:!0})}),n.jsx("span",{children:"Widgets v2"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox"})})]})]})})]})})}const O0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},V0e={maxWidth:1200,margin:"0 auto"},U0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function z0e(){return n.jsx("div",{style:O0e,children:n.jsxs("div",{style:V0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Table Performance Lab Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:U0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Z.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const H0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},G0e={maxWidth:1200,margin:"0 auto"},W0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function q0e(){return n.jsx("div",{style:H0e,children:n.jsxs("div",{style:G0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:W0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),n.jsx("div",{style:{height:180,border:`1px dashed ${Z.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const K0e={minHeight:"100vh",background:Z.page,color:Z.text,padding:"24px 16px"},Q0e={maxWidth:1200,margin:"0 auto"},Y0e={background:Z.tile,border:`1px solid ${Z.line}`,borderRadius:12,padding:12};function X0e(){return n.jsx("div",{style:K0e,children:n.jsxs("div",{style:Q0e,children:[n.jsx("h1",{style:{color:Z.title,marginTop:0},children:"Accessibility Pass Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Y0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Focus ring visible"}),n.jsx("li",{children:"Skip links"}),n.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const J0e=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function Z0e({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:s,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:l}){const{t:d}=fd(),[u,h]=I.useState(null);I.useEffect(()=>{const M=J0e(r);if(!M){h(null);return}const L=()=>{const v=Date.now(),_=Math.max(0,Math.floor((M-v)/1e3));h(_)};L();const k=window.setInterval(L,1e3);return()=>window.clearInterval(k)},[r]);const p=u!==null&&u>0,g=!t||a||!e||p,y=I.useMemo(()=>{if(u===null||u<=0)return null;const M=Math.floor(u/60),L=u%60;return`${String(M).padStart(2,"0")}:${String(L).padStart(2,"0")}`},[u]),b=a?d("tools.sync.saving"):y?d("tools.sync.cooldownLabel",{time:y}):d("tools.sync.buttonSave"),S=I.useMemo(()=>d(e?"tools.sync.statusUnsynced":s?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,s,d]),N=I.useMemo(()=>{if(e)return null;if(s){const M=typeof s=="string"?new Date(s):s;return`${d("tools.sync.lastSyncLabel")}: ${M.toLocaleTimeString()}`}return d("tools.sync.noChanges")},[e,s,d]),T=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return n.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[n.jsx("button",{type:"button",disabled:g,onClick:i,className:T,children:b}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:S}),N&&n.jsx("p",{className:"text-sm text-slate-200",children:N}),l&&n.jsx("p",{className:"text-sm text-rose-400",children:l})]})]})})}const $m=3,xA="sfdatahub.tools.sets.v1",hk=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],Pc=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],e1e=300*1e3;async function t1e(t,e){const s=Gt(jd(dt,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",s.path);const r={version:1,updatedAt:oi(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await No(s,r,{merge:!1})}const s1e=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(xA);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function n1e(){var Os,ws;const{t}=fd(),{user:e,status:s,loginWithDiscord:r}=$l(),i=s==="authenticated"&&!!e,a=I.useMemo(()=>s1e(),[]),l=I.useMemo(()=>{var Ee;return(Ee=a==null?void 0:a.sets)!=null&&Ee.length?a.sets.slice(0,$m):hk},[a]),d=I.useMemo(()=>{var Pe,Ie,Ue,nt;const Ee=a==null?void 0:a.activeSetId;return Ee&&l.some(pt=>pt.id===Ee)?Ee:(nt=(Ue=(Pe=l[0])==null?void 0:Pe.id)!=null?Ue:(Ie=hk[0])==null?void 0:Ie.id)!=null?nt:"set-main-dh"},[a,l]),u=I.useMemo(()=>{var Pe,Ie;const Ee=a==null?void 0:a.activeToolId;return Ee&&Pc.some(Ue=>Ue.id===Ee)?Ee:(Ie=(Pe=Pc[0])==null?void 0:Pe.id)!=null?Ie:"gemSim"},[a]),[h,p]=I.useState(l),[g,y]=I.useState(d),[b,S]=I.useState(u),[N,T]=I.useState(null),[M,L]=I.useState(""),[k,v]=I.useState(""),[_,P]=I.useState(!1),[E,w]=I.useState(null),[A,B]=I.useState(null),[D,$]=I.useState(!1),[F,z]=I.useState(null),H=I.useRef(null),K=I.useRef(!0);I.useEffect(()=>{if(typeof window!="undefined")try{const Ee={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(xA,JSON.stringify(Ee))}catch(Ee){console.warn("Failed to persist tools state",Ee)}},[h,g,b]),I.useEffect(()=>{if(!i){P(!1),K.current=!0;return}if(K.current){K.current=!1;return}P(!0)},[i,h,g,b]);const q=I.useMemo(()=>{var Ee;return(Ee=h.find(Pe=>Pe.id===g))!=null?Ee:h[0]},[g,h]),G=I.useMemo(()=>{var Ee;return(Ee=Pc.find(Pe=>Pe.id===b))!=null?Ee:Pc[0]},[b]),re=(Os=q==null?void 0:q.tools)==null?void 0:Os.gemSim,se=(ws=q==null?void 0:q.tools)==null?void 0:ws.dungeonPauseOpenXP,U=h.length,Y=U>=$m,ie=()=>{if(Y)return;const Ee=U+1,Pe=t("tools.sets.defaultName","New Set"),Ie={id:`set-${Date.now()}`,name:`${Pe} ${Ee}`,classLabel:"Class TBD",serverLabel:"Server TBD"};p(Ue=>[...Ue,Ie]),y(Ie.id)},X=()=>{r()},pe=()=>{if(!q){console.warn("No active set to export.");return}const Ee={version:1,type:"toolSet",set:q},Pe=new Blob([JSON.stringify(Ee,null,2)],{type:"application/json"}),Ie=URL.createObjectURL(Pe),Ue=document.createElement("a"),nt=q.name.toLowerCase().replace(/\s+/g,"-");Ue.href=Ie,Ue.download=`sfdatahub-set-${nt}.json`,Ue.click(),URL.revokeObjectURL(Ie)},ge=()=>{var Ee;(Ee=H.current)==null||Ee.click()},he=Ee=>{var pt,vt;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Pe=t("tools.sets.deleteConfirmTitle"),Ie=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Pe}

${Ie}`))return;const Ue=h.filter(Ut=>Ut.id!==Ee),nt=Ee===g?(vt=(pt=Ue[0])==null?void 0:pt.id)!=null?vt:null:g;p(Ue),nt&&y(nt)},ve=Ee=>{const Pe=h.find(Ie=>Ie.id===Ee);Pe&&(T(Ee),L(Pe.name),v(""))},_e=()=>{T(null),L(""),v("")},ce=()=>{if(!N)return;const Ee=M.trim();if(!Ee){v(t("tools.sets.renameErrorEmpty"));return}p(Pe=>Pe.map(Ie=>Ie.id===N?{...Ie,name:Ee}:Ie)),T(null),L(""),v("")},Ce=async Ee=>{var Ie,Ue;const Pe=(Ue=(Ie=Ee.target)==null?void 0:Ie.files)==null?void 0:Ue[0];if(Pe)try{if(h.length>=$m){alert(t("tools.sets.importErrorMaxReached"));return}const nt=await Pe.text(),pt=JSON.parse(nt);if((pt==null?void 0:pt.version)!==1||(pt==null?void 0:pt.type)!=="toolSet"||typeof(pt==null?void 0:pt.set)!="object")throw new Error("invalid payload");const{set:vt}=pt;if(typeof(vt==null?void 0:vt.name)!="string"||typeof(vt==null?void 0:vt.classLabel)!="string"||typeof(vt==null?void 0:vt.serverLabel)!="string")throw new Error("invalid set");const Ut={...vt,id:`imported-${Date.now()}`,name:vt.name,classLabel:vt.classLabel,serverLabel:vt.serverLabel};p($t=>[...$t,Ut]),y(Ut.id)}catch(nt){console.error("Failed to import set",nt),alert(t("tools.sets.importErrorInvalid"))}finally{Ee.target.value=""}},ye=Ee=>{g&&(p(Pe=>Pe.map(Ie=>{var nt;if(Ie.id!==g)return Ie;const Ue={...(nt=Ie.tools)!=null?nt:{},gemSim:Ee};return{...Ie,tools:Ue}})),P(!0))},Ze=Ee=>{g&&(p(Pe=>Pe.map(Ie=>{var nt;if(Ie.id!==g)return Ie;const Ue={...(nt=Ie.tools)!=null?nt:{},dungeonPauseOpenXP:Ee};return{...Ie,tools:Ue}})),P(!0))},it=`${U}/${$m}`,Rt=t(G.labelKey,G.defaultLabel),rs=t(G.descriptionKey,G.defaultDescription),cs=async()=>{if(!i)return;const Ee=e==null?void 0:e.id;if(!(!Ee||D||A!==null&&A>Date.now())&&_){$(!0),z(null);try{await t1e(Ee,{sets:h,activeSetId:g,activeToolId:b});const Ie=Date.now(),Ue=Ie+e1e;P(!1),w(new Date(Ie)),B(Ue)}catch(Ie){console.error("Failed to sync tools state",Ie),z(t("tools.sync.error"))}finally{$(!1)}}};return n.jsx(wt,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),n.jsx("span",{className:"text-xs text-slate-400",children:it})]}),n.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(Ee=>{const Pe=Ee.id===g;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>y(Ee.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Pe?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-50",children:Ee.name}),n.jsx("span",{role:"button",tabIndex:0,onClick:Ie=>{Ie.stopPropagation(),ve(Ee.id)},onKeyDown:Ie=>{(Ie.key==="Enter"||Ie.key===" ")&&(Ie.preventDefault(),Ie.stopPropagation(),ve(Ee.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:n.jsx(n6,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-xs text-emerald-200/90",children:Ee.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:Ee.serverLabel}),Pe&&n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&n.jsx("button",{type:"button",onClick:Ie=>{Ie.stopPropagation(),he(Ee.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},Ee.id)}),n.jsxs("button",{type:"button",onClick:ie,disabled:Y,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",Y?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[n.jsx("span",{className:"text-lg",children:"+"}),n.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[n.jsx("button",{type:"button",onClick:pe,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),n.jsx("button",{type:"button",onClick:ge,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),n.jsx("input",{ref:H,type:"file",accept:"application/json",className:"hidden",onChange:Ce})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),n.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:Pc.map(Ee=>{const Pe=Ee.id===b,Ie=t(Ee.labelKey,Ee.defaultLabel);return n.jsxs("button",{type:"button",onClick:()=>S(Ee.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Pe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[n.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),n.jsx("span",{children:Ie})]},Ee.id)})})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),n.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),n.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ee=>n.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),n.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:Ee})]},Ee))})]}),n.jsx(Z0e,{isLoggedIn:i,hasUnsyncedChanges:_,lastSyncedAt:E,cooldownUntil:A,onSyncClick:cs,isSaving:D,syncError:F})]}):n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),n.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),n.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ee=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),n.jsx("span",{children:Ee})]},Ee))})]}),n.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:n.jsx("button",{type:"button",onClick:X,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:Rt}),n.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(q==null?void 0:q.name)||"kein Set"]})]}),n.jsx("div",{className:"flex gap-2",children:Pc.map(Ee=>n.jsx("div",{className:["h-2 w-8 rounded-full transition",b===Ee.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},Ee.id))})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsx("div",{className:"text-sm text-slate-300",children:rs}),n.jsx("div",{className:"mt-4",children:b==="gemSim"?n.jsx(OE,{initialState:re,onStateChange:ye}):b==="dungeonPauseOpenXP"?n.jsx(zE,{initialState:se,onStateChange:Ze},g):n.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",n.jsx("br",{}),"(z. B. ",Rt,")"]})})]}),n.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:q==null?void 0:q.name}),n.jsx("div",{className:"text-sm text-emerald-200/90",children:q==null?void 0:q.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:q==null?void 0:q.serverLabel})]}),n.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",n.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),N&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:_e}),n.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),n.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),n.jsx("input",{value:M,onChange:Ee=>L(Ee.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),k&&n.jsx("p",{className:"mt-2 text-xs text-rose-400",children:k}),n.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:_e,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),n.jsx("button",{type:"button",onClick:ce,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const r1e="_backdrop_19xh2_1",i1e="_panel_19xh2_19",a1e="_header_19xh2_43",o1e="_tabs_19xh2_63",l1e="_tabBtn_19xh2_75",c1e="_tabActive_19xh2_97",d1e="_closeBtn_19xh2_101",u1e="_content_19xh2_123",Ti={backdrop:r1e,panel:i1e,header:a1e,tabs:o1e,tabBtn:l1e,tabActive:c1e,closeBtn:d1e,content:u1e},Ci=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const s=Number(e);return Number.isFinite(s)?s:0},h1e=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let s=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/);return s?{group:"EU",serverKey:`EU${s[1]||s[2]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(s=e.match(/F(\d+)/),s?{group:"FUSION",serverKey:`F${s[1]}`}:{group:"ALL",serverKey:"all"})},p1e={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Dexterity",Mage:"Base Intelligence","Battle Mage":"Base Intelligence",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},ho=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,m1e=t=>{const e={str:Ci(ho(t,"Base Strength")),dex:Ci(ho(t,"Base Dexterity")),intl:Ci(ho(t,"Base Intelligence")),con:Ci(ho(t,"Base Constitution")),luck:Ci(ho(t,"Base Luck"))},s=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:s}},f1e=(t,e)=>{var w,A;const{playerId:s,name:r,className:i,level:a,server:l,guildIdentifier:d,guildName:u,timestamp:h,updatedAt:p,values:g={}}=t||{},y=Ci(a),{group:b,serverKey:S}=h1e(l),N=m1e(g),T=(w=p1e[String(i)])!=null?w:"Base Intelligence",M=Ci(ho(g,T)),L=N.sum,k=N.con,v=y>0?L/y:0,_=Ci(ho(g,"Gem Mine")),P=Ci(ho(g,"Treasury")),E=e?e():null;return{playerId:String(s!=null?s:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:y,group:b,serverKey:S,guildId:d?String(d):"",guildName:u?String(u):"",sum:L,main:M,con:k,ratio:v,mine:_,treasury:P,timestamp:Ci(h),updatedAtFromLatest:(A=p!=null?p:E)!=null?A:null}},lf=t=>String(t!=null?t:"").trim(),ro=t=>lf(t).toUpperCase(),ts=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),pk=t=>t<10?`0${t}`:String(t),g1e=t=>{const e=t?new Date(t*1e3):new Date;return+`${e.getFullYear()}${pk(e.getMonth()+1)}${pk(e.getDate())}`},cf=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),mk=t=>{const e=cf(t);if(!e)return[];const s=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(s))},fk=t=>{const e=new Set;for(const s of t)for(let r=1;r<=s.length;r++)e.add(s.slice(0,r));return Array.from(e)},wy=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},jt={PLAYERS:{IDENTIFIER:ts("Identifier"),PID:ts("ID"),GUILD_IDENTIFIER:ts("Guild Identifier"),SERVER:ts("Server"),NAME:ts("Name"),TIMESTAMP:ts("Timestamp"),LEVEL:ts("Level"),CLASS:ts("Class"),GUILD:ts("Guild")},GUILDS:{GUILD_IDENTIFIER:ts("Guild Identifier"),SERVER:ts("Server"),NAME:ts("Name"),MEMBER_COUNT:ts("Guild Member Count"),TIMESTAMP:ts("Timestamp"),HOF:ts("Hall of Fame Rank"),HOF_ALT:ts("HoF"),RANK:ts("Rank"),GUILD_RANK:ts("Guild Rank")}},x1e=new Set([ts("Strength"),ts("Dexterity"),ts("Intelligence"),ts("Constitution"),ts("Luck"),ts("Attribute")]),v1e=["equipment"],y1e=t=>x1e.has(t)||v1e.some(e=>t.includes(e)),Et=(t,e)=>{for(const s of Object.keys(t))if(ts(s)===e)return t[s]},b1e=(t,e)=>e.map(s=>Et(t,s)).find(s=>s!=null&&String(s)!=="");function qf(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,p=new Date(l,a,i,d,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function gk(t){const e=new Date(t*1e3),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-r);const i=new Date(Date.UTC(s.getUTCFullYear(),0,1)),a=Math.ceil(((+s-+i)/864e5+1)/7),l=s.getUTCFullYear(),d=a.toString().padStart(2,"0");return`${l}-W${d}`}function xk(t){const e=new Date(t*1e3),s=new Date(e),r=(s.getDay()+6)%7;s.setHours(0,0,0,0),s.setDate(s.getDate()-r);const i=Math.floor(s.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function vk(t){const e=new Date(t*1e3),s=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${s}-${r}`}function yk(t){const e=new Date(t*1e3),s=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(s.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function _1e(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function w1e(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[]};const r=_1e((u=s[0])!=null?u:""),i=h=>{const p=[];let g="",y=!1;for(let b=0;b<h.length;b++){const S=h[b];S==='"'?y&&h[b+1]==='"'?(g+='"',b++):y=!y:S===r&&!y?(p.push(g),g=""):g+=S}return p.push(g),p},l=(s[0]?i(s[0]).map(lf):[]).map((h,p)=>h||`col${p}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const p=i(s[h]);if(p.every(y=>lf(y)===""))continue;const g={};for(let y=0;y<l.length;y++)g[l[y]]=p[y]!=null?lf(p[y]):"";d.push(g)}return{headers:l,rows:d}}const bk="stats_cache_player_derived",j1e="stats_index_players_daily_compact",df=40,_k=120;async function Xc(t,e,s,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:s});for(let i=0;i<t.length;i+=e){const a=JF(dt),l=t.slice(i,i+e);for(const d of l)d(a);r==null||r({phase:"write",current:Math.min(i+l.length,t.length),total:t.length,pass:s}),await a.commit(),await new Promise(d=>setTimeout(d,12))}r==null||r({phase:"done",current:1,total:1,pass:s})}async function wk(t,e,s){var p,g,y;const r=[];if(!t.length)return r;let i=0,a=0,l=0,d=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:l,error:d,kind:s})};u("prepare");const h=dt.bulkWriter;if(typeof h=="function"){const b=h.call(dt,{throttling:!0}),S=()=>{i++,u("write")};for(const{ref:N,data:T,key:M}of t)b.create(N,T).then(()=>{a++,r.push({key:M,status:"created"}),S()}).catch(L=>{var v,_;const k=String((v=L==null?void 0:L.code)!=null?v:"").toLowerCase();k.includes("already")&&k.includes("exist")?(l++,r.push({key:M,status:"duplicate"})):(d++,r.push({key:M,status:"error",message:String((_=L==null?void 0:L.message)!=null?_:L)})),S()});try{await b.close()}catch(N){console.warn("[ImportCsv] bulkWriter close with errors",{error:N})}return u("done"),r}for(const{ref:b,data:S,key:N}of t){try{await No(b,S),a++,r.push({key:N,status:"created"})}catch(T){const M=String((p=T==null?void 0:T.code)!=null?p:"").toLowerCase();M.includes("permission")||M.includes("already")?(l++,r.push({key:N,status:"duplicate",message:String((g=T==null?void 0:T.message)!=null?g:T)})):(d++,r.push({key:N,status:"error",message:String((y=T==null?void 0:T.message)!=null?y:T)}))}i++,u("write")}return u("done"),r}async function S1e(t,e,s,r){if(!t.length&&!e.length&&!s.length)return;const i=t.length+e.length+s.length,a=dt.bulkWriter;if(typeof a=="function"){const h=a.call(dt,{throttling:!0});r==null||r({phase:"prepare",current:0,total:i,pass:"latest"});for(const{ref:p,data:g}of t)h.set(p,g,{merge:!0});for(const{pid:p,data:g}of e)h.set(Gt(dt,`${bk}/${p}`),g,{merge:!0});for(const{ref:p,data:g}of s)h.set(p,g,{merge:!0});r==null||r({phase:"write",current:i,total:i,pass:"latest"}),await h.close(),r==null||r({phase:"done",current:1,total:1,pass:"latest"});return}const l=t.map(({ref:h,data:p})=>g=>g.set(h,p,{merge:!0})),d=e.map(({pid:h,data:p})=>g=>g.set(Gt(dt,`${bk}/${h}`),p,{merge:!0})),u=s.map(({ref:h,data:p})=>g=>g.set(h,p,{merge:!0}));await Xc(l,df,"latest",r),await Xc(d,df,"latest",r),await Xc(u,df,"latest",r)}function Om(t,e){const s={};for(const r of e){const i=ts(r);if(y1e(i)){let a=null,l;for(const d of t){const u=d.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,l=u)}s[r]=l!=null?l:""}else{let a="";for(let l=t.length-1;l>=0;l--){const d=t[l].row[r];if(d!=null&&String(d)!==""){a=d;break}}s[r]=a}}return s}async function jk(t){var i;const e=await vn(t);if(!e.exists())return 0;const s=e.data();if(((i=s==null?void 0:s.values)==null?void 0:i.Timestamp)!=null){const a=qf(s.values.Timestamp);if(a!=null)return a}if((s==null?void 0:s.timestampRaw)!=null){const a=qf(s.timestampRaw);if(a!=null)return a}if(typeof(s==null?void 0:s.ts)=="number")return s.ts;const r=s==null?void 0:s.timestamp;if(typeof r=="number")return r>9999999999?Math.floor(r/1e3):r;if(typeof r=="string"){const a=Date.parse(r);return Number.isFinite(a)?Math.floor(a/1e3):0}return 0}async function Sk(t,e){var b,S,N,T,M,L;const s=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},l=[],d=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');let u=[];if(e.rows&&Array.isArray(e.rows))u=e.rows;else if(e.raw&&typeof e.raw=="string")u=w1e(e.raw).rows;else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const h=e.onProgress?(k=>{var v;return(v=e.onProgress)==null?void 0:v.call(e,{...k,kind:e.kind})}):void 0,p=new Set;for(const k of u)Object.keys(k).forEach(v=>p.add(v));const g=Array.from(p);if(e.kind==="players"){const k=[],v=[],_=[],P=new Map,E=[],w=new Map;for(const D of u){const $=(b=Et(D,jt.PLAYERS.PID))!=null?b:Et(D,jt.PLAYERS.IDENTIFIER),F=String($!=null?$:"").trim();if(!F){a.skippedMissingIdentifier++;continue}const z=qf(Et(D,jt.PLAYERS.TIMESTAMP));if(z==null){a.skippedBadTs++;continue}const H=(()=>{const q=Et(D,jt.PLAYERS.SERVER);return q&&String(q).trim()!==""?ro(q):void 0})();if(!H){a.skippedMissingServer++;continue}const K=`${F}__${H}__${z}`;k.push({key:K,ref:Gt(dt,`players/${F}/scans/${z}`),data:{playerId:F,server:H,timestamp:z,timestampRaw:Et(D,jt.PLAYERS.TIMESTAMP),name:Et(D,jt.PLAYERS.NAME)||null,values:D,createdAt:oi()}}),w.has(F)||w.set(F,[]),w.get(F).push({row:D,ts:z})}const A=await wk(k,h,"players");l.push(...A),a.writtenScanPlayers=A.filter(D=>D.status==="created").length;for(const[D,$]of w){$.sort((ge,he)=>ge.ts-he.ts);const F=$[$.length-1],z=ro(Et(F.row,jt.PLAYERS.SERVER)||""),H=Et(F.row,jt.PLAYERS.NAME)||null,K=Et(F.row,jt.PLAYERS.LEVEL),q=Et(F.row,jt.PLAYERS.CLASS),G=Et(F.row,jt.PLAYERS.GUILD),re=(N=(S=Et(F.row,jt.PLAYERS.NAME))!=null?S:H)!=null?N:"",se=mk(re),U=fk(se),Y=Gt(dt,`players/${D}/latest/latest`),ie=await jk(Y);if(F.ts>ie){const ge=wy(K),he=q!=null&&String(q).trim()!==""?String(q):null,ve=G!=null&&String(G).trim()!==""?String(G):null,_e=Et(F.row,jt.PLAYERS.GUILD_IDENTIFIER),ce=oi();v.push({ref:Y,data:{playerId:D,server:z,timestamp:F.ts,timestampRaw:Et(F.row,jt.PLAYERS.TIMESTAMP),name:H,values:F.row,updatedAt:ce,nameFold:cf(re),nameTokens:se,nameNgrams:U,level:ge,className:he,guildName:ve,guildNameFold:ve?cf(ve):null}});const Ce={playerId:D,name:H,className:he,level:ge,server:z,guildIdentifier:_e||void 0,guildName:ve||void 0,values:F.row,timestamp:F.ts,updatedAt:ce},ye=f1e(Ce,oi);_.push({pid:D,data:ye});const Ze=g1e(F.ts),it=[{scopeId:"all_all_sum",group:"ALL",serverKey:"all"},{scopeId:`${ye.group||"ALL"}_all_sum`,group:ye.group||"ALL",serverKey:"all"}];ye.serverKey&&ye.serverKey!=="all"&&it.push({scopeId:`${ye.group||"ALL"}_${ye.serverKey}_sum`,group:ye.group||"ALL",serverKey:ye.serverKey});for(const Rt of it){const rs=`${Ze}__${Rt.scopeId}`;P.has(rs)||P.set(rs,{dateKey:Ze,scopeId:Rt.scopeId,group:Rt.group,serverKey:Rt.serverKey,ids:[],vals:[]});const cs=P.get(rs);cs.ids.push(D),cs.vals.push(Number((T=ye.sum)!=null?T:0))}a.writtenLatestPlayers++}const X=new Map,pe=new Map;for(const ge of $){const he=gk(ge.ts),ve=vk(ge.ts);X.has(he)||X.set(he,[]),pe.has(ve)||pe.set(ve,[]),X.get(he).push(ge),pe.get(ve).push(ge)}for(const[ge,he]of X){he.sort((Ce,ye)=>Ce.ts-ye.ts);const ve=Om(he,g),_e=xk(he[he.length-1].ts),ce=he[he.length-1];E.push(Ce=>{const ye=Gt(dt,`players/${D}/history_weekly/${ge}`);Ce.set(ye,{playerId:D,weekId:ge,periodStartSec:_e.start,periodEndSec:_e.end,lastTs:ce.ts,lastTimestampRaw:Et(ce.row,jt.PLAYERS.TIMESTAMP),server:ro(Et(ce.row,jt.PLAYERS.SERVER)||""),name:Et(ce.row,jt.PLAYERS.NAME)||null,values:ve,updatedAt:oi()},{merge:!0})}),a.writtenWeeklyPlayers++}for(const[ge,he]of pe){he.sort((Ce,ye)=>Ce.ts-ye.ts);const ve=Om(he,g),_e=yk(he[he.length-1].ts),ce=he[he.length-1];E.push(Ce=>{const ye=Gt(dt,`players/${D}/history_monthly/${ge}`);Ce.set(ye,{playerId:D,monthId:ge,periodStartSec:_e.start,periodEndSec:_e.end,lastTs:ce.ts,lastTimestampRaw:Et(ce.row,jt.PLAYERS.TIMESTAMP),server:ro(Et(ce.row,jt.PLAYERS.SERVER)||""),name:Et(ce.row,jt.PLAYERS.NAME)||null,values:ve,updatedAt:oi()},{merge:!0})}),a.writtenMonthlyPlayers++}}const B=[];for(const{dateKey:D,scopeId:$,group:F,serverKey:z,ids:H,vals:K}of P.values()){const q=H.map((U,Y)=>{var ie;return{id:U,val:(ie=K[Y])!=null?ie:0}});q.sort((U,Y)=>Y.val-U.val);const G=q.map(U=>U.id),re=q.map(U=>U.val),se=q.map((U,Y)=>Y+1);B.push({ref:Gt(dt,`${j1e}/${D}__${$}`),data:{n:q.length,ids:G,vals:re,ranks:se,generatedAt:Date.now(),group:F,serverKey:z,metric:"sum",dateKey:D}})}await S1e(v,_,B,h),await Xc(E,_k,"history",h)}if(e.kind==="guilds"){const k=[],v=[],_=[],P=new Map;for(const w of u){const A=String((M=Et(w,jt.GUILDS.GUILD_IDENTIFIER))!=null?M:"").trim();if(!A){a.skippedMissingGuildIdentifier++;continue}const B=qf(Et(w,jt.GUILDS.TIMESTAMP));if(B==null){a.skippedBadTsGuild++;continue}const D=(()=>{const F=Et(w,jt.GUILDS.SERVER);return F&&String(F).trim()!==""?ro(F):void 0})();if(!D){a.skippedMissingServer++;continue}const $=`${A}__${D}__${B}`;k.push({key:$,ref:Gt(dt,`guilds/${A}/scans/${B}`),data:{guildIdentifier:A,server:D,timestamp:B,timestampRaw:Et(w,jt.GUILDS.TIMESTAMP),name:Et(w,jt.GUILDS.NAME)||null,values:w,createdAt:oi()}}),P.has(A)||P.set(A,[]),P.get(A).push({row:w,ts:B})}const E=await wk(k,h,"guilds");d.push(...E),a.writtenScanGuilds=E.filter(w=>w.status==="created").length;for(const[w,A]of P){A.sort((se,U)=>se.ts-U.ts);const B=A[A.length-1],D=(L=Et(B.row,jt.GUILDS.NAME))!=null?L:"",$=mk(D),F=fk($),z=wy(Et(B.row,jt.GUILDS.MEMBER_COUNT)),H=wy(b1e(B.row,[jt.GUILDS.HOF,jt.GUILDS.HOF_ALT,jt.GUILDS.RANK,jt.GUILDS.GUILD_RANK])),K=Gt(dt,`guilds/${w}/latest/latest`),q=await jk(K);B.ts>q&&(v.push(se=>{se.set(K,{guildIdentifier:w,server:ro(Et(B.row,jt.GUILDS.SERVER)||""),timestamp:B.ts,timestampRaw:Et(B.row,jt.GUILDS.TIMESTAMP),name:Et(B.row,jt.GUILDS.NAME)||null,values:B.row,updatedAt:oi(),nameFold:cf(D),nameTokens:$,nameNgrams:F,memberCount:z,hofRank:H},{merge:!0})}),a.writtenLatestGuilds++);const G=new Map,re=new Map;for(const se of A){const U=gk(se.ts),Y=vk(se.ts);G.has(U)||G.set(U,[]),re.has(Y)||re.set(Y,[]),G.get(U).push(se),re.get(Y).push(se)}for(const[se,U]of G){U.sort((pe,ge)=>pe.ts-ge.ts);const Y=Om(U,g),ie=xk(U[U.length-1].ts),X=U[U.length-1];_.push(pe=>{const ge=Gt(dt,`guilds/${w}/history_weekly/${se}`);pe.set(ge,{guildIdentifier:w,weekId:se,periodStartSec:ie.start,periodEndSec:ie.end,lastTs:X.ts,lastTimestampRaw:Et(X.row,jt.GUILDS.TIMESTAMP),server:ro(Et(X.row,jt.GUILDS.SERVER)||""),name:Et(X.row,jt.GUILDS.NAME)||null,values:Y,updatedAt:oi()},{merge:!0})}),a.writtenWeeklyGuilds++}for(const[se,U]of re){U.sort((pe,ge)=>pe.ts-ge.ts);const Y=Om(U,g),ie=yk(U[U.length-1].ts),X=U[U.length-1];_.push(pe=>{const ge=Gt(dt,`guilds/${w}/history_monthly/${se}`);pe.set(ge,{guildIdentifier:w,monthId:se,periodStartSec:ie.start,periodEndSec:ie.end,lastTs:X.ts,lastTimestampRaw:Et(X.row,jt.GUILDS.TIMESTAMP),server:ro(Et(X.row,jt.GUILDS.SERVER)||""),name:Et(X.row,jt.GUILDS.NAME)||null,values:Y,updatedAt:oi()},{merge:!0})}),a.writtenMonthlyGuilds++}}await Xc(v,df,"latest",h),await Xc(_,_k,"history",h)}const y=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:y-s,playerResults:l,guildResults:d}}const ft=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),N1e=t=>String(t!=null?t:"").trim(),R0=t=>N1e(t).toUpperCase(),P0=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Cn(t,e){for(const s of Object.keys(t))if(ft(s)===e)return t[s]}function la(t,e){for(const s of e){const r=Cn(t,s);if(r!=null&&String(r)!=="")return r}}function ul(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function Jc(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,p=new Date(l,a,i,d,u,h);if(!Number.isNaN(p.getTime()))return Math.floor(p.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Fs={GUILD_IDENTIFIER:ft("Guild Identifier"),SERVER:ft("Server"),NAME:ft("Name"),TIMESTAMP:ft("Timestamp"),LEVEL:ft("Level"),CLASS:ft("Class"),GUILD:ft("Guild"),GUILD_ROLE:[ft("Role"),ft("Guild Role")],TREASURY:[ft("Treasury"),ft("Fortress Treasury"),ft("Treasury Level"),ft("Festungsschatzkammer")],MINE:[ft("Mine"),ft("Gem Mine"),ft("Mine Level"),ft("Festungsmine")],BASE_MAIN:[ft("Base"),ft("Base Attribute"),ft("BaseMain"),ft("Basis Attribut")],CON_BASE:[ft("Con Base"),ft("Constitution Base"),ft("Base Constitution"),ft("Basis Konstitution"),ft("conbase")],ATTR_TOT:[ft("Attribute"),ft("Attr Total"),ft("Attribut"),ft("Attribut Gesamt")],CON_TOT:[ft("Constitution"),ft("Constitution Total"),ft("Konstitution"),ft("Konstitution Gesamt")],LAST_ACTIVE:[ft("Last Active"),ft("LastActivity"),ft("Letzte Aktivitt")],GUILD_JOINED:[ft("Guild Joined"),ft("Joined Guild"),ft("Gildenbeitritt")]},uf={GUILD_IDENTIFIER:ft("Guild Identifier"),SERVER:ft("Server"),NAME:ft("Name")};function Nk(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function k1e(t){let e=5381;for(let s=0;s<t.length;s++)e=e*33^t.charCodeAt(s);return(e>>>0).toString(36)}function T1e(t){var s;const e=new Map;for(const r of t){const i=String((s=Cn(r,uf.GUILD_IDENTIFIER))!=null?s:"").trim(),a=Cn(r,uf.SERVER),l=Cn(r,uf.NAME);if(!i||!a||!l)continue;const d=`${R0(a)}__${P0(String(l))}`;e.set(d,i)}return e}function C1e(t){var k,v;const e=Cn(t,Fs.TIMESTAMP),s=Jc(e),r=la(t,Fs.LAST_ACTIVE),i=Jc(r),a=la(t,Fs.GUILD_JOINED),l=Jc(a),d=ul(Cn(t,Fs.LEVEL)),u=(()=>{const _=Cn(t,Fs.CLASS);return _!=null&&String(_).trim()!==""?String(_):null})(),h=(()=>{const _=la(t,Fs.GUILD_ROLE);return _!=null&&String(_).trim()!==""?String(_):null})(),p=ul(la(t,Fs.TREASURY)),g=ul(la(t,Fs.MINE)),y=ul(la(t,Fs.BASE_MAIN)),b=ul(la(t,Fs.CON_BASE)),S=ul(la(t,Fs.ATTR_TOT)),N=ul(la(t,Fs.CON_TOT)),T=y!=null&&b!=null?y+b:null,M=S!=null&&N!=null?S+N:null,L=(()=>{const _=Cn(t,Fs.NAME);return _!=null&&String(_).trim()!==""?String(_):null})();return{id:String((v=(k=t==null?void 0:t.ID)!=null?k:t==null?void 0:t.Identifier)!=null?v:""),name:L,class:u,role:h,level:d,treasury:p,mine:g,baseMain:y,conBase:b,sumBaseTotal:T,attrTotal:S,conTotal:N,totalStats:M,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:s!=null?s*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:l!=null?l*1e3:null}}function ca(t,e){const s=t.map(r=>r[e]).filter(r=>typeof r=="number");return s.length?s.reduce((r,i)=>r+i,0)/s.length:null}async function E1e(t){var l,d,u;const e=Gt(dt,`guilds/${t}/latest/latest`),s=await vn(e);if(!s.exists())return{sec:null,raw:null};const r=s.data()||{},i=(u=(d=r.timestampRaw)!=null?d:(l=r.values)==null?void 0:l.Timestamp)!=null?u:null;let a=null;return typeof r.timestamp=="number"?a=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(a=Jc(i)),{sec:a,raw:i}}async function A1e(t){const e=Gt(dt,`guilds/${t}/snapshots/members_summary`),s=await vn(e);if(!s.exists())return 0;const r=s.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=Jc(r.updatedAt);if(i!=null)return i}return 0}async function I1e(t,e){var a,l,d,u,h,p,g;const s=T1e(e||[]),r=new Set;for(const y of e||[]){const b=String((a=Cn(y,uf.GUILD_IDENTIFIER))!=null?a:"").trim();b&&r.add(b)}for(const y of t||[]){const b=Cn(y,Fs.SERVER);let S=String((l=Cn(y,Fs.GUILD_IDENTIFIER))!=null?l:"").trim();if(!S){const N=(d=Cn(y,Fs.GUILD))!=null?d:y.Guild;if(N&&b){const T=`${R0(b)}__${P0(String(N))}`,M=s.get(T);M&&(S=M)}}S&&r.add(S)}let i=0;for(const y of r){const{sec:b,raw:S}=await E1e(y);if(b==null)continue;const N=await A1e(y);if(b<=N)continue;const T=new Map;for(const H of t||[]){const K=Cn(H,Fs.SERVER);let q=String((u=Cn(H,Fs.GUILD_IDENTIFIER))!=null?u:"").trim();if(!q){const se=(h=Cn(H,Fs.GUILD))!=null?h:H.Guild;if(se&&K){const U=`${R0(K)}__${P0(String(se))}`,Y=s.get(U);Y&&(q=Y)}}if(q!==y)continue;const G=Jc(Cn(H,Fs.TIMESTAMP));if(G==null||G!==b)continue;const re=String((g=(p=H==null?void 0:H.ID)!=null?p:H==null?void 0:H.Identifier)!=null?g:"").trim();re&&(T.has(re)||T.set(re,H))}const M=Array.from(T.values()),L=[];for(const H of M)L.push(C1e(H));L.sort((H,K)=>{var re,se;const q=Nk(H.role),G=Nk(K.role);return q!==G?q-G:((re=H.name)!=null?re:"").toLowerCase().localeCompare(((se=K.name)!=null?se:"").toLowerCase())});const k=ca(L,"level"),v=ca(L,"treasury"),_=ca(L,"mine"),P=ca(L,"baseMain"),E=ca(L,"conBase"),w=ca(L,"sumBaseTotal"),A=ca(L,"attrTotal"),B=ca(L,"conTotal"),D=ca(L,"totalStats"),$=JSON.stringify({gid:y,tsSec:b,members:L.map(H=>{var K,q,G,re,se,U,Y,ie,X,pe,ge,he,ve;return{id:H.id,name:(K=H.name)!=null?K:"",class:(q=H.class)!=null?q:"",role:(G=H.role)!=null?G:"",level:(re=H.level)!=null?re:null,treasury:(se=H.treasury)!=null?se:null,mine:(U=H.mine)!=null?U:null,baseMain:(Y=H.baseMain)!=null?Y:null,conBase:(ie=H.conBase)!=null?ie:null,sumBaseTotal:(X=H.sumBaseTotal)!=null?X:null,attrTotal:(pe=H.attrTotal)!=null?pe:null,conTotal:(ge=H.conTotal)!=null?ge:null,totalStats:(he=H.totalStats)!=null?he:null,guildJoinedMs:(ve=H.guildJoinedMs)!=null?ve:null}})}),F=k1e($),z=Gt(dt,`guilds/${y}/snapshots/members_summary`);await No(z,{guildId:y,count:L.length,updatedAt:S!=null?S:String(b),updatedAtMs:b*1e3,hash:F,avgLevel:k,avgTreasury:v,avgMine:_,avgBaseMain:P,avgConBase:E,avgSumBaseTotal:w,avgAttrTotal:A,avgConTotal:B,avgTotalStats:D,members:L,updatedAtServer:oi()},{merge:!0}),i++}return{guildsProcessed:r.size,snapshotsWritten:i}}function R1e(t){const e=new Date(t),s=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${s}-${r}`}async function P1e(t,e,s,r){var u,h,p;const i=Gt(dt,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await vn(i);if(!a.exists())return await No(i,s,{merge:!1}),{first:s,firstTsMs:(u=s.updatedAtMs)!=null?u:s.timestamp?s.timestamp*1e3:r};const l=a.data(),d=(h=l.updatedAtMs)!=null?h:l.timestamp?l.timestamp*1e3:r;return r<d?(await No(i,s,{merge:!1}),{first:s,firstTsMs:(p=s.updatedAtMs)!=null?p:s.timestamp?s.timestamp*1e3:r}):{first:l,firstTsMs:d}}async function L1e(t,e,s){const r=Gt(dt,`guilds/${t}/history_monthly/${e}`);await No(r,s,{merge:!0})}function D1e(t){var L,k,v,_,P,E,w,A,B,D,$,F,z;const{guildId:e,monthKey:s,server:r,first:i,firstTsMs:a,latest:l,latestTsMs:d}=t,u=a!=null?Math.floor((d-a)/864e5):null,h=u!=null&&u<=40,p={available:h};h||(p.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:s,label:new Date(`${s}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(d).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(d/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:p};if(!h||!i)return g;const y=new Map;for(const H of i.members||[])H.playerId&&y.set(H.playerId,H);const b=[],S=[],N=[],T=[],M=[];for(const H of l.members||[]){if(!H.playerId)continue;const K=y.get(H.playerId)||null,q=(L=H.sumBaseTotal)!=null?L:null,G=(k=K==null?void 0:K.sumBaseTotal)!=null?k:null,re=q!=null&&G!=null?q-G:0,se=(v=H.totalStats)!=null?v:null,U=(_=K==null?void 0:K.totalStats)!=null?_:null,Y=se!=null&&U!=null?se-U:0;b.push({playerId:H.playerId,name:(P=H.name)!=null?P:null,class:(E=H.class)!=null?E:null,levelLatest:(w=H.level)!=null?w:null,baseLatest:q,baseDelta:re}),S.push({playerId:H.playerId,name:(A=H.name)!=null?A:null,base:q,stamDelta:null,shoDelta:null}),N.push({playerId:H.playerId,name:(B=H.name)!=null?B:null,stats:q,delta:re}),T.push({playerId:H.playerId,name:(D=H.name)!=null?D:null,total:se,delta:Y}),M.push({playerId:H.playerId,name:($=H.name)!=null?$:null,class:(F=H.class)!=null?F:null,stats:(z=H.baseMain)!=null?z:null,delta:(K==null?void 0:K.baseMain)!=null&&H.baseMain!=null?H.baseMain-K.baseMain:0})}return b.sort((H,K)=>{var q,G;return((q=K.baseDelta)!=null?q:-1/0)-((G=H.baseDelta)!=null?G:-1/0)}),N.sort((H,K)=>{var q,G;return((q=K.stats)!=null?q:-1/0)-((G=H.stats)!=null?G:-1/0)}),T.sort((H,K)=>{var q,G;return((q=K.total)!=null?q:-1/0)-((G=H.total)!=null?G:-1/0)}),S.sort((H,K)=>{var q,G;return((q=K.base)!=null?q:-1/0)-((G=H.base)!=null?G:-1/0)}),M.sort((H,K)=>{var q,G;return((q=K.stats)!=null?q:-1/0)-((G=H.stats)!=null?G:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:S.slice(0,50),highestBaseStats:N.slice(0,50),highestTotalStats:T.slice(0,50),mainAndCon:M.slice(0,50)}}const L0=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),kk=(t,e)=>{for(const s of Object.keys(t))if(L0(s)===e)return t[s]};async function vA(t,e){var p,g;const{playersRows:s,guildsRows:r}=t,i=[];let a=[],l=[],d=!0;const u=e!=null&&e.onProgress?(y,b)=>{var S;return(S=e.onProgress)==null?void 0:S.call(e,{...y,kind:b})}:void 0;try{const y=await Sk(null,{kind:"guilds",rows:r,onProgress:u?b=>u(b,"guilds"):void 0});i.push(y),Array.isArray(y.guildResults)&&(l=y.guildResults)}catch(y){console.error("[ImportSelectionToDb] guild import error",y),d=!1}try{const y=await Sk(null,{kind:"players",rows:s,onProgress:u?b=>u(b,"players"):void 0});i.push(y),Array.isArray(y.playerResults)&&(a=y.playerResults)}catch(y){console.error("[ImportSelectionToDb] player import error",y),d=!1}try{await I1e(s,r)}catch(y){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",y)}const h=new Set;for(const y of r){const b=kk(y,L0("Guild Identifier"));b&&h.add(String(b))}for(const y of s){const b=kk(y,L0("Guild Identifier"));b&&h.add(String(b))}for(const y of h){const b=Gt(dt,`guilds/${y}/snapshots/members_summary`),S=await vn(b);if(!S.exists())continue;const N=S.data(),T=Number((p=N.updatedAtMs)!=null?p:N.timestamp?N.timestamp*1e3:Date.now()),M=R1e(T);let L=null,k=null;try{const _=await P1e(y,M,N,T);L=_.first,k=_.firstTsMs}catch(_){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:y,monthKey:M,error:_})}const v=D1e({guildId:y,monthKey:M,server:(g=N.server)!=null?g:null,first:L,firstTsMs:k,latest:N,latestTsMs:T});try{await L1e(y,M,v)}catch(_){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:y,monthKey:M,error:_})}}return{ok:d,players:a,guilds:l,reports:i}}const jy=t=>String(t!=null?t:"").trim(),Bn=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,"");function M1e(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function Sy(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[],delimiter:","};const r=M1e((u=s[0])!=null?u:""),i=h=>{const p=[];let g="",y=!1;for(let b=0;b<h.length;b++){const S=h[b];S==='"'?y&&h[b+1]==='"'?(g+='"',b++):y=!y:S===r&&!y?(p.push(g),g=""):g+=S}return p.push(g),p},l=(s[0]?i(s[0]).map(jy):[]).map((h,p)=>h||`col${p}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const p=i(s[h]);if(p.every(y=>jy(y)===""))continue;const g={};for(let y=0;y<l.length;y++)g[l[y]]=p[y]!=null?jy(p[y]):"";d.push(g)}return{headers:l,rows:d,delimiter:r}}const Wt={PLAYERS:{IDENTIFIER:Bn("Identifier"),PID:Bn("ID"),GUILD_IDENTIFIER:Bn("Guild Identifier"),TIMESTAMP:Bn("Timestamp"),NAME:Bn("Name"),SERVER:Bn("Server"),OWN:Bn("Own")},GUILDS:{GUILD_IDENTIFIER:Bn("Guild Identifier"),GUILD_MEMBER_COUNT:Bn("Guild Member Count"),NAME:Bn("Name"),TIMESTAMP:Bn("Timestamp"),SERVER:Bn("Server")}},yA=(t,e)=>{const s=new Set(t.map(Bn));return e.every(r=>s.has(r))},As=(t,e)=>{for(const s of Object.keys(t))if(Bn(s)===e)return t[s]};function F1e(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function Tk(t){const e=t.map(Bn),s=a=>e.includes(a);let r=0,i=0;return s(Wt.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),s(Wt.PLAYERS.IDENTIFIER)&&(r+=2),s(Wt.PLAYERS.TIMESTAMP)&&(r+=1),s(Wt.GUILDS.GUILD_IDENTIFIER)&&(i+=2),s(Wt.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),s(Wt.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||s(Wt.PLAYERS.IDENTIFIER)?"players":"guilds"}function Ny(t,e){const s=F1e(t);if(s!=="unknown"){const i=Tk(e);return i!=="unknown"&&i!==s?{kind:s,via:"filename",warn:`Per Dateiname als "${s}" klassifiziert, Header deuten auf "${i}".`}:{kind:s,via:"filename"}}const r=Tk(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function Kf(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=Date.parse(e);return Number.isFinite(s)?Math.floor(s/1e3):null}function B1e(t,e){var r;const s=[];if(!yA(e,[Wt.PLAYERS.GUILD_IDENTIFIER]))return s;for(const i of t){const a=As(i,Wt.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const l=As(i,Wt.PLAYERS.SERVER),d=l&&String(l).trim()!==""?String(l).trim().toUpperCase():void 0;s.push({guildIdentifier:String(a),id:As(i,Wt.PLAYERS.IDENTIFIER)||void 0,name:As(i,Wt.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(As(i,Wt.PLAYERS.OWN)).toLowerCase()),server:d,tsSec:(r=Kf(As(i,Wt.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return s}function $1e(t,e){const s=[];if(!yA(e,[Wt.GUILDS.GUILD_IDENTIFIER,Wt.GUILDS.GUILD_MEMBER_COUNT]))return s;for(const r of t){const i=As(r,Wt.GUILDS.GUILD_IDENTIFIER),a=Number(As(r,Wt.GUILDS.GUILD_MEMBER_COUNT));if(!i||!Number.isFinite(a))continue;const l=Kf(As(r,Wt.GUILDS.TIMESTAMP));s.push({guildIdentifier:String(i),name:As(r,Wt.GUILDS.NAME)||void 0,memberCount:a,tsSec:l!=null?l:void 0})}return s}function O1e(t,e){var T,M,L,k,v,_;const s=[],r=new Map;for(const P of t){const E=P.id||"",w=(T=P.server)==null?void 0:T.toUpperCase();if(E){const A=`${w!=null?w:"NO"}::${E}`;r.has(A)||r.set(A,{server:w,id:E,name:P.name||"",own:!!P.own})}}const i=r.size,a=t.length,l=Array.from(r.values()).filter(P=>P.own).length,d=new Map;for(const P of r.values())P.server&&d.set(P.server,((M=d.get(P.server))!=null?M:0)+1);const u=Array.from(d.entries()).map(([P,E])=>({server:P,players:E})).sort((P,E)=>E.players-P.players),h=u.length,p=new Map;for(const P of t)p.set(P.guildIdentifier,((L=p.get(P.guildIdentifier))!=null?L:0)+1);const g=new Set,y=new Map;for(const P of e)g.add(P.guildIdentifier),y.set(P.guildIdentifier,{name:P.name||"",declared:P.memberCount});for(const P of p.keys())g.add(P);let b=0;const S=[];for(const P of g){const E=(k=y.get(P))==null?void 0:k.declared,w=(v=p.get(P))!=null?v:0,A=E!=null&&w===E;A&&b++,S.push({id:P,name:((_=y.get(P))==null?void 0:_.name)||"",declaredCount:E!=null?E:0,playersCount:w,full:A})}[...y.values()].some(P=>Number.isFinite(P.declared))||s.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),S.sort((P,E)=>P.name?P.name.localeCompare(E.name):P.id.localeCompare(E.id));const N=Array.from(r.values()).sort((P,E)=>(P.server||"")===(E.server||"")?P.name.localeCompare(E.name):(P.server||"").localeCompare(E.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:l,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:s,playersList:N,guildsList:S}}function bA({mode:t="db",onBuildUploadSession:e}){const[s,r]=I.useState([]),[i,a]=I.useState(null),[l,d]=I.useState(!1),[u,h]=I.useState(null),[p,g]=I.useState(!1),[y,b]=I.useState(null),[S,N]=I.useState([]),[T,M]=I.useState(null);I.useEffect(()=>{const $=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=$}},[]);const L=I.useCallback(async $=>{var F;d(!0),h(null),a(null),N([]),b(null);try{const z=Array.from($).slice(0,2),H=[];let K=[],q=[];for(const G of z){const re=G,se=await re.text(),U=Sy(se),{kind:Y,warn:ie}=Ny(re.name,U.headers);H.push({name:re.name,size:re.size||se.length,rows:U.rows.length,delimiter:U.delimiter,text:se,kind:Y,warn:ie}),Y==="players"?K=K.concat(B1e(U.rows,U.headers)):Y==="guilds"&&(q=q.concat($1e(U.rows,U.headers)))}r(H),a(O1e(K,q))}catch(z){h(String((F=z==null?void 0:z.message)!=null?F:z))}finally{d(!1)}},[]),k=I.useCallback(async $=>{!$||$.length===0||await L($)},[L]),v=I.useCallback(async $=>{$.preventDefault();const F=$.dataTransfer.files;!F||!F.length||await L(F)},[L]),_=$=>{const F=$!=null?String($).trim():"";return F?F.toUpperCase():void 0},P=I.useCallback(()=>{var G,re,se,U;let $=[],F=[];for(const Y of s){const ie=Sy(Y.text),{kind:X}=Ny(Y.name,ie.headers);X==="players"?$=$.concat(ie.rows):X==="guilds"&&(F=F.concat(ie.rows))}const z=[],H=new Map,K=new Map;for(const Y of $){const ie=(G=As(Y,Wt.PLAYERS.PID))!=null?G:As(Y,Wt.PLAYERS.IDENTIFIER),X=_(As(Y,Wt.PLAYERS.SERVER)),pe=Kf(As(Y,Wt.PLAYERS.TIMESTAMP));if(!ie||!X||pe==null)continue;const ge=As(Y,Wt.PLAYERS.GUILD_IDENTIFIER),he=ge?String(ge):void 0,ve={playerId:String(ie),name:As(Y,Wt.PLAYERS.NAME)||"",server:X,guildId:he,level:void 0,className:void 0,scanTimestampSec:pe};z.push(ve),he&&(H.has(he)||H.set(he,[]),H.get(he).push(ve),K.has(he)||K.set(he,X))}const q=[];for(const Y of F){const ie=As(Y,Wt.GUILDS.GUILD_IDENTIFIER),X=ie?String(ie):"";if(!X)continue;const pe=Kf(As(Y,Wt.GUILDS.TIMESTAMP));if(pe==null)continue;const ge=(re=_(As(Y,Wt.GUILDS.SERVER)))!=null?re:K.get(X);if(!ge)continue;const he=As(Y,Wt.GUILDS.GUILD_MEMBER_COUNT),ve=Number(he),_e=(se=H.get(X))!=null?se:[];q.push({guildId:X,name:As(Y,Wt.GUILDS.NAME)||X,server:ge,memberCount:Number.isFinite(ve)?ve:void 0,scanTimestampSec:pe,members:_e.map(ce=>({playerId:ce.playerId,name:ce.name,level:ce.level,className:ce.className}))}),H.delete(X)}for(const[Y,ie]of H.entries()){if(!ie.length)continue;const X=K.get(Y);if(!X)continue;const pe=ie.reduce((ge,he)=>Math.max(ge,he.scanTimestampSec),ie[0].scanTimestampSec);q.push({guildId:Y,name:Y,server:X,memberCount:void 0,scanTimestampSec:pe,members:ie.map(ge=>({playerId:ge.playerId,name:ge.name,level:ge.level,className:ge.className}))})}return{filename:(U=s[0])==null?void 0:U.name,players:z,guilds:q}},[s]);async function E(){var $;if(s.length){g(!0),M({phase:"prepare",current:0,total:0}),b(null),N([]);try{let F=[],z=[];for(const K of s){const q=Sy(K.text),{kind:G}=Ny(K.name,q.headers);G==="players"&&(F=F.concat(q.rows)),G==="guilds"&&(z=z.concat(q.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!F.length,hasGuildsCsv:!!z.length,playersRows:F.length,guildsRows:z.length}),!z.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!F.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const H=await vA({playersRows:F,guildsRows:z},{onProgress:K=>M(K)});M({phase:"done",current:1,total:1}),N(H.reports),b("Import abgeschlossen.")}catch(F){console.error("[UploadCenter] Import error:",F),b(`Fehler beim Import: ${($=F==null?void 0:F.message)!=null?$:F}`)}finally{g(!1),setTimeout(()=>M(null),1200)}}}const w=I.useCallback(async()=>{var $;if(!(t!=="session"||!e||!s.length)){g(!0),b(null),N([]),h(null),M(null);try{const F=P();e(F),b("Session prepared locally.")}catch(F){console.error("[UploadCenter] Session build error:",F),b(`Fehler beim Import: ${($=F==null?void 0:F.message)!=null?$:F}`)}finally{g(!1)}}},[t,e,s,P]),A=I.useMemo(()=>s.map($=>`${$.name} (${$.rows} rows, ${$.delimiter}, ${$.kind}${$.warn?" ":""})`),[s]),B=I.useMemo(()=>s.reduce(($,F)=>$+F.rows,0),[s]),D=T?Math.floor(100*T.current/Math.max(1,T.total||1)):0;return n.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[n.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[n.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),n.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[A.map(($,F)=>n.jsx("span",{className:"uc-chip",title:s[F].warn||"",children:$},F)),s.length>0&&n.jsxs("span",{className:"uc-chip",children:["Total: ",B," rows"]})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[T&&t==="db"&&n.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:n.jsx("div",{style:{width:`${D}%`,height:"100%",background:"#2E75F0"}})}),n.jsxs("span",{style:{color:"#D6E4F7"},children:[D,"%"]})]}),n.jsx("button",{onClick:t==="session"?w:E,disabled:!s.length||!i||p||t==="session"&&!e,className:"uc-btn",children:p?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),y&&n.jsx("span",{style:{color:y.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:y})]})]}),n.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[n.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),n.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:$=>k($.target.files),disabled:l})]}),n.jsx("div",{onDragOver:$=>$.preventDefault(),onDrop:v,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),l&&n.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&n.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[n.jsx("b",{children:"Fehler:"})," ",u]}),i&&n.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[n.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:n.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),n.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[n.jsx(ku,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),n.jsx(ku,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),n.jsx(ku,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),n.jsx(ku,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),n.jsx(ku,{label:"Verschiedene Server",value:i.servers})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),n.jsx("tbody",{children:i.perServer.map($=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:$.server}),n.jsx("td",{style:{textAlign:"right"},children:$.players})]},$.server))})]})]}),n.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[n.jsxs("details",{children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),n.jsx("tbody",{children:i.playersList.map(($,F)=>{var z,H;return n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:(z=$.server)!=null?z:""}),n.jsx("td",{children:$.id}),n.jsx("td",{children:$.name||""}),n.jsx("td",{children:$.own?"":""})]},`${(H=$.server)!=null?H:"NO"}-${$.id}-${F}`)})})]})})]}),n.jsxs("details",{open:!0,children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),n.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),n.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),n.jsx("tbody",{children:i.guildsList.map(($,F)=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:$.id}),n.jsx("td",{children:$.name||""}),n.jsx("td",{style:{textAlign:"right"},children:$.declaredCount||0}),n.jsx("td",{style:{textAlign:"right"},children:$.playersCount}),n.jsx("td",{style:{textAlign:"center"},children:$.full?"":""})]},`${$.id}-${F}`))})]})})]})]}),!!i.notes.length&&n.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",n.jsx("ul",{children:i.notes.map(($,F)=>n.jsx("li",{children:$},F))})]})]})]})}function ku({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[n.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),n.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),s&&n.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:s})]})}function V1e(){return n.jsxs("div",{children:[n.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),n.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",n.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function U1e(){const{isOpen:t,close:e,activeTab:s,setTab:r,canUse:i}=U1();return!t||!i?null:n.jsx("div",{className:Ti.backdrop,onClick:e,children:n.jsxs("div",{className:Ti.panel,onClick:a=>a.stopPropagation(),children:[n.jsxs("div",{className:Ti.header,children:[n.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),n.jsxs("div",{className:Ti.tabs,children:[n.jsx("button",{type:"button",className:`${Ti.tabBtn} ${s==="csv"?Ti.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),n.jsx("button",{type:"button",className:`${Ti.tabBtn} ${s==="json"?Ti.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),n.jsx("button",{type:"button",className:Ti.closeBtn,onClick:e,children:"Schlieen"})]}),n.jsx("div",{className:Ti.content,children:s==="csv"?n.jsx(bA,{mode:"db"}):n.jsx(V1e,{})})]})})}const _A="sfdatahub_upload_sessions_v1",ky={sessions:[],activeSessionId:null},z1e=()=>{var t,e,s,r,i,a;if(typeof window=="undefined")return ky;try{const l=window.localStorage.getItem(_A);if(!l)return ky;const d=JSON.parse(l);if(d&&typeof d=="object"){if("version"in d&&(d==null?void 0:d.version)===1&&d.type==="uploadCenter.sessions"&&Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(s=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?s:null}}if(Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(l){console.warn("[UploadCenterSessions] Failed to parse persisted state",l)}return ky},wA=I.createContext(null);function H1e({children:t}){const e=I.useMemo(()=>z1e(),[]),[s,r]=I.useState(()=>e.sessions),[i,a]=I.useState(()=>e.activeSessionId),l=I.useCallback(N=>({...N,players:N.players.map(T=>({...T,status:"pending"})),guilds:N.guilds.map(T=>({...T,status:"pending"}))}),[]);I.useEffect(()=>{if(typeof window!="undefined")try{const N={version:1,type:"uploadCenter.sessions",sessions:s,activeSessionId:i};window.localStorage.setItem(_A,JSON.stringify(N))}catch(N){console.warn("[UploadCenterSessions] Failed to persist state",N)}},[s,i]);const d=I.useCallback(N=>{const T=l(N);r(M=>[...M,T]),a(T.id)},[l]),u=I.useCallback(N=>{a(N)},[]),h=I.useCallback(N=>{r(T=>{const M=T.filter(L=>L.id!==N);return a(L=>{var k,v;return L===N?(v=(k=M[0])==null?void 0:k.id)!=null?v:null:L}),M})},[]),p=I.useCallback(()=>{r([]),a(null)},[]),g=I.useCallback((N,T,M,L)=>{r(k=>k.map(v=>{if(v.id!==N)return v;if(T==="player"){const P=v.players.map(E=>E.key===M?{...E,selected:L}:E);return{...v,players:P}}const _=v.guilds.map(P=>P.key===M?{...P,selected:L}:P);return{...v,guilds:_}}))},[]),y=I.useCallback((N,T,M)=>{r(L=>L.map(k=>{if(k.id!==N)return k;if(T==="player"){const _=k.players.map(P=>({...P,selected:M}));return{...k,players:_}}const v=k.guilds.map(_=>({..._,selected:M}));return{...k,guilds:v}}))},[]),b=I.useCallback((N,T,M,L)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:N,kind:T,recordKey:M,status:L}),r(k=>k.map(v=>{if(v.id!==N)return v;if(T==="player"){const P=v.players.map(E=>E.key===M?{...E,status:L}:E);return{...v,players:P}}const _=v.guilds.map(P=>P.key===M?{...P,status:L}:P);return{...v,guilds:_}}))},[]),S=I.useMemo(()=>({sessions:s,activeSessionId:i,addSession:d,setActiveSession:u,removeSession:h,clearAllSessions:p,toggleRecordSelection:g,selectAllInSession:y,setRecordStatus:b}),[s,i,d,u,h,p,g,y,b]);return n.jsx(wA.Provider,{value:S,children:t})}function G1e(){const t=I.useContext(wA);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}function W1e({route:t,featureId:e,fallback:s=null,children:r}){var p;const{resolveRule:i,canAccessFeature:a,canAccessRule:l}=kg(),d=(p=e!=null?e:t)!=null?p:"/",u=ee.useMemo(()=>i(d),[i,d]);return ee.useEffect(()=>{u||console.debug(`[FeatureGate] No rule found for target "${d}", allowing by default.`)},[u,d]),ee.useMemo(()=>!e&&!t?!0:u?l(u):a(d),[a,l,e,t,u,d])?n.jsx(n.Fragment,{children:r}):n.jsx(n.Fragment,{children:s})}const Ck="pending";function q1e(t,e,s){const r=t.players.map(a=>{var d;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(d=a.guildId)!=null?d:void 0,level:a.level,className:a.className,selected:!0,status:Ck}}),i=t.guilds.map(a=>{var u;const l=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,d=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:l,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:d,selected:!0,status:Ck}});return{id:e,createdAt:s,sourceFilename:t.filename,players:r,guilds:i}}function K1e(){return n.jsx(wt,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:n.jsx(Q1e,{})},"upload-center-shell")}function Q1e(){const{sessions:t,activeSessionId:e,addSession:s,setActiveSession:r,toggleRecordSelection:i,selectAllInSession:a,setRecordStatus:l}=G1e(),d=t.find(v=>v.id===e)||null,[u,h]=ee.useState(new Set),[p,g]=I.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),y=I.useCallback(v=>{const _=`csv_${Date.now()}`,P=new Date().toISOString(),E=q1e(v,_,P);s(E),r(_)},[s,r]),b=v=>{const _=new Date(v);return Number.isNaN(_.getTime())?"Unknown date":_.toLocaleString()},S=v=>{h(_=>{const P=new Set(_);return P.has(v)?P.delete(v):P.add(v),P})},N=v=>{var w,A;const _="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",P={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},E={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return n.jsx("span",{className:`${_} ${(w=P[v])!=null?w:P.pending}`,children:(A=E[v])!=null?A:v})},T=I.useMemo(()=>{if(!d)return!1;const v=d.players.some(P=>P.selected),_=d.guilds.some(P=>P.selected);return v||_},[d]),M=p.phase==="uploading"||p.phase==="finalizing",L=()=>{if(!d)return null;const v=d.players.filter(w=>w.selected),_=d.guilds.filter(w=>w.selected);if(!v.length&&!_.length)return null;const P=v.map(w=>{var A,B,D;return{Identifier:w.playerId,"Guild Identifier":(A=w.guildId)!=null?A:"",Timestamp:w.scanTimestampSec,Server:w.server,Name:w.name,Class:(B=w.className)!=null?B:"",Level:(D=w.level)!=null?D:""}}),E=_.map(w=>{var A;return{"Guild Identifier":w.guildId,"Guild Member Count":(A=w.memberCount)!=null?A:w.members.length,Timestamp:w.scanTimestampSec,Name:w.name,Server:w.server}});return{playersRows:P,guildsRows:E}},k=async()=>{var $,F;if(!d)return;const v=L();if(!v)return;const _=d.players.filter(z=>z.selected),P=d.guilds.filter(z=>z.selected),E=_.length+P.length;if(!E)return;g({phase:"uploading",processed:0,total:E,created:0,duplicate:0,error:0});const w={processed:0,created:0,duplicate:0,error:0},A={processed:0,created:0,duplicate:0,error:0},B=()=>{const z=Math.min(w.processed+A.processed,E),H=z>=E&&E>0?"finalizing":"uploading";g({phase:H,processed:z,total:E,created:w.created+A.created,duplicate:w.duplicate+A.duplicate,error:w.error+A.error})},D=z=>H=>{var q;if((H==null?void 0:H.pass)!=="scans")return;const K=z==="players"?w:A;typeof H.current=="number"&&(K.processed=Math.min(H.current,(q=H.total)!=null?q:H.current)),typeof H.created=="number"&&(K.created=H.created),typeof H.duplicate=="number"&&(K.duplicate=H.duplicate),typeof H.error=="number"&&(K.error=H.error),B()};try{console.log("[UploadCenter] starting selection upload",{players:_.length,guilds:P.length});const z=await vA(v,{onProgress:G=>{(G==null?void 0:G.kind)==="players"?D("players")(G):(G==null?void 0:G.kind)==="guilds"&&D("guilds")(G)}}),H=d.id;let K=!1,q=!1;console.log("[UploadCenter] importSelectionToDb result",{playersSample:($=z==null?void 0:z.players)==null?void 0:$.slice(0,5),guildsSample:(F=z==null?void 0:z.guilds)==null?void 0:F.slice(0,5),selectedPlayerKeys:_.slice(0,5).map(G=>G.key),selectedGuildKeys:P.slice(0,5).map(G=>G.key)}),((z==null?void 0:z.players)||[]).forEach(G=>{K=!0,l(H,"player",G.key,G.status)}),((z==null?void 0:z.guilds)||[]).forEach(G=>{q=!0,l(H,"guild",G.key,G.status)}),!K&&!q&&(_.forEach(G=>l(H,"player",G.key,"created")),P.forEach(G=>l(H,"guild",G.key,"created")))}catch(z){console.error("[UploadCenter] Failed to upload selection",z)}finally{g(z=>({...z,phase:"done"}))}};return n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),n.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),n.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[n.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),n.jsx(bA,{mode:"session",onBuildUploadSession:y})]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):n.jsx("div",{className:"flex flex-col gap-3",children:t.map(v=>{const _=v.id===e;return n.jsxs("button",{type:"button",onClick:()=>r(v.id),className:["w-full rounded-xl border px-4 py-3 text-left transition",_?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:v.sourceFilename||"Unnamed session"}),n.jsx("span",{className:"text-xs text-slate-400",children:b(v.createdAt)})]}),n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players: ",v.players.length]}),n.jsxs("div",{children:["Guilds: ",v.guilds.length]})]})]}),_&&n.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},v.id)})})]})}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:k,disabled:M||!d||!T,children:p.phase==="uploading"?"Uploading":p.phase==="finalizing"?"Finalizing":"Upload selected to DB"}),p.total>0&&n.jsx("div",{className:"text-xs text-slate-300",children:p.phase==="uploading"?n.jsxs(n.Fragment,{children:["Uploading ",p.processed," / ",p.total," records (",Math.round(p.processed/Math.max(p.total,1)*100),"%) "," ",p.created," created, ",p.duplicate," duplicates, ",p.error," errors"]}):p.phase==="finalizing"?n.jsxs(n.Fragment,{children:["Finalizing import  ",p.created," created, ",p.duplicate," duplicates, ",p.error," errors"]}):p.phase==="done"?n.jsxs(n.Fragment,{children:["Upload finished: ",p.created," created, ",p.duplicate," duplicates, ",p.error," errors"]}):null}),d?n.jsxs("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:["Active session: ",d.sourceFilename||d.id," "," ",d.players.length," players  ",d.guilds.length," guilds"]}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),d&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",d.players.length," total,"," ",d.players.filter(v=>v.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>a(d.id,"player",!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>a(d.id,"player",!1),children:"Clear selection"})]}),d.players.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:d.players.map(v=>{var _,P;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:v.selected,onChange:()=>i(d.id,"player",v.key,!v.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:v.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:v.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:(_=v.level)!=null?_:""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:(P=v.className)!=null?P:""}),n.jsx("td",{className:"px-3 py-2",children:N(v.status)})]},v.key)})})]})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",d.guilds.length," total,"," ",d.guilds.filter(v=>v.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>a(d.id,"guild",!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>a(d.id,"guild",!1),children:"Clear selection"})]}),d.guilds.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:d.guilds.map(v=>{var E;const _=u.has(v.key),P=(E=v.memberCount)!=null?E:v.members.length;return n.jsxs(ee.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>S(v.key),"aria-expanded":_,children:_?"":""})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:v.selected,onChange:()=>i(d.id,"guild",v.key,!v.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:v.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:v.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:P}),n.jsx("td",{className:"px-3 py-2",children:N(v.status)})]}),_&&n.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:n.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[n.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),v.members.length===0?n.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):n.jsxs("table",{className:"w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),n.jsx("tbody",{children:v.members.map(w=>{var A,B;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-2 py-1",children:w.name||""}),n.jsx("td",{className:"px-2 py-1",children:(A=w.level)!=null?A:""}),n.jsx("td",{className:"px-2 py-1",children:(B=w.className)!=null?B:""})]},w.key)})})]})]})})]},v.key)})})]})})]})]})]})})]})}function Y1e(){const{canUse:t}=U1();return t?n.jsx(K1e,{}):n.jsx(wt,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[n.jsx(nT,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),n.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const X1e=t=>()=>n.jsx("div",{style:{padding:16},children:n.jsx("h2",{style:{color:"var(--title)"},children:t})}),Fn=X1e("Diese Unterseite existiert in der neuen Struktur nicht mehr."),Nt=(t,e,s,r=n.jsx(hl,{to:"/",replace:!0}))=>n.jsx(W1e,{featureId:t,route:e,fallback:r,children:s});L4.createRoot(document.getElementById("root")).render(n.jsx(ee.StrictMode,{children:n.jsx(ZF,{children:n.jsx(lB,{children:n.jsx(pB,{children:n.jsxs(H1e,{children:[n.jsx(YR,{children:n.jsx(kR,{children:n.jsxs(fe,{element:n.jsx(g$,{}),children:[n.jsx(fe,{path:"/",element:Nt("main.home","/",n.jsx(uG,{}),n.jsx(hl,{to:"/login",replace:!0}))}),n.jsx(fe,{path:"/login",element:n.jsx(CG,{})}),n.jsx(fe,{path:"/dashboard",element:Nt("main.dashboard","/dashboard",n.jsx(EG,{}))}),n.jsx(fe,{path:"/dashboard/kpis",element:Nt("main.dashboard","/dashboard",n.jsx(RG,{}))}),n.jsx(fe,{path:"/dashboard/activity",element:Nt("main.dashboard","/dashboard",n.jsx(PG,{}))}),n.jsx(fe,{path:"/dashboard/progression",element:Nt("main.dashboard","/dashboard",n.jsx(LG,{}))}),n.jsx(fe,{path:"/discover",element:Nt("main.discover","/discover",n.jsx(DG,{}))}),n.jsx(fe,{path:"/toplists",element:Nt("main.toplists","/toplists",n.jsx(Fq,{}))}),n.jsx(fe,{path:"/sfmagazine",element:n.jsx(OG,{})}),n.jsx(fe,{path:"/sfmagazine/historybook",element:n.jsx(gW,{})}),n.jsx(fe,{path:"/help",element:n.jsx(IW,{})}),n.jsx(fe,{path:"/players",element:n.jsx(Bq,{})}),n.jsx(fe,{path:"/players/rankings",element:n.jsx($q,{})}),n.jsx(fe,{path:"/players/stats",element:n.jsx(Oq,{})}),n.jsx(fe,{path:"/players/profile",element:n.jsx(ty,{})}),n.jsx(fe,{path:"/players/profile/:playerId",element:n.jsx(ty,{})}),n.jsx(fe,{path:"/players/compare",element:n.jsx(NQ,{})}),n.jsx(fe,{path:"/player/:playerId",element:n.jsx(ty,{})}),n.jsx(fe,{path:"/guilds",element:n.jsx(PQ,{})}),n.jsx(fe,{path:"/guilds/rankings",element:n.jsx(LQ,{})}),n.jsx(fe,{path:"/guilds/stats",element:n.jsx(DQ,{})}),n.jsx(fe,{path:"/guilds/profile",element:n.jsx(ay,{})}),n.jsx(fe,{path:"/guilds/profile/:guildId",element:n.jsx(ay,{})}),n.jsx(fe,{path:"/guild/:guildId",element:n.jsx(ay,{})}),n.jsx(fe,{path:"/servers",element:n.jsx(wJ,{})}),n.jsx(fe,{path:"/servers/rankings",element:n.jsx(jJ,{})}),n.jsx(fe,{path:"/servers/stats",element:n.jsx(SJ,{})}),n.jsx(fe,{path:"/servers/profile",element:n.jsx(oy,{})}),n.jsx(fe,{path:"/servers/profile/:serverId",element:n.jsx(oy,{})}),n.jsx(fe,{path:"/server/:serverId",element:n.jsx(oy,{})}),n.jsx(fe,{path:"/u/:profileId",element:n.jsx(PZ,{})}),n.jsx(fe,{path:"/guidehub/*",element:Nt("main.guidehub","/guidehub",n.jsx(pie,{}))}),n.jsx(fe,{path:"/tools",element:Nt("main.tools","/tools",n.jsx(n1e,{}))}),n.jsx(fe,{path:"/upload-center",element:Nt("main.uploadCenter","/upload-center",n.jsx(Y1e,{}),n.jsx(hl,{to:"/login",replace:!0}))}),n.jsx(fe,{path:"/UploadCenter",element:n.jsx(hl,{to:"/upload-center",replace:!0})}),n.jsx(fe,{path:"/community",element:Nt("main.community","/community",n.jsx(aoe,{}))}),n.jsx(fe,{path:"/community/scans",element:Nt("main.community","/community",n.jsx(KE,{}))}),n.jsx(fe,{path:"/community/predictions",element:Nt("main.community","/community",n.jsx(QE,{}))}),n.jsx(fe,{path:"/community/creators",element:Nt("main.community","/community",n.jsx(qE,{}))}),n.jsx(fe,{path:"/community/feedback",element:Nt("main.community","/community",n.jsx(XE,{}))}),n.jsx(fe,{path:"/community/news",element:Nt("main.community","/community",n.jsx(YE,{}))}),n.jsx(fe,{path:"/community/records",element:Nt("main.community","/community",n.jsx(JE,{}))}),n.jsx(fe,{path:"/scans",element:Nt("main.scans","/scans",n.jsx(ooe,{}))}),n.jsx(fe,{path:"/scans/latest",element:Nt("main.scans","/scans",n.jsx(loe,{}))}),n.jsx(fe,{path:"/scans/archive",element:Nt("main.scans","/scans",n.jsx(coe,{}))}),n.jsx(fe,{path:"/guild-hub",element:Nt("main.guildHub","/guild-hub",n.jsx(doe,{}))}),n.jsx(fe,{path:"/guild-hub/planner",element:Nt("main.guildHub","/guild-hub",n.jsx(Rle,{}))}),n.jsx(fe,{path:"/guild-hub/fusion-planner",element:Nt("main.guildHub","/guild-hub",n.jsx(gpe,{}))}),n.jsx(fe,{path:"/guild-hub/compare-guilds",element:Nt("main.guildHub","/guild-hub",n.jsx(xpe,{}))}),n.jsx(fe,{path:"/guild-hub/waitlist",element:Nt("main.guildHub","/guild-hub",n.jsx(Mme,{}))}),n.jsx(fe,{path:"/guild-hub/activity",element:Nt("main.guildHub","/guild-hub",n.jsx(Hme,{}))}),n.jsx(fe,{path:"/guild-hub/imports",element:Nt("main.guildHub","/guild-hub",n.jsx(Gme,{}))}),n.jsx(fe,{path:"/guild-hub/announcements",element:Nt("main.guildHub","/guild-hub",n.jsx(Wme,{}))}),n.jsx(fe,{path:"/guild-hub/events",element:Nt("main.guildHub","/guild-hub",n.jsx(qme,{}))}),n.jsx(fe,{path:"/guild-hub/roles",element:Nt("main.guildHub","/guild-hub",n.jsx(Kme,{}))}),n.jsx(fe,{path:"/guild-hub/settings",element:Nt("main.guildHub","/guild-hub",n.jsx(Qme,{}))}),n.jsx(fe,{path:"/admin",element:Nt("main.admin","/admin",n.jsx(Zme,{}))}),n.jsx(fe,{path:"/admin/errors",element:Nt("main.admin","/admin",n.jsx(nfe,{}))}),n.jsx(fe,{path:"/admin/scans-uploaded",element:Nt("main.admin","/admin",n.jsx(ife,{}))}),n.jsx(fe,{path:"/admin/creators-api",element:Nt("main.admin","/admin",n.jsx(ffe,{}))}),n.jsx(fe,{path:"/admin/users",element:Nt("main.admin","/admin",n.jsx(Efe,{}))}),n.jsx(fe,{path:"/settings",element:Nt("main.settings","/settings",n.jsx(Dfe,{}))}),n.jsx(fe,{path:"/settings/account",element:Nt("main.settings","/settings",n.jsx(Rge,{}))}),n.jsxs(fe,{path:"/playground",element:Nt("main.playground","/playground",n.jsx(Lge,{})),children:[n.jsx(fe,{index:!0,element:n.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),n.jsx(fe,{path:"list-views",element:n.jsx(ok,{})}),n.jsx(fe,{path:"rescan-widget",element:n.jsx(ck,{})}),n.jsx(fe,{path:"upload-sim",element:n.jsx(dk,{})}),n.jsx(fe,{path:"theme-maker",element:n.jsx(nk,{})}),n.jsx(fe,{path:"theme-maker-pro",element:n.jsx(ik,{})}),n.jsx(fe,{path:"am-rune-bonuses-demos",element:n.jsx(Ixe,{})}),n.jsx(fe,{path:"templates/content-shell",element:n.jsx(Sve,{})}),n.jsx(fe,{path:"templates/blank",element:n.jsx(kve,{})}),n.jsx(fe,{path:"templates/blank-alt",element:n.jsx(Cve,{})}),n.jsx(fe,{path:"templates/blank-layout-2",element:n.jsx(Rve,{})}),n.jsx(fe,{path:"templates/blank-layout-3",element:n.jsx(Lve,{})}),n.jsx(fe,{path:"templates/blank-layout-4",element:n.jsx(Dve,{})}),n.jsx(fe,{path:"portrait-maker",element:n.jsx(bve,{})}),n.jsx(fe,{path:"hud",element:n.jsx(Rxe,{})}),n.jsx(fe,{path:"hud/game-buttons",element:n.jsx(ive,{})}),n.jsx(fe,{path:"core-ui/theme-maker",element:n.jsx(nk,{})}),n.jsx(fe,{path:"core-ui/theme-maker-pro",element:n.jsx(ik,{})}),n.jsx(fe,{path:"core-ui/list-views",element:n.jsx(ok,{})}),n.jsx(fe,{path:"sync/rescan",element:n.jsx(ck,{})}),n.jsx(fe,{path:"upload/sim",element:n.jsx(dk,{})}),n.jsx(fe,{path:"import/har",element:n.jsx($ve,{})}),n.jsx(fe,{path:"import/json-csv",element:n.jsx(zve,{})}),n.jsx(fe,{path:"import/schema",element:n.jsx(qve,{})}),n.jsx(fe,{path:"hubs/player-contained",element:n.jsx(Xve,{})}),n.jsx(fe,{path:"hubs/guilds",element:n.jsx(tye,{})}),n.jsx(fe,{path:"hubs/servers",element:n.jsx(iye,{})}),n.jsx(fe,{path:"rankings/views",element:n.jsx(cye,{})}),n.jsx(fe,{path:"analytics/kpi",element:n.jsx(pye,{})}),n.jsx(fe,{path:"analytics/progression",element:n.jsx(xye,{})}),n.jsx(fe,{path:"analytics/legendary-pets",element:n.jsx(_ye,{})}),n.jsx(fe,{path:"community/scans",element:n.jsx(Nye,{})}),n.jsx(fe,{path:"community/creators",element:n.jsx(Eye,{})}),n.jsx(fe,{path:"feedback/form",element:n.jsx(Pye,{})}),n.jsx(fe,{path:"feedback/admin",element:n.jsx(Fye,{})}),n.jsx(fe,{path:"help/tutorials",element:n.jsx(Vye,{})}),n.jsx(fe,{path:"help/wiki",element:n.jsx(Gye,{})}),n.jsx(fe,{path:"legal/tos",element:n.jsx(Zye,{})}),n.jsx(fe,{path:"legal/transparency",element:n.jsx(n0e,{})}),n.jsx(fe,{path:"settings",element:n.jsx(Qye,{})}),n.jsx(fe,{path:"pwa/update",element:n.jsx(o0e,{})}),n.jsx(fe,{path:"pwa/install",element:n.jsx(u0e,{})}),n.jsx(fe,{path:"connect/manual",element:n.jsx(f0e,{})}),n.jsx(fe,{path:"connect/userscript",element:n.jsx(y0e,{})}),n.jsx(fe,{path:"interop/exports",element:n.jsx(j0e,{})}),n.jsx(fe,{path:"interop/deeplinks",element:n.jsx(T0e,{})}),n.jsx(fe,{path:"admin/servers",element:n.jsx(I0e,{})}),n.jsx(fe,{path:"admin/jobs",element:n.jsx(D0e,{})}),n.jsx(fe,{path:"admin/flags",element:n.jsx($0e,{})}),n.jsx(fe,{path:"perf/table-lab",element:n.jsx(z0e,{})}),n.jsx(fe,{path:"mobile/filters",element:n.jsx(q0e,{})}),n.jsx(fe,{path:"qa/a11y",element:n.jsx(X0e,{})})]}),n.jsx(fe,{path:"/latest-scan",element:n.jsx(hl,{to:"/scans/latest",replace:!0})}),n.jsx(fe,{path:"/old-scans",element:n.jsx(hl,{to:"/scans/archive",replace:!0})}),n.jsx(fe,{path:"/favorites",element:Fn()}),n.jsx(fe,{path:"/notifications",element:Fn()}),n.jsx(fe,{path:"/guilds/planner",element:Fn()}),n.jsx(fe,{path:"/guilds/fusion",element:Fn()}),n.jsx(fe,{path:"/guilds/academy",element:Fn()}),n.jsx(fe,{path:"/toplists/players",element:Fn()}),n.jsx(fe,{path:"/toplists/guilds",element:Fn()}),n.jsx(fe,{path:"/toplists/servers",element:Fn()}),n.jsx(fe,{path:"/settings/profile",element:Fn()}),n.jsx(fe,{path:"/settings/appearance",element:Fn()}),n.jsx(fe,{path:"/players/search",element:Fn()}),n.jsx(fe,{path:"/servers/list",element:Fn()}),n.jsx(fe,{path:"/servers/trend",element:Fn()}),n.jsx(fe,{path:"/scans/upload",element:Fn()}),n.jsx(fe,{path:"/scans/history",element:Fn()}),n.jsx(fe,{path:"*",element:n.jsx(hl,{to:"/",replace:!0})})]})})}),n.jsx(U1e,{})]})})})})}));

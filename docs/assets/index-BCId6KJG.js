import Yk from"https://pm-lib.12hp.de/PortraitMaker-core-1.31.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function G0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vy={exports:{}},wu={},by={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function rI(){if(Zw)return Ft;Zw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function C(U,Z,he){this.props=U,this.context=Z,this.refs=S,this.updater=he||b}C.prototype.isReactComponent={},C.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function R(){}R.prototype=C.prototype;function M(U,Z,he){this.props=U,this.context=Z,this.refs=S,this.updater=he||b}var T=M.prototype=new R;T.constructor=M,N(T,C.prototype),T.isPureReactComponent=!0;var y=Array.isArray,w=Object.prototype.hasOwnProperty,D={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(U,Z,he){var ie,fe={},be=null,ye=null;if(Z!=null)for(ie in Z.ref!==void 0&&(ye=Z.ref),Z.key!==void 0&&(be=""+Z.key),Z)w.call(Z,ie)&&!k.hasOwnProperty(ie)&&(fe[ie]=Z[ie]);var _e=arguments.length-2;if(_e===1)fe.children=he;else if(1<_e){for(var we=Array(_e),de=0;de<_e;de++)we[de]=arguments[de+2];fe.children=we}if(U&&U.defaultProps)for(ie in _e=U.defaultProps,_e)fe[ie]===void 0&&(fe[ie]=_e[ie]);return{$$typeof:t,type:U,key:be,ref:ye,props:fe,_owner:D.current}}function A(U,Z){return{$$typeof:t,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function P(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(he){return Z[he]})}var B=/\/+/g;function $(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?P(""+U.key):Z.toString(36)}function W(U,Z,he,ie,fe){var be=typeof U;(be==="undefined"||be==="boolean")&&(U=null);var ye=!1;if(U===null)ye=!0;else switch(be){case"string":case"number":ye=!0;break;case"object":switch(U.$$typeof){case t:case e:ye=!0}}if(ye)return ye=U,fe=fe(ye),U=ie===""?"."+$(ye,0):ie,y(fe)?(he="",U!=null&&(he=U.replace(B,"$&/")+"/"),W(fe,Z,he,"",function(de){return de})):fe!=null&&(F(fe)&&(fe=A(fe,he+(!fe.key||ye&&ye.key===fe.key?"":(""+fe.key).replace(B,"$&/")+"/")+U)),Z.push(fe)),1;if(ye=0,ie=ie===""?".":ie+":",y(U))for(var _e=0;_e<U.length;_e++){be=U[_e];var we=ie+$(be,_e);ye+=W(be,Z,he,we,fe)}else if(we=v(U),typeof we=="function")for(U=we.call(U),_e=0;!(be=U.next()).done;)be=be.value,we=ie+$(be,_e++),ye+=W(be,Z,he,we,fe);else if(be==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ye}function H(U,Z,he){if(U==null)return U;var ie=[],fe=0;return W(U,ie,"","",function(be){return Z.call(he,be,fe++)}),ie}function q(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(he){(U._status===0||U._status===-1)&&(U._status=1,U._result=he)},function(he){(U._status===0||U._status===-1)&&(U._status=2,U._result=he)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var K={current:null},G={transition:null},te={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:G,ReactCurrentOwner:D};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Ft.Children={map:H,forEach:function(U,Z,he){H(U,function(){Z.apply(this,arguments)},he)},count:function(U){var Z=0;return H(U,function(){Z++}),Z},toArray:function(U){return H(U,function(Z){return Z})||[]},only:function(U){if(!F(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ft.Component=C,Ft.Fragment=s,Ft.Profiler=i,Ft.PureComponent=M,Ft.StrictMode=r,Ft.Suspense=u,Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,Ft.act=ne,Ft.cloneElement=function(U,Z,he){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ie=N({},U.props),fe=U.key,be=U.ref,ye=U._owner;if(Z!=null){if(Z.ref!==void 0&&(be=Z.ref,ye=D.current),Z.key!==void 0&&(fe=""+Z.key),U.type&&U.type.defaultProps)var _e=U.type.defaultProps;for(we in Z)w.call(Z,we)&&!k.hasOwnProperty(we)&&(ie[we]=Z[we]===void 0&&_e!==void 0?_e[we]:Z[we])}var we=arguments.length-2;if(we===1)ie.children=he;else if(1<we){_e=Array(we);for(var de=0;de<we;de++)_e[de]=arguments[de+2];ie.children=_e}return{$$typeof:t,type:U.type,key:fe,ref:be,props:ie,_owner:ye}},Ft.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Ft.createElement=_,Ft.createFactory=function(U){var Z=_.bind(null,U);return Z.type=U,Z},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(U){return{$$typeof:d,render:U}},Ft.isValidElement=F,Ft.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:q}},Ft.memo=function(U,Z){return{$$typeof:h,type:U,compare:Z===void 0?null:Z}},Ft.startTransition=function(U){var Z=G.transition;G.transition={};try{U()}finally{G.transition=Z}},Ft.unstable_act=ne,Ft.useCallback=function(U,Z){return K.current.useCallback(U,Z)},Ft.useContext=function(U){return K.current.useContext(U)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(U){return K.current.useDeferredValue(U)},Ft.useEffect=function(U,Z){return K.current.useEffect(U,Z)},Ft.useId=function(){return K.current.useId()},Ft.useImperativeHandle=function(U,Z,he){return K.current.useImperativeHandle(U,Z,he)},Ft.useInsertionEffect=function(U,Z){return K.current.useInsertionEffect(U,Z)},Ft.useLayoutEffect=function(U,Z){return K.current.useLayoutEffect(U,Z)},Ft.useMemo=function(U,Z){return K.current.useMemo(U,Z)},Ft.useReducer=function(U,Z,he){return K.current.useReducer(U,Z,he)},Ft.useRef=function(U){return K.current.useRef(U)},Ft.useState=function(U){return K.current.useState(U)},Ft.useSyncExternalStore=function(U,Z,he){return K.current.useSyncExternalStore(U,Z,he)},Ft.useTransition=function(){return K.current.useTransition()},Ft.version="18.3.1",Ft}var e2;function W0(){return e2||(e2=1,by.exports=rI()),by.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2;function iI(){if(t2)return wu;t2=1;var t=W0(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,h){var m,g={},v=null,b=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(b=u.ref);for(m in u)r.call(u,m)&&!a.hasOwnProperty(m)&&(g[m]=u[m]);if(d&&d.defaultProps)for(m in u=d.defaultProps,u)g[m]===void 0&&(g[m]=u[m]);return{$$typeof:e,type:d,key:v,ref:b,props:g,_owner:i.current}}return wu.Fragment=s,wu.jsx=l,wu.jsxs=l,wu}var s2;function aI(){return s2||(s2=1,vy.exports=iI()),vy.exports}var n=aI(),E=W0();const J=G0(E);var xp={},_y={exports:{}},pr={},wy={exports:{}},jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function oI(){return n2||(n2=1,(function(t){function e(G,te){var ne=G.length;G.push(te);e:for(;0<ne;){var U=ne-1>>>1,Z=G[U];if(0<i(Z,te))G[U]=te,G[ne]=Z,ne=U;else break e}}function s(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],ne=G.pop();if(ne!==te){G[0]=ne;e:for(var U=0,Z=G.length,he=Z>>>1;U<he;){var ie=2*(U+1)-1,fe=G[ie],be=ie+1,ye=G[be];if(0>i(fe,ne))be<Z&&0>i(ye,fe)?(G[U]=ye,G[be]=ne,U=be):(G[U]=fe,G[ie]=ne,U=ie);else if(be<Z&&0>i(ye,ne))G[U]=ye,G[be]=ne,U=be;else break e}}return te}function i(G,te){var ne=G.sortIndex-te.sortIndex;return ne!==0?ne:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],m=1,g=null,v=3,b=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var te=s(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=G)r(h),te.sortIndex=te.expirationTime,e(u,te);else break;te=s(h)}}function y(G){if(S=!1,T(G),!N)if(s(u)!==null)N=!0,q(w);else{var te=s(h);te!==null&&K(y,te.startTime-G)}}function w(G,te){N=!1,S&&(S=!1,R(_),_=-1),b=!0;var ne=v;try{for(T(te),g=s(u);g!==null&&(!(g.expirationTime>te)||G&&!P());){var U=g.callback;if(typeof U=="function"){g.callback=null,v=g.priorityLevel;var Z=U(g.expirationTime<=te);te=t.unstable_now(),typeof Z=="function"?g.callback=Z:g===s(u)&&r(u),T(te)}else r(u);g=s(u)}if(g!==null)var he=!0;else{var ie=s(h);ie!==null&&K(y,ie.startTime-te),he=!1}return he}finally{g=null,v=ne,b=!1}}var D=!1,k=null,_=-1,A=5,F=-1;function P(){return!(t.unstable_now()-F<A)}function B(){if(k!==null){var G=t.unstable_now();F=G;var te=!0;try{te=k(!0,G)}finally{te?$():(D=!1,k=null)}}else D=!1}var $;if(typeof M=="function")$=function(){M(B)};else if(typeof MessageChannel!="undefined"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=B,$=function(){H.postMessage(null)}}else $=function(){C(B,0)};function q(G){k=G,D||(D=!0,$())}function K(G,te){_=C(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){N||b||(N=!0,q(w))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var ne=v;v=te;try{return G()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=v;v=G;try{return te()}finally{v=ne}},t.unstable_scheduleCallback=function(G,te,ne){var U=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?U+ne:U):ne=U,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ne+Z,G={id:m++,callback:te,priorityLevel:G,startTime:ne,expirationTime:Z,sortIndex:-1},ne>U?(G.sortIndex=ne,e(h,G),s(u)===null&&G===s(h)&&(S?(R(_),_=-1):S=!0,K(y,ne-U))):(G.sortIndex=Z,e(u,G),N||b||(N=!0,q(w))),G},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(G){var te=v;return function(){var ne=v;v=te;try{return G.apply(this,arguments)}finally{v=ne}}}})(jy)),jy}var r2;function lI(){return r2||(r2=1,wy.exports=oI()),wy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function cI(){if(i2)return pr;i2=1;var t=W0(),e=lI();function s(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var d=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(o){return u.call(g,o)?!0:u.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function b(o,c,p,x){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function N(o,c,p,x){if(c===null||typeof c=="undefined"||b(o,c,p,x))return!0;if(x)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(o,c,p,x,j,L,V){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=j,this.mustUseProperty=p,this.propertyName=o,this.type=c,this.sanitizeURL=L,this.removeEmptyString=V}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];C[c]=new S(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(R,M);C[c]=new S(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(R,M);C[c]=new S(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(R,M);C[c]=new S(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function T(o,c,p,x){var j=C.hasOwnProperty(c)?C[c]:null;(j!==null?j.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(N(c,p,j,x)&&(p=null),x||j===null?v(c)&&(p===null?o.removeAttribute(c):o.setAttribute(c,""+p)):j.mustUseProperty?o[j.propertyName]=p===null?j.type===3?!1:"":p:(c=j.attributeName,x=j.attributeNamespace,p===null?o.removeAttribute(c):(j=j.type,p=j===3||j===4&&p===!0?"":""+p,x?o.setAttributeNS(x,c,p):o.setAttribute(c,p))))}var y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),P=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),G=Symbol.iterator;function te(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Object.assign,U;function Z(o){if(U===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var he=!1;function ie(o,c){if(!o||he)return"";he=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(me){var x=me}Reflect.construct(o,[],c)}else{try{c.call()}catch(me){x=me}o.call(c.prototype)}else{try{throw Error()}catch(me){x=me}o()}}catch(me){if(me&&x&&typeof me.stack=="string"){for(var j=me.stack.split(`
`),L=x.stack.split(`
`),V=j.length-1,Q=L.length-1;1<=V&&0<=Q&&j[V]!==L[Q];)Q--;for(;1<=V&&0<=Q;V--,Q--)if(j[V]!==L[Q]){if(V!==1||Q!==1)do if(V--,Q--,0>Q||j[V]!==L[Q]){var X=`
`+j[V].replace(" at new "," at ");return o.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",o.displayName)),X}while(1<=V&&0<=Q);break}}}finally{he=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?Z(o):""}function fe(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=ie(o.type,!1),o;case 11:return o=ie(o.type.render,!1),o;case 1:return o=ie(o.type,!0),o;default:return""}}function be(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case D:return"Portal";case A:return"Profiler";case _:return"StrictMode";case $:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case P:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case B:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return c=o.displayName||null,c!==null?c:be(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return be(o(c))}catch(p){}}return null}function ye(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(c);case 8:return c===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function _e(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function we(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function de(o){var c=we(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var j=p.get,L=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(V){x=""+V,L.call(this,V)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return x},setValue:function(V){x=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function pe(o){o._valueTracker||(o._valueTracker=de(o))}function re(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),x="";return o&&(x=we(o)?o.checked?"true":"false":o.value),o=x,o!==p?(c.setValue(o),!0):!1}function $e(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch(c){return o.body}}function He(o,c){var p=c.checked;return ne({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p!=null?p:o._wrapperState.initialChecked})}function pt(o,c){var p=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;p=_e(c.value!=null?c.value:p),o._wrapperState={initialChecked:x,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function It(o,c){c=c.checked,c!=null&&T(o,"checked",c,!1)}function Mt(o,c){It(o,c);var p=_e(c.value),x=c.type;if(p!=null)x==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?ss(o,c.type,p):c.hasOwnProperty("defaultValue")&&ss(o,c.type,_e(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Ht(o,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,p||c===o.value||(o.value=c),o.defaultValue=c}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function ss(o,c,p){(c!=="number"||$e(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Ne=Array.isArray;function Re(o,c,p,x){if(o=o.options,c){c={};for(var j=0;j<p.length;j++)c["$"+p[j]]=!0;for(p=0;p<o.length;p++)j=c.hasOwnProperty("$"+o[p].value),o[p].selected!==j&&(o[p].selected=j),j&&x&&(o[p].defaultSelected=!0)}else{for(p=""+_e(p),c=null,j=0;j<o.length;j++){if(o[j].value===p){o[j].selected=!0,x&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function Ie(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(s(91));return ne({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ze(o,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(s(92));if(Ne(p)){if(1<p.length)throw Error(s(93));p=p[0]}c=p}c==null&&(c=""),p=c}o._wrapperState={initialValue:_e(p)}}function at(o,c){var p=_e(c.value),x=_e(c.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),c.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),x!=null&&(o.defaultValue=""+x)}function ut(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function xt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?xt(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Gt,Pn=(function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(c,p,x,j){MSApp.execUnsafeLocalFunction(function(){return o(c,p,x,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Gt=Gt||document.createElement("div"),Gt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Gt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function en(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gn=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(o){Gn.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ds[c]=Ds[o]})});function Sr(o,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Ds.hasOwnProperty(o)&&Ds[o]?(""+c).trim():c+"px"}function Ur(o,c){o=o.style;for(var p in c)if(c.hasOwnProperty(p)){var x=p.indexOf("--")===0,j=Sr(p,c[p],x);p==="float"&&(p="cssFloat"),x?o.setProperty(p,j):o[p]=j}}var Nr=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(o,c){if(c){if(Nr[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(s(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(s(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(s(61))}if(c.style!=null&&typeof c.style!="object")throw Error(s(62))}}function ls(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ce=null;function qe(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ge=null,ct=null,rt=null;function Et(o){if(o=ou(o)){if(typeof Ge!="function")throw Error(s(280));var c=o.stateNode;c&&(c=Pm(c),Ge(o.stateNode,o.type,c))}}function is(o){ct?rt?rt.push(o):rt=[o]:ct=o}function Rn(){if(ct){var o=ct,c=rt;if(rt=ct=null,Et(o),c)for(o=0;o<c.length;o++)Et(c[o])}}function li(o,c){return o(c)}function Ii(){}var Wn=!1;function Yo(o,c,p){if(Wn)return o(c,p);Wn=!0;try{return li(o,c,p)}finally{Wn=!1,(ct!==null||rt!==null)&&(Ii(),Rn())}}function cs(o,c){var p=o.stateNode;if(p===null)return null;var x=Pm(p);if(x===null)return null;p=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(s(231,c,typeof p));return p}var zr=!1;if(d)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){zr=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch(o){zr=!1}function Pi(o,c,p,x,j,L,V,Q,X){var me=Array.prototype.slice.call(arguments,3);try{c.apply(p,me)}catch(ke){this.onError(ke)}}var Ri=!1,oa=null,ir=!1,ns=null,ws={onError:function(o){Ri=!0,oa=o}};function ar(o,c,p,x,j,L,V,Q,X){Ri=!1,oa=null,Pi.apply(ws,arguments)}function Li(o,c,p,x,j,L,V,Q,X){if(ar.apply(this,arguments),Ri){if(Ri){var me=oa;Ri=!1,oa=null}else throw Error(s(198));ir||(ir=!0,ns=me)}}function Vt(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function Jo(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function ci(o){if(Vt(o)!==o)throw Error(s(188))}function rm(o){var c=o.alternate;if(!c){if(c=Vt(o),c===null)throw Error(s(188));return c!==o?null:o}for(var p=o,x=c;;){var j=p.return;if(j===null)break;var L=j.alternate;if(L===null){if(x=j.return,x!==null){p=x;continue}break}if(j.child===L.child){for(L=j.child;L;){if(L===p)return ci(j),o;if(L===x)return ci(j),c;L=L.sibling}throw Error(s(188))}if(p.return!==x.return)p=j,x=L;else{for(var V=!1,Q=j.child;Q;){if(Q===p){V=!0,p=j,x=L;break}if(Q===x){V=!0,x=j,p=L;break}Q=Q.sibling}if(!V){for(Q=L.child;Q;){if(Q===p){V=!0,p=L,x=j;break}if(Q===x){V=!0,x=L,p=j;break}Q=Q.sibling}if(!V)throw Error(s(189))}}if(p.alternate!==x)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?o:c}function Ud(o){return o=rm(o),o!==null?ic(o):null}function ic(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=ic(o);if(c!==null)return c;o=o.sibling}return null}var ac=e.unstable_scheduleCallback,zd=e.unstable_cancelCallback,im=e.unstable_shouldYield,Kg=e.unstable_requestPaint,ps=e.unstable_now,am=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Ya=e.unstable_UserBlockingPriority,Hr=e.unstable_NormalPriority,Hd=e.unstable_LowPriority,om=e.unstable_IdlePriority,el=null,Cr=null;function lm(o){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(el,o,void 0,(o.current.flags&128)===128)}catch(c){}}var qn=Math.clz32?Math.clz32:dm,Gd=Math.log,cm=Math.LN2;function dm(o){return o>>>=0,o===0?32:31-(Gd(o)/cm|0)|0}var oc=64,lc=4194304;function Ja(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function tl(o,c){var p=o.pendingLanes;if(p===0)return 0;var x=0,j=o.suspendedLanes,L=o.pingedLanes,V=p&268435455;if(V!==0){var Q=V&~j;Q!==0?x=Ja(Q):(L&=V,L!==0&&(x=Ja(L)))}else V=p&~j,V!==0?x=Ja(V):L!==0&&(x=Ja(L));if(x===0)return 0;if(c!==0&&c!==x&&(c&j)===0&&(j=x&-x,L=c&-c,j>=L||j===16&&(L&4194240)!==0))return c;if((x&4)!==0&&(x|=p&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)p=31-qn(c),j=1<<p,x|=o[p],c&=~j;return x}function Qg(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function la(o,c){for(var p=o.suspendedLanes,x=o.pingedLanes,j=o.expirationTimes,L=o.pendingLanes;0<L;){var V=31-qn(L),Q=1<<V,X=j[V];X===-1?((Q&p)===0||(Q&x)!==0)&&(j[V]=Qg(Q,c)):X<=c&&(o.expiredLanes|=Q),L&=~Q}}function Tr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function sl(){var o=oc;return oc<<=1,(oc&4194240)===0&&(oc=64),o}function Za(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function eo(o,c,p){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-qn(c),o[c]=p}function ds(o,c){var p=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<p;){var j=31-qn(p),L=1<<j;c[j]=0,x[j]=-1,o[j]=-1,p&=~L}}function to(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var x=31-qn(p),j=1<<x;j&c|o[x]&c&&(o[x]|=c),p&=~j}}var Wt=0;function so(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var um,cc,hm,mm,pm,Wd=!1,Di=[],fn=null,di=null,ui=null,no=new Map,Gr=new Map,Mi=[],Xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fm(o,c){switch(o){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":no.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(c.pointerId)}}function or(o,c,p,x,j,L){return o===null||o.nativeEvent!==L?(o={blockedOn:c,domEventName:p,eventSystemFlags:x,nativeEvent:L,targetContainers:[j]},c!==null&&(c=ou(c),c!==null&&cc(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function Yg(o,c,p,x,j){switch(c){case"focusin":return fn=or(fn,o,c,p,x,j),!0;case"dragenter":return di=or(di,o,c,p,x,j),!0;case"mouseover":return ui=or(ui,o,c,p,x,j),!0;case"pointerover":var L=j.pointerId;return no.set(L,or(no.get(L)||null,o,c,p,x,j)),!0;case"gotpointercapture":return L=j.pointerId,Gr.set(L,or(Gr.get(L)||null,o,c,p,x,j)),!0}return!1}function gm(o){var c=ol(o.target);if(c!==null){var p=Vt(c);if(p!==null){if(c=p.tag,c===13){if(c=Jo(p),c!==null){o.blockedOn=c,pm(o.priority,function(){hm(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ca(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=dc(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var x=new p.constructor(p.type,p);ce=x,p.target.dispatchEvent(x),ce=null}else return c=ou(p),c!==null&&cc(c),o.blockedOn=p,!1;c.shift()}return!0}function nl(o,c,p){ca(o)&&p.delete(c)}function xm(){Wd=!1,fn!==null&&ca(fn)&&(fn=null),di!==null&&ca(di)&&(di=null),ui!==null&&ca(ui)&&(ui=null),no.forEach(nl),Gr.forEach(nl)}function hi(o,c){o.blockedOn===c&&(o.blockedOn=null,Wd||(Wd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xm)))}function mi(o){function c(j){return hi(j,o)}if(0<Di.length){hi(Di[0],o);for(var p=1;p<Di.length;p++){var x=Di[p];x.blockedOn===o&&(x.blockedOn=null)}}for(fn!==null&&hi(fn,o),di!==null&&hi(di,o),ui!==null&&hi(ui,o),no.forEach(c),Gr.forEach(c),p=0;p<Mi.length;p++)x=Mi[p],x.blockedOn===o&&(x.blockedOn=null);for(;0<Mi.length&&(p=Mi[0],p.blockedOn===null);)gm(p),p.blockedOn===null&&Mi.shift()}var da=y.ReactCurrentBatchConfig,ro=!0;function js(o,c,p,x){var j=Wt,L=da.transition;da.transition=null;try{Wt=1,qd(o,c,p,x)}finally{Wt=j,da.transition=L}}function Jg(o,c,p,x){var j=Wt,L=da.transition;da.transition=null;try{Wt=4,qd(o,c,p,x)}finally{Wt=j,da.transition=L}}function qd(o,c,p,x){if(ro){var j=dc(o,c,p,x);if(j===null)cx(o,c,x,rl,p),fm(o,x);else if(Yg(j,o,c,p,x))x.stopPropagation();else if(fm(o,x),c&4&&-1<Xg.indexOf(o)){for(;j!==null;){var L=ou(j);if(L!==null&&um(L),L=dc(o,c,p,x),L===null&&cx(o,c,x,rl,p),L===j)break;j=L}j!==null&&x.stopPropagation()}else cx(o,c,x,null,p)}}var rl=null;function dc(o,c,p,x){if(rl=null,o=qe(x),o=ol(o),o!==null)if(c=Vt(o),c===null)o=null;else if(p=c.tag,p===13){if(o=Jo(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return rl=o,null}function Kd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(am()){case Zo:return 1;case Ya:return 4;case Hr:case Hd:return 16;case om:return 536870912;default:return 16}default:return 16}}var Er=null,uc=null,lr=null;function Qd(){if(lr)return lr;var o,c=uc,p=c.length,x,j="value"in Er?Er.value:Er.textContent,L=j.length;for(o=0;o<p&&c[o]===j[o];o++);var V=p-o;for(x=1;x<=V&&c[p-x]===j[L-x];x++);return lr=j.slice(o,1<x?1-x:void 0)}function hc(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Fi(){return!0}function Xd(){return!1}function gn(o){function c(p,x,j,L,V){this._reactName=p,this._targetInst=j,this.type=x,this.nativeEvent=L,this.target=V,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(p=o[Q],this[Q]=p?p(L):L[Q]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Fi:Xd,this.isPropagationStopped=Xd,this}return ne(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),c}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=gn(pi),Bi=ne({},pi,{view:0,detail:0}),Zg=gn(Bi),pc,ua,io,il=ne({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$i,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==io&&(io&&o.type==="mousemove"?(pc=o.screenX-io.screenX,ua=o.screenY-io.screenY):ua=pc=0,io=o),pc)},movementY:function(o){return"movementY"in o?o.movementY:ua}}),fc=gn(il),Yd=ne({},il,{dataTransfer:0}),ym=gn(Yd),gc=ne({},Bi,{relatedTarget:0}),xc=gn(gc),vm=ne({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),ha=gn(vm),bm=ne({},pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_m=gn(bm),wm=ne({},pi,{data:0}),Jd=gn(wm),yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sm(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=jm[o])?!!c[o]:!1}function $i(){return Sm}var f=ne({},Bi,{key:function(o){if(o.key){var c=yc[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=hc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Kn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$i,charCode:function(o){return o.type==="keypress"?hc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?hc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),I=gn(f),O=ne({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z=gn(O),oe=ne({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$i}),ge=gn(oe),Be=ne({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),as=gn(Be),tn=ne({},il,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Xt=gn(tn),ln=[9,13,27,32],Gs=d&&"CompositionEvent"in window,Wr=null;d&&"documentMode"in document&&(Wr=document.documentMode);var Ar=d&&"TextEvent"in window&&!Wr,al=d&&(!Gs||Wr&&8<Wr&&11>=Wr),vc=" ",qb=!1;function Kb(o,c){switch(o){case"keyup":return ln.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var bc=!1;function t4(o,c){switch(o){case"compositionend":return Qb(c);case"keypress":return c.which!==32?null:(qb=!0,vc);case"textInput":return o=c.data,o===vc&&qb?null:o;default:return null}}function s4(o,c){if(bc)return o==="compositionend"||!Gs&&Kb(o,c)?(o=Qd(),lr=uc=Er=null,bc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return al&&c.locale!=="ko"?null:c.data;default:return null}}var n4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!n4[o.type]:c==="textarea"}function Yb(o,c,p,x){is(x),c=Em(c,"onChange"),0<c.length&&(p=new mc("onChange","change",null,p,x),o.push({event:p,listeners:c}))}var Zd=null,eu=null;function r4(o){f_(o,0)}function Nm(o){var c=Nc(o);if(re(c))return o}function i4(o,c){if(o==="change")return c}var Jb=!1;if(d){var ex;if(d){var tx="oninput"in document;if(!tx){var Zb=document.createElement("div");Zb.setAttribute("oninput","return;"),tx=typeof Zb.oninput=="function"}ex=tx}else ex=!1;Jb=ex&&(!document.documentMode||9<document.documentMode)}function e_(){Zd&&(Zd.detachEvent("onpropertychange",t_),eu=Zd=null)}function t_(o){if(o.propertyName==="value"&&Nm(eu)){var c=[];Yb(c,eu,o,qe(o)),Yo(r4,c)}}function a4(o,c,p){o==="focusin"?(e_(),Zd=c,eu=p,Zd.attachEvent("onpropertychange",t_)):o==="focusout"&&e_()}function o4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Nm(eu)}function l4(o,c){if(o==="click")return Nm(c)}function c4(o,c){if(o==="input"||o==="change")return Nm(c)}function d4(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var fi=typeof Object.is=="function"?Object.is:d4;function tu(o,c){if(fi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),x=Object.keys(c);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var j=p[x];if(!u.call(c,j)||!fi(o[j],c[j]))return!1}return!0}function s_(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function n_(o,c){var p=s_(o);o=0;for(var x;p;){if(p.nodeType===3){if(x=o+p.textContent.length,o<=c&&x>=c)return{node:p,offset:c-o};o=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=s_(p)}}function r_(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?r_(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function i_(){for(var o=window,c=$e();c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch(x){p=!1}if(p)o=c.contentWindow;else break;c=$e(o.document)}return c}function sx(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function u4(o){var c=i_(),p=o.focusedElem,x=o.selectionRange;if(c!==p&&p&&p.ownerDocument&&r_(p.ownerDocument.documentElement,p)){if(x!==null&&sx(p)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(o,p.value.length);else if(o=(c=p.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=p.textContent.length,L=Math.min(x.start,j);x=x.end===void 0?L:Math.min(x.end,j),!o.extend&&L>x&&(j=x,x=L,L=j),j=n_(p,L);var V=n_(p,x);j&&V&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==V.node||o.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),L>x?(o.addRange(c),o.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),o.addRange(c)))}}for(c=[],o=p;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)o=c[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var h4=d&&"documentMode"in document&&11>=document.documentMode,_c=null,nx=null,su=null,rx=!1;function a_(o,c,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;rx||_c==null||_c!==$e(x)||(x=_c,"selectionStart"in x&&sx(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),su&&tu(su,x)||(su=x,x=Em(nx,"onSelect"),0<x.length&&(c=new mc("onSelect","select",null,c,p),o.push({event:c,listeners:x}),c.target=_c)))}function km(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var wc={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},ix={},o_={};d&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete wc.animationend.animation,delete wc.animationiteration.animation,delete wc.animationstart.animation),"TransitionEvent"in window||delete wc.transitionend.transition);function Cm(o){if(ix[o])return ix[o];if(!wc[o])return o;var c=wc[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in o_)return ix[o]=c[p];return o}var l_=Cm("animationend"),c_=Cm("animationiteration"),d_=Cm("animationstart"),u_=Cm("transitionend"),h_=new Map,m_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ao(o,c){h_.set(o,c),a(c,[o])}for(var ax=0;ax<m_.length;ax++){var ox=m_[ax],m4=ox.toLowerCase(),p4=ox[0].toUpperCase()+ox.slice(1);ao(m4,"on"+p4)}ao(l_,"onAnimationEnd"),ao(c_,"onAnimationIteration"),ao(d_,"onAnimationStart"),ao("dblclick","onDoubleClick"),ao("focusin","onFocus"),ao("focusout","onBlur"),ao(u_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f4=new Set("cancel close invalid load scroll toggle".split(" ").concat(nu));function p_(o,c,p){var x=o.type||"unknown-event";o.currentTarget=p,Li(x,c,void 0,o),o.currentTarget=null}function f_(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var x=o[p],j=x.event;x=x.listeners;e:{var L=void 0;if(c)for(var V=x.length-1;0<=V;V--){var Q=x[V],X=Q.instance,me=Q.currentTarget;if(Q=Q.listener,X!==L&&j.isPropagationStopped())break e;p_(j,Q,me),L=X}else for(V=0;V<x.length;V++){if(Q=x[V],X=Q.instance,me=Q.currentTarget,Q=Q.listener,X!==L&&j.isPropagationStopped())break e;p_(j,Q,me),L=X}}}if(ir)throw o=ns,ir=!1,ns=null,o}function vs(o,c){var p=c[fx];p===void 0&&(p=c[fx]=new Set);var x=o+"__bubble";p.has(x)||(g_(c,o,2,!1),p.add(x))}function lx(o,c,p){var x=0;c&&(x|=4),g_(p,o,x,c)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function ru(o){if(!o[Tm]){o[Tm]=!0,r.forEach(function(p){p!=="selectionchange"&&(f4.has(p)||lx(p,!1,o),lx(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Tm]||(c[Tm]=!0,lx("selectionchange",!1,c))}}function g_(o,c,p,x){switch(Kd(c)){case 1:var j=js;break;case 4:j=Jg;break;default:j=qd}p=j.bind(null,c,p,o),j=void 0,!zr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),x?j!==void 0?o.addEventListener(c,p,{capture:!0,passive:j}):o.addEventListener(c,p,!0):j!==void 0?o.addEventListener(c,p,{passive:j}):o.addEventListener(c,p,!1)}function cx(o,c,p,x,j){var L=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var V=x.tag;if(V===3||V===4){var Q=x.stateNode.containerInfo;if(Q===j||Q.nodeType===8&&Q.parentNode===j)break;if(V===4)for(V=x.return;V!==null;){var X=V.tag;if((X===3||X===4)&&(X=V.stateNode.containerInfo,X===j||X.nodeType===8&&X.parentNode===j))return;V=V.return}for(;Q!==null;){if(V=ol(Q),V===null)return;if(X=V.tag,X===5||X===6){x=L=V;continue e}Q=Q.parentNode}}x=x.return}Yo(function(){var me=L,ke=qe(p),Ae=[];e:{var Se=h_.get(o);if(Se!==void 0){var We=mc,Xe=o;switch(o){case"keypress":if(hc(p)===0)break e;case"keydown":case"keyup":We=I;break;case"focusin":Xe="focus",We=xc;break;case"focusout":Xe="blur",We=xc;break;case"beforeblur":case"afterblur":We=xc;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=ge;break;case l_:case c_:case d_:We=ha;break;case u_:We=as;break;case"scroll":We=Zg;break;case"wheel":We=Xt;break;case"copy":case"cut":case"paste":We=_m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=z}var Ye=(c&4)!==0,Vs=!Ye&&o==="scroll",le=Ye?Se!==null?Se+"Capture":null:Se;Ye=[];for(var ee=me,ue;ee!==null;){ue=ee;var Le=ue.stateNode;if(ue.tag===5&&Le!==null&&(ue=Le,le!==null&&(Le=cs(ee,le),Le!=null&&Ye.push(iu(ee,Le,ue)))),Vs)break;ee=ee.return}0<Ye.length&&(Se=new We(Se,Xe,null,p,ke),Ae.push({event:Se,listeners:Ye}))}}if((c&7)===0){e:{if(Se=o==="mouseover"||o==="pointerover",We=o==="mouseout"||o==="pointerout",Se&&p!==ce&&(Xe=p.relatedTarget||p.fromElement)&&(ol(Xe)||Xe[ma]))break e;if((We||Se)&&(Se=ke.window===ke?ke:(Se=ke.ownerDocument)?Se.defaultView||Se.parentWindow:window,We?(Xe=p.relatedTarget||p.toElement,We=me,Xe=Xe?ol(Xe):null,Xe!==null&&(Vs=Vt(Xe),Xe!==Vs||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(We=null,Xe=me),We!==Xe)){if(Ye=fc,Le="onMouseLeave",le="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(Ye=z,Le="onPointerLeave",le="onPointerEnter",ee="pointer"),Vs=We==null?Se:Nc(We),ue=Xe==null?Se:Nc(Xe),Se=new Ye(Le,ee+"leave",We,p,ke),Se.target=Vs,Se.relatedTarget=ue,Le=null,ol(ke)===me&&(Ye=new Ye(le,ee+"enter",Xe,p,ke),Ye.target=ue,Ye.relatedTarget=Vs,Le=Ye),Vs=Le,We&&Xe)t:{for(Ye=We,le=Xe,ee=0,ue=Ye;ue;ue=jc(ue))ee++;for(ue=0,Le=le;Le;Le=jc(Le))ue++;for(;0<ee-ue;)Ye=jc(Ye),ee--;for(;0<ue-ee;)le=jc(le),ue--;for(;ee--;){if(Ye===le||le!==null&&Ye===le.alternate)break t;Ye=jc(Ye),le=jc(le)}Ye=null}else Ye=null;We!==null&&x_(Ae,Se,We,Ye,!1),Xe!==null&&Vs!==null&&x_(Ae,Vs,Xe,Ye,!0)}}e:{if(Se=me?Nc(me):window,We=Se.nodeName&&Se.nodeName.toLowerCase(),We==="select"||We==="input"&&Se.type==="file")var et=i4;else if(Xb(Se))if(Jb)et=c4;else{et=o4;var ot=a4}else(We=Se.nodeName)&&We.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(et=l4);if(et&&(et=et(o,me))){Yb(Ae,et,p,ke);break e}ot&&ot(o,Se,me),o==="focusout"&&(ot=Se._wrapperState)&&ot.controlled&&Se.type==="number"&&ss(Se,"number",Se.value)}switch(ot=me?Nc(me):window,o){case"focusin":(Xb(ot)||ot.contentEditable==="true")&&(_c=ot,nx=me,su=null);break;case"focusout":su=nx=_c=null;break;case"mousedown":rx=!0;break;case"contextmenu":case"mouseup":case"dragend":rx=!1,a_(Ae,p,ke);break;case"selectionchange":if(h4)break;case"keydown":case"keyup":a_(Ae,p,ke)}var lt;if(Gs)e:{switch(o){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else bc?Kb(o,p)&&(ft="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(ft="onCompositionStart");ft&&(al&&p.locale!=="ko"&&(bc||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&bc&&(lt=Qd()):(Er=ke,uc="value"in Er?Er.value:Er.textContent,bc=!0)),ot=Em(me,ft),0<ot.length&&(ft=new Jd(ft,o,null,p,ke),Ae.push({event:ft,listeners:ot}),lt?ft.data=lt:(lt=Qb(p),lt!==null&&(ft.data=lt)))),(lt=Ar?t4(o,p):s4(o,p))&&(me=Em(me,"onBeforeInput"),0<me.length&&(ke=new Jd("onBeforeInput","beforeinput",null,p,ke),Ae.push({event:ke,listeners:me}),ke.data=lt))}f_(Ae,c)})}function iu(o,c,p){return{instance:o,listener:c,currentTarget:p}}function Em(o,c){for(var p=c+"Capture",x=[];o!==null;){var j=o,L=j.stateNode;j.tag===5&&L!==null&&(j=L,L=cs(o,p),L!=null&&x.unshift(iu(o,L,j)),L=cs(o,c),L!=null&&x.push(iu(o,L,j))),o=o.return}return x}function jc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function x_(o,c,p,x,j){for(var L=c._reactName,V=[];p!==null&&p!==x;){var Q=p,X=Q.alternate,me=Q.stateNode;if(X!==null&&X===x)break;Q.tag===5&&me!==null&&(Q=me,j?(X=cs(p,L),X!=null&&V.unshift(iu(p,X,Q))):j||(X=cs(p,L),X!=null&&V.push(iu(p,X,Q)))),p=p.return}V.length!==0&&o.push({event:c,listeners:V})}var g4=/\r\n?/g,x4=/\u0000|\uFFFD/g;function y_(o){return(typeof o=="string"?o:""+o).replace(g4,`
`).replace(x4,"")}function Am(o,c,p){if(c=y_(c),y_(o)!==c&&p)throw Error(s(425))}function Im(){}var dx=null,ux=null;function hx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var mx=typeof setTimeout=="function"?setTimeout:void 0,y4=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,v4=typeof queueMicrotask=="function"?queueMicrotask:typeof v_!="undefined"?function(o){return v_.resolve(null).then(o).catch(b4)}:mx;function b4(o){setTimeout(function(){throw o})}function px(o,c){var p=c,x=0;do{var j=p.nextSibling;if(o.removeChild(p),j&&j.nodeType===8)if(p=j.data,p==="/$"){if(x===0){o.removeChild(j),mi(c);return}x--}else p!=="$"&&p!=="$?"&&p!=="$!"||x++;p=j}while(p);mi(c)}function oo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function b_(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Sc,au="__reactProps$"+Sc,ma="__reactContainer$"+Sc,fx="__reactEvents$"+Sc,_4="__reactListeners$"+Sc,w4="__reactHandles$"+Sc;function ol(o){var c=o[Oi];if(c)return c;for(var p=o.parentNode;p;){if(c=p[ma]||p[Oi]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=b_(o);o!==null;){if(p=o[Oi])return p;o=b_(o)}return c}o=p,p=o.parentNode}return null}function ou(o){return o=o[Oi]||o[ma],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Nc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(s(33))}function Pm(o){return o[au]||null}var gx=[],kc=-1;function lo(o){return{current:o}}function bs(o){0>kc||(o.current=gx[kc],gx[kc]=null,kc--)}function fs(o,c){kc++,gx[kc]=o.current,o.current=c}var co={},Ln=lo(co),cr=lo(!1),ll=co;function Cc(o,c){var p=o.type.contextTypes;if(!p)return co;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var j={},L;for(L in p)j[L]=c[L];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function dr(o){return o=o.childContextTypes,o!=null}function Rm(){bs(cr),bs(Ln)}function __(o,c,p){if(Ln.current!==co)throw Error(s(168));fs(Ln,c),fs(cr,p)}function w_(o,c,p){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return p;x=x.getChildContext();for(var j in x)if(!(j in c))throw Error(s(108,ye(o)||"Unknown",j));return ne({},p,x)}function Lm(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||co,ll=Ln.current,fs(Ln,o),fs(cr,cr.current),!0}function j_(o,c,p){var x=o.stateNode;if(!x)throw Error(s(169));p?(o=w_(o,c,ll),x.__reactInternalMemoizedMergedChildContext=o,bs(cr),bs(Ln),fs(Ln,o)):bs(cr),fs(cr,p)}var pa=null,Dm=!1,xx=!1;function S_(o){pa===null?pa=[o]:pa.push(o)}function j4(o){Dm=!0,S_(o)}function uo(){if(!xx&&pa!==null){xx=!0;var o=0,c=Wt;try{var p=pa;for(Wt=1;o<p.length;o++){var x=p[o];do x=x(!0);while(x!==null)}pa=null,Dm=!1}catch(j){throw pa!==null&&(pa=pa.slice(o+1)),ac(Zo,uo),j}finally{Wt=c,xx=!1}}return null}var Tc=[],Ec=0,Mm=null,Fm=0,qr=[],Kr=0,cl=null,fa=1,ga="";function dl(o,c){Tc[Ec++]=Fm,Tc[Ec++]=Mm,Mm=o,Fm=c}function N_(o,c,p){qr[Kr++]=fa,qr[Kr++]=ga,qr[Kr++]=cl,cl=o;var x=fa;o=ga;var j=32-qn(x)-1;x&=~(1<<j),p+=1;var L=32-qn(c)+j;if(30<L){var V=j-j%5;L=(x&(1<<V)-1).toString(32),x>>=V,j-=V,fa=1<<32-qn(c)+j|p<<j|x,ga=L+o}else fa=1<<L|p<<j|x,ga=o}function yx(o){o.return!==null&&(dl(o,1),N_(o,1,0))}function vx(o){for(;o===Mm;)Mm=Tc[--Ec],Tc[Ec]=null,Fm=Tc[--Ec],Tc[Ec]=null;for(;o===cl;)cl=qr[--Kr],qr[Kr]=null,ga=qr[--Kr],qr[Kr]=null,fa=qr[--Kr],qr[Kr]=null}var Ir=null,Pr=null,Ss=!1,gi=null;function k_(o,c){var p=Jr(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=o,c=o.deletions,c===null?(o.deletions=[p],o.flags|=16):c.push(p)}function C_(o,c){switch(o.tag){case 5:var p=o.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Ir=o,Pr=oo(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Ir=o,Pr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=cl!==null?{id:fa,overflow:ga}:null,o.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Jr(18,null,null,0),p.stateNode=c,p.return=o,o.child=p,Ir=o,Pr=null,!0):!1;default:return!1}}function bx(o){return(o.mode&1)!==0&&(o.flags&128)===0}function _x(o){if(Ss){var c=Pr;if(c){var p=c;if(!C_(o,c)){if(bx(o))throw Error(s(418));c=oo(p.nextSibling);var x=Ir;c&&C_(o,c)?k_(x,p):(o.flags=o.flags&-4097|2,Ss=!1,Ir=o)}}else{if(bx(o))throw Error(s(418));o.flags=o.flags&-4097|2,Ss=!1,Ir=o}}}function T_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Ir=o}function Bm(o){if(o!==Ir)return!1;if(!Ss)return T_(o),Ss=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!hx(o.type,o.memoizedProps)),c&&(c=Pr)){if(bx(o))throw E_(),Error(s(418));for(;c;)k_(o,c),c=oo(c.nextSibling)}if(T_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(c===0){Pr=oo(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}o=o.nextSibling}Pr=null}}else Pr=Ir?oo(o.stateNode.nextSibling):null;return!0}function E_(){for(var o=Pr;o;)o=oo(o.nextSibling)}function Ac(){Pr=Ir=null,Ss=!1}function wx(o){gi===null?gi=[o]:gi.push(o)}var S4=y.ReactCurrentBatchConfig;function lu(o,c,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(s(309));var x=p.stateNode}if(!x)throw Error(s(147,o));var j=x,L=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(V){var Q=j.refs;V===null?delete Q[L]:Q[L]=V},c._stringRef=L,c)}if(typeof o!="string")throw Error(s(284));if(!p._owner)throw Error(s(290,o))}return o}function $m(o,c){throw o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function A_(o){var c=o._init;return c(o._payload)}function I_(o){function c(le,ee){if(o){var ue=le.deletions;ue===null?(le.deletions=[ee],le.flags|=16):ue.push(ee)}}function p(le,ee){if(!o)return null;for(;ee!==null;)c(le,ee),ee=ee.sibling;return null}function x(le,ee){for(le=new Map;ee!==null;)ee.key!==null?le.set(ee.key,ee):le.set(ee.index,ee),ee=ee.sibling;return le}function j(le,ee){return le=vo(le,ee),le.index=0,le.sibling=null,le}function L(le,ee,ue){return le.index=ue,o?(ue=le.alternate,ue!==null?(ue=ue.index,ue<ee?(le.flags|=2,ee):ue):(le.flags|=2,ee)):(le.flags|=1048576,ee)}function V(le){return o&&le.alternate===null&&(le.flags|=2),le}function Q(le,ee,ue,Le){return ee===null||ee.tag!==6?(ee=my(ue,le.mode,Le),ee.return=le,ee):(ee=j(ee,ue),ee.return=le,ee)}function X(le,ee,ue,Le){var et=ue.type;return et===k?ke(le,ee,ue.props.children,Le,ue.key):ee!==null&&(ee.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===q&&A_(et)===ee.type)?(Le=j(ee,ue.props),Le.ref=lu(le,ee,ue),Le.return=le,Le):(Le=cp(ue.type,ue.key,ue.props,null,le.mode,Le),Le.ref=lu(le,ee,ue),Le.return=le,Le)}function me(le,ee,ue,Le){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ue.containerInfo||ee.stateNode.implementation!==ue.implementation?(ee=py(ue,le.mode,Le),ee.return=le,ee):(ee=j(ee,ue.children||[]),ee.return=le,ee)}function ke(le,ee,ue,Le,et){return ee===null||ee.tag!==7?(ee=yl(ue,le.mode,Le,et),ee.return=le,ee):(ee=j(ee,ue),ee.return=le,ee)}function Ae(le,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=my(""+ee,le.mode,ue),ee.return=le,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return ue=cp(ee.type,ee.key,ee.props,null,le.mode,ue),ue.ref=lu(le,null,ee),ue.return=le,ue;case D:return ee=py(ee,le.mode,ue),ee.return=le,ee;case q:var Le=ee._init;return Ae(le,Le(ee._payload),ue)}if(Ne(ee)||te(ee))return ee=yl(ee,le.mode,ue,null),ee.return=le,ee;$m(le,ee)}return null}function Se(le,ee,ue,Le){var et=ee!==null?ee.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return et!==null?null:Q(le,ee,""+ue,Le);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case w:return ue.key===et?X(le,ee,ue,Le):null;case D:return ue.key===et?me(le,ee,ue,Le):null;case q:return et=ue._init,Se(le,ee,et(ue._payload),Le)}if(Ne(ue)||te(ue))return et!==null?null:ke(le,ee,ue,Le,null);$m(le,ue)}return null}function We(le,ee,ue,Le,et){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return le=le.get(ue)||null,Q(ee,le,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case w:return le=le.get(Le.key===null?ue:Le.key)||null,X(ee,le,Le,et);case D:return le=le.get(Le.key===null?ue:Le.key)||null,me(ee,le,Le,et);case q:var ot=Le._init;return We(le,ee,ue,ot(Le._payload),et)}if(Ne(Le)||te(Le))return le=le.get(ue)||null,ke(ee,le,Le,et,null);$m(ee,Le)}return null}function Xe(le,ee,ue,Le){for(var et=null,ot=null,lt=ee,ft=ee=0,un=null;lt!==null&&ft<ue.length;ft++){lt.index>ft?(un=lt,lt=null):un=lt.sibling;var es=Se(le,lt,ue[ft],Le);if(es===null){lt===null&&(lt=un);break}o&&lt&&es.alternate===null&&c(le,lt),ee=L(es,ee,ft),ot===null?et=es:ot.sibling=es,ot=es,lt=un}if(ft===ue.length)return p(le,lt),Ss&&dl(le,ft),et;if(lt===null){for(;ft<ue.length;ft++)lt=Ae(le,ue[ft],Le),lt!==null&&(ee=L(lt,ee,ft),ot===null?et=lt:ot.sibling=lt,ot=lt);return Ss&&dl(le,ft),et}for(lt=x(le,lt);ft<ue.length;ft++)un=We(lt,le,ft,ue[ft],Le),un!==null&&(o&&un.alternate!==null&&lt.delete(un.key===null?ft:un.key),ee=L(un,ee,ft),ot===null?et=un:ot.sibling=un,ot=un);return o&&lt.forEach(function(bo){return c(le,bo)}),Ss&&dl(le,ft),et}function Ye(le,ee,ue,Le){var et=te(ue);if(typeof et!="function")throw Error(s(150));if(ue=et.call(ue),ue==null)throw Error(s(151));for(var ot=et=null,lt=ee,ft=ee=0,un=null,es=ue.next();lt!==null&&!es.done;ft++,es=ue.next()){lt.index>ft?(un=lt,lt=null):un=lt.sibling;var bo=Se(le,lt,es.value,Le);if(bo===null){lt===null&&(lt=un);break}o&&lt&&bo.alternate===null&&c(le,lt),ee=L(bo,ee,ft),ot===null?et=bo:ot.sibling=bo,ot=bo,lt=un}if(es.done)return p(le,lt),Ss&&dl(le,ft),et;if(lt===null){for(;!es.done;ft++,es=ue.next())es=Ae(le,es.value,Le),es!==null&&(ee=L(es,ee,ft),ot===null?et=es:ot.sibling=es,ot=es);return Ss&&dl(le,ft),et}for(lt=x(le,lt);!es.done;ft++,es=ue.next())es=We(lt,le,ft,es.value,Le),es!==null&&(o&&es.alternate!==null&&lt.delete(es.key===null?ft:es.key),ee=L(es,ee,ft),ot===null?et=es:ot.sibling=es,ot=es);return o&&lt.forEach(function(nI){return c(le,nI)}),Ss&&dl(le,ft),et}function Vs(le,ee,ue,Le){if(typeof ue=="object"&&ue!==null&&ue.type===k&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case w:e:{for(var et=ue.key,ot=ee;ot!==null;){if(ot.key===et){if(et=ue.type,et===k){if(ot.tag===7){p(le,ot.sibling),ee=j(ot,ue.props.children),ee.return=le,le=ee;break e}}else if(ot.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===q&&A_(et)===ot.type){p(le,ot.sibling),ee=j(ot,ue.props),ee.ref=lu(le,ot,ue),ee.return=le,le=ee;break e}p(le,ot);break}else c(le,ot);ot=ot.sibling}ue.type===k?(ee=yl(ue.props.children,le.mode,Le,ue.key),ee.return=le,le=ee):(Le=cp(ue.type,ue.key,ue.props,null,le.mode,Le),Le.ref=lu(le,ee,ue),Le.return=le,le=Le)}return V(le);case D:e:{for(ot=ue.key;ee!==null;){if(ee.key===ot)if(ee.tag===4&&ee.stateNode.containerInfo===ue.containerInfo&&ee.stateNode.implementation===ue.implementation){p(le,ee.sibling),ee=j(ee,ue.children||[]),ee.return=le,le=ee;break e}else{p(le,ee);break}else c(le,ee);ee=ee.sibling}ee=py(ue,le.mode,Le),ee.return=le,le=ee}return V(le);case q:return ot=ue._init,Vs(le,ee,ot(ue._payload),Le)}if(Ne(ue))return Xe(le,ee,ue,Le);if(te(ue))return Ye(le,ee,ue,Le);$m(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ee!==null&&ee.tag===6?(p(le,ee.sibling),ee=j(ee,ue),ee.return=le,le=ee):(p(le,ee),ee=my(ue,le.mode,Le),ee.return=le,le=ee),V(le)):p(le,ee)}return Vs}var Ic=I_(!0),P_=I_(!1),Om=lo(null),Vm=null,Pc=null,jx=null;function Sx(){jx=Pc=Vm=null}function Nx(o){var c=Om.current;bs(Om),o._currentValue=c}function kx(o,c,p){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===p)break;o=o.return}}function Rc(o,c){Vm=o,jx=Pc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(ur=!0),o.firstContext=null)}function Qr(o){var c=o._currentValue;if(jx!==o)if(o={context:o,memoizedValue:c,next:null},Pc===null){if(Vm===null)throw Error(s(308));Pc=o,Vm.dependencies={lanes:0,firstContext:o}}else Pc=Pc.next=o;return c}var ul=null;function Cx(o){ul===null?ul=[o]:ul.push(o)}function R_(o,c,p,x){var j=c.interleaved;return j===null?(p.next=p,Cx(c)):(p.next=j.next,j.next=p),c.interleaved=p,xa(o,x)}function xa(o,c){o.lanes|=c;var p=o.alternate;for(p!==null&&(p.lanes|=c),p=o,o=o.return;o!==null;)o.childLanes|=c,p=o.alternate,p!==null&&(p.childLanes|=c),p=o,o=o.return;return p.tag===3?p.stateNode:null}var ho=!1;function Tx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L_(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ya(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function mo(o,c,p){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Jt&2)!==0){var j=x.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),x.pending=c,xa(o,p)}return j=x.interleaved,j===null?(c.next=c,Cx(x)):(c.next=j.next,j.next=c),x.interleaved=c,xa(o,p)}function Um(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,p|=x,c.lanes=p,to(o,p)}}function D_(o,c){var p=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var j=null,L=null;if(p=p.firstBaseUpdate,p!==null){do{var V={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};L===null?j=L=V:L=L.next=V,p=p.next}while(p!==null);L===null?j=L=c:L=L.next=c}else j=L=c;p={baseState:x.baseState,firstBaseUpdate:j,lastBaseUpdate:L,shared:x.shared,effects:x.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}function zm(o,c,p,x){var j=o.updateQueue;ho=!1;var L=j.firstBaseUpdate,V=j.lastBaseUpdate,Q=j.shared.pending;if(Q!==null){j.shared.pending=null;var X=Q,me=X.next;X.next=null,V===null?L=me:V.next=me,V=X;var ke=o.alternate;ke!==null&&(ke=ke.updateQueue,Q=ke.lastBaseUpdate,Q!==V&&(Q===null?ke.firstBaseUpdate=me:Q.next=me,ke.lastBaseUpdate=X))}if(L!==null){var Ae=j.baseState;V=0,ke=me=X=null,Q=L;do{var Se=Q.lane,We=Q.eventTime;if((x&Se)===Se){ke!==null&&(ke=ke.next={eventTime:We,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Xe=o,Ye=Q;switch(Se=c,We=p,Ye.tag){case 1:if(Xe=Ye.payload,typeof Xe=="function"){Ae=Xe.call(We,Ae,Se);break e}Ae=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Ye.payload,Se=typeof Xe=="function"?Xe.call(We,Ae,Se):Xe,Se==null)break e;Ae=ne({},Ae,Se);break e;case 2:ho=!0}}Q.callback!==null&&Q.lane!==0&&(o.flags|=64,Se=j.effects,Se===null?j.effects=[Q]:Se.push(Q))}else We={eventTime:We,lane:Se,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ke===null?(me=ke=We,X=Ae):ke=ke.next=We,V|=Se;if(Q=Q.next,Q===null){if(Q=j.shared.pending,Q===null)break;Se=Q,Q=Se.next,Se.next=null,j.lastBaseUpdate=Se,j.shared.pending=null}}while(!0);if(ke===null&&(X=Ae),j.baseState=X,j.firstBaseUpdate=me,j.lastBaseUpdate=ke,c=j.shared.interleaved,c!==null){j=c;do V|=j.lane,j=j.next;while(j!==c)}else L===null&&(j.shared.lanes=0);pl|=V,o.lanes=V,o.memoizedState=Ae}}function M_(o,c,p){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],j=x.callback;if(j!==null){if(x.callback=null,x=p,typeof j!="function")throw Error(s(191,j));j.call(x)}}}var cu={},Vi=lo(cu),du=lo(cu),uu=lo(cu);function hl(o){if(o===cu)throw Error(s(174));return o}function Ex(o,c){switch(fs(uu,c),fs(du,o),fs(Vi,cu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Qt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Qt(c,o)}bs(Vi),fs(Vi,c)}function Lc(){bs(Vi),bs(du),bs(uu)}function F_(o){hl(uu.current);var c=hl(Vi.current),p=Qt(c,o.type);c!==p&&(fs(du,o),fs(Vi,p))}function Ax(o){du.current===o&&(bs(Vi),bs(du))}var Es=lo(0);function Hm(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ix=[];function Px(){for(var o=0;o<Ix.length;o++)Ix[o]._workInProgressVersionPrimary=null;Ix.length=0}var Gm=y.ReactCurrentDispatcher,Rx=y.ReactCurrentBatchConfig,ml=0,As=null,sn=null,cn=null,Wm=!1,hu=!1,mu=0,N4=0;function Dn(){throw Error(s(321))}function Lx(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!fi(o[p],c[p]))return!1;return!0}function Dx(o,c,p,x,j,L){if(ml=L,As=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Gm.current=o===null||o.memoizedState===null?E4:A4,o=p(x,j),hu){L=0;do{if(hu=!1,mu=0,25<=L)throw Error(s(301));L+=1,cn=sn=null,c.updateQueue=null,Gm.current=I4,o=p(x,j)}while(hu)}if(Gm.current=Qm,c=sn!==null&&sn.next!==null,ml=0,cn=sn=As=null,Wm=!1,c)throw Error(s(300));return o}function Mx(){var o=mu!==0;return mu=0,o}function Ui(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?As.memoizedState=cn=o:cn=cn.next=o,cn}function Xr(){if(sn===null){var o=As.alternate;o=o!==null?o.memoizedState:null}else o=sn.next;var c=cn===null?As.memoizedState:cn.next;if(c!==null)cn=c,sn=o;else{if(o===null)throw Error(s(310));sn=o,o={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},cn===null?As.memoizedState=cn=o:cn=cn.next=o}return cn}function pu(o,c){return typeof c=="function"?c(o):c}function Fx(o){var c=Xr(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var x=sn,j=x.baseQueue,L=p.pending;if(L!==null){if(j!==null){var V=j.next;j.next=L.next,L.next=V}x.baseQueue=j=L,p.pending=null}if(j!==null){L=j.next,x=x.baseState;var Q=V=null,X=null,me=L;do{var ke=me.lane;if((ml&ke)===ke)X!==null&&(X=X.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),x=me.hasEagerState?me.eagerState:o(x,me.action);else{var Ae={lane:ke,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};X===null?(Q=X=Ae,V=x):X=X.next=Ae,As.lanes|=ke,pl|=ke}me=me.next}while(me!==null&&me!==L);X===null?V=x:X.next=Q,fi(x,c.memoizedState)||(ur=!0),c.memoizedState=x,c.baseState=V,c.baseQueue=X,p.lastRenderedState=x}if(o=p.interleaved,o!==null){j=o;do L=j.lane,As.lanes|=L,pl|=L,j=j.next;while(j!==o)}else j===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Bx(o){var c=Xr(),p=c.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=o;var x=p.dispatch,j=p.pending,L=c.memoizedState;if(j!==null){p.pending=null;var V=j=j.next;do L=o(L,V.action),V=V.next;while(V!==j);fi(L,c.memoizedState)||(ur=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),p.lastRenderedState=L}return[L,x]}function B_(){}function $_(o,c){var p=As,x=Xr(),j=c(),L=!fi(x.memoizedState,j);if(L&&(x.memoizedState=j,ur=!0),x=x.queue,$x(U_.bind(null,p,x,o),[o]),x.getSnapshot!==c||L||cn!==null&&cn.memoizedState.tag&1){if(p.flags|=2048,fu(9,V_.bind(null,p,x,j,c),void 0,null),dn===null)throw Error(s(349));(ml&30)!==0||O_(p,c,j)}return j}function O_(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=As.updateQueue,c===null?(c={lastEffect:null,stores:null},As.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function V_(o,c,p,x){c.value=p,c.getSnapshot=x,z_(c)&&H_(o)}function U_(o,c,p){return p(function(){z_(c)&&H_(o)})}function z_(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!fi(o,p)}catch(x){return!0}}function H_(o){var c=xa(o,1);c!==null&&bi(c,o,1,-1)}function G_(o){var c=Ui();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:o},c.queue=o,o=o.dispatch=T4.bind(null,As,o),[c.memoizedState,o]}function fu(o,c,p,x){return o={tag:o,create:c,destroy:p,deps:x,next:null},c=As.updateQueue,c===null?(c={lastEffect:null,stores:null},As.updateQueue=c,c.lastEffect=o.next=o):(p=c.lastEffect,p===null?c.lastEffect=o.next=o:(x=p.next,p.next=o,o.next=x,c.lastEffect=o)),o}function W_(){return Xr().memoizedState}function qm(o,c,p,x){var j=Ui();As.flags|=o,j.memoizedState=fu(1|c,p,void 0,x===void 0?null:x)}function Km(o,c,p,x){var j=Xr();x=x===void 0?null:x;var L=void 0;if(sn!==null){var V=sn.memoizedState;if(L=V.destroy,x!==null&&Lx(x,V.deps)){j.memoizedState=fu(c,p,L,x);return}}As.flags|=o,j.memoizedState=fu(1|c,p,L,x)}function q_(o,c){return qm(8390656,8,o,c)}function $x(o,c){return Km(2048,8,o,c)}function K_(o,c){return Km(4,2,o,c)}function Q_(o,c){return Km(4,4,o,c)}function X_(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Y_(o,c,p){return p=p!=null?p.concat([o]):null,Km(4,4,X_.bind(null,c,o),p)}function Ox(){}function J_(o,c){var p=Xr();c=c===void 0?null:c;var x=p.memoizedState;return x!==null&&c!==null&&Lx(c,x[1])?x[0]:(p.memoizedState=[o,c],o)}function Z_(o,c){var p=Xr();c=c===void 0?null:c;var x=p.memoizedState;return x!==null&&c!==null&&Lx(c,x[1])?x[0]:(o=o(),p.memoizedState=[o,c],o)}function ew(o,c,p){return(ml&21)===0?(o.baseState&&(o.baseState=!1,ur=!0),o.memoizedState=p):(fi(p,c)||(p=sl(),As.lanes|=p,pl|=p,o.baseState=!0),c)}function k4(o,c){var p=Wt;Wt=p!==0&&4>p?p:4,o(!0);var x=Rx.transition;Rx.transition={};try{o(!1),c()}finally{Wt=p,Rx.transition=x}}function tw(){return Xr().memoizedState}function C4(o,c,p){var x=xo(o);if(p={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null},sw(o))nw(c,p);else if(p=R_(o,c,p,x),p!==null){var j=Xn();bi(p,o,x,j),rw(p,c,x)}}function T4(o,c,p){var x=xo(o),j={lane:x,action:p,hasEagerState:!1,eagerState:null,next:null};if(sw(o))nw(c,j);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var V=c.lastRenderedState,Q=L(V,p);if(j.hasEagerState=!0,j.eagerState=Q,fi(Q,V)){var X=c.interleaved;X===null?(j.next=j,Cx(c)):(j.next=X.next,X.next=j),c.interleaved=j;return}}catch(me){}finally{}p=R_(o,c,j,x),p!==null&&(j=Xn(),bi(p,o,x,j),rw(p,c,x))}}function sw(o){var c=o.alternate;return o===As||c!==null&&c===As}function nw(o,c){hu=Wm=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function rw(o,c,p){if((p&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,p|=x,c.lanes=p,to(o,p)}}var Qm={readContext:Qr,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},E4={readContext:Qr,useCallback:function(o,c){return Ui().memoizedState=[o,c===void 0?null:c],o},useContext:Qr,useEffect:q_,useImperativeHandle:function(o,c,p){return p=p!=null?p.concat([o]):null,qm(4194308,4,X_.bind(null,c,o),p)},useLayoutEffect:function(o,c){return qm(4194308,4,o,c)},useInsertionEffect:function(o,c){return qm(4,2,o,c)},useMemo:function(o,c){var p=Ui();return c=c===void 0?null:c,o=o(),p.memoizedState=[o,c],o},useReducer:function(o,c,p){var x=Ui();return c=p!==void 0?p(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=C4.bind(null,As,o),[x.memoizedState,o]},useRef:function(o){var c=Ui();return o={current:o},c.memoizedState=o},useState:G_,useDebugValue:Ox,useDeferredValue:function(o){return Ui().memoizedState=o},useTransition:function(){var o=G_(!1),c=o[0];return o=k4.bind(null,o[1]),Ui().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,p){var x=As,j=Ui();if(Ss){if(p===void 0)throw Error(s(407));p=p()}else{if(p=c(),dn===null)throw Error(s(349));(ml&30)!==0||O_(x,c,p)}j.memoizedState=p;var L={value:p,getSnapshot:c};return j.queue=L,q_(U_.bind(null,x,L,o),[o]),x.flags|=2048,fu(9,V_.bind(null,x,L,p,c),void 0,null),p},useId:function(){var o=Ui(),c=dn.identifierPrefix;if(Ss){var p=ga,x=fa;p=(x&~(1<<32-qn(x)-1)).toString(32)+p,c=":"+c+"R"+p,p=mu++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=N4++,c=":"+c+"r"+p.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},A4={readContext:Qr,useCallback:J_,useContext:Qr,useEffect:$x,useImperativeHandle:Y_,useInsertionEffect:K_,useLayoutEffect:Q_,useMemo:Z_,useReducer:Fx,useRef:W_,useState:function(){return Fx(pu)},useDebugValue:Ox,useDeferredValue:function(o){var c=Xr();return ew(c,sn.memoizedState,o)},useTransition:function(){var o=Fx(pu)[0],c=Xr().memoizedState;return[o,c]},useMutableSource:B_,useSyncExternalStore:$_,useId:tw,unstable_isNewReconciler:!1},I4={readContext:Qr,useCallback:J_,useContext:Qr,useEffect:$x,useImperativeHandle:Y_,useInsertionEffect:K_,useLayoutEffect:Q_,useMemo:Z_,useReducer:Bx,useRef:W_,useState:function(){return Bx(pu)},useDebugValue:Ox,useDeferredValue:function(o){var c=Xr();return sn===null?c.memoizedState=o:ew(c,sn.memoizedState,o)},useTransition:function(){var o=Bx(pu)[0],c=Xr().memoizedState;return[o,c]},useMutableSource:B_,useSyncExternalStore:$_,useId:tw,unstable_isNewReconciler:!1};function xi(o,c){if(o&&o.defaultProps){c=ne({},c),o=o.defaultProps;for(var p in o)c[p]===void 0&&(c[p]=o[p]);return c}return c}function Vx(o,c,p,x){c=o.memoizedState,p=p(x,c),p=p==null?c:ne({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Xm={isMounted:function(o){return(o=o._reactInternals)?Vt(o)===o:!1},enqueueSetState:function(o,c,p){o=o._reactInternals;var x=Xn(),j=xo(o),L=ya(x,j);L.payload=c,p!=null&&(L.callback=p),c=mo(o,L,j),c!==null&&(bi(c,o,j,x),Um(c,o,j))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var x=Xn(),j=xo(o),L=ya(x,j);L.tag=1,L.payload=c,p!=null&&(L.callback=p),c=mo(o,L,j),c!==null&&(bi(c,o,j,x),Um(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Xn(),x=xo(o),j=ya(p,x);j.tag=2,c!=null&&(j.callback=c),c=mo(o,j,x),c!==null&&(bi(c,o,x,p),Um(c,o,x))}};function iw(o,c,p,x,j,L,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,L,V):c.prototype&&c.prototype.isPureReactComponent?!tu(p,x)||!tu(j,L):!0}function aw(o,c,p){var x=!1,j=co,L=c.contextType;return typeof L=="object"&&L!==null?L=Qr(L):(j=dr(c)?ll:Ln.current,x=c.contextTypes,L=(x=x!=null)?Cc(o,j):co),c=new c(p,L),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Xm,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=L),c}function ow(o,c,p,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,x),c.state!==o&&Xm.enqueueReplaceState(c,c.state,null)}function Ux(o,c,p,x){var j=o.stateNode;j.props=p,j.state=o.memoizedState,j.refs={},Tx(o);var L=c.contextType;typeof L=="object"&&L!==null?j.context=Qr(L):(L=dr(c)?ll:Ln.current,j.context=Cc(o,L)),j.state=o.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(Vx(o,c,L,p),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&Xm.enqueueReplaceState(j,j.state,null),zm(o,p,j,x),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Dc(o,c){try{var p="",x=c;do p+=fe(x),x=x.return;while(x);var j=p}catch(L){j=`
Error generating stack: `+L.message+`
`+L.stack}return{value:o,source:c,stack:j,digest:null}}function zx(o,c,p){return{value:o,source:null,stack:p!=null?p:null,digest:c!=null?c:null}}function Hx(o,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var P4=typeof WeakMap=="function"?WeakMap:Map;function lw(o,c,p){p=ya(-1,p),p.tag=3,p.payload={element:null};var x=c.value;return p.callback=function(){np||(np=!0,iy=x),Hx(o,c)},p}function cw(o,c,p){p=ya(-1,p),p.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var j=c.value;p.payload=function(){return x(j)},p.callback=function(){Hx(o,c)}}var L=o.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(p.callback=function(){Hx(o,c),typeof x!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var V=c.stack;this.componentDidCatch(c.value,{componentStack:V!==null?V:""})}),p}function dw(o,c,p){var x=o.pingCache;if(x===null){x=o.pingCache=new P4;var j=new Set;x.set(c,j)}else j=x.get(c),j===void 0&&(j=new Set,x.set(c,j));j.has(p)||(j.add(p),o=W4.bind(null,o,c,p),c.then(o,o))}function uw(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function hw(o,c,p,x,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=ya(-1,1),c.tag=2,mo(p,c,1))),p.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var R4=y.ReactCurrentOwner,ur=!1;function Qn(o,c,p,x){c.child=o===null?P_(c,null,p,x):Ic(c,o.child,p,x)}function mw(o,c,p,x,j){p=p.render;var L=c.ref;return Rc(c,j),x=Dx(o,c,p,x,L,j),p=Mx(),o!==null&&!ur?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,va(o,c,j)):(Ss&&p&&yx(c),c.flags|=1,Qn(o,c,x,j),c.child)}function pw(o,c,p,x,j){if(o===null){var L=p.type;return typeof L=="function"&&!hy(L)&&L.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=L,fw(o,c,L,x,j)):(o=cp(p.type,null,x,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(L=o.child,(o.lanes&j)===0){var V=L.memoizedProps;if(p=p.compare,p=p!==null?p:tu,p(V,x)&&o.ref===c.ref)return va(o,c,j)}return c.flags|=1,o=vo(L,x),o.ref=c.ref,o.return=c,c.child=o}function fw(o,c,p,x,j){if(o!==null){var L=o.memoizedProps;if(tu(L,x)&&o.ref===c.ref)if(ur=!1,c.pendingProps=x=L,(o.lanes&j)!==0)(o.flags&131072)!==0&&(ur=!0);else return c.lanes=o.lanes,va(o,c,j)}return Gx(o,c,p,x,j)}function gw(o,c,p){var x=c.pendingProps,j=x.children,L=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},fs(Fc,Rr),Rr|=p;else{if((p&1073741824)===0)return o=L!==null?L.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,fs(Fc,Rr),Rr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=L!==null?L.baseLanes:p,fs(Fc,Rr),Rr|=x}else L!==null?(x=L.baseLanes|p,c.memoizedState=null):x=p,fs(Fc,Rr),Rr|=x;return Qn(o,c,j,p),c.child}function xw(o,c){var p=c.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function Gx(o,c,p,x,j){var L=dr(p)?ll:Ln.current;return L=Cc(c,L),Rc(c,j),p=Dx(o,c,p,x,L,j),x=Mx(),o!==null&&!ur?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,va(o,c,j)):(Ss&&x&&yx(c),c.flags|=1,Qn(o,c,p,j),c.child)}function yw(o,c,p,x,j){if(dr(p)){var L=!0;Lm(c)}else L=!1;if(Rc(c,j),c.stateNode===null)Jm(o,c),aw(c,p,x),Ux(c,p,x,j),x=!0;else if(o===null){var V=c.stateNode,Q=c.memoizedProps;V.props=Q;var X=V.context,me=p.contextType;typeof me=="object"&&me!==null?me=Qr(me):(me=dr(p)?ll:Ln.current,me=Cc(c,me));var ke=p.getDerivedStateFromProps,Ae=typeof ke=="function"||typeof V.getSnapshotBeforeUpdate=="function";Ae||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==x||X!==me)&&ow(c,V,x,me),ho=!1;var Se=c.memoizedState;V.state=Se,zm(c,x,V,j),X=c.memoizedState,Q!==x||Se!==X||cr.current||ho?(typeof ke=="function"&&(Vx(c,p,ke,x),X=c.memoizedState),(Q=ho||iw(c,p,Q,x,Se,X,me))?(Ae||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(c.flags|=4194308)):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=X),V.props=x,V.state=X,V.context=me,x=Q):(typeof V.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{V=c.stateNode,L_(o,c),Q=c.memoizedProps,me=c.type===c.elementType?Q:xi(c.type,Q),V.props=me,Ae=c.pendingProps,Se=V.context,X=p.contextType,typeof X=="object"&&X!==null?X=Qr(X):(X=dr(p)?ll:Ln.current,X=Cc(c,X));var We=p.getDerivedStateFromProps;(ke=typeof We=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Q!==Ae||Se!==X)&&ow(c,V,x,X),ho=!1,Se=c.memoizedState,V.state=Se,zm(c,x,V,j);var Xe=c.memoizedState;Q!==Ae||Se!==Xe||cr.current||ho?(typeof We=="function"&&(Vx(c,p,We,x),Xe=c.memoizedState),(me=ho||iw(c,p,me,x,Se,Xe,X)||!1)?(ke||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(x,Xe,X),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(x,Xe,X)),typeof V.componentDidUpdate=="function"&&(c.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Xe),V.props=x,V.state=Xe,V.context=X,x=me):(typeof V.componentDidUpdate!="function"||Q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),x=!1)}return Wx(o,c,p,x,L,j)}function Wx(o,c,p,x,j,L){xw(o,c);var V=(c.flags&128)!==0;if(!x&&!V)return j&&j_(c,p,!1),va(o,c,L);x=c.stateNode,R4.current=c;var Q=V&&typeof p.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&V?(c.child=Ic(c,o.child,null,L),c.child=Ic(c,null,Q,L)):Qn(o,c,Q,L),c.memoizedState=x.state,j&&j_(c,p,!0),c.child}function vw(o){var c=o.stateNode;c.pendingContext?__(o,c.pendingContext,c.pendingContext!==c.context):c.context&&__(o,c.context,!1),Ex(o,c.containerInfo)}function bw(o,c,p,x,j){return Ac(),wx(j),c.flags|=256,Qn(o,c,p,x),c.child}var qx={dehydrated:null,treeContext:null,retryLane:0};function Kx(o){return{baseLanes:o,cachePool:null,transitions:null}}function _w(o,c,p){var x=c.pendingProps,j=Es.current,L=!1,V=(c.flags&128)!==0,Q;if((Q=V)||(Q=o!==null&&o.memoizedState===null?!1:(j&2)!==0),Q?(L=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),fs(Es,j&1),o===null)return _x(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(V=x.children,o=x.fallback,L?(x=c.mode,L=c.child,V={mode:"hidden",children:V},(x&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=V):L=dp(V,x,0,null),o=yl(o,x,p,null),L.return=c,o.return=c,L.sibling=o,c.child=L,c.child.memoizedState=Kx(p),c.memoizedState=qx,o):Qx(c,V));if(j=o.memoizedState,j!==null&&(Q=j.dehydrated,Q!==null))return L4(o,c,V,x,Q,j,p);if(L){L=x.fallback,V=c.mode,j=o.child,Q=j.sibling;var X={mode:"hidden",children:x.children};return(V&1)===0&&c.child!==j?(x=c.child,x.childLanes=0,x.pendingProps=X,c.deletions=null):(x=vo(j,X),x.subtreeFlags=j.subtreeFlags&14680064),Q!==null?L=vo(Q,L):(L=yl(L,V,p,null),L.flags|=2),L.return=c,x.return=c,x.sibling=L,c.child=x,x=L,L=c.child,V=o.child.memoizedState,V=V===null?Kx(p):{baseLanes:V.baseLanes|p,cachePool:null,transitions:V.transitions},L.memoizedState=V,L.childLanes=o.childLanes&~p,c.memoizedState=qx,x}return L=o.child,o=L.sibling,x=vo(L,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=p),x.return=c,x.sibling=null,o!==null&&(p=c.deletions,p===null?(c.deletions=[o],c.flags|=16):p.push(o)),c.child=x,c.memoizedState=null,x}function Qx(o,c){return c=dp({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ym(o,c,p,x){return x!==null&&wx(x),Ic(c,o.child,null,p),o=Qx(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function L4(o,c,p,x,j,L,V){if(p)return c.flags&256?(c.flags&=-257,x=zx(Error(s(422))),Ym(o,c,V,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(L=x.fallback,j=c.mode,x=dp({mode:"visible",children:x.children},j,0,null),L=yl(L,j,V,null),L.flags|=2,x.return=c,L.return=c,x.sibling=L,c.child=x,(c.mode&1)!==0&&Ic(c,o.child,null,V),c.child.memoizedState=Kx(V),c.memoizedState=qx,L);if((c.mode&1)===0)return Ym(o,c,V,null);if(j.data==="$!"){if(x=j.nextSibling&&j.nextSibling.dataset,x)var Q=x.dgst;return x=Q,L=Error(s(419)),x=zx(L,x,void 0),Ym(o,c,V,x)}if(Q=(V&o.childLanes)!==0,ur||Q){if(x=dn,x!==null){switch(V&-V){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(x.suspendedLanes|V))!==0?0:j,j!==0&&j!==L.retryLane&&(L.retryLane=j,xa(o,j),bi(x,o,j,-1))}return uy(),x=zx(Error(s(421))),Ym(o,c,V,x)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=q4.bind(null,o),j._reactRetry=c,null):(o=L.treeContext,Pr=oo(j.nextSibling),Ir=c,Ss=!0,gi=null,o!==null&&(qr[Kr++]=fa,qr[Kr++]=ga,qr[Kr++]=cl,fa=o.id,ga=o.overflow,cl=c),c=Qx(c,x.children),c.flags|=4096,c)}function ww(o,c,p){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),kx(o.return,c,p)}function Xx(o,c,p,x,j){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:j}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=x,L.tail=p,L.tailMode=j)}function jw(o,c,p){var x=c.pendingProps,j=x.revealOrder,L=x.tail;if(Qn(o,c,x.children,p),x=Es.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ww(o,p,c);else if(o.tag===19)ww(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(fs(Es,x),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(p=c.child,j=null;p!==null;)o=p.alternate,o!==null&&Hm(o)===null&&(j=p),p=p.sibling;p=j,p===null?(j=c.child,c.child=null):(j=p.sibling,p.sibling=null),Xx(c,!1,j,p,L);break;case"backwards":for(p=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&Hm(o)===null){c.child=j;break}o=j.sibling,j.sibling=p,p=j,j=o}Xx(c,!0,p,null,L);break;case"together":Xx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Jm(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function va(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),pl|=c.lanes,(p&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,p=vo(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=vo(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function D4(o,c,p){switch(c.tag){case 3:vw(c),Ac();break;case 5:F_(c);break;case 1:dr(c.type)&&Lm(c);break;case 4:Ex(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,j=c.memoizedProps.value;fs(Om,x._currentValue),x._currentValue=j;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(fs(Es,Es.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?_w(o,c,p):(fs(Es,Es.current&1),o=va(o,c,p),o!==null?o.sibling:null);fs(Es,Es.current&1);break;case 19:if(x=(p&c.childLanes)!==0,(o.flags&128)!==0){if(x)return jw(o,c,p);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),fs(Es,Es.current),x)break;return null;case 22:case 23:return c.lanes=0,gw(o,c,p)}return va(o,c,p)}var Sw,Yx,Nw,kw;Sw=function(o,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Yx=function(){},Nw=function(o,c,p,x){var j=o.memoizedProps;if(j!==x){o=c.stateNode,hl(Vi.current);var L=null;switch(p){case"input":j=He(o,j),x=He(o,x),L=[];break;case"select":j=ne({},j,{value:void 0}),x=ne({},x,{value:void 0}),L=[];break;case"textarea":j=Ie(o,j),x=Ie(o,x),L=[];break;default:typeof j.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=Im)}rr(p,x);var V;p=null;for(me in j)if(!x.hasOwnProperty(me)&&j.hasOwnProperty(me)&&j[me]!=null)if(me==="style"){var Q=j[me];for(V in Q)Q.hasOwnProperty(V)&&(p||(p={}),p[V]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?L||(L=[]):(L=L||[]).push(me,null));for(me in x){var X=x[me];if(Q=j!=null?j[me]:void 0,x.hasOwnProperty(me)&&X!==Q&&(X!=null||Q!=null))if(me==="style")if(Q){for(V in Q)!Q.hasOwnProperty(V)||X&&X.hasOwnProperty(V)||(p||(p={}),p[V]="");for(V in X)X.hasOwnProperty(V)&&Q[V]!==X[V]&&(p||(p={}),p[V]=X[V])}else p||(L||(L=[]),L.push(me,p)),p=X;else me==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,Q=Q?Q.__html:void 0,X!=null&&Q!==X&&(L=L||[]).push(me,X)):me==="children"?typeof X!="string"&&typeof X!="number"||(L=L||[]).push(me,""+X):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(X!=null&&me==="onScroll"&&vs("scroll",o),L||Q===X||(L=[])):(L=L||[]).push(me,X))}p&&(L=L||[]).push("style",p);var me=L;(c.updateQueue=me)&&(c.flags|=4)}},kw=function(o,c,p,x){p!==x&&(c.flags|=4)};function gu(o,c){if(!Ss)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Mn(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,x=0;if(c)for(var j=o.child;j!==null;)p|=j.lanes|j.childLanes,x|=j.subtreeFlags&14680064,x|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)p|=j.lanes|j.childLanes,x|=j.subtreeFlags,x|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=x,o.childLanes=p,c}function M4(o,c,p){var x=c.pendingProps;switch(vx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(c),null;case 1:return dr(c.type)&&Rm(),Mn(c),null;case 3:return x=c.stateNode,Lc(),bs(cr),bs(Ln),Px(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Bm(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,gi!==null&&(ly(gi),gi=null))),Yx(o,c),Mn(c),null;case 5:Ax(c);var j=hl(uu.current);if(p=c.type,o!==null&&c.stateNode!=null)Nw(o,c,p,x,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(s(166));return Mn(c),null}if(o=hl(Vi.current),Bm(c)){x=c.stateNode,p=c.type;var L=c.memoizedProps;switch(x[Oi]=c,x[au]=L,o=(c.mode&1)!==0,p){case"dialog":vs("cancel",x),vs("close",x);break;case"iframe":case"object":case"embed":vs("load",x);break;case"video":case"audio":for(j=0;j<nu.length;j++)vs(nu[j],x);break;case"source":vs("error",x);break;case"img":case"image":case"link":vs("error",x),vs("load",x);break;case"details":vs("toggle",x);break;case"input":pt(x,L),vs("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!L.multiple},vs("invalid",x);break;case"textarea":ze(x,L),vs("invalid",x)}rr(p,L),j=null;for(var V in L)if(L.hasOwnProperty(V)){var Q=L[V];V==="children"?typeof Q=="string"?x.textContent!==Q&&(L.suppressHydrationWarning!==!0&&Am(x.textContent,Q,o),j=["children",Q]):typeof Q=="number"&&x.textContent!==""+Q&&(L.suppressHydrationWarning!==!0&&Am(x.textContent,Q,o),j=["children",""+Q]):i.hasOwnProperty(V)&&Q!=null&&V==="onScroll"&&vs("scroll",x)}switch(p){case"input":pe(x),Ht(x,L,!0);break;case"textarea":pe(x),ut(x);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(x.onclick=Im)}x=j,c.updateQueue=x,x!==null&&(c.flags|=4)}else{V=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=xt(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=V.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=V.createElement(p,{is:x.is}):(o=V.createElement(p),p==="select"&&(V=o,x.multiple?V.multiple=!0:x.size&&(V.size=x.size))):o=V.createElementNS(o,p),o[Oi]=c,o[au]=x,Sw(o,c,!1,!1),c.stateNode=o;e:{switch(V=ls(p,x),p){case"dialog":vs("cancel",o),vs("close",o),j=x;break;case"iframe":case"object":case"embed":vs("load",o),j=x;break;case"video":case"audio":for(j=0;j<nu.length;j++)vs(nu[j],o);j=x;break;case"source":vs("error",o),j=x;break;case"img":case"image":case"link":vs("error",o),vs("load",o),j=x;break;case"details":vs("toggle",o),j=x;break;case"input":pt(o,x),j=He(o,x),vs("invalid",o);break;case"option":j=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},j=ne({},x,{value:void 0}),vs("invalid",o);break;case"textarea":ze(o,x),j=Ie(o,x),vs("invalid",o);break;default:j=x}rr(p,j),Q=j;for(L in Q)if(Q.hasOwnProperty(L)){var X=Q[L];L==="style"?Ur(o,X):L==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Pn(o,X)):L==="children"?typeof X=="string"?(p!=="textarea"||X!=="")&&en(o,X):typeof X=="number"&&en(o,""+X):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?X!=null&&L==="onScroll"&&vs("scroll",o):X!=null&&T(o,L,X,V))}switch(p){case"input":pe(o),Ht(o,x,!1);break;case"textarea":pe(o),ut(o);break;case"option":x.value!=null&&o.setAttribute("value",""+_e(x.value));break;case"select":o.multiple=!!x.multiple,L=x.value,L!=null?Re(o,!!x.multiple,L,!1):x.defaultValue!=null&&Re(o,!!x.multiple,x.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=Im)}switch(p){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Mn(c),null;case 6:if(o&&c.stateNode!=null)kw(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(s(166));if(p=hl(uu.current),hl(Vi.current),Bm(c)){if(x=c.stateNode,p=c.memoizedProps,x[Oi]=c,(L=x.nodeValue!==p)&&(o=Ir,o!==null))switch(o.tag){case 3:Am(x.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Am(x.nodeValue,p,(o.mode&1)!==0)}L&&(c.flags|=4)}else x=(p.nodeType===9?p:p.ownerDocument).createTextNode(x),x[Oi]=c,c.stateNode=x}return Mn(c),null;case 13:if(bs(Es),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ss&&Pr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)E_(),Ac(),c.flags|=98560,L=!1;else if(L=Bm(c),x!==null&&x.dehydrated!==null){if(o===null){if(!L)throw Error(s(318));if(L=c.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[Oi]=c}else Ac(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Mn(c),L=!1}else gi!==null&&(ly(gi),gi=null),L=!0;if(!L)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Es.current&1)!==0?nn===0&&(nn=3):uy())),c.updateQueue!==null&&(c.flags|=4),Mn(c),null);case 4:return Lc(),Yx(o,c),o===null&&ru(c.stateNode.containerInfo),Mn(c),null;case 10:return Nx(c.type._context),Mn(c),null;case 17:return dr(c.type)&&Rm(),Mn(c),null;case 19:if(bs(Es),L=c.memoizedState,L===null)return Mn(c),null;if(x=(c.flags&128)!==0,V=L.rendering,V===null)if(x)gu(L,!1);else{if(nn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(V=Hm(o),V!==null){for(c.flags|=128,gu(L,!1),x=V.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=p,p=c.child;p!==null;)L=p,o=x,L.flags&=14680066,V=L.alternate,V===null?(L.childLanes=0,L.lanes=o,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=V.childLanes,L.lanes=V.lanes,L.child=V.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=V.memoizedProps,L.memoizedState=V.memoizedState,L.updateQueue=V.updateQueue,L.type=V.type,o=V.dependencies,L.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return fs(Es,Es.current&1|2),c.child}o=o.sibling}L.tail!==null&&ps()>Bc&&(c.flags|=128,x=!0,gu(L,!1),c.lanes=4194304)}else{if(!x)if(o=Hm(V),o!==null){if(c.flags|=128,x=!0,p=o.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),gu(L,!0),L.tail===null&&L.tailMode==="hidden"&&!V.alternate&&!Ss)return Mn(c),null}else 2*ps()-L.renderingStartTime>Bc&&p!==1073741824&&(c.flags|=128,x=!0,gu(L,!1),c.lanes=4194304);L.isBackwards?(V.sibling=c.child,c.child=V):(p=L.last,p!==null?p.sibling=V:c.child=V,L.last=V)}return L.tail!==null?(c=L.tail,L.rendering=c,L.tail=c.sibling,L.renderingStartTime=ps(),c.sibling=null,p=Es.current,fs(Es,x?p&1|2:p&1),c):(Mn(c),null);case 22:case 23:return dy(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(Rr&1073741824)!==0&&(Mn(c),c.subtreeFlags&6&&(c.flags|=8192)):Mn(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}function F4(o,c){switch(vx(c),c.tag){case 1:return dr(c.type)&&Rm(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Lc(),bs(cr),bs(Ln),Px(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Ax(c),null;case 13:if(bs(Es),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Ac()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return bs(Es),null;case 4:return Lc(),null;case 10:return Nx(c.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var Zm=!1,Fn=!1,B4=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Mc(o,c){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(x){Ms(o,c,x)}else p.current=null}function Jx(o,c,p){try{p()}catch(x){Ms(o,c,x)}}var Cw=!1;function $4(o,c){if(dx=ro,o=i_(),sx(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var j=x.anchorOffset,L=x.focusNode;x=x.focusOffset;try{p.nodeType,L.nodeType}catch(Le){p=null;break e}var V=0,Q=-1,X=-1,me=0,ke=0,Ae=o,Se=null;t:for(;;){for(var We;Ae!==p||j!==0&&Ae.nodeType!==3||(Q=V+j),Ae!==L||x!==0&&Ae.nodeType!==3||(X=V+x),Ae.nodeType===3&&(V+=Ae.nodeValue.length),(We=Ae.firstChild)!==null;)Se=Ae,Ae=We;for(;;){if(Ae===o)break t;if(Se===p&&++me===j&&(Q=V),Se===L&&++ke===x&&(X=V),(We=Ae.nextSibling)!==null)break;Ae=Se,Se=Ae.parentNode}Ae=We}p=Q===-1||X===-1?null:{start:Q,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(ux={focusedElem:o,selectionRange:p},ro=!1,Qe=c;Qe!==null;)if(c=Qe,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Qe=o;else for(;Qe!==null;){c=Qe;try{var Xe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Ye=Xe.memoizedProps,Vs=Xe.memoizedState,le=c.stateNode,ee=le.getSnapshotBeforeUpdate(c.elementType===c.type?Ye:xi(c.type,Ye),Vs);le.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Le){Ms(c,c.return,Le)}if(o=c.sibling,o!==null){o.return=c.return,Qe=o;break}Qe=c.return}return Xe=Cw,Cw=!1,Xe}function xu(o,c,p){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var j=x=x.next;do{if((j.tag&o)===o){var L=j.destroy;j.destroy=void 0,L!==void 0&&Jx(c,p,L)}j=j.next}while(j!==x)}}function ep(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&o)===o){var x=p.create;p.destroy=x()}p=p.next}while(p!==c)}}function Zx(o){var c=o.ref;if(c!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof c=="function"?c(o):c.current=o}}function Tw(o){var c=o.alternate;c!==null&&(o.alternate=null,Tw(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Oi],delete c[au],delete c[fx],delete c[_4],delete c[w4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ew(o){return o.tag===5||o.tag===3||o.tag===4}function Aw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ew(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ey(o,c,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(o,c):p.insertBefore(o,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(o,p)):(c=p,c.appendChild(o)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Im));else if(x!==4&&(o=o.child,o!==null))for(ey(o,c,p),o=o.sibling;o!==null;)ey(o,c,p),o=o.sibling}function ty(o,c,p){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(ty(o,c,p),o=o.sibling;o!==null;)ty(o,c,p),o=o.sibling}var xn=null,yi=!1;function po(o,c,p){for(p=p.child;p!==null;)Iw(o,c,p),p=p.sibling}function Iw(o,c,p){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(el,p)}catch(Q){}switch(p.tag){case 5:Fn||Mc(p,c);case 6:var x=xn,j=yi;xn=null,po(o,c,p),xn=x,yi=j,xn!==null&&(yi?(o=xn,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):xn.removeChild(p.stateNode));break;case 18:xn!==null&&(yi?(o=xn,p=p.stateNode,o.nodeType===8?px(o.parentNode,p):o.nodeType===1&&px(o,p),mi(o)):px(xn,p.stateNode));break;case 4:x=xn,j=yi,xn=p.stateNode.containerInfo,yi=!0,po(o,c,p),xn=x,yi=j;break;case 0:case 11:case 14:case 15:if(!Fn&&(x=p.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){j=x=x.next;do{var L=j,V=L.destroy;L=L.tag,V!==void 0&&((L&2)!==0||(L&4)!==0)&&Jx(p,c,V),j=j.next}while(j!==x)}po(o,c,p);break;case 1:if(!Fn&&(Mc(p,c),x=p.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=p.memoizedProps,x.state=p.memoizedState,x.componentWillUnmount()}catch(Q){Ms(p,c,Q)}po(o,c,p);break;case 21:po(o,c,p);break;case 22:p.mode&1?(Fn=(x=Fn)||p.memoizedState!==null,po(o,c,p),Fn=x):po(o,c,p);break;default:po(o,c,p)}}function Pw(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new B4),c.forEach(function(x){var j=K4.bind(null,o,x);p.has(x)||(p.add(x),x.then(j,j))})}}function vi(o,c){var p=c.deletions;if(p!==null)for(var x=0;x<p.length;x++){var j=p[x];try{var L=o,V=c,Q=V;e:for(;Q!==null;){switch(Q.tag){case 5:xn=Q.stateNode,yi=!1;break e;case 3:xn=Q.stateNode.containerInfo,yi=!0;break e;case 4:xn=Q.stateNode.containerInfo,yi=!0;break e}Q=Q.return}if(xn===null)throw Error(s(160));Iw(L,V,j),xn=null,yi=!1;var X=j.alternate;X!==null&&(X.return=null),j.return=null}catch(me){Ms(j,c,me)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Rw(c,o),c=c.sibling}function Rw(o,c){var p=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(vi(c,o),zi(o),x&4){try{xu(3,o,o.return),ep(3,o)}catch(Ye){Ms(o,o.return,Ye)}try{xu(5,o,o.return)}catch(Ye){Ms(o,o.return,Ye)}}break;case 1:vi(c,o),zi(o),x&512&&p!==null&&Mc(p,p.return);break;case 5:if(vi(c,o),zi(o),x&512&&p!==null&&Mc(p,p.return),o.flags&32){var j=o.stateNode;try{en(j,"")}catch(Ye){Ms(o,o.return,Ye)}}if(x&4&&(j=o.stateNode,j!=null)){var L=o.memoizedProps,V=p!==null?p.memoizedProps:L,Q=o.type,X=o.updateQueue;if(o.updateQueue=null,X!==null)try{Q==="input"&&L.type==="radio"&&L.name!=null&&It(j,L),ls(Q,V);var me=ls(Q,L);for(V=0;V<X.length;V+=2){var ke=X[V],Ae=X[V+1];ke==="style"?Ur(j,Ae):ke==="dangerouslySetInnerHTML"?Pn(j,Ae):ke==="children"?en(j,Ae):T(j,ke,Ae,me)}switch(Q){case"input":Mt(j,L);break;case"textarea":at(j,L);break;case"select":var Se=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!L.multiple;var We=L.value;We!=null?Re(j,!!L.multiple,We,!1):Se!==!!L.multiple&&(L.defaultValue!=null?Re(j,!!L.multiple,L.defaultValue,!0):Re(j,!!L.multiple,L.multiple?[]:"",!1))}j[au]=L}catch(Ye){Ms(o,o.return,Ye)}}break;case 6:if(vi(c,o),zi(o),x&4){if(o.stateNode===null)throw Error(s(162));j=o.stateNode,L=o.memoizedProps;try{j.nodeValue=L}catch(Ye){Ms(o,o.return,Ye)}}break;case 3:if(vi(c,o),zi(o),x&4&&p!==null&&p.memoizedState.isDehydrated)try{mi(c.containerInfo)}catch(Ye){Ms(o,o.return,Ye)}break;case 4:vi(c,o),zi(o);break;case 13:vi(c,o),zi(o),j=o.child,j.flags&8192&&(L=j.memoizedState!==null,j.stateNode.isHidden=L,!L||j.alternate!==null&&j.alternate.memoizedState!==null||(ry=ps())),x&4&&Pw(o);break;case 22:if(ke=p!==null&&p.memoizedState!==null,o.mode&1?(Fn=(me=Fn)||ke,vi(c,o),Fn=me):vi(c,o),zi(o),x&8192){if(me=o.memoizedState!==null,(o.stateNode.isHidden=me)&&!ke&&(o.mode&1)!==0)for(Qe=o,ke=o.child;ke!==null;){for(Ae=Qe=ke;Qe!==null;){switch(Se=Qe,We=Se.child,Se.tag){case 0:case 11:case 14:case 15:xu(4,Se,Se.return);break;case 1:Mc(Se,Se.return);var Xe=Se.stateNode;if(typeof Xe.componentWillUnmount=="function"){x=Se,p=Se.return;try{c=x,Xe.props=c.memoizedProps,Xe.state=c.memoizedState,Xe.componentWillUnmount()}catch(Ye){Ms(x,p,Ye)}}break;case 5:Mc(Se,Se.return);break;case 22:if(Se.memoizedState!==null){Mw(Ae);continue}}We!==null?(We.return=Se,Qe=We):Mw(Ae)}ke=ke.sibling}e:for(ke=null,Ae=o;;){if(Ae.tag===5){if(ke===null){ke=Ae;try{j=Ae.stateNode,me?(L=j.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(Q=Ae.stateNode,X=Ae.memoizedProps.style,V=X!=null&&X.hasOwnProperty("display")?X.display:null,Q.style.display=Sr("display",V))}catch(Ye){Ms(o,o.return,Ye)}}}else if(Ae.tag===6){if(ke===null)try{Ae.stateNode.nodeValue=me?"":Ae.memoizedProps}catch(Ye){Ms(o,o.return,Ye)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===o)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===o)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===o)break e;ke===Ae&&(ke=null),Ae=Ae.return}ke===Ae&&(ke=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:vi(c,o),zi(o),x&4&&Pw(o);break;case 21:break;default:vi(c,o),zi(o)}}function zi(o){var c=o.flags;if(c&2){try{e:{for(var p=o.return;p!==null;){if(Ew(p)){var x=p;break e}p=p.return}throw Error(s(160))}switch(x.tag){case 5:var j=x.stateNode;x.flags&32&&(en(j,""),x.flags&=-33);var L=Aw(o);ty(o,L,j);break;case 3:case 4:var V=x.stateNode.containerInfo,Q=Aw(o);ey(o,Q,V);break;default:throw Error(s(161))}}catch(X){Ms(o,o.return,X)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function O4(o,c,p){Qe=o,Lw(o)}function Lw(o,c,p){for(var x=(o.mode&1)!==0;Qe!==null;){var j=Qe,L=j.child;if(j.tag===22&&x){var V=j.memoizedState!==null||Zm;if(!V){var Q=j.alternate,X=Q!==null&&Q.memoizedState!==null||Fn;Q=Zm;var me=Fn;if(Zm=V,(Fn=X)&&!me)for(Qe=j;Qe!==null;)V=Qe,X=V.child,V.tag===22&&V.memoizedState!==null?Fw(j):X!==null?(X.return=V,Qe=X):Fw(j);for(;L!==null;)Qe=L,Lw(L),L=L.sibling;Qe=j,Zm=Q,Fn=me}Dw(o)}else(j.subtreeFlags&8772)!==0&&L!==null?(L.return=j,Qe=L):Dw(o)}}function Dw(o){for(;Qe!==null;){var c=Qe;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Fn||ep(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!Fn)if(p===null)x.componentDidMount();else{var j=c.elementType===c.type?p.memoizedProps:xi(c.type,p.memoizedProps);x.componentDidUpdate(j,p.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&M_(c,L,x);break;case 3:var V=c.updateQueue;if(V!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}M_(c,V,p)}break;case 5:var Q=c.stateNode;if(p===null&&c.flags&4){p=Q;var X=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&p.focus();break;case"img":X.src&&(p.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var me=c.alternate;if(me!==null){var ke=me.memoizedState;if(ke!==null){var Ae=ke.dehydrated;Ae!==null&&mi(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Fn||c.flags&512&&Zx(c)}catch(Se){Ms(c,c.return,Se)}}if(c===o){Qe=null;break}if(p=c.sibling,p!==null){p.return=c.return,Qe=p;break}Qe=c.return}}function Mw(o){for(;Qe!==null;){var c=Qe;if(c===o){Qe=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Qe=p;break}Qe=c.return}}function Fw(o){for(;Qe!==null;){var c=Qe;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{ep(4,c)}catch(X){Ms(c,p,X)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var j=c.return;try{x.componentDidMount()}catch(X){Ms(c,j,X)}}var L=c.return;try{Zx(c)}catch(X){Ms(c,L,X)}break;case 5:var V=c.return;try{Zx(c)}catch(X){Ms(c,V,X)}}}catch(X){Ms(c,c.return,X)}if(c===o){Qe=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,Qe=Q;break}Qe=c.return}}var V4=Math.ceil,tp=y.ReactCurrentDispatcher,sy=y.ReactCurrentOwner,Yr=y.ReactCurrentBatchConfig,Jt=0,dn=null,Ws=null,yn=0,Rr=0,Fc=lo(0),nn=0,yu=null,pl=0,sp=0,ny=0,vu=null,hr=null,ry=0,Bc=1/0,ba=null,np=!1,iy=null,fo=null,rp=!1,go=null,ip=0,bu=0,ay=null,ap=-1,op=0;function Xn(){return(Jt&6)!==0?ps():ap!==-1?ap:ap=ps()}function xo(o){return(o.mode&1)===0?1:(Jt&2)!==0&&yn!==0?yn&-yn:S4.transition!==null?(op===0&&(op=sl()),op):(o=Wt,o!==0||(o=window.event,o=o===void 0?16:Kd(o.type)),o)}function bi(o,c,p,x){if(50<bu)throw bu=0,ay=null,Error(s(185));eo(o,p,x),((Jt&2)===0||o!==dn)&&(o===dn&&((Jt&2)===0&&(sp|=p),nn===4&&yo(o,yn)),mr(o,x),p===1&&Jt===0&&(c.mode&1)===0&&(Bc=ps()+500,Dm&&uo()))}function mr(o,c){var p=o.callbackNode;la(o,c);var x=tl(o,o===dn?yn:0);if(x===0)p!==null&&zd(p),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(p!=null&&zd(p),c===1)o.tag===0?j4($w.bind(null,o)):S_($w.bind(null,o)),v4(function(){(Jt&6)===0&&uo()}),p=null;else{switch(so(x)){case 1:p=Zo;break;case 4:p=Ya;break;case 16:p=Hr;break;case 536870912:p=om;break;default:p=Hr}p=qw(p,Bw.bind(null,o))}o.callbackPriority=c,o.callbackNode=p}}function Bw(o,c){if(ap=-1,op=0,(Jt&6)!==0)throw Error(s(327));var p=o.callbackNode;if($c()&&o.callbackNode!==p)return null;var x=tl(o,o===dn?yn:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=lp(o,x);else{c=x;var j=Jt;Jt|=2;var L=Vw();(dn!==o||yn!==c)&&(ba=null,Bc=ps()+500,gl(o,c));do try{H4();break}catch(Q){Ow(o,Q)}while(!0);Sx(),tp.current=L,Jt=j,Ws!==null?c=0:(dn=null,yn=0,c=nn)}if(c!==0){if(c===2&&(j=Tr(o),j!==0&&(x=j,c=oy(o,j))),c===1)throw p=yu,gl(o,0),yo(o,x),mr(o,ps()),p;if(c===6)yo(o,x);else{if(j=o.current.alternate,(x&30)===0&&!U4(j)&&(c=lp(o,x),c===2&&(L=Tr(o),L!==0&&(x=L,c=oy(o,L))),c===1))throw p=yu,gl(o,0),yo(o,x),mr(o,ps()),p;switch(o.finishedWork=j,o.finishedLanes=x,c){case 0:case 1:throw Error(s(345));case 2:xl(o,hr,ba);break;case 3:if(yo(o,x),(x&130023424)===x&&(c=ry+500-ps(),10<c)){if(tl(o,0)!==0)break;if(j=o.suspendedLanes,(j&x)!==x){Xn(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=mx(xl.bind(null,o,hr,ba),c);break}xl(o,hr,ba);break;case 4:if(yo(o,x),(x&4194240)===x)break;for(c=o.eventTimes,j=-1;0<x;){var V=31-qn(x);L=1<<V,V=c[V],V>j&&(j=V),x&=~L}if(x=j,x=ps()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*V4(x/1960))-x,10<x){o.timeoutHandle=mx(xl.bind(null,o,hr,ba),x);break}xl(o,hr,ba);break;case 5:xl(o,hr,ba);break;default:throw Error(s(329))}}}return mr(o,ps()),o.callbackNode===p?Bw.bind(null,o):null}function oy(o,c){var p=vu;return o.current.memoizedState.isDehydrated&&(gl(o,c).flags|=256),o=lp(o,c),o!==2&&(c=hr,hr=p,c!==null&&ly(c)),o}function ly(o){hr===null?hr=o:hr.push.apply(hr,o)}function U4(o){for(var c=o;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var x=0;x<p.length;x++){var j=p[x],L=j.getSnapshot;j=j.value;try{if(!fi(L(),j))return!1}catch(V){return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function yo(o,c){for(c&=~ny,c&=~sp,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var p=31-qn(c),x=1<<p;o[p]=-1,c&=~x}}function $w(o){if((Jt&6)!==0)throw Error(s(327));$c();var c=tl(o,0);if((c&1)===0)return mr(o,ps()),null;var p=lp(o,c);if(o.tag!==0&&p===2){var x=Tr(o);x!==0&&(c=x,p=oy(o,x))}if(p===1)throw p=yu,gl(o,0),yo(o,c),mr(o,ps()),p;if(p===6)throw Error(s(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,xl(o,hr,ba),mr(o,ps()),null}function cy(o,c){var p=Jt;Jt|=1;try{return o(c)}finally{Jt=p,Jt===0&&(Bc=ps()+500,Dm&&uo())}}function fl(o){go!==null&&go.tag===0&&(Jt&6)===0&&$c();var c=Jt;Jt|=1;var p=Yr.transition,x=Wt;try{if(Yr.transition=null,Wt=1,o)return o()}finally{Wt=x,Yr.transition=p,Jt=c,(Jt&6)===0&&uo()}}function dy(){Rr=Fc.current,bs(Fc)}function gl(o,c){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,y4(p)),Ws!==null)for(p=Ws.return;p!==null;){var x=p;switch(vx(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Rm();break;case 3:Lc(),bs(cr),bs(Ln),Px();break;case 5:Ax(x);break;case 4:Lc();break;case 13:bs(Es);break;case 19:bs(Es);break;case 10:Nx(x.type._context);break;case 22:case 23:dy()}p=p.return}if(dn=o,Ws=o=vo(o.current,null),yn=Rr=c,nn=0,yu=null,ny=sp=pl=0,hr=vu=null,ul!==null){for(c=0;c<ul.length;c++)if(p=ul[c],x=p.interleaved,x!==null){p.interleaved=null;var j=x.next,L=p.pending;if(L!==null){var V=L.next;L.next=j,x.next=V}p.pending=x}ul=null}return o}function Ow(o,c){do{var p=Ws;try{if(Sx(),Gm.current=Qm,Wm){for(var x=As.memoizedState;x!==null;){var j=x.queue;j!==null&&(j.pending=null),x=x.next}Wm=!1}if(ml=0,cn=sn=As=null,hu=!1,mu=0,sy.current=null,p===null||p.return===null){nn=1,yu=c,Ws=null;break}e:{var L=o,V=p.return,Q=p,X=c;if(c=yn,Q.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var me=X,ke=Q,Ae=ke.tag;if((ke.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var Se=ke.alternate;Se?(ke.updateQueue=Se.updateQueue,ke.memoizedState=Se.memoizedState,ke.lanes=Se.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var We=uw(V);if(We!==null){We.flags&=-257,hw(We,V,Q,L,c),We.mode&1&&dw(L,me,c),c=We,X=me;var Xe=c.updateQueue;if(Xe===null){var Ye=new Set;Ye.add(X),c.updateQueue=Ye}else Xe.add(X);break e}else{if((c&1)===0){dw(L,me,c),uy();break e}X=Error(s(426))}}else if(Ss&&Q.mode&1){var Vs=uw(V);if(Vs!==null){(Vs.flags&65536)===0&&(Vs.flags|=256),hw(Vs,V,Q,L,c),wx(Dc(X,Q));break e}}L=X=Dc(X,Q),nn!==4&&(nn=2),vu===null?vu=[L]:vu.push(L),L=V;do{switch(L.tag){case 3:L.flags|=65536,c&=-c,L.lanes|=c;var le=lw(L,X,c);D_(L,le);break e;case 1:Q=X;var ee=L.type,ue=L.stateNode;if((L.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(fo===null||!fo.has(ue)))){L.flags|=65536,c&=-c,L.lanes|=c;var Le=cw(L,Q,c);D_(L,Le);break e}}L=L.return}while(L!==null)}zw(p)}catch(et){c=et,Ws===p&&p!==null&&(Ws=p=p.return);continue}break}while(!0)}function Vw(){var o=tp.current;return tp.current=Qm,o===null?Qm:o}function uy(){(nn===0||nn===3||nn===2)&&(nn=4),dn===null||(pl&268435455)===0&&(sp&268435455)===0||yo(dn,yn)}function lp(o,c){var p=Jt;Jt|=2;var x=Vw();(dn!==o||yn!==c)&&(ba=null,gl(o,c));do try{z4();break}catch(j){Ow(o,j)}while(!0);if(Sx(),Jt=p,tp.current=x,Ws!==null)throw Error(s(261));return dn=null,yn=0,nn}function z4(){for(;Ws!==null;)Uw(Ws)}function H4(){for(;Ws!==null&&!im();)Uw(Ws)}function Uw(o){var c=Ww(o.alternate,o,Rr);o.memoizedProps=o.pendingProps,c===null?zw(o):Ws=c,sy.current=null}function zw(o){var c=o;do{var p=c.alternate;if(o=c.return,(c.flags&32768)===0){if(p=M4(p,c,Rr),p!==null){Ws=p;return}}else{if(p=F4(p,c),p!==null){p.flags&=32767,Ws=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{nn=6,Ws=null;return}}if(c=c.sibling,c!==null){Ws=c;return}Ws=c=o}while(c!==null);nn===0&&(nn=5)}function xl(o,c,p){var x=Wt,j=Yr.transition;try{Yr.transition=null,Wt=1,G4(o,c,p,x)}finally{Yr.transition=j,Wt=x}return null}function G4(o,c,p,x){do $c();while(go!==null);if((Jt&6)!==0)throw Error(s(327));p=o.finishedWork;var j=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0;var L=p.lanes|p.childLanes;if(ds(o,L),o===dn&&(Ws=dn=null,yn=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||rp||(rp=!0,qw(Hr,function(){return $c(),null})),L=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||L){L=Yr.transition,Yr.transition=null;var V=Wt;Wt=1;var Q=Jt;Jt|=4,sy.current=null,$4(o,p),Rw(p,o),u4(ux),ro=!!dx,ux=dx=null,o.current=p,O4(p),Kg(),Jt=Q,Wt=V,Yr.transition=L}else o.current=p;if(rp&&(rp=!1,go=o,ip=j),L=o.pendingLanes,L===0&&(fo=null),lm(p.stateNode),mr(o,ps()),c!==null)for(x=o.onRecoverableError,p=0;p<c.length;p++)j=c[p],x(j.value,{componentStack:j.stack,digest:j.digest});if(np)throw np=!1,o=iy,iy=null,o;return(ip&1)!==0&&o.tag!==0&&$c(),L=o.pendingLanes,(L&1)!==0?o===ay?bu++:(bu=0,ay=o):bu=0,uo(),null}function $c(){if(go!==null){var o=so(ip),c=Yr.transition,p=Wt;try{if(Yr.transition=null,Wt=16>o?16:o,go===null)var x=!1;else{if(o=go,go=null,ip=0,(Jt&6)!==0)throw Error(s(331));var j=Jt;for(Jt|=4,Qe=o.current;Qe!==null;){var L=Qe,V=L.child;if((Qe.flags&16)!==0){var Q=L.deletions;if(Q!==null){for(var X=0;X<Q.length;X++){var me=Q[X];for(Qe=me;Qe!==null;){var ke=Qe;switch(ke.tag){case 0:case 11:case 15:xu(8,ke,L)}var Ae=ke.child;if(Ae!==null)Ae.return=ke,Qe=Ae;else for(;Qe!==null;){ke=Qe;var Se=ke.sibling,We=ke.return;if(Tw(ke),ke===me){Qe=null;break}if(Se!==null){Se.return=We,Qe=Se;break}Qe=We}}}var Xe=L.alternate;if(Xe!==null){var Ye=Xe.child;if(Ye!==null){Xe.child=null;do{var Vs=Ye.sibling;Ye.sibling=null,Ye=Vs}while(Ye!==null)}}Qe=L}}if((L.subtreeFlags&2064)!==0&&V!==null)V.return=L,Qe=V;else e:for(;Qe!==null;){if(L=Qe,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:xu(9,L,L.return)}var le=L.sibling;if(le!==null){le.return=L.return,Qe=le;break e}Qe=L.return}}var ee=o.current;for(Qe=ee;Qe!==null;){V=Qe;var ue=V.child;if((V.subtreeFlags&2064)!==0&&ue!==null)ue.return=V,Qe=ue;else e:for(V=ee;Qe!==null;){if(Q=Qe,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:ep(9,Q)}}catch(et){Ms(Q,Q.return,et)}if(Q===V){Qe=null;break e}var Le=Q.sibling;if(Le!==null){Le.return=Q.return,Qe=Le;break e}Qe=Q.return}}if(Jt=j,uo(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(el,o)}catch(et){}x=!0}return x}finally{Wt=p,Yr.transition=c}}return!1}function Hw(o,c,p){c=Dc(p,c),c=lw(o,c,1),o=mo(o,c,1),c=Xn(),o!==null&&(eo(o,1,c),mr(o,c))}function Ms(o,c,p){if(o.tag===3)Hw(o,o,p);else for(;c!==null;){if(c.tag===3){Hw(c,o,p);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(fo===null||!fo.has(x))){o=Dc(p,o),o=cw(c,o,1),c=mo(c,o,1),o=Xn(),c!==null&&(eo(c,1,o),mr(c,o));break}}c=c.return}}function W4(o,c,p){var x=o.pingCache;x!==null&&x.delete(c),c=Xn(),o.pingedLanes|=o.suspendedLanes&p,dn===o&&(yn&p)===p&&(nn===4||nn===3&&(yn&130023424)===yn&&500>ps()-ry?gl(o,0):ny|=p),mr(o,c)}function Gw(o,c){c===0&&((o.mode&1)===0?c=1:(c=lc,lc<<=1,(lc&130023424)===0&&(lc=4194304)));var p=Xn();o=xa(o,c),o!==null&&(eo(o,c,p),mr(o,p))}function q4(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),Gw(o,p)}function K4(o,c){var p=0;switch(o.tag){case 13:var x=o.stateNode,j=o.memoizedState;j!==null&&(p=j.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(c),Gw(o,p)}var Ww;Ww=function(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps||cr.current)ur=!0;else{if((o.lanes&p)===0&&(c.flags&128)===0)return ur=!1,D4(o,c,p);ur=(o.flags&131072)!==0}else ur=!1,Ss&&(c.flags&1048576)!==0&&N_(c,Fm,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Jm(o,c),o=c.pendingProps;var j=Cc(c,Ln.current);Rc(c,p),j=Dx(null,c,x,o,j,p);var L=Mx();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,dr(x)?(L=!0,Lm(c)):L=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Tx(c),j.updater=Xm,c.stateNode=j,j._reactInternals=c,Ux(c,x,o,p),c=Wx(null,c,x,!0,L,p)):(c.tag=0,Ss&&L&&yx(c),Qn(null,c,j,p),c=c.child),c;case 16:x=c.elementType;e:{switch(Jm(o,c),o=c.pendingProps,j=x._init,x=j(x._payload),c.type=x,j=c.tag=X4(x),o=xi(x,o),j){case 0:c=Gx(null,c,x,o,p);break e;case 1:c=yw(null,c,x,o,p);break e;case 11:c=mw(null,c,x,o,p);break e;case 14:c=pw(null,c,x,xi(x.type,o),p);break e}throw Error(s(306,x,""))}return c;case 0:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:xi(x,j),Gx(o,c,x,j,p);case 1:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:xi(x,j),yw(o,c,x,j,p);case 3:e:{if(vw(c),o===null)throw Error(s(387));x=c.pendingProps,L=c.memoizedState,j=L.element,L_(o,c),zm(c,x,null,p);var V=c.memoizedState;if(x=V.element,L.isDehydrated)if(L={element:x,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){j=Dc(Error(s(423)),c),c=bw(o,c,x,p,j);break e}else if(x!==j){j=Dc(Error(s(424)),c),c=bw(o,c,x,p,j);break e}else for(Pr=oo(c.stateNode.containerInfo.firstChild),Ir=c,Ss=!0,gi=null,p=P_(c,null,x,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ac(),x===j){c=va(o,c,p);break e}Qn(o,c,x,p)}c=c.child}return c;case 5:return F_(c),o===null&&_x(c),x=c.type,j=c.pendingProps,L=o!==null?o.memoizedProps:null,V=j.children,hx(x,j)?V=null:L!==null&&hx(x,L)&&(c.flags|=32),xw(o,c),Qn(o,c,V,p),c.child;case 6:return o===null&&_x(c),null;case 13:return _w(o,c,p);case 4:return Ex(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=Ic(c,null,x,p):Qn(o,c,x,p),c.child;case 11:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:xi(x,j),mw(o,c,x,j,p);case 7:return Qn(o,c,c.pendingProps,p),c.child;case 8:return Qn(o,c,c.pendingProps.children,p),c.child;case 12:return Qn(o,c,c.pendingProps.children,p),c.child;case 10:e:{if(x=c.type._context,j=c.pendingProps,L=c.memoizedProps,V=j.value,fs(Om,x._currentValue),x._currentValue=V,L!==null)if(fi(L.value,V)){if(L.children===j.children&&!cr.current){c=va(o,c,p);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var Q=L.dependencies;if(Q!==null){V=L.child;for(var X=Q.firstContext;X!==null;){if(X.context===x){if(L.tag===1){X=ya(-1,p&-p),X.tag=2;var me=L.updateQueue;if(me!==null){me=me.shared;var ke=me.pending;ke===null?X.next=X:(X.next=ke.next,ke.next=X),me.pending=X}}L.lanes|=p,X=L.alternate,X!==null&&(X.lanes|=p),kx(L.return,p,c),Q.lanes|=p;break}X=X.next}}else if(L.tag===10)V=L.type===c.type?null:L.child;else if(L.tag===18){if(V=L.return,V===null)throw Error(s(341));V.lanes|=p,Q=V.alternate,Q!==null&&(Q.lanes|=p),kx(V,p,c),V=L.sibling}else V=L.child;if(V!==null)V.return=L;else for(V=L;V!==null;){if(V===c){V=null;break}if(L=V.sibling,L!==null){L.return=V.return,V=L;break}V=V.return}L=V}Qn(o,c,j.children,p),c=c.child}return c;case 9:return j=c.type,x=c.pendingProps.children,Rc(c,p),j=Qr(j),x=x(j),c.flags|=1,Qn(o,c,x,p),c.child;case 14:return x=c.type,j=xi(x,c.pendingProps),j=xi(x.type,j),pw(o,c,x,j,p);case 15:return fw(o,c,c.type,c.pendingProps,p);case 17:return x=c.type,j=c.pendingProps,j=c.elementType===x?j:xi(x,j),Jm(o,c),c.tag=1,dr(x)?(o=!0,Lm(c)):o=!1,Rc(c,p),aw(c,x,j),Ux(c,x,j,p),Wx(null,c,x,!0,o,p);case 19:return jw(o,c,p);case 22:return gw(o,c,p)}throw Error(s(156,c.tag))};function qw(o,c){return ac(o,c)}function Q4(o,c,p,x){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(o,c,p,x){return new Q4(o,c,p,x)}function hy(o){return o=o.prototype,!(!o||!o.isReactComponent)}function X4(o){if(typeof o=="function")return hy(o)?1:0;if(o!=null){if(o=o.$$typeof,o===B)return 11;if(o===H)return 14}return 2}function vo(o,c){var p=o.alternate;return p===null?(p=Jr(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function cp(o,c,p,x,j,L){var V=2;if(x=o,typeof o=="function")hy(o)&&(V=1);else if(typeof o=="string")V=5;else e:switch(o){case k:return yl(p.children,j,L,c);case _:V=8,j|=8;break;case A:return o=Jr(12,p,c,j|2),o.elementType=A,o.lanes=L,o;case $:return o=Jr(13,p,c,j),o.elementType=$,o.lanes=L,o;case W:return o=Jr(19,p,c,j),o.elementType=W,o.lanes=L,o;case K:return dp(p,j,L,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:V=10;break e;case P:V=9;break e;case B:V=11;break e;case H:V=14;break e;case q:V=16,x=null;break e}throw Error(s(130,o==null?o:typeof o,""))}return c=Jr(V,p,c,j),c.elementType=o,c.type=x,c.lanes=L,c}function yl(o,c,p,x){return o=Jr(7,o,x,c),o.lanes=p,o}function dp(o,c,p,x){return o=Jr(22,o,x,c),o.elementType=K,o.lanes=p,o.stateNode={isHidden:!1},o}function my(o,c,p){return o=Jr(6,o,null,c),o.lanes=p,o}function py(o,c,p){return c=Jr(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function Y4(o,c,p,x,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Za(0),this.expirationTimes=Za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.identifierPrefix=x,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function fy(o,c,p,x,j,L,V,Q,X){return o=new Y4(o,c,p,Q,X),c===1?(c=1,L===!0&&(c|=8)):c=0,L=Jr(3,null,null,c),o.current=L,L.stateNode=o,L.memoizedState={element:x,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tx(L),o}function J4(o,c,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:x==null?null:""+x,children:o,containerInfo:c,implementation:p}}function Kw(o){if(!o)return co;o=o._reactInternals;e:{if(Vt(o)!==o||o.tag!==1)throw Error(s(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(dr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(o.tag===1){var p=o.type;if(dr(p))return w_(o,p,c)}return c}function Qw(o,c,p,x,j,L,V,Q,X){return o=fy(p,x,!0,o,j,L,V,Q,X),o.context=Kw(null),p=o.current,x=Xn(),j=xo(p),L=ya(x,j),L.callback=c!=null?c:null,mo(p,L,j),o.current.lanes=j,eo(o,j,x),mr(o,x),o}function up(o,c,p,x){var j=c.current,L=Xn(),V=xo(j);return p=Kw(p),c.context===null?c.context=p:c.pendingContext=p,c=ya(L,V),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=mo(j,c,V),o!==null&&(bi(o,j,V,L),Um(o,j,V)),V}function hp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Xw(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function gy(o,c){Xw(o,c),(o=o.alternate)&&Xw(o,c)}function Z4(){return null}var Yw=typeof reportError=="function"?reportError:function(o){console.error(o)};function xy(o){this._internalRoot=o}mp.prototype.render=xy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));up(o,c,null,null)},mp.prototype.unmount=xy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;fl(function(){up(null,o,null,null)}),c[ma]=null}};function mp(o){this._internalRoot=o}mp.prototype.unstable_scheduleHydration=function(o){if(o){var c=mm();o={blockedOn:null,target:o,priority:c};for(var p=0;p<Mi.length&&c!==0&&c<Mi[p].priority;p++);Mi.splice(p,0,o),p===0&&gm(o)}};function yy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Jw(){}function eI(o,c,p,x,j){if(j){if(typeof x=="function"){var L=x;x=function(){var me=hp(V);L.call(me)}}var V=Qw(c,x,o,0,null,!1,!1,"",Jw);return o._reactRootContainer=V,o[ma]=V.current,ru(o.nodeType===8?o.parentNode:o),fl(),V}for(;j=o.lastChild;)o.removeChild(j);if(typeof x=="function"){var Q=x;x=function(){var me=hp(X);Q.call(me)}}var X=fy(o,0,!1,null,null,!1,!1,"",Jw);return o._reactRootContainer=X,o[ma]=X.current,ru(o.nodeType===8?o.parentNode:o),fl(function(){up(c,X,p,x)}),X}function fp(o,c,p,x,j){var L=p._reactRootContainer;if(L){var V=L;if(typeof j=="function"){var Q=j;j=function(){var X=hp(V);Q.call(X)}}up(c,V,o,j)}else V=eI(p,c,o,j,x);return hp(V)}um=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var p=Ja(c.pendingLanes);p!==0&&(to(c,p|1),mr(c,ps()),(Jt&6)===0&&(Bc=ps()+500,uo()))}break;case 13:fl(function(){var x=xa(o,1);if(x!==null){var j=Xn();bi(x,o,1,j)}}),gy(o,1)}},cc=function(o){if(o.tag===13){var c=xa(o,134217728);if(c!==null){var p=Xn();bi(c,o,134217728,p)}gy(o,134217728)}},hm=function(o){if(o.tag===13){var c=xo(o),p=xa(o,c);if(p!==null){var x=Xn();bi(p,o,c,x)}gy(o,c)}},mm=function(){return Wt},pm=function(o,c){var p=Wt;try{return Wt=o,c()}finally{Wt=p}},Ge=function(o,c,p){switch(c){case"input":if(Mt(o,p),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var x=p[c];if(x!==o&&x.form===o.form){var j=Pm(x);if(!j)throw Error(s(90));re(x),Mt(x,j)}}}break;case"textarea":at(o,p);break;case"select":c=p.value,c!=null&&Re(o,!!p.multiple,c,!1)}},li=cy,Ii=fl;var tI={usingClientEntryPoint:!1,Events:[ou,Nc,Pm,is,Rn,cy]},_u={findFiberByHostInstance:ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sI={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ud(o),o===null?null:o.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var gp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gp.isDisabled&&gp.supportsFiber)try{el=gp.inject(sI),Cr=gp}catch(o){}}return pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tI,pr.createPortal=function(o,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(c))throw Error(s(200));return J4(o,c,null,p)},pr.createRoot=function(o,c){if(!yy(o))throw Error(s(299));var p=!1,x="",j=Yw;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=fy(o,1,!1,null,null,p,!1,x,j),o[ma]=c.current,ru(o.nodeType===8?o.parentNode:o),new xy(c)},pr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=Ud(c),o=o===null?null:o.stateNode,o},pr.flushSync=function(o){return fl(o)},pr.hydrate=function(o,c,p){if(!pp(c))throw Error(s(200));return fp(null,o,c,!0,p)},pr.hydrateRoot=function(o,c,p){if(!yy(o))throw Error(s(405));var x=p!=null&&p.hydratedSources||null,j=!1,L="",V=Yw;if(p!=null&&(p.unstable_strictMode===!0&&(j=!0),p.identifierPrefix!==void 0&&(L=p.identifierPrefix),p.onRecoverableError!==void 0&&(V=p.onRecoverableError)),c=Qw(c,null,o,1,p!=null?p:null,j,!1,L,V),o[ma]=c.current,ru(o),x)for(o=0;o<x.length;o++)p=x[o],j=p._getVersion,j=j(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,j]:c.mutableSourceEagerHydrationData.push(p,j);return new mp(c)},pr.render=function(o,c,p){if(!pp(c))throw Error(s(200));return fp(null,o,c,!1,p)},pr.unmountComponentAtNode=function(o){if(!pp(o))throw Error(s(40));return o._reactRootContainer?(fl(function(){fp(null,null,o,!1,function(){o._reactRootContainer=null,o[ma]=null})}),!0):!1},pr.unstable_batchedUpdates=cy,pr.unstable_renderSubtreeIntoContainer=function(o,c,p,x){if(!pp(p))throw Error(s(200));if(o==null||o._reactInternals===void 0)throw Error(s(38));return fp(o,c,p,!1,x)},pr.version="18.3.1-next-f1338f8080-20240426",pr}var a2;function Jk(){if(a2)return _y.exports;a2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_y.exports=cI(),_y.exports}var o2;function dI(){if(o2)return xp;o2=1;var t=Jk();return xp.createRoot=t.createRoot,xp.hydrateRoot=t.hydrateRoot,xp}var uI=dI();const hI=G0(uI),vt=t=>typeof t=="string",ju=()=>{let t,e;const s=new Promise((r,i)=>{t=r,e=i});return s.resolve=t,s.reject=e,s},l2=t=>t==null?"":""+t,mI=(t,e,s)=>{t.forEach(r=>{e[r]&&(s[r]=e[r])})},pI=/###/g,c2=t=>t&&t.indexOf("###")>-1?t.replace(pI,"."):t,d2=t=>!t||vt(t),Gu=(t,e,s)=>{const r=vt(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(d2(t))return{};const a=c2(r[i]);!t[a]&&s&&(t[a]=new s),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return d2(t)?{}:{obj:t,k:c2(r[i])}},u2=(t,e,s)=>{const{obj:r,k:i}=Gu(t,e,Object);if(r!==void 0||e.length===1){r[i]=s;return}let a=e[e.length-1],l=e.slice(0,e.length-1),d=Gu(t,l,Object);for(;d.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),d=Gu(t,l,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${a}`]!="undefined"&&(d.obj=void 0);d.obj[`${d.k}.${a}`]=s},fI=(t,e,s,r)=>{const{obj:i,k:a}=Gu(t,e,Object);i[a]=i[a]||[],i[a].push(s)},bf=(t,e)=>{const{obj:s,k:r}=Gu(t,e);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},gI=(t,e,s)=>{const r=bf(t,s);return r!==void 0?r:bf(e,s)},Zk=(t,e,s)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?vt(t[r])||t[r]instanceof String||vt(e[r])||e[r]instanceof String?s&&(t[r]=e[r]):Zk(t[r],e[r],s):t[r]=e[r]);return t},Oc=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var xI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const yI=t=>vt(t)?t.replace(/[&<>"'\/]/g,e=>xI[e]):t;class vI{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const bI=[" ",",","?","!",";"],_I=new vI(20),wI=(t,e,s)=>{e=e||"",s=s||"";const r=bI.filter(l=>e.indexOf(l)<0&&s.indexOf(l)<0);if(r.length===0)return!0;const i=_I.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!i.test(t);if(!a){const l=t.indexOf(s);l>0&&!i.test(t.substring(0,l))&&(a=!0)}return a},Lv=(t,e,s=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(s);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let l,d="";for(let u=a;u<r.length;++u)if(u!==a&&(d+=s),d+=r[u],l=i[d],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=l}return i},ch=t=>t==null?void 0:t.replace("_","-"),jI={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var s,r;(r=(s=console==null?void 0:console[t])==null?void 0:s.apply)==null||r.call(s,console,e)}};let SI=class Dv{constructor(e,s={}){this.init(e,s)}init(e,s={}){this.prefix=s.prefix||"i18next:",this.logger=e||jI,this.options=s,this.debug=s.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,r,i){return i&&!this.debug?null:(vt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new Dv(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Dv(this.logger,e)}};var Ki=new SI;class ig{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(s)||0;this.observers[r].set(s,i+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e,...s){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i.apply(i,[e,...s])})}}class h2 extends ig{constructor(e,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,r,i={}){var h,m;const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,s],r&&(Array.isArray(r)?d.push(...r):vt(r)&&a?d.push(...r.split(a)):d.push(r)));const u=bf(this.data,d);return!u&&!s&&!r&&e.indexOf(".")>-1&&(e=d[0],s=d[1],r=d.slice(2).join(".")),u||!l||!vt(r)?u:Lv((m=(h=this.data)==null?void 0:h[e])==null?void 0:m[s],r,a)}addResource(e,s,r,i,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let d=[e,s];r&&(d=d.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(d=e.split("."),i=s,s=d[1]),this.addNamespaces(s),u2(this.data,d,i),a.silent||this.emit("added",e,s,r,i)}addResources(e,s,r,i={silent:!1}){for(const a in r)(vt(r[a])||Array.isArray(r[a]))&&this.addResource(e,s,a,r[a],{silent:!0});i.silent||this.emit("added",e,s,r)}addResourceBundle(e,s,r,i,a,l={silent:!1,skipCopy:!1}){let d=[e,s];e.indexOf(".")>-1&&(d=e.split("."),i=r,r=s,s=d[1]),this.addNamespaces(s);let u=bf(this.data,d)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Zk(u,r,a):u={...u,...r},u2(this.data,d,u),l.silent||this.emit("added",e,s,r)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var eC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,r,i){return t.forEach(a=>{var l,d;e=(d=(l=this.processors[a])==null?void 0:l.process(e,s,r,i))!=null?d:e}),e}};const tC=Symbol("i18next/PATH_KEY");function NI(){const t=[],e=Object.create(null);let s;return e.get=(r,i)=>{var a;return(a=s==null?void 0:s.revoke)==null||a.call(s),i===tC?t:(t.push(i),s=Proxy.revocable(r,e),s.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Mv(t,e){var r;const{[tC]:s}=t(NI());return s.join((r=e==null?void 0:e.keySeparator)!=null?r:".")}const m2={},p2=t=>!vt(t)&&typeof t!="boolean"&&typeof t!="number";class _f extends ig{constructor(e,s={}){super(),mI(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ki.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,s={interpolation:{}}){const r={...s};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!wI(e,r,i);if(l&&!d){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:vt(a)?[a]:a};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:vt(a)?[a]:a}}translate(e,s,r){let i=typeof s=="object"?{...s}:s;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Mv(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(e[e.length-1],i),h=u[u.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const g=i.lng||this.language,v=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode")return v?a?{res:`${h}${m}${d}`,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${m}${d}`:a?{res:d,usedKey:d,exactUsedKey:d,usedLng:g,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:d;const b=this.resolve(e,i);let N=b==null?void 0:b.res;const S=(b==null?void 0:b.usedKey)||d,C=(b==null?void 0:b.exactUsedKey)||d,R=["[object Number]","[object Function]","[object RegExp]"],M=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,y=i.count!==void 0&&!vt(i.count),w=_f.hasDefaultValue(i),D=y?this.pluralResolver.getSuffix(g,i.count,i):"",k=i.ordinal&&y?this.pluralResolver.getSuffix(g,i.count,{ordinal:!1}):"",_=y&&!i.ordinal&&i.count===0,A=_&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${D}`]||i[`defaultValue${k}`]||i.defaultValue;let F=N;T&&!N&&w&&(F=A);const P=p2(F),B=Object.prototype.toString.apply(F);if(T&&F&&P&&R.indexOf(B)<0&&!(vt(M)&&Array.isArray(F))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,F,{...i,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return a?(b.res=$,b.usedParams=this.getUsedParamsDetails(i),b):$}if(l){const $=Array.isArray(F),W=$?[]:{},H=$?C:S;for(const q in F)if(Object.prototype.hasOwnProperty.call(F,q)){const K=`${H}${l}${q}`;w&&!N?W[q]=this.translate(K,{...i,defaultValue:p2(A)?A[q]:void 0,joinArrays:!1,ns:u}):W[q]=this.translate(K,{...i,joinArrays:!1,ns:u}),W[q]===K&&(W[q]=F[q])}N=W}}else if(T&&vt(M)&&Array.isArray(N))N=N.join(M),N&&(N=this.extendTranslation(N,e,i,r));else{let $=!1,W=!1;!this.isValidLookup(N)&&w&&($=!0,N=A),this.isValidLookup(N)||(W=!0,N=d);const q=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&W?void 0:N,K=w&&A!==N&&this.options.updateMissing;if(W||$||K){if(this.logger.log(K?"updateKey":"missingKey",g,h,d,K?A:N),l){const U=this.resolve(d,{...i,keySeparator:!1});U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let G=[];const te=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&te&&te[0])for(let U=0;U<te.length;U++)G.push(te[U]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(i.lng||this.language):G.push(i.lng||this.language);const ne=(U,Z,he)=>{var fe;const ie=w&&he!==N?he:q;this.options.missingKeyHandler?this.options.missingKeyHandler(U,h,Z,ie,K,i):(fe=this.backendConnector)!=null&&fe.saveMissing&&this.backendConnector.saveMissing(U,h,Z,ie,K,i),this.emit("missingKey",U,h,Z,N)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?G.forEach(U=>{const Z=this.pluralResolver.getSuffixes(U,i);_&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Z.indexOf(`${this.options.pluralSeparator}zero`)<0&&Z.push(`${this.options.pluralSeparator}zero`),Z.forEach(he=>{ne([U],d+he,i[`defaultValue${he}`]||A)})}):ne(G,d,A))}N=this.extendTranslation(N,e,i,b,r),W&&N===d&&this.options.appendNamespaceToMissingKey&&(N=`${h}${m}${d}`),(W||$)&&this.options.parseMissingKeyHandler&&(N=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${m}${d}`:d,$?N:void 0,i))}return a?(b.res=N,b.usedParams=this.getUsedParamsDetails(i),b):N}extendTranslation(e,s,r,i,a){var u,h;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const m=vt(e)&&(((h=r==null?void 0:r.interpolation)==null?void 0:h.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(m){const b=e.match(this.interpolator.nestingRegexp);g=b&&b.length}let v=r.replace&&!vt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||i.usedLng,r),m){const b=e.match(this.interpolator.nestingRegexp),N=b&&b.length;g<N&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...b)=>(a==null?void 0:a[0])===b[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${b[0]} in key: ${s[0]}`),null):this.translate(...b,s),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,d=vt(l)?[l]:l;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=eC.handle(d,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,s={}){let r,i,a,l,d;return vt(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(u,s),m=h.key;i=m;let g=h.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const v=s.count!==void 0&&!vt(s.count),b=v&&!s.ordinal&&s.count===0,N=s.context!==void 0&&(vt(s.context)||typeof s.context=="number")&&s.context!=="",S=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);g.forEach(C=>{var R,M;this.isValidLookup(r)||(d=C,!m2[`${S[0]}-${C}`]&&((R=this.utils)!=null&&R.hasLoadedNamespace)&&!((M=this.utils)!=null&&M.hasLoadedNamespace(d))&&(m2[`${S[0]}-${C}`]=!0,this.logger.warn(`key "${i}" for languages "${S.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(T=>{var D;if(this.isValidLookup(r))return;l=T;const y=[m];if((D=this.i18nFormat)!=null&&D.addLookupKeys)this.i18nFormat.addLookupKeys(y,m,T,C,s);else{let k;v&&(k=this.pluralResolver.getSuffix(T,s.count,s));const _=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(s.ordinal&&k.indexOf(A)===0&&y.push(m+k.replace(A,this.options.pluralSeparator)),y.push(m+k),b&&y.push(m+_)),N){const F=`${m}${this.options.contextSeparator||"_"}${s.context}`;y.push(F),v&&(s.ordinal&&k.indexOf(A)===0&&y.push(F+k.replace(A,this.options.pluralSeparator)),y.push(F+k),b&&y.push(F+_))}}let w;for(;w=y.pop();)this.isValidLookup(r)||(a=w,r=this.getResource(T,C,w,s))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:l,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,r,i={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,s,r,i):this.resourceStore.getResource(e,s,r,i)}getUsedParamsDetails(e={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!vt(e.replace);let i=r?e.replace:e;if(r&&typeof e.count!="undefined"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of s)delete i[a]}return i}static hasDefaultValue(e){const s="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&s===r.substring(0,s.length)&&e[r]!==void 0)return!0;return!1}}class f2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ki.create("languageUtils")}getScriptPartFromCode(e){if(e=ch(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=ch(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(vt(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(r){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(r=>{if(s)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&e.forEach(r=>{if(s)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return s=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),vt(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let r=e[s];return r||(r=e[this.getScriptPartFromCode(s)]),r||(r=e[this.formatLanguageCode(s)]),r||(r=e[this.getLanguagePartFromCode(s)]),r||(r=e.default),r||[]}toResolveHierarchy(e,s){const r=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],e),i=[],a=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return vt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):vt(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&a(this.formatLanguageCode(l))}),i}}const g2={zero:0,one:1,two:2,few:3,many:4,other:5},x2={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kI{constructor(e,s={}){this.languageUtils=e,this.options=s,this.logger=Ki.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e,s={}){const r=ch(e==="dev"?"en":e),i=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:i})}catch(d){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),x2;if(!e.match(/-|_/))return x2;const u=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(u,s)}return this.pluralRulesCache[a]=l,l}needsPlural(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,s,r={}){return this.getSuffixes(e,r).map(i=>`${s}${i}`)}getSuffixes(e,s={}){let r=this.getRule(e,s);return r||(r=this.getRule("dev",s)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>g2[i]-g2[a]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,s,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",s,r))}}const y2=(t,e,s,r=".",i=!0)=>{let a=gI(t,e,s);return!a&&i&&vt(s)&&(a=Lv(t,s,r),a===void 0&&(a=Lv(e,s,r))),a},Sy=t=>t.replace(/\$/g,"$$$$");class CI{constructor(e={}){var s;this.logger=Ki.create("interpolator"),this.options=e,this.format=((s=e==null?void 0:e.interpolation)==null?void 0:s.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:l,suffix:d,suffixEscaped:u,formatSeparator:h,unescapeSuffix:m,unescapePrefix:g,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:N,nestingSuffixEscaped:S,nestingOptionsSeparator:C,maxReplaces:R,alwaysFormat:M}=e.interpolation;this.escape=s!==void 0?s:yI,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Oc(a):l||"{{",this.suffix=d?Oc(d):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=m?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=v?Oc(v):b||Oc("$t("),this.nestingSuffix=N?Oc(N):S||Oc(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=R||1e3,this.alwaysFormat=M!==void 0?M:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,r)=>(s==null?void 0:s.source)===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,s,r,i){var b;let a,l,d;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=N=>{if(N.indexOf(this.formatSeparator)<0){const M=y2(s,u,N,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(M,void 0,r,{...i,...s,interpolationkey:N}):M}const S=N.split(this.formatSeparator),C=S.shift().trim(),R=S.join(this.formatSeparator).trim();return this.format(y2(s,u,C,this.options.keySeparator,this.options.ignoreJSONStructure),R,r,{...i,...s,interpolationkey:C})};this.resetRegExp();const m=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=i==null?void 0:i.interpolation)==null?void 0:b.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:N=>Sy(N)},{regex:this.regexp,safeValue:N=>this.escapeValue?Sy(this.escape(N)):Sy(N)}].forEach(N=>{for(d=0;a=N.regex.exec(e);){const S=a[1].trim();if(l=h(S),l===void 0)if(typeof m=="function"){const R=m(e,a,i);l=vt(R)?R:""}else if(i&&Object.prototype.hasOwnProperty.call(i,S))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${e}`),l="";else!vt(l)&&!this.useRawValueToEscape&&(l=l2(l));const C=N.safeValue(l);if(e=e.replace(a[0],C),g?(N.regex.lastIndex+=l.length,N.regex.lastIndex-=a[0].length):N.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,s,r={}){let i,a,l;const d=(u,h)=>{var S;const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const g=u.split(new RegExp(`${m}[ ]*{`));let v=`{${g[1]}`;u=g[0],v=this.interpolate(v,l);const b=v.match(/'/g),N=v.match(/"/g);(((S=b==null?void 0:b.length)!=null?S:0)%2===0&&!N||N.length%2!==0)&&(v=v.replace(/'/g,'"'));try{l=JSON.parse(v),h&&(l={...h,...l})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,C),`${u}${m}${v}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];l={...r},l=l.replace&&!vt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(u=i[1].slice(h).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=s(d.call(this,i[1].trim(),l),l),a&&i[0]===e&&!vt(a))return a;vt(a)||(a=l2(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),u.length&&(a=u.reduce((m,g)=>this.format(m,g,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const TI=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(l=>{if(l){const[d,...u]=l.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),m=d.trim();s[m]||(s[m]=h),h==="false"&&(s[m]=!1),h==="true"&&(s[m]=!0),isNaN(h)||(s[m]=parseInt(h,10))}})}return{formatName:e,formatOptions:s}},v2=t=>{const e={};return(s,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const l=r+JSON.stringify(a);let d=e[l];return d||(d=t(ch(r),i),e[l]=d),d(s)}},EI=t=>(e,s,r)=>t(ch(s),r)(e);class AI{constructor(e={}){this.logger=Ki.create("formatter"),this.options=e,this.init(e)}init(e,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const r=s.cacheInBuiltFormats?v2:EI;this.formats={number:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a});return d=>l.format(d)}),currency:r((i,a)=>{const l=new Intl.NumberFormat(i,{...a,style:"currency"});return d=>l.format(d)}),datetime:r((i,a)=>{const l=new Intl.DateTimeFormat(i,{...a});return d=>l.format(d)}),relativetime:r((i,a)=>{const l=new Intl.RelativeTimeFormat(i,{...a});return d=>l.format(d,a.range||"day")}),list:r((i,a)=>{const l=new Intl.ListFormat(i,{...a});return d=>l.format(d)})}}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=v2(s)}format(e,s,r,i={}){const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(d=>d.indexOf(")")>-1)){const d=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,d)].join(this.formatSeparator)}return a.reduce((d,u)=>{var g;const{formatName:h,formatOptions:m}=TI(u);if(this.formats[h]){let v=d;try{const b=((g=i==null?void 0:i.formatParams)==null?void 0:g[i.interpolationkey])||{},N=b.locale||b.lng||i.locale||i.lng||r;v=this.formats[h](d,N,{...m,...i,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${h}`);return d},e)}}const II=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class PI extends ig{constructor(e,s,r,i={}){var a,l;super(),this.backend=e,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Ki.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(a=this.backend)==null?void 0:a.init)==null||l.call(a,r,i.backend,i)}queueLoad(e,s,r,i){const a={},l={},d={},u={};return e.forEach(h=>{let m=!0;s.forEach(g=>{const v=`${h}|${g}`;!r.reload&&this.store.hasResourceBundle(h,g)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?l[v]===void 0&&(l[v]=!0):(this.state[v]=1,m=!1,l[v]===void 0&&(l[v]=!0),a[v]===void 0&&(a[v]=!0),u[g]===void 0&&(u[g]=!0)))}),m||(d[h]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(u)}}loaded(e,s,r){const i=e.split("|"),a=i[0],l=i[1];s&&this.emit("failedLoading",a,l,s),!s&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&r&&(this.state[e]=0);const d={};this.queue.forEach(u=>{fI(u.loaded,[a],l),II(u,e),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{d[h]||(d[h]={});const m=u.loaded[h];m.length&&m.forEach(g=>{d[h][g]===void 0&&(d[h][g]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(u=>!u.done)}read(e,s,r,i=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:r,tried:i,wait:a,callback:l});return}this.readingCalls++;const d=(h,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(h&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,r,i+1,a*2,l)},a);return}l(h,m)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const h=u(e,s);h&&typeof h.then=="function"?h.then(m=>d(null,m)).catch(d):d(null,h)}catch(h){d(h)}return}return u(e,s,d)}prepareLoading(e,s,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();vt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),vt(s)&&(s=[s]);const a=this.queueLoad(e,s,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,s,r){this.prepareLoading(e,s,{},r)}reload(e,s,r){this.prepareLoading(e,s,{reload:!0},r)}loadOne(e,s=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(l,d)=>{l&&this.logger.warn(`${s}loading namespace ${a} for language ${i} failed`,l),!l&&d&&this.logger.log(`${s}loaded namespace ${a} for language ${i}`,d),this.loaded(e,l,d)})}saveMissing(e,s,r,i,a,l={},d=()=>{}){var u,h,m,g,v;if((h=(u=this.services)==null?void 0:u.utils)!=null&&h.hasLoadedNamespace&&!((g=(m=this.services)==null?void 0:m.utils)!=null&&g.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const b={...l,isUpdate:a},N=this.backend.create.bind(this.backend);if(N.length<6)try{let S;N.length===5?S=N(e,s,r,i,b):S=N(e,s,r,i),S&&typeof S.then=="function"?S.then(C=>d(null,C)).catch(d):d(null,S)}catch(S){d(S)}else N(e,s,r,i,d,b)}!e||!e[0]||this.store.addResource(e[0],s,r,i)}}}const b2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),vt(t[1])&&(e.defaultValue=t[1]),vt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(r=>{e[r]=s[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),_2=t=>{var e,s;return vt(t.ns)&&(t.ns=[t.ns]),vt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),vt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((s=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:s.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},yp=()=>{},RI=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class dh extends ig{constructor(e={},s){if(super(),this.options=_2(e),this.services={},this.logger=Ki,this.modules={external:[]},RI(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(e={},s){this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),e.defaultNS==null&&e.ns&&(vt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=b2();this.options={...r,...this.options,..._2(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Ki.init(i(this.modules.logger),this.options):Ki.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=AI;const m=new f2(this.options);this.store=new h2(this.options.resources,this.options);const g=this.services;g.logger=Ki,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new kI(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=i(h),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new CI(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new PI(i(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(b,...N)=>{this.emit(b,...N)}),this.modules.languageDetector&&(g.languageDetector=i(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=i(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new _f(this.services,this.options),this.translator.on("*",(b,...N)=>{this.emit(b,...N)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=yp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...m)=>this.store[h](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...m)=>(this.store[h](...m),this)});const d=ju(),u=()=>{const h=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(g),s(m,g)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),d}loadResources(e,s=yp){var a,l;let r=s;const i=vt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const d=[],u=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>u(m)),(l=(a=this.options.preload)==null?void 0:a.forEach)==null||l.call(a,h=>u(h)),this.services.backendConnector.load(d,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(h)})}else r(null)}reloadResources(e,s,r){const i=ju();return typeof e=="function"&&(r=e,e=void 0),typeof s=="function"&&(r=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),r||(r=yp),this.services.backendConnector.reload(e,s,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&eC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,s){this.isLanguageChangingTo=e;const r=ju();this.emit("languageChanging",e);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),s&&s(d,(...h)=>this.t(...h))},l=d=>{var m,g;!e&&!d&&this.services.languageDetector&&(d=[]);const u=vt(d)?d:d&&d[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(vt(d)?[d]:d);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),(g=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||g.call(m,h)),this.loadResources(h,v=>{a(v,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,r){const i=(a,l,...d)=>{let u;typeof l!="object"?u=this.options.overloadTranslationOptionHandler([a,l].concat(d)):u={...l},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let m;return u.keyPrefix&&Array.isArray(a)?m=a.map(g=>(typeof g=="function"&&(g=Mv(g,{...this.options,...l})),`${u.keyPrefix}${h}${g}`)):(typeof a=="function"&&(a=Mv(a,{...this.options,...l})),m=u.keyPrefix?`${u.keyPrefix}${h}${a}`:a),this.t(m,u)};return vt(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=r,i}t(...e){var s;return(s=this.translator)==null?void 0:s.translate(...e)}exists(...e){var s;return(s=this.translator)==null?void 0:s.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(d,u)=>{const h=this.services.backendConnector.state[`${d}|${u}`];return h===-1||h===0||h===2};if(s.precheck){const d=s.precheck(this,l);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(a,e)))}loadNamespaces(e,s){const r=ju();return this.options.ns?(vt(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),s&&s(i)}),r):(s&&s(),Promise.resolve())}loadLanguages(e,s){const r=ju();vt(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=i.concat(a),this.loadResources(l=>{r.resolve(),s&&s(l)}),r):(s&&s(),Promise.resolve())}dir(e){var i,a;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const d=l.getTextInfo();if(d&&d.direction)return d.direction}}catch(l){}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new f2(b2());return e.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},s){return new dh(e,s)}cloneInstance(e={},s=yp){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new dh(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(d=>{a[d]=this[d]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const d=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((m,g)=>(m[g]={...u[h][g]},m),u[h]),u),{});a.store=new h2(d,i),a.services.resourceStore=a.store}return a.translator=new _f(a.services,i),a.translator.on("*",(d,...u)=>{a.emit(d,...u)}),a.init(i,s),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const In=dh.createInstance();In.createInstance=dh.createInstance;In.createInstance;In.dir;In.init;In.loadResources;In.reloadResources;In.use;In.changeLanguage;In.getFixedT;In.t;In.exists;In.setDefaultNamespace;In.hasLoadedNamespace;In.loadNamespaces;In.loadLanguages;const LI=(t,e,s,r)=>{var a,l,d,u;const i=[s,{code:e,...r||{}}];if((l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Bl(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},w2={},Fv=(t,e,s,r)=>{Bl(s)&&w2[s]||(Bl(s)&&(w2[s]=new Date),LI(t,e,s,r))},sC=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},Bv=(t,e,s)=>{t.loadNamespaces(e,sC(t,s))},j2=(t,e,s,r)=>{if(Bl(s)&&(s=[s]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Bv(t,s,r);s.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,sC(t,r))},DI=(t,e,s={})=>!e.languages||!e.languages.length?(Fv(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Bl=t=>typeof t=="string",MI=t=>typeof t=="object"&&t!==null,FI=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,BI={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},$I=t=>BI[t],OI=t=>t.replace(FI,$I);let $v={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:OI};const VI=(t={})=>{$v={...$v,...t}},UI=()=>$v;let nC;const zI=t=>{nC=t},HI=()=>nC,GI={type:"3rdParty",init(t){VI(t.options.react),zI(t)}},WI=E.createContext();class qI{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const KI=(t,e)=>{const s=E.useRef();return E.useEffect(()=>{s.current=t},[t,e]),s.current},rC=(t,e,s,r)=>t.getFixedT(e,s,r),QI=(t,e,s,r)=>E.useCallback(rC(t,e,s,r),[t,e,s,r]),qo=(t,e={})=>{var y,w,D,k;const{i18n:s}=e,{i18n:r,defaultNS:i}=E.useContext(WI)||{},a=s||r||HI();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new qI),!a){Fv(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const _=(F,P)=>Bl(P)?P:MI(P)&&Bl(P.defaultValue)?P.defaultValue:Array.isArray(F)?F[F.length-1]:F,A=[_,{},!1];return A.t=_,A.i18n={},A.ready=!1,A}(y=a.options.react)!=null&&y.wait&&Fv(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...UI(),...a.options.react,...e},{useSuspense:d,keyPrefix:u}=l;let h=i||((w=a.options)==null?void 0:w.defaultNS);h=Bl(h)?[h]:h||["translation"],(k=(D=a.reportNamespaces).addUsedNamespaces)==null||k.call(D,h);const m=(a.isInitialized||a.initializedStoreOnce)&&h.every(_=>DI(_,a,l)),g=QI(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),v=()=>g,b=()=>rC(a,e.lng||null,l.nsMode==="fallback"?h:h[0],u),[N,S]=E.useState(v);let C=h.join();e.lng&&(C=`${e.lng}${C}`);const R=KI(C),M=E.useRef(!0);E.useEffect(()=>{const{bindI18n:_,bindI18nStore:A}=l;M.current=!0,!m&&!d&&(e.lng?j2(a,e.lng,h,()=>{M.current&&S(b)}):Bv(a,h,()=>{M.current&&S(b)})),m&&R&&R!==C&&M.current&&S(b);const F=()=>{M.current&&S(b)};return _&&(a==null||a.on(_,F)),A&&(a==null||a.store.on(A,F)),()=>{M.current=!1,a&&_&&(_==null||_.split(" ").forEach(P=>a.off(P,F))),A&&a&&A.split(" ").forEach(P=>a.store.off(P,F))}},[a,C]),E.useEffect(()=>{M.current&&m&&S(v)},[a,u,m]);const T=[N,a,m];if(T.t=N,T.i18n=a,T.ready=m,m||!m&&!d)return T;throw new Promise(_=>{e.lng?j2(a,e.lng,h,()=>_()):Bv(a,h,()=>_())})},XI={home:"Home",dashboard:"Dashboard",players:"Players",guilds:"Guilds",servers:"Servers",toplists:"Top Lists",oldscans:"Old Scans",favorites:"Favorites",notifications:"Notifications",imprint:"Imprint",privacy:"Privacy",license:"License",help:"Help",tools:"Tools",community:"Community"},YI={connectedCharacters:{title:"Connected characters",empty:"No characters linked yet. Link a character in your account to see it here.",loginPrompt:"Sign in to see your linked characters.",chip:{server:"Server",class:"Class"}}},JI={settings:{title:"Settings",subtitle:"Configure your personal preferences.",loading:"Loading settings...",error:"Could not load settings.",retry:"Retry",language:{label:"Preferred language"},defaultSection:{label:"Default section"},compactTables:{label:"Use compact table layout"},experimental:{label:"Enable experimental features"},save:"Save settings",saved:"Settings saved.",noChanges:"No changes to save.",saving:"Saving...",saveError:"Could not save settings. Please try again."},tools:{title:"Tools settings",subtitle:"Configure how tools behave for your account.",loading:"Loading tools settings...",loadError:"Could not load tools settings.",defaultSet:{label:"Default set ID",placeholder:"Enter a default set ID"},showIntro:{label:"Show tools intro"},experimental:{label:"Enable experimental tools"},save:{cta:"Save settings",saving:"Saving...",success:"Settings saved.",noChanges:"No changes to save.",error:"Could not save settings. Please try again."}}},ZI={banner:{guestTitle:"Unlock extra features with an account",guestDescription:"You can use all tools without an account. Sign in to enable cloud-synced sets, cross-set insights, and integrations with your SFDataHub profile.",guestLoginCta:"Sign in to unlock",accountTitle:"Extended tools features",accountComingSoon:"These features are in development and will roll out gradually.",featureSetComparison:"Compare your sets to find the best setups.",featureIntegration:"Link your sets with player profiles, guilds, and other modules.",featureCloudSync:"Sync your sets across devices with your SFDataHub account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Placeholder for future gem calculations.",dungeonPause:"Dummy view for dungeon pause tools.",xpDungeon:"Slide for XP dungeon planning."},sets:{defaultName:"New Set",exportActive:"Export active set",import:"Import set",importErrorInvalid:"This file does not contain a valid tools set.",importErrorMaxReached:"You already use the maximum of 3 sets. Delete one before importing a new one.",delete:"Delete set",deleteConfirmTitle:"Delete this set?",deleteConfirmText:"This will remove the set from your browser and free up a slot. Export it first if you want a backup.",deleteLastForbidden:"You need at least one set. Create a new one before deleting this.",rename:"Rename set",renameTitle:"Rename set",renameLabel:"Set name",renamePlaceholder:"Enter a name for this set",renameSave:"Save",renameCancel:"Cancel",renameErrorEmpty:"Please enter a name."},sync:{buttonSave:"Save changes to account",saving:"Saving",error:"Could not save your changes. Please try again.",statusUnsynced:"Unsynced changes",statusSynced:"All changes synced",statusNever:"Not synced yet",lastSyncLabel:"Last sync",noChanges:"No changes to save",cooldownLabel:"Next sync in {{time}}"}},eP={search:"Search?  /",settings:"Settings",profile:"Profile",signout:"Sign out",notifications:"Notifications",help:"Help",theme:"Theme",theme_light:"Light",theme_dark:"Dark",language:"Language",lang_en:"English",lang_de:"Deutsch"},tP={public:{title:"Public profile",subtitle:"Read-only showcase of this SFDataHub identity",identity:{profileIdLabel:"Profile ID",unknownValue:"Unknown",lastScanLabel:"Last scan",lastScanToday:"today",daysAgoSuffix:"days ago",dateUnknown:"Not available",mainCharacterLabel:"Main character",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Guild",portraitPlaceholder:"Portrait placeholder"},bio:{title:"About this player",empty:"This player has not added a bio yet.",languagesLabel:"Languages",rolesLabel:"Roles"},showcase:{title:"Character showcase",subtitle:"Curated roster pulled from the last verified scans",empty:"No characters selected for showcase yet.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archive",event:"Event"}},stats:{title:"SFDataHub activity",totalScans:"Total scans",uniquePlayers:"Unique players",uniqueGuilds:"Unique guilds",last30d:"Scans (30d)",topServersLabel:"Top servers",firstScanLabel:"First scan",empty:"No scan data available yet."},records:{title:"Records & milestones",empty:"No records or milestones have been registered yet.",type:{record:"Record",milestone:"Milestone"}},achievements:{title:"Achievements & badges",highlights:"Featured achievements",empty:"No achievements have been unlocked yet.",tiers:{gold:"Gold",silver:"Silver",bronze:"Bronze"}},roles:{guildleader:"Guild Leader",tryhard:"Tryhard"}}},sP={title:"Help & Overview",subtitle:"Quick guide to SFDataHub",hero:{eyebrow:"Start guide",heading:"Welcome to SFDataHub",lead:"Learn what you can do, how data freshness works, and where to find settings or legal info.",freshnessLabel:"Data freshness",freshnessBody:"Data is refreshed regularly. You will see the exact scan time directly inside top lists and profiles."},dataFreshness:{title:"How up to date is the data?",body:`SFDataHub relies on community scans. Some servers (for example many EU servers) are scanned roughly once per month by us and a few helpers  depending on our free time. Other servers (for example fusion servers) are scanned by other community projects and may have longer gaps between scans.

This means there can be several weeks or even months between two scans. You can always see the exact data age from the "Last scan: " hint in top lists and profiles.

If you want your own profile to be more up to date, you can link your SFDataHub account and upload your own scans. That way you keep your profile fresh and help the overall database stay more current for the whole community.`},sections:{intro:{title:"What is SFDataHub?",body1:"SFDataHub is a community project around Shakes & Fidget.",body2:"You can analyse scan data, browse top lists, and open detailed player and guild profiles. The goal: a quick overview of progress, rankings, and development  without any official connection to Playa Games."},actions:{title:"What can I do on SFDataHub?",items:{toplists:"Browse top lists: compare players and guilds by level or other metrics.",profiles:"Open profiles: view detailed player and guild profiles with extra information.",guides:"Read guides: use guides and tips to plan your progress.",tools:"Use tools & calculators: run interactive tools such as a dungeon XP calculator."}},freshness:{title:"How up to date is the data?",body1:"SFDataHub is based on scans uploaded or linked by the community.",body2:"Next to many values youll find the time of the last scan (for example Last scan: 2025-12-01).",body3:"Top lists and profiles are updated regularly. If an entry hasnt been scanned for a while, the displayed values might differ from the current state in the game."},login:{title:"Login & Settings",body1:"You can log in with your Discord account to unlock additional features.",body2:"After logging in youll see your profile menu with avatar and name in the header.",body3:"In the settings you can adjust basic options for your SFDataHub account.",body4:"Settings are only relevant for logged-in users  without an account theres nothing to configure."},legal:{title:"Help, feedback & legal information",body1:"If you notice bugs, strange data, or have ideas for new features, were happy to hear from you.",body2:"You can find contact options and more information on the contact or imprint page.",body3:"For legal details please use the linked pages:",items:{tos:"Terms of Service (ToS)",privacy:"Privacy Policy",imprint:"Imprint / Contact"}}}},nP={quota:{unlimited:"No limit"}},rP={about:{title:"About SFDataHub",body:`SFDataHub is a non-commercial fan and community project around Shakes & Fidget. It has no official connection to Playa Games GmbH or the operators of Shakes & Fidget.

All mentioned brands, logos and graphics are the property of their respective owners and are used for identification purposes only.`},shortDisclaimer:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners.",copyright:" 2025 SFDataHub  community project around Shakes & Fidget."},iP={nav:XI,sidebar:YI,account:JI,tools:ZI,topbar:eP,profile:tP,help:sP,uploadCenter:nP,footer:rP},aP={home:"Start",dashboard:"Dashboard",players:"Spieler",guilds:"Gilden",servers:"Server",toplists:"Top-Listen",oldscans:"Alte Scans",favorites:"Favoriten",notifications:"Benachrichtigungen",imprint:"Impressum",privacy:"Datenschutz",license:"Lizenzen",help:"Hilfe",tools:"Tools",community:"Community"},oP={connectedCharacters:{title:"Verknuepfte Charaktere",empty:"Noch keine Charaktere verknuepft. Verknuepfe einen Charakter in deinem Account, damit er hier erscheint.",loginPrompt:"Bitte einloggen, um verknuepfte Charaktere zu sehen.",chip:{server:"Server",class:"Klasse"}}},lP={settings:{title:"Einstellungen",subtitle:"Passe deine persoenlichen Praeferenzen an.",loading:"Einstellungen werden geladen...",error:"Einstellungen konnten nicht geladen werden.",retry:"Erneut versuchen",language:{label:"Bevorzugte Sprache"},defaultSection:{label:"Standardbereich"},compactTables:{label:"Kompaktes Tabellen-Layout nutzen"},experimental:{label:"Experimentelle Features aktivieren"},save:"Einstellungen speichern",saved:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",saving:"Speichern...",saveError:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."},tools:{title:"Tool-Einstellungen",subtitle:"Konfiguriere, wie die Tools fr deinen Account arbeiten.",loading:"Tool-Einstellungen werden geladen...",loadError:"Tool-Einstellungen konnten nicht geladen werden.",defaultSet:{label:"Standard-Set-ID",placeholder:"Standard-Set-ID eingeben"},showIntro:{label:"Tools-Intro anzeigen"},experimental:{label:"Experimentelle Tools aktivieren"},save:{cta:"Einstellungen speichern",saving:"Speichern...",success:"Einstellungen gespeichert.",noChanges:"Keine Aenderungen zum Speichern.",error:"Einstellungen konnten nicht gespeichert werden. Bitte erneut versuchen."}}},cP={banner:{guestTitle:"Zusatzfunktionen mit Account freischalten",guestDescription:"Du kannst alle Tools ohne Account nutzen. Mit einem Login schaltest du zusaetzlich cloud-synchronisierte Sets, Set-Analysen und Integrationen mit deinem SFDataHub-Profil frei.",guestLoginCta:"Einloggen und freischalten",accountTitle:"Erweiterte Tool-Funktionen",accountComingSoon:"Diese Funktionen sind in Entwicklung und werden nach und nach freigeschaltet.",featureSetComparison:"Vergleiche deine Sets, um die besten Setups zu finden.",featureIntegration:"Verknuepfe deine Sets mit Spielerprofilen, Gilden und weiteren Modulen.",featureCloudSync:"Nutze deine Sets auf mehreren Geraeten mit deinem SFDataHub-Account."},labels:{gemSim:"Gem Simulator",dungeonPause:"Dungeon Pause",xpDungeon:"XP Dungeon"},descriptions:{gemSim:"Platzhalter fuer kuenftige Gem-Berechnungen.",dungeonPause:"Dummy-Ansicht fuer Dungeon-Pausen-Tools.",xpDungeon:"Slide fuer XP-Run-Planung."},sets:{defaultName:"Neues Set",exportActive:"Aktives Set exportieren",import:"Set importieren",importErrorInvalid:"Diese Datei enthlt kein gltiges Tools-Set.",importErrorMaxReached:"Du nutzt bereits das Maximum von 3 Sets. Lsche zuerst ein Set, bevor du ein neues importierst.",delete:"Set l?schen",deleteConfirmTitle:"Dieses Set l?schen?",deleteConfirmText:"Damit wird das Set in diesem Browser entfernt und ein Slot freigegeben. Exportiere es zuerst, wenn du ein Backup behalten m?chtest.",deleteLastForbidden:"Du ben?tigst mindestens ein Set. Erstelle zuerst ein neues, bevor du dieses l?schst.",rename:"Set umbenennen",renameTitle:"Set umbenennen",renameLabel:"Set-Name",renamePlaceholder:"Name f?r dieses Set eingeben",renameSave:"Speichern",renameCancel:"Abbrechen",renameErrorEmpty:"Bitte einen Namen eingeben."},sync:{buttonSave:"nderungen im Account speichern",saving:"Speichere ",error:"Deine nderungen konnten nicht gespeichert werden. Bitte versuche es erneut.",statusUnsynced:"Nicht gespeicherte nderungen",statusSynced:"Alle nderungen synchronisiert",statusNever:"Noch nie synchronisiert",lastSyncLabel:"Letzte Synchronisierung",noChanges:"Keine nderungen zum Speichern",cooldownLabel:"Nchster Sync in {{time}}"}},dP={search:"Suchen?  /",settings:"Einstellungen",profile:"Profil",signout:"Abmelden",notifications:"Benachrichtigungen",help:"Hilfe",theme:"Theme",theme_light:"Hell",theme_dark:"Dunkel",language:"Sprache",lang_en:"English",lang_de:"Deutsch"},uP={public:{title:"ffentliches Profil",subtitle:"Read-only-Ansicht dieser SFDataHub-Identitt",identity:{profileIdLabel:"Profil-ID",unknownValue:"Unbekannt",lastScanLabel:"Letzter Scan",lastScanToday:"heute",daysAgoSuffix:"Tage her",dateUnknown:"Keine Angabe",mainCharacterLabel:"Hauptcharakter",levelShort:"Lv.",serverLabel:"Server",guildLabel:"Gilde",portraitPlaceholder:"Portrait-Platzhalter"},bio:{title:"ber diesen Spieler",empty:"Noch kein Bio-Text hinterlegt.",languagesLabel:"Sprachen",rolesLabel:"Rollen"},showcase:{title:"Charakter-Showcase",subtitle:"Kuratiertes Roster aus den letzten Scans",empty:"Noch keine Charaktere fr den Showcase ausgewhlt.",scrapbookLabel:"Scrapbook",highlightLabel:"Highlight",tags:{main:"Main",alt:"Alt",archive:"Archiv",event:"Event"}},stats:{title:"SFDataHub-Aktivitt",totalScans:"Scans gesamt",uniquePlayers:"Einzigartige Spieler",uniqueGuilds:"Einzigartige Gilden",last30d:"Scans (30T)",topServersLabel:"Top-Server",firstScanLabel:"Erster Scan",empty:"Noch keine Scan-Daten vorhanden."},records:{title:"Records & Meilensteine",empty:"Noch keine Records oder Meilensteine erfasst.",type:{record:"Record",milestone:"Meilenstein"}},achievements:{title:"Erfolge & Badges",highlights:"Highlight-Erfolge",empty:"Noch keine Erfolge freigeschaltet.",tiers:{gold:"Gold",silver:"Silber",bronze:"Bronze"}},roles:{guildleader:"Gildenleiter",tryhard:"Tryhard"}}},hP={title:"Hilfe & bersicht",subtitle:"Kurzer Einstieg in den SFDataHub",hero:{eyebrow:"Start-Guide",heading:"Willkommen im SFDataHub",lead:"Erfahre, was du tun kannst, wie aktuell die Daten sind und wo du Einstellungen oder rechtliche Infos findest.",freshnessLabel:"Datenaktualitt",freshnessBody:"Daten werden regelmig aktualisiert. Den genauen Scan-Zeitpunkt siehst du direkt in Toplisten und Profilen."},dataFreshness:{title:"Wie aktuell sind die Daten?",body:`SFDataHub lebt von Community-Scans. Ein Teil der Server (z. B. die europischen Server) wird von uns und ein paar Helfern ungefhr einmal im Monat gescannt  je nachdem, wie wir Zeit haben. Andere Server (z. B. Fusion-Server) werden von anderen Community-Projekten in greren Abstnden gescannt.

Dadurch knnen zwischen zwei Scans auch mehrere Wochen oder sogar Monate liegen. Den genauen Stand siehst du immer am Hinweis Last scan:  in Toplisten und Profilen.

Wenn du dein Profil besonders aktuell halten mchtest, kannst du dich mit deinem SFDataHub-Account verbinden und eigene Scans hochladen. So hilfst du gleichzeitig mit, dass die Datenbank aktueller bleibt  fr dich selbst und fr die Community.`},sections:{intro:{title:"Was ist SFDataHub?",body1:"SFDataHub ist ein Community-Projekt rund um Shakes & Fidget.",body2:"Du kannst hier Spielerdaten aus Scans auswerten, Toplisten ansehen und detaillierte Spieler- und Gildenprofile ffnen. Ziel ist ein schneller berblick ber Fortschritt, Rankings und Entwicklungen  ohne offizielle Verbindung zu Playa Games."},actions:{title:"Was kann ich auf SFDataHub tun?",items:{toplists:"Toplisten ansehen: Vergleiche Spieler und Gilden nach Level oder anderen Werten.",profiles:"Profile ffnen: Schaue dir detaillierte Spieler- und Gildenprofile mit mehr Informationen an.",guides:"Guides lesen: Nutze Anleitungen und Tipps, um dein Spiel besser zu planen.",tools:"Tools & Rechner verwenden: Berechne z. B. Dungeon-XP oder andere Werte mit interaktiven Tools."}},freshness:{title:"Wie aktuell sind die Daten?",body1:"SFDataHub basiert auf Scans, die von der Community hochgeladen oder verbunden werden.",body2:"Neben vielen Werten findest du einen Hinweis auf den Zeitpunkt des letzten Scans (z. B. Last scan: 2025-12-01).",body3:"Toplisten und Profile werden regelmig aktualisiert. Wenn ein Eintrag lngere Zeit nicht gescannt wurde, knnen die angezeigten Werte vom aktuellen Stand im Spiel abweichen."},login:{title:"Login & Einstellungen",body1:"Du kannst dich mit deinem Discord-Account anmelden, um zustzliche Funktionen nutzen zu knnen.",body2:"Nach dem Login siehst du oben dein Profilmen mit Avatar und Namen.",body3:"In den Einstellungen kannst du grundlegende Optionen fr deinen SFDataHub-Account anpassen.",body4:"Einstellungen sind nur fr eingeloggte Nutzer relevant  ohne Account musst du hier nichts konfigurieren."},legal:{title:"Hilfe, Feedback & rechtliche Infos",body1:"Wenn dir Fehler auffallen, Daten komisch aussehen oder du Ideen fr neue Features hast, freuen wir uns ber Feedback.",body2:"Du findest unsere Kontaktmglichkeiten und weitere Infos auf der Kontakt- oder Impressumsseite.",body3:"Fr rechtliche Details nutze bitte die verlinkten Seiten:",items:{tos:"Terms of Service (ToS)",privacy:"Datenschutz",imprint:"Impressum / Kontakt"}}}},mP={quota:{unlimited:"Kein Limit"}},pP={about:{title:"ber SFDataHub",body:`SFDataHub ist ein nicht-kommerzielles Fan- und Community-Projekt rund um Shakes & Fidget. Es besteht keine offizielle Verbindung zu Playa Games GmbH oder den Betreibern von Shakes & Fidget.

Alle genannten Marken, Logos und Grafiken sind Eigentum der jeweiligen Rechteinhaber und werden ausschlielich zu identifizierenden Zwecken verwendet.`},shortDisclaimer:"SFDataHub ist ein inoffizielles, nicht-kommerzielles Fanprojekt. Alle Marken und Bilder gehren ihren jeweiligen Rechteinhabern.",copyright:" 2025 SFDataHub  Community-Projekt rund um Shakes & Fidget."},fP={nav:aP,sidebar:oP,account:lP,tools:cP,topbar:dP,profile:uP,help:hP,uploadCenter:mP,footer:pP},gP={en:{translation:iP},de:{translation:fP}};In.use(GI).init({resources:gP,fallbackLng:"en",lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});function yt(t,e="en"){return In.t(t,{lng:e})}/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var S2="popstate";function xP(t={}){function e(i,a){let{pathname:l="/",search:d="",hash:u=""}=Xl(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ov("",{pathname:l,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");d=h===-1?u:u.slice(0,h)}return d+"#"+(typeof a=="string"?a:uh(a))}function r(i,a){Or(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return vP(e,s,r,t)}function Cs(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function Or(t,e){if(!t){typeof console!="undefined"&&console.warn(e);try{throw new Error(e)}catch(s){}}}function yP(){return Math.random().toString(36).substring(2,10)}function N2(t,e){return{usr:t.state,key:t.key,idx:e}}function Ov(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xl(e):e,state:s,key:e&&e.key||r||yP()}}function uh({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Xl(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function vP(t,e,s,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",u=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){d="POP";let C=m(),R=C==null?null:C-h;h=C,u&&u({action:d,location:S.location,delta:R})}function v(C,R){d="PUSH";let M=Ov(S.location,C,R);s&&s(M,C),h=m()+1;let T=N2(M,h),y=S.createHref(M);try{l.pushState(T,"",y)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(y)}a&&u&&u({action:d,location:S.location,delta:1})}function b(C,R){d="REPLACE";let M=Ov(S.location,C,R);s&&s(M,C),h=m();let T=N2(M,h),y=S.createHref(M);l.replaceState(T,"",y),a&&u&&u({action:d,location:S.location,delta:0})}function N(C){return bP(C)}let S={get action(){return d},get location(){return t(i,l)},listen(C){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(S2,g),u=C,()=>{i.removeEventListener(S2,g),u=null}},createHref(C){return e(i,C)},createURL:N,encodeLocation(C){let R=N(C);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:b,go(C){return l.go(C)}};return S}function bP(t,e=!1){let s="http://localhost";typeof window!="undefined"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Cs(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:uh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function iC(t,e,s="/"){return _P(t,e,s,!1)}function _P(t,e,s,r){let i=typeof e=="string"?Xl(e):e,a=Ba(i.pathname||"/",s);if(a==null)return null;let l=aC(t);wP(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=RP(a);d=IP(l[u],h,r)}return d}function aC(t,e=[],s=[],r="",i=!1){let a=(l,d,u=i,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;Cs(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Da([r,m.relativePath]),v=s.concat(m);l.children&&l.children.length>0&&(Cs(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),aC(l.children,e,v,g,u)),!(l.path==null&&!l.index)&&e.push({path:g,score:EP(g,l.index),routesMeta:v})};return t.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))a(l,d);else for(let h of oC(l.path))a(l,d,!0,h)}),e}function oC(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=oC(r.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),i&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function wP(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:AP(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var jP=/^:[\w-]+$/,SP=3,NP=2,kP=1,CP=10,TP=-2,k2=t=>t==="*";function EP(t,e){let s=t.split("/"),r=s.length;return s.some(k2)&&(r+=TP),e&&(r+=NP),s.filter(i=>!k2(i)).reduce((i,a)=>i+(jP.test(a)?SP:a===""?kP:CP),r)}function AP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function IP(t,e,s=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],h=d===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=wf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),v=u.route;if(!g&&h&&s&&!r[r.length-1].route.index&&(g=wf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Da([a,g.pathname]),pathnameBase:FP(Da([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Da([a,g.pathnameBase]))}return l}function wf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=PP(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},v)=>{if(m==="*"){let N=d[v]||"";l=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const b=d[v];return g&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:t}}function PP(t,e=!1,s=!0){Or(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ba(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function LP(t,e="/"){let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?Xl(t):t;return{pathname:s?s.startsWith("/")?s:DP(s,e):e,search:BP(r),hash:$P(i)}}function DP(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Ny(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MP(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function q0(t){let e=MP(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function K0(t,e,s,r=!1){let i;typeof t=="string"?i=Xl(t):(i={...t},Cs(!i.pathname||!i.pathname.includes("?"),Ny("?","pathname","search",i)),Cs(!i.pathname||!i.pathname.includes("#"),Ny("#","pathname","hash",i)),Cs(!i.search||!i.search.includes("#"),Ny("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=s;else{let g=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?e[g]:"/"}let u=LP(i,d),h=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var Da=t=>t.join("/").replace(/\/\/+/g,"/"),FP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$P=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var lC=["POST","PUT","PATCH","DELETE"];new Set(lC);var VP=["GET",...lC];new Set(VP);var Ad=E.createContext(null);Ad.displayName="DataRouter";var ag=E.createContext(null);ag.displayName="DataRouterState";E.createContext(!1);var cC=E.createContext({isTransitioning:!1});cC.displayName="ViewTransition";var UP=E.createContext(new Map);UP.displayName="Fetchers";var zP=E.createContext(null);zP.displayName="Await";var Ei=E.createContext(null);Ei.displayName="Navigation";var Ih=E.createContext(null);Ih.displayName="Location";var ai=E.createContext({outlet:null,matches:[],isDataRoute:!1});ai.displayName="Route";var Q0=E.createContext(null);Q0.displayName="RouteError";function HP(t,{relative:e}={}){Cs(Id(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=E.useContext(Ei),{hash:i,pathname:a,search:l}=Ph(t,{relative:e}),d=a;return s!=="/"&&(d=a==="/"?s:Da([s,a])),r.createHref({pathname:d,search:l,hash:i})}function Id(){return E.useContext(Ih)!=null}function jr(){return Cs(Id(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ih).location}var dC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uC(t){E.useContext(Ei).static||E.useLayoutEffect(t)}function oi(){let{isDataRoute:t}=E.useContext(ai);return t?iR():GP()}function GP(){Cs(Id(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(Ad),{basename:e,navigator:s}=E.useContext(Ei),{matches:r}=E.useContext(ai),{pathname:i}=jr(),a=JSON.stringify(q0(r)),l=E.useRef(!1);return uC(()=>{l.current=!0}),E.useCallback((u,h={})=>{if(Or(l.current,dC),!l.current)return;if(typeof u=="number"){s.go(u);return}let m=K0(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Da([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,a,i,t])}var WP=E.createContext(null);function qP(t){let e=E.useContext(ai).outlet;return e&&E.createElement(WP.Provider,{value:t},e)}function og(){let{matches:t}=E.useContext(ai),e=t[t.length-1];return e?e.params:{}}function Ph(t,{relative:e}={}){let{matches:s}=E.useContext(ai),{pathname:r}=jr(),i=JSON.stringify(q0(s));return E.useMemo(()=>K0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function KP(t,e){return hC(t,e)}function hC(t,e,s,r,i){var M;Cs(Id(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=E.useContext(Ei),{matches:l}=E.useContext(ai),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let T=g&&g.path||"";mC(h,!g||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let v=jr(),b;if(e){let T=typeof e=="string"?Xl(e):e;Cs(m==="/"||((M=T.pathname)==null?void 0:M.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=v;let N=b.pathname||"/",S=N;if(m!=="/"){let T=m.replace(/^\//,"").split("/");S="/"+N.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=iC(t,{pathname:S});Or(g||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Or(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=ZP(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:Da([m,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?m:Da([m,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),l,s,r,i);return e&&R?E.createElement(Ih.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},R):R}function QP(){let t=rR(),e=OP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),s?E.createElement("pre",{style:i},s):null,l)}var XP=E.createElement(QP,null),YP=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(ai.Provider,{value:this.props.routeContext},E.createElement(Q0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JP({routeContext:t,match:e,children:s}){let r=E.useContext(Ad);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ai.Provider,{value:t},s)}function ZP(t,e=[],s=null,r=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,l=s==null?void 0:s.errors;if(l!=null){let h=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Cs(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let d=!1,u=-1;if(s)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:v}=s,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){d=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,m,g)=>{let v,b=!1,N=null,S=null;s&&(v=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||XP,d&&(u<0&&g===0?(mC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):u===g&&(b=!0,S=m.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,g+1)),R=()=>{let M;return v?M=N:b?M=S:m.route.Component?M=E.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=h,E.createElement(JP,{match:m,routeContext:{outlet:h,matches:C,isDataRoute:s!=null},children:M})};return s&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?E.createElement(YP,{location:s.location,revalidation:s.revalidation,component:N,error:v,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):R()},null)}function X0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eR(t){let e=E.useContext(Ad);return Cs(e,X0(t)),e}function tR(t){let e=E.useContext(ag);return Cs(e,X0(t)),e}function sR(t){let e=E.useContext(ai);return Cs(e,X0(t)),e}function Y0(t){let e=sR(t),s=e.matches[e.matches.length-1];return Cs(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function nR(){return Y0("useRouteId")}function rR(){var r;let t=E.useContext(Q0),e=tR("useRouteError"),s=Y0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function iR(){let{router:t}=eR("useNavigate"),e=Y0("useNavigate"),s=E.useRef(!1);return uC(()=>{s.current=!0}),E.useCallback(async(i,a={})=>{Or(s.current,dC),s.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var C2={};function mC(t,e,s){!e&&!C2[t]&&(C2[t]=!0,Or(!1,s))}E.memo(aR);function aR({routes:t,future:e,state:s,unstable_onError:r}){return hC(t,void 0,s,r,e)}function El({to:t,replace:e,state:s,relative:r}){Cs(Id(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=E.useContext(Ei);Or(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=E.useContext(ai),{pathname:l}=jr(),d=oi(),u=K0(t,q0(a),l,r==="path"),h=JSON.stringify(u);return E.useEffect(()=>{d(JSON.parse(h),{replace:e,state:s,relative:r})},[d,h,r,e,s]),null}function pC(t){return qP(t.context)}function xe(t){Cs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oR({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:i,static:a=!1}){Cs(!Id(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof s=="string"&&(s=Xl(s));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:v="default"}=s,b=E.useMemo(()=>{let N=Ba(u,l);return N==null?null:{location:{pathname:N,search:h,hash:m,state:g,key:v},navigationType:r}},[l,u,h,m,g,v,r]);return Or(b!=null,`<Router basename="${l}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:E.createElement(Ei.Provider,{value:d},E.createElement(Ih.Provider,{children:e,value:b}))}function lR({children:t,location:e}){return KP(Vv(t),e)}function Vv(t,e=[]){let s=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let a=[...e,i];if(r.type===E.Fragment){s.push.apply(s,Vv(r.props.children,a));return}Cs(r.type===xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cs(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Vv(r.props.children,a)),s.push(l)}),s}var Qp="get",Xp="application/x-www-form-urlencoded";function lg(t){return t!=null&&typeof t.tagName=="string"}function cR(t){return lg(t)&&t.tagName.toLowerCase()==="button"}function dR(t){return lg(t)&&t.tagName.toLowerCase()==="form"}function uR(t){return lg(t)&&t.tagName.toLowerCase()==="input"}function hR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mR(t,e){return t.button===0&&(!e||e==="_self")&&!hR(t)}function Uv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function pR(t,e){let s=Uv(t);return e&&e.forEach((r,i)=>{s.has(i)||e.getAll(i).forEach(a=>{s.append(i,a)})}),s}var vp=null;function fR(){if(vp===null)try{new FormData(document.createElement("form"),0),vp=!1}catch(t){vp=!0}return vp}var gR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ky(t){return t!=null&&!gR.has(t)?(Or(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xp}"`),null):t}function xR(t,e){let s,r,i,a,l;if(dR(t)){let d=t.getAttribute("action");r=d?Ba(d,e):null,s=t.getAttribute("method")||Qp,i=ky(t.getAttribute("enctype"))||Xp,a=new FormData(t)}else if(cR(t)||uR(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||d.getAttribute("action");if(r=u?Ba(u,e):null,s=t.getAttribute("formmethod")||d.getAttribute("method")||Qp,i=ky(t.getAttribute("formenctype"))||ky(d.getAttribute("enctype"))||Xp,a=new FormData(d,t),!fR()){let{name:h,type:m,value:g}=t;if(m==="image"){let v=h?`${h}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else h&&a.append(h,g)}}else{if(lg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Qp,r=null,i=Xp,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:s.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J0(t,e){if(t===!1||t===null||typeof t=="undefined")throw new Error(e)}function yR(t,e,s){let r=typeof t=="string"?new URL(t,typeof window=="undefined"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${s}`:e&&Ba(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function vR(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _R(t,e,s){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await vR(a,s);return l.links?l.links():[]}return[]}));return NR(r.flat(1).filter(bR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function T2(t,e,s,r,i,a){let l=(u,h)=>s[h]?u.route.id!==s[h].route.id:!0,d=(u,h)=>{var m;return s[h].pathname!==u.pathname||((m=s[h].route.path)==null?void 0:m.endsWith("*"))&&s[h].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,h)=>l(u,h)||d(u,h)):a==="data"?e.filter((u,h)=>{var g;let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=s[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function wR(t,e,{includeHydrateFallback:s}={}){return jR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function jR(t){return[...new Set(t)]}function SR(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function NR(t,e){let s=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(SR(i));return s.has(a)||(s.add(a),r.push({key:a,link:i})),r},[])}function fC(){let t=E.useContext(Ad);return J0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kR(){let t=E.useContext(ag);return J0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Z0=E.createContext(void 0);Z0.displayName="FrameworkContext";function gC(){let t=E.useContext(Z0);return J0(t,"You must render this element inside a <HydratedRouter> element"),t}function CR(t,e){let s=E.useContext(Z0),[r,i]=E.useState(!1),[a,l]=E.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,v=E.useRef(null);E.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=R=>{R.forEach(M=>{l(M.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),E.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let b=()=>{i(!0)},N=()=>{i(!1),l(!1)};return s?t!=="intent"?[a,v,{}]:[a,v,{onFocus:Su(d,b),onBlur:Su(u,N),onMouseEnter:Su(h,b),onMouseLeave:Su(m,N),onTouchStart:Su(g,b)}]:[!1,v,{}]}function Su(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function TR({page:t,...e}){let{router:s}=fC(),r=E.useMemo(()=>iC(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?E.createElement(AR,{page:t,matches:r,...e}):null}function ER(t){let{manifest:e,routeModules:s}=gC(),[r,i]=E.useState([]);return E.useEffect(()=>{let a=!1;return _R(t,e,s).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,s]),r}function AR({page:t,matches:e,...s}){let r=jr(),{manifest:i,routeModules:a}=gC(),{basename:l}=fC(),{loaderData:d,matches:u}=kR(),h=E.useMemo(()=>T2(t,e,u,i,r,"data"),[t,e,u,i,r]),m=E.useMemo(()=>T2(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=E.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,S=!1;if(e.forEach(R=>{var T;let M=i.routes[R.route.id];!M||!M.hasLoader||(!h.some(y=>y.route.id===R.route.id)&&R.route.id in d&&((T=a[R.route.id])!=null&&T.shouldRevalidate)||M.hasClientLoader?S=!0:N.add(R.route.id))}),N.size===0)return[];let C=yR(t,l,"data");return S&&N.size>0&&C.searchParams.set("_routes",e.filter(R=>N.has(R.route.id)).map(R=>R.route.id).join(",")),[C.pathname+C.search]},[l,d,r,i,h,e,t,a]),v=E.useMemo(()=>wR(m,i),[m,i]),b=ER(m);return E.createElement(E.Fragment,null,g.map(N=>E.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...s})),v.map(N=>E.createElement("link",{key:N,rel:"modulepreload",href:N,...s})),b.map(({key:N,link:S})=>E.createElement("link",{key:N,nonce:s.nonce,...S})))}function IR(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var xC=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";try{xC&&(window.__reactRouterVersion="7.9.1")}catch(t){}function PR({basename:t,children:e,window:s}){let r=E.useRef();r.current==null&&(r.current=xP({window:s,v5Compat:!0}));let i=r.current,[a,l]=E.useState({action:i.action,location:i.location}),d=E.useCallback(u=>{E.startTransition(()=>l(u))},[l]);return E.useLayoutEffect(()=>i.listen(d),[i,d]),E.createElement(oR,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rs=E.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:u,to:h,preventScrollReset:m,viewTransition:g,...v},b){let{basename:N}=E.useContext(Ei),S=typeof h=="string"&&yC.test(h),C,R=!1;if(typeof h=="string"&&S&&(C=h,xC))try{let A=new URL(window.location.href),F=h.startsWith("//")?new URL(A.protocol+h):new URL(h),P=Ba(F.pathname,N);F.origin===A.origin&&P!=null?h=P+F.search+F.hash:R=!0}catch(A){Or(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=HP(h,{relative:i}),[T,y,w]=CR(r,v),D=DR(h,{replace:l,state:d,target:u,preventScrollReset:m,relative:i,viewTransition:g});function k(A){e&&e(A),A.defaultPrevented||D(A)}let _=E.createElement("a",{...v,...w,href:C||M,onClick:R||a?e:k,ref:IR(b,y),target:u,"data-discover":!S&&s==="render"?"true":void 0});return T&&!S?E.createElement(E.Fragment,null,_,E.createElement(TR,{page:M})):_});rs.displayName="Link";var Ns=E.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:u,...h},m){let g=Ph(l,{relative:h.relative}),v=jr(),b=E.useContext(ag),{navigator:N,basename:S}=E.useContext(Ei),C=b!=null&&OR(g)&&d===!0,R=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,M=v.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(M=M.toLowerCase(),T=T?T.toLowerCase():null,R=R.toLowerCase()),T&&S&&(T=Ba(T,S)||T);const y=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let w=M===R||!i&&M.startsWith(R)&&M.charAt(y)==="/",D=T!=null&&(T===R||!i&&T.startsWith(R)&&T.charAt(R.length)==="/"),k={isActive:w,isPending:D,isTransitioning:C},_=w?e:void 0,A;typeof r=="function"?A=r(k):A=[r,w?"active":null,D?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(k):a;return E.createElement(rs,{...h,"aria-current":_,className:A,ref:m,style:F,to:l,viewTransition:d},typeof u=="function"?u(k):u)});Ns.displayName="NavLink";var RR=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:i,state:a,method:l=Qp,action:d,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:g,...v},b)=>{let N=BR(),S=$R(d,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&yC.test(d),M=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let y=T.nativeEvent.submitter,w=(y==null?void 0:y.getAttribute("formmethod"))||l;N(y||T.currentTarget,{fetcherKey:e,method:w,navigate:s,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:g})};return E.createElement("form",{ref:b,method:C,action:S,onSubmit:r?u:M,...v,"data-discover":!R&&t==="render"?"true":void 0})});RR.displayName="Form";function LR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(t){let e=E.useContext(Ad);return Cs(e,LR(t)),e}function DR(t,{target:e,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=oi(),u=jr(),h=Ph(t,{relative:a});return E.useCallback(m=>{if(mR(m,e)){m.preventDefault();let g=s!==void 0?s:uh(u)===uh(h);d(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,d,h,s,r,e,t,i,a,l])}function Yl(t){Or(typeof URLSearchParams!="undefined","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(Uv(t)),s=E.useRef(!1),r=jr(),i=E.useMemo(()=>pR(r.search,s.current?null:e.current),[r.search]),a=oi(),l=E.useCallback((d,u)=>{const h=Uv(typeof d=="function"?d(new URLSearchParams(i)):d);s.current=!0,a("?"+h,u)},[a,i]);return[i,l]}var MR=0,FR=()=>`__${String(++MR)}__`;function BR(){let{router:t}=vC("useSubmit"),{basename:e}=E.useContext(Ei),s=nR();return E.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:u,body:h}=xR(r,e);if(i.navigate===!1){let m=i.fetcherKey||FR();await t.fetch(m,s,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:s,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,s])}function $R(t,{relative:e}={}){let{basename:s}=E.useContext(Ei),r=E.useContext(ai);Cs(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Ph(t||".",{relative:e})},l=jr();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),u=d.getAll("index");if(u.some(m=>m==="")){d.delete("index"),u.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:Da([s,a.pathname])),uh(a)}function OR(t,{relative:e}={}){let s=E.useContext(cC);Cs(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vC("useViewTransitionState"),i=Ph(t,{relative:e});if(!s.isTransitioning)return!1;let a=Ba(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=Ba(s.nextLocation.pathname,r)||s.nextLocation.pathname;return wf(i.pathname,l)!=null||wf(i.pathname,a)!=null}var VR=Jk();const UR=G0(VR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),E2=t=>{const e=HR(t);return e.charAt(0).toUpperCase()+e.slice(1)},bC=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),GR=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},u)=>E.createElement("svg",{ref:u,...WR,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:bC("lucide",i),...!a&&!GR(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,m])=>E.createElement(h,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,e)=>{const s=E.forwardRef(({className:r,...i},a)=>E.createElement(qR,{ref:a,iconNode:e,className:bC(`lucide-${zR(E2(t))}`,`lucide-${t}`,r),...i}));return s.displayName=E2(t),s};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],cg=mt("aperture",KR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],XR=mt("arrow-up-right",QR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JR=mt("ban",YR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],eL=mt("bell",ZR);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],sL=mt("book-open",tL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rL=mt("chart-column",nL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],aL=mt("chevron-right",iL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wu=mt("circle-alert",oL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cL=mt("circle-check",lL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Yp=mt("circle-dot",dL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hL=mt("circle-user-round",uL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pL=mt("clock-3",mL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],gL=mt("cloud-upload",fL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yL=mt("compass",xL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],bL=mt("database",vL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],_C=mt("diamond",_L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jL=mt("file-text",wL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],NL=mt("folder-search",SL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],CL=mt("globe",kL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],wC=mt("hexagon",TL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],AL=mt("house",EL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],PL=mt("layers",IL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LL=mt("layout-dashboard",RL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mo=mt("loader-circle",DL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],FL=mt("messages-square",ML);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],$L=mt("pencil",BL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],VL=mt("pin-off",OL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],zL=mt("pin",UL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],dg=mt("refresh-ccw",HL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],WL=mt("scroll-text",GL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zv=mt("search",qL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"m10.852 14.772-.383.923",key:"11vil6"}],["path",{d:"M13.148 14.772a3 3 0 1 0-2.296-5.544l-.383-.923",key:"1v3clb"}],["path",{d:"m13.148 9.228.383-.923",key:"t2zzyc"}],["path",{d:"m13.53 15.696-.382-.924a3 3 0 1 1-2.296-5.544",key:"1bxfiv"}],["path",{d:"m14.772 10.852.923-.383",key:"k9m8cz"}],["path",{d:"m14.772 13.148.923.383",key:"1xvhww"}],["path",{d:"M4.5 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-.5",key:"tn8das"}],["path",{d:"M4.5 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-.5",key:"1g2pve"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"m9.228 10.852-.923-.383",key:"1wtb30"}],["path",{d:"m9.228 13.148-.923.383",key:"1a830x"}]],QL=mt("server-cog",KL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YL=mt("settings",XL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],jC=mt("shapes",JL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],SC=mt("shield-alert",ZL);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],t6=mt("shield-check",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],NC=mt("shield-off",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Jl=mt("shield",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]],i6=mt("square-activity",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],o6=mt("star",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],c6=mt("sticky-note",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],u6=mt("trash-2",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e1=mt("triangle-alert",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],p6=mt("trophy",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],g6=mt("upload",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ug=mt("users",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],v6=mt("wrench",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kC=mt("zap",b6),_6="_topbar_1lc6k_3",w6="_topbarLeft_1lc6k_39",j6="_searchWrap_1lc6k_55",S6="_topbarRight_1lc6k_109",N6="_ico_1lc6k_125",k6="_btnIco_1lc6k_139",C6="_pill_1lc6k_173",T6="_pillActive_1lc6k_195",E6="_onlyExpanded_1lc6k_203",A6="_topbarNav_1lc6k_205",I6="_topbarLink_1lc6k_215",P6="_upload_1lc6k_225",R6="_label_1lc6k_255",L6="_avatarBtn_1lc6k_261",D6="_avatar_1lc6k_261",M6="_avatarSpinnerShell_1lc6k_289",F6="_avatarSpinner_1lc6k_289",B6="_srOnly_1lc6k_325",$6="_accountRoot_1lc6k_351",O6="_accountDropdown_1lc6k_359",V6="_accountHeader_1lc6k_389",U6="_accountName_1lc6k_401",z6="_accountSub_1lc6k_413",H6="_accountStatusText_1lc6k_423",G6="_accountPrimary_1lc6k_433",W6="_accountHint_1lc6k_455",q6="_accountItem_1lc6k_465",K6="_accountDivider_1lc6k_495",Q6="_accountMiniAvatar_1lc6k_507",X6="_accountLogout_1lc6k_519",Rt={topbar:_6,topbarLeft:w6,searchWrap:j6,topbarRight:S6,ico:N6,btnIco:k6,pill:C6,pillActive:T6,onlyExpanded:E6,topbarNav:A6,topbarLink:I6,upload:P6,label:R6,avatarBtn:L6,avatar:D6,avatarSpinnerShell:M6,avatarSpinner:F6,srOnly:B6,accountRoot:$6,accountDropdown:O6,accountHeader:V6,accountName:U6,accountSub:z6,accountStatusText:H6,accountPrimary:G6,accountHint:W6,accountItem:q6,accountDivider:K6,accountMiniAvatar:Q6,accountLogout:X6},aa="https://auth.sfdatahub.com",Y6=`${aa}/auth/firebase-token`;async function J6(){var r,i;const t=await fetch(Y6,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch firebase token: ${t.status}`);const e=await t.json(),s=(i=e==null?void 0:e.firebaseToken)!=null?i:(r=e==null?void 0:e.tokens)==null?void 0:r.firebase;if(!s)throw new Error("Firebase token missing in response");return s}var A2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},Z6=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],l=t[s++],d=t[s++],u=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[s++],l=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},TC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=a>>2,g=(a&3)<<4|d>>4;let v=(d&15)<<2|h>>6,b=h&63;u||(b=64,l||(v=64)),r.push(s[m],s[g],s[v],s[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],d=i<t.length?s[t.charAt(i)]:0;++i;const h=i<t.length?s[t.charAt(i)]:64;++i;const g=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||d==null||h==null||g==null)throw new eD;const v=a<<2|d>>4;if(r.push(v),h!==64){const b=d<<4&240|h>>2;if(r.push(b),g!==64){const N=h<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tD=function(t){const e=CC(t);return TC.encodeByteArray(e,!0)},jf=function(t){return tD(t).replace(/\./g,"")},EC=function(t){try{return TC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=()=>sD().__FIREBASE_DEFAULTS__,rD=()=>{if(typeof process=="undefined"||typeof A2=="undefined")return;const t=A2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iD=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const e=t&&EC(t[1]);return e&&JSON.parse(e)},hg=()=>{try{return nD()||rD()||iD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AC=t=>{var e,s;return(s=(e=hg())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},aD=t=>{const e=AC(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},IC=()=>{var t;return(t=hg())===null||t===void 0?void 0:t.config},PC=t=>{var e;return(e=hg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jf(JSON.stringify(s)),jf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cD(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function dD(){var t;const e=(t=hg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(s){return!1}}function uD(){return typeof navigator!="undefined"&&navigator.userAgent==="Cloudflare-Workers"}function hD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pD(){const t=Hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fD(){return!dD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gD(){try{return typeof indexedDB=="object"}catch(t){return!1}}function xD(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="FirebaseError";class Ka extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=yD,Object.setPrototypeOf(this,Ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rh.prototype.create)}}class Rh{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?vD(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Ka(i,d,r)}}function vD(t,e){return t.replace(bD,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bD=/\{\$([^}]+)}/g;function _D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sf(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(I2(a)&&I2(l)){if(!Sf(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function I2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wD(t,e){const s=new jD(t,e);return s.subscribe.bind(s)}class jD{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");SD(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Cy),i.error===void 0&&(i.error=Cy),i.complete===void 0&&(i.complete=Cy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(l){}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SD(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function Cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class Ul{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new oD;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CD(e))try{this.getOrInitializeService({instanceIdentifier:Al})}catch(s){}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch(a){}}}}clearInstance(e=Al){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Al){return this.instances.has(e)}getOptions(e=Al){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,s){var r;const i=this.normalizeInstanceIdentifier(s),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch(a){}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kD(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Al){return this.component?this.component.multipleInstances?e:Al:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kD(t){return t===Al?void 0:t}function CD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new ND(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const ED={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},AD=Kt.INFO,ID={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},PD=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ID[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t1{constructor(e){this.name=e,this._logLevel=AD,this._logHandler=PD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ED[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const RD=(t,e)=>e.some(s=>t instanceof s);let P2,R2;function LD(){return P2||(P2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DD(){return R2||(R2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RC=new WeakMap,Hv=new WeakMap,LC=new WeakMap,Ty=new WeakMap,s1=new WeakMap;function MD(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{s(Fo(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(s=>{s instanceof IDBCursor&&RC.set(s,t)}).catch(()=>{}),s1.set(e,t),e}function FD(t){if(Hv.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{s(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Hv.set(t,e)}let Gv={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Hv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LC.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Fo(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BD(t){Gv=t(Gv)}function $D(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(Ey(this),e,...s);return LC.set(r,e.sort?e.sort():[e]),Fo(r)}:DD().includes(t)?function(...e){return t.apply(Ey(this),e),Fo(RC.get(this))}:function(...e){return Fo(t.apply(Ey(this),e))}}function OD(t){return typeof t=="function"?$D(t):(t instanceof IDBTransaction&&FD(t),RD(t,LD())?new Proxy(t,Gv):t)}function Fo(t){if(t instanceof IDBRequest)return MD(t);if(Ty.has(t))return Ty.get(t);const e=OD(t);return e!==t&&(Ty.set(t,e),s1.set(e,t)),e}const Ey=t=>s1.get(t);function VD(t,e,{blocked:s,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Fo(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Fo(l.result),u.oldVersion,u.newVersion,Fo(l.transaction),u)}),s&&l.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const UD=["get","getKey","getAll","getAllKeys","count"],zD=["put","add","delete","clear"],Ay=new Map;function L2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ay.get(e))return Ay.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=zD.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UD.includes(s)))return;const a=async function(l,...d){const u=this.transaction(l,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[s](...d),i&&u.done]))[0]};return Ay.set(e,a),a}BD(t=>({...t,get:(e,s,r)=>L2(e,s)||t.get(e,s,r),has:(e,s)=>!!L2(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(GD(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function GD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wv="@firebase/app",D2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new t1("@firebase/app"),WD="@firebase/app-compat",qD="@firebase/analytics-compat",KD="@firebase/analytics",QD="@firebase/app-check-compat",XD="@firebase/app-check",YD="@firebase/auth",JD="@firebase/auth-compat",ZD="@firebase/database",e8="@firebase/data-connect",t8="@firebase/database-compat",s8="@firebase/functions",n8="@firebase/functions-compat",r8="@firebase/installations",i8="@firebase/installations-compat",a8="@firebase/messaging",o8="@firebase/messaging-compat",l8="@firebase/performance",c8="@firebase/performance-compat",d8="@firebase/remote-config",u8="@firebase/remote-config-compat",h8="@firebase/storage",m8="@firebase/storage-compat",p8="@firebase/firestore",f8="@firebase/vertexai-preview",g8="@firebase/firestore-compat",x8="firebase",y8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="[DEFAULT]",v8={[Wv]:"fire-core",[WD]:"fire-core-compat",[KD]:"fire-analytics",[qD]:"fire-analytics-compat",[XD]:"fire-app-check",[QD]:"fire-app-check-compat",[YD]:"fire-auth",[JD]:"fire-auth-compat",[ZD]:"fire-rtdb",[e8]:"fire-data-connect",[t8]:"fire-rtdb-compat",[s8]:"fire-fn",[n8]:"fire-fn-compat",[r8]:"fire-iid",[i8]:"fire-iid-compat",[a8]:"fire-fcm",[o8]:"fire-fcm-compat",[l8]:"fire-perf",[c8]:"fire-perf-compat",[d8]:"fire-rc",[u8]:"fire-rc-compat",[h8]:"fire-gcs",[m8]:"fire-gcs-compat",[p8]:"fire-fst",[g8]:"fire-fst-compat",[f8]:"fire-vertex","fire-js":"fire-js",[x8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,b8=new Map,Kv=new Map;function M2(t,e){try{t.container.addComponent(e)}catch(s){$a.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function pd(t){const e=t.name;if(Kv.has(e))return $a.debug(`There were multiple attempts to register component ${e}.`),!1;Kv.set(e,t);for(const s of hh.values())M2(s,t);for(const s of b8.values())M2(s,t);return!0}function n1(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Ea(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new Rh("app","Firebase",_8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ul("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=y8;function DC(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bo.create("bad-app-name",{appName:String(i)});if(s||(s=IC()),!s)throw Bo.create("no-options");const a=hh.get(i);if(a){if(Sf(s,a.options)&&Sf(r,a.config))return a;throw Bo.create("duplicate-app",{appName:i})}const l=new TD(i);for(const u of Kv.values())l.addComponent(u);const d=new w8(s,r,l);return hh.set(i,d),d}function r1(t=qv){const e=hh.get(t);if(!e&&t===qv&&IC())return DC();if(!e)throw Bo.create("no-app",{appName:t});return e}function j8(){return Array.from(hh.values())}function $o(t,e,s){var r;let i=(r=v8[t])!==null&&r!==void 0?r:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$a.warn(d.join(" "));return}pd(new Ul(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8="firebase-heartbeat-database",N8=1,mh="firebase-heartbeat-store";let Iy=null;function MC(){return Iy||(Iy=VD(S8,N8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mh)}catch(s){console.warn(s)}}}}).catch(t=>{throw Bo.create("idb-open",{originalErrorMessage:t.message})})),Iy}async function k8(t){try{const s=(await MC()).transaction(mh),r=await s.objectStore(mh).get(FC(t));return await s.done,r}catch(e){if(e instanceof Ka)$a.warn(e.message);else{const s=Bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$a.warn(s.message)}}}async function F2(t,e){try{const r=(await MC()).transaction(mh,"readwrite");await r.objectStore(mh).put(e,FC(t)),await r.done}catch(s){if(s instanceof Ka)$a.warn(s.message);else{const r=Bo.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});$a.warn(r.message)}}}function FC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=1024,T8=720*60*60*1e3;class E8{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new I8(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const d=new Date(l.date).valueOf();return Date.now()-d<=T8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$a.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=B2(),{heartbeatsToSend:r,unsentEntries:i}=A8(this._heartbeatsCache.heartbeats),a=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return $a.warn(s),""}}}function B2(){return new Date().toISOString().substring(0,10)}function A8(t,e=C8){const s=[];let r=t.slice();for(const i of t){const a=s.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),$2(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),$2(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class I8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gD()?xD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await k8(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return F2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return F2(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $2(t){return jf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){pd(new Ul("platform-logger",e=>new HD(e),"PRIVATE")),pd(new Ul("heartbeat",e=>new E8(e),"PRIVATE")),$o(Wv,D2,t),$o(Wv,D2,"esm2017"),$o("fire-js","")}P8("");var R8="firebase",L8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$o(R8,L8,"app");function i1(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function BC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D8=BC,$C=new Rh("auth","Firebase",BC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new t1("@firebase/auth");function M8(t,...e){Nf.logLevel<=Kt.WARN&&Nf.warn(`Auth (${Pd}): ${t}`,...e)}function Jp(t,...e){Nf.logLevel<=Kt.ERROR&&Nf.error(`Auth (${Pd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,...e){throw a1(t,...e)}function Qi(t,...e){return a1(t,...e)}function OC(t,e,s){const r=Object.assign(Object.assign({},D8()),{[e]:s});return new Rh("auth","Firebase",r).create(e,{appName:t.name})}function Oo(t){return OC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a1(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return $C.create(t,...e)}function bt(t,e,...s){if(!t)throw a1(e,...s)}function Aa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jp(e),new Error(e)}function Va(t,e){t||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function F8(){return O2()==="http:"||O2()==="https:"}function O2(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F8()||hD()||"connection"in navigator)?navigator.onLine:!0}function $8(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,s){this.shortDelay=e,this.longDelay=s,Va(s>e,"Short delay should be less than long delay!"),this.isMobile=cD()||mD()}get(){return B8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e){Va(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;if(typeof globalThis!="undefined"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch!="undefined")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;if(typeof globalThis!="undefined"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers!="undefined")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;if(typeof globalThis!="undefined"&&globalThis.Response)return globalThis.Response;if(typeof Response!="undefined")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=new Dh(3e4,6e4);function mg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rd(t,e,s,r,i={}){return UC(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=Lh(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return uD()||(h.referrerPolicy="no-referrer"),VC.fetch()(HC(t,t.config.apiHost,s,d),h)})}async function UC(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O8),e);try{const i=new U8(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw bp(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bp(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw bp(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw bp(t,"user-disabled",l);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw OC(t,m,h);Oa(t,m)}}catch(i){if(i instanceof Ka)throw i;Oa(t,"network-request-failed",{message:String(i)})}}async function zC(t,e,s,r,i={}){const a=await Rd(t,e,s,r,i);return"mfaPendingCredential"in a&&Oa(t,"multi-factor-auth-required",{_serverResponse:a}),a}function HC(t,e,s,r){const i=`${e}${s}?${r}`;return t.config.emulator?o1(t.config,i):`${t.config.apiScheme}://${i}`}class U8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),V8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bp(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=Qi(t,e,r);return i.customData._tokenResponse=s,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z8(t,e){return Rd(t,"POST","/v1/accounts:delete",e)}async function GC(t,e){return Rd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function H8(t,e=!1){const s=on(t),r=await s.getIdToken(e),i=l1(r);bt(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:qu(Py(i.auth_time)),issuedAtTime:qu(Py(i.iat)),expirationTime:qu(Py(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Py(t){return Number(t)*1e3}function l1(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return Jp("JWT malformed, contained fewer than 3 sections"),null;try{const i=EC(s);return i?JSON.parse(i):(Jp("Failed to decode base64 JWT payload"),null)}catch(i){return Jp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function V2(t){const e=l1(t);return bt(e,"internal-error"),bt(typeof e.exp!="undefined","internal-error"),bt(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Ka&&G8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(t){var e;const s=t.auth,r=await t.getIdToken(),i=await ph(t,GC(s,{idToken:r}));bt(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?WC(a.providerUserInfo):[],d=K8(t.providerData,l),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),m=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Xv(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function q8(t){const e=on(t);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WC(t){return t.map(e=>{var{providerId:s}=e,r=i1(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8(t,e){const s=await UC(t,{},async()=>{const r=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=HC(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",VC.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function X8(t,e){return Rd(t,"POST","/v2/accounts:revokeToken",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken!="undefined","internal-error"),bt(typeof e.refreshToken!="undefined","internal-error");const s="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):V2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const s=V2(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:a}=await Q8(e,s);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:a}=s,l=new ad;return r&&(bt(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(bt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(bt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ad,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,e){bt(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Ia{constructor(e){var{uid:s,auth:r,stsTokenManager:i}=e,a=i1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await ph(this,this.stsTokenManager.getToken(this.auth,e));return bt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return H8(this,e)}reload(){return q8(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Ia(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ea(this.auth.app))return Promise.reject(Oo(this.auth));const e=await this.getIdToken();return await ph(this,z8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,i,a,l,d,u,h,m;const g=(r=s.displayName)!==null&&r!==void 0?r:void 0,v=(i=s.email)!==null&&i!==void 0?i:void 0,b=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,N=(l=s.photoURL)!==null&&l!==void 0?l:void 0,S=(d=s.tenantId)!==null&&d!==void 0?d:void 0,C=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,R=(h=s.createdAt)!==null&&h!==void 0?h:void 0,M=(m=s.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:T,emailVerified:y,isAnonymous:w,providerData:D,stsTokenManager:k}=s;bt(T&&k,e,"internal-error");const _=ad.fromJSON(this.name,k);bt(typeof T=="string",e,"internal-error"),_o(g,e.name),_o(v,e.name),bt(typeof y=="boolean",e,"internal-error"),bt(typeof w=="boolean",e,"internal-error"),_o(b,e.name),_o(N,e.name),_o(S,e.name),_o(C,e.name),_o(R,e.name),_o(M,e.name);const A=new Ia({uid:T,auth:e,email:v,emailVerified:y,displayName:g,isAnonymous:w,photoURL:N,phoneNumber:b,tenantId:S,stsTokenManager:_,createdAt:R,lastLoginAt:M});return D&&Array.isArray(D)&&(A.providerData=D.map(F=>Object.assign({},F))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,s,r=!1){const i=new ad;i.updateFromServerResponse(s);const a=new Ia({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kf(a),a}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];bt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?WC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new ad;d.updateFromIdToken(r);const u=new Ia({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Xv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Map;function Pa(t){Va(t instanceof Function,"Expected a class definition");let e=U2.get(t);return e?(Va(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}qC.type="NONE";const z2=qC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t,e,s){return`firebase:${t}:${e}:${s}`}class od{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Zp(this.userKey,i.apiKey,a),this.fullPersistenceKey=Zp("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ia._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new od(Pa(z2),e,r);const i=(await Promise.all(s.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Pa(z2);const l=Zp(r,e.config.apiKey,e.name);let d=null;for(const h of s)try{const m=await h._get(l);if(m){const g=Ia._fromJSON(e,m);h!==a&&(d=g),a=h;break}}catch(m){}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new od(a,e,r):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(s.map(async h=>{if(h!==a)try{await h._remove(l)}catch(m){}})),new od(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZC(e))return"Blackberry";if(eT(e))return"Webos";if(QC(e))return"Safari";if((e.includes("chrome/")||XC(e))&&!e.includes("edge/"))return"Chrome";if(JC(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KC(t=Hn()){return/firefox\//i.test(t)}function QC(t=Hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XC(t=Hn()){return/crios\//i.test(t)}function YC(t=Hn()){return/iemobile/i.test(t)}function JC(t=Hn()){return/android/i.test(t)}function ZC(t=Hn()){return/blackberry/i.test(t)}function eT(t=Hn()){return/webos/i.test(t)}function c1(t=Hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Y8(t=Hn()){var e;return c1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J8(){return pD()&&document.documentMode===10}function tT(t=Hn()){return c1(t)||JC(t)||eT(t)||ZC(t)||/windows phone/i.test(t)||YC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t,e=[]){let s;switch(t){case"Browser":s=H2(Hn());break;case"Worker":s=`${H2(Hn())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Pd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch(a){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e={}){return Rd(t,"GET","/v2/passwordPolicy",mg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=6;class sM{constructor(e){var s,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=l.minPasswordLength)!==null&&s!==void 0?s:tM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,i,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G2(this),this.idTokenSubscription=new G2(this),this.beforeStateQueue=new Z8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Pa(s)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await od.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await GC(this,{idToken:e}),r=await Ia._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ea(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ea(this.app))return Promise.reject(Oo(this));const s=e?on(e):null;return s&&bt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ea(this.app)?Promise.reject(Oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ea(this.app)?Promise.reject(Oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eM(this),s=new sM(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rh("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await X8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Pa(e)||this._popupRedirectResolver;bt(s,this,"argument-error"),this.redirectPersistenceManager=await od.create(this,[Pa(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,i);return()=>{l=!0,u()}}else{const u=e.addObserver(s);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&M8(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function pg(t){return on(t)}class G2{constructor(e){this.auth=e,this.observer=null,this.addObserver=wD(s=>this.observer=s)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rM(t){d1=t}function iM(t){return d1.loadJS(t)}function aM(){return d1.gapiScript}function oM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t,e){const s=n1(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(Sf(a,e!=null?e:{}))return i;Oa(i,"already-initialized")}return s.initialize({options:e})}function cM(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(Pa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dM(t,e,s){const r=pg(t);bt(r._canInitEmulator,r,"emulator-config-failed"),bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=nT(e),{host:l,port:d}=uM(e),u=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),hM()}function nT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uM(t){const e=nT(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:W2(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:W2(l)}}}function W2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hM(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,s){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(t,e){return zC(t,"POST","/v1/accounts:signInWithIdp",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="http://localhost";class zl extends rT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new zl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Oa("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=s,a=i1(s,["providerId","signInMethod"]);if(!r||!i)return null;const l=new zl(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const s=this.buildRequest();return ld(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,ld(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,ld(e,s)}buildRequest(){const e={requestUri:mM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Lh(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends iT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Mh{constructor(){super("facebook.com")}static credential(e){return zl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch(s){return null}}}To.FACEBOOK_SIGN_IN_METHOD="facebook.com";To.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return zl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Eo.credential(s,r)}catch(i){return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends Mh{constructor(){super("github.com")}static credential(e){return zl._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ao.credential(e.oauthAccessToken)}catch(s){return null}}}Ao.GITHUB_SIGN_IN_METHOD="github.com";Ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Mh{constructor(){super("twitter.com")}static credential(e,s){return zl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Io.credential(s,r)}catch(i){return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const a=await Ia._fromIdTokenResponse(e,r,i),l=q2(r);return new Hl({user:a,providerId:l,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=q2(r);return new Hl({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function q2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Ka{constructor(e,s,r,i){var a;super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Cf(e,s,r,i)}}function aT(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(t,a,e,r):a})}async function pM(t,e,s=!1){const r=await ph(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return Hl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e,s=!1){const{auth:r}=t;if(Ea(r.app))return Promise.reject(Oo(r));const i="reauthenticate";try{const a=await ph(t,aT(r,i,e,t),s);bt(a.idToken,r,"internal-error");const l=l1(a.idToken);bt(l,r,"internal-error");const{sub:d}=l;return bt(t.uid===d,r,"user-mismatch"),Hl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Oa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e,s=!1){if(Ea(t.app))return Promise.reject(Oo(t));const r="signIn",i=await aT(t,r,e),a=await Hl._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e){return zC(t,"POST","/v1/accounts:signInWithCustomToken",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t,e){if(Ea(t.app))return Promise.reject(Oo(t));const s=pg(t),r=await xM(s,{token:e,returnSecureToken:!0}),i=await Hl._fromIdTokenResponse(s,"signIn",r);return await s._updateCurrentUser(i.user),i}function vM(t,e,s,r){return on(t).onIdTokenChanged(e,s,r)}function bM(t,e,s){return on(t).beforeAuthStateChanged(e,s)}function _M(t,e,s,r){return on(t).onAuthStateChanged(e,s,r)}function wM(t){return on(t).signOut()}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=1e3,SM=10;class lT extends oT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!s&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);J8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SM):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},jM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}lT.type="LOCAL";const NM=lT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends oT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}cT.type="SESSION";const dT=cT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new fg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:a}=s.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async h=>h(s.origin,a)),u=await kM(d);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const h=u1("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(v.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:s},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){return window}function TM(t){Xi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return typeof Xi().WorkerGlobalScope!="undefined"&&typeof Xi().importScripts=="function"}async function EM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function AM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IM(){return uT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebaseLocalStorageDb",PM=1,Ef="firebaseLocalStorage",mT="fbase_key";class Fh{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function gg(t,e){return t.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function RM(){const t=indexedDB.deleteDatabase(hT);return new Fh(t).toPromise()}function Yv(){const t=indexedDB.open(hT,PM);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ef,{keyPath:mT})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),await RM(),e(await Yv()))})})}async function K2(t,e,s){const r=gg(t,!0).put({[mT]:e,value:s});return new Fh(r).toPromise()}async function LM(t,e){const s=gg(t,!1).get(e),r=await new Fh(s).toPromise();return r===void 0?null:r.value}function Q2(t,e){const s=gg(t,!0).delete(e);return new Fh(s).toPromise()}const DM=800,MM=3;class pT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yv(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>MM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fg._getInstance(IM()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await EM(),!this.activeServiceWorker)return;this.sender=new CM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(s){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yv();return await K2(e,Tf,"1"),await Q2(e,Tf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>K2(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>LM(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Q2(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=gg(i,!1).getAll();return new Fh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pT.type="LOCAL";const FM=pT;new Dh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e){return e?Pa(e):(bt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1 extends rT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ld(e,this._buildIdpRequest())}_linkToIdToken(e,s){return ld(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function $M(t){return gM(t.auth,new h1(t),t.bypassAuthState)}function OM(t){const{auth:e,user:s}=t;return bt(s,e,"internal-error"),fM(s,new h1(t),t.bypassAuthState)}async function VM(t){const{auth:e,user:s}=t;return bt(s,e,"internal-error"),pM(s,new h1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,s,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $M;case"linkViaPopup":case"linkViaRedirect":return VM;case"reauthViaPopup":case"reauthViaRedirect":return OM;default:Oa(this.auth,"internal-error")}}resolve(e){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Dh(2e3,1e4);class Yc extends fT{constructor(e,s,r,i,a){super(e,s,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Yc.currentPopupAction&&Yc.currentPopupAction.cancel(),Yc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){Va(this.filter.length===1,"Popup operations only handle one event");const e=u1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UM.get())};e()}}Yc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="pendingRedirect",ef=new Map;class HM extends fT{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await GM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GM(t,e){const s=KM(e),r=qM(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function WM(t,e){ef.set(t._key(),e)}function qM(t){return Pa(t._redirectPersistence)}function KM(t){return Zp(zM,t.config.apiKey,t.name)}async function QM(t,e,s=!1){if(Ea(t.app))return Promise.reject(Oo(t));const r=pg(t),i=BM(r,e),l=await new HM(r,i,s).execute();return l&&!s&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=600*1e3;class YM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JM(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!gT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(Qi(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XM&&this.cachedEventUids.clear(),this.cachedEventUids.has(X2(e))}saveEventToCache(e){this.cachedEventUids.add(X2(e)),this.lastProcessedEventTime=Date.now()}}function X2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(t,e={}){return Rd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t9=/^https?/;async function s9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZM(t);for(const s of e)try{if(n9(s))return}catch(r){}Oa(t,"unauthorized-domain")}function n9(t){const e=Qv(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&l.hostname===r}if(!t9.test(s))return!1;if(e9.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new Dh(3e4,6e4);function Y2(){const t=Xi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function i9(t){return new Promise((e,s)=>{var r,i,a;function l(){Y2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y2(),s(Qi(t,"network-request-failed"))},timeout:r9.get()})}if(!((i=(r=Xi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Xi().gapi)===null||a===void 0)&&a.load)l();else{const d=oM("iframefcb");return Xi()[d]=()=>{gapi.load?l():s(Qi(t,"network-request-failed"))},iM(`${aM()}?onload=${d}`).catch(u=>s(u))}}).catch(e=>{throw tf=null,e})}let tf=null;function a9(t){return tf=tf||i9(t),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=new Dh(5e3,15e3),l9="__/auth/iframe",c9="emulator/auth/iframe",d9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h9(t){const e=t.config;bt(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?o1(e,c9):`https://${t.config.authDomain}/${l9}`,r={apiKey:e.apiKey,appName:t.name,v:Pd},i=u9.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${s}?${Lh(r).slice(1)}`}async function m9(t){const e=await a9(t),s=Xi().gapi;return bt(s,t,"internal-error"),e.open({where:document.body,url:h9(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d9,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Qi(t,"network-request-failed"),d=Xi().setTimeout(()=>{a(l)},o9.get());function u(){Xi().clearTimeout(d),i(r)}r.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f9=500,g9=600,x9="_blank",y9="http://localhost";class J2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function v9(t,e,s,r=f9,i=g9){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},p9),{width:r.toString(),height:i.toString(),top:a,left:l}),h=Hn().toLowerCase();s&&(d=XC(h)?x9:s),KC(h)&&(e=e||y9,u.scrollbars="yes");const m=Object.entries(u).reduce((v,[b,N])=>`${v}${b}=${N},`,"");if(Y8(h)&&d!=="_self")return b9(e||"",d),new J2(null);const g=window.open(e||"",d,m);bt(g,t,"popup-blocked");try{g.focus()}catch(v){}return new J2(g)}function b9(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="__/auth/handler",w9="emulator/auth/handler",j9=encodeURIComponent("fac");async function Z2(t,e,s,r,i,a){bt(t.config.authDomain,t,"auth-domain-config-required"),bt(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:Pd,eventId:i};if(e instanceof iT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",_D(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof Mh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const u=await t._getAppCheckToken(),h=u?`#${j9}=${encodeURIComponent(u)}`:"";return`${S9(t)}?${Lh(d).slice(1)}${h}`}function S9({config:t}){return t.emulator?o1(t,w9):`https://${t.authDomain}/${_9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="webStorageSupport";class N9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dT,this._completeRedirectFn=QM,this._overrideRedirectResult=WM}async _openPopup(e,s,r,i){var a;Va((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Z2(e,s,r,Qv(),i);return v9(e,l,u1())}async _openRedirect(e,s,r,i){await this._originValidation(e);const a=await Z2(e,s,r,Qv(),i);return TM(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(Va(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await m9(e),r=new YM(e);return s.register("authEvent",i=>(bt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Ry,{type:Ry},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ry];l!==void 0&&s(!!l),Oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=s9(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return tT()||QC()||c1()}}const k9=N9;var ej="@firebase/auth",tj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E9(t){pd(new Ul("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;bt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sT(t)},h=new nM(r,i,a,u);return cM(h,s),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),pd(new Ul("auth-internal",e=>{const s=pg(e.getProvider("auth").getImmediate());return(r=>new C9(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),$o(ej,tj,T9(t)),$o(ej,tj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=300,I9=PC("authIdTokenMaxAge")||A9;let sj=null;const P9=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>I9)return;const i=s==null?void 0:s.token;sj!==i&&(sj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R9(t=r1()){const e=n1(t,"auth");if(e.isInitialized())return e.getImmediate();const s=lM(t,{popupRedirectResolver:k9,persistence:[FM,NM,dT]}),r=PC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=P9(a.toString());bM(s,l,()=>l(s.currentUser)),vM(s,d=>l(d))}}const i=AC("auth");return i&&dM(s,`http://${i}`),s}function L9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rM({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Qi("internal-error");a.customData=i,s(a)},r.type="text/javascript",r.charset="UTF-8",L9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E9("Browser");var nj=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $l,xT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,_){function A(){}A.prototype=_.prototype,k.D=_.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(F,P,B){for(var $=Array(arguments.length-2),W=2;W<arguments.length;W++)$[W-2]=arguments[W];return _.prototype[P].apply(F,$)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,_,A){A||(A=0);var F=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)F[P]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(P=0;16>P;++P)F[P]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=k.g[0],A=k.g[1],P=k.g[2];var B=k.g[3],$=_+(B^A&(P^B))+F[0]+3614090360&4294967295;_=A+($<<7&4294967295|$>>>25),$=B+(P^_&(A^P))+F[1]+3905402710&4294967295,B=_+($<<12&4294967295|$>>>20),$=P+(A^B&(_^A))+F[2]+606105819&4294967295,P=B+($<<17&4294967295|$>>>15),$=A+(_^P&(B^_))+F[3]+3250441966&4294967295,A=P+($<<22&4294967295|$>>>10),$=_+(B^A&(P^B))+F[4]+4118548399&4294967295,_=A+($<<7&4294967295|$>>>25),$=B+(P^_&(A^P))+F[5]+1200080426&4294967295,B=_+($<<12&4294967295|$>>>20),$=P+(A^B&(_^A))+F[6]+2821735955&4294967295,P=B+($<<17&4294967295|$>>>15),$=A+(_^P&(B^_))+F[7]+4249261313&4294967295,A=P+($<<22&4294967295|$>>>10),$=_+(B^A&(P^B))+F[8]+1770035416&4294967295,_=A+($<<7&4294967295|$>>>25),$=B+(P^_&(A^P))+F[9]+2336552879&4294967295,B=_+($<<12&4294967295|$>>>20),$=P+(A^B&(_^A))+F[10]+4294925233&4294967295,P=B+($<<17&4294967295|$>>>15),$=A+(_^P&(B^_))+F[11]+2304563134&4294967295,A=P+($<<22&4294967295|$>>>10),$=_+(B^A&(P^B))+F[12]+1804603682&4294967295,_=A+($<<7&4294967295|$>>>25),$=B+(P^_&(A^P))+F[13]+4254626195&4294967295,B=_+($<<12&4294967295|$>>>20),$=P+(A^B&(_^A))+F[14]+2792965006&4294967295,P=B+($<<17&4294967295|$>>>15),$=A+(_^P&(B^_))+F[15]+1236535329&4294967295,A=P+($<<22&4294967295|$>>>10),$=_+(P^B&(A^P))+F[1]+4129170786&4294967295,_=A+($<<5&4294967295|$>>>27),$=B+(A^P&(_^A))+F[6]+3225465664&4294967295,B=_+($<<9&4294967295|$>>>23),$=P+(_^A&(B^_))+F[11]+643717713&4294967295,P=B+($<<14&4294967295|$>>>18),$=A+(B^_&(P^B))+F[0]+3921069994&4294967295,A=P+($<<20&4294967295|$>>>12),$=_+(P^B&(A^P))+F[5]+3593408605&4294967295,_=A+($<<5&4294967295|$>>>27),$=B+(A^P&(_^A))+F[10]+38016083&4294967295,B=_+($<<9&4294967295|$>>>23),$=P+(_^A&(B^_))+F[15]+3634488961&4294967295,P=B+($<<14&4294967295|$>>>18),$=A+(B^_&(P^B))+F[4]+3889429448&4294967295,A=P+($<<20&4294967295|$>>>12),$=_+(P^B&(A^P))+F[9]+568446438&4294967295,_=A+($<<5&4294967295|$>>>27),$=B+(A^P&(_^A))+F[14]+3275163606&4294967295,B=_+($<<9&4294967295|$>>>23),$=P+(_^A&(B^_))+F[3]+4107603335&4294967295,P=B+($<<14&4294967295|$>>>18),$=A+(B^_&(P^B))+F[8]+1163531501&4294967295,A=P+($<<20&4294967295|$>>>12),$=_+(P^B&(A^P))+F[13]+2850285829&4294967295,_=A+($<<5&4294967295|$>>>27),$=B+(A^P&(_^A))+F[2]+4243563512&4294967295,B=_+($<<9&4294967295|$>>>23),$=P+(_^A&(B^_))+F[7]+1735328473&4294967295,P=B+($<<14&4294967295|$>>>18),$=A+(B^_&(P^B))+F[12]+2368359562&4294967295,A=P+($<<20&4294967295|$>>>12),$=_+(A^P^B)+F[5]+4294588738&4294967295,_=A+($<<4&4294967295|$>>>28),$=B+(_^A^P)+F[8]+2272392833&4294967295,B=_+($<<11&4294967295|$>>>21),$=P+(B^_^A)+F[11]+1839030562&4294967295,P=B+($<<16&4294967295|$>>>16),$=A+(P^B^_)+F[14]+4259657740&4294967295,A=P+($<<23&4294967295|$>>>9),$=_+(A^P^B)+F[1]+2763975236&4294967295,_=A+($<<4&4294967295|$>>>28),$=B+(_^A^P)+F[4]+1272893353&4294967295,B=_+($<<11&4294967295|$>>>21),$=P+(B^_^A)+F[7]+4139469664&4294967295,P=B+($<<16&4294967295|$>>>16),$=A+(P^B^_)+F[10]+3200236656&4294967295,A=P+($<<23&4294967295|$>>>9),$=_+(A^P^B)+F[13]+681279174&4294967295,_=A+($<<4&4294967295|$>>>28),$=B+(_^A^P)+F[0]+3936430074&4294967295,B=_+($<<11&4294967295|$>>>21),$=P+(B^_^A)+F[3]+3572445317&4294967295,P=B+($<<16&4294967295|$>>>16),$=A+(P^B^_)+F[6]+76029189&4294967295,A=P+($<<23&4294967295|$>>>9),$=_+(A^P^B)+F[9]+3654602809&4294967295,_=A+($<<4&4294967295|$>>>28),$=B+(_^A^P)+F[12]+3873151461&4294967295,B=_+($<<11&4294967295|$>>>21),$=P+(B^_^A)+F[15]+530742520&4294967295,P=B+($<<16&4294967295|$>>>16),$=A+(P^B^_)+F[2]+3299628645&4294967295,A=P+($<<23&4294967295|$>>>9),$=_+(P^(A|~B))+F[0]+4096336452&4294967295,_=A+($<<6&4294967295|$>>>26),$=B+(A^(_|~P))+F[7]+1126891415&4294967295,B=_+($<<10&4294967295|$>>>22),$=P+(_^(B|~A))+F[14]+2878612391&4294967295,P=B+($<<15&4294967295|$>>>17),$=A+(B^(P|~_))+F[5]+4237533241&4294967295,A=P+($<<21&4294967295|$>>>11),$=_+(P^(A|~B))+F[12]+1700485571&4294967295,_=A+($<<6&4294967295|$>>>26),$=B+(A^(_|~P))+F[3]+2399980690&4294967295,B=_+($<<10&4294967295|$>>>22),$=P+(_^(B|~A))+F[10]+4293915773&4294967295,P=B+($<<15&4294967295|$>>>17),$=A+(B^(P|~_))+F[1]+2240044497&4294967295,A=P+($<<21&4294967295|$>>>11),$=_+(P^(A|~B))+F[8]+1873313359&4294967295,_=A+($<<6&4294967295|$>>>26),$=B+(A^(_|~P))+F[15]+4264355552&4294967295,B=_+($<<10&4294967295|$>>>22),$=P+(_^(B|~A))+F[6]+2734768916&4294967295,P=B+($<<15&4294967295|$>>>17),$=A+(B^(P|~_))+F[13]+1309151649&4294967295,A=P+($<<21&4294967295|$>>>11),$=_+(P^(A|~B))+F[4]+4149444226&4294967295,_=A+($<<6&4294967295|$>>>26),$=B+(A^(_|~P))+F[11]+3174756917&4294967295,B=_+($<<10&4294967295|$>>>22),$=P+(_^(B|~A))+F[2]+718787259&4294967295,P=B+($<<15&4294967295|$>>>17),$=A+(B^(P|~_))+F[9]+3951481745&4294967295,k.g[0]=k.g[0]+_&4294967295,k.g[1]=k.g[1]+(P+($<<21&4294967295|$>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.u=function(k,_){_===void 0&&(_=k.length);for(var A=_-this.blockSize,F=this.B,P=this.h,B=0;B<_;){if(P==0)for(;B<=A;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<_;)if(F[P++]=k.charCodeAt(B++),P==this.blockSize){i(this,F),P=0;break}}else for(;B<_;)if(F[P++]=k[B++],P==this.blockSize){i(this,F),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var _=1;_<k.length-8;++_)k[_]=0;var A=8*this.o;for(_=k.length-8;_<k.length;++_)k[_]=A&255,A/=256;for(this.u(k),k=Array(16),_=A=0;4>_;++_)for(var F=0;32>F;F+=8)k[A++]=this.g[_]>>>F&255;return k};function a(k,_){var A=d;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=_(k)}function l(k,_){this.h=_;for(var A=[],F=!0,P=k.length-1;0<=P;P--){var B=k[P]|0;F&&B==_||(A[P]=B,F=!1)}this.g=A}var d={};function u(k){return-128<=k&&128>k?a(k,function(_){return new l([_|0],0>_?-1:0)}):new l([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return g;if(0>k)return C(h(-k));for(var _=[],A=1,F=0;k>=A;F++)_[F]=k/A|0,A*=4294967296;return new l(_,0)}function m(k,_){if(k.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k.charAt(0)=="-")return C(m(k.substring(1),_));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=h(Math.pow(_,8)),F=g,P=0;P<k.length;P+=8){var B=Math.min(8,k.length-P),$=parseInt(k.substring(P,P+B),_);8>B?(B=h(Math.pow(_,B)),F=F.j(B).add(h($))):(F=F.j(A),F=F.add(h($)))}return F}var g=u(0),v=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(S(this))return-C(this).m();for(var k=0,_=1,A=0;A<this.g.length;A++){var F=this.i(A);k+=(0<=F?F:4294967296+F)*_,_*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(S(this))return"-"+C(this).toString(k);for(var _=h(Math.pow(k,6)),A=this,F="";;){var P=y(A,_).g;A=R(A,P.j(_));var B=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=P,N(A))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var _=0;_<k.g.length;_++)if(k.g[_]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=R(this,k),S(k)?-1:N(k)?0:1};function C(k){for(var _=k.g.length,A=[],F=0;F<_;F++)A[F]=~k.g[F];return new l(A,~k.h).add(v)}t.abs=function(){return S(this)?C(this):this},t.add=function(k){for(var _=Math.max(this.g.length,k.g.length),A=[],F=0,P=0;P<=_;P++){var B=F+(this.i(P)&65535)+(k.i(P)&65535),$=(B>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);F=$>>>16,B&=65535,$&=65535,A[P]=$<<16|B}return new l(A,A[A.length-1]&-2147483648?-1:0)};function R(k,_){return k.add(C(_))}t.j=function(k){if(N(this)||N(k))return g;if(S(this))return S(k)?C(this).j(C(k)):C(C(this).j(k));if(S(k))return C(this.j(C(k)));if(0>this.l(b)&&0>k.l(b))return h(this.m()*k.m());for(var _=this.g.length+k.g.length,A=[],F=0;F<2*_;F++)A[F]=0;for(F=0;F<this.g.length;F++)for(var P=0;P<k.g.length;P++){var B=this.i(F)>>>16,$=this.i(F)&65535,W=k.i(P)>>>16,H=k.i(P)&65535;A[2*F+2*P]+=$*H,M(A,2*F+2*P),A[2*F+2*P+1]+=B*H,M(A,2*F+2*P+1),A[2*F+2*P+1]+=$*W,M(A,2*F+2*P+1),A[2*F+2*P+2]+=B*W,M(A,2*F+2*P+2)}for(F=0;F<_;F++)A[F]=A[2*F+1]<<16|A[2*F];for(F=_;F<2*_;F++)A[F]=0;return new l(A,0)};function M(k,_){for(;(k[_]&65535)!=k[_];)k[_+1]+=k[_]>>>16,k[_]&=65535,_++}function T(k,_){this.g=k,this.h=_}function y(k,_){if(N(_))throw Error("division by zero");if(N(k))return new T(g,g);if(S(k))return _=y(C(k),_),new T(C(_.g),C(_.h));if(S(_))return _=y(k,C(_)),new T(C(_.g),_.h);if(30<k.g.length){if(S(k)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=v,F=_;0>=F.l(k);)A=w(A),F=w(F);var P=D(A,1),B=D(F,1);for(F=D(F,2),A=D(A,2);!N(F);){var $=B.add(F);0>=$.l(k)&&(P=P.add(A),B=$),F=D(F,1),A=D(A,1)}return _=R(k,P.j(_)),new T(P,_)}for(P=g;0<=k.l(_);){for(A=Math.max(1,Math.floor(k.m()/_.m())),F=Math.ceil(Math.log(A)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(A),$=B.j(_);S($)||0<$.l(k);)A-=F,B=h(A),$=B.j(_);N(B)&&(B=v),P=P.add(B),k=R(k,$)}return new T(P,k)}t.A=function(k){return y(this,k).h},t.and=function(k){for(var _=Math.max(this.g.length,k.g.length),A=[],F=0;F<_;F++)A[F]=this.i(F)&k.i(F);return new l(A,this.h&k.h)},t.or=function(k){for(var _=Math.max(this.g.length,k.g.length),A=[],F=0;F<_;F++)A[F]=this.i(F)|k.i(F);return new l(A,this.h|k.h)},t.xor=function(k){for(var _=Math.max(this.g.length,k.g.length),A=[],F=0;F<_;F++)A[F]=this.i(F)^k.i(F);return new l(A,this.h^k.h)};function w(k){for(var _=k.g.length+1,A=[],F=0;F<_;F++)A[F]=k.i(F)<<1|k.i(F-1)>>>31;return new l(A,k.h)}function D(k,_){var A=_>>5;_%=32;for(var F=k.g.length-A,P=[],B=0;B<F;B++)P[B]=0<_?k.i(B+A)>>>_|k.i(B+A+1)<<32-_:k.i(B+A);return new l(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,$l=l}).apply(typeof nj!="undefined"?nj:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var _p=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yT,Mu,vT,sf,Jv,bT,_T,wT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,I,O){return f==Array.prototype||f==Object.prototype||(f[I]=O.value),f};function s(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof _p=="object"&&_p];for(var I=0;I<f.length;++I){var O=f[I];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=s(this);function i(f,I){if(I)e:{var O=r;f=f.split(".");for(var z=0;z<f.length-1;z++){var oe=f[z];if(!(oe in O))break e;O=O[oe]}f=f[f.length-1],z=O[f],I=I(z),I!=z&&I!=null&&e(O,f,{configurable:!0,writable:!0,value:I})}}function a(f,I){f instanceof String&&(f+="");var O=0,z=!1,oe={next:function(){if(!z&&O<f.length){var ge=O++;return{value:I(ge,f[ge]),done:!1}}return z=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}i("Array.prototype.values",function(f){return f||function(){return a(this,function(I,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(f){var I=typeof f;return I=I!="object"?I:f?Array.isArray(f)?"array":I:"null",I=="array"||I=="object"&&typeof f.length=="number"}function h(f){var I=typeof f;return I=="object"&&f!=null||I=="function"}function m(f,I,O){return f.call.apply(f.bind,arguments)}function g(f,I,O){if(!f)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,z),f.apply(I,oe)}}return function(){return f.apply(I,arguments)}}function v(f,I,O){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,v.apply(null,arguments)}function b(f,I){var O=Array.prototype.slice.call(arguments,1);return function(){var z=O.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function N(f,I){function O(){}O.prototype=I.prototype,f.aa=I.prototype,f.prototype=new O,f.prototype.constructor=f,f.Qb=function(z,oe,ge){for(var Be=Array(arguments.length-2),as=2;as<arguments.length;as++)Be[as-2]=arguments[as];return I.prototype[oe].apply(z,Be)}}function S(f){const I=f.length;if(0<I){const O=Array(I);for(let z=0;z<I;z++)O[z]=f[z];return O}return[]}function C(f,I){for(let O=1;O<arguments.length;O++){const z=arguments[O];if(u(z)){const oe=f.length||0,ge=z.length||0;f.length=oe+ge;for(let Be=0;Be<ge;Be++)f[oe+Be]=z[Be]}else f.push(z)}}class R{constructor(I,O){this.i=I,this.j=O,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function M(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function y(f){return y[" "](f),f}y[" "]=function(){};var w=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function D(f,I,O){for(const z in f)I.call(O,f[z],z,f)}function k(f,I){for(const O in f)I.call(void 0,f[O],O,f)}function _(f){const I={};for(const O in f)I[O]=f[O];return I}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,I){let O,z;for(let oe=1;oe<arguments.length;oe++){z=arguments[oe];for(O in z)f[O]=z[O];for(let ge=0;ge<A.length;ge++)O=A[ge],Object.prototype.hasOwnProperty.call(z,O)&&(f[O]=z[O])}}function P(f){var I=1;f=f.split(":");const O=[];for(;0<I&&f.length;)O.push(f.shift()),I--;return f.length&&O.push(f.join(":")),O}function B(f){d.setTimeout(()=>{throw f},0)}function $(){var f=te;let I=null;return f.g&&(I=f.g,f.g=f.g.next,f.g||(f.h=null),I.next=null),I}class W{constructor(){this.h=this.g=null}add(I,O){const z=H.get();z.set(I,O),this.h?this.h.next=z:this.g=z,this.h=z}}var H=new R(()=>new q,f=>f.reset());class q{constructor(){this.next=this.g=this.h=null}set(I,O){this.h=I,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let K,G=!1,te=new W,ne=()=>{const f=d.Promise.resolve(void 0);K=()=>{f.then(U)}};var U=()=>{for(var f;f=$();){try{f.h.call(f.g)}catch(O){B(O)}var I=H;I.j(f),100>I.h&&(I.h++,f.next=I.g,I.g=f)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,I){this.type=f,this.g=this.target=I,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ie=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,I=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const O=()=>{};d.addEventListener("test",O,I),d.removeEventListener("test",O,I)}catch(O){}return f})();function fe(f,I){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var O=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=I,I=f.relatedTarget){if(w){e:{try{y(I.nodeName);var oe=!0;break e}catch(ge){}oe=!1}oe||(I=null)}}else O=="mouseover"?I=f.fromElement:O=="mouseout"&&(I=f.toElement);this.relatedTarget=I,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:be[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&fe.aa.h.call(this)}}N(fe,he);var be={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),_e=0;function we(f,I,O,z,oe){this.listener=f,this.proxy=null,this.src=I,this.type=O,this.capture=!!z,this.ha=oe,this.key=++_e,this.da=this.fa=!1}function de(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function pe(f){this.src=f,this.g={},this.h=0}pe.prototype.add=function(f,I,O,z,oe){var ge=f.toString();f=this.g[ge],f||(f=this.g[ge]=[],this.h++);var Be=$e(f,I,z,oe);return-1<Be?(I=f[Be],O||(I.fa=!1)):(I=new we(I,this.src,ge,!!z,oe),I.fa=O,f.push(I)),I};function re(f,I){var O=I.type;if(O in f.g){var z=f.g[O],oe=Array.prototype.indexOf.call(z,I,void 0),ge;(ge=0<=oe)&&Array.prototype.splice.call(z,oe,1),ge&&(de(I),f.g[O].length==0&&(delete f.g[O],f.h--))}}function $e(f,I,O,z){for(var oe=0;oe<f.length;++oe){var ge=f[oe];if(!ge.da&&ge.listener==I&&ge.capture==!!O&&ge.ha==z)return oe}return-1}var He="closure_lm_"+(1e6*Math.random()|0),pt={};function It(f,I,O,z,oe){if(Array.isArray(I)){for(var ge=0;ge<I.length;ge++)It(f,I[ge],O,z,oe);return null}return O=ut(O),f&&f[ye]?f.K(I,O,h(z)?!!z.capture:!1,oe):Mt(f,I,O,!1,z,oe)}function Mt(f,I,O,z,oe,ge){if(!I)throw Error("Invalid event type");var Be=h(oe)?!!oe.capture:!!oe,as=ze(f);if(as||(f[He]=as=new pe(f)),O=as.add(I,O,z,Be,ge),O.proxy)return O;if(z=Ht(),O.proxy=z,z.src=f,z.listener=O,f.addEventListener)ie||(oe=Be),oe===void 0&&(oe=!1),f.addEventListener(I.toString(),z,oe);else if(f.attachEvent)f.attachEvent(Re(I.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ht(){function f(O){return I.call(f.src,f.listener,O)}const I=Ie;return f}function ss(f,I,O,z,oe){if(Array.isArray(I))for(var ge=0;ge<I.length;ge++)ss(f,I[ge],O,z,oe);else z=h(z)?!!z.capture:!!z,O=ut(O),f&&f[ye]?(f=f.i,I=String(I).toString(),I in f.g&&(ge=f.g[I],O=$e(ge,O,z,oe),-1<O&&(de(ge[O]),Array.prototype.splice.call(ge,O,1),ge.length==0&&(delete f.g[I],f.h--)))):f&&(f=ze(f))&&(I=f.g[I.toString()],f=-1,I&&(f=$e(I,O,z,oe)),(O=-1<f?I[f]:null)&&Ne(O))}function Ne(f){if(typeof f!="number"&&f&&!f.da){var I=f.src;if(I&&I[ye])re(I.i,f);else{var O=f.type,z=f.proxy;I.removeEventListener?I.removeEventListener(O,z,f.capture):I.detachEvent?I.detachEvent(Re(O),z):I.addListener&&I.removeListener&&I.removeListener(z),(O=ze(I))?(re(O,f),O.h==0&&(O.src=null,I[He]=null)):de(f)}}}function Re(f){return f in pt?pt[f]:pt[f]="on"+f}function Ie(f,I){if(f.da)f=!0;else{I=new fe(I,this);var O=f.listener,z=f.ha||f.src;f.fa&&Ne(f),f=O.call(z,I)}return f}function ze(f){return f=f[He],f instanceof pe?f:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(f){return typeof f=="function"?f:(f[at]||(f[at]=function(I){return f.handleEvent(I)}),f[at])}function xt(){Z.call(this),this.i=new pe(this),this.M=this,this.F=null}N(xt,Z),xt.prototype[ye]=!0,xt.prototype.removeEventListener=function(f,I,O,z){ss(this,f,I,O,z)};function Qt(f,I){var O,z=f.F;if(z)for(O=[];z;z=z.F)O.push(z);if(f=f.M,z=I.type||I,typeof I=="string")I=new he(I,f);else if(I instanceof he)I.target=I.target||f;else{var oe=I;I=new he(z,f),F(I,oe)}if(oe=!0,O)for(var ge=O.length-1;0<=ge;ge--){var Be=I.g=O[ge];oe=Gt(Be,z,!0,I)&&oe}if(Be=I.g=f,oe=Gt(Be,z,!0,I)&&oe,oe=Gt(Be,z,!1,I)&&oe,O)for(ge=0;ge<O.length;ge++)Be=I.g=O[ge],oe=Gt(Be,z,!1,I)&&oe}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var f=this.i,I;for(I in f.g){for(var O=f.g[I],z=0;z<O.length;z++)de(O[z]);delete f.g[I],f.h--}}this.F=null},xt.prototype.K=function(f,I,O,z){return this.i.add(String(f),I,!1,O,z)},xt.prototype.L=function(f,I,O,z){return this.i.add(String(f),I,!0,O,z)};function Gt(f,I,O,z){if(I=f.i.g[String(I)],!I)return!0;I=I.concat();for(var oe=!0,ge=0;ge<I.length;++ge){var Be=I[ge];if(Be&&!Be.da&&Be.capture==O){var as=Be.listener,tn=Be.ha||Be.src;Be.fa&&re(f.i,Be),oe=as.call(tn,z)!==!1&&oe}}return oe&&!z.defaultPrevented}function Pn(f,I,O){if(typeof f=="function")O&&(f=v(f,O));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:d.setTimeout(f,I||0)}function en(f){f.g=Pn(()=>{f.g=null,f.i&&(f.i=!1,en(f))},f.l);const I=f.h;f.h=null,f.m.apply(null,I)}class Ds extends Z{constructor(I,O){super(),this.m=I,this.l=O,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:en(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(f){Z.call(this),this.h=f,this.g={}}N(Gn,Z);var Sr=[];function Ur(f){D(f.g,function(I,O){this.g.hasOwnProperty(O)&&Ne(I)},f),f.g={}}Gn.prototype.N=function(){Gn.aa.N.call(this),Ur(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=d.JSON.stringify,rr=d.JSON.parse,ls=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function ce(){}ce.prototype.h=null;function qe(f){return f.h||(f.h=f.i())}function Ge(){}var ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rt(){he.call(this,"d")}N(rt,he);function Et(){he.call(this,"c")}N(Et,he);var is={},Rn=null;function li(){return Rn=Rn||new xt}is.La="serverreachability";function Ii(f){he.call(this,is.La,f)}N(Ii,he);function Wn(f){const I=li();Qt(I,new Ii(I))}is.STAT_EVENT="statevent";function Yo(f,I){he.call(this,is.STAT_EVENT,f),this.stat=I}N(Yo,he);function cs(f){const I=li();Qt(I,new Yo(I,f))}is.Ma="timingevent";function zr(f,I){he.call(this,is.Ma,f),this.size=I}N(zr,he);function kr(f,I){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},I)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function Ri(f,I,O,z,oe,ge){f.info(function(){if(f.g)if(ge)for(var Be="",as=ge.split("&"),tn=0;tn<as.length;tn++){var Xt=as[tn].split("=");if(1<Xt.length){var ln=Xt[0];Xt=Xt[1];var Gs=ln.split("_");Be=2<=Gs.length&&Gs[1]=="type"?Be+(ln+"="+Xt+"&"):Be+(ln+"=redacted&")}}else Be=null;else Be=ge;return"XMLHTTP REQ ("+z+") [attempt "+oe+"]: "+I+`
`+O+`
`+Be})}function oa(f,I,O,z,oe,ge,Be){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+oe+"]: "+I+`
`+O+`
`+ge+" "+Be})}function ir(f,I,O,z){f.info(function(){return"XMLHTTP TEXT ("+I+"): "+ws(f,O)+(z?" "+z:"")})}function ns(f,I){f.info(function(){return"TIMEOUT: "+I})}Pi.prototype.info=function(){};function ws(f,I){if(!f.g)return I;if(!I)return null;try{var O=JSON.parse(I);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var z=O[f];if(!(2>z.length)){var oe=z[1];if(Array.isArray(oe)&&!(1>oe.length)){var ge=oe[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Be=1;Be<oe.length;Be++)oe[Be]=""}}}}return Nr(O)}catch(as){return I}}var ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Li={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Jo(){}N(Jo,ce),Jo.prototype.g=function(){return new XMLHttpRequest},Jo.prototype.i=function(){return{}},Vt=new Jo;function ci(f,I,O,z){this.j=f,this.i=I,this.l=O,this.R=z||1,this.U=new Gn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rm}function rm(){this.i=null,this.g="",this.h=!1}var Ud={},ic={};function ac(f,I,O){f.L=1,f.v=to(Tr(I)),f.m=O,f.P=!0,zd(f,null)}function zd(f,I){f.F=Date.now(),ps(f),f.A=Tr(f.v);var O=f.A,z=f.R;Array.isArray(z)||(z=[String(z)]),no(O.i,"t",z),f.C=0,O=f.j.J,f.h=new rm,f.g=wm(f.j,O?I:null,!f.m),0<f.O&&(f.M=new Ds(v(f.Y,f,f.g),f.O)),I=f.U,O=f.g,z=f.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(Sr[0]=oe.toString()),oe=Sr);for(var ge=0;ge<oe.length;ge++){var Be=It(O,oe[ge],z||I.handleEvent,!1,I.h||I);if(!Be)break;I.g[Be.key]=Be}I=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,I)):(f.u="GET",f.g.ea(f.A,f.u,null,I)),Wn(),Ri(f.i,f.u,f.A,f.l,f.R,f.m)}ci.prototype.ca=function(f){f=f.target;const I=this.M;I&&lr(f)==3?I.j():this.Y(f)},ci.prototype.Y=function(f){try{if(f==this.g)e:{const Gs=lr(this.g);var I=this.g.Ba();const Wr=this.g.Z();if(!(3>Gs)&&(Gs!=3||this.g&&(this.h.h||this.g.oa()||Qd(this.g)))){this.J||Gs!=4||I==7||(I==8||0>=Wr?Wn(3):Wn(2)),Zo(this);var O=this.g.Z();this.X=O;t:if(im(this)){var z=Qd(this.g);f="";var oe=z.length,ge=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Hr(this),Ya(this);var Be="";break t}this.h.i=new d.TextDecoder}for(I=0;I<oe;I++)this.h.h=!0,f+=this.h.i.decode(z[I],{stream:!(ge&&I==oe-1)});z.length=0,this.h.g+=f,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=O==200,oa(this.i,this.u,this.A,this.l,this.R,Gs,O),this.o){if(this.T&&!this.K){t:{if(this.g){var as,tn=this.g;if((as=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(as)){var Xt=as;break t}}Xt=null}if(O=Xt)ir(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hd(this,O);else{this.o=!1,this.s=3,cs(12),Hr(this),Ya(this);break e}}if(this.P){O=!0;let Ar;for(;!this.J&&this.C<Be.length;)if(Ar=Kg(this,Be),Ar==ic){Gs==4&&(this.s=4,cs(14),O=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Ar==Ud){this.s=4,cs(15),ir(this.i,this.l,Be,"[Invalid Chunk]"),O=!1;break}else ir(this.i,this.l,Ar,null),Hd(this,Ar);if(im(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gs!=4||Be.length!=0||this.h.h||(this.s=1,cs(16),O=!1),this.o=this.o&&O,!O)ir(this.i,this.l,Be,"[Invalid Chunked Response]"),Hr(this),Ya(this);else if(0<Be.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),Yd(ln),ln.M=!0,cs(11))}}else ir(this.i,this.l,Be,null),Hd(this,Be);Gs==4&&Hr(this),this.o&&!this.J&&(Gs==4?xc(this.j,this):(this.o=!1,ps(this)))}else hc(this.g),O==400&&0<Be.indexOf("Unknown SID")?(this.s=3,cs(12)):(this.s=0,cs(13)),Hr(this),Ya(this)}}}catch(Gs){}finally{}};function im(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Kg(f,I){var O=f.C,z=I.indexOf(`
`,O);return z==-1?ic:(O=Number(I.substring(O,z)),isNaN(O)?Ud:(z+=1,z+O>I.length?ic:(I=I.slice(z,z+O),f.C=z+O,I)))}ci.prototype.cancel=function(){this.J=!0,Hr(this)};function ps(f){f.S=Date.now()+f.I,am(f,f.I)}function am(f,I){if(f.B!=null)throw Error("WatchDog timer not null");f.B=kr(v(f.ba,f),I)}function Zo(f){f.B&&(d.clearTimeout(f.B),f.B=null)}ci.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ns(this.i,this.A),this.L!=2&&(Wn(),cs(17)),Hr(this),this.s=2,Ya(this)):am(this,this.S-f)};function Ya(f){f.j.G==0||f.J||xc(f.j,f)}function Hr(f){Zo(f);var I=f.M;I&&typeof I.ma=="function"&&I.ma(),f.M=null,Ur(f.U),f.g&&(I=f.g,f.g=null,I.abort(),I.ma())}function Hd(f,I){try{var O=f.j;if(O.G!=0&&(O.g==f||qn(O.h,f))){if(!f.K&&qn(O.h,f)&&O.G==3){try{var z=O.Da.g.parse(I)}catch(Xt){z=null}if(Array.isArray(z)&&z.length==3){var oe=z;if(oe[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<f.F)gc(O),pi(O);else break e;fc(O),cs(18)}}else O.za=oe[1],0<O.za-O.T&&37500>oe[2]&&O.F&&O.v==0&&!O.C&&(O.C=kr(v(O.Za,O),6e3));if(1>=lm(O.h)&&O.ca){try{O.ca()}catch(Xt){}O.ca=void 0}}else ha(O,11)}else if((f.K||O.g==f)&&gc(O),!M(I))for(oe=O.Da.g.parse(I),I=0;I<oe.length;I++){let Xt=oe[I];if(O.T=Xt[0],Xt=Xt[1],O.G==2)if(Xt[0]=="c"){O.K=Xt[1],O.ia=Xt[2];const ln=Xt[3];ln!=null&&(O.la=ln,O.j.info("VER="+O.la));const Gs=Xt[4];Gs!=null&&(O.Aa=Gs,O.j.info("SVER="+O.Aa));const Wr=Xt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(z=1.5*Wr,O.L=z,O.j.info("backChannelRequestTimeoutMs_="+z)),z=O;const Ar=f.g;if(Ar){const al=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var ge=z.h;ge.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Gd(ge,ge.h),ge.h=null))}if(z.D){const vc=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&(z.ya=vc,ds(z.I,z.D,vc))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-f.F,O.j.info("Handshake RTT: "+O.R+"ms")),z=O;var Be=f;if(z.qa=_m(z,z.J?z.ia:null,z.W),Be.K){cm(z.h,Be);var as=Be,tn=z.L;tn&&(as.I=tn),as.B&&(Zo(as),ps(as)),z.g=Be}else il(z);0<O.i.length&&Bi(O)}else Xt[0]!="stop"&&Xt[0]!="close"||ha(O,7);else O.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?ha(O,7):gn(O):Xt[0]!="noop"&&O.l&&O.l.ta(Xt),O.v=0)}}Wn(4)}catch(Xt){}}var om=class{constructor(f,I){this.g=f,this.map=I}};function el(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function lm(f){return f.h?1:f.g?f.g.size:0}function qn(f,I){return f.h?f.h==I:f.g?f.g.has(I):!1}function Gd(f,I){f.g?f.g.add(I):f.h=I}function cm(f,I){f.h&&f.h==I?f.h=null:f.g&&f.g.has(I)&&f.g.delete(I)}el.prototype.cancel=function(){if(this.i=dm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function dm(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let I=f.i;for(const O of f.g.values())I=I.concat(O.D);return I}return S(f.i)}function oc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map!="undefined"&&f instanceof Map||typeof Set!="undefined"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var I=[],O=f.length,z=0;z<O;z++)I.push(f[z]);return I}I=[],O=0;for(z in f)I[O++]=f[z];return I}function lc(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map!="undefined"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set!="undefined"&&f instanceof Set)){if(u(f)||typeof f=="string"){var I=[];f=f.length;for(var O=0;O<f;O++)I.push(O);return I}I=[],O=0;for(const z in f)I[O++]=z;return I}}}function Ja(f,I){if(f.forEach&&typeof f.forEach=="function")f.forEach(I,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,I,void 0);else for(var O=lc(f),z=oc(f),oe=z.length,ge=0;ge<oe;ge++)I.call(void 0,z[ge],O&&O[ge],f)}var tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qg(f,I){if(f){f=f.split("&");for(var O=0;O<f.length;O++){var z=f[O].indexOf("="),oe=null;if(0<=z){var ge=f[O].substring(0,z);oe=f[O].substring(z+1)}else ge=f[O];I(ge,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function la(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof la){this.h=f.h,sl(this,f.j),this.o=f.o,this.g=f.g,Za(this,f.s),this.l=f.l;var I=f.i,O=new Di;O.i=I.i,I.g&&(O.g=new Map(I.g),O.h=I.h),eo(this,O),this.m=f.m}else f&&(I=String(f).match(tl))?(this.h=!1,sl(this,I[1]||"",!0),this.o=Wt(I[2]||""),this.g=Wt(I[3]||"",!0),Za(this,I[4]),this.l=Wt(I[5]||"",!0),eo(this,I[6]||"",!0),this.m=Wt(I[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}la.prototype.toString=function(){var f=[],I=this.j;I&&f.push(so(I,cc,!0),":");var O=this.g;return(O||I=="file")&&(f.push("//"),(I=this.o)&&f.push(so(I,cc,!0),"@"),f.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&f.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&f.push("/"),f.push(so(O,O.charAt(0)=="/"?mm:hm,!0))),(O=this.i.toString())&&f.push("?",O),(O=this.m)&&f.push("#",so(O,Wd)),f.join("")};function Tr(f){return new la(f)}function sl(f,I,O){f.j=O?Wt(I,!0):I,f.j&&(f.j=f.j.replace(/:$/,""))}function Za(f,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);f.s=I}else f.s=null}function eo(f,I,O){I instanceof Di?(f.i=I,Mi(f.i,f.h)):(O||(I=so(I,pm)),f.i=new Di(I,f.h))}function ds(f,I,O){f.i.set(I,O)}function to(f){return ds(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Wt(f,I){return f?I?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function so(f,I,O){return typeof f=="string"?(f=encodeURI(f).replace(I,um),O&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function um(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var cc=/[#\/\?@]/g,hm=/[#\?:]/g,mm=/[#\?]/g,pm=/[#\?@]/g,Wd=/#/g;function Di(f,I){this.h=this.g=null,this.i=f||null,this.j=!!I}function fn(f){f.g||(f.g=new Map,f.h=0,f.i&&Qg(f.i,function(I,O){f.add(decodeURIComponent(I.replace(/\+/g," ")),O)}))}t=Di.prototype,t.add=function(f,I){fn(this),this.i=null,f=Gr(this,f);var O=this.g.get(f);return O||this.g.set(f,O=[]),O.push(I),this.h+=1,this};function di(f,I){fn(f),I=Gr(f,I),f.g.has(I)&&(f.i=null,f.h-=f.g.get(I).length,f.g.delete(I))}function ui(f,I){return fn(f),I=Gr(f,I),f.g.has(I)}t.forEach=function(f,I){fn(this),this.g.forEach(function(O,z){O.forEach(function(oe){f.call(I,oe,z,this)},this)},this)},t.na=function(){fn(this);const f=Array.from(this.g.values()),I=Array.from(this.g.keys()),O=[];for(let z=0;z<I.length;z++){const oe=f[z];for(let ge=0;ge<oe.length;ge++)O.push(I[z])}return O},t.V=function(f){fn(this);let I=[];if(typeof f=="string")ui(this,f)&&(I=I.concat(this.g.get(Gr(this,f))));else{f=Array.from(this.g.values());for(let O=0;O<f.length;O++)I=I.concat(f[O])}return I},t.set=function(f,I){return fn(this),this.i=null,f=Gr(this,f),ui(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[I]),this.h+=1,this},t.get=function(f,I){return f?(f=this.V(f),0<f.length?String(f[0]):I):I};function no(f,I,O){di(f,I),0<O.length&&(f.i=null,f.g.set(Gr(f,I),S(O)),f.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],I=Array.from(this.g.keys());for(var O=0;O<I.length;O++){var z=I[O];const ge=encodeURIComponent(String(z)),Be=this.V(z);for(z=0;z<Be.length;z++){var oe=ge;Be[z]!==""&&(oe+="="+encodeURIComponent(String(Be[z]))),f.push(oe)}}return this.i=f.join("&")};function Gr(f,I){return I=String(I),f.j&&(I=I.toLowerCase()),I}function Mi(f,I){I&&!f.j&&(fn(f),f.i=null,f.g.forEach(function(O,z){var oe=z.toLowerCase();z!=oe&&(di(this,z),no(this,oe,O))},f)),f.j=I}function Xg(f,I){const O=new Pi;if(d.Image){const z=new Image;z.onload=b(or,O,"TestLoadImage: loaded",!0,I,z),z.onerror=b(or,O,"TestLoadImage: error",!1,I,z),z.onabort=b(or,O,"TestLoadImage: abort",!1,I,z),z.ontimeout=b(or,O,"TestLoadImage: timeout",!1,I,z),d.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else I(!1)}function fm(f,I){const O=new Pi,z=new AbortController,oe=setTimeout(()=>{z.abort(),or(O,"TestPingServer: timeout",!1,I)},1e4);fetch(f,{signal:z.signal}).then(ge=>{clearTimeout(oe),ge.ok?or(O,"TestPingServer: ok",!0,I):or(O,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(oe),or(O,"TestPingServer: error",!1,I)})}function or(f,I,O,z,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),z(O)}catch(ge){}}function Yg(){this.g=new ls}function gm(f,I,O){const z=O||"";try{Ja(f,function(oe,ge){let Be=oe;h(oe)&&(Be=Nr(oe)),I.push(z+ge+"="+encodeURIComponent(Be))})}catch(oe){throw I.push(z+"type="+encodeURIComponent("_badmap")),oe}}function ca(f){this.l=f.Ub||null,this.j=f.eb||!1}N(ca,ce),ca.prototype.g=function(){return new nl(this.l,this.j)},ca.prototype.i=(function(f){return function(){return f}})({});function nl(f,I){xt.call(this),this.D=f,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(nl,xt),t=nl.prototype,t.open=function(f,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=I,this.readyState=1,mi(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(I.body=f),(this.D||d).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream!="undefined"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function xm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var I=f.value?f.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!f.done}))&&(this.response=this.responseText+=I)}f.done?hi(this):mi(this),this.readyState==3&&xm(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,hi(this))},t.Qa=function(f){this.g&&(this.response=f,hi(this))},t.ga=function(){this.g&&hi(this)};function hi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,mi(f)}t.setRequestHeader=function(f,I){this.u.append(f,I)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],I=this.h.entries();for(var O=I.next();!O.done;)O=O.value,f.push(O[0]+": "+O[1]),O=I.next();return f.join(`\r
`)};function mi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function da(f){let I="";return D(f,function(O,z){I+=z,I+=":",I+=O,I+=`\r
`}),I}function ro(f,I,O){e:{for(z in O){var z=!1;break e}z=!0}z||(O=da(O),typeof f=="string"?O!=null&&encodeURIComponent(String(O)):ds(f,I,O))}function js(f){xt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(js,xt);var Jg=/^https?$/i,qd=["POST","PUT"];t=js.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,I,O,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);I=I?I.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?qe(this.o):qe(Vt),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(I,String(f),!0),this.B=!1}catch(ge){rl(this,ge);return}if(f=O||"",O=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var oe in z)O.set(oe,z[oe]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ge of z.keys())O.set(ge,z.get(ge));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(O.keys()).find(ge=>ge.toLowerCase()=="content-type"),oe=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(qd,I,void 0))||z||oe||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Be]of O)this.g.setRequestHeader(ge,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uc(this),this.u=!0,this.g.send(f),this.u=!1}catch(ge){rl(this,ge)}};function rl(f,I){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=I,f.m=5,dc(f),Er(f)}function dc(f){f.A||(f.A=!0,Qt(f,"complete"),Qt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Qt(this,"complete"),Qt(this,"abort"),Er(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),js.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kd(this):this.bb())},t.bb=function(){Kd(this)};function Kd(f){if(f.h&&typeof l!="undefined"&&(!f.v[1]||lr(f)!=4||f.Z()!=2)){if(f.u&&lr(f)==4)Pn(f.Ea,0,f);else if(Qt(f,"readystatechange"),lr(f)==4){f.h=!1;try{const Be=f.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var O;if(!(O=I)){var z;if(z=Be===0){var oe=String(f.D).match(tl)[1]||null;!oe&&d.self&&d.self.location&&(oe=d.self.location.protocol.slice(0,-1)),z=!Jg.test(oe?oe.toLowerCase():"")}O=z}if(O)Qt(f,"complete"),Qt(f,"success");else{f.m=6;try{var ge=2<lr(f)?f.g.statusText:""}catch(as){ge=""}f.l=ge+" ["+f.Z()+"]",dc(f)}}finally{Er(f)}}}}function Er(f,I){if(f.g){uc(f);const O=f.g,z=f.v[0]?()=>{}:null;f.g=null,f.v=null,I||Qt(f,"ready");try{O.onreadystatechange=z}catch(oe){}}}function uc(f){f.I&&(d.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function lr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch(f){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(f){return""}},t.Oa=function(f){if(this.g){var I=this.g.responseText;return f&&I.indexOf(f)==0&&(I=I.substring(f.length)),rr(I)}};function Qd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch(I){return null}}function hc(f){const I={};f=(f.g&&2<=lr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(M(f[z]))continue;var O=P(f[z]);const oe=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ge=I[oe]||[];I[oe]=ge,ge.push(O)}k(I,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(f,I,O){return O&&O.internalChannelParams&&O.internalChannelParams[f]||I}function Xd(f){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fi("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fi("baseRetryDelayMs",5e3,f),this.cb=Fi("retryDelaySeedMs",1e4,f),this.Wa=Fi("forwardChannelMaxRetries",2,f),this.wa=Fi("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new el(f&&f.concurrentRequestLimit),this.Da=new Yg,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xd.prototype,t.la=8,t.G=1,t.connect=function(f,I,O,z){cs(0),this.W=f,this.H=I||{},O&&z!==void 0&&(this.H.OSID=O,this.H.OAID=z),this.F=this.X,this.I=_m(this,null,this.W),Bi(this)};function gn(f){if(mc(f),f.G==3){var I=f.U++,O=Tr(f.I);if(ds(O,"SID",f.K),ds(O,"RID",I),ds(O,"TYPE","terminate"),ua(f,O),I=new ci(f,f.j,I),I.L=2,I.v=to(Tr(O)),O=!1,d.navigator&&d.navigator.sendBeacon)try{O=d.navigator.sendBeacon(I.v.toString(),"")}catch(z){}!O&&d.Image&&(new Image().src=I.v,O=!0),O||(I.g=wm(I.j,null),I.g.ea(I.v)),I.F=Date.now(),ps(I)}bm(f)}function pi(f){f.g&&(Yd(f),f.g.cancel(),f.g=null)}function mc(f){pi(f),f.u&&(d.clearTimeout(f.u),f.u=null),gc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function Bi(f){if(!Cr(f.h)&&!f.s){f.s=!0;var I=f.Ga;K||ne(),G||(K(),G=!0),te.add(I,f),f.B=0}}function Zg(f,I){return lm(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=I.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=kr(v(f.Ga,f,I),vm(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const oe=new ci(this,this.j,f);let ge=this.o;if(this.S&&(ge?(ge=_(ge),F(ge,this.S)):ge=this.S),this.m!==null||this.O||(oe.H=ge,ge=null),this.P)e:{for(var I=0,O=0;O<this.i.length;O++){t:{var z=this.i[O];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(I+=z,4096<I){I=O;break e}if(I===4096||O===this.i.length-1){I=O+1;break e}}I=1e3}else I=1e3;I=io(this,oe,I),O=Tr(this.I),ds(O,"RID",f),ds(O,"CVER",22),this.D&&ds(O,"X-HTTP-Session-Id",this.D),ua(this,O),ge&&(this.O?I="headers="+encodeURIComponent(String(da(ge)))+"&"+I:this.m&&ro(O,this.m,ge)),Gd(this.h,oe),this.Ua&&ds(O,"TYPE","init"),this.P?(ds(O,"$req",I),ds(O,"SID","null"),oe.T=!0,ac(oe,O,null)):ac(oe,O,I),this.G=2}}else this.G==3&&(f?pc(this,f):this.i.length==0||Cr(this.h)||pc(this))};function pc(f,I){var O;I?O=I.l:O=f.U++;const z=Tr(f.I);ds(z,"SID",f.K),ds(z,"RID",O),ds(z,"AID",f.T),ua(f,z),f.m&&f.o&&ro(z,f.m,f.o),O=new ci(f,f.j,O,f.B+1),f.m===null&&(O.H=f.o),I&&(f.i=I.D.concat(f.i)),I=io(f,O,1e3),O.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Gd(f.h,O),ac(O,z,I)}function ua(f,I){f.H&&D(f.H,function(O,z){ds(I,z,O)}),f.l&&Ja({},function(O,z){ds(I,z,O)})}function io(f,I,O){O=Math.min(f.i.length,O);var z=f.l?v(f.l.Na,f.l,f):null;e:{var oe=f.i;let ge=-1;for(;;){const Be=["count="+O];ge==-1?0<O?(ge=oe[0].g,Be.push("ofs="+ge)):ge=0:Be.push("ofs="+ge);let as=!0;for(let tn=0;tn<O;tn++){let Xt=oe[tn].g;const ln=oe[tn].map;if(Xt-=ge,0>Xt)ge=Math.max(0,oe[tn].g-100),as=!1;else try{gm(ln,Be,"req"+Xt+"_")}catch(Gs){z&&z(ln)}}if(as){z=Be.join("&");break e}}}return f=f.i.splice(0,O),I.D=f,z}function il(f){if(!f.g&&!f.u){f.Y=1;var I=f.Fa;K||ne(),G||(K(),G=!0),te.add(I,f),f.v=0}}function fc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=kr(v(f.Fa,f),vm(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ym(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=kr(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cs(10),pi(this),ym(this))};function Yd(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function ym(f){f.g=new ci(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var I=Tr(f.qa);ds(I,"RID","rpc"),ds(I,"SID",f.K),ds(I,"AID",f.T),ds(I,"CI",f.F?"0":"1"),!f.F&&f.ja&&ds(I,"TO",f.ja),ds(I,"TYPE","xmlhttp"),ua(f,I),f.m&&f.o&&ro(I,f.m,f.o),f.L&&(f.g.I=f.L);var O=f.g;f=f.ia,O.L=1,O.v=to(Tr(I)),O.m=null,O.P=!0,zd(O,f)}t.Za=function(){this.C!=null&&(this.C=null,pi(this),fc(this),cs(19))};function gc(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function xc(f,I){var O=null;if(f.g==I){gc(f),Yd(f),f.g=null;var z=2}else if(qn(f.h,I))O=I.D,cm(f.h,I),z=1;else return;if(f.G!=0){if(I.o)if(z==1){O=I.m?I.m.length:0,I=Date.now()-I.F;var oe=f.B;z=li(),Qt(z,new zr(z,O)),Bi(f)}else il(f);else if(oe=I.s,oe==3||oe==0&&0<I.X||!(z==1&&Zg(f,I)||z==2&&fc(f)))switch(O&&0<O.length&&(I=f.h,I.i=I.i.concat(O)),oe){case 1:ha(f,5);break;case 4:ha(f,10);break;case 3:ha(f,6);break;default:ha(f,2)}}}function vm(f,I){let O=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(O*=2),O*I}function ha(f,I){if(f.j.info("Error code "+I),I==2){var O=v(f.fb,f),z=f.Xa;const oe=!z;z=new la(z||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||sl(z,"https"),to(z),oe?Xg(z.toString(),O):fm(z.toString(),O)}else cs(2);f.G=0,f.l&&f.l.sa(I),bm(f),mc(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),cs(2)):(this.j.info("Failed to ping google.com"),cs(1))};function bm(f){if(f.G=0,f.ka=[],f.l){const I=dm(f.h);(I.length!=0||f.i.length!=0)&&(C(f.ka,I),C(f.ka,f.i),f.h.i.length=0,S(f.i),f.i.length=0),f.l.ra()}}function _m(f,I,O){var z=O instanceof la?Tr(O):new la(O);if(z.g!="")I&&(z.g=I+"."+z.g),Za(z,z.s);else{var oe=d.location;z=oe.protocol,I=I?I+"."+oe.hostname:oe.hostname,oe=+oe.port;var ge=new la(null);z&&sl(ge,z),I&&(ge.g=I),oe&&Za(ge,oe),O&&(ge.l=O),z=ge}return O=f.D,I=f.ya,O&&I&&ds(z,O,I),ds(z,"VER",f.la),ua(f,z),z}function wm(f,I,O){if(I&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=f.Ca&&!f.pa?new js(new ca({eb:O})):new js(f.pa),I.Ha(f.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jd(){}t=Jd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yc(){}yc.prototype.g=function(f,I){return new Kn(f,I)};function Kn(f,I){xt.call(this),this.g=new Xd(I),this.l=f,this.h=I&&I.messageUrlParams||null,f=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(f?f["X-WebChannel-Content-Type"]=I.messageContentType:f={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(f?f["X-WebChannel-Client-Profile"]=I.va:f={"X-WebChannel-Client-Profile":I.va}),this.g.S=f,(f=I&&I.Sb)&&!M(f)&&(this.g.m=f),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!M(I)&&(this.g.D=I,f=this.h,f!==null&&I in f&&(f=this.h,I in f&&delete f[I])),this.j=new $i(this)}N(Kn,xt),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){gn(this.g)},Kn.prototype.o=function(f){var I=this.g;if(typeof f=="string"){var O={};O.__data__=f,f=O}else this.u&&(O={},O.__data__=Nr(f),f=O);I.i.push(new om(I.Ya++,f)),I.G==3&&Bi(I)},Kn.prototype.N=function(){this.g.l=null,delete this.j,gn(this.g),delete this.g,Kn.aa.N.call(this)};function jm(f){rt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var I=f.__sm__;if(I){e:{for(const O in I){f=O;break e}f=void 0}(this.i=f)&&(f=this.i,I=I!==null&&f in I?I[f]:void 0),this.data=I}else this.data=f}N(jm,rt);function Sm(){Et.call(this),this.status=1}N(Sm,Et);function $i(f){this.g=f}N($i,Jd),$i.prototype.ua=function(){Qt(this.g,"a")},$i.prototype.ta=function(f){Qt(this.g,new jm(f))},$i.prototype.sa=function(f){Qt(this.g,new Sm)},$i.prototype.ra=function(){Qt(this.g,"b")},yc.prototype.createWebChannel=yc.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,wT=function(){return new yc},_T=function(){return li()},bT=is,Jv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,sf=ar,Li.COMPLETE="complete",vT=Li,Ge.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Mu=Ge,js.prototype.listenOnce=js.prototype.L,js.prototype.getLastError=js.prototype.Ka,js.prototype.getLastErrorCode=js.prototype.Ba,js.prototype.getStatus=js.prototype.Z,js.prototype.getResponseJson=js.prototype.Oa,js.prototype.getResponseText=js.prototype.oa,js.prototype.send=js.prototype.ea,js.prototype.setWithCredentials=js.prototype.Ha,yT=js}).apply(typeof _p!="undefined"?_p:typeof self!="undefined"?self:typeof window!="undefined"?window:{});const rj="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new t1("@firebase/firestore");function Nu(){return Gl.logLevel}function Je(t,...e){if(Gl.logLevel<=Kt.DEBUG){const s=e.map(m1);Gl.debug(`Firestore (${Ld}): ${t}`,...s)}}function Ua(t,...e){if(Gl.logLevel<=Kt.ERROR){const s=e.map(m1);Gl.error(`Firestore (${Ld}): ${t}`,...s)}}function fd(t,...e){if(Gl.logLevel<=Kt.WARN){const s=e.map(m1);Gl.warn(`Firestore (${Ld}): ${t}`,...s)}}function m1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t="Unexpected state"){const e=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: `+t;throw Ua(e),new Error(e)}function os(t,e){t||_t()}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Ka{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(On.UNAUTHENTICATED)))}shutdown(){}}class M9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class F9{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){os(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let a=new Ma;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ma,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},d=u=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>d(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ma)}}),0),l()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(os(typeof r.accessToken=="string"),new jT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return os(e===null||typeof e=="string"),new On(e)}}class B9{constructor(e,s,r){this.l=e,this.h=s,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $9{constructor(e,s,r){this.l=e,this.h=s,this.P=r}getToken(){return Promise.resolve(new B9(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable((()=>s(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){os(this.o===void 0);const r=a=>{a.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,Je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(os(typeof s.token=="string"),this.R=s.token,new O9(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=U9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<s&&(r+=e.charAt(i[a]%e.length))}return r}}function ts(t,e){return t<e?-1:t>e?1:0}function gd(t,e,s){return t.length===e.length&&t.every(((r,i)=>s(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Oe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Oe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new Oe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $s.fromMillis(Date.now())}static fromDate(e){return $s.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*s));return new $s(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ts(this.nanoseconds,e.nanoseconds):ts(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new $s(0,0))}static max(){return new St(new $s(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,s,r){s===void 0?s=0:s>e.length&&_t(),r===void 0?r=e.length-s:r>e.length-s&&_t(),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return fh.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof fh?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const a=e.get(i),l=s.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class ms extends fh{construct(e,s,r){return new ms(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((i=>i.length>0)))}return new ms(s)}static emptyPath(){return new ms([])}}const z9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends fh{construct(e,s,r){return new Nn(e,s,r)}static isValidIdentifier(e){return z9.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nn(["__name__"])}static fromServerFormat(e){const s=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Oe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Oe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Oe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Oe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(s)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(ms.fromString(e))}static fromName(e){return new nt(ms.fromString(e).popFirst(5))}static empty(){return new nt(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ms.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ms.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new ms(e.slice()))}}function H9(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=St.fromTimestamp(r===1e9?new $s(s+1,0):new $s(s,r));return new Uo(i,nt.empty(),e)}function G9(t){return new Uo(t.readTime,t.key,-1)}class Uo{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Uo(St.min(),nt.empty(),-1)}static max(){return new Uo(St.max(),nt.empty(),-1)}}function W9(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=nt.comparator(t.documentKey,e.documentKey),s!==0?s:ts(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==q9)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new Ee(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(r,i)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof Ee?s:Ee.resolve(s)}catch(s){return Ee.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):Ee.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):Ee.reject(s)}static resolve(e){return new Ee(((s,r)=>{s(e)}))}static reject(e){return new Ee(((s,r)=>{r(e)}))}static waitFor(e){return new Ee(((s,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&s()}),(u=>r(u)))})),l=!0,a===i&&s()}))}static or(e){let s=Ee.resolve(!1);for(const r of e)s=s.next((i=>i?Ee.resolve(i):r()));return s}static forEach(e,s){const r=[];return e.forEach(((i,a)=>{r.push(s.call(this,i,a))})),this.waitFor(r)}static mapArray(e,s){return new Ee(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const h=u;s(e[h]).next((m=>{l[h]=m,++d,d===a&&r(l)}),(m=>i(m)))}}))}static doWhile(e,s){return new Ee(((r,i)=>{const a=()=>{e()===!0?s().next((()=>{a()}),i):r()};a()}))}}function Q9(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function $h(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ie(r),this.se=r=>s.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}p1.oe=-1;function xg(t){return t==null}function Af(t){return t===0&&1/t==-1/0}function X9(t){return typeof t=="number"&&Number.isInteger(t)&&!Af(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Zl(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,s){this.comparator=e,this.root=s||wn.EMPTY}insert(e,s){return new Rs(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Rs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wp(this.root,e,this.comparator,!1)}getReverseIterator(){return new wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wp(this.root,e,this.comparator,!0)}}class wp{constructor(e,s,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?r(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,s,r,i,a){this.key=e,this.value=s,this.color=r!=null?r:wn.RED,this.left=i!=null?i:wn.EMPTY,this.right=a!=null?a:wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,i,a){return new wn(e!=null?e:this.key,s!=null?s:this.value,r!=null?r:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,r),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(e,s,r,i,a){return this}insert(e,s,r){return new wn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Rs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new aj(this.data.getIterator())}getIteratorFrom(e){return new aj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Tn(this.comparator);return s.data=e,s}}class aj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Br([])}unionWith(e){let s=new Tn(Nn.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Br(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(i){try{return atob(i)}catch(a){throw typeof DOMException!="undefined"&&a instanceof DOMException?new kT("Invalid base64 string: "+a):a}})(e);return new An(s)}static fromUint8Array(e){const s=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new An(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ts(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const Y9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(t){if(os(!!t),typeof t=="string"){let e=0;const s=Y9.exec(t);if(os(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hs(t.seconds),nanos:Hs(t.nanos)}}function Hs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wl(t){return typeof t=="string"?An.fromBase64String(t):An.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function f1(t){const e=t.mapValue.fields.__previous_value__;return yg(e)?f1(e):e}function gh(t){const e=zo(t.mapValue.fields.__local_write_time__.timestampValue);return new $s(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,s,r,i,a,l,d,u,h){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h}}class xh{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={mapValue:{}};function ql(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yg(t)?4:e7(t)?9007199254740991:Z9(t)?10:11:_t()}function ra(t,e){if(t===e)return!0;const s=ql(t);if(s!==ql(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gh(t).isEqual(gh(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=zo(i.timestampValue),d=zo(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Wl(i.bytesValue).isEqual(Wl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Hs(i.geoPointValue.latitude)===Hs(a.geoPointValue.latitude)&&Hs(i.geoPointValue.longitude)===Hs(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Hs(i.integerValue)===Hs(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Hs(i.doubleValue),d=Hs(a.doubleValue);return l===d?Af(l)===Af(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return gd(t.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(ij(l)!==ij(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!ra(l[u],d[u])))return!1;return!0})(t,e);default:return _t()}}function yh(t,e){return(t.values||[]).find((s=>ra(s,e)))!==void 0}function xd(t,e){if(t===e)return 0;const s=ql(t),r=ql(e);if(s!==r)return ts(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ts(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Hs(a.integerValue||a.doubleValue),u=Hs(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1})(t,e);case 3:return oj(t.timestampValue,e.timestampValue);case 4:return oj(gh(t),gh(e));case 5:return ts(t.stringValue,e.stringValue);case 6:return(function(a,l){const d=Wl(a),u=Wl(l);return d.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const m=ts(d[h],u[h]);if(m!==0)return m}return ts(d.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=ts(Hs(a.latitude),Hs(l.latitude));return d!==0?d:ts(Hs(a.longitude),Hs(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return lj(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var d,u,h,m;const g=a.fields||{},v=l.fields||{},b=(d=g.value)===null||d===void 0?void 0:d.arrayValue,N=(u=v.value)===null||u===void 0?void 0:u.arrayValue,S=ts(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:lj(b,N)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===jp.mapValue&&l===jp.mapValue)return 0;if(a===jp.mapValue)return 1;if(l===jp.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),h=l.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const v=ts(u[g],m[g]);if(v!==0)return v;const b=xd(d[u[g]],h[m[g]]);if(b!==0)return b}return ts(u.length,m.length)})(t.mapValue,e.mapValue);default:throw _t()}}function oj(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ts(t,e);const s=zo(t),r=zo(e),i=ts(s.seconds,r.seconds);return i!==0?i:ts(s.nanos,r.nanos)}function lj(t,e){const s=t.values||[],r=e.values||[];for(let i=0;i<s.length&&i<r.length;++i){const a=xd(s[i],r[i]);if(a)return a}return ts(s.length,r.length)}function yd(t){return Zv(t)}function Zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(s){const r=zo(s);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(s){return Wl(s).toBase64()})(t.bytesValue):"referenceValue"in t?(function(s){return nt.fromName(s).toString()})(t.referenceValue):"geoPointValue"in t?(function(s){return`geo(${s.latitude},${s.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(s){let r="[",i=!0;for(const a of s.values||[])i?i=!1:r+=",",r+=Zv(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(s){const r=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Zv(s.fields[l])}`;return i+"}"})(t.mapValue):_t()}function If(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function e0(t){return!!t&&"integerValue"in t}function g1(t){return!!t&&"arrayValue"in t}function cj(t){return!!t&&"nullValue"in t}function dj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nf(t){return!!t&&"mapValue"in t}function Z9(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zl(t.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Ku(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Ku(t.arrayValue.values[s]);return e}return Object.assign({},t)}function e7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!nf(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(s)}setAll(e){let s=Nn.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!s.isImmediateParentOf(d)){const u=this.getFieldsMap(s);this.applyChanges(u,r,i),r={},i=[],s=d.popLast()}l?r[d.lastSegment()]=Ku(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(s);this.applyChanges(a,r,i)}delete(e){const s=this.field(e.popLast());nf(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=s.mapValue.fields[e.get(r)];nf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,r){Zl(s,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new _r(Ku(this.value))}}function CT(t){const e=[];return Zl(t.fields,((s,r)=>{const i=new Nn([s]);if(nf(r)){const a=CT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,s,r,i,a,l,d){this.key=e,this.documentType=s,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Un(e,0,St.min(),St.min(),St.min(),_r.empty(),0)}static newFoundDocument(e,s,r,i){return new Un(e,1,s,St.min(),r,i,0)}static newNoDocument(e,s){return new Un(e,2,s,St.min(),St.min(),_r.empty(),0)}static newUnknownDocument(e,s){return new Un(e,3,s,St.min(),St.min(),_r.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,s){this.position=e,this.inclusive=s}}function uj(t,e,s){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=nt.comparator(nt.fromName(l.referenceValue),s.key):r=xd(l,s.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function hj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!ra(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,s="asc"){this.field=e,this.dir=s}}function t7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{}class Js extends TT{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new n7(e,s,r):s==="array-contains"?new a7(e,r):s==="in"?new o7(e,r):s==="not-in"?new l7(e,r):s==="array-contains-any"?new c7(e,r):new Js(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new r7(e,r):new i7(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(xd(s,this.value)):s!==null&&ql(this.value)===ql(s)&&this.matchesComparison(xd(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends TT{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new Ti(e,s)}matches(e){return ET(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ET(t){return t.op==="and"}function AT(t){return s7(t)&&ET(t)}function s7(t){for(const e of t.filters)if(e instanceof Ti)return!1;return!0}function t0(t){if(t instanceof Js)return t.field.canonicalString()+t.op.toString()+yd(t.value);if(AT(t))return t.filters.map((e=>t0(e))).join(",");{const e=t.filters.map((s=>t0(s))).join(",");return`${t.op}(${e})`}}function IT(t,e){return t instanceof Js?(function(r,i){return i instanceof Js&&r.op===i.op&&r.field.isEqual(i.field)&&ra(r.value,i.value)})(t,e):t instanceof Ti?(function(r,i){return i instanceof Ti&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&IT(l,i.filters[d])),!0):!1})(t,e):void _t()}function PT(t){return t instanceof Js?(function(s){return`${s.field.canonicalString()} ${s.op} ${yd(s.value)}`})(t):t instanceof Ti?(function(s){return s.op.toString()+" {"+s.getFilters().map(PT).join(" ,")+"}"})(t):"Filter"}class n7 extends Js{constructor(e,s,r){super(e,s,r),this.key=nt.fromName(r.referenceValue)}matches(e){const s=nt.comparator(e.key,this.key);return this.matchesComparison(s)}}class r7 extends Js{constructor(e,s){super(e,"in",s),this.keys=RT("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class i7 extends Js{constructor(e,s){super(e,"not-in",s),this.keys=RT("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function RT(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map((r=>nt.fromName(r.referenceValue)))}class a7 extends Js{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return g1(s)&&yh(s.arrayValue,this.value)}}class o7 extends Js{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&yh(this.value.arrayValue,s)}}class l7 extends Js{constructor(e,s){super(e,"not-in",s)}matches(e){if(yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!yh(this.value.arrayValue,s)}}class c7 extends Js{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!g1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>yh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,s=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ue=null}}function mj(t,e=null,s=[],r=[],i=null,a=null,l=null){return new d7(t,e,s,r,i,a,l)}function x1(t){const e=Nt(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>t0(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),xg(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>yd(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>yd(r))).join(",")),e.ue=s}return e.ue}function y1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!t7(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!IT(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hj(t.startAt,e.startAt)&&hj(t.endAt,e.endAt)}function s0(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,s=null,r=[],i=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function u7(t,e,s,r,i,a,l,d){return new Qa(t,e,s,r,i,a,l,d)}function v1(t){return new Qa(t)}function pj(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function b1(t){return t.collectionGroup!==null}function cd(t){const e=Nt(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Tn(Nn.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new vh(a,r))})),s.has(Nn.keyField().canonicalString())||e.ce.push(new vh(Nn.keyField(),r))}return e.ce}function Yi(t){const e=Nt(t);return e.le||(e.le=h7(e,cd(t))),e.le}function h7(t,e){if(t.limitType==="F")return mj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new vh(i.field,a)}));const s=t.endAt?new vd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vd(t.startAt.position,t.startAt.inclusive):null;return mj(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function n0(t,e){const s=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Pf(t,e,s){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function vg(t,e){return y1(Yi(t),Yi(e))&&t.limitType===e.limitType}function LT(t){return`${x1(Yi(t))}|lt:${t.limitType}`}function qc(t){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((i=>PT(i))).join(", ")}]`),xg(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((i=>yd(i))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((i=>yd(i))).join(",")),`Target(${r})`})(Yi(t))}; limitType=${t.limitType})`}function bg(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):nt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of cd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,u){const h=uj(l,d,u);return l.inclusive?h<=0:h<0})(r.startAt,cd(r),i)||r.endAt&&!(function(l,d,u){const h=uj(l,d,u);return l.inclusive?h>=0:h>0})(r.endAt,cd(r),i))})(t,e)}function m7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DT(t){return(e,s)=>{let r=!1;for(const i of cd(t)){const a=p7(i,e,s);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function p7(t,e,s){const r=t.field.isKeyField()?nt.comparator(e.key,s.key):(function(a,l,d){const u=l.data.field(a),h=d.data.field(a);return u!==null&&h!==null?xd(u,h):_t()})(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,((s,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new Rs(nt.comparator);function za(){return f7}const MT=new Rs(nt.comparator);function Fu(...t){let e=MT;for(const s of t)e=e.insert(s.key,s);return e}function FT(t){let e=MT;return t.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function Ll(){return Qu()}function BT(){return Qu()}function Qu(){return new Dd((t=>t.toString()),((t,e)=>t.isEqual(e)))}const g7=new Rs(nt.comparator),x7=new Tn(nt.comparator);function zt(...t){let e=x7;for(const s of t)e=e.add(s);return e}const y7=new Tn(ts);function v7(){return y7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function $T(t){return{integerValue:""+t}}function b7(t,e){return X9(e)?$T(e):_1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this._=void 0}}function _7(t,e,s){return t instanceof bh?(function(i,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&yg(a)&&(a=f1(a)),a&&(l.fields.__previous_value__=a),{mapValue:l}})(s,e):t instanceof _h?VT(t,e):t instanceof wh?UT(t,e):(function(i,a){const l=OT(i,a),d=fj(l)+fj(i.Pe);return e0(l)&&e0(i.Pe)?$T(d):_1(i.serializer,d)})(t,e)}function w7(t,e,s){return t instanceof _h?VT(t,e):t instanceof wh?UT(t,e):s}function OT(t,e){return t instanceof Rf?(function(r){return e0(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class bh extends _g{}class _h extends _g{constructor(e){super(),this.elements=e}}function VT(t,e){const s=zT(e);for(const r of t.elements)s.some((i=>ra(i,r)))||s.push(r);return{arrayValue:{values:s}}}class wh extends _g{constructor(e){super(),this.elements=e}}function UT(t,e){let s=zT(e);for(const r of t.elements)s=s.filter((i=>!ra(i,r)));return{arrayValue:{values:s}}}class Rf extends _g{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function fj(t){return Hs(t.integerValue||t.doubleValue)}function zT(t){return g1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,s){this.field=e,this.transform=s}}function S7(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof _h&&i instanceof _h||r instanceof wh&&i instanceof wh?gd(r.elements,i.elements,ra):r instanceof Rf&&i instanceof Rf?ra(r.Pe,i.Pe):r instanceof bh&&i instanceof bh})(t.transform,e.transform)}class N7{constructor(e,s){this.version=e,this.transformResults=s}}class ii{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wg{}function HT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w1(t.key,ii.none()):new Oh(t.key,t.data,ii.none());{const s=t.data,r=_r.empty();let i=new Tn(Nn.comparator);for(let a of e.fields)if(!i.has(a)){let l=s.field(a);l===null&&a.length>1&&(a=a.popLast(),l=s.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Ko(t.key,r,new Br(i.toArray()),ii.none())}}function k7(t,e,s){t instanceof Oh?(function(i,a,l){const d=i.value.clone(),u=xj(i.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,s):t instanceof Ko?(function(i,a,l){if(!rf(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=xj(i.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(GT(i)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,s):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,s)}function Xu(t,e,s,r){return t instanceof Oh?(function(a,l,d,u){if(!rf(a.precondition,l))return d;const h=a.value.clone(),m=yj(a.fieldTransforms,u,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,s,r):t instanceof Ko?(function(a,l,d,u){if(!rf(a.precondition,l))return d;const h=yj(a.fieldTransforms,u,l),m=l.data;return m.setAll(GT(a)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,s,r):(function(a,l,d){return rf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,s)}function C7(t,e){let s=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=OT(r.transform,i||null);a!=null&&(s===null&&(s=_r.empty()),s.set(r.field,a))}return s||null}function gj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gd(r,i,((a,l)=>S7(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oh extends wg{constructor(e,s,r,i=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ko extends wg{constructor(e,s,r,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GT(t){const e=new Map;return t.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}})),e}function xj(t,e,s){const r=new Map;os(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,w7(l,d,s[i]))}return r}function yj(t,e,s){const r=new Map;for(const i of t){const a=i.transform,l=s.data.field(i.field);r.set(i.field,_7(a,l,e))}return r}class w1 extends wg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T7 extends wg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,s,r,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&k7(a,e,r[i])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Xu(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Xu(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=BT();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=s.has(i.key)?null:d;const u=HT(l,d);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(St.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),zt())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,((s,r)=>gj(s,r)))&&gd(this.baseMutations,e.baseMutations,((s,r)=>gj(s,r)))}}class j1{constructor(e,s,r,i){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(e,s,r){os(e.mutations.length===r.length);let i=(function(){return g7})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new j1(e,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks,Yt;function P7(t){switch(t){default:return _t();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function WT(t){if(t===void 0)return Ua("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Ks.OK:return ve.OK;case Ks.CANCELLED:return ve.CANCELLED;case Ks.UNKNOWN:return ve.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return ve.INTERNAL;case Ks.UNAVAILABLE:return ve.UNAVAILABLE;case Ks.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Ks.NOT_FOUND:return ve.NOT_FOUND;case Ks.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Ks.ABORTED:return ve.ABORTED;case Ks.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Ks.DATA_LOSS:return ve.DATA_LOSS;default:return _t()}}(Yt=Ks||(Ks={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new $l([4294967295,4294967295],0);function vj(t){const e=R7().encode(t),s=new xT;return s.update(e),new Uint8Array(s.digest())}function bj(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $l([s,r],0),new $l([i,a],0)]}class S1{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Bu(`Invalid padding: ${s}`);if(r<0)throw new Bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=$l.fromNumber(this.Ie)}Ee(e,s,r){let i=e.add(s.multiply($l.fromNumber(r)));return i.compare(L7)===1&&(i=new $l([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=vj(e),[r,i]=bj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);if(!this.de(l))return!1}return!0}static create(e,s,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new S1(a,i,s);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.Ie===0)return;const s=vj(e),[r,i]=bj(s);for(let a=0;a<this.hashCount;a++){const l=this.Ee(r,i,a);this.Ae(l)}}Ae(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,s,r,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const i=new Map;return i.set(e,Vh.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new jg(St.min(),i,new Rs(ts),za(),zt())}}class Vh{constructor(e,s,r,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Vh(r,s,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,s,r,i){this.Re=e,this.removedTargetIds=s,this.key=r,this.Ve=i}}class qT{constructor(e,s){this.targetId=e,this.me=s}}class KT{constructor(e,s,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=i}}class _j{constructor(){this.fe=0,this.ge=jj(),this.pe=An.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=zt(),s=zt(),r=zt();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:_t()}})),new Vh(this.pe,this.ye,e,s,r)}Ce(){this.we=!1,this.ge=jj()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,os(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D7{constructor(e){this.Le=e,this.Be=new Map,this.ke=za(),this.qe=wj(),this.Qe=new Rs(ts)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,(s=>{const r=this.Ge(s);switch(e.state){case 0:this.ze(s)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),r.De(e.resumeToken));break;default:_t()}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach(((r,i)=>{this.ze(i)&&s(i)}))}He(e){const s=e.targetId,r=e.me.count,i=this.Je(s);if(i){const a=i.target;if(s0(a))if(r===0){const l=new nt(a.path);this.Ue(s,l,Un.newNoDocument(l,St.min()))}else os(r===1);else{const l=this.Ye(s);if(l!==r){const d=this.Ze(e),u=d?this.Xe(d,e,l):1;if(u!==0){this.je(s);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,h)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=s;let l,d;try{l=Wl(r).toUint8Array()}catch(u){if(u instanceof kT)return fd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new S1(l,i,a)}catch(u){return fd(u instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.Ie===0?null:d}Xe(e,s,r){return s.me.count===r-this.nt(e,s.targetId)?0:2}nt(e,s){const r=this.Le.getRemoteKeysForTarget(s);let i=0;return r.forEach((a=>{const l=this.Le.tt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(s,a,null),i++)})),i}rt(e){const s=new Map;this.Be.forEach(((a,l)=>{const d=this.Je(l);if(d){if(a.current&&s0(d.target)){const u=new nt(d.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,Un.newNoDocument(u,e))}a.be&&(s.set(l,a.ve()),a.Ce())}}));let r=zt();this.qe.forEach(((a,l)=>{let d=!0;l.forEachWhile((u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,l)=>l.setReadTime(e)));const i=new jg(e,s,this.Qe,this.ke,r);return this.ke=za(),this.qe=wj(),this.Qe=new Rs(ts),i}$e(e,s){if(!this.ze(e))return;const r=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,r),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),r&&(this.ke=this.ke.insert(s,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new _j,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new Tn(ts),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||Je("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _j),this.Le.getRemoteKeysForTarget(e).forEach((s=>{this.Ue(e,s,null)}))}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function wj(){return new Rs(nt.comparator)}function jj(){return new Rs(nt.comparator)}const M7={asc:"ASCENDING",desc:"DESCENDING"},F7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B7={and:"AND",or:"OR"};class $7{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function r0(t,e){return t.useProto3Json||xg(e)?e:{value:e}}function Lf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O7(t,e){return Lf(t,e.toTimestamp())}function Ji(t){return os(!!t),St.fromTimestamp((function(s){const r=zo(s);return new $s(r.seconds,r.nanos)})(t))}function N1(t,e){return i0(t,e).canonicalString()}function i0(t,e){const s=(function(i){return new ms(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?s:s.child(e)}function XT(t){const e=ms.fromString(t);return os(t3(e)),e}function a0(t,e){return N1(t.databaseId,e.path)}function Ly(t,e){const s=XT(e);if(s.get(1)!==t.databaseId.projectId)throw new Oe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Oe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new nt(JT(s))}function YT(t,e){return N1(t.databaseId,e)}function V7(t){const e=XT(t);return e.length===4?ms.emptyPath():JT(e)}function o0(t){return new ms(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JT(t){return os(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sj(t,e,s){return{name:a0(t,e),fields:s.value.mapValue.fields}}function U7(t,e){let s;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_t()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,m){return h.useProto3Json?(os(m===void 0||typeof m=="string"),An.fromBase64String(m||"")):(os(m===void 0||m instanceof Buffer||m instanceof Uint8Array),An.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const m=h.code===void 0?ve.UNKNOWN:WT(h.code);return new Oe(m,h.message||"")})(l);s=new KT(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ly(t,r.document.name),a=Ji(r.document.updateTime),l=r.document.createTime?Ji(r.document.createTime):St.min(),d=new _r({mapValue:{fields:r.document.fields}}),u=Un.newFoundDocument(i,a,l,d),h=r.targetIds||[],m=r.removedTargetIds||[];s=new af(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ly(t,r.document),a=r.readTime?Ji(r.readTime):St.min(),l=Un.newNoDocument(i,a),d=r.removedTargetIds||[];s=new af([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ly(t,r.document),a=r.removedTargetIds||[];s=new af([],a,i,null)}else{if(!("filter"in e))return _t();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new I7(i,a),d=r.targetId;s=new qT(d,l)}}return s}function z7(t,e){let s;if(e instanceof Oh)s={update:Sj(t,e.key,e.value)};else if(e instanceof w1)s={delete:a0(t,e.key)};else if(e instanceof Ko)s={update:Sj(t,e.key,e.data),updateMask:J7(e.fieldMask)};else{if(!(e instanceof T7))return _t();s={verify:a0(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof bh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _h)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rf)return{fieldPath:l.field.canonicalString(),increment:d.Pe};throw _t()})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:O7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_t()})(t,e.precondition)),s}function H7(t,e){return t&&t.length>0?(os(e!==void 0),t.map((s=>(function(i,a){let l=i.updateTime?Ji(i.updateTime):Ji(a);return l.isEqual(St.min())&&(l=Ji(a)),new N7(l,i.transformResults||[])})(s,e)))):[]}function G7(t,e){return{documents:[YT(t,e.path)]}}function W7(t,e){const s={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=YT(t,i);const a=(function(h){if(h.length!==0)return e3(Ti.create(h,"and"))})(e.filters);a&&(s.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:Kc(v.field),direction:Q7(v.dir)}})(m)))})(e.orderBy);l&&(s.structuredQuery.orderBy=l);const d=r0(t,e.limit);return d!==null&&(s.structuredQuery.limit=d),e.startAt&&(s.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:s,parent:i}}function q7(t){let e=V7(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){os(r===1);const m=s.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];s.where&&(a=(function(g){const v=ZT(g);return v instanceof Ti&&AT(v)?v.getFilters():[v]})(s.where));let l=[];s.orderBy&&(l=(function(g){return g.map((v=>(function(N){return new vh(Qc(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(v)))})(s.orderBy));let d=null;s.limit&&(d=(function(g){let v;return v=typeof g=="object"?g.value:g,xg(v)?null:v})(s.limit));let u=null;s.startAt&&(u=(function(g){const v=!!g.before,b=g.values||[];return new vd(b,v)})(s.startAt));let h=null;return s.endAt&&(h=(function(g){const v=!g.before,b=g.values||[];return new vd(b,v)})(s.endAt)),u7(e,i,l,a,d,"F",u,h)}function K7(t,e){const s=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function ZT(t){return t.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=Qc(s.unaryFilter.field);return Js.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qc(s.unaryFilter.field);return Js.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qc(s.unaryFilter.field);return Js.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Qc(s.unaryFilter.field);return Js.create(l,"!=",{nullValue:"NULL_VALUE"});default:return _t()}})(t):t.fieldFilter!==void 0?(function(s){return Js.create(Qc(s.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}})(s.fieldFilter.op),s.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(s){return Ti.create(s.compositeFilter.filters.map((r=>ZT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _t()}})(s.compositeFilter.op))})(t):_t()}function Q7(t){return M7[t]}function X7(t){return F7[t]}function Y7(t){return B7[t]}function Kc(t){return{fieldPath:t.canonicalString()}}function Qc(t){return Nn.fromServerFormat(t.fieldPath)}function e3(t){return t instanceof Js?(function(s){if(s.op==="=="){if(dj(s.value))return{unaryFilter:{field:Kc(s.field),op:"IS_NAN"}};if(cj(s.value))return{unaryFilter:{field:Kc(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(dj(s.value))return{unaryFilter:{field:Kc(s.field),op:"IS_NOT_NAN"}};if(cj(s.value))return{unaryFilter:{field:Kc(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(s.field),op:X7(s.op),value:s.value}}})(t):t instanceof Ti?(function(s){const r=s.getFilters().map((i=>e3(i)));return r.length===1?r[0]:{compositeFilter:{op:Y7(s.op),filters:r}}})(t):_t()}function J7(t){const e=[];return t.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function t3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,s,r,i,a=St.min(),l=St.min(),d=An.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.ct=e}}function eF(t){const e=q7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.un=new sF}addToCollectionParentIndex(e,s){return this.un.add(s),Ee.resolve()}getCollectionParents(e,s){return Ee.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return Ee.resolve()}deleteFieldIndex(e,s){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,s){return Ee.resolve()}getDocumentsMatchingTarget(e,s){return Ee.resolve(null)}getIndexType(e,s){return Ee.resolve(0)}getFieldIndexes(e,s){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,s){return Ee.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,s){return Ee.resolve(Uo.min())}updateCollectionGroup(e,s,r){return Ee.resolve()}updateIndexEntries(e,s){return Ee.resolve()}}class sF{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s]||new Tn(ms.comparator),a=!i.has(r);return this.index[s]=i.add(r),a}has(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(ms.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bd(0)}static kn(){return new bd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(){this.changes=new Dd((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?Ee.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,s,r,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,s)))).next((i=>(r!==null&&Xu(r.mutation,i,Br.empty(),$s.now()),i)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,zt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=zt()){const i=Ll();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,r).next((a=>{let l=Fu();return a.forEach(((d,u)=>{l=l.insert(d,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,s){const r=Ll();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,zt())))}populateOverlays(e,s,r){const i=[];return r.forEach((a=>{s.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{s.set(l,d)}))}))}computeViews(e,s,r,i){let a=za();const l=Qu(),d=(function(){return Qu()})();return s.forEach(((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Ko)?a=a.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),Xu(m.mutation,h,m.mutation.getFieldMask(),$s.now())):l.set(h.key,Br.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((h,m)=>l.set(h,m))),s.forEach(((h,m)=>{var g;return d.set(h,new rF(m,(g=l.get(h))!==null&&g!==void 0?g:null))})),d)))}recalculateAndSaveOverlays(e,s){const r=Qu();let i=new Rs(((l,d)=>l-d)),a=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((l=>{for(const d of l)d.keys().forEach((u=>{const h=s.get(u);if(h===null)return;let m=r.get(u)||Br.empty();m=d.applyToLocalView(h,m),r.set(u,m);const g=(i.get(d.batchId)||zt()).add(u);i=i.insert(d.batchId,g)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,m=u.value,g=BT();m.forEach((v=>{if(!a.has(v)){const b=HT(s.get(v),r.get(v));b!==null&&g.set(v,b),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,g))}return Ee.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,i){return(function(l){return nt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):b1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,i):this.getDocumentsMatchingCollectionQuery(e,s,r,i)}getNextDocuments(e,s,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,i-a.size):Ee.resolve(Ll());let d=-1,u=a;return l.next((h=>Ee.forEach(h,((m,g)=>(d<g.largestBatchId&&(d=g.largestBatchId),a.get(m)?Ee.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{u=u.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,u,h,zt()))).next((m=>({batchId:d,changes:FT(m)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new nt(s)).next((r=>{let i=Fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,i){const a=s.collectionGroup;let l=Fu();return this.indexManager.getCollectionParents(e,a).next((d=>Ee.forEach(d,(u=>{const h=(function(g,v){return new Qa(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(s,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((m=>{m.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,s,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,a,i)))).next((l=>{a.forEach(((u,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,Un.newInvalidDocument(m)))}));let d=Fu();return l.forEach(((u,h)=>{const m=a.get(u);m!==void 0&&Xu(m.mutation,h,Br.empty(),$s.now()),bg(s,h)&&(d=d.insert(u,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return Ee.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,(function(i){return{id:i.id,version:i.version,createTime:Ji(i.createTime)}})(s)),Ee.resolve()}getNamedQuery(e,s){return Ee.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,(function(i){return{name:i.name,query:eF(i.bundledQuery),readTime:Ji(i.readTime)}})(s)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.overlays=new Rs(nt.comparator),this.Ir=new Map}getOverlay(e,s){return Ee.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Ll();return Ee.forEach(s,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((i,a)=>{this.ht(e,s,a)})),Ee.resolve()}removeOverlaysForBatchId(e,s,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),Ee.resolve()}getOverlaysForCollection(e,s,r){const i=Ll(),a=s.length+1,l=new nt(s.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!s.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,s,r,i){let a=new Rs(((h,m)=>h-m));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===s&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=Ll(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const d=Ll(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,m)=>d.set(h,m))),!(d.size()>=i)););return Ee.resolve(d)}ht(e,s,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new A7(s,r));let a=this.Ir.get(s);a===void 0&&(a=zt(),this.Ir.set(s,a)),this.Ir.set(s,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.Tr=new Tn(mn.Er),this.dr=new Tn(mn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const r=new mn(e,s);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Vr(new mn(e,s))}mr(e,s){e.forEach((r=>this.removeReference(r,s)))}gr(e){const s=new nt(new ms([])),r=new mn(s,e),i=new mn(s,e+1),a=[];return this.dr.forEachInRange([r,i],(l=>{this.Vr(l),a.push(l.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new nt(new ms([])),r=new mn(s,e),i=new mn(s,e+1);let a=zt();return this.dr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const s=new mn(e,0),r=this.Tr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return nt.comparator(e.key,s.key)||ts(e.wr,s.wr)}static Ar(e,s){return ts(e.wr,s.wr)||nt.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new Tn(mn.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new E7(a,s,r,i);this.mutationQueue.push(l);for(const d of i)this.br=this.br.add(new mn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Ee.resolve(l)}lookupMutationBatch(e,s){return Ee.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,i=this.vr(r),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new mn(s,0),i=new mn(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],(l=>{const d=this.Dr(l.wr);a.push(d)})),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new Tn(ts);return s.forEach((i=>{const a=new mn(i,0),l=new mn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,l],(d=>{r=r.add(d.wr)}))})),Ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,i=r.length+1;let a=r;nt.isDocumentKey(a)||(a=a.child(""));const l=new mn(new nt(a),0);let d=new Tn(ts);return this.br.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(d=d.add(u.wr)),!0)}),l),Ee.resolve(this.Cr(d))}Cr(e){const s=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&s.push(i)})),s}removeMutationBatch(e,s){os(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ee.forEach(s.mutations,(i=>{const a=new mn(i.key,s.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,s){const r=new mn(s,0),i=this.br.firstAfterOrEqual(r);return Ee.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.Mr=e,this.docs=(function(){return new Rs(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return Ee.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(s))}getEntries(e,s){let r=za();return s.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Un.newInvalidDocument(i))})),Ee.resolve(r)}getDocumentsMatchingQuery(e,s,r,i){let a=za();const l=s.path,d=new nt(l.child("")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||W9(G9(m),r)<=0||(i.has(m.key)||bg(s,m))&&(a=a.insert(m.key,m.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,s,r,i){_t()}Or(e,s){return Ee.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new uF(this)}getSize(e){return Ee.resolve(this.size)}}class uF extends nF{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),Ee.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e){this.persistence=e,this.Nr=new Dd((s=>x1(s)),y1),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Lr=0,this.Br=new k1,this.targetCount=0,this.kr=bd.Bn()}forEachTarget(e,s){return this.Nr.forEach(((r,i)=>s(i))),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.Lr&&(this.Lr=s),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new bd(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,Ee.resolve()}updateTargetData(e,s){return this.Kn(s),Ee.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,s,r){let i=0;const a=[];return this.Nr.forEach(((l,d)=>{d.sequenceNumber<=s&&r.get(d.targetId)===null&&(this.Nr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Ee.waitFor(a).next((()=>i))}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,s){const r=this.Nr.get(s)||null;return Ee.resolve(r)}addMatchingKeys(e,s,r){return this.Br.Rr(s,r),Ee.resolve()}removeMatchingKeys(e,s,r){this.Br.mr(s,r);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),Ee.resolve()}getMatchingKeysForTargetId(e,s){const r=this.Br.yr(s);return Ee.resolve(r)}containsKey(e,s){return Ee.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,s){this.qr={},this.overlays={},this.Qr=new p1(0),this.Kr=!1,this.Kr=!0,this.$r=new lF,this.referenceDelegate=e(this),this.Ur=new hF(this),this.indexManager=new tF,this.remoteDocumentCache=(function(i){return new dF(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new Z7(s),this.Gr=new aF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new oF,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.qr[e.toKey()];return r||(r=new cF(s,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,r){Je("MemoryPersistence","Starting transaction:",e);const i=new pF(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,s){return Ee.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,s))))}}class pF extends K9{constructor(e){super(),this.currentSequenceNumber=e}}class C1{constructor(e){this.persistence=e,this.Jr=new k1,this.Yr=null}static Zr(e){return new C1(e)}get Xr(){if(this.Yr)return this.Yr;throw _t()}addReference(e,s,r){return this.Jr.addReference(r,s),this.Xr.delete(r.toString()),Ee.resolve()}removeReference(e,s,r){return this.Jr.removeReference(r,s),this.Xr.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),Ee.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,s)))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,(r=>{const i=nt.fromPath(r);return this.ei(e,i).next((a=>{a||s.removeEntry(i,St.min())}))})).next((()=>(this.Yr=null,s.apply(e))))}updateLimboDocument(e,s){return this.ei(e,s).next((r=>{r?this.Xr.delete(s.toString()):this.Xr.add(s.toString())}))}Wr(e){return 0}ei(e,s){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,s,r,i){this.targetId=e,this.fromCache=s,this.$i=r,this.Ui=i}static Wi(e,s){let r=zt(),i=zt();for(const a of s.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new T1(e,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return fD()?8:Q9(Hn())>0?6:4})()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,r,i){const a={result:null};return this.Yi(e,s).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.Zi(e,s,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new fF;return this.Xi(e,s,l).next((d=>{if(a.result=d,this.zi)return this.es(e,s,l,d.size)}))})).next((()=>a.result))}es(e,s,r,i){return r.documentReadCount<this.ji?(Nu()<=Kt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",qc(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(Nu()<=Kt.DEBUG&&Je("QueryEngine","Query:",qc(s),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Nu()<=Kt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",qc(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(s))):Ee.resolve())}Yi(e,s){if(pj(s))return Ee.resolve(null);let r=Yi(s);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(s.limit!==null&&i===1&&(s=Pf(s,null,"F"),r=Yi(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=zt(...a);return this.Ji.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((u=>{const h=this.ts(s,d);return this.ns(s,h,l,u.readTime)?this.Yi(e,Pf(s,null,"F")):this.rs(e,h,s,u)}))))})))))}Zi(e,s,r,i){return pj(s)||i.isEqual(St.min())?Ee.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const l=this.ts(s,a);return this.ns(s,l,r,i)?Ee.resolve(null):(Nu()<=Kt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qc(s)),this.rs(e,l,s,H9(i,-1)).next((d=>d)))}))}ts(e,s){let r=new Tn(DT(e));return s.forEach(((i,a)=>{bg(e,a)&&(r=r.add(a))})),r}ns(e,s,r,i){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,r){return Nu()<=Kt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",qc(s)),this.Ji.getDocumentsMatchingQuery(e,s,Uo.min(),r)}rs(e,s,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((a=>(s.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,s,r,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new Rs(ts),this._s=new Dd((a=>x1(a)),y1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.os)))}}function yF(t,e,s,r){return new xF(t,e,s,r)}async function s3(t,e){const s=Nt(t);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return s.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let u=zt();for(const h of i){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){d.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return s.localDocuments.getDocuments(r,u).next((h=>({hs:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function vF(t,e){const s=Nt(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return(function(d,u,h,m){const g=h.batch,v=g.keys();let b=Ee.resolve();return v.forEach((N=>{b=b.next((()=>m.getEntry(u,N))).next((S=>{const C=h.docVersions.get(N);os(C!==null),S.version.compareTo(C)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),m.addEntry(S)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(u,g)))})(s,r,e,a).next((()=>a.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let u=zt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u})(e)))).next((()=>s.localDocuments.getDocuments(r,i)))}))}function n3(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Ur.getLastRemoteSnapshotVersion(s)))}function bF(t,e){const s=Nt(t),r=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const d=[];e.targetChanges.forEach(((m,g)=>{const v=i.get(g);if(!v)return;d.push(s.Ur.removeMatchingKeys(a,m.removedDocuments,g).next((()=>s.Ur.addMatchingKeys(a,m.addedDocuments,g))));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(An.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(g,b),(function(S,C,R){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(v,b,m)&&d.push(s.Ur.updateTargetData(a,b))}));let u=za(),h=zt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&d.push(s.persistence.referenceDelegate.updateLimboDocument(a,m))})),d.push(_F(a,l,e.documentUpdates).next((m=>{u=m.Ps,h=m.Is}))),!r.isEqual(St.min())){const m=s.Ur.getLastRemoteSnapshotVersion(a).next((g=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(m)}return Ee.waitFor(d).next((()=>l.apply(a))).next((()=>s.localDocuments.getLocalViewOfDocuments(a,u,h))).next((()=>u))})).then((a=>(s.os=i,a)))}function _F(t,e,s){let r=zt(),i=zt();return s.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=za();return s.forEach(((d,u)=>{const h=a.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(St.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):Je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)})),{Ps:l,Is:i}}))}function wF(t,e){const s=Nt(t);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jF(t,e){const s=Nt(t);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return s.Ur.getTargetData(r,e).next((a=>a?(i=a,Ee.resolve(i)):s.Ur.allocateTargetId(r).next((l=>(i=new Ro(e,l,"TargetPurposeListen",r.currentSequenceNumber),s.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=s.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(r.targetId,r),s._s.set(e,r.targetId)),r}))}async function l0(t,e,s){const r=Nt(t),i=r.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!$h(l))throw l;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Nj(t,e,s){const r=Nt(t);let i=St.min(),a=zt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,h,m){const g=Nt(u),v=g._s.get(m);return v!==void 0?Ee.resolve(g.os.get(v)):g.Ur.getTargetData(h,m)})(r,l,Yi(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,d.targetId).next((u=>{a=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(l,e,s?i:St.min(),s?a:zt()))).next((d=>(SF(r,m7(e),d),{documents:d,Ts:a})))))}function SF(t,e,s){let r=t.us.get(e)||St.min();s.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.us.set(e,r)}class kj{constructor(){this.activeTargetIds=v7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NF{constructor(){this.so=new kj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,r){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kj,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp=null;function Dy(){return Sp===null?Sp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sp++,"0x"+Sp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class EF extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const r=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,r,i,a,l){const d=Dy(),u=this.xo(s,r.toUriEncodedString());Je("RestConnection",`Sending RPC '${s}' ${d}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,l),this.No(s,u,h,i).then((m=>(Je("RestConnection",`Received RPC '${s}' ${d}: `,m),m)),(m=>{throw fd("RestConnection",`RPC '${s}' ${d} failed with error: `,m,"url: ",u,"request:",i),m}))}Lo(s,r,i,a,l,d){return this.Mo(s,r,i,a,l)}Oo(s,r,i){s["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ld})(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,l)=>s[l]=a)),i&&i.headers.forEach(((a,l)=>s[l]=a))}xo(s,r){const i=CF[s];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,r,i){const a=Dy();return new Promise(((l,d)=>{const u=new yT;u.setWithCredentials(!0),u.listenOnce(vT.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case sf.NO_ERROR:const m=u.getResponseJson();Je(Bn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case sf.TIMEOUT:Je(Bn,`RPC '${e}' ${a} timed out`),d(new Oe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const g=u.getStatus();if(Je(Bn,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const N=(function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(R)>=0?R:ve.UNKNOWN})(b.status);d(new Oe(N,b.message))}else d(new Oe(ve.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new Oe(ve.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Je(Bn,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Je(Bn,`RPC '${e}' ${a} sending request:`,i),u.send(s,"POST",h,r,15)}))}Bo(e,s,r){const i=Dy(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=wT(),d=_T(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Je(Bn,`Creating RPC '${e}' stream ${i}: ${m}`,u);const g=l.createWebChannel(m,u);let v=!1,b=!1;const N=new TF({Io:C=>{b?Je(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(Je(Bn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),Je(Bn,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},To:()=>g.close()}),S=(C,R,M)=>{C.listen(R,(T=>{try{M(T)}catch(y){setTimeout((()=>{throw y}),0)}}))};return S(g,Mu.EventType.OPEN,(()=>{b||(Je(Bn,`RPC '${e}' stream ${i} transport opened.`),N.yo())})),S(g,Mu.EventType.CLOSE,(()=>{b||(b=!0,Je(Bn,`RPC '${e}' stream ${i} transport closed`),N.So())})),S(g,Mu.EventType.ERROR,(C=>{b||(b=!0,fd(Bn,`RPC '${e}' stream ${i} transport errored:`,C),N.So(new Oe(ve.UNAVAILABLE,"The operation could not be completed")))})),S(g,Mu.EventType.MESSAGE,(C=>{var R;if(!b){const M=C.data[0];os(!!M);const T=M,y=T.error||((R=T[0])===null||R===void 0?void 0:R.error);if(y){Je(Bn,`RPC '${e}' stream ${i} received error:`,y);const w=y.status;let D=(function(A){const F=Ks[A];if(F!==void 0)return WT(F)})(w),k=y.message;D===void 0&&(D=ve.INTERNAL,k="Unknown error status: "+w+" with message "+y.message),b=!0,N.So(new Oe(D,k)),g.close()}else Je(Bn,`RPC '${e}' stream ${i} received:`,M),N.bo(M)}})),S(d,bT.STAT_EVENT,(C=>{C.stat===Jv.PROXY?Je(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Jv.NOPROXY&&Je(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function My(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){return new $7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,s,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,s,r,i,a,l,d,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new r3(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===ve.RESOURCE_EXHAUSTED?(Ua(s.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===s&&this.P_(r,i)}),(r=>{e((()=>{const i=new Oe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,s){const r=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget((()=>this.Yo===e?s():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AF extends i3{constructor(e,s,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=U7(this.serializer,e),r=(function(a){if(!("targetChange"in a))return St.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?St.min():l.readTime?Ji(l.readTime):St.min()})(e);return this.listener.d_(s,r)}A_(e){const s={};s.database=o0(this.serializer),s.addTarget=(function(a,l){let d;const u=l.target;if(d=s0(u)?{documents:G7(a,u)}:{query:W7(a,u)._t},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=QT(a,l.resumeToken);const h=r0(a,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(St.min())>0){d.readTime=Lf(a,l.snapshotVersion.toTimestamp());const h=r0(a,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const r=K7(this.serializer,e);r&&(s.labels=r),this.a_(s)}R_(e){const s={};s.database=o0(this.serializer),s.removeTarget=e,this.a_(s)}}class IF extends i3{constructor(e,s,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,l),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return os(!!e.streamToken),this.lastStreamToken=e.streamToken,os(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){os(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=H7(e.writeResults,e.commitTime),r=Ji(e.commitTime);return this.listener.g_(r,s)}p_(){const e={};e.database=o0(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>z7(this.serializer,r)))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF extends class{}{constructor(e,s,r,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Oe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Mo(e,i0(s,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(ve.UNKNOWN,a.toString())}))}Lo(e,s,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Lo(e,i0(s,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(ve.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class RF{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ua(s),this.D_=!1):Je("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,s,r,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((l=>{r.enqueueAndForget((async()=>{ec(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const h=Nt(u);h.L_.add(4),await Uh(h),h.q_.set("Unknown"),h.L_.delete(4),await Ng(h)})(this))}))})),this.q_=new RF(r,i)}}async function Ng(t){if(ec(t))for(const e of t.B_)await e(!0)}async function Uh(t){for(const e of t.B_)await e(!1)}function a3(t,e){const s=Nt(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),P1(s)?I1(s):Md(s).r_()&&A1(s,e))}function E1(t,e){const s=Nt(t),r=Md(s);s.N_.delete(e),r.r_()&&o3(s,e),s.N_.size===0&&(r.r_()?r.o_():ec(s)&&s.q_.set("Unknown"))}function A1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Md(t).A_(e)}function o3(t,e){t.Q_.xe(e),Md(t).R_(e)}function I1(t){t.Q_=new D7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Md(t).start(),t.q_.v_()}function P1(t){return ec(t)&&!Md(t).n_()&&t.N_.size>0}function ec(t){return Nt(t).L_.size===0}function l3(t){t.Q_=void 0}async function DF(t){t.q_.set("Online")}async function MF(t){t.N_.forEach(((e,s)=>{A1(t,e)}))}async function FF(t,e){l3(t),P1(t)?(t.q_.M_(e),I1(t)):t.q_.set("Unknown")}async function BF(t,e,s){if(t.q_.set("Online"),e instanceof KT&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.N_.delete(d),i.Q_.removeTarget(d))})(t,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Df(t,r)}else if(e instanceof af?t.Q_.Ke(e):e instanceof qT?t.Q_.He(e):t.Q_.We(e),!s.isEqual(St.min()))try{const r=await n3(t.localStore);s.compareTo(r)>=0&&await(function(a,l){const d=a.Q_.rt(l);return d.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.N_.get(h);m&&a.N_.set(h,m.withResumeToken(u.resumeToken,l))}})),d.targetMismatches.forEach(((u,h)=>{const m=a.N_.get(u);if(!m)return;a.N_.set(u,m.withResumeToken(An.EMPTY_BYTE_STRING,m.snapshotVersion)),o3(a,u);const g=new Ro(m.target,u,h,m.sequenceNumber);A1(a,g)})),a.remoteSyncer.applyRemoteEvent(d)})(t,s)}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),await Df(t,r)}}async function Df(t,e,s){if(!$h(e))throw e;t.L_.add(1),await Uh(t),t.q_.set("Offline"),s||(s=()=>n3(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Je("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await Ng(t)}))}function c3(t,e){return e().catch((s=>Df(t,s,e)))}async function kg(t){const e=Nt(t),s=Ho(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$F(e);)try{const i=await wF(e.localStore,r);if(i===null){e.O_.length===0&&s.o_();break}r=i.batchId,OF(e,i)}catch(i){await Df(e,i)}d3(e)&&u3(e)}function $F(t){return ec(t)&&t.O_.length<10}function OF(t,e){t.O_.push(e);const s=Ho(t);s.r_()&&s.V_&&s.m_(e.mutations)}function d3(t){return ec(t)&&!Ho(t).n_()&&t.O_.length>0}function u3(t){Ho(t).start()}async function VF(t){Ho(t).p_()}async function UF(t){const e=Ho(t);for(const s of t.O_)e.m_(s.mutations)}async function zF(t,e,s){const r=t.O_.shift(),i=j1.from(r,e,s);await c3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await kg(t)}async function HF(t,e){e&&Ho(t).V_&&await(async function(r,i){if((function(l){return P7(l)&&l!==ve.ABORTED})(i.code)){const a=r.O_.shift();Ho(r).s_(),await c3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await kg(r)}})(t,e),d3(t)&&u3(t)}async function Tj(t,e){const s=Nt(t);s.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=ec(s);s.L_.add(3),await Uh(s),r&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await Ng(s)}async function GF(t,e){const s=Nt(t);e?(s.L_.delete(2),await Ng(s)):e||(s.L_.add(2),await Uh(s),s.q_.set("Unknown"))}function Md(t){return t.K_||(t.K_=(function(s,r,i){const a=Nt(s);return a.w_(),new AF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:DF.bind(null,t),Ro:MF.bind(null,t),mo:FF.bind(null,t),d_:BF.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),P1(t)?I1(t):t.q_.set("Unknown")):(await t.K_.stop(),l3(t))}))),t.K_}function Ho(t){return t.U_||(t.U_=(function(s,r,i){const a=Nt(s);return a.w_(),new IF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VF.bind(null,t),mo:HF.bind(null,t),f_:UF.bind(null,t),g_:zF.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await kg(t)):(await t.U_.stop(),t.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,s,r,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,a){const l=Date.now()+r,d=new R1(e,s,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L1(t,e){if(Ua("AsyncQueue",`${e}: ${t}`),$h(t))return new Oe(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.comparator=e?(s,r)=>e(s,r)||nt.comparator(s.key,r.key):(s,r)=>nt.comparator(s.key,r.key),this.keyedMap=Fu(),this.sortedSet=new Rs(this.comparator)}static emptySet(e){return new dd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof dd)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new dd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.W_=new Rs(nt.comparator)}track(e){const s=e.doc.key,r=this.W_.get(s);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(s,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(s):e.type===1&&r.type===2?this.W_=this.W_.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):_t():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal(((s,r)=>{e.push(r)})),e}}class _d{constructor(e,s,r,i,a,l,d,u,h){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,s,r,i,a){const l=[];return s.forEach((d=>{l.push({type:0,doc:d})})),new _d(e,s,dd.emptySet(s),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class qF{constructor(){this.queries=Aj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,r){const i=Nt(s),a=i.queries;i.queries=Aj(),a.forEach(((l,d)=>{for(const u of d.j_)u.onError(r)}))})(this,new Oe(ve.ABORTED,"Firestore shutting down"))}}function Aj(){return new Dd((t=>LT(t)),vg)}async function h3(t,e){const s=Nt(t);let r=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new WF,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(l){const d=L1(l,`Initialization of query '${qc(e.query)}' failed`);return void e.onError(d)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&D1(s)}async function m3(t,e){const s=Nt(t),r=e.query;let i=3;const a=s.queries.get(r);if(a){const l=a.j_.indexOf(e);l>=0&&(a.j_.splice(l,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function KF(t,e){const s=Nt(t);let r=!1;for(const i of e){const a=i.query,l=s.queries.get(a);if(l){for(const d of l.j_)d.X_(i)&&(r=!0);l.z_=i}}r&&D1(s)}function QF(t,e,s){const r=Nt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(s);r.queries.delete(e)}function D1(t){t.Y_.forEach((e=>{e.next()}))}var c0,Ij;(Ij=c0||(c0={})).ea="default",Ij.Cache="cache";class p3{constructor(e,s,r){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const r=s!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==c0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.key=e}}class g3{constructor(e){this.key=e}}class XF{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=zt(),this.mutatedKeys=zt(),this.Aa=DT(e),this.Ra=new dd(this.Aa)}get Va(){return this.Ta}ma(e,s){const r=s?s.fa:new Ej,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,l=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,g)=>{const v=i.get(m),b=bg(this.query,g)?g:null,N=!!v&&this.mutatedKeys.has(v.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let C=!1;v&&b?v.data.isEqual(b.data)?N!==S&&(r.track({type:3,doc:b}),C=!0):this.ga(v,b)||(r.track({type:2,doc:b}),C=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(d=!0)):!v&&b?(r.track({type:0,doc:b}),C=!0):v&&!b&&(r.track({type:1,doc:v}),C=!0,(u||h)&&(d=!0)),C&&(b?(l=l.add(b),a=S?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{Ra:l,fa:r,ns:d,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((m,g)=>(function(b,N){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return S(b)-S(N)})(m.type,g.type)||this.Aa(m.doc,g.doc))),this.pa(r),i=i!=null&&i;const d=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,l.length!==0||h?{snapshot:new _d(this.query,e.Ra,a,l,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ej,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((s=>this.Ta=this.Ta.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ta=this.Ta.delete(s))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=zt(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const s=[];return e.forEach((r=>{this.da.has(r)||s.push(new g3(r))})),this.da.forEach((r=>{e.has(r)||s.push(new f3(r))})),s}ba(e){this.Ta=e.Ts,this.da=zt();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return _d.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YF{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class JF{constructor(e){this.key=e,this.va=!1}}class ZF{constructor(e,s,r,i,a,l){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Dd((d=>LT(d)),vg),this.Ma=new Map,this.xa=new Set,this.Oa=new Rs(nt.comparator),this.Na=new Map,this.La=new k1,this.Ba={},this.ka=new Map,this.qa=bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eB(t,e,s=!0){const r=w3(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await x3(r,e,s,!0),i}async function tB(t,e){const s=w3(t);await x3(s,e,!0,!1)}async function x3(t,e,s,r){const i=await jF(t.localStore,Yi(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,s);let d;return r&&(d=await sB(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&s&&a3(t.remoteStore,i),d}async function sB(t,e,s,r,i){t.Ka=(g,v,b)=>(async function(S,C,R,M){let T=C.view.ma(R);T.ns&&(T=await Nj(S.localStore,C.query,!1).then((({documents:k})=>C.view.ma(k,T))));const y=M&&M.targetChanges.get(C.targetId),w=M&&M.targetMismatches.get(C.targetId)!=null,D=C.view.applyChanges(T,S.isPrimaryClient,y,w);return Rj(S,C.targetId,D.wa),D.snapshot})(t,g,v,b);const a=await Nj(t.localStore,e,!0),l=new XF(e,a.Ts),d=l.ma(a.documents),u=Vh.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",i),h=l.applyChanges(d,t.isPrimaryClient,u);Rj(t,s,h.wa);const m=new YF(e,s,l);return t.Fa.set(e,m),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),h.snapshot}async function nB(t,e,s){const r=Nt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter((l=>!vg(l,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await l0(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),s&&E1(r.remoteStore,i.targetId),d0(r,i.targetId)})).catch(Bh)):(d0(r,i.targetId),await l0(r.localStore,i.targetId,!0))}async function rB(t,e){const s=Nt(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),E1(s.remoteStore,r.targetId))}async function iB(t,e,s){const r=hB(t);try{const i=await(function(l,d){const u=Nt(l),h=$s.now(),m=d.reduce(((b,N)=>b.add(N.key)),zt());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let N=za(),S=zt();return u.cs.getEntries(b,m).next((C=>{N=C,N.forEach(((R,M)=>{M.isValidDocument()||(S=S.add(R))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,N))).next((C=>{g=C;const R=[];for(const M of d){const T=C7(M,g.get(M.key).overlayedDocument);T!=null&&R.push(new Ko(M.key,T,CT(T.value.mapValue),ii.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,R,d)})).next((C=>{v=C;const R=C.applyToLocalDocumentSet(g,S);return u.documentOverlayCache.saveOverlays(b,C.batchId,R)}))})).then((()=>({batchId:v.batchId,changes:FT(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,u){let h=l.Ba[l.currentUser.toKey()];h||(h=new Rs(ts)),h=h.insert(d,u),l.Ba[l.currentUser.toKey()]=h})(r,i.batchId,s),await zh(r,i.changes),await kg(r.remoteStore)}catch(i){const a=L1(i,"Failed to persist write");s.reject(a)}}async function y3(t,e){const s=Nt(t);try{const r=await bF(s.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=s.Na.get(a);l&&(os(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?os(l.va):i.removedDocuments.size>0&&(os(l.va),l.va=!1))})),await zh(s,r,e)}catch(r){await Bh(r)}}function Pj(t,e,s){const r=Nt(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.Fa.forEach(((a,l)=>{const d=l.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const u=Nt(l);u.onlineState=d;let h=!1;u.queries.forEach(((m,g)=>{for(const v of g.j_)v.Z_(d)&&(h=!0)})),h&&D1(u)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aB(t,e,s){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",s);const i=r.Na.get(e),a=i&&i.key;if(a){let l=new Rs(nt.comparator);l=l.insert(a,Un.newNoDocument(a,St.min()));const d=zt().add(a),u=new jg(St.min(),new Map,new Rs(ts),l,d);await y3(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),M1(r)}else await l0(r.localStore,e,!1).then((()=>d0(r,e,s))).catch(Bh)}async function oB(t,e){const s=Nt(t),r=e.batch.batchId;try{const i=await vF(s.localStore,e);b3(s,r,null),v3(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await zh(s,i)}catch(i){await Bh(i)}}async function lB(t,e,s){const r=Nt(t);try{const i=await(function(l,d){const u=Nt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return u.mutationQueue.lookupMutationBatch(h,d).next((g=>(os(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,d))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>u.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);b3(r,e,s),v3(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await zh(r,i)}catch(i){await Bh(i)}}function v3(t,e){(t.ka.get(e)||[]).forEach((s=>{s.resolve()})),t.ka.delete(e)}function b3(t,e,s){const r=Nt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function d0(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),s&&t.Ca.$a(r,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||_3(t,r)}))}function _3(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(E1(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),M1(t))}function Rj(t,e,s){for(const r of s)r instanceof f3?(t.La.addReference(r.key,e),cB(t,r)):r instanceof g3?(Je("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_3(t,r.key)):_t()}function cB(t,e){const s=e.key,r=s.path.canonicalString();t.Oa.get(s)||t.xa.has(r)||(Je("SyncEngine","New document in limbo: "+s),t.xa.add(r),M1(t))}function M1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new nt(ms.fromString(e)),r=t.qa.next();t.Na.set(r,new JF(s)),t.Oa=t.Oa.insert(s,r),a3(t.remoteStore,new Ro(Yi(v1(s.path)),r,"TargetPurposeLimboResolution",p1.oe))}}async function zh(t,e,s){const r=Nt(t),i=[],a=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,u)=>{l.push(r.Ka(u,e,s).then((h=>{var m;if((h||s)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=s==null?void 0:s.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=T1.Wi(u.targetId,h);a.push(g)}})))})),await Promise.all(l),r.Ca.d_(i),await(async function(u,h){const m=Nt(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Ee.forEach(h,(v=>Ee.forEach(v.$i,(b=>m.persistence.referenceDelegate.addReference(g,v.targetId,b))).next((()=>Ee.forEach(v.Ui,(b=>m.persistence.referenceDelegate.removeReference(g,v.targetId,b)))))))))}catch(g){if(!$h(g))throw g;Je("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const b=m.os.get(v),N=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(N);m.os=m.os.insert(v,S)}}})(r.localStore,a))}async function dB(t,e){const s=Nt(t);if(!s.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=await s3(s.localStore,e);s.currentUser=e,(function(a,l){a.ka.forEach((d=>{d.forEach((u=>{u.reject(new Oe(ve.CANCELLED,l))}))})),a.ka.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zh(s,r.hs)}}function uB(t,e){const s=Nt(t),r=s.Na.get(e);if(r&&r.va)return zt().add(r.key);{let i=zt();const a=s.Ma.get(e);if(!a)return i;for(const l of a){const d=s.Fa.get(l);i=i.unionWith(d.view.Va)}return i}}function w3(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aB.bind(null,e),e.Ca.d_=KF.bind(null,e.eventManager),e.Ca.$a=QF.bind(null,e.eventManager),e}function hB(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lB.bind(null,e),e}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return yF(this.persistence,new gF,e.initialUser,this.serializer)}Ga(e){return new mF(C1.Zr,this.serializer)}Wa(e){return new NF}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class u0{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dB.bind(null,this.syncEngine),await GF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qF})()}createDatastore(e){const s=Sg(e.databaseInfo.databaseId),r=(function(a){return new EF(a)})(e.databaseInfo);return(function(a,l,d,u){return new PF(a,l,d,u)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,i,a,l,d){return new LF(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(s=>Pj(this.syncEngine,s,0)),(function(){return Cj.D()?new Cj:new kF})())}createSyncEngine(e,s){return(function(i,a,l,d,u,h,m){const g=new ZF(i,a,l,d,u,h);return m&&(g.Qa=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await(async function(i){const a=Nt(i);Je("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Uh(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}u0.provider={build:()=>new u0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ua("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,s,r,i,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=ST.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Je("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=L1(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Fy(t,e){t.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await s3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Lj(t,e){t.asyncQueue.verifyOperationInProgress();const s=await pB(t);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener((r=>Tj(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Tj(e.remoteStore,i))),t._onlineComponents=e}async function pB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fy(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(s))throw s;fd("Error using user provided cache. Falling back to memory cache: "+s),await Fy(t,new Mf)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await Fy(t,new Mf);return t._offlineComponents}async function S3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await Lj(t,t._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await Lj(t,new u0))),t._onlineComponents}function fB(t){return S3(t).then((e=>e.syncEngine))}async function N3(t){const e=await S3(t),s=e.eventManager;return s.onListen=eB.bind(null,e.syncEngine),s.onUnlisten=nB.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=tB.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=rB.bind(null,e.syncEngine),s}function gB(t,e,s={}){const r=new Ma;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const m=new j3({next:v=>{m.Za(),l.enqueueAndForget((()=>m3(a,g)));const b=v.docs.has(d);!b&&v.fromCache?h.reject(new Oe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&u&&u.source==="server"?h.reject(new Oe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new p3(v1(d.path),m,{includeMetadataChanges:!0,_a:!0});return h3(a,g)})(await N3(t),t.asyncQueue,e,s,r))),r.promise}function xB(t,e,s={}){const r=new Ma;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,u,h){const m=new j3({next:v=>{m.Za(),l.enqueueAndForget((()=>m3(a,g))),v.fromCache&&u.source==="server"?h.reject(new Oe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new p3(d,m,{includeMetadataChanges:!0,_a:!0});return h3(a,g)})(await N3(t),t.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e,s){if(!s)throw new Oe(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yB(t,e,s,r){if(e===!0&&r===!0)throw new Oe(ve.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Mj(t){if(!nt.isDocumentKey(t))throw new Oe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fj(t){if(nt.isDocumentKey(t))throw new Oe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_t()}function Ha(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Cg(t);throw new Oe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function vB(t,e){if(e<=0)throw new Oe(ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Oe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Oe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Oe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Oe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bj(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new D9;switch(r.type){case"firstParty":return new $9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Dj.get(s);r&&(Je("ComponentProvider","Removing Datastore"),Dj.delete(s),r.terminate())})(this),Promise.resolve()}}function bB(t,e,s,r={}){var i;const a=(t=Ha(t,Hh))._getSettings(),l=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==l&&fd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,u;if(typeof r.mockUserToken=="string")d=r.mockUserToken,u=On.MOCK_USER;else{d=lD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Oe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new On(h)}t._authCredentials=new M9(new jT(d,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class wr{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class Vo extends Ai{constructor(e,s,r){super(e,s,v1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new nt(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function tc(t,e,...s){if(t=on(t),F1("collection","path",e),t instanceof Hh){const r=ms.fromString(e,...s);return Fj(r),new Vo(t,null,r)}{if(!(t instanceof wr||t instanceof Vo))throw new Oe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ms.fromString(e,...s));return Fj(r),new Vo(t.firestore,null,r)}}function Gh(t,e){if(t=Ha(t,Hh),F1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ai(t,null,(function(r){return new Qa(ms.emptyPath(),r)})(e))}function Ot(t,e,...s){if(t=on(t),arguments.length===1&&(e=ST.newId()),F1("doc","path",e),t instanceof Hh){const r=ms.fromString(e,...s);return Mj(r),new wr(t,null,new nt(r))}{if(!(t instanceof wr||t instanceof Vo))throw new Oe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ms.fromString(e,...s));return Mj(r),new wr(t.firestore,t instanceof Vo?t.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new r3(this,"async_queue_retry"),this.Vu=()=>{const r=My();r&&Je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const s=My();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=My();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const s=new Ma;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$h(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const s=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),d})(r);throw Ua("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=s,s}enqueueAfterDelay(e,s,r){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const i=R1.createAndSchedule(this,e,s,r,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&_t()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}class Wh extends Hh{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=new $j,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $j(e),this._firestoreClient=void 0,await e}}}function _B(t,e){const s=typeof t=="object"?t:r1(),r=typeof t=="string"?t:"(default)",i=n1(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=aD("firestore");a&&bB(i,...a)}return i}function Tg(t){if(t._terminated)throw new Oe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wB(t),t._firestoreClient}function wB(t){var e,s,r;const i=t._freezeSettings(),a=(function(d,u,h,m){return new J9(d,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,k3(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new mB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wd(An.fromBase64String(e))}catch(s){throw new Oe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new wd(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Oe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Oe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Oe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ts(this._lat,e._lat)||ts(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=/^__.*__$/;class SB{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Ko(e,this.data,this.fieldMask,s,this.fieldTransforms):new Oh(e,this.data,s,this.fieldTransforms)}}class C3{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Ko(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function T3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class O1{constructor(e,s,r,i,a,l){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new O1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ff(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(T3(this.Cu)&&jB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NB{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Sg(e)}Qu(e,s,r,i=!1){return new O1({Cu:e,methodName:s,qu:r,path:Nn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(t){const e=t._freezeSettings(),s=Sg(t._databaseId);return new NB(t._databaseId,!!e.ignoreUndefinedProperties,s)}function E3(t,e,s,r,i,a={}){const l=t.Qu(a.merge||a.mergeFields?2:0,e,s,i);U1("Data must be an object, but it was:",l,r);const d=I3(r,l);let u,h;if(a.merge)u=new Br(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const v=h0(e,g,s);if(!l.contains(v))throw new Oe(ve.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);R3(m,v)||m.push(v)}u=new Br(m),h=l.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,h=l.fieldTransforms;return new SB(new _r(d),u,h)}class Pg extends Ag{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pg}}class V1 extends Ag{_toFieldTransform(e){return new j7(e.path,new bh)}isEqual(e){return e instanceof V1}}function kB(t,e,s,r){const i=t.Qu(1,e,s);U1("Data must be an object, but it was:",i,r);const a=[],l=_r.empty();Zl(r,((u,h)=>{const m=z1(e,u,s);h=on(h);const g=i.Nu(m);if(h instanceof Pg)a.push(m);else{const v=qh(h,g);v!=null&&(a.push(m),l.set(m,v))}}));const d=new Br(a);return new C3(l,d,i.fieldTransforms)}function CB(t,e,s,r,i,a){const l=t.Qu(1,e,s),d=[h0(e,r,s)],u=[i];if(a.length%2!=0)throw new Oe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)d.push(h0(e,a[v])),u.push(a[v+1]);const h=[],m=_r.empty();for(let v=d.length-1;v>=0;--v)if(!R3(h,d[v])){const b=d[v];let N=u[v];N=on(N);const S=l.Nu(b);if(N instanceof Pg)h.push(b);else{const C=qh(N,S);C!=null&&(h.push(b),m.set(b,C))}}const g=new Br(h);return new C3(m,g,l.fieldTransforms)}function A3(t,e,s,r=!1){return qh(s,t.Qu(r?4:3,e))}function qh(t,e){if(P3(t=on(t)))return U1("Unsupported field value:",e,t),I3(t,e);if(t instanceof Ag)return(function(r,i){if(!T3(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let u=qh(d,i.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$s.fromDate(r);return{timestampValue:Lf(i.serializer,a)}}if(r instanceof $s){const a=new $s(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lf(i.serializer,a)}}if(r instanceof B1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wd)return{bytesValue:QT(i.serializer,r._byteString)};if(r instanceof wr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:N1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $1)return(function(l,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw d.Bu("VectorValues must only contain numeric values.");return _1(d.serializer,u)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Cg(r)}`)})(t,e)}function I3(t,e){const s={};return NT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(t,((r,i)=>{const a=qh(i,e.Mu(r));a!=null&&(s[r]=a)})),{mapValue:{fields:s}}}function P3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $s||t instanceof B1||t instanceof wd||t instanceof wr||t instanceof Ag||t instanceof $1)}function U1(t,e,s){if(!P3(s)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(s)){const r=Cg(s);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function h0(t,e,s){if((e=on(e))instanceof Eg)return e._internalPath;if(typeof e=="string")return z1(t,e);throw Ff("Field path arguments must be of type string or ",t,!1,void 0,s)}const TB=new RegExp("[~\\*/\\[\\]]");function z1(t,e,s){if(e.search(TB)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Eg(...e.split("."))._internalPath}catch(r){throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Ff(t,e,s,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;s&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new Oe(ve.INVALID_ARGUMENT,d+t+u)}function R3(t,e){return t.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,s,r,i,a){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Rg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class EB extends H1{data(){return super.data()}}function Rg(t,e){return typeof e=="string"?z1(t,e):e instanceof Eg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G1{}class Kh extends G1{}function kn(t,e,...s){let r=[];e instanceof G1&&r.push(e),r=r.concat(s),(function(a){const l=a.filter((u=>u instanceof W1)).length,d=a.filter((u=>u instanceof Lg)).length;if(l>1||l>0&&d>0)throw new Oe(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Lg extends Kh{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Lg(e,s,r)}_apply(e){const s=this._parse(e);return D3(e._query,s),new Ai(e.firestore,e.converter,n0(e._query,s))}_parse(e){const s=Ig(e.firestore);return(function(a,l,d,u,h,m,g){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Oe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Vj(g,m);const b=[];for(const N of g)b.push(Oj(u,a,N));v={arrayValue:{values:b}}}else v=Oj(u,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Vj(g,m),v=A3(d,l,g,m==="in"||m==="not-in");return Js.create(h,m,v)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Zi(t,e,s){const r=e,i=Rg("where",t);return Lg._create(i,r,s)}class W1 extends G1{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new W1(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Ti.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const u of d)D3(l,u),l=n0(l,u)})(e._query,s),new Ai(e.firestore,e.converter,n0(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q1 extends Kh{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new q1(e,s)}_apply(e){const s=(function(i,a,l){if(i.startAt!==null)throw new Oe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Oe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vh(a,l)})(e._query,this._field,this._direction);return new Ai(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Qa(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,s))}}function Ra(t,e="asc"){const s=e,r=Rg("orderBy",t);return q1._create(r,s)}class K1 extends Kh{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new K1(e,s,r)}_apply(e){return new Ai(e.firestore,e.converter,Pf(e._query,this._limit,this._limitType))}}function zn(t){return vB("limit",t),K1._create("limit",t,"F")}class Q1 extends Kh{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new Q1(e,s,r)}_apply(e){const s=L3(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(function(i,a){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,s))}}function Dl(...t){return Q1._create("startAt",t,!0)}class X1 extends Kh{constructor(e,s,r){super(),this.type=e,this._docOrFields=s,this._inclusive=r}static _create(e,s,r){return new X1(e,s,r)}_apply(e){const s=L3(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(function(i,a){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,s))}}function Ml(...t){return X1._create("endAt",t,!0)}function L3(t,e,s,r){if(s[0]=on(s[0]),s[0]instanceof H1)return(function(a,l,d,u,h){if(!u)throw new Oe(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const m=[];for(const g of cd(a))if(g.field.isKeyField())m.push(If(l,u.key));else{const v=u.data.field(g.field);if(yg(v))throw new Oe(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const b=g.field.canonicalString();throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}m.push(v)}return new vd(m,h)})(t._query,t.firestore._databaseId,e,s[0]._document,r);{const i=Ig(t.firestore);return(function(l,d,u,h,m,g){const v=l.explicitOrderBy;if(m.length>v.length)throw new Oe(ve.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let N=0;N<m.length;N++){const S=m[N];if(v[N].field.isKeyField()){if(typeof S!="string")throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof S}`);if(!b1(l)&&S.indexOf("/")!==-1)throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${S}' contains a slash.`);const C=l.path.child(ms.fromString(S));if(!nt.isDocumentKey(C))throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const R=new nt(C);b.push(If(d,R))}else{const C=A3(u,h,S);b.push(C)}}return new vd(b,g)})(t._query,t.firestore._databaseId,i,e,s,r)}}function Oj(t,e,s){if(typeof(s=on(s))=="string"){if(s==="")throw new Oe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b1(e)&&s.indexOf("/")!==-1)throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(ms.fromString(s));if(!nt.isDocumentKey(r))throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return If(t,new nt(r))}if(s instanceof wr)return If(t,s._key);throw new Oe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cg(s)}.`)}function Vj(t,e){if(!Array.isArray(t)||t.length===0)throw new Oe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D3(t,e){const s=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new Oe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class IB{convertValue(e,s="none"){switch(ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Wl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw _t()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Zl(e,((i,a)=>{r[i]=this.convertValue(a,s)})),r}convertVectorValue(e){var s,r,i;const a=(i=(r=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((l=>Hs(l.doubleValue)));return new $1(a)}convertGeoPoint(e){return new B1(Hs(e.latitude),Hs(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=f1(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(gh(e));default:return null}}convertTimestamp(e){const s=zo(e);return new $s(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=ms.fromString(e);os(t3(r));const i=new xh(r.get(1),r.get(3)),a=new nt(r.popFirst(5));return i.isEqual(s)||Ua(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class F3 extends H1{constructor(e,s,r,i,a,l){super(e,s,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Rg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class of extends F3{data(e={}){return super.data(e)}}class PB{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new $u(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new of(this._firestore,this._userDataWriter,r.key,r,new $u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Oe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const u=new of(i._firestore,i._userDataWriter,d.doc.key,d.doc,new $u(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const u=new of(i._firestore,i._userDataWriter,d.doc.key,d.doc,new $u(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),m=l.indexOf(d.doc.key)),{type:RB(d.type),doc:u,oldIndex:h,newIndex:m}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function RB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){t=Ha(t,wr);const e=Ha(t.firestore,Wh);return gB(Tg(e),t._key).then((s=>LB(e,t,s)))}class B3 extends IB{constructor(e){super(),this.firestore=e}convertBytes(e){return new wd(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,s)}}function an(t){t=Ha(t,Ai);const e=Ha(t.firestore,Wh),s=Tg(e),r=new B3(e);return AB(t._query),xB(s,t._query).then((i=>new PB(e,r,t,i)))}function Ga(t,e,s){t=Ha(t,wr);const r=Ha(t.firestore,Wh),i=M3(t.converter,e,s);return $3(r,[E3(Ig(r),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,ii.none())])}function $3(t,e){return(function(r,i){const a=new Ma;return r.asyncQueue.enqueueAndForget((async()=>iB(await fB(r),i,a))),a.promise})(Tg(t),e)}function LB(t,e,s){const r=s.docs.get(e._key),i=new B3(t);return new F3(t,i,e._key,r,new $u(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Ig(e)}set(e,s,r){this._verifyNotCommitted();const i=By(e,this._firestore),a=M3(i.converter,s,r),l=E3(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ii.none())),this}update(e,s,r,...i){this._verifyNotCommitted();const a=By(e,this._firestore);let l;return l=typeof(s=on(s))=="string"||s instanceof Eg?CB(this._dataReader,"WriteBatch.update",a._key,s,r,i):kB(this._dataReader,"WriteBatch.update",a._key,s),this._mutations.push(l.toMutation(a._key,ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=By(e,this._firestore);return this._mutations=this._mutations.concat(new w1(s._key,ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function By(t,e){if((t=on(t)).firestore!==e)throw new Oe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ji(){return new V1("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){return Tg(t=Ha(t,Wh)),new DB(t,(e=>$3(t,e)))}(function(e,s=!0){(function(i){Ld=i})(Pd),pd(new Ul("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Wh(new F9(r.getProvider("auth-internal")),new V9(r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Oe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(h.options.projectId,m)})(l,i),l);return a=Object.assign({useFetchStreams:s},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),$o(rj,"4.7.3",e),$o(rj,"4.7.3","esm2017")})();const O3={apiKey:"AIzaSyDEktl9zQMkxiKDMZ1y4IFOALr43wkGtNA",authDomain:"sfdatahub-staging.firebaseapp.com",projectId:"sfdatahub-staging",storageBucket:"sfdatahub-staging.firebasestorage.app",appId:"1:614140423653:web:409d208c5aa68e5029930c"};O3.projectId||console.error("[FB] Missing env (projectId). Add .env.local and restart dev server.");const V3=j8().length?r1():DC(O3),it=_B(V3),Np=R9(V3),U3=E.createContext(void 0),Uj=`${aa}/auth/session`,zj=`${aa}/auth/logout`,FB=({children:t})=>{const[e,s]=E.useState(null),[r,i]=E.useState("idle"),a=E.useRef({tried:!1}),l=E.useCallback(S=>{S!=null&&S.authenticated&&S.user?(s(S.user),i("authenticated")):(s(null),i("unauthenticated"))},[]),d=E.useCallback(async S=>{if(S!=null&&S.silent||i("loading"),!Uj){console.warn("[Auth] AUTH_BASE_URL is not configured. Skipping session fetch."),s(null),i("unauthenticated");return}try{const C=await fetch(Uj,{credentials:"include"});if(!C.ok)throw new Error(`Failed to fetch session (${C.status})`);const R=await C.json();l(R)}catch(C){console.error("[Auth] Failed to refresh session.",C),s(null),i("unauthenticated")}},[l]);E.useEffect(()=>{d()},[d]),E.useEffect(()=>{console.log("[AuthDebug] session user:",e);const S=Np.currentUser;console.log("[AuthDebug] firebase currentUser uid:",S==null?void 0:S.uid),S==null||S.getIdTokenResult().then(C=>{console.log("[AuthDebug] firebase claims:",C.claims)}).catch(C=>{console.warn("[AuthDebug] failed to fetch token claims",C)})},[e]),E.useEffect(()=>{const S=_M(Np,C=>{console.log("[AuthDebug] firebase currentUser uid:",C==null?void 0:C.uid)});return()=>S()},[]),E.useEffect(()=>{if(!e){a.current.tried=!1;return}a.current.tried||(a.current.tried=!0,(async()=>{try{const S=await J6();await yM(Np,S),console.log("[AuthDebug] signed in to Firebase with custom token")}catch(S){console.error("[AuthDebug] failed to sign in to Firebase",S)}})())},[e]);const u=E.useCallback(S=>{window.location.href=`${aa}/auth/${S}/login`},[]),h=E.useCallback(()=>u("discord"),[u]),m=E.useCallback(()=>u("google"),[u]),g=E.useCallback(async()=>{if(await wM(Np).catch(()=>{}),!zj){console.warn("[Auth] AUTH_BASE_URL is not configured. Clearing local session only."),s(null),i("unauthenticated");return}try{const S=await fetch(zj,{method:"POST",credentials:"include"});if(!S.ok)throw new Error(`Logout failed (${S.status})`)}catch(S){console.error("[Auth] Failed to logout. Clearing local session anyway.",S)}finally{s(null),i("unauthenticated")}},[]),v=E.useCallback(async S=>{await d(S)},[d]),b=r==="idle"||r==="loading",N=E.useMemo(()=>({user:e,status:r,isLoading:b,loginWithDiscord:h,loginWithGoogle:m,logout:g,refreshSession:v}),[e,r,b,h,m,g,v]);return n.jsx(U3.Provider,{value:N,children:t})},Xa=()=>{const t=E.useContext(U3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},BB="https://i.pravatar.cc/72",$B=({fallbackName:t})=>{var M,T;const{user:e,status:s,logout:r,isLoading:i}=Xa(),a=oi(),[l,d]=E.useState(!1),u=E.useRef(null),h=s==="authenticated",m=h?(T=(M=e==null?void 0:e.displayName)!=null?M:t)!=null?T:"Player":t!=null?t:"Guest",g=h&&(e!=null&&e.avatarUrl)?e.avatarUrl:BB;E.useEffect(()=>{const y=w=>{u.current&&!u.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]),E.useEffect(()=>{i&&d(!1)},[i]);const v=E.useCallback(()=>d(!1),[]),b=()=>{d(y=>!y)},N=()=>{a("/login"),v()},S=()=>{a("/settings/account"),v()},C=E.useCallback(async()=>{try{await r()}finally{v(),a("/")}},[v,r,a]),R=()=>{var y;if(i)return n.jsx("p",{className:Rt.accountStatusText,children:"Checking session..."});if(s==="unauthenticated")return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Rt.accountHeader,children:[n.jsx("p",{className:Rt.accountName,children:"Not signed in"}),n.jsx("p",{className:Rt.accountSub,children:"Your scans stay synced when you log in."})]}),n.jsx("button",{type:"button",className:Rt.accountPrimary,onClick:N,children:"Sign in"}),n.jsx("p",{className:Rt.accountHint,children:"Use Discord or Google on the sign-in page."})]});if(s==="authenticated"){const w=!!((y=e==null?void 0:e.roles)!=null&&y.includes("admin"));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Rt.accountHeader,children:[n.jsx("img",{className:Rt.accountMiniAvatar,src:g,alt:m}),n.jsxs("div",{children:[n.jsx("p",{className:Rt.accountName,children:m}),n.jsxs("p",{className:Rt.accountSub,children:["Signed in via ",(e==null?void 0:e.provider)==="google"?"Google":"Discord"]})]})]}),n.jsx("button",{type:"button",className:Rt.accountItem,onClick:S,children:"Account & Profile"}),w?n.jsx("a",{className:Rt.accountItem,href:"https://control-panel.sfdatahub.com/",target:"_blank",rel:"noreferrer",children:"Console Panel"}):null,n.jsx("hr",{className:Rt.accountDivider}),n.jsx("button",{type:"button",className:`${Rt.accountItem} ${Rt.accountLogout}`,onClick:C,children:"Logout"})]})}return null};return n.jsxs("div",{className:Rt.accountRoot,ref:u,children:[i?n.jsxs("div",{className:Rt.avatarSpinnerShell,role:"status","aria-live":"polite","aria-label":"Checking login status",children:[n.jsx("span",{className:Rt.avatarSpinner,"aria-hidden":"true"}),n.jsx("span",{className:Rt.srOnly,children:"Checking login status"})]}):n.jsx("button",{type:"button",className:Rt.avatarBtn,"aria-haspopup":"menu","aria-expanded":l,"aria-label":m,onClick:b,children:n.jsx("img",{className:Rt.avatar,src:g,alt:m})}),!i&&l&&n.jsx("div",{className:Rt.accountDropdown,role:"menu",children:R()})]})},OB=[{id:"main.home",route:"/",area:"main",titleKey:"nav.home",status:"public",minRole:"guest",showInSidebar:!0,showInTopbar:!1,navOrder:5},{id:"main.dashboard",route:"/dashboard",area:"main",titleKey:"nav.dashboard",status:"hidden",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:10},{id:"main.guildHub",route:"/guild-hub",area:"main",titleKey:"nav.guildHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:20},{id:"main.discover",route:"/discover",area:"main",titleKey:"nav.discover",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:30},{id:"main.toplists",route:"/toplists",area:"main",titleKey:"nav.toplists",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:40},{id:"main.guidehub",route:"/guidehub",area:"main",titleKey:"nav.guideHub",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:50},{id:"main.tools",route:"/tools",area:"main",titleKey:"nav.tools",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:55},{id:"main.community",route:"/community",area:"main",titleKey:"nav.community",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:60},{id:"main.scans",route:"/scans",area:"main",titleKey:"nav.scans",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:70},{id:"main.settings",route:"/settings",area:"main",titleKey:"nav.settings",status:"active",minRole:"user",showInSidebar:!0,showInTopbar:!1,navOrder:80},{id:"main.admin",route:"/admin",area:"main",titleKey:"nav.admin",status:"active",minRole:"moderator",allowedRoles:["moderator","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:90},{id:"admin.cliCommands",route:"/cli-commands",area:"admin",titleKey:"nav.cliCommands",status:"active",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:95},{id:"main.playground",route:"/playground",area:"main",titleKey:"nav.playground",status:"beta",minRole:"developer",allowedRoles:["developer","admin"],showInSidebar:!0,showInTopbar:!1,navOrder:100,isExperimental:!0},{id:"main.uploadCenter",route:"/upload-center",area:"main",titleKey:"feature.uploadCenter",status:"logged_in",minRole:"user",showInSidebar:!1,showInTopbar:!1,navOrder:200}],Hj=["guest","user","moderator","developer","admin"];function z3(t){const e=t.trim();if(!e)return"/";const s=e.startsWith("/")?e:`/${e}`;return s==="/"?s:s.replace(/\/+$/,"").toLowerCase()}function H3(t){if(typeof t!="string")return;const e=t.toLowerCase();if(e==="admin")return"admin";if(e==="developer"||e==="dev")return"developer";if(e==="moderator"||e==="mod")return"moderator";if(e==="user")return"user";if(e==="guest")return"guest"}function G3(t){if(!Array.isArray(t))return;const e=t.map(s=>H3(s)).filter(Boolean);return e.length?e:void 0}function W3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function q3(t){if(!Array.isArray(t))return;const e=t.map(s=>typeof s=="string"?s.trim():"").filter(s=>s.length>0);return e.length?e:void 0}function Y1(t){var e,s,r;return{...t,id:t.id.trim(),route:z3(t.route),area:t.area.trim(),allowedRoles:(e=G3(t.allowedRoles))!=null?e:t.allowedRoles,allowedGroups:(s=W3(t.allowedGroups))!=null?s:t.allowedGroups,allowedUserIds:(r=q3(t.allowedUserIds))!=null?r:t.allowedUserIds}}function VB(t,e){if(!e||typeof e!="object")return null;const s=e,r=typeof s.route=="string"?s.route:"",i=typeof s.area=="string"?s.area:"",a=typeof s.id=="string"&&s.id.trim()||t||(r?`feature:${r}`:"");if(!r||!a||!i)return null;const l={id:a,route:r,area:i,titleKey:typeof s.titleKey=="string"?s.titleKey:void 0,status:typeof s.status=="string"?s.status:void 0,minRole:H3(s.minRole),allowedRoles:G3(s.allowedRoles),allowedGroups:W3(s.allowedGroups),allowedUserIds:q3(s.allowedUserIds),showInTopbar:typeof s.showInTopbar=="boolean"?s.showInTopbar:void 0,showInSidebar:typeof s.showInSidebar=="boolean"?s.showInSidebar:void 0,navOrder:typeof s.navOrder=="number"?s.navOrder:void 0,isExperimental:typeof s.isExperimental=="boolean"?s.isExperimental:void 0,description:typeof s.description=="string"?s.description:void 0};return Y1(l)}function UB(t){const e={},s={};return t.forEach(r=>{const i=Y1(r);e[i.id]=i,s[i.route]=i}),{byId:e,byRoute:s}}const Fa=UB(OB),zB={...Fa,loading:!1,error:null};function HB(t,e){const s={...t!=null?t:{}};return Object.entries(e).forEach(([i,a])=>{if(a!==void 0){const l=i;s[l]=a}}),s}function GB(t){const e={...Fa.byId},s={...Fa.byRoute};return t.forEach(r=>{const i=Y1(r),a=e[i.id],l=HB(a,i);e[l.id]=l,s[l.route]=l}),{byId:e,byRoute:s}}const K3=J.createContext(zB),WB=({children:t})=>{const[e,s]=J.useState({...Fa,loading:!0,error:null});J.useEffect(()=>{let i=!0;return(async()=>{try{const l=await an(tc(it,"feature_access")),d=[];l.forEach(h=>{const m=VB(h.id,h.data());m&&d.push(m)});const u=GB(d);i&&s({...u,loading:!1,error:null})}catch(l){const d=l,u=d==null?void 0:d.code,h=u==="permission-denied"||u==="failed-precondition";typeof window!="undefined"&&window.location.hostname==="localhost"&&console.warn(`[FeatureAccess] Firestore feature_access ${h?"not readable":"load failed"}. Falling back to defaults.`,l),i&&s(g=>({...g,loading:!1,error:l instanceof Error?l.message:"Failed to load feature access rules"}))}})(),()=>{i=!1}},[]);const r=J.useMemo(()=>e,[e]);return n.jsx(K3.Provider,{value:r,children:t})};function qB(){return J.useContext(K3)}function KB(t,e){var i,a,l;if(!t)return;const s=e!=null?e:Fa,r=z3(t);return(l=(a=(i=s.byId[t])!=null?i:s.byRoute[r])!=null?a:Fa.byId[t])!=null?l:Fa.byRoute[r]}function QB(t){return!t||t.length===0?"guest":t.includes("admin")?"admin":t.includes("dev")||t.includes("developer")?"developer":t.includes("mod")||t.includes("moderator")?"moderator":"user"}function XB(t,e,s,r,i){if(s)return!0;const a=!!r;if(t.status==="logged_in"&&!a)return!1;const l=e!=null?e:"user";if(t.status==="hidden"||t.status==="dev_only"&&l!=="developer"&&l!=="admin"||t.allowedUserIds&&t.allowedUserIds.length>0&&(!r||!t.allowedUserIds.includes(r))||t.allowedGroups&&t.allowedGroups.length>0&&!(i!=null?i:[]).some(u=>t.allowedGroups.includes(u)))return!1;if(t.allowedRoles&&t.allowedRoles.length>0)return!!l&&t.allowedRoles.includes(l);if(t.minRole){const d=Hj.indexOf(l),u=Hj.indexOf(t.minRole);return d>=u&&d!==-1}return!0}function Dg(){var S;let t=null;try{t=Xa().user}catch(C){console.warn("[FeatureAccess] useFeatureAccess used outside AuthProvider; continuing with user-level access.")}const{byId:e,byRoute:s,loading:r,error:i}=qB(),a=J.useMemo(()=>({byId:e!=null?e:Fa.byId,byRoute:s!=null?s:Fa.byRoute}),[e,s]),l=J.useMemo(()=>QB(t==null?void 0:t.roles),[t==null?void 0:t.roles]),d=J.useMemo(()=>{var C;return!!((C=t==null?void 0:t.roles)!=null&&C.includes("admin"))},[t==null?void 0:t.roles]),u=J.useMemo(()=>{var C;return(C=t==null?void 0:t.accessGroups)!=null?C:[]},[t==null?void 0:t.accessGroups]),h=(S=t==null?void 0:t.id)!=null?S:null,m=J.useCallback(C=>KB(C,a),[a]),g=J.useCallback(C=>C?XB(C,l,d,h,u):!0,[d,u,h,l]),v=J.useCallback(C=>{if(!C)return!0;const R=m(C);return g(R)},[g,m]),b=J.useCallback(C=>{if(!C)return!0;const R=m(C);return R?R.status==="hidden"||R.showInSidebar===!1?!1:g(R):!0},[g,m]),N=J.useCallback(C=>{if(!C)return!0;const R=m(C);return R?R.status==="hidden"||R.showInTopbar===!1?!1:g(R):!0},[g,m]);return{loading:r,error:i,rulesById:e,rulesByRoute:s,storeRules:a,resolveRule:m,canAccessRule:g,canAccessFeature:v,isVisibleInSidebar:b,isVisibleInTopbar:N}}const Q3=E.createContext(null);function YB({children:t}){const{canAccessFeature:e}=Dg(),[s,r]=E.useState(!1),[i,a]=E.useState("csv"),l=e("main.uploadCenter"),d=E.useCallback(m=>{l&&(m!=null&&m.tab?a(m.tab):a("csv"),r(!0))},[l]),u=E.useCallback(()=>r(!1),[]),h=E.useMemo(()=>({isOpen:s,open:d,close:u,activeTab:i,setTab:a,canUse:l}),[s,d,u,i,l]);return n.jsx(Q3.Provider,{value:h,children:t})}function J1(){const t=E.useContext(Q3);if(!t)throw new Error("useUploadCenter must be used within UploadCenterProvider");return t}const _i={assassin:"1NMQRDwxhfL1cxL679JKuvIjmeF50jJOu",bard:"1mQR0It-3zhxBn8-he695_VvN61JGOoY4","battle-mage":"1BDs3RzQGwXCMY588g6dL32DgvQes2Q0Z",berserker:"1MADOyse6jZUVkbBBrkTweQILVUhrBdY6","demon-hunter":"1FLzwU5xvm4D_FLNzr9MXEkeTdYM9Oa2k",druid:"1ECvaeY_UzbF9wYH0QbHsCNcYA1Pa9eiq",mage:"1sZ1ifX3V2V6KBZubOcCgkkhqW7oWpijS",necromancer:"1mZKuTZKPEJTuwWhbhVsmFfs6vfnv2Wi9",paladin:"1dx7zcadr6xFLNudjojKVerP19Vt6_lbB",scout:"12eL2NkyvJg2CL8GUbA8whKOA7TLBoa6x",warrior:"13Q4lC2CqjYjWjIhbGU8kunApX1I3_TDt"},wi=t=>`https://drive.google.com/uc?export=view&id=${t}`,X3=t=>String(t!=null?t:"").trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,""),Zs=[{key:"warrior",label:"Warrior",iconUrl:wi(_i.warrior),fallback:""},{key:"mage",label:"Mage",iconUrl:wi(_i.mage),fallback:""},{key:"scout",label:"Scout",iconUrl:wi(_i.scout),fallback:""},{key:"assassin",label:"Assassin",iconUrl:wi(_i.assassin),fallback:""},{key:"demon-hunter",label:"Demon Hunter",iconUrl:wi(_i["demon-hunter"]),fallback:""},{key:"berserker",label:"Berserker",iconUrl:wi(_i.berserker),fallback:""},{key:"battle-mage",label:"Battle Mage",iconUrl:wi(_i["battle-mage"]),fallback:""},{key:"druid",label:"Druid",iconUrl:wi(_i.druid),fallback:""},{key:"bard",label:"Bard",iconUrl:wi(_i.bard),fallback:""},{key:"necromancer",label:"Necromancer",iconUrl:wi(_i.necromancer),fallback:""},{key:"paladin",label:"Paladin",iconUrl:wi(_i.paladin),fallback:""}],Gj=Object.fromEntries(Zs.map(t=>[t.key,t])),m0=new Map;function Ls(t,e){m0.set(X3(t),e)}for(const t of Zs)Ls(t.key,t.key),Ls(t.label,t.key);Ls("war","warrior");Ls("krieger","warrior");Ls("magier","mage");Ls("jaeger","scout");Ls("jger","scout");Ls("assa","assassin");Ls("meuchelmoerder","assassin");Ls("meuchelmrder","assassin");Ls("demonhunter","demon-hunter");Ls("dh","demon-hunter");Ls("daemonenjaeger","demon-hunter");Ls("dmonenjger","demon-hunter");Ls("zerker","berserker");Ls("battlemage","battle-mage");Ls("kampfmagier","battle-mage");Ls("bm","battle-mage");Ls("druide","druid");Ls("barde","bard");Ls("necro","necromancer");Ls("nekromant","necromancer");Ls("pala","paladin");function Y3(t){const e=X3(t);if(!e)return{};const s=m0.get(e);if(s){const r=Gj[s];return{url:r.iconUrl,fallback:r.fallback}}for(const[r,i]of m0.entries())if(r.startsWith(e)||e.startsWith(r)){const a=Gj[i];return{url:a.iconUrl,fallback:a.fallback}}return{}}function Mg(t){if(t==null)return null;const e=typeof t=="string"?t:String(t);if(!e.trim())return null;if(/^[a-zA-Z0-9_-]{20,}$/.test(e))return e;const s=e.match(/\/file\/d\/([a-zA-Z0-9_-]{20,})/);if(s!=null&&s[1])return s[1];const r=e.match(/[?&]id=([a-zA-Z0-9_-]{20,})/);if(r!=null&&r[1])return r[1];const i=e.match(/\/uc\?[^#]*\bid=([a-zA-Z0-9_-]{20,})/);return i!=null&&i[1]?i[1]:null}function lf(t){if(t==null)return;const e=Mg(t);return e?`https://drive.google.com/uc?export=view&id=${e}`:String(t)}function J3(t,e=64){if(t==null)return;const s=Mg(t);if(!s)return String(t);const r=Math.max(32,Math.round(e));return`https://drive.google.com/thumbnail?id=${s}&sz=w${r}`}function Z3(t,e){const s="https://images.weserv.nl/",r=new URLSearchParams;return e!=null&&e.w&&r.set("w",String(Math.max(1,Math.floor(e.w)))),e!=null&&e.h&&r.set("h",String(Math.max(1,Math.floor(e.h)))),e!=null&&e.fit&&r.set("fit",e.fit),`${s}?url=${encodeURIComponent(t)}${r.toString()?"&"+r.toString():""}`}function e5(t,e,s,r){const i=lf(t);return i?Z3(i,{w:e,h:s,fit:r}):void 0}function sr(t,e=64){const s=J3(t,e);return s?Z3(s,{w:e,h:e,fit:"contain"}):void 0}function $y(t){if(t==null)return;const e=Mg(t);if(e)return`https://lh3.googleusercontent.com/d/${e}`;if(typeof t=="string"&&/^https?:\/\//i.test(t))return t}function JB(t){return`https://images.weserv.nl/?url=${encodeURIComponent(t)}&n=-1`}const Kl=Object.assign(t=>lf(t),{id:Mg,direct:lf,thumb:J3,proxy:e5,thumbProxy:sr,raw:$y,gif:$y,gifProxy:t=>{const e=$y(t);return e&&/^https?:\/\//i.test(e)?JB(e):lf(t)}}),Oy=t=>Number.isFinite(t),Vc=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},ZB=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function e$(t,e=64){if(!t)return;const s=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,""),r=s(t);let i=Zs.find(a=>s(a.label)===r);if(i||(i=Zs.find(a=>s(a.label).startsWith(r)||r.startsWith(s(a.label)))),!!i)return sr(i.iconUrl,e)}function t$(t){const e=t.ref.parent,s=e==null?void 0:e.parent,r=s==null?void 0:s.parent;return{root:r==null?void 0:r.id,id:s==null?void 0:s.id}}function s$({placeholder:t="Suchen  (Spieler, Gilden, Server)",maxPerSection:e=8,getClassIcon:s}){const r=oi(),[i,a]=J.useState(""),[l,d]=J.useState(""),[u,h]=J.useState(!1),[m,g]=J.useState(null),[v,b]=J.useState([]),[N,S]=J.useState([]),[C,R]=J.useState([]),[M,T]=J.useState(-1),y=J.useRef(null);J.useEffect(()=>{const _=setTimeout(()=>d(i.trim()),200);return()=>clearTimeout(_)},[i]),J.useEffect(()=>{async function _(){g(null);const A=l;if(A.length<1){b([]),S([]),R([]),T(-1);return}h(!0);try{let F=function(be){var pe,re,$e,He,pt,It,Mt,Ht,ss,Ne,Re,Ie,ze,at,ut,xt,Qt,Gt,Pn,en,Ds,Gn,Sr,Ur,Nr,rr,ls,ce,qe,Ge,ct,rt,Et,is;const ye=be.data(),{root:_e,id:we}=t$(be),de=we||ye.playerId||ye.guildIdentifier||"";if(_e==="players"||ye.playerId&&!ye.guildIdentifier){if(!de||H.has(de))return;H.add(de),K.push({kind:"player",id:de,name:($e=(re=ye.name)!=null?re:(pe=ye.values)==null?void 0:pe.Name)!=null?$e:null,nameFold:(He=ye.nameFold)!=null?He:null,server:(Mt=(It=ye.server)!=null?It:(pt=ye.values)==null?void 0:pt.Server)!=null?Mt:null,guildName:(Ne=(ss=ye.guildName)!=null?ss:(Ht=ye.values)==null?void 0:Ht.Guild)!=null?Ne:null,className:(ze=(Ie=ye.className)!=null?Ie:(Re=ye.values)==null?void 0:Re.Class)!=null?ze:null,level:Vc((ut=ye.level)!=null?ut:(at=ye.values)==null?void 0:at.Level),ts:Vc(ye.timestamp)});return}if(_e==="guilds"||ye.guildIdentifier&&!ye.playerId){if(!de||q.has(de))return;q.add(de),G.push({kind:"guild",id:de,name:(Gt=(Qt=ye.name)!=null?Qt:(xt=ye.values)==null?void 0:xt.Name)!=null?Gt:null,nameFold:(Pn=ye.nameFold)!=null?Pn:null,server:(Gn=(Ds=ye.server)!=null?Ds:(en=ye.values)==null?void 0:en.Server)!=null?Gn:null,memberCount:Vc((rr=(Ur=ye.memberCount)!=null?Ur:(Sr=ye.values)==null?void 0:Sr["Guild Member Count"])!=null?rr:(Nr=ye.values)==null?void 0:Nr.GuildMemberCount),hofRank:Vc((is=(rt=(Ge=(ce=ye.hofRank)!=null?ce:(ls=ye.values)==null?void 0:ls["Hall of Fame Rank"])!=null?Ge:(qe=ye.values)==null?void 0:qe.HoF)!=null?rt:(ct=ye.values)==null?void 0:ct.Rank)!=null?is:(Et=ye.values)==null?void 0:Et["Guild Rank"]),ts:Vc(ye.timestamp)});return}};const P=ZB(A),B=Gh(it,"latest"),$=await an(kn(B,Ra("nameFold"),Dl(P),Ml(P+""),zn(e*6))),W=await an(kn(B,Zi("nameNgrams","array-contains",P),zn(e*6))),H=new Set,q=new Set,K=[],G=[];$.forEach(F),W.forEach(F);const te=tc(it,"servers"),ne=A.toLowerCase(),U=A.toUpperCase(),Z=[an(kn(te,Ra("displayName"),Dl(A),Ml(A+""),zn(e*4))),an(kn(te,Ra("code"),Dl(U),Ml(U+""),zn(e*4))),an(kn(te,Ra("host"),Dl(ne),Ml(ne+""),zn(e*4)))],he=await Promise.allSettled(Z),ie=new Set,fe=[];for(const be of he)be.status==="fulfilled"&&be.value.forEach(ye=>{var de,pe,re,$e,He;const _e=ye.data(),we=ye.id;!we||ie.has(we)||(ie.add(we),fe.push({kind:"server",id:we,displayName:(de=_e.displayName)!=null?de:null,code:(pe=_e.code)!=null?pe:null,host:(re=_e.host)!=null?re:null,region:($e=_e.region)!=null?$e:null,type:(He=_e.type)!=null?He:null,numericId:Vc(_e.numericId),active:typeof _e.active=="boolean"?_e.active:null}))});b(K.slice(0,e)),S(G.slice(0,e)),R(fe.slice(0,e)),T(K.length+G.length+fe.length?0:-1)}catch(F){g((F==null?void 0:F.message)||"Unbekannter Fehler bei der Suche."),b([]),S([]),R([]),T(-1)}finally{h(!1)}}return _(),()=>{}},[l,e]),J.useEffect(()=>{const _=A=>{y.current&&(y.current.contains(A.target)||(b([]),S([]),R([]),T(-1)))};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const w=[...v,...N,...C],D=_=>{_.kind==="player"?r(`/player/${encodeURIComponent(_.id)}`):_.kind==="guild"?r(`/guild/${encodeURIComponent(_.id)}`):r(`/server/${encodeURIComponent(_.id)}`),b([]),S([]),R([]),T(-1),a("")},k=_=>{if(w.length)if(_.key==="ArrowDown")_.preventDefault(),T(A=>(A+1)%w.length);else if(_.key==="ArrowUp")_.preventDefault(),T(A=>(A-1+w.length)%w.length);else if(_.key==="Enter"){_.preventDefault();const A=w[M>=0?M:0];A&&D(A)}else _.key==="Escape"&&(b([]),S([]),R([]),T(-1))};return n.jsxs("div",{ref:y,style:kt.wrap,children:[n.jsx("input",{style:kt.input,placeholder:t,value:i,onChange:_=>a(_.target.value),onKeyDown:k,"aria-label":"Spieler, Gilden und Server suchen"}),(u||m||v.length||N.length||C.length)&&n.jsxs("div",{style:kt.dropdown,children:[u&&n.jsx("div",{style:kt.hint,children:"Suche"}),m&&!u&&n.jsxs("div",{style:kt.err,children:[" ",m]}),!u&&!m&&(v.length>0||N.length>0||C.length>0)&&n.jsxs(n.Fragment,{children:[v.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:kt.sectionHdr,children:"Spieler"}),v.map((_,A)=>{var B,$,W,H;const F=A===M,P=(B=s==null?void 0:s(_.className,64))!=null?B:e$(_.className,64);return n.jsxs("button",{onClick:()=>D(_),style:F?kt.itemActive:kt.item,title:_.name||"",onMouseEnter:()=>T(A),children:[n.jsx("div",{style:kt.iconBoxPlain,children:P?n.jsx("img",{src:P,alt:"",style:kt.iconImgShadow,onError:q=>{const K=q.currentTarget.parentElement;K&&(K.innerHTML='<div style="font-size:12px;color:#B0C4D9;"></div>')}}):n.jsx("div",{style:kt.iconFallback,children:(_.className||" ? ").toString().slice(0,2)})}),n.jsxs("div",{style:kt.meta,children:[n.jsxs("div",{style:kt.line1,children:[n.jsx("span",{style:kt.name,children:($=_.name)!=null?$:"Unbekannt"}),Oy(_.level)&&n.jsxs("span",{style:kt.badge,children:["Lvl ",_.level]})]}),n.jsxs("div",{style:kt.line2,children:[_.guildName?n.jsxs("span",{children:["",_.guildName,""]}):n.jsx("span",{style:kt.muted,children:""}),n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:(W=_.className)!=null?W:"Klasse ?"}),n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:(H=_.server)!=null?H:"Server ?"})]})]})]},`p-${_.id}-${A}`)})]}),N.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:kt.sectionHdr,children:"Gilden"}),N.map((_,A)=>{var B,$;const F=v.length+A,P=F===M;return n.jsxs("button",{onClick:()=>D(_),style:P?kt.itemActive:kt.item,title:_.name||"",onMouseEnter:()=>T(F),children:[n.jsx("div",{style:kt.iconBox,children:""}),n.jsxs("div",{style:kt.meta,children:[n.jsxs("div",{style:kt.line1,children:[n.jsx("span",{style:kt.name,children:(B=_.name)!=null?B:"Unbekannt"}),Oy(_.hofRank)&&n.jsxs("span",{style:kt.badge,children:["HoF #",_.hofRank]})]}),n.jsxs("div",{style:kt.line2,children:[n.jsx("span",{children:($=_.server)!=null?$:"Server ?"}),n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:Oy(_.memberCount)?`${_.memberCount} Mitglieder`:"Mitglieder ?"})]})]})]},`g-${_.id}-${A}`)})]}),C.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:kt.sectionHdr,children:"Server"}),C.map((_,A)=>{var B,$,W,H,q,K;const F=v.length+N.length+A,P=F===M;return n.jsxs("button",{onClick:()=>D(_),style:P?kt.itemActive:kt.item,title:_.displayName||_.code||_.host||"",onMouseEnter:()=>T(F),children:[n.jsx("div",{style:kt.iconBoxPlain,children:n.jsx("div",{style:kt.serverGlyph,children:""})}),n.jsxs("div",{style:kt.meta,children:[n.jsxs("div",{style:kt.line1,children:[n.jsx("span",{style:kt.name,children:(W=($=(B=_.displayName)!=null?B:_.code)!=null?$:_.host)!=null?W:_.id}),_.active!=null&&n.jsx("span",{style:kt.badge,children:_.active?"Aktiv":"Inaktiv"})]}),n.jsxs("div",{style:kt.line2,children:[n.jsx("span",{children:(H=_.code)!=null?H:""}),n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:(q=_.host)!=null?q:""}),n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:(K=_.region)!=null?K:""}),_.type?n.jsxs(n.Fragment,{children:[n.jsx("span",{style:kt.sep,children:""}),n.jsx("span",{children:_.type.toUpperCase()})]}):null]})]})]},`s-${_.id}-${A}`)})]})]}),!u&&!m&&v.length===0&&N.length===0&&C.length===0&&l.length>=1&&n.jsx("div",{style:kt.hint,children:"Keine Treffer"})]})]})}const kt={wrap:{position:"relative",display:"flex",alignItems:"center",width:"100%",maxWidth:560},input:{width:"100%",height:40,padding:"0 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(255,255,255,0.06)",color:"#fff",outline:"none"},dropdown:{position:"absolute",top:"110%",left:0,right:0,background:"rgba(12,28,46,0.97)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:6,zIndex:50,boxShadow:"0 8px 24px rgba(0,0,0,0.35)",maxHeight:440,overflowY:"auto"},sectionHdr:{margin:"6px 6px 4px",padding:"2px 6px",fontSize:11,letterSpacing:.4,textTransform:"uppercase",color:"rgba(214,228,247,0.85)"},hint:{padding:"10px 12px",color:"rgba(214,228,247,0.85)",fontSize:14},err:{padding:"10px 12px",color:"#ff8a8a",fontSize:14},item:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",background:"transparent",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff"},itemActive:{display:"flex",alignItems:"center",gap:10,width:"100%",border:"none",textAlign:"left",padding:10,borderRadius:10,cursor:"pointer",color:"#fff",background:"rgba(45,78,120,0.35)",outline:"1px solid rgba(92,139,198,0.55)"},iconBox:{width:36,height:36,borderRadius:8,background:"rgba(26,47,74,1)",display:"grid",placeItems:"center",overflow:"hidden",flexShrink:0},iconBoxPlain:{width:36,height:36,display:"grid",placeItems:"center",background:"transparent",flexShrink:0},iconImgShadow:{width:"100%",height:"100%",objectFit:"contain",background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},serverGlyph:{fontSize:22,lineHeight:"1",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},iconFallback:{fontSize:12,color:"#B0C4D9"},meta:{display:"flex",flexDirection:"column",minWidth:0},line1:{display:"flex",alignItems:"center",gap:8},name:{fontWeight:700,color:"#F5F9FF"},badge:{fontSize:12,background:"rgba(45,78,120,0.4)",padding:"2px 6px",borderRadius:6},line2:{display:"flex",alignItems:"center",gap:6,color:"#B0C4D9",fontSize:12},sep:{opacity:.6},muted:{opacity:.7}},kp=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"");function Z1(t,e=64){if(!t)return;const s=kp(t);let r=Zs.find(i=>kp(i.label)===s);return r||(r=Zs.find(i=>kp(i.label).startsWith(s)||s.startsWith(kp(i.label)))),r?sr(r.iconUrl,e):void 0}const n$=[{to:"/",label:"Home",featureId:"main.home"},{to:"/dashboard",label:"Dashboard",featureId:"main.dashboard"},{to:"/guild-hub",label:"Guild Hub",featureId:"main.guildHub"},{to:"/community",label:"Community",featureId:"main.community"},{to:"/tools",label:"Tools",featureId:"main.tools"}];function r$(t,e){return Z1(t,e)}function i$({user:t}){const{open:e,canUse:s}=J1(),{isVisibleInTopbar:r}=Dg(),i=J.useMemo(()=>n$.filter(l=>!l.featureId||r(l.featureId)),[r]),a=()=>{e({tab:"json"})};return n.jsxs("header",{className:Rt.topbar,children:[n.jsxs("div",{className:Rt.topbarLeft,children:[n.jsx("button",{className:Rt.btnIco,"aria-label":"Benachrichtigungen",children:n.jsx(eL,{className:Rt.ico})}),n.jsx("button",{className:Rt.btnIco,"aria-label":"Favoriten",children:n.jsx(o6,{className:Rt.ico})}),i.length>0?n.jsx("nav",{className:Rt.topbarNav,"aria-label":"Schnellzugriff",children:i.map(l=>n.jsx(Ns,{to:l.to,className:({isActive:d})=>`${Rt.pill} ${Rt.topbarLink} ${d?Rt.pillActive:""}`,children:l.label},l.to))}):null]}),n.jsx("div",{className:Rt.searchWrap,children:n.jsx(s$,{placeholder:"Suchen (Spieler)",getClassIcon:r$,maxPerSection:10})}),n.jsxs("div",{className:Rt.topbarRight,children:[n.jsxs("a",{className:`${Rt.pill} ${Rt.onlyExpanded}`,href:"https://www.sfgame.net",target:"_blank",rel:"noreferrer",children:[n.jsx(CL,{className:Rt.ico}),"www.sfgame.net"]}),s?n.jsxs("button",{className:Rt.upload,"aria-label":"Scan hochladen",onClick:a,title:"Scan hochladen",children:[n.jsx(g6,{className:Rt.ico}),n.jsx("span",{className:Rt.label,children:"Scan hochladen"})]}):null,n.jsx($B,{fallbackName:t==null?void 0:t.name})]})]})}const a$="_root_16jjy_3",o$="_expanded_16jjy_45",l$="_headRow_16jjy_55",c$="_headTitle_16jjy_63",d$="_headDot_16jjy_65",u$="_headLabel_16jjy_67",h$="_pinBtn_16jjy_69",m$="_navScroll_16jjy_81",p$="_pad_16jjy_83",f$="_segCard_16jjy_89",g$="_segTitle_16jjy_121",x$="_connectedCharactersCard_16jjy_130",y$="_connectedCharactersTitle_16jjy_133",v$="_connectedCharactersList_16jjy_140",b$="_characterChip_16jjy_148",_$="_characterChipId_16jjy_168",w$="_characterChipMeta_16jjy_172",j$="_connectedCharactersEmpty_16jjy_176",S$="_navCol_16jjy_201",N$="_navItemWrap_16jjy_202",k$="_navBtn_16jjy_206",C$="_navBtnActive_16jjy_230",T$="_label_16jjy_234",E$="_trailing_16jjy_264",A$="_isOpen_16jjy_312",I$="_footer_16jjy_338",P$="_login_16jjy_340",R$="_userMeta_16jjy_362",L$="_footerLink_16jjy_376",D$="_legal_16jjy_404",M$="_labelText_16jjy_428",F$="_char_16jjy_148",B$="_mainNavCard_16jjy_506",Ct={root:a$,expanded:o$,headRow:l$,headTitle:c$,headDot:d$,headLabel:u$,pinBtn:h$,navScroll:m$,pad:p$,segCard:f$,segTitle:g$,connectedCharactersCard:x$,connectedCharactersTitle:y$,connectedCharactersList:v$,characterChip:b$,characterChipId:_$,characterChipMeta:w$,connectedCharactersEmpty:j$,navCol:S$,navItemWrap:N$,navBtn:k$,navBtnActive:C$,label:T$,trailing:E$,isOpen:A$,footer:I$,login:P$,userMeta:R$,footerLink:L$,legal:D$,labelText:M$,char:F$,mainNavCard:B$},$$="_panel_90cjk_1",O$="_open_90cjk_31",V$="_col_90cjk_43",U$="_link_90cjk_55",z$="_linkActive_90cjk_73",Yu={panel:$$,open:O$,col:V$,link:U$,linkActive:z$};function H$(t,e=8){const s=t.getBoundingClientRect();return{left:Math.round(s.right+e),top:Math.round(s.top)}}function G$({anchorEl:t,open:e,items:s,renderLink:r,onMouseEnter:i,onMouseLeave:a}){const[l,d]=J.useState({left:0,top:0});return J.useEffect(()=>{if(!e||!t)return;const u=()=>d(H$(t));u();const h=new ResizeObserver(u);return h.observe(document.documentElement),window.addEventListener("scroll",u,!0),window.addEventListener("resize",u),()=>{h.disconnect(),window.removeEventListener("scroll",u,!0),window.removeEventListener("resize",u)}},[e,t]),typeof document=="undefined"?null:(e&&(s!=null&&s.length)&&console.log("submenu items:",s.map(u=>u.label)),UR.createPortal(n.jsx("div",{className:`${Yu.panel} ${e?Yu.open:""}`,style:{left:l.left,top:l.top,maxHeight:"70vh",overflow:"auto",zIndex:3e3},onMouseEnter:i,onMouseLeave:a,role:"menu",children:n.jsx("div",{className:Yu.col,children:s.map(u=>r(u))})}),document.body))}const W$=[{to:"/",label:"Home",icon:n.jsx(AL,{className:"ico"}),end:!0,featureId:"main.home"},{to:"/discover",label:"Discover",icon:n.jsx(yL,{className:"ico"}),featureId:"main.discover"},{to:"/dashboard",label:"Dashboard",icon:n.jsx(LL,{className:"ico"}),featureId:"main.dashboard"},{to:"/settings",label:"Settings",icon:n.jsx(YL,{className:"ico"}),featureId:"main.settings"},{to:"/guild-hub",label:"Guild Hub",icon:n.jsx(Jl,{className:"ico"}),featureId:"main.guildHub"},{to:"/admin",label:"Admin",icon:n.jsx(t6,{className:"ico"}),featureId:"main.admin"},{to:"/playground",label:"Playground",icon:n.jsx(cg,{className:"ico"}),featureId:"main.playground"}],q$=[{to:"/toplists",label:"Toplists",icon:n.jsx(p6,{className:"ico"}),featureId:"main.toplists"},{to:"/guidehub",label:"Guide Hub",icon:n.jsx(sL,{className:"ico"}),featureId:"main.guidehub"},{to:"/tools",label:"Tools",icon:n.jsx(v6,{className:"ico"}),i18nKey:"nav.tools",featureId:"main.tools"},{to:"/community",label:"Community",icon:n.jsx(FL,{className:"ico"}),featureId:"main.community"},{to:"/scans",label:"Scans",icon:n.jsx(NL,{className:"ico"}),featureId:"main.scans"}],K$={"/guild-hub":[{to:"/guild-hub",label:"Overview"},{to:"/guild-hub/planner",label:"Guild Planner"},{to:"/guild-hub/fusion-planner",label:"Fusion Planner"},{to:"/guild-hub/compare-guilds",label:"Gildenvergleich"},{to:"/guild-hub/waitlist",label:"Waitlist"},{to:"/guild-hub/settings",label:"Settings"}],"/discover":[{to:"/players",label:"Players"},{to:"/sfmagazine",label:"SFMagazine"},{to:"/sfmagazine/historybook",label:"History Book"},{to:"/guilds",label:"Guilds"},{to:"/servers",label:"Servers"},{to:"/scans",label:"Scans"},{to:"/discover/favorites",label:"Favorites"}],"/admin":[{to:"/admin",label:"Overview"},{to:"/admin/errors",label:"Error log"},{to:"/admin/feedback",label:"Feedback"},{to:"/admin/users",label:"Users",minRole:"mod"}],"/settings":[{to:"/settings/profile",label:"Profile"},{to:"/settings/account",label:"Account"},{to:"/settings/appearance",label:"Appearance"}],"/playground":[{to:"/playground/list-views",label:"List Views"},{to:"/playground/rescan-widget",label:"Rescan Widget"},{to:"/playground/upload-sim",label:"Upload Simulator"},{to:"/playground/hud/game-buttons",label:"HUD  Game Buttons"}]};function Q$(t,e){return e?e==="admin"?t.includes("admin"):t.includes("admin")||t.includes("mod"):!0}function X$(t,e){return t?t.filter(s=>Q$(e,s.minRole)):[]}const Y$=220;function J$(t=Y$){const[e,s]=J.useState(!1),r=J.useRef(null),i=J.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]),a=J.useCallback(()=>{i(),s(!0)},[i]),l=J.useCallback(()=>{i(),r.current=window.setTimeout(()=>s(!1),t)},[i,t]);return J.useEffect(()=>()=>i(),[i]),{open:e,onEnter:a,onLeave:l,setOpen:s}}function eb({text:t,isOpen:e,duration:s=1,step:r=45}){const i=J.useMemo(()=>Array.from(t),[t]);return n.jsx("span",{className:Ct.label,children:n.jsx("span",{className:Ct.labelText,"data-open":e?"true":"false","aria-label":t,role:"text",style:{"--duration":`${s}ms`,"--step":`${r}ms`,"--count":i.length},children:i.map((a,l)=>n.jsx("span",{className:Ct.char,style:{"--i":l},"aria-hidden":"true",children:a===" "?"":a},`${t}-${l}`))})})}function Z$({it:t,label:e,collapsed:s,allowSubmenus:r,subItems:i}){const a=i.length>0,{open:l,onEnter:d,onLeave:u,setOpen:h}=J$(),m=J.useRef(null),g=J.useCallback(()=>{if(!r||!a){h(!1);return}d()},[r,a,d,h]);return n.jsxs("div",{ref:m,className:`${Ct.navItemWrap} ${l?Ct.isOpen:""}`,onMouseEnter:g,onMouseLeave:u,children:[n.jsxs(Ns,{to:t.to,end:!!t.end,className:({isActive:v})=>`${Ct.navBtn} ${v?Ct.navBtnActive:""}`,children:[t.icon,n.jsx(eb,{text:e,isOpen:!s}),a&&!s&&n.jsx("span",{className:Ct.trailing,"aria-hidden":"true",children:n.jsx(aL,{className:"ico"})})]}),a&&n.jsx(G$,{anchorEl:m.current,open:l,items:i.map(({to:v,label:b})=>({to:v,label:b})),renderLink:v=>n.jsx(Ns,{to:v.to,end:!0,className:({isActive:b})=>`${Yu.link} ${b?Yu.linkActive:""}`,children:v.label},v.to),onMouseEnter:d,onMouseLeave:u})]})}function Wj({title:t,items:e,collapsed:s,allowSubmenus:r,userRoles:i,translate:a,isItemVisible:l}){return n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:`${Ct.navTitle} ${Ct.segTitle}`,children:t}),n.jsx("div",{className:Ct.navCol,children:e.map(d=>{if(!l(d))return null;const u=X$(K$[d.to],i),h=d.i18nKey?a(d.i18nKey):d.label;return u.length?n.jsx(Z$,{it:d,label:h,collapsed:s,allowSubmenus:r,subItems:u},d.to):n.jsxs(Ns,{to:d.to,end:!!d.end,className:({isActive:m})=>`${Ct.navBtn} ${m?Ct.navBtnActive:""}`,children:[d.icon,n.jsx(eb,{text:h,isOpen:!s})]},d.to)})})]})}const eO=90,tO=180;function sO({expanded:t,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:i=!0}){var P;const a=J.useRef(null),l=J.useRef(null),[d,u]=J.useState(!1),h=J.useCallback(()=>{a.current&&(window.clearTimeout(a.current),a.current=null),l.current&&(window.clearTimeout(l.current),l.current=null)},[]),m=J.useCallback(()=>{!i||s||(h(),u(!1),a.current=window.setTimeout(()=>e(!0),eO))},[i,s,h,e]),g=J.useCallback(()=>{!i||s||(h(),l.current=window.setTimeout(()=>{e(!1),u(!1)},tO))},[i,s,h,e]);J.useEffect(()=>()=>h(),[h]),J.useEffect(()=>{s&&u(!0)},[s]);const v=B=>{B.propertyName==="width"&&t&&!s&&u(!0)};J.useEffect(()=>{if(t&&!s){const B=window.setTimeout(()=>u(!0),250);return()=>window.clearTimeout(B)}},[t,s]);const b=!t,N=s||t&&d,S=oi(),{t:C}=qo(),{status:R,user:M,logout:T}=Xa(),y=R==="authenticated",w=(P=M==null?void 0:M.roles)!=null?P:[],D=J.useMemo(()=>{var B;return(B=M==null?void 0:M.linkedPlayers)!=null?B:[]},[M==null?void 0:M.linkedPlayers]),{isVisibleInSidebar:k}=Dg(),_=()=>{y?T():S("/login")},A=B=>{S(`/player/${B}`)},F=y?C("sidebar.connectedCharacters.empty",{defaultValue:"No characters linked yet. Link a character in your account to see it here."}):C("sidebar.connectedCharacters.loginPrompt",{defaultValue:"Sign in to see your linked characters."});return n.jsxs("aside",{id:"sidebar-root",className:`${Ct.root} ${t?Ct.expanded:""}`,"data-collapsed":b?"true":"false",onMouseEnter:m,onMouseLeave:g,onTransitionEnd:v,"aria-label":"Navigation",children:[n.jsxs("div",{className:Ct.headRow,children:[n.jsxs("div",{className:Ct.headTitle,children:[n.jsx("span",{className:Ct.headDot})," ",n.jsx("span",{className:Ct.headLabel,children:"Navigation"})]}),n.jsx("button",{className:Ct.pinBtn,"aria-pressed":s,title:s?"Unpin":"Pin",onClick:()=>r(!s),type:"button",children:s?n.jsx(zL,{className:"ico"}):n.jsx(VL,{className:"ico"})})]}),n.jsx("div",{className:Ct.navScroll,children:n.jsxs("div",{className:Ct.pad,children:[n.jsx("div",{className:`${Ct.segCard} ${Ct.mainNavCard}`,children:n.jsx(Wj,{items:W$,collapsed:b,allowSubmenus:N,userRoles:w,translate:C,isItemVisible:B=>{var $;return k(($=B.featureId)!=null?$:B.to)}})}),n.jsx("div",{className:Ct.segTitle,children:"Kategorien"}),n.jsx("div",{className:`${Ct.segCard} ${Ct.mainNavCard}`,children:n.jsx(Wj,{items:q$,collapsed:b,allowSubmenus:N,userRoles:w,translate:C,isItemVisible:B=>{var $;return k(($=B.featureId)!=null?$:B.to)}})}),n.jsxs("div",{className:`${Ct.segCard} ${Ct.mainNavCard} ${Ct.connectedCharactersCard}`,children:[n.jsx("div",{className:Ct.connectedCharactersTitle,children:C("sidebar.connectedCharacters.title",{defaultValue:"Connected characters"})}),D.length===0?n.jsx("div",{className:Ct.connectedCharactersEmpty,children:F}):n.jsx("div",{className:Ct.connectedCharactersList,"data-collapsed":b?"true":"false",children:D.map(B=>{var q,K;const $=[B.server,B.class].filter(Boolean).join(" | "),W=(q=B.playerId)!=null?q:"-",H=`${(K=B.server)!=null?K:"server"}-${W}`;return n.jsxs("button",{type:"button",className:Ct.characterChip,onClick:()=>A(W),children:[n.jsx("span",{className:Ct.characterChipId,children:W}),$&&n.jsx("span",{className:Ct.characterChipMeta,children:$})]},H)})})]})]})}),n.jsxs("div",{className:`${Ct.footer} ${Ct.segCard} ${Ct.mainNavCard}`,children:[n.jsxs("button",{className:Ct.login,type:"button",onClick:_,children:[n.jsx(Jl,{className:"ico"}),n.jsx(eb,{text:y?"Logout":"Login",isOpen:!b})]}),y&&(M!=null&&M.displayName)?n.jsx("div",{className:Ct.userMeta,title:M.displayName,children:M.displayName}):null,n.jsx(Ns,{to:"/help",className:Ct.footerLink,children:C("nav.help",{defaultValue:"Help"})}),n.jsxs("div",{className:Ct.legal,children:["(c) 2025 ",C("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})]})]})]})}const cf="/assets/logo-sfdatahub-CUdhlsEb.png";function nO({src:t,alt:e="",children:s,to:r="/",loading:i="eager",decoding:a="async"}){const l=t!=null?t:cf;return n.jsxs("div",{className:"logo-dock",children:[n.jsx(Ns,{to:r,"aria-label":"Go to home",children:n.jsx("img",{className:"logo-img",src:l,alt:e,loading:i,decoding:a,onError:d=>{const u=d.currentTarget;u.src!==cf&&(u.src=cf)}})}),s]})}const rO={borderColor:"#2B4C73",background:"#1A2F4A"};function iO(){const[t,e]=E.useState(!1),[s,r]=E.useState(!1),i=s||t,{t:a}=qo(),l=E.useMemo(()=>i?"var(--sidebar-expanded-w)":"var(--sidebar-w)",[i]),d=a("footer.about.body").split(`

`),u=[{key:"tos",to:"/playground/legal/tos",label:a("help.sections.legal.items.tos",{defaultValue:"Terms of Service (ToS)"})},{key:"privacy",to:"/playground/legal/tos",label:a("help.sections.legal.items.privacy",{defaultValue:"Privacy Policy"})},{key:"imprint",to:"/help",label:a("help.sections.legal.items.imprint",{defaultValue:"Imprint / Contact"})}];return n.jsxs("div",{id:"app-shell","data-sidebar":i?"expanded":"collapsed",style:{"--left":l},children:[n.jsx(nO,{src:"/logo.png"}),n.jsx(i$,{}),n.jsx("div",{className:"logo-fill"}),n.jsx(sO,{expanded:i,setExpanded:e,pinned:s,setPinned:r,hoverToExpand:!s}),n.jsx("div",{className:"content",children:n.jsx("div",{className:"content-inner",children:n.jsxs("div",{className:"content-body",children:[n.jsx(pC,{}),n.jsx("div",{className:"mt-4 px-4 md:px-6",children:n.jsxs("div",{className:"rounded-2xl border px-4 py-4",style:rO,children:[n.jsx("div",{className:"text-sm font-semibold",style:{color:"#F5F9FF"},children:a("footer.about.title")}),n.jsx("div",{className:"mt-2 space-y-2 text-[13px]",style:{color:"#B0C4D9"},children:d.map((h,m)=>n.jsx("p",{className:"whitespace-pre-line",children:h},`footer-about-${m}`))}),n.jsxs("div",{className:"mt-4 space-y-2 text-[12px]",style:{color:"#B0C4D9"},children:[n.jsx("div",{children:a("footer.copyright",{defaultValue:" 2025 SFDataHub  community project around Shakes & Fidget."})}),n.jsx("div",{children:a("footer.shortDisclaimer",{defaultValue:"SFDataHub is an unofficial, non-commercial fan project. All trademarks and images belong to their respective owners."})})]}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-3 text-[13px]",style:{color:"#9EC7FF"},children:u.map(h=>n.jsx(rs,{to:h.to,className:"underline hover:no-underline",children:h.label},h.key))})]})})]})})})]})}const t5=E.createContext({});function tb(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const sb=E.createContext(null),nb=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function aO(t=!0){const e=E.useContext(sb);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=e,a=E.useId();E.useEffect(()=>{t&&i(a)},[t]);const l=E.useCallback(()=>t&&r&&r(a),[a,r,t]);return!s&&r?[!1,l]:[!0]}const rb=typeof window!="undefined",s5=rb?E.useLayoutEffect:E.useEffect,$r=t=>t;let n5=$r;function ib(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ql=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r},ea=t=>t*1e3,ta=t=>t/1e3,oO={useManualTiming:!1};function lO(t){let e=new Set,s=new Set,r=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(h){a.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,m=!1,g=!1)=>{const b=g&&r?e:s;return m&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{s.delete(h),a.delete(h)},process:h=>{if(l=h,r){i=!0;return}r=!0,[e,s]=[s,e],e.forEach(d),e.clear(),r=!1,i&&(i=!1,u.process(h))}};return u}const Cp=["read","resolveKeyframes","update","preRender","render","postRender"],cO=40;function r5(t,e){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,l=Cp.reduce((R,M)=>(R[M]=lO(a),R),{}),{read:d,resolveKeyframes:u,update:h,preRender:m,render:g,postRender:v}=l,b=()=>{const R=performance.now();s=!1,i.delta=r?1e3/60:Math.max(Math.min(R-i.timestamp,cO),1),i.timestamp=R,i.isProcessing=!0,d.process(i),u.process(i),h.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,s&&e&&(r=!1,t(b))},N=()=>{s=!0,r=!0,i.isProcessing||t(b)};return{schedule:Cp.reduce((R,M)=>{const T=l[M];return R[M]=(y,w=!1,D=!1)=>(s||N(),T.schedule(y,w,D)),R},{}),cancel:R=>{for(let M=0;M<Cp.length;M++)l[Cp[M]].cancel(R)},state:i,steps:l}}const{schedule:ys,cancel:Wa,state:_n,steps:Vy}=r5(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:$r,!0),i5=E.createContext({strict:!1}),qj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jd={};for(const t in qj)jd[t]={isEnabled:e=>qj[t].some(s=>!!e[s])};function dO(t){for(const e in t)jd[e]={...jd[e],...t[e]}}const uO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uO.has(t)}let a5=t=>!Bf(t);function hO(t){t&&(a5=e=>e.startsWith("on")?!Bf(e):t(e))}try{hO(require("@emotion/is-prop-valid").default)}catch(t){}function mO(t,e,s){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(a5(i)||s===!0&&Bf(i)||!e&&!Bf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function pO(t){if(typeof Proxy=="undefined")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Fg=E.createContext({});function jh(t){return typeof t=="string"||Array.isArray(t)}function Bg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ab=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ob=["initial",...ab];function $g(t){return Bg(t.animate)||ob.some(e=>jh(t[e]))}function o5(t){return!!($g(t)||t.variants)}function fO(t,e){if($g(t)){const{initial:s,animate:r}=t;return{initial:s===!1||jh(s)?s:void 0,animate:jh(r)?r:void 0}}return t.inherit!==!1?e:{}}function gO(t){const{initial:e,animate:s}=fO(t,E.useContext(Fg));return E.useMemo(()=>({initial:e,animate:s}),[Kj(e),Kj(s)])}function Kj(t){return Array.isArray(t)?t.join(" "):t}const xO=Symbol.for("motionComponentSymbol");function Jc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yO(t,e,s){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):Jc(s)&&(s.current=r))},[e])}const lb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vO="framerAppearId",l5="data-"+lb(vO),{schedule:cb}=r5(queueMicrotask,!1),c5=E.createContext({});function bO(t,e,s,r,i){var a,l;const{visualElement:d}=E.useContext(Fg),u=E.useContext(i5),h=E.useContext(sb),m=E.useContext(nb).reducedMotion,g=E.useRef(null);r=r||u.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:d,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const v=g.current,b=E.useContext(c5);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&_O(g.current,s,i,b);const N=E.useRef(!1);E.useInsertionEffect(()=>{v&&N.current&&v.update(s,h)});const S=s[l5],C=E.useRef(!!S&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,S))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,S)));return s5(()=>{v&&(N.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),cb.render(v.render),C.current&&v.animationState&&v.animationState.animateChanges())}),E.useEffect(()=>{v&&(!C.current&&v.animationState&&v.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,S)}),C.current=!1))}),v}function _O(t,e,s,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:d5(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&Jc(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:h})}function d5(t){if(t)return t.options.allowProjection!==!1?t.projection:d5(t.parent)}function wO({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:i}){var a,l;t&&dO(t);function d(h,m){let g;const v={...E.useContext(nb),...h,layoutId:jO(h)},{isStatic:b}=v,N=gO(h),S=r(h,b);if(!b&&rb){SO();const C=NO(v);g=C.MeasureLayout,N.visualElement=bO(i,S,v,e,C.ProjectionNode)}return n.jsxs(Fg.Provider,{value:N,children:[g&&N.visualElement?n.jsx(g,{visualElement:N.visualElement,...v}):null,s(i,h,yO(S,N.visualElement,m),S,b,N.visualElement)]})}d.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const u=E.forwardRef(d);return u[xO]=i,u}function jO({layoutId:t}){const e=E.useContext(t5).id;return e&&t!==void 0?e+"-"+t:t}function SO(t,e){E.useContext(i5).strict}function NO(t){const{drag:e,layout:s}=jd;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const kO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function db(t){return typeof t!="string"||t.includes("-")?!1:!!(kO.indexOf(t)>-1||/[A-Z]/u.test(t))}function Qj(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function ub(t,e,s,r){if(typeof e=="function"){const[i,a]=Qj(r);e=e(s!==void 0?s:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Qj(r);e=e(s!==void 0?s:t.custom,i,a)}return e}const p0=t=>Array.isArray(t),CO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),TO=t=>p0(t)?t[t.length-1]||0:t,pn=t=>!!(t&&t.getVelocity);function df(t){const e=pn(t)?t.get():t;return CO(e)?e.toValue():e}function EO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},r,i,a){const l={latestValues:AO(r,i,a,t),renderState:e()};return s&&(l.onMount=d=>s({props:r,current:d,...l}),l.onUpdate=d=>s(d)),l}const u5=t=>(e,s)=>{const r=E.useContext(Fg),i=E.useContext(sb),a=()=>EO(t,e,r,i);return s?a():tb(a)};function AO(t,e,s,r){const i={},a=r(t,{});for(const v in a)i[v]=df(a[v]);let{initial:l,animate:d}=t;const u=$g(t),h=o5(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let m=s?s.initial===!1:!1;m=m||l===!1;const g=m?d:l;if(g&&typeof g!="boolean"&&!Bg(g)){const v=Array.isArray(g)?g:[g];for(let b=0;b<v.length;b++){const N=ub(t,v[b]);if(N){const{transitionEnd:S,transition:C,...R}=N;for(const M in R){let T=R[M];if(Array.isArray(T)){const y=m?T.length-1:0;T=T[y]}T!==null&&(i[M]=T)}for(const M in S)i[M]=S[M]}}}return i}const Fd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sc=new Set(Fd),h5=t=>e=>typeof e=="string"&&e.startsWith(t),m5=h5("--"),IO=h5("var(--"),hb=t=>IO(t)?PO.test(t.split("/*")[0].trim()):!1,PO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,p5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,qa=(t,e,s)=>s>e?e:s<t?t:s,Bd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sh={...Bd,transform:t=>qa(0,1,t)},Tp={...Bd,default:1},Qh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ko=Qh("deg"),sa=Qh("%"),dt=Qh("px"),RO=Qh("vh"),LO=Qh("vw"),Xj={...sa,parse:t=>sa.parse(t)/100,transform:t=>sa.transform(t*100)},DO={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt},MO={rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:Tp,scaleX:Tp,scaleY:Tp,scaleZ:Tp,skew:ko,skewX:ko,skewY:ko,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:Sh,originX:Xj,originY:Xj,originZ:dt},Yj={...Bd,transform:Math.round},mb={...DO,...MO,zIndex:Yj,size:dt,fillOpacity:Sh,strokeOpacity:Sh,numOctaves:Yj},FO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BO=Fd.length;function $O(t,e,s){let r="",i=!0;for(let a=0;a<BO;a++){const l=Fd[a],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||s){const h=p5(d,mb[l]);if(!u){i=!1;const m=FO[l]||l;r+=`${m}(${h}) `}s&&(e[l]=h)}}return r=r.trim(),s?r=s(e,i?"":r):i&&(r="none"),r}function pb(t,e,s){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(sc.has(u)){l=!0;continue}else if(m5(u)){i[u]=h;continue}else{const m=p5(h,mb[u]);u.startsWith("origin")?(d=!0,a[u]=m):r[u]=m}}if(e.transform||(l||s?r.transform=$O(e,t.transform,s):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${h} ${m}`}}const OO={offset:"stroke-dashoffset",array:"stroke-dasharray"},VO={offset:"strokeDashoffset",array:"strokeDasharray"};function UO(t,e,s=1,r=0,i=!0){t.pathLength=1;const a=i?OO:VO;t[a.offset]=dt.transform(-r);const l=dt.transform(e),d=dt.transform(s);t[a.array]=`${l} ${d}`}function Jj(t,e,s){return typeof t=="string"?t:dt.transform(e+s*t)}function zO(t,e,s){const r=Jj(e,t.x,t.width),i=Jj(s,t.y,t.height);return`${r} ${i}`}function fb(t,{attrX:e,attrY:s,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:u=0,...h},m,g){if(pb(t,h,g),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:b,dimensions:N}=t;v.transform&&(N&&(b.transform=v.transform),delete v.transform),N&&(i!==void 0||a!==void 0||b.transform)&&(b.transformOrigin=zO(N,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(v.x=e),s!==void 0&&(v.y=s),r!==void 0&&(v.scale=r),l!==void 0&&UO(v,l,d,u,!1)}const gb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),f5=()=>({...gb(),attrs:{}}),xb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function g5(t,{style:e,vars:s},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in s)t.style.setProperty(a,s[a])}const x5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y5(t,e,s,r){g5(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(x5.has(i)?i:lb(i),e.attrs[i])}const $f={};function HO(t){Object.assign($f,t)}function v5(t,{layout:e,layoutId:s}){return sc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!$f[t]||t==="opacity")}function yb(t,e,s){var r;const{style:i}=t,a={};for(const l in i)(pn(i[l])||e.style&&pn(e.style[l])||v5(l,t)||((r=s==null?void 0:s.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}function b5(t,e,s){const r=yb(t,e,s);for(const i in t)if(pn(t[i])||pn(e[i])){const a=Fd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function GO(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(s){e.dimensions={x:0,y:0,width:0,height:0}}}const Zj=["x","y","width","height","cx","cy","r"],WO={useVisualState:u5({scrapeMotionValuesFromProps:b5,createRenderState:f5,onUpdate:({props:t,prevProps:e,current:s,renderState:r,latestValues:i})=>{if(!s)return;let a=!!t.drag;if(!a){for(const d in i)if(sc.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<Zj.length;d++){const u=Zj[d];t[u]!==e[u]&&(l=!0)}l&&ys.read(()=>{GO(s,r),ys.render(()=>{fb(r,i,xb(s.tagName),t.transformTemplate),y5(s,r)})})}})},qO={useVisualState:u5({scrapeMotionValuesFromProps:yb,createRenderState:gb})};function _5(t,e,s){for(const r in e)!pn(e[r])&&!v5(r,s)&&(t[r]=e[r])}function KO({transformTemplate:t},e){return E.useMemo(()=>{const s=gb();return pb(s,e,t),Object.assign({},s.vars,s.style)},[e])}function QO(t,e){const s=t.style||{},r={};return _5(r,s,t),Object.assign(r,KO(t,e)),r}function XO(t,e){const s={},r=QO(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}function YO(t,e,s,r){const i=E.useMemo(()=>{const a=f5();return fb(a,e,xb(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};_5(a,t.style,t),i.style={...a,...i.style}}return i}function JO(t=!1){return(s,r,i,{latestValues:a},l)=>{const u=(db(s)?YO:XO)(r,a,l,s),h=mO(r,typeof s=="string",t),m=s!==E.Fragment?{...h,...u,ref:i}:{},{children:g}=r,v=E.useMemo(()=>pn(g)?g.get():g,[g]);return E.createElement(s,{...m,children:v})}}function ZO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...db(r)?WO:qO,preloadedFeatures:t,useRender:JO(i),createVisualElement:e,Component:r};return wO(l)}}function w5(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}function Og(t,e,s){const r=t.getProps();return ub(r,e,s!==void 0?s:r.custom,t)}const eV=ib(()=>window.ScrollTimeline!==void 0);class tV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e,s){const r=this.animations.map(i=>{if(eV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class j5 extends tV{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function vb(t,e){return t?t[e]||t.default||t:void 0}const Of=2e4;function bb(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<Of;)e+=s,r=t.next(e);return e>=Of?1/0:e}function sV(t,e=100,s){const r=s({...t,keyframes:[0,e]}),i=Math.min(bb(r),Of);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:ta(i)}}function Vg(t){return typeof t=="function"}function eS(t,e){t.timeline=e,t.onfinish=null}const _b=t=>Array.isArray(t)&&typeof t[0]=="number",nV={linearEasing:void 0};function rV(t,e){const s=ib(t);return()=>{var r;return(r=nV[e])!==null&&r!==void 0?r:s()}}const Vf=rV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),S5=(t,e,s=10)=>{let r="";const i=Math.max(Math.round(e/s),2);for(let a=0;a<i;a++)r+=t(Ql(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function N5(t){return!!(typeof t=="function"&&Vf()||!t||typeof t=="string"&&(t in f0||Vf())||_b(t)||Array.isArray(t)&&t.every(N5))}const Ou=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,f0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ou([0,.65,.55,1]),circOut:Ou([.55,0,1,.45]),backIn:Ou([.31,.01,.66,-.59]),backOut:Ou([.33,1.53,.69,.99])};function k5(t,e){if(t)return typeof t=="function"&&Vf()?S5(t,e):_b(t)?Ou(t):Array.isArray(t)?t.map(s=>k5(s,e)||f0.easeOut):f0[t]}const Si={x:!1,y:!1};function C5(){return Si.x||Si.y}function T5(t,e,s){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=s==null?void 0:s[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function E5(t,e){const s=T5(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[s,i,()=>r.abort()]}function tS(t){return e=>{e.pointerType==="touch"||C5()||t(e)}}function iV(t,e,s={}){const[r,i,a]=E5(t,s),l=tS(d=>{const{target:u}=d,h=e(d);if(typeof h!="function"||!u)return;const m=tS(g=>{h(g),u.removeEventListener("pointerleave",m)});u.addEventListener("pointerleave",m,i)});return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const A5=(t,e)=>e?t===e?!0:A5(t,e.parentElement):!1,wb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,aV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oV(t){return aV.has(t.tagName)||t.tabIndex!==-1}const Vu=new WeakSet;function sS(t){return e=>{e.key==="Enter"&&t(e)}}function Uy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const lV=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=sS(()=>{if(Vu.has(s))return;Uy(s,"down");const i=sS(()=>{Uy(s,"up")}),a=()=>Uy(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function nS(t){return wb(t)&&!C5()}function cV(t,e,s={}){const[r,i,a]=E5(t,s),l=d=>{const u=d.currentTarget;if(!nS(d)||Vu.has(u))return;Vu.add(u);const h=e(d),m=(b,N)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),!(!nS(b)||!Vu.has(u))&&(Vu.delete(u),typeof h=="function"&&h(b,{success:N}))},g=b=>{m(b,s.useGlobalTarget||A5(u,b.target))},v=b=>{m(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(d=>{!oV(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(s.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d.addEventListener("focus",h=>lV(h,i),i)}),a}function dV(t){return t==="x"||t==="y"?Si[t]?null:(Si[t]=!0,()=>{Si[t]=!1}):Si.x||Si.y?null:(Si.x=Si.y=!0,()=>{Si.x=Si.y=!1})}const I5=new Set(["width","height","top","left","right","bottom",...Fd]);let uf;function uV(){uf=void 0}const na={now:()=>(uf===void 0&&na.set(_n.isProcessing||oO.useManualTiming?_n.timestamp:performance.now()),uf),set:t=>{uf=t,queueMicrotask(uV)}};function jb(t,e){t.indexOf(e)===-1&&t.push(e)}function Ug(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Sb{constructor(){this.subscriptions=[]}add(e){return jb(this.subscriptions,e),()=>Ug(this.subscriptions,e)}notify(e,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function P5(t,e){return e?t*(1e3/e):0}const rS=30,hV=t=>!isNaN(parseFloat(t)),Ju={current:void 0};class mV{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=na.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=na.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Sb);const r=this.events[e].add(s);return e==="change"?()=>{r(),ys.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ju.current&&Ju.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rS)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,rS);return P5(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sd(t,e){return new mV(t,e)}function pV(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Sd(s))}function fV(t,e){const s=Og(t,e);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const l in a){const d=TO(a[l]);pV(t,l,d)}}function gV(t){return!!(pn(t)&&t.add)}function g0(t,e){const s=t.getValue("willChange");if(gV(s))return s.add(e)}function R5(t){return t.props[l5]}const L5=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,xV=1e-7,yV=12;function vV(t,e,s,r,i){let a,l,d=0;do l=e+(s-e)/2,a=L5(l,r,i)-t,a>0?s=l:e=l;while(Math.abs(a)>xV&&++d<yV);return l}function Xh(t,e,s,r){if(t===e&&s===r)return $r;const i=a=>vV(a,0,1,t,s);return a=>a===0||a===1?a:L5(i(a),e,r)}const D5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,M5=t=>e=>1-t(1-e),F5=Xh(.33,1.53,.69,.99),Nb=M5(F5),B5=D5(Nb),$5=t=>(t*=2)<1?.5*Nb(t):.5*(2-Math.pow(2,-10*(t-1))),kb=t=>1-Math.sin(Math.acos(t)),O5=M5(kb),V5=D5(kb),U5=t=>/^0[^.\s]+$/u.test(t);function bV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||U5(t):!0}const Zu=t=>Math.round(t*1e5)/1e5,Cb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _V(t){return t==null}const wV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tb=(t,e)=>s=>!!(typeof s=="string"&&wV.test(s)&&s.startsWith(t)||e&&!_V(s)&&Object.prototype.hasOwnProperty.call(s,e)),z5=(t,e,s)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(Cb);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},jV=t=>qa(0,255,t),zy={...Bd,transform:t=>Math.round(jV(t))},Fl={test:Tb("rgb","red"),parse:z5("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+zy.transform(t)+", "+zy.transform(e)+", "+zy.transform(s)+", "+Zu(Sh.transform(r))+")"};function SV(t){let e="",s="",r="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x0={test:Tb("#"),parse:SV,transform:Fl.transform},Zc={test:Tb("hsl","hue"),parse:z5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+sa.transform(Zu(e))+", "+sa.transform(Zu(s))+", "+Zu(Sh.transform(r))+")"},$n={test:t=>Fl.test(t)||x0.test(t)||Zc.test(t),parse:t=>Fl.test(t)?Fl.parse(t):Zc.test(t)?Zc.parse(t):x0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fl.transform(t):Zc.transform(t)},NV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kV(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cb))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(NV))===null||s===void 0?void 0:s.length)||0)>0}const H5="number",G5="color",CV="var",TV="var(",iS="${}",EV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nh(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(EV,u=>($n.test(u)?(r.color.push(a),i.push(G5),s.push($n.parse(u))):u.startsWith(TV)?(r.var.push(a),i.push(CV),s.push(u)):(r.number.push(a),i.push(H5),s.push(parseFloat(u))),++a,iS)).split(iS);return{values:s,split:d,indexes:r,types:i}}function W5(t){return Nh(t).values}function q5(t){const{split:e,types:s}=Nh(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=s[l];d===H5?a+=Zu(i[l]):d===G5?a+=$n.transform(i[l]):a+=i[l]}return a}}const AV=t=>typeof t=="number"?0:t;function IV(t){const e=W5(t);return q5(t)(e.map(AV))}const Go={test:kV,parse:W5,createTransformer:q5,getAnimatableNone:IV},PV=new Set(["brightness","contrast","saturate","opacity"]);function RV(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(Cb)||[];if(!r)return t;const i=s.replace(r,"");let a=PV.has(e)?1:0;return r!==s&&(a*=100),e+"("+a+i+")"}const LV=/\b([a-z-]*)\(.*?\)/gu,y0={...Go,getAnimatableNone:t=>{const e=t.match(LV);return e?e.map(RV).join(" "):t}},DV={...mb,color:$n,backgroundColor:$n,outlineColor:$n,fill:$n,stroke:$n,borderColor:$n,borderTopColor:$n,borderRightColor:$n,borderBottomColor:$n,borderLeftColor:$n,filter:y0,WebkitFilter:y0},Eb=t=>DV[t];function K5(t,e){let s=Eb(t);return s!==y0&&(s=Go),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const MV=new Set(["auto","none","0"]);function FV(t,e,s){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!MV.has(a)&&Nh(a).values.length&&(i=t[r]),r++}if(i&&s)for(const a of e)t[a]=K5(s,i)}const aS=t=>t===Bd||t===dt,oS=(t,e)=>parseFloat(t.split(", ")[e]),lS=(t,e)=>(s,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return oS(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?oS(a[1],t):0}},BV=new Set(["x","y","z"]),$V=Fd.filter(t=>!BV.has(t));function OV(t){const e=[];return $V.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const Nd={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:lS(4,13),y:lS(5,14)};Nd.translateX=Nd.x;Nd.translateY=Nd.y;const Ol=new Set;let v0=!1,b0=!1;function Q5(){if(b0){const t=Array.from(Ol).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const i=OV(r);i.length&&(s.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))===null||d===void 0||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}b0=!1,v0=!1,Ol.forEach(t=>t.complete()),Ol.clear()}function X5(){Ol.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(b0=!0)})}function VV(){X5(),Q5()}class Ab{constructor(e,s,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ol.add(this),v0||(v0=!0,ys.read(X5),ys.resolveKeyframes(Q5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&s){const u=r.readValue(s,d);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ol.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ol.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Y5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),UV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zV(t){const e=UV.exec(t);if(!e)return[,];const[,s,r,i]=e;return[`--${s!=null?s:r}`,i]}function J5(t,e,s=1){const[r,i]=zV(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return Y5(l)?parseFloat(l):l}return hb(i)?J5(i,e,s+1):i}const Z5=t=>e=>e.test(t),HV={test:t=>t==="auto",parse:t=>t},eE=[Bd,dt,sa,ko,LO,RO,HV],cS=t=>eE.find(Z5(t));class tE extends Ab{constructor(e,s,r,i,a){super(e,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),hb(h))){const m=J5(h,s.current);m!==void 0&&(e[u]=m),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!I5.has(r)||e.length!==2)return;const[i,a]=e,l=cS(i),d=cS(a);if(l!==d)if(aS(l)&&aS(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let i=0;i<e.length;i++)bV(e[i])&&r.push(i);r.length&&FV(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:r,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,d=i[l];i[l]=Nd[r](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{s.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const dS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Go.test(t)||t==="0")&&!t.startsWith("url("));function GV(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function WV(t,e,s,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=dS(i,e),d=dS(a,e);return!l||!d?!1:GV(t)||(s==="spring"||Vg(s))&&r}const qV=t=>t!==null;function zg(t,{repeat:e,repeatType:s="loop"},r){const i=t.filter(qV),a=e&&s!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const KV=40;class sE{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=na.now(),this.options={autoplay:e,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>KV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&VV(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=na.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:u,isGenerator:h}=this.options;if(!h&&!WV(e,r,i,a))if(l)this.options.duration=0;else{u&&u(zg(e,this.options,s)),d&&d(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,s);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...m},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ks=(t,e,s)=>t+(e-t)*s;function Hy(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function QV({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let i=0,a=0,l=0;if(!e)i=a=l=s;else{const d=s<.5?s*(1+e):s+e-s*e,u=2*s-d;i=Hy(u,d,t+1/3),a=Hy(u,d,t),l=Hy(u,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Uf(t,e){return s=>s>0?e:t}const Gy=(t,e,s)=>{const r=t*t,i=s*(e*e-r)+r;return i<0?0:Math.sqrt(i)},XV=[x0,Fl,Zc],YV=t=>XV.find(e=>e.test(t));function uS(t){const e=YV(t);if(!e)return!1;let s=e.parse(t);return e===Zc&&(s=QV(s)),s}const hS=(t,e)=>{const s=uS(t),r=uS(e);if(!s||!r)return Uf(t,e);const i={...s};return a=>(i.red=Gy(s.red,r.red,a),i.green=Gy(s.green,r.green,a),i.blue=Gy(s.blue,r.blue,a),i.alpha=ks(s.alpha,r.alpha,a),Fl.transform(i))},JV=(t,e)=>s=>e(t(s)),Yh=(...t)=>t.reduce(JV),_0=new Set(["none","hidden"]);function ZV(t,e){return _0.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function eU(t,e){return s=>ks(t,e,s)}function Ib(t){return typeof t=="number"?eU:typeof t=="string"?hb(t)?Uf:$n.test(t)?hS:nU:Array.isArray(t)?nE:typeof t=="object"?$n.test(t)?hS:tU:Uf}function nE(t,e){const s=[...t],r=s.length,i=t.map((a,l)=>Ib(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)s[l]=i[l](a);return s}}function tU(t,e){const s={...t,...e},r={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Ib(t[i])(t[i],e[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function sU(t,e){var s;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],d=t.indexes[l][i[l]],u=(s=t.values[d])!==null&&s!==void 0?s:0;r[a]=u,i[l]++}return r}const nU=(t,e)=>{const s=Go.createTransformer(e),r=Nh(t),i=Nh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_0.has(t)&&!i.values.length||_0.has(e)&&!r.values.length?ZV(t,e):Yh(nE(sU(r,i),i.values),s):Uf(t,e)};function rE(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?ks(t,e,s):Ib(t)(t,e)}const rU=5;function iE(t,e,s){const r=Math.max(e-rU,0);return P5(s-t(r),e-r)}const Bs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wy=.001;function iU({duration:t=Bs.duration,bounce:e=Bs.bounce,velocity:s=Bs.velocity,mass:r=Bs.mass}){let i,a,l=1-e;l=qa(Bs.minDamping,Bs.maxDamping,l),t=qa(Bs.minDuration,Bs.maxDuration,ta(t)),l<1?(i=h=>{const m=h*l,g=m*t,v=m-s,b=w0(h,l),N=Math.exp(-g);return Wy-v/b*N},a=h=>{const g=h*l*t,v=g*s+s,b=Math.pow(l,2)*Math.pow(h,2)*t,N=Math.exp(-g),S=w0(Math.pow(h,2),l);return(-i(h)+Wy>0?-1:1)*((v-b)*N)/S}):(i=h=>{const m=Math.exp(-h*t),g=(h-s)*t+1;return-Wy+m*g},a=h=>{const m=Math.exp(-h*t),g=(s-h)*(t*t);return m*g});const d=5/t,u=oU(i,a,d);if(t=ea(t),isNaN(u))return{stiffness:Bs.stiffness,damping:Bs.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const aU=12;function oU(t,e,s){let r=s;for(let i=1;i<aU;i++)r=r-t(r)/e(r);return r}function w0(t,e){return t*Math.sqrt(1-e*e)}const lU=["duration","bounce"],cU=["stiffness","damping","mass"];function mS(t,e){return e.some(s=>t[s]!==void 0)}function dU(t){let e={velocity:Bs.velocity,stiffness:Bs.stiffness,damping:Bs.damping,mass:Bs.mass,isResolvedFromDuration:!1,...t};if(!mS(t,cU)&&mS(t,lU))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*qa(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Bs.mass,stiffness:i,damping:a}}else{const s=iU(t);e={...e,...s,mass:Bs.mass},e.isResolvedFromDuration=!0}return e}function Pb(t=Bs.visualDuration,e=Bs.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],d={done:!1,value:a},{stiffness:u,damping:h,mass:m,duration:g,velocity:v,isResolvedFromDuration:b}=dU({...s,velocity:-ta(s.velocity||0)}),N=v||0,S=h/(2*Math.sqrt(u*m)),C=l-a,R=ta(Math.sqrt(u/m)),M=Math.abs(C)<5;r||(r=M?Bs.restSpeed.granular:Bs.restSpeed.default),i||(i=M?Bs.restDelta.granular:Bs.restDelta.default);let T;if(S<1){const w=w0(R,S);T=D=>{const k=Math.exp(-S*R*D);return l-k*((N+S*R*C)/w*Math.sin(w*D)+C*Math.cos(w*D))}}else if(S===1)T=w=>l-Math.exp(-R*w)*(C+(N+R*C)*w);else{const w=R*Math.sqrt(S*S-1);T=D=>{const k=Math.exp(-S*R*D),_=Math.min(w*D,300);return l-k*((N+S*R*C)*Math.sinh(_)+w*C*Math.cosh(_))/w}}const y={calculatedDuration:b&&g||null,next:w=>{const D=T(w);if(b)d.done=w>=g;else{let k=0;S<1&&(k=w===0?ea(N):iE(T,w,D));const _=Math.abs(k)<=r,A=Math.abs(l-D)<=i;d.done=_&&A}return d.value=d.done?l:D,d},toString:()=>{const w=Math.min(bb(y),Of),D=S5(k=>y.next(w*k).value,w,30);return w+"ms "+D}};return y}function pS({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},b=_=>d!==void 0&&_<d||u!==void 0&&_>u,N=_=>d===void 0?u:u===void 0||Math.abs(d-_)<Math.abs(u-_)?d:u;let S=s*e;const C=g+S,R=l===void 0?C:l(C);R!==C&&(S=R-g);const M=_=>-S*Math.exp(-_/r),T=_=>R+M(_),y=_=>{const A=M(_),F=T(_);v.done=Math.abs(A)<=h,v.value=v.done?R:F};let w,D;const k=_=>{b(v.value)&&(w=_,D=Pb({keyframes:[v.value,N(v.value)],velocity:iE(T,_,v.value),damping:i,stiffness:a,restDelta:h,restSpeed:m}))};return k(0),{calculatedDuration:null,next:_=>{let A=!1;return!D&&w===void 0&&(A=!0,y(_),k(_)),w!==void 0&&_>=w?D.next(_-w):(!A&&y(_),v)}}}const uU=Xh(.42,0,1,1),hU=Xh(0,0,.58,1),aE=Xh(.42,0,.58,1),oE=t=>Array.isArray(t)&&typeof t[0]!="number",mU={linear:$r,easeIn:uU,easeInOut:aE,easeOut:hU,circIn:kb,circInOut:V5,circOut:O5,backIn:Nb,backInOut:B5,backOut:F5,anticipate:$5},fS=t=>{if(_b(t)){n5(t.length===4);const[e,s,r,i]=t;return Xh(e,s,r,i)}else if(typeof t=="string")return mU[t];return t};function pU(t,e,s){const r=[],i=s||rE,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||$r:e;d=Yh(u,d)}r.push(d)}return r}function lE(t,e,{clamp:s=!0,ease:r,mixer:i}={}){const a=t.length;if(n5(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=pU(e,r,i),u=d.length,h=m=>{if(l&&m<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const v=Ql(t[g],t[g+1],m);return d[g](v)};return s?m=>h(qa(t[0],t[a-1],m)):h}function cE(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const i=Ql(0,e,r);t.push(ks(s,1,i))}}function dE(t){const e=[0];return cE(e,t.length-1),e}function fU(t,e){return t.map(s=>s*e)}function gU(t,e){return t.map(()=>e||aE).splice(0,t.length-1)}function zf({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const i=oE(r)?r.map(fS):fS(r),a={done:!1,value:e[0]},l=fU(s&&s.length===e.length?s:dE(e),t),d=lE(l,e,{ease:Array.isArray(i)?i:gU(e,i)});return{calculatedDuration:t,next:u=>(a.value=d(u),a.done=u>=t,a)}}const xU=t=>{const e=({timestamp:s})=>t(s);return{start:()=>ys.update(e,!0),stop:()=>Wa(e),now:()=>_n.isProcessing?_n.timestamp:na.now()}},yU={decay:pS,inertia:pS,tween:zf,keyframes:zf,spring:Pb},vU=t=>t/100;class Rb extends sE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:s,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||Ab,d=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new l(a,d,s,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=Vg(s)?s:yU[s]||zf;let u,h;d!==zf&&typeof e[0]!="number"&&(u=Yh(vU,rE(e[0],e[1])),e=[0,100]);const m=d({...this.options,keyframes:e});a==="mirror"&&(h=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=bb(m));const{calculatedDuration:g}=m,v=g+i,b=v*(r+1)-i;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:v,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:r}=this;if(!r){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:u,calculatedDuration:h,totalDuration:m,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:v,repeat:b,repeatType:N,repeatDelay:S,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-v*(this.speed>=0?1:-1),M=this.speed>=0?R<0:R>m;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let T=this.currentTime,y=a;if(b){const _=Math.min(this.currentTime,m)/g;let A=Math.floor(_),F=_%1;!F&&_>=1&&(F=1),F===1&&A--,A=Math.min(A,b+1),!!(A%2)&&(N==="reverse"?(F=1-F,S&&(F-=S/g)):N==="mirror"&&(y=l)),T=qa(0,1,F)*g}const w=M?{done:!1,value:u[0]}:y.next(T);d&&(w.value=d(w.value));let{done:D}=w;!M&&h!==null&&(D=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return k&&i!==void 0&&(w.value=zg(u,this.options,i)),C&&C(w.value),k&&this.finish(),w}get duration(){const{resolved:e}=this;return e?ta(e.calculatedDuration):0}get time(){return ta(this.currentTime)}set time(e){e=ea(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=ta(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=xU,onPlay:s,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r!=null?r:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const bU=new Set(["opacity","clipPath","filter","transform"]);function _U(t,e,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:u}={}){const h={[e]:s};u&&(h.offset=u);const m=k5(d,i);return Array.isArray(m)&&(h.easing=m),t.animate(h,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const wU=ib(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Hf=10,jU=2e4;function SU(t){return Vg(t.type)||t.type==="spring"||!N5(t.ease)}function NU(t,e){const s=new Rb({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<jU;)r=s.sample(a),i.push(r.value),a+=Hf;return{times:void 0,keyframes:i,duration:a-Hf,ease:"linear"}}const uE={anticipate:$5,backInOut:B5,circInOut:V5};function kU(t){return t in uE}class gS extends sE{constructor(e){super(e);const{name:s,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new tE(a,(l,d)=>this.onKeyframesResolved(l,d),s,r,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:u,startTime:h}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&Vf()&&kU(a)&&(a=uE[a]),SU(this.options)){const{onComplete:g,onUpdate:v,motionValue:b,element:N,...S}=this.options,C=NU(e,S);e=C.keyframes,e.length===1&&(e[1]=e[0]),r=C.duration,i=C.times,a=C.ease,l="keyframes"}const m=_U(d.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return m.startTime=h!=null?h:this.calcStartTime(),this.pendingTimeline?(eS(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;d.set(zg(e,this.options,s)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return ta(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return ta(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.currentTime=ea(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return $r;const{animation:r}=s;eS(r,e)}return $r}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:g,element:v,...b}=this.options,N=new Rb({...b,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),S=ea(this.time);h.setWithVelocity(N.sample(S-Hf).value,N.sample(S).value,Hf)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=s.owner.getProps();return wU()&&r&&bU.has(r)&&!u&&!h&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const CU={type:"spring",stiffness:500,damping:25,restSpeed:10},TU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),EU={type:"keyframes",duration:.8},AU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IU=(t,{keyframes:e})=>e.length>2?EU:sc.has(t)?t.startsWith("scale")?TU(e[1]):CU:AU;function PU({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:u,elapsed:h,...m}){return!!Object.keys(m).length}const Lb=(t,e,s,r={},i,a)=>l=>{const d=vb(r,t)||{},u=d.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ea(u);let m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};PU(d)||(m={...m,...IU(t,m)}),m.duration&&(m.duration=ea(m.duration)),m.repeatDelay&&(m.repeatDelay=ea(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),g&&!a&&e.get()!==void 0){const v=zg(m.keyframes,d);if(v!==void 0)return ys.update(()=>{m.onUpdate(v),m.onComplete()}),new j5([])}return!a&&gS.supports(m)?new gS(m):new Rb(m)};function RU({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function Db(t,e,{delay:s=0,transitionOverride:r,type:i}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:d,...u}=e;r&&(l=r);const h=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const v=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),b=u[g];if(b===void 0||m&&RU(m,g))continue;const N={delay:s,...vb(l||{},g)};let S=!1;if(window.MotionHandoffAnimation){const R=R5(t);if(R){const M=window.MotionHandoffAnimation(R,g,ys);M!==null&&(N.startTime=M,S=!0)}}g0(t,g),v.start(Lb(g,v,b,t.shouldReduceMotion&&I5.has(g)?{type:!1}:N,t,S));const C=v.animation;C&&h.push(C)}return d&&Promise.all(h).then(()=>{ys.update(()=>{d&&fV(t,d)})}),h}function j0(t,e,s={}){var r;const i=Og(t,e,s.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const l=i?()=>Promise.all(Db(t,i,s)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:v}=a;return LU(t,e,m+h,g,v,s)}:()=>Promise.resolve(),{when:u}=a;if(u){const[h,m]=u==="beforeChildren"?[l,d]:[d,l];return h().then(()=>m())}else return Promise.all([l(),d(s.delay)])}function LU(t,e,s=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,u=i===1?(h=0)=>h*r:(h=0)=>d-h*r;return Array.from(t.variantChildren).sort(DU).forEach((h,m)=>{h.notify("AnimationStart",e),l.push(j0(h,e,{...a,delay:s+u(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function DU(t,e){return t.sortNodePosition(e)}function MU(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>j0(t,a,s));r=Promise.all(i)}else if(typeof e=="string")r=j0(t,e,s);else{const i=typeof e=="function"?Og(t,e,s.custom):e;r=Promise.all(Db(t,i,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const FU=ob.length;function hE(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?hE(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<FU;s++){const r=ob[s],i=t.props[r];(jh(i)||i===!1)&&(e[r]=i)}return e}const BU=[...ab].reverse(),$U=ab.length;function OU(t){return e=>Promise.all(e.map(({animation:s,options:r})=>MU(t,s,r)))}function VU(t){let e=OU(t),s=xS(),r=!0;const i=u=>(h,m)=>{var g;const v=Og(t,m,u==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(v){const{transition:b,transitionEnd:N,...S}=v;h={...h,...S,...N}}return h};function a(u){e=u(t)}function l(u){const{props:h}=t,m=hE(t.parent)||{},g=[],v=new Set;let b={},N=1/0;for(let C=0;C<$U;C++){const R=BU[C],M=s[R],T=h[R]!==void 0?h[R]:m[R],y=jh(T),w=R===u?M.isActive:null;w===!1&&(N=C);let D=T===m[R]&&T!==h[R]&&y;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),M.protectedKeys={...b},!M.isActive&&w===null||!T&&!M.prevProp||Bg(T)||typeof T=="boolean")continue;const k=UU(M.prevProp,T);let _=k||R===u&&M.isActive&&!D&&y||C>N&&y,A=!1;const F=Array.isArray(T)?T:[T];let P=F.reduce(i(R),{});w===!1&&(P={});const{prevResolvedValues:B={}}=M,$={...B,...P},W=K=>{_=!0,v.has(K)&&(A=!0,v.delete(K)),M.needsAnimating[K]=!0;const G=t.getValue(K);G&&(G.liveStyle=!1)};for(const K in $){const G=P[K],te=B[K];if(b.hasOwnProperty(K))continue;let ne=!1;p0(G)&&p0(te)?ne=!w5(G,te):ne=G!==te,ne?G!=null?W(K):v.add(K):G!==void 0&&v.has(K)?W(K):M.protectedKeys[K]=!0}M.prevProp=T,M.prevResolvedValues=P,M.isActive&&(b={...b,...P}),r&&t.blockInitialAnimation&&(_=!1),_&&(!(D&&k)||A)&&g.push(...F.map(K=>({animation:K,options:{type:R}})))}if(v.size){const C={};v.forEach(R=>{const M=t.getBaseTarget(R),T=t.getValue(R);T&&(T.liveStyle=!0),C[R]=M!=null?M:null}),g.push({animation:C})}let S=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(g):Promise.resolve()}function d(u,h){var m;if(s[u].isActive===h)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(u,h)}),s[u].isActive=h;const g=l(u);for(const v in s)s[v].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>s,reset:()=>{s=xS(),r=!0}}}function UU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!w5(e,t):!1}function vl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xS(){return{animate:vl(!0),whileInView:vl(),whileHover:vl(),whileTap:vl(),whileDrag:vl(),whileFocus:vl(),exit:vl()}}class Qo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zU extends Qo{constructor(e){super(e),e.animationState||(e.animationState=VU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let HU=0;class GU extends Qo{constructor(){super(...arguments),this.id=HU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const WU={animation:{Feature:zU},exit:{Feature:GU}};function kh(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Jh(t){return{point:{x:t.pageX,y:t.pageY}}}const qU=t=>e=>wb(e)&&t(e,Jh(e));function eh(t,e,s,r){return kh(t,e,qU(s),r)}const yS=(t,e)=>Math.abs(t-e);function KU(t,e){const s=yS(t.x,e.x),r=yS(t.y,e.y);return Math.sqrt(s**2+r**2)}class mE{constructor(e,s,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Ky(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=KU(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:N}=g,{timestamp:S}=_n;this.history.push({...N,timestamp:S});const{onStart:C,onMove:R}=this.handlers;v||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=qy(v,this.transformPagePoint),ys.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:N,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Ky(g.type==="pointercancel"?this.lastMoveEventInfo:qy(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,C),N&&N(g,C)},!wb(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.contextWindow=i||window;const l=Jh(e),d=qy(l,this.transformPagePoint),{point:u}=d,{timestamp:h}=_n;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=s;m&&m(e,Ky(d,this.history)),this.removeListeners=Yh(eh(this.contextWindow,"pointermove",this.handlePointerMove),eh(this.contextWindow,"pointerup",this.handlePointerUp),eh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wa(this.updatePoint)}}function qy(t,e){return e?{point:e(t.point)}:t}function vS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ky({point:t},e){return{point:t,delta:vS(t,pE(e)),offset:vS(t,QU(e)),velocity:XU(e,.1)}}function QU(t){return t[0]}function pE(t){return t[t.length-1]}function XU(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const i=pE(t);for(;s>=0&&(r=t[s],!(i.timestamp-r.timestamp>ea(e)));)s--;if(!r)return{x:0,y:0};const a=ta(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const fE=1e-4,YU=1-fE,JU=1+fE,gE=.01,ZU=0-gE,ez=0+gE;function Vr(t){return t.max-t.min}function tz(t,e,s){return Math.abs(t-e)<=s}function bS(t,e,s,r=.5){t.origin=r,t.originPoint=ks(e.min,e.max,t.origin),t.scale=Vr(s)/Vr(e),t.translate=ks(s.min,s.max,t.origin)-t.originPoint,(t.scale>=YU&&t.scale<=JU||isNaN(t.scale))&&(t.scale=1),(t.translate>=ZU&&t.translate<=ez||isNaN(t.translate))&&(t.translate=0)}function th(t,e,s,r){bS(t.x,e.x,s.x,r?r.originX:void 0),bS(t.y,e.y,s.y,r?r.originY:void 0)}function _S(t,e,s){t.min=s.min+e.min,t.max=t.min+Vr(e)}function sz(t,e,s){_S(t.x,e.x,s.x),_S(t.y,e.y,s.y)}function wS(t,e,s){t.min=e.min-s.min,t.max=t.min+Vr(e)}function sh(t,e,s){wS(t.x,e.x,s.x),wS(t.y,e.y,s.y)}function nz(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?ks(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?ks(s,t,r.max):Math.min(t,s)),t}function jS(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function rz(t,{top:e,left:s,bottom:r,right:i}){return{x:jS(t.x,s,i),y:jS(t.y,e,r)}}function SS(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function iz(t,e){return{x:SS(t.x,e.x),y:SS(t.y,e.y)}}function az(t,e){let s=.5;const r=Vr(t),i=Vr(e);return i>r?s=Ql(e.min,e.max-r,t.min):r>i&&(s=Ql(t.min,t.max-i,e.min)),qa(0,1,s)}function oz(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const S0=.35;function lz(t=S0){return t===!1?t=0:t===!0&&(t=S0),{x:NS(t,"left","right"),y:NS(t,"top","bottom")}}function NS(t,e,s){return{min:kS(t,e),max:kS(t,s)}}function kS(t,e){return typeof t=="number"?t:t[e]||0}const CS=()=>({translate:0,scale:1,origin:0,originPoint:0}),ed=()=>({x:CS(),y:CS()}),TS=()=>({min:0,max:0}),Fs=()=>({x:TS(),y:TS()});function ti(t){return[t("x"),t("y")]}function xE({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function cz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dz(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Qy(t){return t===void 0||t===1}function N0({scale:t,scaleX:e,scaleY:s}){return!Qy(t)||!Qy(e)||!Qy(s)}function Il(t){return N0(t)||yE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yE(t){return ES(t.x)||ES(t.y)}function ES(t){return t&&t!=="0%"}function Gf(t,e,s){const r=t-s,i=e*r;return s+i}function AS(t,e,s,r,i){return i!==void 0&&(t=Gf(t,i,r)),Gf(t,s,r)+e}function k0(t,e=0,s=1,r,i){t.min=AS(t.min,e,s,r,i),t.max=AS(t.max,e,s,r,i)}function vE(t,{x:e,y:s}){k0(t.x,e.translate,e.scale,e.originPoint),k0(t.y,s.translate,s.scale,s.originPoint)}const IS=.999999999999,PS=1.0000000000001;function uz(t,e,s,r=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=s[d],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&sd(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,vE(t,l)),r&&Il(a.latestValues)&&sd(t,a.latestValues))}e.x<PS&&e.x>IS&&(e.x=1),e.y<PS&&e.y>IS&&(e.y=1)}function td(t,e){t.min=t.min+e,t.max=t.max+e}function RS(t,e,s,r,i=.5){const a=ks(t.min,t.max,i);k0(t,e,s,a,r)}function sd(t,e){RS(t.x,e.x,e.scaleX,e.scale,e.originX),RS(t.y,e.y,e.scaleY,e.scale,e.originY)}function bE(t,e){return xE(dz(t.getBoundingClientRect(),e))}function hz(t,e,s){const r=bE(t,s),{scroll:i}=e;return i&&(td(r.x,i.offset.x),td(r.y,i.offset.y)),r}const _E=({current:t})=>t?t.ownerDocument.defaultView:null,mz=new WeakMap;class pz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fs(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Jh(m).point)},a=(m,g)=>{const{drag:v,dragPropagation:b,onDragStart:N}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dV(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ti(C=>{let R=this.getAxisMotionValue(C).get()||0;if(sa.test(R)){const{projection:M}=this.visualElement;if(M&&M.layout){const T=M.layout.layoutBox[C];T&&(R=Vr(T)*(parseFloat(R)/100))}}this.originPoint[C]=R}),N&&ys.postRender(()=>N(m,g)),g0(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:N,onDrag:S}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:C}=g;if(b&&this.currentDirection===null){this.currentDirection=fz(C),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),S&&S(m,g)},d=(m,g)=>this.stop(m,g),u=()=>ti(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new mE(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:_E(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ys.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:i}=this.getProps();if(!r||!Ep(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=nz(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&Jc(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=rz(i.layoutBox,s):this.constraints=!1,this.elastic=lz(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ti(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=oz(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Jc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=hz(r,i.root,this.visualElement.getTransformPagePoint());let l=iz(i.layout.layoutBox,a);if(s){const d=s(cz(l));this.hasMutatedConstraints=!!d,d&&(l=xE(d))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=ti(m=>{if(!Ep(m,s,this.currentDirection))return;let g=u&&u[m]||{};l&&(g={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,N={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,N)});return Promise.all(h).then(d)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return g0(this.visualElement,e),r.start(Lb(e,r,0,s,this.visualElement,!1))}stopAnimation(){ti(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ti(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ti(s=>{const{drag:r}=this.getProps();if(!Ep(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[s];a.set(e[s]-ks(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Jc(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ti(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();i[l]=az({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ti(l=>{if(!Ep(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(ks(u,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;mz.set(this.visualElement,this);const e=this.visualElement.current,s=eh(e,"pointerdown",u=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Jc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ys.read(r);const l=kh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ti(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())}));return()=>{l(),s(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=S0,dragMomentum:d=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function Ep(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function fz(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class gz extends Qo{constructor(e){super(e),this.removeGroupControls=$r,this.removeListeners=$r,this.controls=new pz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$r}unmount(){this.removeGroupControls(),this.removeListeners()}}const LS=t=>(e,s)=>{t&&ys.postRender(()=>t(e,s))};class xz extends Qo{constructor(){super(...arguments),this.removePointerDownListener=$r}onPointerDown(e){this.session=new mE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_E(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LS(e),onStart:LS(s),onMove:r,onEnd:(a,l)=>{delete this.session,i&&ys.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=eh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ku={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const s=DS(t,e.target.x),r=DS(t,e.target.y);return`${s}% ${r}%`}},yz={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,i=Go.parse(t);if(i.length>5)return r;const a=Go.createTransformer(t),l=typeof i[0]!="number"?1:0,d=s.x.scale*e.x,u=s.y.scale*e.y;i[0+l]/=d,i[1+l]/=u;const h=ks(d,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}};class vz extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;HO(bz),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==s||s===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||ys.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wE(t){const[e,s]=aO(),r=E.useContext(t5);return n.jsx(vz,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(c5),isPresent:e,safeToRemove:s})}const bz={borderRadius:{...ku,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ku,borderTopRightRadius:ku,borderBottomLeftRadius:ku,borderBottomRightRadius:ku,boxShadow:yz};function jE(t,e,s){const r=pn(t)?t:Sd(t);return r.start(Lb("",r,e,s)),r.animation}function SE(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _z=(t,e)=>t.depth-e.depth;class wz{constructor(){this.children=[],this.isDirty=!1}add(e){jb(this.children,e),this.isDirty=!0}remove(e){Ug(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_z),this.isDirty=!1,this.children.forEach(e)}}function jz(t,e){const s=na.now(),r=({timestamp:i})=>{const a=i-s;a>=e&&(Wa(r),t(a-e))};return ys.read(r,!0),()=>Wa(r)}const NE=["TopLeft","TopRight","BottomLeft","BottomRight"],Sz=NE.length,MS=t=>typeof t=="string"?parseFloat(t):t,FS=t=>typeof t=="number"||dt.test(t);function Nz(t,e,s,r,i,a){i?(t.opacity=ks(0,s.opacity!==void 0?s.opacity:1,kz(r)),t.opacityExit=ks(e.opacity!==void 0?e.opacity:1,0,Cz(r))):a&&(t.opacity=ks(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,r));for(let l=0;l<Sz;l++){const d=`border${NE[l]}Radius`;let u=BS(e,d),h=BS(s,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||FS(u)===FS(h)?(t[d]=Math.max(ks(MS(u),MS(h),r),0),(sa.test(h)||sa.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||s.rotate)&&(t.rotate=ks(e.rotate||0,s.rotate||0,r))}function BS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kz=kE(0,.5,O5),Cz=kE(.5,.95,$r);function kE(t,e,s){return r=>r<t?0:r>e?1:s(Ql(t,e,r))}function $S(t,e){t.min=e.min,t.max=e.max}function Zr(t,e){$S(t.x,e.x),$S(t.y,e.y)}function OS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function VS(t,e,s,r,i){return t-=e,t=Gf(t,1/s,r),i!==void 0&&(t=Gf(t,1/i,r)),t}function Tz(t,e=0,s=1,r=.5,i,a=t,l=t){if(sa.test(e)&&(e=parseFloat(e),e=ks(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=ks(a.min,a.max,r);t===a&&(d-=e),t.min=VS(t.min,e,s,d,i),t.max=VS(t.max,e,s,d,i)}function US(t,e,[s,r,i],a,l){Tz(t,e[s],e[r],e[i],e.scale,a,l)}const Ez=["x","scaleX","originX"],Az=["y","scaleY","originY"];function zS(t,e,s,r){US(t.x,e,Ez,s?s.x:void 0,r?r.x:void 0),US(t.y,e,Az,s?s.y:void 0,r?r.y:void 0)}function HS(t){return t.translate===0&&t.scale===1}function CE(t){return HS(t.x)&&HS(t.y)}function GS(t,e){return t.min===e.min&&t.max===e.max}function Iz(t,e){return GS(t.x,e.x)&&GS(t.y,e.y)}function WS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function TE(t,e){return WS(t.x,e.x)&&WS(t.y,e.y)}function qS(t){return Vr(t.x)/Vr(t.y)}function KS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Pz{constructor(){this.members=[]}add(e){jb(this.members,e),e.scheduleRender()}remove(e){if(Ug(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rz(t,e,s){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(s==null?void 0:s.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:v,skewX:b,skewY:N}=s;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),N&&(r+=`skewY(${N}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const Pl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Uu=typeof window!="undefined"&&window.MotionDebug!==void 0,Xy=["","X","Y","Z"],Lz={visibility:"hidden"},QS=1e3;let Dz=0;function Yy(t,e,s,r){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function EE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=R5(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",ys,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&EE(r)}function AE({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=Dz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Uu&&(Pl.totalNodes=Pl.resolvedTargetDeltas=Pl.recalculatedProjection=0),this.nodes.forEach(Bz),this.nodes.forEach(zz),this.nodes.forEach(Hz),this.nodes.forEach($z),Uu&&window.MotionDebug.record(Pl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new wz)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Sb),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=SE(l),this.instance=l;const{layoutId:u,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(h||u)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=jz(v,250),hf.hasAnimatedSinceResize&&(hf.hasAnimatedSinceResize=!1,this.nodes.forEach(YS))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||m.getDefaultTransition()||Qz,{onLayoutAnimationStart:C,onLayoutAnimationComplete:R}=m.getProps(),M=!this.targetLayout||!TE(this.targetLayout,N)||b,T=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,T);const y={...vb(S,"layout"),onPlay:C,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else v||YS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Gz),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XS);return}this.isUpdating||this.nodes.forEach(Vz),this.isUpdating=!1,this.nodes.forEach(Uz),this.nodes.forEach(Mz),this.nodes.forEach(Fz),this.clearAllSnapshots();const d=na.now();_n.delta=qa(0,1e3/60,d-_n.timestamp),_n.timestamp=d,_n.isProcessing=!0,Vy.update.process(_n),Vy.preRender.process(_n),Vy.render.process(_n),_n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Oz),this.sharedNodes.forEach(Wz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ys.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ys.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!CE(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&(d||Il(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),Xz(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:d}=this.options;if(!d)return Fs();const u=d.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(Yz))){const{scroll:m}=this.root;m&&(td(u.x,m.offset.x),td(u.y,m.offset.y))}return u}removeElementScroll(l){var d;const u=Fs();if(Zr(u,l),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return u;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:v}=m;m!==this.root&&g&&v.layoutScroll&&(g.wasRoot&&Zr(u,l),td(u.x,g.offset.x),td(u.y,g.offset.y))}return u}applyTransform(l,d=!1){const u=Fs();Zr(u,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!d&&m.options.layoutScroll&&m.scroll&&m!==m.root&&sd(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Il(m.latestValues)&&sd(u,m.latestValues)}return Il(this.latestValues)&&sd(u,this.latestValues),u}removeTransform(l){const d=Fs();Zr(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Il(h.latestValues))continue;N0(h.latestValues)&&h.updateSnapshot();const m=Fs(),g=h.measurePageBox();Zr(m,g),zS(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Il(this.latestValues)&&zS(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var d;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=_n.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fs(),this.relativeTargetOrigin=Fs(),sh(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Fs(),this.targetWithTransforms=Fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zr(this.target,this.layout.layoutBox),vE(this.target,this.targetDelta)):Zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fs(),this.relativeTargetOrigin=Fs(),sh(this.relativeTargetOrigin,this.target,b.target),Zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Uu&&Pl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||N0(this.parent.latestValues)||yE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const d=this.getLead(),u=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===_n.timestamp&&(h=!1),h)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Zr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;uz(this.layoutCorrected,this.treeScale,this.path,u),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Fs());const{target:N}=d;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OS(this.prevProjectionDelta.x,this.projectionDelta.x),OS(this.prevProjectionDelta.y,this.projectionDelta.y)),th(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!KS(this.projectionDelta.x,this.prevProjectionDelta.x)||!KS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N)),Uu&&Pl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ed(),this.projectionDelta=ed(),this.projectionDeltaWithTransform=ed()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},m={...this.latestValues},g=ed();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=Fs(),b=u?u.source:void 0,N=this.layout?this.layout.source:void 0,S=b!==N,C=this.getStack(),R=!C||C.members.length<=1,M=!!(S&&!R&&this.options.crossfade===!0&&!this.path.some(Kz));this.animationProgress=0;let T;this.mixTargetDelta=y=>{const w=y/1e3;JS(g.x,l.x,w),JS(g.y,l.y,w),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qz(this.relativeTarget,this.relativeTargetOrigin,v,w),T&&Iz(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Fs()),Zr(T,this.relativeTarget)),S&&(this.animationValues=m,Nz(m,h,this.latestValues,w,M,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ys.update(()=>{hf.hasAnimatedSinceResize=!0,this.currentAnimation=jE(0,QS,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:m}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&IE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Fs();const g=Vr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const v=Vr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+v}Zr(d,u),sd(d,m),th(this.projectionDeltaWithTransform,this.layoutCorrected,d,m)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Pz),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:d}=this.options;return d?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:d}=this.options;return d?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&Yy("z",l,h,this.animationValues);for(let m=0;m<Xy.length;m++)Yy(`rotate${Xy[m]}`,l,h,this.animationValues),Yy(`skew${Xy[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}getProjectionStyles(l){var d,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Lz;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=df(l==null?void 0:l.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=df(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Il(this.latestValues)&&(S.transform=m?m({},""):"none",this.hasProjected=!1),S}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=Rz(this.projectionDeltaWithTransform,this.treeScale,v),m&&(h.transform=m(v,h.transform));const{x:b,y:N}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${N.origin*100}% 0`,g.animationValues?h.opacity=g===this?(u=(d=v.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const S in $f){if(v[S]===void 0)continue;const{correct:C,applyTo:R}=$f[S],M=h.transform==="none"?v[S]:C(v[S],g);if(R){const T=R.length;for(let y=0;y<T;y++)h[R[y]]=M}else h[S]=M}return this.options.layoutId&&(h.pointerEvents=g===this?df(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(XS),this.root.sharedNodes.clear()}}}function Mz(t){t.updateLayout()}function Fz(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=s.source!==t.layout.source;a==="size"?ti(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Vr(v);v.min=r[g].min,v.max=v.min+b}):IE(a,s.layoutBox,r)&&ti(g=>{const v=l?s.measuredBox[g]:s.layoutBox[g],b=Vr(r[g]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const d=ed();th(d,r,s.layoutBox);const u=ed();l?th(u,t.applyTransform(i,!0),s.measuredBox):th(u,r,s.layoutBox);const h=!CE(d);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const N=Fs();sh(N,s.layoutBox,v.layoutBox);const S=Fs();sh(S,r,b.layoutBox),TE(N,S)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=N,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:u,layoutDelta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Bz(t){Uu&&Pl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $z(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Oz(t){t.clearSnapshot()}function XS(t){t.clearMeasurements()}function Vz(t){t.isLayoutDirty=!1}function Uz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function YS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zz(t){t.resolveTargetDelta()}function Hz(t){t.calcProjection()}function Gz(t){t.resetSkewAndRotation()}function Wz(t){t.removeLeadSnapshot()}function JS(t,e,s){t.translate=ks(e.translate,0,s),t.scale=ks(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function ZS(t,e,s,r){t.min=ks(e.min,s.min,r),t.max=ks(e.max,s.max,r)}function qz(t,e,s,r){ZS(t.x,e.x,s.x,r),ZS(t.y,e.y,s.y,r)}function Kz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Qz={duration:.45,ease:[.4,0,.1,1]},eN=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),tN=eN("applewebkit/")&&!eN("chrome/")?Math.round:$r;function sN(t){t.min=tN(t.min),t.max=tN(t.max)}function Xz(t){sN(t.x),sN(t.y)}function IE(t,e,s){return t==="position"||t==="preserve-aspect"&&!tz(qS(e),qS(s),.2)}function Yz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Jz=AE({attachResizeListener:(t,e)=>kh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jy={current:void 0},PE=AE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jy.current){const t=new Jz({});t.mount(window),t.setOptions({layoutScroll:!0}),Jy.current=t}return Jy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zz={pan:{Feature:xz},drag:{Feature:gz,ProjectionNode:PE,MeasureLayout:wE}};function nN(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&ys.postRender(()=>a(e,Jh(e)))}class eH extends Qo{mount(){const{current:e}=this.node;e&&(this.unmount=iV(e,s=>(nN(this.node,s,"Start"),r=>nN(this.node,r,"End"))))}unmount(){}}class tH extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(s){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yh(kh(this.node.current,"focus",()=>this.onFocus()),kh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rN(t,e,s){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&ys.postRender(()=>a(e,Jh(e)))}class sH extends Qo{mount(){const{current:e}=this.node;e&&(this.unmount=cV(e,s=>(rN(this.node,s,"Start"),(r,{success:i})=>rN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const C0=new WeakMap,Zy=new WeakMap,nH=t=>{const e=C0.get(t.target);e&&e(t)},rH=t=>{t.forEach(nH)};function iH({root:t,...e}){const s=t||document;Zy.has(s)||Zy.set(s,{});const r=Zy.get(s),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(rH,{root:t,...e})),r[i]}function aH(t,e,s){const r=iH(e);return C0.set(t,s),r.observe(t),()=>{C0.delete(t),r.unobserve(t)}}const oH={some:0,all:1};class lH extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:oH[i]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=h?m:g;v&&v(u)};return aH(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(cH(e,s))&&this.startObserver()}unmount(){}}function cH({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const dH={inView:{Feature:lH},tap:{Feature:sH},focus:{Feature:tH},hover:{Feature:eH}},uH={layout:{ProjectionNode:PE,MeasureLayout:wE}},Wf={current:null},Mb={current:!1};function RE(){if(Mb.current=!0,!!rb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wf.current=t.matches;t.addListener(e),e()}else Wf.current=!1}const hH=[...eE,$n,Go],mH=t=>hH.find(Z5(t)),kd=new WeakMap;function pH(t,e,s){for(const r in e){const i=e[r],a=s[r];if(pn(i))t.addValue(r,i);else if(pn(a))t.addValue(r,Sd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,Sd(l!==void 0?l:i,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const iN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LE{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ab,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=na.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ys.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:m}=l;this.onUpdate=m,this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=$g(s),this.isVariantNode=o5(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...v}=this.scrapeMotionValuesFromProps(s,{},this);for(const b in v){const N=v[b];u[b]!==void 0&&pn(N)&&N.set(u[b],!1)}}mount(e){this.current=e,kd.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Mb.current||RE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kd.delete(this.current),this.projection&&this.projection.unmount(),Wa(this.notifyUpdate),Wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=sc.has(e),i=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&ys.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jd){const s=jd[e];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<iN.length;r++){const i=iN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=pH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=Sd(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Y5(i)||U5(i))?i=parseFloat(i):!mH(i)&&Go.test(s)&&(i=K5(e,s)),this.setBaseTarget(e,pn(i)?i.get():i)),pn(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=ub(this.props,r,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!pn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Sb),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class DE extends LE{constructor(){super(...arguments),this.KeyframeResolver=tE}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function fH(t){return window.getComputedStyle(t)}class ME extends DE{constructor(){super(...arguments),this.type="html",this.renderInstance=g5}readValueFromInstance(e,s){if(sc.has(s)){const r=Eb(s);return r&&r.default||0}else{const r=fH(e),i=(m5(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return bE(e,s)}build(e,s,r){pb(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return yb(e,s,r)}}class FE extends DE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fs}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(sc.has(s)){const r=Eb(s);return r&&r.default||0}return s=x5.has(s)?s:lb(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return b5(e,s,r)}build(e,s,r){fb(e,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,s,r,i){y5(e,s,r,i)}mount(e){this.isSVGTag=xb(e.tagName),super.mount(e)}}const gH=(t,e)=>db(t)?new FE(e):new ME(e,{allowProjection:t!==E.Fragment}),xH=ZO({...WU,...dH,...Zz,...uH},gH),BE=pO(xH);function zu(t){const e=tb(()=>Sd(t)),{isStatic:s}=E.useContext(nb);if(s){const[,r]=E.useState(t);E.useEffect(()=>e.on("change",r),[])}return e}function $E(t,e){const s=zu(e()),r=()=>s.set(e());return r(),s5(()=>{const i=()=>ys.preRender(r,!1,!0),a=t.map(l=>l.on("change",i));return()=>{a.forEach(l=>l()),Wa(r)}}),s}const yH=t=>t&&typeof t=="object"&&t.mix,vH=t=>yH(t)?t.mix:void 0;function bH(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],i=t[1+s],a=t[2+s],l=t[3+s],d=lE(i,a,{mixer:vH(a[0]),...l});return e?d(r):d}function _H(t){Ju.current=[],t();const e=$E(Ju.current,t);return Ju.current=void 0,e}function Ap(t,e,s,r){if(typeof t=="function")return _H(t);const i=typeof e=="function"?e:bH(e,s,r);return Array.isArray(t)?aN(t,i):aN([t],([a])=>i(a))}function aN(t,e){const s=tb(()=>[]);return $E(t,()=>{s.length=0;const r=t.length;for(let i=0;i<r;i++)s[i]=t[i].get();return e(s)})}function OE(){!Mb.current&&RE();const[t]=E.useState(Wf.current);return t}const wH=(t,e,s)=>{const r=e-t;return((s-t)%r+r)%r+t};function VE(t,e){return oE(t)?t[wH(0,t.length,e)]:t}function Fb(t){return typeof t=="object"&&!Array.isArray(t)}function UE(t,e,s,r){return typeof t=="string"&&Fb(e)?T5(t,s,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function jH(t,e,s){return t*(e+1)}function oN(t,e,s,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?s:(i=r.get(e))!==null&&i!==void 0?i:t}function SH(t,e,s){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<s&&(Ug(t,i),r--)}}function NH(t,e,s,r,i,a){SH(t,i,a);for(let l=0;l<e.length;l++)t.push({value:e[l],at:ks(i,a,r[l]),easing:VE(s,l)})}function kH(t,e){for(let s=0;s<t.length;s++)t[s]=t[s]/(e+1)}function CH(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const TH="easeInOut";function EH(t,{defaultTransition:e={},...s}={},r,i){const a=e.duration||.3,l=new Map,d=new Map,u={},h=new Map;let m=0,g=0,v=0;for(let b=0;b<t.length;b++){const N=t[b];if(typeof N=="string"){h.set(N,g);continue}else if(!Array.isArray(N)){h.set(N.name,oN(g,N.at,m,h));continue}let[S,C,R={}]=N;R.at!==void 0&&(g=oN(g,R.at,m,h));let M=0;const T=(y,w,D,k=0,_=0)=>{const A=AH(y),{delay:F=0,times:P=dE(A),type:B="keyframes",repeat:$,repeatType:W,repeatDelay:H=0,...q}=w;let{ease:K=e.ease||"easeOut",duration:G}=w;const te=typeof F=="function"?F(k,_):F,ne=A.length,U=Vg(B)?B:i==null?void 0:i[B];if(ne<=2&&U){let fe=100;if(ne===2&&RH(A)){const _e=A[1]-A[0];fe=Math.abs(_e)}const be={...q};G!==void 0&&(be.duration=ea(G));const ye=sV(be,fe,U);K=ye.ease,G=ye.duration}G!=null||(G=a);const Z=g+te;P.length===1&&P[0]===0&&(P[1]=1);const he=P.length-A.length;if(he>0&&cE(P,he),A.length===1&&A.unshift(null),$){G=jH(G,$);const fe=[...A],be=[...P];K=Array.isArray(K)?[...K]:[K];const ye=[...K];for(let _e=0;_e<$;_e++){A.push(...fe);for(let we=0;we<fe.length;we++)P.push(be[we]+(_e+1)),K.push(we===0?"linear":VE(ye,we-1))}kH(P,$)}const ie=Z+G;NH(D,A,K,P,Z,ie),M=Math.max(te+G,M),v=Math.max(ie,v)};if(pn(S)){const y=lN(S,d);T(C,R,cN("default",y))}else{const y=UE(S,C,r,u),w=y.length;for(let D=0;D<w;D++){C=C,R=R;const k=y[D],_=lN(k,d);for(const A in C)T(C[A],IH(R,A),cN(A,_),D,w)}}m=g,g+=M}return d.forEach((b,N)=>{for(const S in b){const C=b[S];C.sort(CH);const R=[],M=[],T=[];for(let w=0;w<C.length;w++){const{at:D,value:k,easing:_}=C[w];R.push(k),M.push(Ql(0,v,D)),T.push(_||"easeOut")}M[0]!==0&&(M.unshift(0),R.unshift(R[0]),T.unshift(TH)),M[M.length-1]!==1&&(M.push(1),R.push(null)),l.has(N)||l.set(N,{keyframes:{},transition:{}});const y=l.get(N);y.keyframes[S]=R,y.transition[S]={...e,duration:v,ease:T,times:M,...s}}}),l}function lN(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function cN(t,e){return e[t]||(e[t]=[]),e[t]}function AH(t){return Array.isArray(t)?t:[t]}function IH(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const PH=t=>typeof t=="number",RH=t=>t.every(PH);function LH(t,e){return t in e}class DH extends LE{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,s){if(LH(s,e)){const r=e[s];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,s){delete s.output[e]}measureInstanceViewportBox(){return Fs()}build(e,s){Object.assign(e.output,s)}renderInstance(e,{output:s}){Object.assign(e,s)}sortInstanceNodePosition(){return 0}}function MH(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=SE(t)?new FE(e):new ME(e);s.mount(t),kd.set(t,s)}function FH(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},s=new DH(e);s.mount(t),kd.set(t,s)}function BH(t,e){return pn(t)||typeof t=="number"||typeof t=="string"&&!Fb(e)}function zE(t,e,s,r){const i=[];if(BH(t,e))i.push(jE(t,Fb(e)&&e.default||e,s&&(s.default||s)));else{const a=UE(t,e,r),l=a.length;for(let d=0;d<l;d++){const u=a[d],h=u instanceof Element?MH:FH;kd.has(u)||h(u);const m=kd.get(u),g={...s};"delay"in g&&typeof g.delay=="function"&&(g.delay=g.delay(d,l)),i.push(...Db(m,{...e,transition:g},{}))}}return i}function $H(t,e,s){const r=[];return EH(t,e,s,{spring:Pb}).forEach(({keyframes:a,transition:l},d)=>{r.push(...zE(d,a,l))}),r}function OH(t){return Array.isArray(t)&&t.some(Array.isArray)}function VH(t){function e(s,r,i){let a=[];return OH(s)?a=$H(s,r,t):a=zE(s,r,i,t),new j5(a)}return e}const Ip=VH(),La={bg:"#0C1C2E",nav:"#0A1728",tile:"#152A42",border:"#2B4C73",icon:"#5C8BC6"};function UH(){return n.jsx("div",{className:"absolute inset-0",style:{backgroundColor:"var(--hud-bg, "+La.bg+")",backgroundImage:`
          radial-gradient(ellipse at top left, rgba(255,255,255,0.045), transparent 45%),
          radial-gradient(ellipse at bottom right, rgba(255,255,255,0.03), transparent 55%),
          repeating-linear-gradient(45deg, rgba(255,255,255,0.018) 0 2px, rgba(0,0,0,0.018) 2px 4px)
        `}})}function zH(){return n.jsxs("svg",{className:"pointer-events-none absolute inset-0",width:"100%",height:"100%",children:[n.jsxs("defs",{children:[n.jsxs("radialGradient",{id:"glowTL",cx:"0",cy:"0",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:La.icon,stopOpacity:"0.42"}),n.jsx("stop",{offset:"70%",stopColor:La.icon,stopOpacity:"0"})]}),n.jsxs("radialGradient",{id:"glowBR",cx:"1",cy:"1",r:"1",children:[n.jsx("stop",{offset:"0%",stopColor:La.icon,stopOpacity:"0.20"}),n.jsx("stop",{offset:"70%",stopColor:La.icon,stopOpacity:"0"})]})]}),n.jsx("rect",{x:"-20",y:"-20",width:"42%",height:"42%",fill:"url(#glowTL)"}),n.jsx("rect",{x:"68%",y:"68%",width:"34%",height:"34%",fill:"url(#glowBR)"})]})}function dN({rounded:t="rounded-3xl",padded:e=!0,children:s}){const r=OE();return n.jsxs("section",{className:`relative w-full overflow-hidden border ${t}`,style:{borderColor:La.border,background:"var(--nav, "+La.nav+")",boxShadow:"0 10px 24px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.35)"},children:[n.jsx(UH,{}),n.jsx(BE.div,{className:"absolute inset-0 pointer-events-none",style:{mixBlendMode:"soft-light",backgroundImage:"linear-gradient(115deg,rgba(255,255,255,0.05) 0%,rgba(255,255,255,0.02) 35%,rgba(92,139,198,0.08) 50%,rgba(0,0,0,0.02) 65%,rgba(255,255,255,0.05) 100%)",backgroundSize:"200% 100%",opacity:.28},initial:{backgroundPositionX:"0%"},animate:r?{backgroundPositionX:"0%"}:{backgroundPositionX:["0%","100%","0%"]},transition:r?void 0:{duration:18,repeat:1/0,ease:"linear"}}),n.jsx(zH,{}),n.jsx("div",{className:`relative z-10 ${e?"p-4 md:p-6":""}`,children:s})]})}const ev={borderColor:"#2B4C73",background:"#1A2F4A"},Pp={borderColor:"#2B4C73",background:"#152A42"};function Pt({hex:t,title:e,subtitle:s,actions:r,subheader:i,left:a,right:l,children:d,rounded:u="rounded-3xl",padded:h=!0,centerFramed:m=!1,leftWidth:g=0,rightWidth:v=0,stickyRails:b=!0,mode:N="card",outerPadding:S="px-4 py-3",leftPlacement:C="inside",stickyTopbar:R=!0,stickySubheader:M=!0,shellViewportOffset:T="var(--app-topbar-h,72px)",topbarHeight:y=56}){const w={"--left":typeof g=="number"?`${g}px`:g,"--right":typeof v=="number"?`${v}px`:v},D=n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"mb-3 rounded-2xl border px-4 py-2",style:ev,children:t}),(e||s||r)&&n.jsxs("div",{className:[R?"sticky top-0 z-30":"","mb-3 flex items-center justify-between rounded-2xl border px-5 py-3"].join(" "),style:ev,children:[n.jsxs("div",{className:"min-w-0",children:[e&&n.jsx("div",{className:"truncate text-sm font-semibold",style:{color:"#F5F9FF"},children:e}),s&&n.jsx("div",{className:"truncate text-[11px]",style:{color:"#B0C4D9"},children:s})]}),r?n.jsx("div",{className:"flex items-center gap-2",children:r}):null]}),i&&n.jsx("div",{className:[M?"sticky z-20":"","mb-3 rounded-2xl border px-4 py-3"].join(" "),style:{...M?{top:R?`${y}px`:0}:{},...ev},children:i})]}),k=N==="card"?({children:A})=>n.jsx(dN,{rounded:u,padded:h,children:A}):({children:A})=>n.jsx("div",{className:`w-full ${S}`,children:A}),_=n.jsx("div",{className:"relative min-h-0 h-full",style:w,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)_var(--right)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Pp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),m?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4 min-w-0 h-full overflow-y-auto no-scrollbar",style:Pp,children:d}):n.jsx("main",{className:"min-w-0 h-full overflow-y-auto no-scrollbar",children:d}),l?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Pp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:l}):v?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"})]})});return C==="bleed"&&N==="card"?n.jsx("div",{className:`w-full ${S}`,children:n.jsxs("div",{className:"flex flex-col h-[calc(100vh_-_var(--app-topbar-h,72px))] min-h-0",children:[D,n.jsx("div",{className:"flex-1 min-h-0",style:w,children:n.jsxs("div",{className:"grid h-full grid-cols-1 gap-4 md:grid-cols-[var(--left)_minmax(0,1fr)]",children:[a?n.jsx("aside",{className:"rounded-2xl border p-3 md:p-4",style:{...Pp,position:b?"sticky":"static",top:b?"1rem":void 0,alignSelf:"start",height:"fit-content"},children:a}):g?n.jsx("div",{}):n.jsx("div",{className:"hidden md:block"}),n.jsx(dN,{rounded:u,padded:h,children:n.jsx("div",{className:"flex-1 min-h-0 h-full",children:_})})]})})]})}):n.jsx(k,{children:n.jsxs("div",{className:"flex flex-col min-h-0",style:{height:`calc(100vh - ${T})`},children:[D,n.jsx("div",{className:"flex-1 min-h-0",children:_})]})})}const HH="_row_x5rfq_3",GH="_colFull_x5rfq_17",WH="_colCommunity_x5rfq_31",qH="_colGuides_x5rfq_33",KH="_card_x5rfq_129",QH="_header_x5rfq_143",XH="_title_x5rfq_155",YH="_subtitle_x5rfq_157",JH="_empty_x5rfq_159",ZH="_errorNote_x5rfq_161",eG="_linkBtn_x5rfq_163",tG="_primaryBtn_x5rfq_163",sG="_navBtn_x5rfq_163",nG="_closeBtn_x5rfq_163",rG="_actionsRight_x5rfq_179",iG="_tileGrid_x5rfq_185",aG="_tile_x5rfq_185",oG="_tileIcon_x5rfq_211",lG="_tileIconFallback_x5rfq_213",cG="_tileLabel_x5rfq_215",dG="_newsList_x5rfq_221",uG="_newsItem_x5rfq_223",hG="_newsMeta_x5rfq_225",mG="_newsAuthor_x5rfq_227",pG="_newsTime_x5rfq_229",fG="_newsText_x5rfq_231",gG="_newsImage_x5rfq_233",xG="_carouselCtrls_x5rfq_241",yG="_carousel_x5rfq_241",vG="_slide_x5rfq_249",bG="_slideActive_x5rfq_251",_G="_slideInactive_x5rfq_253",wG="_slideThumb_x5rfq_255",jG="_slideFallback_x5rfq_257",SG="_slideCaption_x5rfq_259",NG="_liveCard_x5rfq_265",kG="_liveAvatar_x5rfq_267",CG="_liveAvatarFallback_x5rfq_269",TG="_liveInfo_x5rfq_271",EG="_liveName_x5rfq_273",AG="_liveMeta_x5rfq_275",IG="_liveBadge_x5rfq_277",PG="_liveViewers_x5rfq_279",RG="_modalOverlay_x5rfq_285",LG="_modal_x5rfq_285",DG="_modalHeader_x5rfq_289",MG="_modalTitle_x5rfq_291",FG="_modalFilters_x5rfq_295",BG="_formRow_x5rfq_297",$G="_formRowCheckbox_x5rfq_299",OG="_select_x5rfq_301",VG="_input_x5rfq_301",UG="_tableWrap_x5rfq_303",zG="_table_x5rfq_303",Ve={row:HH,colFull:GH,colCommunity:WH,colGuides:qH,card:KH,header:QH,title:XH,subtitle:YH,empty:JH,errorNote:ZH,linkBtn:eG,primaryBtn:tG,navBtn:sG,closeBtn:nG,actionsRight:rG,tileGrid:iG,tile:aG,tileIcon:oG,tileIconFallback:lG,tileLabel:cG,newsList:dG,newsItem:uG,newsMeta:hG,newsAuthor:mG,newsTime:pG,newsText:fG,newsImage:gG,carouselCtrls:xG,carousel:yG,slide:vG,slideActive:bG,slideInactive:_G,slideThumb:wG,slideFallback:jG,slideCaption:SG,liveCard:NG,liveAvatar:kG,liveAvatarFallback:CG,liveInfo:TG,liveName:EG,liveMeta:AG,liveBadge:IG,liveViewers:PG,modalOverlay:RG,modal:LG,modalHeader:DG,modalTitle:MG,modalFilters:FG,formRow:BG,formRowCheckbox:$G,select:OG,input:VG,tableWrap:UG,table:zG},HG=["https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=0","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=805252729","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=966577378","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1783754800","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=1322077146","https://docs.google.com/spreadsheets/d/1lbUvWgD_G96CqiZlAevApQC64XqKOVJ0Y1IUBXNCQpE/export?format=csv&gid=2086043774"];async function HE(){const t=[];for(const s of HG)try{const i=await(await fetch(s,{cache:"no-store"})).text(),a=GG(i);t.push(...a)}catch(r){}const e=new Map;for(const s of t){const r=String(s["Creator Name"]||s.creator_name||s.name||"").trim();if(!r)continue;const i=r.toLowerCase();e.has(i)||e.set(i,s)}return Array.from(e.values())}function uN(t){const e=[];let s="",r=!1;for(let i=0;i<t.length;i++){const a=t[i];a==='"'?r&&t[i+1]==='"'?(s+='"',i++):r=!r:a===","&&!r?(e.push(s),s=""):s+=a}return e.push(s),e}function GG(t){const e=t.split(/\r?\n/).filter(Boolean);if(e.length===0)return[];const s=uN(e[0]);return e.slice(1).map(r=>{const i=uN(r),a={};return s.forEach((l,d)=>{var u;return a[l.trim()]=((u=i[d])!=null?u:"").trim()}),a})}function WG(t){try{const e=Date.now(),s=typeof t=="number"?t:Date.parse(String(t!=null?t:e)),r=Math.max(0,e-s),i=Math.floor(r/1e3);if(i<60)return`${i}s`;const a=Math.floor(i/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}catch(e){return""}}function qG(t){try{const e=new URL(t);if(e.hostname.includes("youtu.be"))return e.pathname.slice(1)||null;if(e.hostname.includes("youtube.com")){if(e.searchParams.get("v"))return e.searchParams.get("v");const s=e.pathname.toLowerCase();if(s.startsWith("/shorts/"))return s.split("/")[2]||null}}catch(e){}return null}const KG=[{to:"/toplists/",label:"Toplists"},{to:"/guidehub/?tab=calculators",label:"GuideHub"},{to:"/players/",label:"Players"},{to:"/guilds/",label:"Guilds"},{to:"/community/",label:"Community"},{to:"/magazine/historybook/",label:"Historybook"},{to:"/creator-hub/",label:"Creator Hub"},{to:"/help",label:"Help"},{to:"/settings/",label:"Settings"}],hN={},QG=()=>n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.tiles",children:[n.jsxs("header",{className:Ve.header,children:[n.jsx("span",{className:Ve.title,"data-i18n":"home.title",children:"Home"}),n.jsx("span",{className:Ve.subtitle,"data-i18n":"home.subtitle",children:"Welcome back"})]}),n.jsx("div",{className:Ve.tileGrid,role:"list",children:KG.map(t=>n.jsxs(rs,{to:t.to,role:"listitem",className:Ve.tile,"aria-label":t.label,children:[hN[t.to]?n.jsx("img",{src:hN[t.to],alt:"",className:Ve.tileIcon}):n.jsx("div",{className:Ve.tileIconFallback,"aria-hidden":!0,children:t.label.slice(0,2).toUpperCase()}),n.jsx("div",{className:Ve.tileLabel,"data-i18n":`nav.${t.label.toLowerCase()}`,children:t.label})]},t.to))})]}),XG=()=>{const[t,e]=E.useState(null),[s,r]=E.useState(null);E.useEffect(()=>{async function a(){{e([]);return}}return a(),()=>{}},[]);const i=!t||t.length===0;return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.news","aria-busy":t==null,children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.news.title",children:"Community news"})}),n.jsxs("div",{className:Ve.newsList,children:[t==null?void 0:t.map(a=>{var l;return n.jsxs("article",{className:Ve.newsItem,children:[n.jsxs("div",{className:Ve.newsMeta,children:[n.jsx("span",{className:Ve.newsAuthor,children:a.author||"Discord"}),n.jsx("span",{className:Ve.newsTime,children:WG(a.timestamp)})]}),n.jsx("p",{className:Ve.newsText,children:a.text}),a.image&&n.jsx("img",{src:a.image,alt:"",className:Ve.newsImage}),a.url&&n.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",className:Ve.linkBtn,"data-i18n":"home.news.open_on_discord",children:"Auf Discord ffnen"})]},(l=a.id)!=null?l:`${a.author}-${a.timestamp}`)}),i&&n.jsx("div",{className:Ve.empty,"data-i18n":"home.news.empty",children:"No news yet"})]}),s&&n.jsx("div",{className:Ve.errorNote,"aria-live":"polite",children:s})]})},YG=()=>{const[t,e]=E.useState([]),[s,r]=E.useState(0),i=E.useRef(null);E.useEffect(()=>{let u=!0;async function h(){try{const g=(await HE()).map(v=>{const b=String(v["Creator Name"]||v.creator_name||v.name||"").trim(),N=String(v["YouTube Link"]||v.youtube||v.YouTube||"").trim();if(!N)return null;const S=qG(N),C=S?`https://i.ytimg.com/vi/${S}/hqdefault.jpg`:void 0;return{title:b,url:N,thumb:C}}).filter(Boolean).slice(0,12);u&&e(g)}catch(m){u&&e([])}}return h(),()=>{u=!1}},[]),E.useEffect(()=>{if(!(t.length<=1))return i.current=window.setInterval(()=>r(u=>(u+1)%t.length),6e3),()=>{i.current&&window.clearInterval(i.current)}},[t]);const a=()=>r(u=>(u-1+t.length)%Math.max(t.length,1)),l=()=>r(u=>(u+1)%Math.max(t.length,1)),d=u=>{u.key==="ArrowLeft"&&(u.preventDefault(),a()),u.key==="ArrowRight"&&(u.preventDefault(),l())};return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.youtube",children:[n.jsxs("header",{className:Ve.header,children:[n.jsx("span",{className:Ve.title,"data-i18n":"home.youtube.title",children:"YouTube"}),n.jsxs("div",{className:Ve.carouselCtrls,children:[n.jsx("button",{className:Ve.navBtn,onClick:a,"aria-label":"Prev",children:""}),n.jsx("button",{className:Ve.navBtn,onClick:l,"aria-label":"Next",children:""})]})]}),n.jsx("div",{className:Ve.carousel,tabIndex:0,onKeyDown:d,"aria-roledescription":"carousel",children:t.length===0?n.jsx("div",{className:Ve.empty,children:"No videos"}):t.map((u,h)=>n.jsxs("a",{href:u.url,target:"_blank",rel:"noreferrer",className:[Ve.slide,h===s?Ve.slideActive:Ve.slideInactive].join(" "),children:[u.thumb?n.jsx("img",{src:u.thumb,alt:"",className:Ve.slideThumb}):n.jsx("div",{className:Ve.slideFallback,children:u.title.slice(0,2).toUpperCase()}),n.jsx("div",{className:Ve.slideCaption,children:u.title})]},u.url))})]})},JG=({onOpenSchedule:t})=>{var m;const[e,s]=E.useState(null),[r,i]=E.useState(new Map),[a,l]=E.useState(0),d=E.useRef(null);if(E.useEffect(()=>{async function g(){{s([]);return}}return g(),()=>{}},[]),E.useEffect(()=>{let g=!0;async function v(){try{const b=await HE(),N=new Map;for(const S of b){const C=String(S["Creator Name"]||S.creator_name||S.name||"").trim(),R=String(S["Twitch Link"]||S.twitch||S.Twitch||"").trim();if(!C||!R)continue;const M=(()=>{try{return new URL(R).pathname.replace(/^\//,"").toLowerCase()}catch(T){return R.toLowerCase()}})();M&&N.set(M,R),N.set(C.toLowerCase(),R)}g&&i(N)}catch(b){g&&i(new Map)}}return v(),()=>{g=!1}},[]),E.useEffect(()=>{if(!(!e||e.length<=1))return d.current=window.setInterval(()=>l(g=>(g+1)%e.length),8e3),()=>{d.current&&window.clearInterval(d.current)}},[e]),!e||e.length===0)return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsx("div",{className:Ve.empty,"data-i18n":"home.live.none",children:"Nobody is live right now."}),n.jsx("div",{className:Ve.actionsRight,children:n.jsx("button",{className:Ve.primaryBtn,onClick:t,"data-i18n":"home.schedule.open",children:"Streaming-Plan anzeigen"})})]});const u=e[a],h=(()=>{const g=((u==null?void 0:u.name)||"").toLowerCase();if(u!=null&&u.url)return u.url;if(g)return r.has(g)?r.get(g):r.has(g.replace(/^@/,""))?r.get(g.replace(/^@/,"")):`https://www.twitch.tv/${g}`})();return n.jsxs("section",{className:Ve.card,"data-i18n-scope":"home.live",children:[n.jsx("header",{className:Ve.header,children:n.jsx("span",{className:Ve.title,"data-i18n":"home.live.title",children:"Live now"})}),n.jsxs("div",{className:Ve.liveCard,children:[u!=null&&u.avatar?n.jsx("img",{src:u.avatar,alt:"",className:Ve.liveAvatar}):n.jsx("div",{className:Ve.liveAvatarFallback,"aria-hidden":!0,children:(m=u==null?void 0:u.name)==null?void 0:m.slice(0,2).toUpperCase()}),n.jsxs("div",{className:Ve.liveInfo,children:[n.jsx("div",{className:Ve.liveName,children:u==null?void 0:u.name}),n.jsxs("div",{className:Ve.liveMeta,children:[n.jsx("span",{className:Ve.liveBadge,children:"LIVE"}),typeof(u==null?void 0:u.viewers)=="number"&&n.jsxs("span",{className:Ve.liveViewers,children:[u.viewers.toLocaleString()," viewers"]})]})]}),h&&n.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:Ve.primaryBtn,"data-i18n":"home.live.open_on_twitch",children:"Auf Twitch ffnen"})]}),n.jsxs("div",{className:Ve.carouselCtrls,children:[n.jsx("button",{className:Ve.navBtn,onClick:()=>l(g=>(g-1+e.length)%e.length),"aria-label":"Prev",children:""}),n.jsx("button",{className:Ve.navBtn,onClick:()=>l(g=>(g+1)%e.length),"aria-label":"Next",children:""})]})]})},ZG=({open:t,onClose:e})=>{var b;const[s,r]=E.useState(null),[i,a]=E.useState("All"),[l,d]=E.useState(""),[u,h]=E.useState(!1);if(E.useEffect(()=>{if(!t)return;async function N(){{r([]);return}}return N(),()=>{}},[t]),E.useEffect(()=>{const N=S=>{S.key==="Escape"&&e()};return t&&window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,e]),!t)return null;const m=new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(new Date),g=(s||[]).filter(N=>{if(i!=="All"&&N.platform.toLowerCase()!==i.toLowerCase()||u&&N.weekday&&N.weekday.toLowerCase()!==m.toLowerCase())return!1;if(l){const S=l.toLowerCase();if(!`${N.streamer} ${N.title}`.toLowerCase().includes(S))return!1}return!0}),v=((b=s==null?void 0:s.length)!=null?b:0)===0;return n.jsx("div",{className:Ve.modalOverlay,role:"dialog","aria-modal":"true","aria-labelledby":"schedule-title",children:n.jsxs("div",{className:Ve.modal,children:[n.jsxs("header",{className:Ve.modalHeader,children:[n.jsx("h2",{id:"schedule-title",className:Ve.modalTitle,"data-i18n":"home.schedule.title",children:"Streaming-Plan"}),n.jsx("button",{className:Ve.closeBtn,onClick:e,"data-i18n":"home.schedule.close",children:"Schlieen"})]}),n.jsxs("div",{className:Ve.modalFilters,children:[n.jsxs("label",{className:Ve.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.platform",children:"Platform"}),n.jsxs("select",{value:i,onChange:N=>a(N.target.value),className:Ve.select,children:[n.jsx("option",{value:"All",children:"All"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"YouTube",children:"YouTube"})]})]}),n.jsxs("label",{className:Ve.formRow,children:[n.jsx("span",{"data-i18n":"home.schedule.search",children:"Search"}),n.jsx("input",{value:l,onChange:N=>d(N.target.value),className:Ve.input,placeholder:"Streamer / Title"})]}),n.jsxs("label",{className:Ve.formRowCheckbox,children:[n.jsx("input",{type:"checkbox",checked:u,onChange:N=>h(N.target.checked)}),n.jsx("span",{"data-i18n":"home.schedule.today",children:"Nur heute"})]})]}),n.jsx("div",{className:Ve.tableWrap,children:n.jsxs("table",{className:Ve.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"weekday"}),n.jsx("th",{children:"start_utc"}),n.jsx("th",{children:"end_utc"}),n.jsx("th",{children:"timezone"}),n.jsx("th",{children:"platform"}),n.jsx("th",{children:"channel_url"}),n.jsx("th",{children:"streamer"}),n.jsx("th",{children:"title"})]})}),n.jsx("tbody",{children:v?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:Ve.empty,children:"No schedule yet"})}):g.map((N,S)=>n.jsxs("tr",{children:[n.jsx("td",{children:N.weekday}),n.jsx("td",{children:N.start_utc}),n.jsx("td",{children:N.end_utc}),n.jsx("td",{children:N.timezone}),n.jsx("td",{children:N.platform}),n.jsx("td",{children:N.channel_url?n.jsx("a",{href:N.channel_url,target:"_blank",rel:"noreferrer",children:"link"}):""}),n.jsx("td",{children:N.streamer}),n.jsx("td",{children:N.title})]},S))})]})})]})})},eW=()=>{const[t,e]=E.useState(!1);return n.jsxs(Pt,{title:"home.title",subtitle:"home.subtitle",children:[n.jsx("div",{className:Ve.row,children:n.jsx("div",{className:Ve.colFull,children:n.jsx(QG,{})})}),n.jsxs("div",{className:Ve.row,children:[n.jsx("div",{className:Ve.colCommunity,children:n.jsx(XG,{})}),n.jsx("div",{className:Ve.colGuides,children:n.jsx(YG,{})})]}),n.jsx("div",{className:Ve.row,children:n.jsx("div",{className:Ve.colFull,children:n.jsx(JG,{onOpenSchedule:()=>e(!0)})})}),n.jsx(ZG,{open:t,onClose:()=>e(!1)})]})},tW="_wrapper_125p4_1",sW="_card_125p4_19",nW="_logo_125p4_45",rW="_heading_125p4_61",iW="_subcopy_125p4_73",aW="_buttonStack_125p4_83",oW="_providerButton_125p4_97",lW="_discord_125p4_145",cW="_google_125p4_153",dW="_disclaimer_125p4_161",uW="_status_125p4_173",hW="_sessionBlock_125p4_183",mW="_logoutButton_125p4_197",pW="_linkButton_125p4_227",fW="_loading_125p4_245",gW="_spinner_125p4_261",vn={wrapper:tW,card:sW,logo:nW,heading:rW,subcopy:iW,buttonStack:aW,providerButton:oW,discord:lW,google:cW,disclaimer:dW,status:uW,sessionBlock:hW,logoutButton:mW,linkButton:pW,loading:fW,spinner:gW},xW=()=>{const t=oi(),{status:e,user:s,loginWithDiscord:r,loginWithGoogle:i,logout:a}=Xa(),l=e==="loading"||e==="idle",d=e==="authenticated"&&!!s,u=()=>{l||r()},h=()=>{l||i()},m=async()=>{await a()},g=()=>{t("/")};let v;return l?v=n.jsxs("div",{className:vn.loading,children:[n.jsx("div",{className:vn.spinner}),n.jsx("div",{children:"Checking session"})]}):d&&s?v=n.jsxs("div",{className:vn.sessionBlock,children:[n.jsxs("div",{className:vn.status,children:["You are logged in as ",s.displayName,"."]}),n.jsx("button",{className:vn.logoutButton,type:"button",onClick:m,children:"Logout"}),n.jsx("button",{className:vn.linkButton,type:"button",onClick:g,children:"Back to dashboard"})]}):v=n.jsxs("div",{className:vn.buttonStack,children:[n.jsx("button",{className:`${vn.providerButton} ${vn.discord}`,type:"button",onClick:u,children:"Login with Discord"}),n.jsx("button",{className:`${vn.providerButton} ${vn.google}`,type:"button",onClick:h,children:"Login with Google"})]}),n.jsx(Pt,{title:"Account Access",subtitle:"Connect with your community identity",mode:"page",padded:!0,children:n.jsx("div",{className:vn.wrapper,children:n.jsxs("div",{className:vn.card,children:[n.jsx("img",{className:vn.logo,src:cf,alt:"SFDataHub logo"}),n.jsx("h1",{className:vn.heading,children:"Sign in"}),n.jsx("p",{className:vn.subcopy,children:"Choose a method to access SFDataHub."}),v,n.jsx("p",{className:vn.disclaimer,children:"We store only your SFDataHub user ID, display name, avatar, and roles to personalize your experience."})]})})})};function yW(){return n.jsx(Pt,{hex:n.jsx("div",{className:"text-[#F5F9FF]",children:"Hex-Nav (soon)"}),title:"Dashboard",subtitle:"berblick & aktuelle Aktivitten",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Export"}),left:n.jsx(vW,{}),right:n.jsx(bW,{}),centerFramed:!0,leftWidth:280,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(tv,{to:"/dashboard/kpis",title:"KPIs",desc:"Kennzahlen & Widgets"}),n.jsx(tv,{to:"/dashboard/activity",title:"Activity",desc:"Letzte Aktionen & Feeds"}),n.jsx(tv,{to:"/dashboard/progression",title:"Progression",desc:"Fortschritt & Ziele"})]})})}function vW(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Schnellzugriff"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(sv,{to:"/dashboard/kpis",children:"KPIs"}),n.jsx(sv,{to:"/dashboard/activity",children:"Activity"}),n.jsx(sv,{to:"/dashboard/progression",children:"Progression"})]})]})}function bW(){return n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Dieses Dashboard ist personalisiert und wird spter nur bei Login angezeigt."}),n.jsx("div",{className:"text-[#F5F9FF]",children:"Disclaimer"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Alle Marken- und Bildrechte liegen bei den jeweiligen Inhabern."})]})}function tv({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function sv({to:t,children:e}){return n.jsx(rs,{to:t,className:"rounded-xl border px-3 py-1 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:e})}function _W(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  KPIs"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(nv,{label:"Letzter Scan",value:"",hint:"Zeitpunkt des letzten Uploads"}),n.jsx(nv,{label:"Tracked Spieler",value:"",hint:"Gesamtzahl deiner getrackten Chars"}),n.jsx(nv,{label:"Gilden-Tasks",value:"",hint:"Offene Aufgaben im GuildHub"})]})]})}function nv({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:t}),n.jsx("div",{style:{fontSize:22,fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function wW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Activity"}),n.jsx("p",{style:{opacity:.8},children:"Letzte Aktionen, Benachrichtigungen und Feeds (Platzhalter)."}),n.jsxs("ul",{style:{marginTop:12,lineHeight:1.6},children:[n.jsx("li",{children:" Neues Scan-File hochgeladen"}),n.jsx("li",{children:" Spieler-PR: Lvl-Up / Scrapbook-Update"}),n.jsx("li",{children:" Gilden-Event geplant"})]})]})}function jW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Dashboard  Progression"}),n.jsx("p",{style:{opacity:.8},children:"Persnliche Ziele & Fortschritt (Platzhalter)."}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12,marginTop:12},children:[n.jsx(rv,{title:"Scrapbook 100%",progress:72}),n.jsx(rv,{title:"Fortress Ausbaustufe",progress:48}),n.jsx(rv,{title:"Underworld Boss",progress:35})]})]})}function rv({title:t,progress:e}){return n.jsxs("div",{style:{background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,padding:16},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)",marginBottom:8},children:t}),n.jsx("div",{style:{height:10,borderRadius:999,background:"rgba(255,255,255,.08)",overflow:"hidden"},children:n.jsx("div",{style:{width:`${e}%`,height:"100%",background:"linear-gradient(90deg, #2D89FF, #7EC8FF)"}})}),n.jsxs("div",{style:{marginTop:6,fontSize:12,color:"var(--text-soft)"},children:[e,"%"]})]})}function SW(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Discover"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(bl,{to:"/players",title:"Players",desc:"Browse, Rankings, Stats, Profile"}),n.jsx(bl,{to:"/guilds",title:"Guilds",desc:"Browse, Rankings, Stats"}),n.jsx(bl,{to:"/servers",title:"Servers",desc:"Rankings & Statistiken"}),n.jsx(bl,{to:"/scans",title:"Scans",desc:"Neueste & Archiv"}),n.jsx(bl,{to:"/guides",title:"Guides",desc:"Fortress, Underworld, Dungeons"}),n.jsx(bl,{to:"/community",title:"Community",desc:"News, Scans, Predictions, Creators"}),n.jsx(bl,{to:"/players/compare",title:"Compare Players",desc:"Direkter Spieler-Vergleich"})]})]})}function bl({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function NW({children:t,framed:e=!0}){return e?n.jsx("main",{className:"rounded-2xl border p-3 md:p-4",style:{borderColor:La.border,backgroundColor:La.tile},children:t}):n.jsx("main",{className:"min-w-0",children:t})}function kW(t,e){if(!t)return"";const s=/^https?:\/\//i.test(t)?t:`https://heyzine.com/flip-book/${t}.html`;if(!e)return s;const r=s.includes("?")?"&":"?";return`${s}${r}bg=transparent&background=transparent`}const CW=({srcOrId:t,aspectRatio:e="16/10",height:s,allowFullscreen:r=!0,lazy:i=!0,className:a,showInfo:l=!1,infoText:d="Dieses Flipbook wird von einem externen Dienst (heyzine.com) geladen.",edgeRevealPx:u=0,tryTransparentBg:h=!0})=>{const[m,g]=E.useState(!1),v=E.useMemo(()=>kW(t,h),[t,h]),b=i?"lazy":"eager",N={width:"100%",position:"relative",background:"transparent",border:"none",margin:0,padding:0},S={position:"relative",width:"100%",padding:u?`${u}px`:0,boxSizing:"border-box",background:"transparent"},C=s?{position:"relative",width:"100%",height:s,overflow:"hidden",background:"transparent",borderRadius:0}:{position:"relative",width:"100%",overflow:"hidden",background:"transparent",borderRadius:0,aspectRatio:e},R={position:"absolute",top:8,right:8,width:24,height:24,borderRadius:"50%",border:"1px solid rgba(214,228,247,0.45)",background:"transparent",color:"#D6E4F7",fontWeight:700,cursor:"pointer",lineHeight:"22px",textAlign:"center",userSelect:"none",zIndex:2};return n.jsx("div",{className:a,style:N,children:n.jsx("div",{style:S,children:n.jsxs("div",{style:C,children:[n.jsx("iframe",{src:v,style:{position:"absolute",inset:0,width:"100%",height:"100%",border:0,backgroundColor:"transparent"},allowFullScreen:r,loading:b,scrolling:"no",title:"Heyzine Flipbook"}),l&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button","aria-label":"Info",onClick:()=>g(M=>!M),style:R,title:"Info",children:"i"}),m&&n.jsxs("div",{role:"note",style:{position:"absolute",top:40,right:8,maxWidth:360,padding:"8px 10px",fontSize:13,lineHeight:1.35,border:"1px solid rgba(214,228,247,0.25)",background:"rgba(12,28,46,0.85)",color:"#B0C4D9",boxShadow:"0 6px 20px rgba(0,0,0,0.35)",borderRadius:8,zIndex:2},children:[d," ",n.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",style:{color:"#5C8BC6",textDecoration:"underline"},children:"In neuem Tab ffnen"}),"."]})]})]})})})},TW="#0C1C2E",EW=()=>n.jsx(Pt,{children:n.jsx(NW,{children:n.jsxs("div",{style:{position:"relative",width:"100%"},children:[n.jsx("div",{"aria-hidden":!0,style:{position:"absolute",inset:0,background:TW,borderRadius:16,pointerEvents:"none",zIndex:0}}),n.jsx("div",{style:{position:"relative",zIndex:1},children:n.jsx(CW,{srcOrId:"https://heyzine.com/flip-book/a646e8901f.html",aspectRatio:"16/10",allowFullscreen:!0,lazy:!0,tryTransparentBg:!0,showInfo:!0,edgeRevealPx:0,infoText:"Dieses Flipbook wird von heyzine.com eingebettet. Durch das Laden knnen Inhalte und Ressourcen von Heyzine nachgeladen werden."})})]})})}),AW="_pageWrap_72re9_7",IW="_infoLine_72re9_17",PW="_viewerHost_72re9_43",RW="_overlay_72re9_99",LW="_dragZoneLeft_72re9_101",DW="_dragZoneRight_72re9_103",MW="_inbookLink_72re9_105",wo={pageWrap:AW,infoLine:IW,viewerHost:PW,overlay:RW,dragZoneLeft:LW,dragZoneRight:DW,inbookLink:MW};var Hu={exports:{}},FW=Hu.exports,mN;function BW(){return mN||(mN=1,(function(t,e){(function(s,r){r(e)})(FW,(function(s){class r{constructor(y,w){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=w,this.nowDrawingDensity=this.createdDensity,this.render=y}setDensity(y){this.createdDensity=y,this.nowDrawingDensity=y}setDrawingDensity(y){this.nowDrawingDensity=y}setPosition(y){this.state.position=y}setAngle(y){this.state.angle=y}setArea(y){this.state.area=y}setHardDrawingAngle(y){this.state.hardDrawingAngle=y}setHardAngle(y){this.state.hardAngle=y,this.state.hardDrawingAngle=y}setOrientation(y){this.orientation=y}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends r{constructor(y,w,D){super(y,D),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=w}draw(y){const w=this.render.getContext(),D=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,_=this.render.getRect().height;w.save(),w.translate(D.x,D.y),w.beginPath();for(let A of this.state.area)A!==null&&(A=this.render.convertToGlobal(A),w.lineTo(A.x-D.x,A.y-D.y));w.rotate(this.state.angle),w.clip(),this.isLoad?w.drawImage(this.image,0,0,k,_):this.drawLoader(w,{x:0,y:0},k,_),w.restore()}simpleDraw(y){const w=this.render.getRect(),D=this.render.getContext(),k=w.pageWidth,_=w.height,A=y===1?w.left+w.pageWidth:w.left,F=w.top;this.isLoad?D.drawImage(this.image,A,F,k,_):this.drawLoader(D,{x:A,y:F},k,_)}drawLoader(y,w,D,k){y.beginPath(),y.strokeStyle="rgb(200, 200, 200)",y.fillStyle="rgb(255, 255, 255)",y.lineWidth=1,y.rect(w.x+1,w.y+1,D-1,k-1),y.stroke(),y.fill();const _={x:w.x+D/2,y:w.y+k/2};y.beginPath(),y.lineWidth=10,y.arc(_.x,_.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),y.stroke(),y.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class a{constructor(y,w){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=w,this.app=y,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let w=0;w<this.pages.length;w++)this.portraitSpread.push([w]);let y=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([y]),y++);for(let w=y;w<this.pages.length;w+=2)w<this.pages.length-1?this.landscapeSpread.push([w,w+1]):(this.landscapeSpread.push([w]),this.pages[w].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(y){const w=this.getSpread();for(let D=0;D<w.length;D++)if(y===w[D][0]||y===w[D][1])return D;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(y){if(y>=0&&y<this.pages.length)return this.pages[y];throw new Error("Invalid page number")}nextBy(y){const w=this.pages.indexOf(y);return w<this.pages.length-1?this.pages[w+1]:null}prevBy(y){const w=this.pages.indexOf(y);return w>0?this.pages[w-1]:null}getFlippingPage(y){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[w].newTemporaryCopy():this.pages[w-1];{const D=y===0?this.getSpread()[w+1]:this.getSpread()[w-1];return D.length===1||y===0?this.pages[D[0]]:this.pages[D[1]]}}getBottomPage(y){const w=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return y===0?this.pages[w+1]:this.pages[w-1];{const D=y===0?this.getSpread()[w+1]:this.getSpread()[w-1];return D.length===1?this.pages[D[0]]:y===0?this.pages[D[1]]:this.pages[D[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(y=null){if(y===null&&(y=this.currentPageIndex),y<0||y>=this.pages.length)return;const w=this.getSpreadIndexByPage(y);w!==null&&(this.currentSpreadIndex=w,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(y){if(!(y>=0&&y<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=y}showSpread(){const y=this.getSpread()[this.currentSpreadIndex];y.length===2?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(this.pages[y[1]])):this.render.getOrientation()==="landscape"&&y[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[y[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[y[0]])),this.currentPageIndex=y[0],this.app.updatePageIndex(this.currentPageIndex)}}class l extends a{constructor(y,w,D){super(y,w),this.imagesHref=D}load(){for(const y of this.imagesHref){const w=new i(this.render,y,"soft");w.load(),this.pages.push(w)}this.createSpread()}}class d{static GetDistanceBetweenTwoPoint(y,w){return y===null||w===null?1/0:Math.sqrt(Math.pow(w.x-y.x,2)+Math.pow(w.y-y.y,2))}static GetSegmentLength(y){return d.GetDistanceBetweenTwoPoint(y[0],y[1])}static GetAngleBetweenTwoLine(y,w){const D=y[0].y-y[1].y,k=w[0].y-w[1].y,_=y[1].x-y[0].x,A=w[1].x-w[0].x;return Math.acos((D*k+_*A)/(Math.sqrt(D*D+_*_)*Math.sqrt(k*k+A*A)))}static PointInRect(y,w){return w===null?null:w.x>=y.left&&w.x<=y.width+y.left&&w.y>=y.top&&w.y<=y.top+y.height?w:null}static GetRotatedPoint(y,w,D){return{x:y.x*Math.cos(D)+y.y*Math.sin(D)+w.x,y:y.y*Math.cos(D)-y.x*Math.sin(D)+w.y}}static LimitPointToCircle(y,w,D){if(d.GetDistanceBetweenTwoPoint(y,D)<=w)return D;const k=y.x,_=y.y,A=D.x,F=D.y;let P=Math.sqrt(Math.pow(w,2)*Math.pow(k-A,2)/(Math.pow(k-A,2)+Math.pow(_-F,2)))+k;D.x<0&&(P*=-1);let B=(P-k)*(_-F)/(k-A)+_;return k-A+_===0&&(B=w),{x:P,y:B}}static GetIntersectBetweenTwoSegment(y,w,D){return d.PointInRect(y,d.GetIntersectBeetwenTwoLine(w,D))}static GetIntersectBeetwenTwoLine(y,w){const D=y[0].y-y[1].y,k=w[0].y-w[1].y,_=y[1].x-y[0].x,A=w[1].x-w[0].x,F=y[0].x*y[1].y-y[1].x*y[0].y,P=w[0].x*w[1].y-w[1].x*w[0].y,B=D*P-k*F,$=_*P-A*F,W=-(F*A-P*_)/(D*A-k*_),H=-(D*P-k*F)/(D*A-k*_);if(isFinite(W)&&isFinite(H))return{x:W,y:H};if(Math.abs(B-$)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(y,w){const D=Math.abs(y.x-w.x),k=Math.abs(y.y-w.y),_=Math.max(D,k),A=[y];function F(P,B,$,W,H){return B>P?P+H*($/W):B<P?P-H*($/W):P}for(let P=1;P<=_;P+=1)A.push({x:F(y.x,w.x,D,_,P),y:F(y.y,w.y,k,_,P)});return A}}class u extends r{constructor(y,w,D){super(y,D),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=w,this.element.classList.add("stf__item"),this.element.classList.add("--"+D)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new u(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(y){const w=y||this.nowDrawingDensity,D=this.render.convertToGlobal(this.state.position),k=this.render.getRect().pageWidth,_=this.render.getRect().height;this.element.classList.remove("--simple");const A=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${k}px;
            height: ${_}px;
        `;w==="hard"?this.drawHard(A):this.drawSoft(D,A)}drawHard(y=""){const w=this.render.getRect().left+this.render.getRect().width/2,D=this.state.hardDrawingAngle,k=y+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${D}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${w}px, 0, 0) rotateY(${D}deg);`);this.element.style.cssText=k}drawSoft(y,w=""){let D="polygon( ";for(const _ of this.state.area)if(_!==null){let A=this.render.getDirection()===1?{x:-_.x+this.state.position.x,y:_.y-this.state.position.y}:{x:_.x-this.state.position.x,y:_.y-this.state.position.y};A=d.GetRotatedPoint(A,{x:0,y:0},this.state.angle),D+=A.x+"px "+A.y+"px, "}D=D.slice(0,-2),D+=")";const k=w+`transform-origin: 0 0; clip-path: ${D}; -webkit-clip-path: ${D};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${y.x}px, ${y.y}px);`:`transform: translate3d(${y.x}px, ${y.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=k}simpleDraw(y){const w=this.render.getRect(),D=w.pageWidth,k=w.height,_=y===1?w.left+w.pageWidth:w.left,A=w.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${k}px; 
            left: ${_}px; 
            top: ${A}px; 
            width: ${D}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(y){super.setOrientation(y),this.element.classList.remove("--left","--right"),this.element.classList.add(y===1?"--right":"--left")}setDrawingDensity(y){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+y),super.setDrawingDensity(y)}}class h extends a{constructor(y,w,D,k){super(y,w),this.element=D,this.pagesElement=k}load(){for(const y of this.pagesElement){const w=new u(this.render,y,y.dataset.density==="hard"?"hard":"soft");w.load(),this.pages.push(w)}this.createSpread()}}class m{constructor(y,w,D,k){this.direction=y,this.corner=w,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(D,10),this.pageHeight=parseInt(k,10)}calc(y){try{return this.position=this.calcAngleAndPosition(y),this.calculateIntersectPoint(this.position),!0}catch(w){return!1}}getFlippingClipArea(){const y=[];let w=!1;return y.push(this.rect.topLeft),y.push(this.topIntersectPoint),this.sideIntersectPoint===null?w=!0:(y.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(w=!1)),y.push(this.bottomIntersectPoint),(w||this.corner==="bottom")&&y.push(this.rect.bottomLeft),y}getBottomClipArea(){const y=[];return y.push(this.topIntersectPoint),this.corner==="top"?y.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&y.push({x:this.pageWidth,y:0}),y.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?d.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&y.push(this.sideIntersectPoint):this.corner==="top"&&y.push({x:this.pageWidth,y:this.pageHeight}),y.push(this.bottomIntersectPoint),y.push(this.topIntersectPoint),y}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const y=d.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?y:Math.PI-y}calcAngleAndPosition(y){let w=y;if(this.updateAngleAndGeometry(w),w=this.corner==="top"?this.checkPositionAtCenterLine(w,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(w,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(w.x-this.pageWidth)<1&&Math.abs(w.y)<1)throw new Error("Point is too small");return w}updateAngleAndGeometry(y){this.angle=this.calculateAngle(y),this.rect=this.getPageRect(y)}calculateAngle(y){const w=this.pageWidth-y.x+1,D=this.corner==="bottom"?this.pageHeight-y.y:y.y;let k=2*Math.acos(w/Math.sqrt(D*D+w*w));D<0&&(k=-k);const _=Math.PI-k;if(!isFinite(k)||_>=0&&_<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(k=-k),k}getPageRect(y){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],y):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],y)}getRectFromBasePoint(y,w){return{topLeft:this.getRotatedPoint(y[0],w),topRight:this.getRotatedPoint(y[1],w),bottomLeft:this.getRotatedPoint(y[2],w),bottomRight:this.getRotatedPoint(y[3],w)}}getRotatedPoint(y,w){return{x:y.x*Math.cos(this.angle)+y.y*Math.sin(this.angle)+w.x,y:y.y*Math.cos(this.angle)-y.x*Math.sin(this.angle)+w.y}}calculateIntersectPoint(y){const w={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[y,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=d.GetIntersectBetweenTwoSegment(w,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(y,w,D){let k=y;const _=d.LimitPointToCircle(w,this.pageWidth,k);k!==_&&(k=_,this.updateAngleAndGeometry(k));const A=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let F=this.rect.bottomRight,P=this.rect.topLeft;if(this.corner==="bottom"&&(F=this.rect.topRight,P=this.rect.bottomLeft),F.x<=0){const B=d.LimitPointToCircle(D,A,P);B!==k&&(k=B,this.updateAngleAndGeometry(k))}return k}getSegmentToShadowLine(){const y=this.getShadowStartPoint();return[y,y!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(y,w){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=y,this.app=w}fold(y){this.setState("user_fold"),this.calc===null&&this.start(y),this.do(this.render.convertToPage(y))}flip(y){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(y)||(this.calc!==null&&this.render.finishAnimation(),!this.start(y)))return;const w=this.getBoundsRect();this.setState("flipping");const D=w.height/10,k=this.calc.getCorner()==="bottom"?w.height-D:D,_=this.calc.getCorner()==="bottom"?w.height:0;this.calc.calc({x:w.pageWidth-D,y:k}),this.animateFlippingTo({x:w.pageWidth-D,y:k},{x:-w.pageWidth,y:_},!0)}start(y){this.reset();const w=this.render.convertToBook(y),D=this.getBoundsRect(),k=this.getDirectionByPoint(w),_=w.y>=D.height/2?"bottom":"top";if(!this.checkDirection(k))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(k),this.bottomPage=this.app.getPageCollection().getBottomPage(k),this.render.getOrientation()==="landscape")if(k===1){const A=this.app.getPageCollection().nextBy(this.flippingPage);A!==null&&this.flippingPage.getDensity()!==A.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),A.setDrawingDensity("hard"))}else{const A=this.app.getPageCollection().prevBy(this.flippingPage);A!==null&&this.flippingPage.getDensity()!==A.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),A.setDrawingDensity("hard"))}return this.render.setDirection(k),this.calc=new m(k,_,D.pageWidth.toString(10),D.height.toString(10)),!0}catch(A){return!1}}do(y){if(this.calc!==null&&this.calc.calc(y)){const w=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*w)/100):this.flippingPage.setHardAngle(-90*(200-2*w)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),w,this.calc.getDirection())}}flipToPage(y,w){const D=this.app.getPageCollection().getCurrentSpreadIndex(),k=this.app.getPageCollection().getSpreadIndexByPage(y);try{k>D&&(this.app.getPageCollection().setCurrentSpreadIndex(k-1),this.flipNext(w)),k<D&&(this.app.getPageCollection().setCurrentSpreadIndex(k+1),this.flipPrev(w))}catch(_){}}flipNext(y){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:y==="top"?1:this.render.getRect().height-2})}flipPrev(y){this.flip({x:10,y:y==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const y=this.calc.getPosition(),w=this.getBoundsRect(),D=this.calc.getCorner()==="bottom"?w.height:0;y.x<=0?this.animateFlippingTo(y,{x:-w.pageWidth,y:D},!0):this.animateFlippingTo(y,{x:w.pageWidth,y:D},!1)}showCorner(y){if(!this.checkState("read","fold_corner"))return;const w=this.getBoundsRect(),D=w.pageWidth;if(this.isPointOnCorners(y))if(this.calc===null){if(!this.start(y))return;this.setState("fold_corner"),this.calc.calc({x:D-1,y:1});const k=50,_=this.calc.getCorner()==="bottom"?w.height-1:1,A=this.calc.getCorner()==="bottom"?w.height-k:k;this.animateFlippingTo({x:D-1,y:_},{x:D-k,y:A},!1,!1)}else this.do(this.render.convertToPage(y));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(y,w,D,k=!0){const _=d.GetCordsFromTwoPoint(y,w),A=[];for(const P of _)A.push(()=>this.do(P));const F=this.getAnimationDuration(_.length);this.render.startAnimation(A,F,()=>{this.calc&&(D&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),k&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(y){this.state!==y&&(this.app.updateState(y),this.state=y)}getDirectionByPoint(y){const w=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(y.x-w.pageWidth<=w.width/5)return 1}else if(y.x<w.width/2)return 1;return 0}getAnimationDuration(y){const w=this.app.getSettings().flippingTime;return y>=1e3?w:y/1e3*w}checkDirection(y){return y===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...y){for(const w of y)if(this.state===w)return!0;return!1}isPointOnCorners(y){const w=this.getBoundsRect(),D=w.pageWidth,k=Math.sqrt(Math.pow(D,2)+Math.pow(w.height,2))/5,_=this.render.convertToBook(y);return _.x>0&&_.y>0&&_.x<w.width&&_.y<w.height&&(_.x<k||_.x>w.width-k)&&(_.y<k||_.y>w.height-k)}}class v{constructor(y,w){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=w,this.app=y;const D=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=D.exec(window.navigator.userAgent)!==null}render(y){if(this.animation!==null){const w=Math.round((y-this.animation.startedAt)/this.animation.durationFrame);w<this.animation.frames.length?this.animation.frames[w]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=y,this.drawFrame()}start(){this.update();const y=w=>{this.render(w),requestAnimationFrame(y)};requestAnimationFrame(y)}startAnimation(y,w,D){this.finishAnimation(),this.animation={frames:y,duration:w,durationFrame:w/y.length,onAnimateEnd:D,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const y=this.calculateBoundsRect();this.orientation!==y&&(this.orientation=y,this.app.updateOrientation(y))}calculateBoundsRect(){let y="landscape";const w=this.getBlockWidth(),D=w/2,k=this.getBlockHeight()/2,_=this.setting.width/this.setting.height;let A=this.setting.width,F=this.setting.height,P=D-A;return this.setting.size==="stretch"?(w<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(y="portrait"),A=y==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,A>this.setting.maxWidth&&(A=this.setting.maxWidth),F=A/_,F>this.getBlockHeight()&&(F=this.getBlockHeight(),A=F*_),P=y==="portrait"?D-A/2-A:D-A):w<2*A&&this.app.getSettings().usePortrait&&(y="portrait",P=D-A/2-A),this.boundsRect={left:P,top:k-F/2,width:2*A,height:F,pageWidth:A},y}setShadowData(y,w,D,k){if(!this.app.getSettings().drawShadow)return;const _=100*this.getSettings().maxShadowOpacity;this.shadow={pos:y,angle:w,width:3*this.getRect().pageWidth/4*D/100,opacity:(100-D)*_/100/100,direction:k,progress:2*D}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(y){this.pageRect=y}setDirection(y){this.direction=y}setRightPage(y){y!==null&&y.setOrientation(1),this.rightPage=y}setLeftPage(y){y!==null&&y.setOrientation(0),this.leftPage=y}setBottomPage(y){y!==null&&y.setOrientation(this.direction===1?0:1),this.bottomPage=y}setFlippingPage(y){y!==null&&y.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=y}convertToBook(y){const w=this.getRect();return{x:y.x-w.left,y:y.y-w.top}}isSafari(){return this.safari}convertToPage(y,w){w||(w=this.direction);const D=this.getRect();return{x:w===0?y.x-D.left-D.width/2:D.width/2-y.x+D.left,y:y.y-D.top}}convertToGlobal(y,w){if(w||(w=this.direction),y==null)return null;const D=this.getRect();return{x:w===0?y.x+D.left+D.width/2:D.width/2-y.x+D.left,y:y.y+D.top}}convertRectToGlobal(y,w){return w||(w=this.direction),{topLeft:this.convertToGlobal(y.topLeft,w),topRight:this.convertToGlobal(y.topRight,w),bottomLeft:this.convertToGlobal(y.bottomLeft,w),bottomRight:this.convertToGlobal(y.bottomRight,w)}}}class b extends v{constructor(y,w,D){super(y,w),this.canvas=D,this.ctx=D.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const y=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(y.left+y.pageWidth,y.top,y.width,y.height),this.ctx.clip())}drawBookShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=y.width/20;this.ctx.rect(y.left,y.top,y.width,y.height);const D={x:y.left+y.width/2-w/2,y:0};this.ctx.translate(D.x,D.y);const k=this.ctx.createLinearGradient(0,0,w,0);k.addColorStop(0,"rgba(0, 0, 0, 0)"),k.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),k.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),k.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),k.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),k.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=k,this.ctx.fillRect(0,0,w,2*y.height),this.ctx.restore()}drawOuterShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(y.left,y.top,y.width,y.height);const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const D=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),D.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),D.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),D.addColorStop(0,"rgba(0, 0, 0, 0)"),D.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=D,this.ctx.fillRect(0,0,this.shadow.width,2*y.height),this.ctx.restore()}drawInnerShadow(){const y=this.getRect();this.ctx.save(),this.ctx.beginPath();const w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),D=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(D.topLeft.x,D.topLeft.y),this.ctx.lineTo(D.topRight.x,D.topRight.y),this.ctx.lineTo(D.bottomRight.x,D.bottomRight.y),this.ctx.lineTo(D.bottomLeft.x,D.bottomLeft.y),this.ctx.translate(w.x,w.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const k=3*this.shadow.width/4,_=this.ctx.createLinearGradient(0,0,k,0);this.shadow.direction===0?(this.ctx.translate(-k,-100),_.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),_.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),_.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),_.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),_.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),_.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),_.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),_.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=_,this.ctx.fillRect(0,0,k,2*y.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class N{constructor(y,w,D){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=_=>{if(this.checkTarget(_.target)){const A=this.getMousePos(_.clientX,_.clientY);this.app.startUserTouch(A),_.preventDefault()}},this.onTouchStart=_=>{if(this.checkTarget(_.target)&&_.changedTouches.length>0){const A=_.changedTouches[0],F=this.getMousePos(A.clientX,A.clientY);this.touchPoint={point:F,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(F)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||_.preventDefault()}},this.onMouseUp=_=>{const A=this.getMousePos(_.clientX,_.clientY);this.app.userStop(A)},this.onMouseMove=_=>{const A=this.getMousePos(_.clientX,_.clientY);this.app.userMove(A,!1)},this.onTouchMove=_=>{if(_.changedTouches.length>0){const A=_.changedTouches[0],F=this.getMousePos(A.clientX,A.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-F.x)>10||this.app.getState()!=="read")&&_.cancelable&&this.app.userMove(F,!0),this.app.getState()!=="read"&&_.preventDefault()):this.app.userMove(F,!0)}},this.onTouchEnd=_=>{if(_.changedTouches.length>0){const A=_.changedTouches[0],F=this.getMousePos(A.clientX,A.clientY);let P=!1;if(this.touchPoint!==null){const B=F.x-this.touchPoint.point.x,$=Math.abs(F.y-this.touchPoint.point.y);Math.abs(B)>this.swipeDistance&&$<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(B>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),P=!0),this.touchPoint=null}this.app.userStop(F,P)}},this.parentElement=y,y.classList.add("stf__parent"),y.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=y.querySelector(".stf__wrapper"),this.app=w;const k=this.app.getSettings().usePortrait?1:2;y.style.minWidth=D.minWidth*k+"px",y.style.minHeight=D.minHeight+"px",D.size==="fixed"&&(y.style.minWidth=D.width*k+"px",y.style.minHeight=D.height+"px"),D.autoSize&&(y.style.width="100%",y.style.maxWidth=2*D.maxWidth+"px"),y.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=D.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(y){this.wrapper.classList.remove("--portrait","--landscape"),y==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(y,w){const D=this.distElement.getBoundingClientRect();return{x:y-D.left,y:w-D.top}}checkTarget(y){return!this.app.getSettings().clickEventForward||!["a","button"].includes(y.tagName.toLowerCase())}}class S extends N{constructor(y,w,D,k){super(y,w,D),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=y.querySelector(".stf__block"),this.items=k;for(const _ of k)this.distElement.appendChild(_);this.setHandlers()}clear(){for(const y of this.items)this.parentElement.appendChild(y)}updateItems(y){this.removeHandlers(),this.distElement.innerHTML="";for(const w of y)this.distElement.appendChild(w);this.items=y,this.setHandlers()}update(){this.app.getRender().update()}}class C extends N{constructor(y,w,D){super(y,w,D),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=y.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const y=getComputedStyle(this.canvas),w=parseInt(y.getPropertyValue("width"),10),D=parseInt(y.getPropertyValue("height"),10);this.canvas.width=w,this.canvas.height=D}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class R extends v{constructor(y,w,D){super(y,w),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=D,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const y=this.getRect(),w=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let D=(100-w)*(2.5*y.pageWidth)/100+20;D>y.pageWidth&&(D=y.pageWidth);let k=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${D}px;
            height: ${y.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*w/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;k+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=k}drawHardOuterShadow(){const y=this.getRect();let w=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*y.pageWidth)/100+20;w>y.pageWidth&&(w=y.pageWidth);let D=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${w}px;
            height: ${y.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${y.left+y.width/2}px;
            transform-origin: 0 0;
        `;D+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=D}drawInnerShadow(){const y=this.getRect(),w=3*this.shadow.width/4,D=this.getDirection()===0?w:0,k=this.getDirection()===0?"to left":"to right",_=this.convertToGlobal(this.shadow.pos),A=this.shadow.angle+3*Math.PI/2,F=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let P="polygon( ";for(const $ of F){let W=this.getDirection()===1?{x:-$.x+this.shadow.pos.x,y:$.y-this.shadow.pos.y}:{x:$.x-this.shadow.pos.x,y:$.y-this.shadow.pos.y};W=d.GetRotatedPoint(W,{x:D,y:100},A),P+=W.x+"px "+W.y+"px, "}P=P.slice(0,-2),P+=")";const B=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${w}px;
            height: ${2*y.height}px;
            background: linear-gradient(${k},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${D}px 100px;
            transform: translate3d(${_.x-D}px, ${_.y-100}px, 0) rotate(${A}rad);
            clip-path: ${P};
            -webkit-clip-path: ${P};
        `;this.innerShadow.style.cssText=B}drawOuterShadow(){const y=this.getRect(),w=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),D=this.shadow.angle+3*Math.PI/2,k=this.getDirection()===1?this.shadow.width:0,_=this.getDirection()===0?"to right":"to left",A=[{x:0,y:0},{x:y.pageWidth,y:0},{x:y.pageWidth,y:y.height},{x:0,y:y.height}];let F="polygon( ";for(const B of A)if(B!==null){let $=this.getDirection()===1?{x:-B.x+this.shadow.pos.x,y:B.y-this.shadow.pos.y}:{x:B.x-this.shadow.pos.x,y:B.y-this.shadow.pos.y};$=d.GetRotatedPoint($,{x:k,y:100},D),F+=$.x+"px "+$.y+"px, "}F=F.slice(0,-2),F+=")";const P=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*y.height}px;
            background: linear-gradient(${_}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${k}px 100px;
            transform: translate3d(${w.x-k}px, ${w.y-100}px, 0) rotate(${D}rad);
            clip-path: ${F};
            -webkit-clip-path: ${F};
        `;this.outerShadow.style.cssText=P}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const y=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(y))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const y of this.app.getPageCollection().getPages())y!==this.leftPage&&y!==this.rightPage&&y!==this.flippingPage&&y!==this.bottomPage&&(y.getElement().style.cssText="display: none"),y.getTemporaryCopy()!==this.flippingPage&&y.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class M{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(y){const w=this._default;if(Object.assign(w,y),w.size!=="stretch"&&w.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(w.width<=0||w.height<=0)throw new Error("Invalid width or height");if(w.flippingTime<=0)throw new Error("Invalid flipping time");return w.size==="stretch"?(w.minWidth<=0&&(w.minWidth=100),w.maxWidth<w.minWidth&&(w.maxWidth=2e3),w.minHeight<=0&&(w.minHeight=100),w.maxHeight<w.minHeight&&(w.maxHeight=2e3)):(w.minWidth=w.width,w.maxWidth=w.width,w.minHeight=w.height,w.maxHeight=w.height),w}}(function(T,y){y===void 0&&(y={});var w=y.insertAt;if(typeof document!="undefined"){var D=document.head||document.getElementsByTagName("head")[0],k=document.createElement("style");k.type="text/css",w==="top"&&D.firstChild?D.insertBefore(k,D.firstChild):D.appendChild(k),k.styleSheet?k.styleSheet.cssText=T:k.appendChild(document.createTextNode(T))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),s.PageFlip=class extends class{constructor(){this.events=new Map}on(T,y){return this.events.has(T)?this.events.get(T).push(y):this.events.set(T,[y]),this}off(T){this.events.delete(T)}trigger(T,y,w=null){if(this.events.has(T))for(const D of this.events.get(T))D({data:w,object:y})}}{constructor(T,y){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new M().getSettings(y),this.block=T}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(T){this.ui=new C(this.block,this,this.setting);const y=this.ui.getCanvas();this.render=new b(this,this.setting,y),this.flipController=new g(this.render,this),this.pages=new l(this,this.render,T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(T){this.ui=new S(this.block,this,this.setting,T),this.render=new R(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new h(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(T){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new l(this,this.render,T),this.pages.load(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}updateFromHtml(T){const y=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new h(this,this.render,this.ui.getDistElement(),T),this.pages.load(),this.ui.updateItems(T),this.render.reload(),this.pages.show(y),this.trigger("update",this,{page:y,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(T){this.pages.show(T)}flipNext(T="top"){this.flipController.flipNext(T)}flipPrev(T="top"){this.flipController.flipPrev(T)}flip(T,y="top"){this.flipController.flipToPage(T,y)}updateState(T){this.trigger("changeState",this,T)}updatePageIndex(T){this.trigger("flip",this,T)}updateOrientation(T){this.ui.setOrientationStyle(T),this.update(),this.trigger("changeOrientation",this,T)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(T){return this.pages.getPage(T)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(T){this.mousePosition=T,this.isUserTouch=!0,this.isUserMove=!1}userMove(T,y){this.isUserTouch||y||!this.setting.showPageCorners?this.isUserTouch&&d.GetDistanceBetweenTwoPoint(this.mousePosition,T)>5&&(this.isUserMove=!0,this.flipController.fold(T)):this.flipController.showCorner(T)}userStop(T,y=!1){this.isUserTouch&&(this.isUserTouch=!1,y||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(T)))}},Object.defineProperty(s,"__esModule",{value:!0})}))})(Hu,Hu.exports)),Hu.exports}var $W=BW();const OW="_viewerRoot_hj39c_5",VW="_stage_hj39c_17",UW="_host_hj39c_43",zW="_hud_hj39c_91",HW="_hBtn_hj39c_125",GW="_hText_hj39c_153",WW="_title_hj39c_167",qW="_sep_hj39c_169",KW="_spacer_hj39c_171",QW="_errorBox_hj39c_175",Lr={viewerRoot:OW,stage:VW,host:UW,hud:zW,hBtn:HW,hText:GW,title:WW,sep:qW,spacer:KW,errorBox:QW},XW="/".endsWith("/")?"/":"//",GE=t=>{if(/^https?:\/\//i.test(t)||t.startsWith("/"))return t;const e=t.replace(/^\.?\//,"");return`${XW}${e}`.replace(/\/{2,}/g,"/")},YW=async t=>{const e=GE(`flipbooks/${t}/manifest.json`),s=await fetch(e,{cache:"no-cache"});if(!s.ok)throw new Error(`Manifest not found for slug "${t}"`);return s.json()},JW=()=>{const t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},ZW=(t,e,s)=>Math.max(e,Math.min(s,t)),qs={hostEl:null,pf:null,slug:null},Ni={cache:new Set,inFlight:new Set,queue:[],maxParallel:1},eq=typeof globalThis.requestIdleCallback=="function"?t=>globalThis.requestIdleCallback(t):t=>setTimeout(t,0);function tq(t){for(const e of t)e&&(Ni.cache.has(e)||Ni.inFlight.has(e)||Ni.queue.includes(e)||Ni.queue.push(e));WE()}function WE(){eq(()=>{for(;Ni.inFlight.size<Ni.maxParallel&&Ni.queue.length>0;){const t=Ni.queue.shift();Ni.inFlight.add(t);const e=new Image;e.onload=e.onerror=()=>{Ni.inFlight.delete(t),Ni.cache.add(t),WE()},e.src=t}})}const sq=({slug:t,initialPage:e=1,onReady:s,onPageChange:r,noSound:i=!0})=>{const a=E.useRef(null),l=E.useRef(null),[d,u]=E.useState(null),[h,m]=E.useState(null),g=E.useRef(),v=E.useRef(),b=E.useRef(e);E.useEffect(()=>{g.current=s},[s]),E.useEffect(()=>{v.current=r},[r]),E.useEffect(()=>{b.current=e},[e]);const N=E.useMemo(()=>GE(`flipbooks/${t}`),[t]),S=E.useCallback(T=>{var y,w;if((y=T.srcset)!=null&&y.length){const D=[...T.srcset].sort((_,A)=>_.width-A.width),k=(w=D.find(_=>_.width>=1600))!=null?w:D[D.length-1];return/^https?:\/\//i.test(k.src)||k.src.startsWith("/")?k.src:`${N}/${k.src}`.replace(/\/{2,}/g,"/")}return/^https?:\/\//i.test(T.src)||T.src.startsWith("/")?T.src:`${N}/${T.src}`.replace(/\/{2,}/g,"/")},[N]);E.useEffect(()=>{let T=!0;return m(null),YW(t).then(y=>{T&&u(y)}).catch(y=>{T&&m(y.message||"Failed to load flipbook manifest.")}),()=>{T=!1}},[t]),E.useEffect(()=>{const T=l.current,y=a.current;if(!T||!y||!d||(qs.hostEl||(qs.hostEl=document.createElement("div"),qs.hostEl.className=Lr.host),qs.hostEl.parentElement!==T&&T.appendChild(qs.hostEl),!qs.hostEl.isConnected))return;if(!(!qs.pf||qs.slug!==t)){try{qs.pf.update()}catch($){}return}if(qs.pf){try{qs.pf.destroy()}catch($){}qs.pf=null}const D={width:d.pageWidth,height:d.pageHeight,size:"stretch",maxShadowOpacity:.25,showCover:!1,mobileScrollSupport:!0,usePortrait:!1,disableFlipByClick:!1,turnCorner:"all",startZIndex:10,swipeDistance:30,showPageCorners:!0,useMouseEvents:!0},k=new $W.PageFlip(qs.hostEl,D);qs.pf=k,qs.slug=t;const _=d.pages.map(S);k.loadFromImages(_);const A=$=>{const W=[],H=$+1,q=$+2;d.pages[H]&&W.push(S(d.pages[H])),d.pages[q]&&W.push(S(d.pages[q])),tq(W)},F=()=>{var W;const $=ZW(b.current,1,d.pageCount)-1;k.turnToPage($,"hard"),setTimeout(()=>A($),220),(W=g.current)==null||W.call(g,k)};k.on("init",F),k.on("flip",$=>{var H;const W=$.data;(H=v.current)==null||H.call(v,W),setTimeout(()=>A(W),220)});const P=new ResizeObserver(()=>{var $;try{($=qs.pf)==null||$.update()}catch(W){}});P.observe(y);const B=$=>{var W,H;$.key==="ArrowLeft"&&($.preventDefault(),(W=qs.pf)==null||W.flipPrev()),$.key==="ArrowRight"&&($.preventDefault(),(H=qs.pf)==null||H.flipNext())};return window.addEventListener("keydown",B,{passive:!1}),()=>{window.removeEventListener("keydown",B),P.disconnect()}},[d,S,t]);const C=()=>{var T;return(T=qs.pf)==null?void 0:T.flipPrev()},R=()=>{var T;return(T=qs.pf)==null?void 0:T.flipNext()},M=()=>{var w;const T=a.current;if(!T)return;const y=T;(w=y.requestFullscreen||y.webkitRequestFullscreen||y.msRequestFullscreen)==null||w.call(y)};return h?n.jsxs("div",{className:Lr.errorBox,children:["Flipbook konnte nicht geladen werden: ",h]}):d?n.jsxs("div",{className:Lr.viewerRoot,ref:a,"aria-label":d.title,children:[n.jsx("div",{className:Lr.stage,ref:l}),n.jsxs("div",{className:Lr.hud,children:[n.jsx("button",{className:Lr.hBtn,onClick:C,"aria-label":"Zurck",children:""}),n.jsxs("div",{className:Lr.hText,children:[n.jsx("span",{className:Lr.title,children:d.title}),n.jsx("span",{className:Lr.sep,children:""}),n.jsxs("span",{children:[d.pageCount," Seiten"]})]}),n.jsx("div",{className:Lr.spacer}),JW()&&n.jsx("button",{className:Lr.hBtn,onClick:M,"aria-label":"Fullscreen",children:""}),n.jsx("button",{className:Lr.hBtn,onClick:R,"aria-label":"Weiter",children:""})]})]}):n.jsx("div",{className:Lr.errorBox,children:"Lade Flipbook"})},nq=J.memo(sq),rq={4:[{kind:"goto",page:4,t:14.5,l:4.1,w:28.7,h:20.2,toPage:5,label:"Jump to chapter Before SFGame"},{kind:"goto",page:4,t:14.5,l:36,w:28.7,h:20.2,toPage:10,label:"Jump to chapter 2009  2014"},{kind:"goto",page:4,t:14.5,l:67.9,w:28.7,h:20.2,toPage:40,label:"Jump to chapter 2015  2018"},{kind:"goto",page:4,t:37.6,l:4.1,w:28.7,h:20.2,toPage:62,label:"Jump to chapter 2019  2022"},{kind:"goto",page:4,t:37.6,l:36,w:28.7,h:20.2,toPage:85,label:"Jump to chapter 2023  2025"},{kind:"goto",page:4,t:37.6,l:67.9,w:28.7,h:20.2,toPage:103,label:"Jump to chapter Feature Evolution"},{kind:"goto",page:4,t:60.7,l:4.1,w:28.7,h:20.2,toPage:120,label:"Jump to chapter Interviews"},{kind:"goto",page:4,t:60.7,l:36,w:28.7,h:20.2,toPage:180,label:"Jump to chapter Awards & Easter Eggs"},{kind:"goto",page:4,t:60.7,l:67.9,w:28.7,h:20.2,toPage:186,label:"Jump to chapter Epilogue"}]},iq=()=>{const t="sf-history-book",[e,s]=E.useState(1),r=E.useRef(null),i=E.useMemo(()=>{var m;return(m=rq[e])!=null?m:[]},[e]),a=E.useCallback(m=>{r.current=m},[]),l=E.useCallback(m=>{s(m+1)},[]),d=E.useCallback(m=>{const g=r.current;if(g)try{g.turnToPage(Math.max(0,m-1))}catch(v){}},[]),u=E.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipPrev()},[]),h=E.useCallback(()=>{var m;return(m=r.current)==null?void 0:m.flipNext()},[]);return n.jsx(Pt,{title:"SF History Book",children:n.jsxs("div",{className:wo.pageWrap,children:[n.jsx("div",{className:wo.infoLine,children:"Blttern: Ecke ziehen, Rnder klicken, oder  / . Kein Sound."}),n.jsxs("div",{className:wo.viewerHost,children:[n.jsx(nq,{slug:t,initialPage:1,onReady:a,onPageChange:l,noSound:!0}),n.jsxs("div",{className:wo.overlay,"aria-hidden":!0,children:[n.jsx("div",{className:wo.dragZoneLeft,onClick:u}),n.jsx("div",{className:wo.dragZoneRight,onClick:h}),i.map((m,g)=>{const v={"--t":`${m.t}%`,"--l":`${m.l}%`,"--w":`${m.w}%`,"--h":`${m.h}%`};return m.kind==="goto"?n.jsx("button",{className:wo.inbookLink,style:v,"aria-label":m.label,onClick:()=>d(m.toPage)},g):n.jsx("a",{className:wo.inbookLink,style:v,"aria-label":m.label,href:m.href,target:"_blank",rel:"noopener noreferrer"},g)})]})]})]})})},aq="_root_zvspc_1",oq="_hero_zvspc_15",lq="_eyebrow_zvspc_47",cq="_heading_zvspc_63",dq="_lead_zvspc_77",uq="_freshnessHint_zvspc_91",hq="_hintLabel_zvspc_105",mq="_hintText_zvspc_121",pq="_grid_zvspc_135",fq="_card_zvspc_147",gq="_cardTitle_zvspc_163",xq="_paragraph_zvspc_177",yq="_list_zvspc_191",vq="_listItem_zvspc_207",fr={root:aq,hero:oq,eyebrow:lq,heading:cq,lead:dq,freshnessHint:uq,hintLabel:hq,hintText:mq,grid:pq,card:fq,cardTitle:gq,paragraph:xq,list:yq,listItem:vq},bq=()=>{const{t}=qo(),e=t("help.dataFreshness.body").split(`

`),s=[{key:"intro",title:t("help.sections.intro.title"),paragraphs:[t("help.sections.intro.body1"),t("help.sections.intro.body2")]},{key:"actions",title:t("help.sections.actions.title"),bullets:[t("help.sections.actions.items.toplists"),t("help.sections.actions.items.profiles"),t("help.sections.actions.items.guides"),t("help.sections.actions.items.tools")]},{key:"freshness",title:t("help.dataFreshness.title"),paragraphs:e},{key:"login",title:t("help.sections.login.title"),paragraphs:[t("help.sections.login.body1"),t("help.sections.login.body2"),t("help.sections.login.body3"),t("help.sections.login.body4")]},{key:"legal",title:t("help.sections.legal.title"),paragraphs:[t("help.sections.legal.body1"),t("help.sections.legal.body2"),t("help.sections.legal.body3")],bullets:[t("help.sections.legal.items.tos"),t("help.sections.legal.items.privacy"),t("help.sections.legal.items.imprint")]}];return n.jsx(Pt,{title:t("help.title"),subtitle:t("help.subtitle"),centerFramed:!0,padded:!0,children:n.jsxs("div",{className:fr.root,children:[n.jsxs("section",{className:fr.hero,children:[n.jsxs("div",{children:[n.jsx("p",{className:fr.eyebrow,children:t("help.hero.eyebrow")}),n.jsx("h1",{className:fr.heading,children:t("help.hero.heading")}),n.jsx("p",{className:fr.lead,children:t("help.hero.lead")})]}),n.jsxs("div",{className:fr.freshnessHint,children:[n.jsx("div",{className:fr.hintLabel,children:t("help.hero.freshnessLabel")}),n.jsx("p",{className:fr.hintText,children:t("help.hero.freshnessBody")})]})]}),n.jsx("div",{className:fr.grid,children:s.map(r=>{var i;return n.jsxs("section",{className:fr.card,children:[n.jsx("h2",{className:fr.cardTitle,children:r.title}),(i=r.paragraphs)==null?void 0:i.map((a,l)=>n.jsx("p",{className:fr.paragraph,children:a},`${r.key}-p-${l}`)),r.bullets&&n.jsx("ul",{className:fr.list,children:r.bullets.map(a=>n.jsx("li",{className:fr.listItem,children:a},`${r.key}-${a}`))})]},r.key)})})]})})},qE=[{id:"eu1",label:"EU 1",region:"EU",active:!0},{id:"eu2",label:"EU 2",region:"EU",active:!0},{id:"us1",label:"US 1",region:"NA",active:!0}];Object.fromEntries(qE.map(t=>[t.id,t]));const KE="TL_FILTERS_V2",br={servers:[],classes:[],days:"all",sortBy:"level",favoritesOnly:!1,activeOnly:!1,searchText:"",quickFav:!1,quickActive:!1,filterMode:"hud",listView:"table",bottomFilterOpen:!1,serverSheetOpen:!1};function _q(){var t;try{const e=localStorage.getItem(KE);if(!e)return br;const s=(t=JSON.parse(e))!=null?t:{},r=["all",3,7,14,30,60,90].includes(s.days)?s.days:br.days,i=["cards","buttons","table"].includes(s.listView)?s.listView:br.listView,a=["hud","sheet"].includes(s.filterMode)?s.filterMode:br.filterMode,l=typeof s.quickFav=="boolean"?s.quickFav:!!s.favoritesOnly,d=typeof s.quickActive=="boolean"?s.quickActive:!!s.activeOnly;return{...br,...s,servers:Array.isArray(s.servers)?s.servers:[],classes:Array.isArray(s.classes)?s.classes:[],favoritesOnly:typeof s.favoritesOnly=="boolean"?s.favoritesOnly:l,activeOnly:typeof s.activeOnly=="boolean"?s.activeOnly:d,quickFav:l,quickActive:d,days:r,listView:i,filterMode:a,bottomFilterOpen:!!s.bottomFilterOpen,serverSheetOpen:!!s.serverSheetOpen,sortBy:typeof s.sortBy=="string"?s.sortBy:br.sortBy,searchText:typeof s.searchText=="string"?s.searchText:br.searchText}}catch(e){return br}}function wq(t){try{localStorage.setItem(KE,JSON.stringify(t))}catch(e){}}const QE=E.createContext(null),pN=t=>Array.from(new Set(t));function Rp(t,e){return typeof t=="function"?t(e):t}function jq({children:t}){const[e,s]=E.useState(()=>_q());E.useEffect(()=>{wq(e)},[e]);const r=_=>s(A=>({...A,servers:pN(Rp(_,A.servers))})),i=_=>s(A=>{const F=new Set(A.servers);return F.has(_)?F.delete(_):F.add(_),{...A,servers:Array.from(F)}}),a=()=>s(_=>({..._,servers:[]})),l=_=>s(A=>({...A,classes:pN(Rp(_,A.classes))})),d=_=>s(A=>{const F=new Set(A.classes);return F.has(_)?F.delete(_):F.add(_),{...A,classes:Array.from(F)}}),u=()=>s(_=>({..._,classes:[]})),h=_=>s(A=>({...A,days:_})),m=_=>h(_),g=_=>s(A=>({...A,sortBy:_||"level"})),v=_=>s(A=>({...A,favoritesOnly:!!_,quickFav:!!_})),b=_=>s(A=>({...A,activeOnly:!!_,quickActive:!!_})),N=_=>s(A=>({...A,searchText:_})),S=_=>s(A=>{const F=Rp(_,A.quickFav);return{...A,quickFav:F,favoritesOnly:F}}),C=_=>s(A=>{const F=Rp(_,A.quickActive);return{...A,quickActive:F,activeOnly:F}}),R=_=>s(A=>({...A,filterMode:_})),M=_=>s(A=>({...A,listView:_})),T=_=>s(A=>({...A,bottomFilterOpen:!!_})),y=_=>s(A=>({...A,serverSheetOpen:!!_})),w=()=>s(br),D=()=>w(),k=E.useMemo(()=>({servers:e.servers,classes:e.classes,days:e.days,range:e.days,sortBy:e.sortBy,favoritesOnly:e.favoritesOnly,activeOnly:e.activeOnly,searchText:e.searchText,quickFav:e.quickFav,quickActive:e.quickActive,filterMode:e.filterMode,listView:e.listView,bottomFilterOpen:e.bottomFilterOpen,serverSheetOpen:e.serverSheetOpen,setServers:r,toggleServer:i,clearServers:a,setClasses:l,toggleClass:d,clearClasses:u,setDays:h,setRange:m,setSortBy:g,setFavoritesOnly:v,setActiveOnly:b,setSearchText:N,setQuickFav:S,setQuickActive:C,setFilterMode:R,setListView:M,setBottomFilterOpen:T,setServerSheetOpen:y,resetFilters:w,resetAll:D}),[e]);return n.jsx(QE.Provider,{value:k,children:t})}function Zh(){const t=E.useContext(QE);return t||{...br,range:br.days,searchText:br.searchText,quickFav:br.quickFav,quickActive:br.quickActive,setServers:()=>{},toggleServer:()=>{},clearServers:()=>{},setClasses:()=>{},toggleClass:()=>{},clearClasses:()=>{},setDays:()=>{},setRange:()=>{},setSortBy:()=>{},setFavoritesOnly:()=>{},setActiveOnly:()=>{},setSearchText:()=>{},setQuickFav:()=>{},setQuickActive:()=>{},setFilterMode:()=>{},setListView:()=>{},setBottomFilterOpen:()=>{},setServerSheetOpen:()=>{},resetFilters:()=>{},resetAll:()=>{}}}const Sq="_hudWrap_107o7_9",Nq="_hudBtn_107o7_11",kq="_hudSubBtn_107o7_15",Cq="_iconRow_107o7_19",Tq="_segmented_107o7_21",Eq="_sortLabel_107o7_27",Aq="_sortSelect_107o7_29",Iq="_chip_107o7_31",Pq="_isActive_107o7_33",gr={hudWrap:Sq,hudBtn:Nq,hudSubBtn:kq,iconRow:Cq,segmented:Tq,sortLabel:Eq,sortSelect:Aq,chip:Iq,isActive:Pq};function Rq({active:t=!1,title:e,iconUrl:s,fallback:r="",size:i=40,onClick:a}){const l=Math.round(i*.7),d=J.useMemo(()=>{const R=[],M=e5(s,l*2,l*2,"contain");M&&R.push(M);const T=sr(s,l*2);return T&&T!==M&&R.push(T),!R.length&&s&&R.push(s),R},[s,l]),[u,h]=J.useState(0),[m,g]=J.useState(!1),[v,b]=J.useState(!1);J.useEffect(()=>h(0),[d]);const N=d[u]||"",S={width:i,height:i,padding:0,border:"1px solid #2B4C73",borderRadius:12,background:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",outline:"none",transition:"transform 120ms ease, box-shadow 120ms ease, background 120ms ease",boxShadow:v||t?"inset 0 0 18px rgba(92,139,198,.25)":"none"};m&&(S.background="rgba(255,255,255,.04)"),t&&(S.outline="2px solid #5C8BC6");const C={display:"block",width:l,height:l,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(92,139,198,.25))",pointerEvents:"none"};return n.jsx("button",{type:"button",title:e,"aria-pressed":!!t,onClick:a,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onFocus:()=>b(!0),onBlur:()=>b(!1),style:S,children:N?n.jsx("img",{src:N,alt:e||"class",width:l,height:l,loading:"lazy",style:C,onError:()=>{h(R=>R+1<d.length?R+1:R)}}):n.jsx("span",{style:{fontSize:Math.round(i*.6),lineHeight:1},children:r})})}const Lq=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"90d",value:90},{label:"all",value:"all"}];function Dq(){const{servers:t,classes:e,setClasses:s,range:r,setRange:i,sortBy:a,setSortBy:l,quickFav:d,setQuickFav:u,quickActive:h,setQuickActive:m,filterMode:g,setBottomFilterOpen:v,serverSheetOpen:b,setServerSheetOpen:N,resetAll:S}=Zh();return n.jsxs("div",{className:gr.hudWrap,children:[n.jsxs("button",{type:"button",className:gr.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),N(!0)},"aria-haspopup":"dialog","aria-expanded":b||!1,"aria-label":`Select servers${t.length?` (${t.length} selected)`:""}`,title:"Open Server Picker",children:[" Servers ",t.length?`(${t.length})`:""]}),n.jsxs("div",{className:gr.iconRow,children:[Zs.map(C=>n.jsx(Rq,{active:e.includes(C.key),title:C.label,iconUrl:C.iconUrl,fallback:C.fallback,size:40,onClick:()=>s(R=>R.includes(C.key)?R.filter(M=>M!==C.key):[...R,C.key])},C.key)),n.jsx("button",{type:"button",className:gr.hudSubBtn,onClick:()=>s(Zs.map(C=>C.key)),children:"All"}),n.jsx("button",{type:"button",className:gr.hudSubBtn,onClick:()=>s([]),children:"None"})]}),n.jsx("div",{className:gr.segmented,role:"group","aria-label":"Range",children:Lq.map(C=>n.jsx("button",{type:"button","aria-pressed":r===C.value,onClick:()=>i(C.value),children:C.label},C.label))}),n.jsx("label",{className:gr.sortLabel,htmlFor:"toplists-sort",children:"Sort"}),n.jsxs("select",{id:"toplists-sort",name:"toplists-sort",value:a,onChange:C=>l(C.target.value),className:gr.sortSelect,"aria-label":"Sort",children:[n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"lastScan",children:"Last scan"})]}),n.jsx("button",{type:"button",className:`${gr.chip} ${d?gr.isActive:""}`,onClick:()=>u(C=>!C),children:" Favorites"}),n.jsx("button",{type:"button",className:`${gr.chip} ${h?gr.isActive:""}`,onClick:()=>m(C=>!C),children:" Active"}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{type:"button",className:gr.hudSubBtn,onClick:S,children:"Reset"}),g==="sheet"&&n.jsx("button",{type:"button",className:gr.hudBtn,onClick:C=>{C.preventDefault(),C.stopPropagation(),v(!0)},title:"Open Filters",children:"Open Filters"})]})]})}const Mq=["EU","US","INT","Fusion"],En={tile:"#1A2F4A",line:"#2B4C73",chip:"#14273E",text:"#F5F9FF",text2:"#B0C4D9",backdrop:"rgba(0,0,0,.5)",input:"#0F2034",accent:"#5C8BC6"};function Fq({open:t,onClose:e,mode:s="modal",serversByRegion:r,selected:i,onToggle:a,onSelectAllInRegion:l,onClearAll:d}){const[u,h]=E.useState(""),m=E.useRef(null);E.useEffect(()=>{if(!t)return;const b=N=>{N.key==="Escape"&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,e]),E.useEffect(()=>{if(t&&m.current){const b=m.current.querySelector("#sheet-serversearch");b==null||b.focus()}},[t]);const g=Mq,v=b=>{const N=u.trim().toLowerCase();return N?b.toLowerCase().includes(N):!0};return t?n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"server-dialog-title",style:Bq,onClick:b=>{b.target===b.currentTarget&&e()},children:n.jsxs("div",{ref:m,style:s==="modal"?XE:$q,className:"sf-server-sheet",children:[n.jsxs("div",{style:Oq,children:[n.jsx("h2",{id:"server-dialog-title",style:Vq,children:"Select servers"}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{type:"button",onClick:d,style:fN,children:"Clear"}),n.jsx("button",{type:"button",onClick:e,style:Kq,children:"Done"})]})]}),n.jsxs("div",{style:{display:"grid",gap:8,marginBottom:12},children:[n.jsx("label",{htmlFor:"sheet-serversearch",className:"sr-only",children:"Search servers"}),n.jsx("input",{id:"sheet-serversearch",name:"sheet-serversearch",type:"text",placeholder:"Search servers...",value:u,onChange:b=>h(b.target.value),"aria-label":"Search servers",autoComplete:"off",style:zq})]}),n.jsx("div",{style:{display:"grid",gap:16,maxHeight:"60vh",overflow:"auto"},children:g.map(b=>{const N=(r[b]||[]).filter(v);return n.jsxs("section",{"aria-labelledby":`region-${b}`,children:[n.jsxs("div",{style:Hq,children:[n.jsx("h3",{id:`region-${b}`,style:Uq,children:b}),n.jsx("div",{style:{display:"flex",gap:8},children:n.jsx("button",{type:"button",style:fN,onClick:()=>{l?l(b):N.filter(C=>!i.includes(C)).forEach(a)},children:"Select all"})})]}),n.jsxs("div",{style:Gq,children:[N.map(S=>{const C=i.includes(S);return n.jsx("button",{type:"button",onClick:()=>a(S),"aria-pressed":C,title:S,style:{...Wq,...C?qq:null},children:S},S)}),N.length===0&&n.jsx("div",{style:{color:En.text2,fontSize:13,padding:"4px 2px"},children:"No servers found"})]})]},b)})})]})}):null}const Bq={position:"fixed",inset:0,background:En.backdrop,zIndex:50,display:"grid",placeItems:"center",padding:16},XE={width:"min(900px, 100%)",background:En.tile,border:`1px solid ${En.line}`,borderRadius:16,boxShadow:"0 10px 40px rgba(0,0,0,.4)",padding:16,color:En.text},$q={...XE,width:"min(900px, 100%)",marginTop:"auto",borderBottomLeftRadius:0,borderBottomRightRadius:0},Oq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},Vq={fontSize:18,margin:0},Uq={fontSize:14,margin:0,color:En.text2},zq={width:"100%",background:En.input,color:En.text,border:`1px solid ${En.line}`,borderRadius:12,padding:"10px 12px"},Hq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},Gq={display:"flex",flexWrap:"wrap",gap:8},Wq={background:En.chip,border:`1px solid ${En.line}`,padding:"6px 10px",borderRadius:999,color:En.text},qq={outline:`2px solid ${En.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},Kq={background:"#25456B",color:En.text,border:`1px solid ${En.accent}`,borderRadius:10,padding:"8px 12px"},fN={background:"transparent",color:En.text,border:`1px solid ${En.line}`,borderRadius:10,padding:"8px 12px"},Qq=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=Qq,document.head.appendChild(e)}}const Cn={tile:"#1A2F4A",line:"#2B4C73",text:"#F5F9FF",text2:"#B0C4D9",input:"#0F2034",accent:"#5C8BC6",backdrop:"rgba(0,0,0,.5)"};function Xq({open:t,onClose:e}){const{searchText:s,setSearchText:r,range:i,setRange:a,sortBy:l,setSortBy:d,quickFav:u,setQuickFav:h,quickActive:m,setQuickActive:g}=Zh(),v=E.useRef(null);if(E.useEffect(()=>{if(!t)return;const N=S=>{S.key==="Escape"&&e()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t,e]),E.useEffect(()=>{if(t&&v.current){const N=v.current.querySelector("#sheet-search");N==null||N.focus()}},[t]),!t)return null;const b=[{label:"3d",value:3},{label:"7d",value:7},{label:"14d",value:14},{label:"30d",value:30},{label:"60d",value:60},{label:"90d",value:90},{label:"all",value:"all"}];return n.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"filters-title",style:Yq,onClick:N=>{N.target===N.currentTarget&&e()},children:n.jsxs("div",{ref:v,style:Jq,children:[n.jsxs("div",{style:Zq,children:[n.jsx("h2",{id:"filters-title",style:{fontSize:16,margin:0,color:Cn.text},children:"Filters"}),n.jsx("button",{type:"button",onClick:e,style:tK,children:"Done"})]}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsx("label",{htmlFor:"sheet-search",className:"sr-only",children:"Search"}),n.jsx("input",{id:"sheet-search",name:"sheet-search",type:"text",placeholder:"Search",value:s,onChange:N=>r(N.target.value),"aria-label":"Search",autoComplete:"off",style:YE})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("span",{style:{color:Cn.text2,fontSize:12},children:"Range"}),n.jsx("div",{role:"group","aria-label":"Range",style:{display:"flex",flexWrap:"wrap",gap:8},children:b.map(N=>n.jsx("button",{type:"button","aria-pressed":i===N.value,onClick:()=>a(N.value),style:{...iv,...i===N.value?av:null},children:N.label},N.label))})]}),n.jsxs("div",{style:{display:"grid",gap:6,marginTop:12},children:[n.jsx("label",{htmlFor:"sheet-toplists-sort",style:{color:Cn.text2,fontSize:12},children:"Sort"}),n.jsxs("select",{id:"sheet-toplists-sort",name:"sheet-toplists-sort",value:l,onChange:N=>d(N.target.value),"aria-label":"Sort",autoComplete:"off",style:eK,children:[n.jsx("option",{value:"sum",children:"Base Sum"}),n.jsx("option",{value:"main",children:"Main Base Stat"}),n.jsx("option",{value:"constitution",children:"Constitution"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"delta",children:" Rank"}),n.jsx("option",{value:"lastActivity",disabled:!0,children:"Last activity (disabled)"})]})]}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[n.jsx("button",{type:"button",onClick:()=>h(N=>!N),"aria-pressed":u,style:{...iv,...u?av:null},children:" Favorites"}),n.jsx("button",{type:"button",onClick:()=>g(N=>!N),"aria-pressed":m,style:{...iv,...m?av:null},children:" Active"})]})]})})}const Yq={position:"fixed",inset:0,background:Cn.backdrop,zIndex:60,display:"grid",alignItems:"end"},Jq={background:Cn.tile,borderTop:`1px solid ${Cn.line}`,borderLeft:`1px solid ${Cn.line}`,borderRight:`1px solid ${Cn.line}`,borderTopLeftRadius:16,borderTopRightRadius:16,padding:16,color:Cn.text,maxHeight:"80vh",overflow:"auto"},Zq={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},YE={width:"100%",background:Cn.input,color:Cn.text,border:`1px solid ${Cn.line}`,borderRadius:12,padding:"10px 12px"},eK={...YE,appearance:"none"},iv={background:"#14273E",border:`1px solid ${Cn.line}`,padding:"6px 10px",borderRadius:999,color:Cn.text},av={outline:`2px solid ${Cn.accent}`,boxShadow:"inset 0 0 16px rgba(92,139,198,.25)"},tK={background:"#25456B",color:Cn.text,border:`1px solid ${Cn.accent}`,borderRadius:10,padding:"8px 12px"},sK=`
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
`.trim();if(typeof document!="undefined"){const t="sf-sr-only-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.textContent=sK,document.head.appendChild(e)}}function nK(){var i;const t=Zh(),e=(i=t==null?void 0:t.listView)!=null?i:"table",s=Array.isArray(t==null?void 0:t.list)?t.list:[],r=Array.isArray(t==null?void 0:t.filtered)?t.filtered:s;return e==="table"?null:n.jsxs("div",{style:{background:"#1A2F4A",border:"1px solid #2B4C73",borderRadius:16,padding:12},children:[n.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,color:"#B0C4D9",fontSize:13},children:n.jsxs("div",{children:["Showing ",r.length," / ",s.length]})}),e==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(1,minmax(0,1fr))",gap:12},children:r.slice(0,36).map(a=>{var l,d,u,h,m,g,v;return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:14,padding:12},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[n.jsx("div",{style:{fontWeight:600,color:"#F5F9FF"},children:(l=a.name)!=null?l:""}),n.jsx("div",{style:{color:"#B0C4D9",fontSize:12},children:(d=a.server)!=null?d:""})]}),n.jsxs("div",{style:{color:"#B0C4D9",fontSize:14,marginBottom:8},children:["Class: ",n.jsx("span",{style:{textTransform:"uppercase"},children:(u=a.class)!=null?u:""}),"  Lv ",(h=a.level)!=null?h:"","  Scrap ",(m=a.scrapbook)!=null?m:""]}),n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12},children:[n.jsx(ov,{children:a.active?"Active":"Idle"}),a.favorite&&n.jsx(ov,{children:" Fav"}),n.jsx(ov,{children:`Scan ${(g=a.lastScanDays)!=null?g:"?"}d`})]})]},(v=a.id)!=null?v:`${a.name}-${a.server}`)})}),e==="buttons"&&n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:r.slice(0,72).map(a=>{var l,d,u,h;return n.jsxs("button",{type:"button",style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:999,padding:"6px 10px",color:"#F5F9FF"},children:[a.favorite&&" ",(l=a.name)!=null?l:"",n.jsxs("span",{style:{marginLeft:8,fontSize:12,color:"#B0C4D9"},children:["(",(d=a.server)!=null?d:"","  Lv ",(u=a.level)!=null?u:"",")"]})]},(h=a.id)!=null?h:`${a.name}-${a.server}`)})})]})}function ov({children:t}){return n.jsx("span",{style:{background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",borderRadius:999,padding:"2px 8px",fontSize:11},children:t})}const Bb="stats_public",rK="toplists_players_v1";async function iK(){try{const t=await Os(Ot(it,Bb,"toplists_bundle_v1"));if(!t.exists())return{ok:!1,error:"not_found"};const s=(t.data()||{}).servers;let r=null;if(Array.isArray(s))r=s;else if(typeof s=="string")try{const a=JSON.parse(s);Array.isArray(a)?r=a:console.warn("[toplistsFirestore] Server bundle string is not an array after parse")}catch(a){console.warn("[toplistsFirestore] Failed to parse server bundle string",a)}if(!Array.isArray(r))return console.warn("[toplistsFirestore] Server bundle missing/invalid, falling back to static config"),{ok:!1,error:"decode_failed",detail:"servers missing or invalid"};const i=[];for(const a of r){if(typeof a!="string"){console.warn("[toplistsFirestore] Skipping non-string server entry",{entry:a});continue}const l=a.trim();l&&i.push(l)}return{ok:!0,servers:i}}catch(t){return console.error("[toplistsFirestore] Firestore error while loading toplist servers",t),{ok:!1,error:"firestore_error",detail:t==null?void 0:t.message}}}function T0(t){const e=a=>(a!=null?a:"").toString().trim().toLowerCase(),s=e(t.group)||"all",r=e(t.timeRange)||"all",i=e(t.sort)||"sum";return`${s}__${r}__${i}`}function aK(t,e){const s=t.toUpperCase(),r=e.toUpperCase();return r==="ALL"?`${s}_all_sum`:`${s}_${r}_sum`}async function oK(){try{const t=await Os(Ot(it,Bb,"toplists_meta_v1"));if(!t.exists())return null;const e=t.data();return!e||typeof e!="object"?null:e}catch(t){return console.error("[toplistsFirestore] meta decode failed",t),null}}const Mr=t=>{if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}if(t instanceof Date)return Number.isFinite(t.getTime())?t.getTime():null;if(t&&typeof t.toMillis=="function"){const e=t.toMillis();return Number.isFinite(e)?e:null}return null},ki=t=>typeof t=="string"?t:null,lK=t=>{if(!t||typeof t!="object")return null;const e=ki(t.server),s=ki(t.name),r=ki(t.class);return!e||!s||!r?null:{flag:ki(t.flag),deltaRank:Mr(t.deltaRank),server:e,name:s,class:r,level:Mr(t.level),guild:ki(t.guild),main:Mr(t.main),con:Mr(t.con),sum:Mr(t.sum),ratio:Mr(t.ratio),mine:Mr(t.mine),treasury:Mr(t.treasury),lastScan:ki(t.lastScan),deltaSum:Mr(t.deltaSum)}};async function gN(t){try{const e=await Os(Ot(it,Bb,rK,"lists",t));if(!e.exists())return{ok:!1,error:"not_found"};const s=e.data()||{},r=ki(s.entity)||"players",i=ki(s.group),a=ki(s.server),l=ki(s.metric),d=ki(s.timeRange),u=Mr(s.limit),h=Array.isArray(s.rows)?s.rows:null;if(r!=="players"||!i||!a||!l||!d||u==null||!h)return console.error("[toplistsFirestore] Decode failed",{entity:r,group:i,server:a,metric:l,timeRange:d,limit:u,hasRowsArray:Array.isArray(s.rows)}),{ok:!1,error:"decode_error",detail:"missing required toplist fields"};const m=[];for(const v of h){const b=lK(v);if(!b)return console.error("[toplistsFirestore] Row decode failed",v),{ok:!1,error:"decode_error",detail:"invalid row shape"};m.push(b)}return{ok:!0,list:{id:t,entity:"players",group:i,server:a,metric:l,timeRange:d,limit:u,updatedAt:Mr(s.updatedAt),nextUpdateAt:s.nextUpdateAt!==void 0?Mr(s.nextUpdateAt):void 0,ttlSec:s.ttlSec!==void 0?Mr(s.ttlSec):void 0,rows:m}}}catch(e){return console.error("[toplistsFirestore] Firestore error",e),{ok:!1,error:"firestore_error",detail:e==null?void 0:e.message}}}async function cK(t){const e=T0(t),s=await gN(e);if(s.ok&&s.list.rows&&s.list.rows.length>0||(t.group||"").toLowerCase()==="all")return s;const i={...t,group:"all"},a=T0(i),l=await gN(a);return l.ok?{ok:!0,list:{...l.list,group:t.group}}:s}const dK={EU:[],US:[],INT:[],Fusion:[]},uK=["EU","US","INT","Fusion"],hK=t=>{const e=t.toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("AM")||e.startsWith("US")||e.startsWith("NA")?"US":e.startsWith("F")?"Fusion":"INT"};function JE(t){const e={EU:new Set,US:new Set,INT:new Set,Fusion:new Set};t.forEach(r=>{if(typeof r!="string")return;const i=hK(r);e[i].add(r)});const s={...dK};return uK.forEach(r=>{s[r]=Array.from(e[r]).sort((i,a)=>i.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}))}),s}const mK="EU",lv=JE(qE.map(t=>t.id).filter(t=>typeof t=="string"&&!!t)),ZE=E.createContext(null),xN=(t,e)=>t.length===e.length&&t.every((s,r)=>s===e[r]);function pK(t,e){return t.group===e.group&&t.timeRange===e.timeRange&&xN(t.servers,e.servers)&&xN(t.classes,e.classes)}function fK(t,e){return t.key===e.key&&t.dir===e.dir}function gK({children:t}){const[e,s]=E.useState({group:mK,servers:[],classes:[],timeRange:"all"}),[r,i]=E.useState({key:"level",dir:"desc"}),[a,l]=E.useState({rows:[],loading:!1,error:null,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:null}),d=E.useRef(new Map),[u,h]=E.useState(null),[m,g]=E.useState(null),[v,b]=E.useState(lv),N=E.useCallback(R=>{s(M=>{const T=typeof R=="function"?R(M):{...M,...R};return pK(M,T)?M:T})},[]),S=E.useCallback(R=>{i(M=>{const T=typeof R=="function"?R(M):R;return fK(M,T)?M:T})},[]);E.useEffect(()=>{let R=!1;return(async()=>{const M=await iK();if(!R){if(M.ok){const T=JE(M.servers);if(Object.values(T).some(w=>w.length>0)){b(T);return}}b(lv)}})().catch(M=>{R||(console.error("[ToplistsProvider] unexpected error while loading server list",M),b(lv))}),()=>{R=!0}},[]),E.useEffect(()=>{let R=!1;return(async()=>{const M=await oK();R||h(M)})().catch(M=>{R||console.error("[ToplistsProvider] unexpected meta error",M)}),()=>{R=!0}},[]),E.useEffect(()=>{var k,_,A;let R=!1;const M="sum",T=T0({group:e.group,timeRange:e.timeRange,sort:M}),y=d.current.get(T),w=(y==null?void 0:y.list.ttlSec)!=null?y.list.ttlSec*1e3:null,D=y?w==null||Date.now()-y.cachedAt<w:!1;return y&&D?(l({rows:y.list.rows,loading:!1,error:null,lastUpdatedAt:(k=y.list.updatedAt)!=null?k:null,nextUpdateAt:(_=y.list.nextUpdateAt)!=null?_:null,ttlSec:(A=y.list.ttlSec)!=null?A:null,listId:T}),()=>{R=!0}):(l(F=>({...F,listId:T,loading:!0,error:null})),(async()=>{var $,W,H;const F=await cK({group:e.group,timeRange:e.timeRange,sort:M});if(R)return;if(F.ok){d.current.set(T,{list:F.list,cachedAt:Date.now()}),l({rows:F.list.rows,loading:!1,error:null,lastUpdatedAt:($=F.list.updatedAt)!=null?$:null,nextUpdateAt:(W=F.list.nextUpdateAt)!=null?W:null,ttlSec:(H=F.list.ttlSec)!=null?H:null,listId:T});return}const P=F.detail?` (${F.detail})`:"";let B="Firestore Fehler";F.error==="not_found"?B="Topliste nicht verfuegbar":F.error==="decode_error"&&(B="Fehler beim Lesen der Daten"),l({rows:[],loading:!1,error:`${B}${P}`,lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:T})})().catch(F=>{R||(console.error("[ToplistsProvider] unexpected error",F),l({rows:[],loading:!1,error:"Unerwarteter Fehler beim Laden",lastUpdatedAt:null,nextUpdateAt:null,ttlSec:null,listId:T}))}),()=>{R=!0})},[e.group,e.timeRange]),E.useEffect(()=>{var H,q;if(!u){g(null);return}const R=e.servers&&e.servers.length===1?e.servers[0]:"all",M=aK(e.group||"ALL",R||"all"),T=(H=u.thresholds)==null?void 0:H.players,y=typeof(T==null?void 0:T.minChanges)=="number"?T.minChanges:100,w=typeof(T==null?void 0:T.maxAgeDays)=="number"?T.maxAgeDays:7,D=(q=u.scopeChange)==null?void 0:q[M],k=typeof(D==null?void 0:D.lastRebuildAtMs)=="number"?D.lastRebuildAtMs:null,_=typeof(D==null?void 0:D.lastChangeAtMs)=="number"?D.lastChangeAtMs:null,A=typeof(D==null?void 0:D.changedSinceLastRebuild)=="number"?D.changedSinceLastRebuild:0,F=k?new Date(k):null,P=_?new Date(_):null,B=k!=null?(Date.now()-k)/(1e3*60*60*24):1/0,$=y>0?Math.min(1,Math.max(0,A/y)):0,W=!!F&&(w==null||B<=w)&&(y==null||A<y);g({scopeId:M,lastRebuildAt:F,lastChangeAt:P,changesSinceLastRebuild:A,minChanges:y!=null?y:null,maxAgeDays:w!=null?w:null,progress:$,isFresh:W})},[u,e.group,e.servers]);const C=E.useMemo(()=>({player:a,playerRows:a.rows,playerLoading:a.loading,playerError:a.error,playerLastUpdatedAt:a.lastUpdatedAt,playerNextUpdateAt:a.nextUpdateAt,playerScopeStatus:m,serverGroups:v,filters:e,sort:r,setFilters:N,setSort:S}),[a,e,r,v,N,S,m]);return n.jsx(ZE.Provider,{value:C,children:t})}function eA(){const t=E.useContext(ZE);if(!t)throw new Error("useToplistsData() must be used inside <ToplistsProvider>.");return t}function xK(t){switch(t){case"level":return{key:"level",dir:"desc"};case"main":return{key:"main",dir:"desc"};case"constitution":return{key:"con",dir:"desc"};case"sum":return{key:"sum",dir:"desc"};case"lastActivity":case"lastScan":return{key:"lastScan",dir:"desc"};case"name":return{key:"name",dir:"asc"};default:return{key:"level",dir:"desc"}}}function yK(t){const e=(t[0]||"").toUpperCase();return e.startsWith("EU")?"EU":e.startsWith("US")||e.startsWith("NA")||e.startsWith("AM")?"US":e.startsWith("F")?"FUSION":e?"INT":"EU"}function vK(){return n.jsx(gK,{children:n.jsx(bK,{})})}function bK(){const t=Zh(),{filterMode:e,setFilterMode:s,listView:r,setListView:i,bottomFilterOpen:a,setBottomFilterOpen:l,serverSheetOpen:d,setServerSheetOpen:u,servers:h,setServers:m,classes:g,range:v,sortBy:b}=t,{serverGroups:N}=eA();return n.jsxs(n.Fragment,{children:[n.jsxs(Pt,{mode:"card",title:"Top Lists",actions:n.jsx(wK,{}),leftWidth:0,rightWidth:0,subheader:e==="hud"?n.jsx(Dq,{}):null,centerFramed:!1,stickyTopbar:!0,stickySubheader:!0,topbarHeight:56,children:[n.jsx(nK,{}),r==="table"&&n.jsx(_K,{servers:h!=null?h:[],classes:g!=null?g:[],range:v!=null?v:"all",sortKey:b!=null?b:"level"})]}),n.jsx(Fq,{mode:"modal",open:d,onClose:()=>u(!1),serversByRegion:N,selected:h,onToggle:S=>m(C=>C.includes(S)?C.filter(R=>R!==S):[...C,S]),onSelectAllInRegion:S=>{var C;return m((C=N[S])!=null?C:[])},onClearAll:()=>m([])}),n.jsx(Xq,{open:e==="sheet"&&a,onClose:()=>l(!1)})]})}function _K({servers:t,classes:e,range:s,sortKey:r}){var C,R,M;const{playerRows:i,playerLoading:a,playerError:l,playerLastUpdatedAt:d,playerScopeStatus:u,setFilters:h,setSort:m}=eA();E.useEffect(()=>{const T=s==="all"?"all":s===60?"30d":`${s}d`,y=yK(t);h({servers:t,classes:e,timeRange:T,group:y})},[t,e,s,h]),E.useEffect(()=>{const T=xK(r);m(T)},[r,m]);const g=T=>T==null?"":new Intl.NumberFormat("en").format(T),v=T=>{if(T==null)return"";const y=g(Math.abs(T));return y?T>0?`+${y}`:`-${y}`:String(T)},b=T=>{if(T==null)return null;const y=T<1e12?T*1e3:T;return new Date(y).toLocaleString()},N=T=>T?T.toLocaleString():"",S=i||[];return n.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[n.jsxs("div",{style:{opacity:.8,fontSize:12,display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{children:[a?"Loading...":l?"Error":"Ready"," - ",S.length," rows"]}),n.jsx("div",{children:d?`Updated: ${b(d)}`:null})]}),u&&n.jsxs("div",{style:{opacity:.75,fontSize:12,display:"flex",flexWrap:"wrap",gap:8},children:[n.jsxs("span",{children:["Scope ",u.scopeId,"  ",u.changesSinceLastRebuild,"/",(C=u.minChanges)!=null?C:"?"," changes since last rebuild"]}),n.jsxs("span",{children:["Auto rebuild at ",(R=u.minChanges)!=null?R:"?"," changes or after ",(M=u.maxAgeDays)!=null?M:"?"," days"]}),n.jsxs("span",{children:["Last rebuild: ",N(u.lastRebuildAt)]})]}),l&&n.jsxs("div",{style:{border:"1px solid #2C4A73",borderRadius:8,padding:12},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Error"}),n.jsx("div",{style:{wordBreak:"break-all"},children:l}),n.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:8},children:"Retry"})]}),n.jsx("div",{style:{overflowX:"auto"},children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{padding:"8px 6px"},children:"#"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Flag"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Delta Rank"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Server"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Name"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Class"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Level"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Guild"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Main"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Con"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Sum"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Ratio"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Mine"}),n.jsx("th",{style:{padding:"8px 6px",textAlign:"right"},children:"Treasury"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Last Scan"}),n.jsx("th",{style:{padding:"8px 6px"},children:"Stats+"})]})}),n.jsxs("tbody",{children:[S.map((T,y)=>{var w,D,k,_;return n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("td",{style:{padding:"8px 6px"},children:y+1}),n.jsx("td",{style:{padding:"8px 6px"},children:(w=T.flag)!=null?w:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(T.deltaRank)}),n.jsx("td",{style:{padding:"8px 6px"},children:T.server}),n.jsx("td",{style:{padding:"8px 6px"},children:T.name}),n.jsx("td",{style:{padding:"8px 6px"},children:T.class}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.level)}),n.jsx("td",{style:{padding:"8px 6px"},children:(D=T.guild)!=null?D:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.main)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.con)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.sum)}),n.jsx("td",{style:{padding:"8px 6px"},children:(k=T.ratio)!=null?k:""}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.mine)}),n.jsx("td",{style:{padding:"8px 6px",textAlign:"right"},children:g(T.treasury)}),n.jsx("td",{style:{padding:"8px 6px"},children:(_=T.lastScan)!=null?_:""}),n.jsx("td",{style:{padding:"8px 6px"},children:v(T.deltaSum)})]},`${T.name}-${T.server}-${y}`)}),a&&S.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"Loading..."})}),!a&&!l&&S.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:16,style:{padding:12},children:"No results"})})]})]})})]})}function wK(){const{filterMode:t,setFilterMode:e,listView:s,setListView:r,setBottomFilterOpen:i,setServerSheetOpen:a}=Zh();return n.jsxs("div",{className:"flex items-center justify-end gap-2 flex-wrap",children:[n.jsxs("nav",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},"aria-label":"Toplist Tabs",children:[n.jsx(yN,{to:"/toplists/players",label:"Players"}),n.jsx(yN,{to:"/toplists/guilds",label:"Guilds"})]}),n.jsx("span",{className:"hidden md:inline-block w-px h-6",style:{background:"#2B4C73"}}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"Filter UI",children:[n.jsx("button",{"aria-pressed":t==="hud",onClick:()=>e("hud"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="hud"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"HUD"}),n.jsx("button",{"aria-pressed":t==="sheet",onClick:()=>e("sheet"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:t==="sheet"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Bottom Sheet"}),n.jsx("button",{onClick:()=>i(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},children:"Open"})]}),n.jsx("button",{onClick:()=>a(!0),className:"rounded-lg px-3 py-1.5 text-sm text-white",style:{border:"1px solid #2B4C73",background:"#14273E"},title:"Open Server Picker",children:"Servers"}),n.jsxs("div",{className:"inline-flex gap-1 rounded-xl border p-1",style:{borderColor:"#2B4C73",background:"#14273E"},role:"group","aria-label":"List View",children:[n.jsx("button",{"aria-pressed":s==="cards",onClick:()=>r("cards"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="cards"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Cards"}),n.jsx("button",{"aria-pressed":s==="buttons",onClick:()=>r("buttons"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="buttons"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Buttons"}),n.jsx("button",{"aria-pressed":s==="table",onClick:()=>r("table"),className:"rounded-lg px-3 py-1.5 text-sm text-white border border-transparent",style:s==="table"?{background:"#25456B",borderColor:"#5C8BC6"}:{},children:"Table"})]})]})}function yN({to:t,label:e}){return n.jsx(Ns,{to:t,className:({isActive:s})=>["rounded-lg px-3 py-1.5 text-sm text-white border",s?"bg-[#25456B] border-[#5C8BC6]":"border-transparent"].join(" "),children:e})}const jK=[{rank:1,name:"Shadow Blades",server:"EU1",avgLevel:480,delta24h:1},{rank:2,name:"Arcane Legion",server:"EU2",avgLevel:472,delta24h:0}];function SK(){return n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{opacity:.8,fontSize:12},children:"Guilds  snapshot (latest)"}),jK.map(t=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"56px 1fr 120px 120px",padding:"10px 12px",borderRadius:10,border:"1px solid #2C4A73",background:"#14273E",fontSize:14,alignItems:"center"},children:[n.jsxs("div",{children:["#",t.rank]}),n.jsxs("div",{children:[t.name,"  ",t.server]}),n.jsxs("div",{children:["Avg Lv ",t.avgLevel]}),n.jsxs("div",{children:[" ",t.delta24h>0?`+${t.delta24h}`:t.delta24h," (24h)"]})]},t.rank))]})}function NK(t="players"){const e=oi(),{search:s,pathname:r}=jr();return[new URLSearchParams(s).get("tab")||t,d=>{const u=new URLSearchParams(s);u.set("tab",d),e(`${r}?${u.toString()}`,{replace:!1})}]}function kK(){const[t]=NK("players");return n.jsx(jq,{children:t==="players"?n.jsx(vK,{}):n.jsx(SK,{})})}function CK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Browse"})})}function TK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Rankings"})})}function EK(){return n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Players  Stats"})})}const AK="/assets/demo-avatar-special.png",Lp={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},IK={idle:"Portrait ldt ...",loading:"PortraitMaker wird initialisiert ...",ready:"PortraitMaker bereit",error:"PortraitMaker konnte nicht geladen werden"},xr=(t,e)=>Math.min(Math.max(Math.round(t),0),e),PK=t=>{var s,r,i,a;const e={...Lp,...t||{}};return{...e,class:xr(e.class,15),race:xr(e.race,8),mouth:xr(e.mouth,30),hair:xr(e.hair,40),hairColor:xr(e.hairColor,12),horn:xr(e.horn,10),hornColor:xr(e.hornColor,10),brows:xr(e.brows,10),eyes:xr(e.eyes,20),beard:xr(e.beard,15),nose:xr(e.nose,10),ears:xr(e.ears,10),extra:xr(e.extra,20),special:xr(e.special,200),showBorder:(s=e.showBorder)!=null?s:!0,background:(r=e.background)!=null?r:Lp.background,frame:(i=e.frame)!=null?i:Lp.frame,mirrorHorizontal:(a=e.mirrorHorizontal)!=null?a:Lp.mirrorHorizontal,genderName:e.genderName==="female"?"female":"male"}};function tA({config:t,label:e,fallbackImage:s,fallbackLabel:r}){const i=E.useRef(null),a=E.useRef(null),[l,d]=E.useState("idle"),u=E.useMemo(()=>!t||Object.keys(t||{}).length===0?null:PK(t),[JSON.stringify(t||{})]);E.useEffect(()=>{let b=!1;if(!u){d("idle");return}d("loading");try{const N=i.current;if(!N){d("error");return}const S=new Yk(N,u);a.current=S,d("ready")}catch(N){console.error("[PortraitMaker] failed to initialize",N),b||d("error")}return()=>{var N,S;b=!0;try{(S=(N=a.current)==null?void 0:N.dispose)==null||S.call(N)}catch(C){}a.current=null}},[u]);const h=u&&l!=="ready"?IK[l]:null,m=s||AK,g=r||e,v=!u||l==="error";return n.jsxs("div",{className:"avatar-portrait","aria-live":"polite",children:[n.jsxs("div",{className:"avatar-portrait__canvas-shell",children:[!v&&n.jsx("canvas",{ref:i,id:"PortraitCanvasPopOut",width:526,height:526,className:"avatar-portrait__canvas avatar-portrait__canvas--popout","aria-label":`Portrait von ${e}`}),v&&n.jsx("img",{src:m,alt:g,className:"avatar-portrait__fallback",draggable:!1,width:240,height:240})]}),h&&n.jsx("span",{className:"avatar-portrait__status",children:h})]})}function RK({label:t,size:e=40}){const s=(t||"?").split(" ").filter(Boolean).map(r=>{var i;return(i=r[0])==null?void 0:i.toUpperCase()}).slice(0,2).join("");return n.jsx("div",{className:"player-profile__avatar-circle",style:{width:e,height:e,fontSize:Math.round(e*.36)},"aria-hidden":!0,children:s||"?"})}function LK({className:t,label:e,size:s=40}){const r=d=>d.toLowerCase().replace(/[^a-z0-9]+/g,""),i=r(t||""),a=Zs.find(d=>r(d.label)===i)||Zs.find(d=>r(d.label).startsWith(i)||i.startsWith(r(d.label))),l=a?sr(a.iconUrl,s*2):null;return l?n.jsx("div",{className:"player-profile__class-avatar",style:{width:s,height:s},children:n.jsx("img",{src:l,alt:"",draggable:!1})}):n.jsx(RK,{label:e,size:s})}function DK({data:t,loading:e,actionFeedback:s,onAction:r}){const i=h=>h.toLowerCase().replace(/[^a-z0-9]+/g,""),a=Zs.find(h=>i(h.label)===i(t.className||""))||Zs.find(h=>i(h.label).startsWith(i(t.className||""))||i(t.className||"").startsWith(i(h.label))),l=t.portraitFallbackUrl||(a?sr(a.iconUrl,420):void 0)||"/assets/demo-avatar-special.png",d=t.portraitFallbackLabel||t.className||t.playerName,u=t.hasPortrait===!1?void 0:t.portrait;return n.jsxs("section",{className:"player-profile__hero","aria-busy":e,children:[n.jsx(tA,{config:u,label:t.playerName,fallbackImage:l,fallbackLabel:d}),n.jsxs("div",{className:"player-profile__hero-body",children:[n.jsxs("div",{className:"player-profile__identity",children:[n.jsx(LK,{className:t.className,label:t.playerName,size:48}),n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__player-name",children:t.playerName}),n.jsxs("div",{className:"player-profile__player-meta",children:[n.jsx("span",{children:t.className||"Klasse ?"}),t.guild&&n.jsxs("span",{children:[" ",t.guild]}),t.server&&n.jsxs("span",{children:[" ",t.server]})]}),t.lastScanLabel&&n.jsxs("div",{className:"player-profile__player-meta player-profile__player-meta--soft",children:["Zuletzt gescannt: ",t.lastScanLabel]}),t.status&&n.jsx("div",{className:`player-profile__status player-profile__status--${t.status}`,children:t.status==="online"?"aktiv":"inaktiv"})]})]}),n.jsx("div",{className:"player-profile__hero-metrics",children:t.metrics.map(h=>n.jsxs("div",{className:"player-profile__hero-metric",children:[n.jsx("div",{className:"player-profile__hero-metric-label",children:h.label}),n.jsx("div",{className:"player-profile__hero-metric-value",children:h.value}),h.hint&&n.jsx("div",{className:"player-profile__hero-metric-hint",children:h.hint})]},h.label))}),t.badges.length>0&&n.jsx("div",{className:"player-profile__hero-badges",children:t.badges.map(h=>n.jsxs("span",{className:`player-profile__hero-badge player-profile__hero-badge--${h.tone||"neutral"}`,title:h.hint,children:[h.icon&&n.jsx("span",{"aria-hidden":!0,className:"player-profile__hero-badge-icon",children:h.icon}),n.jsx("span",{children:h.label}),n.jsx("strong",{children:h.value})]},h.label))}),t.actions.length>0&&n.jsxs("div",{className:"player-profile__hero-actions",children:[t.actions.map(h=>n.jsx("button",{className:"player-profile__hero-action",type:"button",disabled:e||h.disabled,title:h.title,onClick:()=>r==null?void 0:r(h.key),children:h.label},h.key)),s&&n.jsx("p",{className:"player-profile__hero-feedback",children:s})]})]})]})}function MK({data:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__grid",children:t.summary.map(e=>n.jsxs("article",{className:"player-profile__card",children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-value",children:e.value}),e.hint&&n.jsx("div",{className:"player-profile__card-hint",children:e.hint})]},e.label))}),n.jsxs("div",{className:"player-profile__section",children:[n.jsxs("header",{className:"player-profile__section-head",children:[n.jsx("h3",{children:"Attribute"}),n.jsx("span",{children:"Basis vs. Gesamt"})]}),n.jsx("div",{className:"player-profile__attr-grid",children:t.attributes.map(e=>n.jsxs("div",{className:"player-profile__attr-card",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__attr-label",children:e.label}),n.jsx("div",{className:"player-profile__attr-base",children:e.baseLabel})]}),e.totalLabel&&n.jsx("div",{className:"player-profile__attr-total",children:e.totalLabel})]},e.label))})]}),n.jsxs("div",{className:"player-profile__split",children:[n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Resistenzen"})}),n.jsx("ul",{className:"player-profile__list",children:t.resistances.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]}),n.jsxs("div",{className:"player-profile__section",children:[n.jsx("header",{className:"player-profile__section-head",children:n.jsx("h3",{children:"konomie"})}),n.jsx("ul",{className:"player-profile__list",children:t.resources.map(e=>n.jsxs("li",{children:[n.jsx("span",{children:e.label}),n.jsx("strong",{children:e.value})]},e.label))})]})]})]})}function FK({items:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>n.jsxs("article",{className:`player-profile__progress ${e.emphasis?"player-profile__progress--emphasis":""}`,children:[n.jsxs("div",{className:"player-profile__progress-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),n.jsx("div",{className:"player-profile__card-hint",children:e.description})]}),n.jsx("div",{className:"player-profile__card-value",children:e.targetLabel})]}),n.jsx("div",{className:"player-profile__progress-bar","aria-label":`${e.label} Fortschritt`,children:n.jsx("div",{style:{width:`${Math.min(100,Math.max(0,e.progress*100))}%`}})}),e.meta&&n.jsx("div",{className:"player-profile__card-hint",children:e.meta})]},e.label))})}function BK({series:t}){return n.jsx("div",{className:"player-profile__tab-panel player-profile__grid",children:t.map(e=>{var s;return n.jsxs("article",{className:"player-profile__trend-card",children:[n.jsxs("div",{className:"player-profile__trend-head",children:[n.jsxs("div",{children:[n.jsx("div",{className:"player-profile__card-label",children:e.label}),e.subLabel&&n.jsx("div",{className:"player-profile__card-hint",children:e.subLabel})]}),n.jsxs("div",{className:"player-profile__card-value",children:[(s=e.points[e.points.length-1])==null?void 0:s.toLocaleString("de-DE"),e.unit||""]})]}),n.jsx(VK,{points:e.points})]},e.label)})})}function $K({rows:t}){return n.jsxs("div",{className:"player-profile__tab-panel",children:[n.jsx("div",{className:"player-profile__section-head",children:n.jsx("h3",{children:"Serververgleich"})}),n.jsx("div",{className:"player-profile__comparison-wrapper",children:n.jsxs("table",{className:"player-profile__comparison",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Kategorie"}),n.jsx("th",{children:"Spieler"}),n.jsx("th",{children:"Cluster"}),n.jsx("th",{children:""})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:e.label}),n.jsx("td",{children:e.playerValue}),n.jsx("td",{children:e.benchmark}),n.jsx("td",{className:`player-profile__trend-${e.trend}`,children:e.diffLabel})]},e.label))})]})})]})}function OK({entries:t}){return n.jsx("div",{className:"player-profile__tab-panel",children:n.jsx("ol",{className:"player-profile__timeline",children:t.map(e=>n.jsxs("li",{children:[n.jsx("div",{className:"player-profile__timeline-date",children:e.dateLabel}),n.jsxs("div",{className:"player-profile__timeline-card",children:[n.jsx("div",{className:"player-profile__timeline-tag",children:e.tag}),n.jsx("div",{className:"player-profile__timeline-title",children:e.title}),n.jsx("div",{className:"player-profile__timeline-desc",children:e.description})]})]},`${e.dateLabel}-${e.title}`))})})}function VK({points:t}){if(!t.length)return n.jsx("div",{className:"player-profile__trend-chart player-profile__trend-chart--empty"});const e=Math.min(...t),s=Math.max(...t),r=Math.max(1,s-e||1),a=t.map((l,d)=>{const u=t.length>1?d/(t.length-1)*100:0,h=100-(l-e)/r*100;return`${d===0?"M":"L"}${u},${h}`}).join(" ");return n.jsx("div",{className:"player-profile__trend-chart",children:n.jsx("svg",{viewBox:"0 0 100 100",role:"img","aria-label":"Verlauf",children:n.jsx("path",{d:a})})})}const UK={genderName:"male",class:1,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:1,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},yr=(t,e,s=0)=>{if(!Array.isArray(t)||e<0)return s;const r=t[e],i=typeof r=="number"?r:Number(r);return Number.isFinite(i)?i:s},zK=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}};function vN(t){const e=yr(t,18),s=yr(t,21),r=yr(t,25),i=yr(t,705),a=yr(t,28)&255,l=Math.floor(e/100),d=Math.max(l,1),u=Math.floor(e/100);return{...UK,genderName:a===1?"female":"male",class:yr(t,29)&65535,race:yr(t,27)&65535,mouth:yr(t,17),hair:Math.max(e%100,0),brows:Math.max(yr(t,19)%100,0),eyes:yr(t,20),beard:Math.max(s%100,0),nose:yr(t,22),ears:yr(t,23),extra:yr(t,24),horn:Math.max(r%100,0),special:Math.min(yr(t,26),0),hairColor:d,hornColor:a===1?1:u===0?d:u,frame:zK(i)}}function HK(t){return typeof t!="string"||!t.trim()?[]:t.split("/").map(e=>{const s=Number(e.trim());return Number.isFinite(s)?s:0})}const GK={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:"",mirrorHorizontal:!0},gt=(t,e=0)=>{const s=typeof t=="number"?t:Number(t);return Number.isFinite(s)?s:e},bN=t=>t&&typeof t=="object"&&Object.values(t).some(e=>e!=null),_N=t=>{if(typeof t!="string")return[];const e=t.trim();if(!e)return[];const s=e.toLowerCase().replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"");return s?[s]:[]},WK=async(t,e,s)=>{var M,T;const r=Number(t),i=String(t!=null?t:"").trim(),a=_N(e),l=a[0],d=typeof s=="string"&&s.trim()?s.trim():"",u=y=>{if(!y)return"";const w=y.trim().toLowerCase();if(!w)return"";const D=w.split("/").filter(Boolean).pop()||w,[k,..._]=D.split("__"),A=_.join("__");if(k&&A){const F=_N(A)[0];if(F)return`${k}__${F}`}return i&&l?`${i}__${l}`:D.replace(/sfgame/g,"").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_|_$/g,"")},h=l&&i?`${i}__${l}`:"",m=[d,h].map(u).filter(Boolean).reduce((y,w)=>(y.includes(w)||y.push(w),y),[]),g=Gh(it,"avatars");m.length?console.debug("[avatars] identifier candidates",m):console.debug("[avatars] no identifier candidates for",{playerId:t,server:e});for(const y of m){const w=`linked_players/avatars/avatars/${y}`;console.debug("[avatars] lookup direct doc",w);const D=await Os(Ot(it,"linked_players","avatars","avatars",y));if(D.exists()){const k=D.data(),_=(k==null?void 0:k.portrait)||{},A=bN(_);return{playerId:gt(k==null?void 0:k.playerId,r),server:typeof(k==null?void 0:k.server)=="string"?k.server:e,portrait:{genderName:(_==null?void 0:_.genderName)==="female"?"female":"male",classId:gt(_==null?void 0:_.classId),raceId:gt(_==null?void 0:_.raceId),mouth:gt(_==null?void 0:_.mouth),hair:gt(_==null?void 0:_.hair),hairColor:gt(_==null?void 0:_.hairColor),horn:gt(_==null?void 0:_.horn),hornColor:gt(_==null?void 0:_.hornColor),brows:gt(_==null?void 0:_.brows),eyes:gt(_==null?void 0:_.eyes),beard:gt(_==null?void 0:_.beard),nose:gt(_==null?void 0:_.nose),ears:gt(_==null?void 0:_.ears),extra:gt(_==null?void 0:_.extra),special:gt(_==null?void 0:_.special),frameId:gt(_==null?void 0:_.frameId),frame:typeof(_==null?void 0:_.frame)=="string"?_.frame:void 0,background:typeof(_==null?void 0:_.background)=="string"?_.background:void 0,showBorder:typeof(_==null?void 0:_.showBorder)=="boolean"?_.showBorder:void 0,mirrorHorizontal:typeof(_==null?void 0:_.mirrorHorizontal)=="boolean"?_.mirrorHorizontal:void 0},updatedAt:(M=k==null?void 0:k.updatedAt)!=null?M:null,hasPortraitData:A}}}const v=async(y,w)=>{const D=[Zi("playerId","==",y)];w&&D.push(Zi("server","==",w));const k=kn(g,...D,zn(1)),_=await an(k);return _.empty?null:_.docs[0]};let b=null;if(Number.isFinite(r)){for(const y of a)if(b=await v(r,y),b)break}if(!b&&i){for(const y of a)if(b=await v(i,y),b)break}if(b||(Number.isFinite(r)&&(console.debug("[avatars] fallback: any server numeric pid",r),b=await v(r,null)),!b&&i&&(console.debug("[avatars] fallback: any server string pid",i),b=await v(i,null))),!b&&i&&a.length>0)for(const y of a){const w=[`${i}__${y}`,`${y}__${i}`,`${y}_${i}`,`${i}_${y}`];for(const D of w){console.debug("[avatars] fallback direct doc",D);const k=await Os(Ot(it,"linked_players","avatars","avatars",D));if(k.exists()){b=k;break}}if(b)break}if(!b)return null;const N=b.data(),S=(N==null?void 0:N.portrait)||{},C=bN(S),R={genderName:(S==null?void 0:S.genderName)==="female"?"female":"male",classId:gt(S==null?void 0:S.classId),raceId:gt(S==null?void 0:S.raceId),mouth:gt(S==null?void 0:S.mouth),hair:gt(S==null?void 0:S.hair),hairColor:gt(S==null?void 0:S.hairColor),horn:gt(S==null?void 0:S.horn),hornColor:gt(S==null?void 0:S.hornColor),brows:gt(S==null?void 0:S.brows),eyes:gt(S==null?void 0:S.eyes),beard:gt(S==null?void 0:S.beard),nose:gt(S==null?void 0:S.nose),ears:gt(S==null?void 0:S.ears),extra:gt(S==null?void 0:S.extra),special:gt(S==null?void 0:S.special),frameId:gt(S==null?void 0:S.frameId),frame:typeof(S==null?void 0:S.frame)=="string"?S.frame:void 0,background:typeof(S==null?void 0:S.background)=="string"?S.background:void 0,showBorder:typeof(S==null?void 0:S.showBorder)=="boolean"?S.showBorder:void 0,mirrorHorizontal:typeof(S==null?void 0:S.mirrorHorizontal)=="boolean"?S.mirrorHorizontal:void 0};return{playerId:gt(N==null?void 0:N.playerId,t),server:typeof(N==null?void 0:N.server)=="string"?N.server:e,portrait:R,updatedAt:(T=N==null?void 0:N.updatedAt)!=null?T:null,hasPortraitData:C}},qK=t=>{switch(t){case 1:return"goldenFrame";case 2:return"twitchFrame";case 3:return"zenFrame";case 4:return"silverFrame";case 50:return"worldBossFrameGold";case 51:return"worldBossFrameSilver";case 52:return"worldBossFrameBronze";default:return""}},KK=["","goldenFrame","twitchFrame","zenFrame","silverFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"],QK=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],XK=(t,e)=>{const s=(t==null?void 0:t.portrait)||{},r={...GK,...e||{}},i=qK(gt(s.frameId,0)),a=typeof s.frame=="string"&&KK.includes(s.frame)?s.frame:"",l=typeof s.background=="string"&&QK.includes(s.background)?s.background:r.background;return{...r,genderName:s.genderName==="female"?"female":r.genderName,class:gt(s.classId,r.class),race:gt(s.raceId,r.race),mouth:gt(s.mouth,r.mouth),hair:gt(s.hair,r.hair),hairColor:gt(s.hairColor,r.hairColor),horn:gt(s.horn,r.horn),hornColor:gt(s.hornColor,r.hornColor),brows:gt(s.brows,r.brows),eyes:gt(s.eyes,r.eyes),beard:gt(s.beard,r.beard),nose:gt(s.nose,r.nose),ears:gt(s.ears,r.ears),extra:gt(s.extra,r.extra),special:gt(s.special,r.special),frame:i||a||r.frame||"",background:l,showBorder:typeof s.showBorder=="boolean"?s.showBorder:r.showBorder,mirrorHorizontal:typeof s.mirrorHorizontal=="boolean"?s.mirrorHorizontal:r.mirrorHorizontal}},YK=["Statistiken","Charts","Fortschritt","Vergleich","Historie"];function cv(){const t=og(),e=t.id||t.pid||t.playerId||t.player||"",s=oi(),[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(null),[h,m]=E.useState("Statistiken"),[g,v]=E.useState(null),[b,N]=E.useState(null),[,S]=E.useState(!1),[,C]=E.useState(null),R=E.useRef(null);E.useEffect(()=>{let k=!1;async function _(){var A,F,P,B,$,W,H,q,K,G,te,ne,U,Z,he,ie,fe,be,ye;i(!0),l(null);try{const _e=(e||"").trim();if(!_e)throw new Error("Kein Spieler gewhlt.");const we=Ot(it,`players/${_e}/latest/latest`),de=await Os(we);if(!de.exists())throw new Error("Spieler nicht gefunden.");const pe=de.data(),re=typeof pe.values=="object"&&pe.values?pe.values:{},$e=Array.isArray(pe.save)&&pe.save||Array.isArray(re==null?void 0:re.save)&&re.save||Array.isArray(pe.saveArray)&&pe.saveArray||Array.isArray(re==null?void 0:re.saveArray)&&re.saveArray||void 0,He=typeof pe.save=="string"&&pe.save||typeof(re==null?void 0:re.save)=="string"&&re.save||typeof pe.saveString=="string"&&pe.saveString||typeof(re==null?void 0:re.saveString)=="string"&&re.saveString||void 0,pt=(F=Xc((A=pe.level)!=null?A:re==null?void 0:re.Level))!=null?F:null,It=((B=(P=pe.className)!=null?P:re==null?void 0:re.Class)!=null?B:null)||null,Mt=((W=($=pe.guildName)!=null?$:re==null?void 0:re.Guild)!=null?W:null)||null,Ht=(q=(H=pe.name)!=null?H:re==null?void 0:re.Name)!=null?q:_e,ss=(G=(K=pe.server)!=null?K:re==null?void 0:re.Server)!=null?G:null,Ne=typeof ss=="string"?ss.trim().toLowerCase().replace(/\./g,"_"):"",Re=(Z=(U=(ne=(te=pe.avatarIdentifier)!=null?te:pe.identifier)!=null?ne:re==null?void 0:re.avatarIdentifier)!=null?U:re==null?void 0:re.identifier)!=null?Z:Ne?`${_e}__${Ne}`:null,Ie=(ie=Xc((he=pe.totalStats)!=null?he:re==null?void 0:re["Total Stats"]))!=null?ie:null,ze=(ye=Xc((be=(fe=re==null?void 0:re.Album)!=null?fe:re==null?void 0:re["Album %"])!=null?be:re==null?void 0:re.AlbumPct))!=null?ye:null,at=JK(Xc(pe.timestamp)),ut=typeof pe.portrait=="object"?pe.portrait:typeof pe.portraitOptions=="object"?pe.portraitOptions:typeof(re==null?void 0:re.portraitOptions)=="object"?re.portraitOptions:void 0;k||u({id:_e,name:Ht,className:It,level:pt,guild:Mt,server:ss,avatarIdentifier:Re,scrapbookPct:ze,totalStats:Ie,lastScanDays:at,values:re,portraitConfig:ut,saveArray:$e,saveString:He})}catch(_e){k||(u(null),l((_e==null?void 0:_e.message)||"Unbekannter Fehler beim Laden."))}finally{k||i(!1)}}return _(),()=>{k=!0}},[e]),E.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]),E.useEffect(()=>{let k=!1;return(async()=>{var F,P;if(!(d!=null&&d.id)){N(null),S(!1),C(null);return}const A=Xc(d.id);if(A==null){N(null),S(!1),C(null);return}S(!0),C(null);try{const B=await WK(A,(F=d.server)!=null?F:"",(P=d.avatarIdentifier)!=null?P:void 0);k||N(B)}catch(B){k||(N(null),C(B instanceof Error?B:new Error("AvatarSnapshot failed")))}finally{k||S(!1)}})(),()=>{k=!0}},[d==null?void 0:d.id,d==null?void 0:d.server]);const M=E.useMemo(()=>d?sQ(d,b):null,[d,b]),T=k=>{v(k),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>v(null),3500)},y=async k=>{if(d){if(k==="copy-link"){if(typeof window!="undefined"&&(navigator!=null&&navigator.clipboard)){const _=`${window.location.origin}/players/profile/${d.id}`;try{await navigator.clipboard.writeText(_),T("Profil-Link wurde kopiert.")}catch(A){T("Konnte Link nicht kopieren.")}}return}if(k==="share"&&typeof window!="undefined"&&(navigator!=null&&navigator.share)){try{await navigator.share({title:d.name,text:`Shakes & Fidget Charakter ${d.name}`,url:window.location.href}),T("Profil geteilt.")}catch(_){T("Teilen abgebrochen.")}return}if(k==="guild"&&d.guild){s(`/guilds?search=${encodeURIComponent(d.guild)}`);return}if(k==="rescan"){T("Rescan-Queue folgt  aktuell noch Platzhalter.");return}}},w=()=>{if(!M)return null;switch(h){case"Statistiken":return n.jsx(MK,{data:M.stats});case"Charts":return n.jsx(BK,{series:M.charts});case"Fortschritt":return n.jsx(FK,{items:M.progress});case"Vergleich":return n.jsx($K,{rows:M.comparison});case"Historie":return n.jsx(OK,{entries:M.history});default:return null}},D=()=>n.jsxs("div",{className:"player-profile__loading",children:[n.jsx("p",{children:a!=null?a:"Spieler nicht gefunden."}),n.jsx("button",{type:"button",className:"player-profile__hero-action",onClick:()=>s("/"),style:{marginTop:12},children:"Zur Startseite"})]});return n.jsx(Pt,{title:"Spielerprofil",subtitle:"Charakter, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsxs("div",{className:"player-profile",children:[r&&!d&&n.jsx("div",{className:"player-profile__loading",children:"Spielerprofil wird geladen "}),!r&&(!d||!M)&&D(),M&&n.jsxs(n.Fragment,{children:[n.jsx(DK,{data:M.hero,loading:r,actionFeedback:g,onAction:y}),n.jsx("div",{className:"player-profile__tabs",role:"tablist","aria-label":"Spielerprofil Tabs",children:YK.map(k=>{const _=h===k;return n.jsx("button",{type:"button",role:"tab","aria-selected":_,className:`player-profile__tab-button ${_?"player-profile__tab-button--active":""}`,onClick:()=>m(k),children:k},k)})}),w()]})]})})}const Xc=t=>{if(t==null||t==="")return null;const e=String(t).replace(/[^0-9.-]/g,""),s=Number(e);return Number.isFinite(s)?s:null},JK=t=>{if(!t)return null;const e=Date.now()/1e3,s=Math.max(0,e-t);return Math.floor(s/86400)},dv=t=>t.toLowerCase().replace(/[^a-z0-9]/g,""),ZK=t=>{const e=new Map;return Object.entries(t||{}).forEach(([s,r])=>e.set(dv(s),r)),{number(s,r=null){for(const i of s){const a=Xc(e.get(dv(i)));if(a!=null)return a}return r},text(s,r=null){for(const i of s){const a=e.get(dv(i));if(a!=null&&String(a).trim())return String(a).trim()}return r}}},eQ=t=>{let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619);return()=>{e+=1831565813;let s=Math.imul(e^e>>>15,1|e);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}},rn=(t,e="")=>t==null?e:t.toLocaleString("de-DE"),mf=t=>t==null?"":`${Math.round(t)}%`,wN=t=>t==null?null:t===0?"heute":`${t} Tag${t===1?"":"e"} her`,tQ=(t,e)=>{let s;const r=t.portraitConfig&&Object.keys(t.portraitConfig).length>0;if(Array.isArray(t.saveArray)&&t.saveArray.length>0)s=vN(t.saveArray);else if(t.saveString){const i=HK(t.saveString);s=i.length>0?vN(i):void 0}else r&&(s={...t.portraitConfig});return e!=null&&e.hasPortraitData?{config:XK(e,s),hasData:!0}:s?{config:s,hasData:!0}:{config:void 0,hasData:!1}},sQ=(t,e)=>{var te,ne,U,Z,he,ie,fe,be,ye,_e,we,de;const s=t.values||{},r=ZK(s),i=eQ(t.id),a=tQ(t,e),l=Y3((te=t.className)!=null?te:void 0),d=sr(l.url,420)||"/assets/demo-avatar-special.png",u=t.className?`Klassenbild ${t.className}`:"Portrait-Platzhalter",h=(ne=t.level)!=null?ne:r.number(["level"]),m=(U=t.scrapbookPct)!=null?U:r.number(["album","scrapbook","albumpct"]),g=r.number(["honor","ehre"]),v=(Z=t.totalStats)!=null?Z:r.number(["totalstats","stats"]),S=[["Base Strength","Strke","basestrength"],["Base Dexterity","Geschick","basedexterity"],["Base Intelligence","Intelligenz","baseintelligence"],["Base Constitution","Konstitution","baseconstitution"],["Base Luck","Glck","baseluck"]].map(pe=>{var re;return(re=r.number(pe,0))!=null?re:0}).reduce((pe,re)=>pe+(re!=null?re:0),0),C=m!=null?m:Math.round(i()*80+10),R=(he=r.number(["fortresslevel","fortress"]))!=null?he:Math.round(i()*20)+30,M=(ie=r.number(["underworld","underworldlevel"]))!=null?ie:Math.round(i()*10)+20,T=(fe=r.number(["tower","towerfloor"]))!=null?fe:Math.round(i()*90)+10,y=(be=r.number(["pets","petprogress"]))!=null?be:Math.round(i()*50)+25,w=(h!=null?h:0)*1200+S+Math.round((m!=null?m:0)*3200),D=(ye=r.text(["mount","reittier"]))!=null?ye:"Greifendrachen (280%)",k=(_e=r.text(["guildrole","role"]))!=null?_e:"Member",_=r.number(["hofrank","halloffamerank","hofposition"]),A=[{label:"Level",value:h?`Lvl ${rn(h)}`:""},{label:"Power Score",value:rn(w)},{label:"Scrapbook",value:mf(C)},{label:"Total Stats",value:rn(v)}],F=[{label:"Mount",value:D,tone:"neutral"},{label:"Honor",value:rn(g),tone:"success"},{label:"Gildenrolle",value:k,tone:"warning"},{label:"HoF",value:_?`#${rn(_)}`:"",tone:"neutral"}],P={playerName:t.name,className:t.className,guild:t.guild,server:t.server,levelLabel:h?`Level ${rn(h)}`:void 0,lastScanLabel:(we=wN(t.lastScanDays))!=null?we:void 0,status:t.lastScanDays!=null&&t.lastScanDays<=2?"online":"offline",metrics:A,badges:F,actions:[{key:"rescan",label:"Rescan anfordern"},{key:"guild",label:"Gilde ffnen",disabled:!t.guild},{key:"share",label:"Teilen",title:"System Share Sheet"},{key:"copy-link",label:"Link kopieren"}],portrait:a.hasData?a.config:void 0,hasPortrait:a.hasData,portraitFallbackUrl:d,portraitFallbackLabel:u},B=[{label:"Strke",base:["Base Strength"],total:["Strength"]},{label:"Geschick",base:["Base Dexterity"],total:["Dexterity"]},{label:"Intelligenz",base:["Base Intelligence"],total:["Intelligence"]},{label:"Konstitution",base:["Base Constitution"],total:["Constitution"]},{label:"Glck",base:["Base Luck"],total:["Luck"]}],$={summary:[{label:"Power Score",value:rn(w),hint:"Level * SumBase"},{label:"Honor",value:rn(g)},{label:"HoF Platz",value:_?`#${rn(_)}`:""},{label:"Letzter Scan",value:(de=wN(t.lastScanDays))!=null?de:""}],attributes:B.map(pe=>({label:pe.label,baseLabel:rn(r.number(pe.base)),totalLabel:r.number(pe.total)!=null?`Gesamt ${rn(r.number(pe.total))}`:void 0})),resistances:[{label:"Feuer",value:`${Math.round(i()*40+40)}%`},{label:"Schatten",value:`${Math.round(i()*40+35)}%`},{label:"Frost",value:`${Math.round(i()*30+30)}%`},{label:"Licht",value:`${Math.round(i()*20+30)}%`}],resources:[{label:"Gold/h",value:`${rn(Math.round((h!=null?h:1)*(i()*8+3)))}k`},{label:"XP/h",value:`${rn(Math.round((h!=null?h:1)*(i()*5+2)))}k`},{label:"Mount Bonus",value:D},{label:"Quest Slots",value:`${Math.round(i()*2)+3}`}]},W=[{label:"Scrapbook",description:"Stickers & Sammlungen",progress:Math.min(1,(C!=null?C:0)/100),targetLabel:`${mf(C)} / 100%`,meta:"Ziel: 100% fr Bonus",emphasis:C!=null&&C>=90},{label:"Dungeons",description:"Tower & Loop of Idols",progress:Math.min(1,T/100),targetLabel:`Ebene ${Math.round(T)}/100`,meta:"Tower Floors abgeschlossen"},{label:"Festung",description:"Gebudeausbau",progress:Math.min(1,R/25),targetLabel:`Lvl ${Math.round(R)}`,meta:"Mine, Akademie, Schatzkammer"},{label:"Unterwelt",description:"Seelen/Kerker",progress:Math.min(1,M/30),targetLabel:`Lvl ${Math.round(M)}`,meta:"Hydra, Gladiator"},{label:"Pets",description:"Habitate & Elemente",progress:Math.min(1,y/100),targetLabel:`${Math.round(y)} / 100`,meta:"Habitate offen"}],H=(pe,re=.12)=>{const $e=pe!=null?pe:Math.round(i()*100),He=[];let pt=$e*.85;for(let It=0;It<8;It++)pt+=pt*(i()*re-re/2),He.push(Math.max(0,Math.round(pt)));return He[He.length-1]=$e,He},q=[{label:"Level Verlauf",points:H(h!=null?h:0,.06),unit:"",subLabel:"7 Tage"},{label:"Total Stats",points:H(v!=null?v:0,.18),unit:"",subLabel:"Summe Attribute"},{label:"Honor",points:H(g!=null?g:0,.25),unit:"",subLabel:"Hall of Fame"}],K=[{label:"Level",playerValue:h?`Lvl ${rn(h)}`:"",benchmark:h?`Lvl ${rn(Math.round(h*.92))}`:"",diffLabel:h?`+${Math.round(h*.08)}`:"",trend:"up"},{label:"Power Score",playerValue:rn(w),benchmark:rn(Math.round(w*.9)),diffLabel:`+${rn(Math.round(w*.1))}`,trend:"up"},{label:"Scrapbook",playerValue:mf(C),benchmark:`${Math.min(100,Math.round((C!=null?C:60)-8))}%`,diffLabel:C!=null?`+${Math.round(C-60)}%`:"",trend:C!=null&&C>=80?"up":"neutral"},{label:"Festung",playerValue:`Lvl ${Math.round(R)}`,benchmark:`Lvl ${Math.round(R-3)}`,diffLabel:"+3",trend:"up"},{label:"Unterwelt",playerValue:`Lvl ${Math.round(M)}`,benchmark:`Lvl ${Math.round(M-2)}`,diffLabel:"+2",trend:"neutral"}],G=nQ(t,r,i);return{hero:P,stats:$,progress:W,charts:q,comparison:K,history:G}},nQ=(t,e,s)=>{var l,d;const r=[],i=e.text(["guildjoined","joinedguild","gildenbeitritt"]);i&&r.push({dateLabel:i,title:"Gildenbeitritt",description:t.guild?`Joined ${t.guild}`:"Neuer Gildenplatz",tag:"Gilde"});const a=e.text(["lastdungeon","lastfight"]);return a&&r.push({dateLabel:Dp(Math.round(s()*15)+5),title:"Dungeon Clear",description:a,tag:"Dungeon"}),r.push({dateLabel:Dp(2),title:"Level-Up",description:`Erreichte Level ${rn(t.level)}`,tag:"Level"}),r.push({dateLabel:Dp(10),title:"Scrapbook Meilenstein",description:`${mf((l=t.scrapbookPct)!=null?l:Math.round(s()*50+40))} komplett`,tag:"Album"}),r.push({dateLabel:Dp(18),title:"Festung",description:`Fortress Level ${Math.round((d=e.number(["fortress"],Math.round(s()*20+15)))!=null?d:0)}`,tag:"Festung"}),r},Dp=t=>new Date(Date.now()-t*864e5).toLocaleDateString("de-DE");function Cd(t,e=300){const[s,r]=J.useState(t);return J.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function Td(t){const e=J.useCallback(()=>typeof window=="undefined"?!1:window.matchMedia(t).matches,[t]),[s,r]=J.useState(()=>e());return J.useEffect(()=>{if(typeof window=="undefined")return;const i=window.matchMedia(t),a=l=>r(l.matches);return r(i.matches),i.addEventListener("change",a),()=>i.removeEventListener("change",a)},[t]),s}const rQ='a[href], button:not([disabled]), textarea, input, select, details, summary, [tabindex]:not([tabindex="-1"])';function Ed(t,e){J.useEffect(()=>{var l;if(!e)return;const s=t.current;if(!s)return;const r=()=>s.querySelectorAll(rQ);(l=r()[0])==null||l.focus();const a=d=>{if(d.key!=="Tab")return;const u=r();if(u.length===0)return;const h=u[0],m=u[u.length-1];d.shiftKey?document.activeElement===h&&(d.preventDefault(),m.focus()):document.activeElement===m&&(d.preventDefault(),h.focus())};return s.addEventListener("keydown",a),()=>s.removeEventListener("keydown",a)},[t,e])}const iQ="_page_1jzf5_1",aQ="_header_1jzf5_13",oQ="_headerStack_1jzf5_25",lQ="_kicker_1jzf5_37",cQ="_title_1jzf5_53",dQ="_subtitle_1jzf5_65",uQ="_headerActions_1jzf5_79",hQ="_secondaryAction_1jzf5_89",mQ="_infoStrip_1jzf5_131",pQ="_infoCard_1jzf5_143",fQ="_infoLabel_1jzf5_163",gQ="_inlineFilters_1jzf5_177",xQ="_filterField_1jzf5_197",yQ="_select_1jzf5_227",vQ="_searchInput_1jzf5_229",bQ="_layout_1jzf5_249",_Q="_selectionColumn_1jzf5_261",wQ="_selectionCard_1jzf5_273",jQ="_slotHeader_1jzf5_293",SQ="_slotLabel_1jzf5_307",NQ="_slotStatus_1jzf5_323",kQ="_clearButton_1jzf5_335",CQ="_slotBody_1jzf5_355",TQ="_resultList_1jzf5_367",EQ="_emptyResult_1jzf5_385",AQ="_resultItem_1jzf5_397",IQ="_resultName_1jzf5_421",PQ="_resultMeta_1jzf5_433",RQ="_selectButton_1jzf5_445",LQ="_selectedCard_1jzf5_465",DQ="_selectedName_1jzf5_479",MQ="_selectedMeta_1jzf5_489",FQ="_selectedTagline_1jzf5_491",BQ="_comparisonColumn_1jzf5_503",$Q="_comparisonCard_1jzf5_515",OQ="_comparisonHeader_1jzf5_535",VQ="_sectionTitle_1jzf5_551",UQ="_diffBadge_1jzf5_561",zQ="_metricGrid_1jzf5_579",HQ="_metricCard_1jzf5_591",GQ="_metricLabel_1jzf5_611",WQ="_metricValues_1jzf5_627",qQ="_metricDivider_1jzf5_643",KQ="_metricDelta_1jzf5_653",QQ="_freshnessRow_1jzf5_665",XQ="_freshnessItem_1jzf5_677",YQ="_freshnessBadge_1jzf5_685",JQ="_freshnessPopover_1jzf5_733",ZQ="_popoverTitle_1jzf5_757",eX="_classCard_1jzf5_807",tX="_classGrid_1jzf5_827",sX="_classColumn_1jzf5_837",nX="_classBar_1jzf5_857",rX="_classSlice_1jzf5_873",iX="_classLegend_1jzf5_907",aX="_emptyState_1jzf5_931",oX="_supportPanels_1jzf5_947",lX="_checklistCard_1jzf5_959",cX="_infoCardExtended_1jzf5_961",dX="_checklist_1jzf5_959",uX="_infoNote_1jzf5_1033",hX="_sheetOverlay_1jzf5_1045",mX="_sheetOpen_1jzf5_1073",pX="_sheet_1jzf5_1045",fX="_sheetHeader_1jzf5_1105",gX="_sheetBody_1jzf5_1119",ae={page:iQ,header:aQ,headerStack:oQ,kicker:lQ,title:cQ,subtitle:dQ,headerActions:uQ,secondaryAction:hQ,infoStrip:mQ,infoCard:pQ,infoLabel:fQ,inlineFilters:gQ,filterField:xQ,select:yQ,searchInput:vQ,layout:bQ,selectionColumn:_Q,selectionCard:wQ,slotHeader:jQ,slotLabel:SQ,slotStatus:NQ,clearButton:kQ,slotBody:CQ,resultList:TQ,emptyResult:EQ,resultItem:AQ,resultName:IQ,resultMeta:PQ,selectButton:RQ,selectedCard:LQ,selectedName:DQ,selectedMeta:MQ,selectedTagline:FQ,comparisonColumn:BQ,comparisonCard:$Q,comparisonHeader:OQ,sectionTitle:VQ,diffBadge:UQ,metricGrid:zQ,metricCard:HQ,metricLabel:GQ,metricValues:WQ,metricDivider:qQ,metricDelta:KQ,freshnessRow:QQ,freshnessItem:XQ,freshnessBadge:YQ,freshnessPopover:JQ,popoverTitle:ZQ,classCard:eX,classGrid:tX,classColumn:sX,classBar:nX,classSlice:rX,classLegend:iX,emptyState:aX,supportPanels:oX,checklistCard:lX,infoCardExtended:cX,checklist:dX,infoNote:uX,sheetOverlay:hX,sheetOpen:mX,sheet:pX,sheetHeader:fX,sheetBody:gX},sA=["Ari","Borin","Celeste","Doran","Lena","Nix"],xX={open:"Offen",in_progress:"In Arbeit",done:"Erledigt",canceled:"Abgebrochen"},$b={raid:"Raid",event:"Event",task:"Task"},Ob={f0:"F0 - < 1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - > 7d",unknown:"Unbekannt"},jN={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},SN={urgent:4,high:3,medium:2,low:1},yX={"7d":7,"30d":30,"90d":90,all:null},uv={q:"",type:"all",status:"all",range:"30d",owner:[],sort:"dueAt",dir:"asc",page:1,pageSize:6},vX=[{id:"planner-001",title:"Trial of Valor Raid",type:"raid",status:"open",owner:"Ari",assignees:["Ari","Celeste"],dueAt:_l(5,20),createdAt:Yn(2,14),updatedAt:Yn(1,11),priority:"urgent",tags:["raid","fusion"],description:"Koordiniere die Vorbereitung fuer den Trial of Valor Raid. Stelle sicher, dass Elixiere und Edelsteine auf Lager sind und alle Tanks das neue Setup kennen.",freshness:"f2",lastScanAt:Fp(3),nextUpdateAt:Mp(5)},{id:"planner-002",title:"Waitlist Sync - Woche 39",type:"task",status:"in_progress",owner:"Lena",assignees:["Lena","Nix"],dueAt:_l(2,12),createdAt:Yn(4,9),updatedAt:Yn(1,8),priority:"high",tags:["waitlist","ops"],description:"Verifiziere offene Bewerbungen, aktualisiere Klassentargets und markiere Kandidaten mit kritischen Notizen.",freshness:"f3",lastScanAt:Fp(8),nextUpdateAt:Mp(12)},{id:"planner-003",title:"Fusion Discovery Call",type:"event",status:"open",owner:"Celeste",assignees:["Celeste","Doran"],dueAt:_l(7,17),createdAt:Yn(1,10),updatedAt:Yn(1,9),priority:"medium",tags:["fusion","negotiation"],description:'Vorbereitung auf das Discovery-Meeting mit Gilde "Astral Echoes". Fokus: Kulturabgleich und Zeitleiste.',freshness:"f4",lastScanAt:Fp(22),nextUpdateAt:Mp(26)},{id:"planner-004",title:"Event: Ingame Jubilaeum",type:"event",status:"done",owner:"Borin",assignees:["Borin"],dueAt:Yn(1,19),createdAt:Yn(9,10),updatedAt:Yn(1,21),priority:"low",tags:["community"],description:"Recap fertigstellen, Screenshots ins Archiv laden und Feedback-Umfrage versenden.",freshness:"f5",lastScanAt:Yn(1,19),nextUpdateAt:_l(3,9)},{id:"planner-005",title:"Raid Lead Rotation",type:"task",status:"open",owner:"Nix",assignees:["Nix","Doran"],dueAt:_l(12,18),createdAt:Yn(6,15),updatedAt:Yn(2,13),priority:"medium",tags:["ops"],description:"Rotation vorbereiten, Onboarding-Dokument aktualisieren und Backup-Lead einarbeiten.",freshness:"f1",lastScanAt:Fp(1),nextUpdateAt:Mp(8)},{id:"planner-006",title:"Recruitment Push EU-02",type:"task",status:"in_progress",owner:"Doran",assignees:["Doran","Ari"],dueAt:_l(18,13),createdAt:Yn(12,18),updatedAt:Yn(3,8),priority:"high",tags:["recruiting"],description:"Discord Outreach finalisieren, Server-Werbung aktualisieren und Referal-Bonus ankuendigen.",freshness:"f6",lastScanAt:Yn(2,16),nextUpdateAt:_l(4,9)}];function _l(t,e=12){const s=new Date;return s.setDate(s.getDate()+t),s.setHours(e,0,0,0),s.toISOString()}function Mp(t){const e=new Date;return e.setHours(e.getHours()+t,e.getMinutes(),0,0),e.toISOString()}function Yn(t,e=12){const s=new Date;return s.setDate(s.getDate()-t),s.setHours(e,0,0,0),s.toISOString()}function Fp(t){const e=new Date;return e.setHours(e.getHours()-t,e.getMinutes(),0,0),e.toISOString()}function NN(t){return{...t,page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),owner:Array.from(new Set(t.owner))}}function bX(t,e,s){const r=Date.now(),i=yX[e.range];return t.filter(a=>{const l=s===""||a.title.toLowerCase().includes(s.toLowerCase())||a.description.toLowerCase().includes(s.toLowerCase()),d=e.type==="all"||a.type===e.type,u=e.status==="all"||a.status===e.status,h=e.owner.length===0||e.owner.includes(a.owner)||a.assignees.some(g=>e.owner.includes(g));let m=!0;if(i!==null){const g=new Date(a.dueAt).getTime(),v=r+i*24*60*60*1e3;m=g<=v}return l&&d&&u&&h&&m})}function _X(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"dueAt":l=new Date(i.dueAt).getTime()-new Date(a.dueAt).getTime();break;case"updatedAt":l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break;case"priority":l=SN[i.priority]-SN[a.priority];break;case"title":l=i.title.localeCompare(a.title);break;default:l=0}return s==="asc"?l:-l}),r}function wX(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function ia(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function em(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function Ch(t,e){const s=new Date(t).getTime()-e;if(s<=0)return"faellig";const r=Math.floor(s/6e4);if(r<60)return`${r} min`;const i=Math.floor(r/60);return i<24?`${i} h`:`${Math.floor(i/24)} d`}function jX(t){return t.length===0?null:t.reduce((e,s)=>e?jN[s.freshness]>jN[e.freshness]?s:e:s,null)}const E0=["EU-01","EU-02","US-01","US-02","ASIA-01"],nh=new Intl.NumberFormat("de-DE");function SX(){const t=Td("(min-width: 768px)"),[e,s]=J.useState("all"),[r,i]=J.useState(null),[a,l]=J.useState(null),[d,u]=J.useState(null),[h,m]=J.useState(null),g=[r,a].filter(Boolean).length,v=J.useMemo(()=>{const P=[d,h].filter(Boolean);if(!P.length)return 0;const B=P.reduce(($,W)=>{var H;return $+((H=W.level)!=null?H:0)},0);return Math.round(B/P.length)},[d,h]),[b,N]=J.useState(null),[S,C]=J.useState(!1),R=J.useRef(null);Ed(R,S&&!t),J.useEffect(()=>{t&&C(!1)},[t]),J.useEffect(()=>{if(!b)return;const P=$=>{const W=$.target;W&&(W.closest(`.${ae.freshnessBadge}`)||W.closest(`.${ae.freshnessPopover}`)||N(null))},B=$=>{$.key==="Escape"&&N(null)};return document.addEventListener("pointerdown",P),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",P),document.removeEventListener("keydown",B)}},[b]);const M=J.useMemo(()=>d?Ch(d.nextUpdateAt,Date.now()):"",[d]),T=J.useMemo(()=>h?Ch(h.nextUpdateAt,Date.now()):"",[h]),y=()=>C(!0),w=()=>C(!1),D=P=>{s(P)},k=(P,B)=>{P==="playerA"?(i(B.id),u(B)):(l(B.id),m(B))},_=P=>{P==="playerA"?(i(null),u(null)):(l(null),m(null))},A=P=>{N(B=>B===P?null:P)},F=d&&h;return n.jsxs(Pt,{title:"Players",subtitle:"Spielervergleich",centerFramed:!1,children:[n.jsxs("div",{className:ae.page,children:[n.jsxs("header",{className:ae.header,children:[n.jsxs("div",{className:ae.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Players"}),n.jsx("h1",{className:ae.title,children:"Spieler vergleichen"}),n.jsx("p",{className:ae.subtitle,children:"Waehle zwei Charaktere aus, gleiche Level, Scrapbook und Freshness ab und finde die staerkere Option fuer dein Team oder deine Analyse."})]}),n.jsx("div",{className:ae.headerActions,children:!t&&n.jsx("button",{type:"button",className:ae.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:ae.infoStrip,children:[n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Slots gefuellt"}),n.jsxs("strong",{children:[nh.format(g)," Spieler"]})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Durchschnittslevel"}),n.jsx("strong",{children:nh.format(v)})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ae.inlineFilters,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:P=>D(P.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),E0.map(P=>n.jsx("option",{value:P,children:P},P))]})]})})]}),n.jsxs("div",{className:ae.layout,children:[n.jsxs("section",{className:ae.selectionColumn,children:[n.jsx(kN,{title:"Spieler A",slot:"playerA",selectedPlayer:d,excludeId:a,onSelect:k,onClear:_,serverFilter:e,onServerChange:D}),n.jsx(kN,{title:"Spieler B",slot:"playerB",selectedPlayer:h,excludeId:r,onSelect:k,onClear:_,serverFilter:e,onServerChange:D})]}),n.jsxs("section",{className:ae.comparisonColumn,children:[n.jsxs("div",{className:ae.comparisonCard,children:[n.jsxs("div",{className:ae.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Vergleich"}),n.jsx("h2",{className:ae.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:ae.diffBadge,children:["Delta Level: ",nh.format(d.level-h.level)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ae.metricGrid,children:[n.jsx(CN,{label:"Level",aValue:d.level,bValue:h.level}),n.jsx(CN,{label:"Scrapbook (%)",aValue:d.scrapbookPct,bValue:h.scrapbookPct,isDecimal:!0}),n.jsx(NX,{playerA:d,playerB:h,countdownA:M,countdownB:T,activePopover:b,onToggle:A})]}),n.jsx(kX,{playerA:d,playerB:h})]}):n.jsx("div",{className:ae.emptyState,children:n.jsx("p",{children:"Waehle zwei Spieler aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ae.supportPanels,children:[n.jsx(CX,{}),n.jsx(TX,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ae.sheetOverlay} ${S?ae.sheetOpen:""}`,children:n.jsxs("div",{className:ae.sheet,role:"dialog","aria-modal":"true",ref:R,children:[n.jsxs("header",{className:ae.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ae.clearButton,onClick:w,children:"Schliessen"})]}),n.jsx("div",{className:ae.sheetBody,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:P=>D(P.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),E0.map(P=>n.jsx("option",{value:P,children:P},P))]})]})})]})})]})}function kN({title:t,slot:e,selectedPlayer:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=J.useState(""),m=Cd(u,300);J.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=EX(m,l,r);return n.jsxs("article",{className:ae.selectionCard,children:[n.jsxs("div",{className:ae.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.slotLabel,children:t}),n.jsx("p",{className:ae.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ae.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ae.slotBody,children:[n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),E0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ae.searchInput,placeholder:"Spielernamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ae.resultList,role:"list",children:[v&&n.jsx("div",{className:ae.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:ae.emptyResult,children:"Kein Spieler gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:ae.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.resultName,children:b.name}),n.jsxs("p",{className:ae.resultMeta,children:[b.server," - Level ",b.level," - ",b.className]})]}),n.jsx("button",{type:"button",className:ae.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ae.selectedCard,children:[n.jsx("p",{className:ae.selectedName,children:s.name}),n.jsxs("p",{className:ae.selectedMeta,children:[s.server," - Level ",s.level," - ",s.className," -"," ",s.guildName||"ohne Gilde"]}),n.jsx("p",{className:ae.selectedTagline,children:s.tagline})]})]})]})}function CN({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):nh.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):nh.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:t}),n.jsxs("div",{className:ae.metricValues,children:[n.jsx("span",{"aria-label":"Spieler A",children:i(e)}),n.jsx("span",{className:ae.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Spieler B",children:i(s)})]}),n.jsx("p",{className:ae.metricDelta,children:l})]})}function NX({playerA:t,playerB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Freshness"}),n.jsx("div",{className:ae.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ae.freshnessItem,children:[n.jsxs("button",{type:"button",className:ae.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:em(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ae.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ae.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Ob[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:ia(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[ia(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function kX({playerA:t,playerB:e}){const s=J.useMemo(()=>Array.from(new Set([...t.stats,...e.stats].map(i=>i.label))),[t.stats,e.stats]),r=i=>{const a=i.stats.length?i.stats:[{label:"Keine Daten",percent:100}];return n.jsxs("div",{className:ae.classColumn,children:[n.jsx("h3",{children:i.name}),n.jsx("div",{className:ae.classBar,"aria-label":`Statverteilung ${i.name}`,children:a.map(l=>n.jsxs("span",{style:{width:`${l.percent}%`},className:ae.classSlice,children:[n.jsx("small",{children:l.label}),n.jsxs("strong",{children:[l.percent,"%"]})]},`${i.id}-${l.label}`))})]})};return n.jsxs("div",{className:ae.classCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Stat-Verteilung"}),n.jsx("div",{className:ae.classGrid,children:[t,e].map(r)}),s.length>0&&n.jsx("ul",{className:ae.classLegend,children:s.map(i=>n.jsx("li",{children:i},i))})]})}function CX(){const t=["Build, Edelsteine und Attribute nebeneinander legen","Buff-Food und Potions fuer beide Spieler abstimmen","Scrapbook- und Sammelstatus pruefen","Letzten Scan aktualisieren und Screens hochladen","Server- oder Account-Konflikte frueh klaeren"];return n.jsxs("section",{className:ae.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ae.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function TX(){return n.jsxs("section",{className:ae.infoCardExtended,children:[n.jsx("h3",{children:"Matchup-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/players/matchups/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ae.infoNote,children:"Sammle jetzt schon Vergleichsmetriken (DPS, PvP, Arena), damit die spaetere Automatik sie direkt uebernehmen kann."}),n.jsx("button",{type:"button",className:ae.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function EX(t,e,s){const[r,i]=J.useState([]),[a,l]=J.useState(!1);return J.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const m=d.toLowerCase(),g=Gh(it,"latest"),v=await an(kn(g,Ra("nameFold"),Dl(m),Ml(m+""),zn(15))),b=await an(kn(g,Zi("nameNgrams","array-contains",m),zn(15))),N=new Set,S=[],C=R=>{var K,G,te,ne,U,Z,he,ie,fe,be,ye,_e,we,de,pe,re,$e,He,pt,It,Mt,Ht,ss,Ne,Re,Ie,ze,at,ut;const M=R.data(),y=(K=R.ref.parent)==null?void 0:K.parent,w=y==null?void 0:y.parent;if((w==null?void 0:w.id)!=="players")return;const k=(te=(G=y==null?void 0:y.id)!=null?G:M.playerIdentifier)!=null?te:R.id;if(!k||N.has(k)||s&&k===s)return;const _=(Z=(U=M.name)!=null?U:(ne=M.values)==null?void 0:ne.Name)!=null?Z:"Unbekannter Spieler",A=(fe=(ie=M.server)!=null?ie:(he=M.values)==null?void 0:he.Server)!=null?fe:"Unknown";if(e!=="all"&&A!==e)return;const F=(de=(we=(ye=M.className)!=null?ye:(be=M.values)==null?void 0:be.Class)!=null?we:(_e=M.values)==null?void 0:_e.Class)!=null?de:"Unbekannte Klasse",P=($e=(re=M.guildName)!=null?re:(pe=M.values)==null?void 0:pe.Guild)!=null?$e:"",B=Co(M.level)||Co((He=M.values)==null?void 0:He.Level)||Co((pt=M.values)==null?void 0:pt.Level),$=Co(M.scrapbookPct)||Co((It=M.values)==null?void 0:It["Album %"])||Co((Mt=M.values)==null?void 0:Mt.AlbumPct)||Co((Ht=M.values)==null?void 0:Ht["Scrapbook %"]),W=(Re=(Ne=M.updatedAt)!=null?Ne:(ss=M.values)==null?void 0:ss.UpdatedAt)!=null?Re:M.timestamp?new Date(M.timestamp*1e3).toISOString():new Date().toISOString(),H=(Ie=M.nextUpdateAt)!=null?Ie:IX(12),q=AX((ze=M.values)!=null?ze:M.stats);N.add(k),S.push({id:k,name:_,tagline:(at=M.tagline)!=null?at:P?`Mitglied in ${P}`:F,server:A,className:F,guildName:P,level:B||0,scrapbookPct:$,lastScanAt:W,updatedAt:W,nextUpdateAt:H,freshness:(ut=M.freshness)!=null?ut:"unknown",stats:q})};v.forEach(C),b.forEach(C),u||(S.sort((R,M)=>R.name.localeCompare(M.name)),i(S))}catch(m){console.error("[Players Compare] player search failed",m),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const TN={Strength:"Staerke",Dexterity:"Geschick",Intelligence:"Intelligenz",Constitution:"Konstitution"};function AX(t={}){const e=Object.keys(TN).map(r=>{var a;const i=(a=t==null?void 0:t[r])!=null?a:t==null?void 0:t[r.toLowerCase()];return{label:TN[r],value:Co(i)}}).filter(r=>r.value>0),s=e.reduce((r,i)=>r+i.value,0);return s?e.map(r=>({label:r.label,percent:Math.max(1,Math.round(r.value/s*100))})):[]}function Co(t){const e=Number(t);return Number.isFinite(e)?e:0}function IX(t){const e=new Date;return e.setHours(e.getHours()+t),e.toISOString()}function PX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(EN,{to:"/guilds/rankings",title:"Rankings",desc:"Gildenrangliste & Trends"}),n.jsx(EN,{to:"/guilds/stats",title:"Stats",desc:"Aktivitt, Beitritte, Meilensteine"})]})]})}function EN({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function RX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ranglisten & Ladder der Gilden (Platzhalter)."})]})}function LX(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Guilds  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistiken zu Aktivitt, Mitgliederfluktuation und Erfolgen (Platzhalter)."})]})}function DX(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}const MX={weltenimwandel:"1boe40Rdxxziwp-pppJi4x2kU5HuLPDap",freedom:"1Q_vrmmrWqQsnxyxYNOOzHACF3Nf4VE59"};function FX(t){var s;const e=DX(t);return(s=MX[e])!=null?s:null}function BX(t,e=128){var a,l;const s=FX(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=Kl(s))!=null?a:null,i=r&&(l=sr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function Th(t,e=128){return BX(t,e).thumb}const nc={bg:"#0C1C2E",tile:"#1A2F4A",tileHover:"#25456B",border:"#2B4C73",text:"#FFFFFF",sub:"#B0C4D9",title:"#F5F9FF",icon:"#5C8BC6",header:"#1E3657",tableBg:"#14273E",line:"#2C4A73",glow:"rgba(92,139,198,0.45)"},Hg=(t,e)=>({...t||{},...e||{}}),AN=t=>{if(t==null||t==="")return"";const e=t instanceof Date?t:new Date(t),s=Math.floor((Date.now()-e.getTime())/864e5);return s<=0?"today":s===1?"yesterday":`${s}d ago`},$X=t=>Object.values(t||{}).reduce((e,s)=>e+(s||0),0),bn=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function OX(t){var v,b,N,S,C,R,M,T;const e=bn(t==null?void 0:t.sumBaseTotal);if(e!=null)return e;const s=bn(t==null?void 0:t.baseMain),r=bn(t==null?void 0:t.conBase);if(s!=null&&r!=null)return s+r;const i=(t==null?void 0:t.baseStats)||{},a=bn(i==null?void 0:i.sumBaseTotal);if(a!=null)return a;const l=bn(i==null?void 0:i.main),d=bn(i==null?void 0:i.con);if(l!=null&&d!=null)return l+d;const u=(t==null?void 0:t.values)||{},h=(b=(v=bn(u==null?void 0:u.SumBaseTotal))!=null?v:bn(u==null?void 0:u.sumBaseTotal))!=null?b:bn(u==null?void 0:u["Sum Base Total"]);if(h!=null)return h;const m=(C=(S=(N=bn(u==null?void 0:u.Main))!=null?N:bn(u==null?void 0:u.main))!=null?S:bn(u==null?void 0:u.BaseMain))!=null?C:bn(u==null?void 0:u.baseMain),g=(T=(M=(R=bn(u==null?void 0:u.Con))!=null?R:bn(u==null?void 0:u.con))!=null?M:bn(u==null?void 0:u.ConBase))!=null?T:bn(u==null?void 0:u.conBase);return m!=null&&g!=null?m+g:null}function wl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function VX(t,e=56){if(!t)return;const s=wl(t),r=Zs.find(i=>wl(i.label)===s||wl(i.key)===s)||Zs.find(i=>wl(i.label).startsWith(s)||s.startsWith(wl(i.label))||wl(i.key).startsWith(s)||s.startsWith(wl(i.key)));return r?sr(r.iconUrl,e):void 0}function UX({name:t,memberClass:e,online:s,theme:r=nc}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=VX(e,56);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const zX={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"},HX=({role:t})=>n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(zX[t]||""),children:t});function IN(t,e){const s=(t!=null?t:"").trim();if(s)return s;if(typeof e=="number"){const r=new Date(e);if(!Number.isNaN(r.getTime()))return r.toLocaleString("de-DE")}return""}function GX(t){const e=typeof(t==null?void 0:t.sumBaseTotal)=="number"?t.sumBaseTotal:null,s=typeof(t==null?void 0:t.baseMain)=="number"?t.baseMain:null,r=typeof(t==null?void 0:t.conBase)=="number"?t.conBase:null,i=e!=null?e:s!=null&&r!=null?s+r:null;return i!=null?i.toLocaleString("de-DE"):""}function Bp({label:t,value:e,theme:s=nc}){return n.jsxs("div",{className:"rounded-XL border p-3 rounded-xl",style:{borderColor:s.border,background:s.tile},children:[n.jsx("div",{className:"text-[11px] uppercase tracking-wide opacity-70",children:t}),n.jsx("div",{className:"text-lg font-semibold",style:{color:s.title},children:e})]})}function WX({member:t,theme:e,actions:s,extraKPIs:r}){var m,g,v,b,N,S,C,R,M;if(!t)return null;const i=Hg(nc,e),a=t,l=IN((g=(m=a.guildJoined)!=null?m:a.joinedAt)!=null?g:null,(v=a.guildJoinedMs)!=null?v:null),d=IN((b=a.lastActivity)!=null?b:null,(N=a.lastActivityMs)!=null?N:typeof a.lastOnline=="number"?a.lastOnline:null),u=GX(a),h=typeof a.totalStats=="number"?a.totalStats.toLocaleString("de-DE"):"";return n.jsxs("div",{className:"rounded-2xl border p-5 mb-4 relative overflow-hidden",style:{borderColor:i.border,background:`linear-gradient(180deg, ${i.tile} 0%, ${i.tableBg} 100%)`},children:[n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:`inset 0 0 0 1px ${i.border}, 0 0 160px 16px ${i.glow}`}}),n.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[n.jsx("div",{className:"shrink-0",children:n.jsx(UX,{name:t.name,memberClass:(R=(C=a.class)!=null?C:(S=a.values)==null?void 0:S.Class)!=null?R:null,online:a.online,theme:i})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("div",{className:"text-xl font-semibold truncate",style:{color:i.title},children:t.name}),a.role&&n.jsx(HX,{role:a.role})]}),n.jsxs("div",{className:"text-sm mt-0.5",style:{color:i.sub},children:[a.class||"",a.server?`  ${a.server}`:"","  Joined ",l,"  Last ",d]})]}),n.jsx("div",{className:"ml-auto",children:s})]}),n.jsxs("div",{className:"relative z-10 mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsx(Bp,{label:"Level",value:(M=a.level)!=null?M:"",theme:i}),typeof a.scrapbook=="number"&&n.jsx(Bp,{label:"Scrapbook",value:`${a.scrapbook}%`,theme:i}),n.jsx(Bp,{label:"Sum Base",value:u,theme:i}),n.jsx(Bp,{label:"Total Stats",value:h,theme:i}),r]})]})}function jl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function qX(t,e=40){if(!t)return;const s=jl(t);let r=Zs.find(i=>jl(i.label)===s||jl(i.key)===s)||Zs.find(i=>jl(i.label).startsWith(s)||s.startsWith(jl(i.label))||jl(i.key).startsWith(s)||s.startsWith(jl(i.key)));return r?sr(r.iconUrl,e):void 0}function KX({name:t,memberClass:e,online:s,theme:r=nc}){const i=t.split("_").map(l=>l[0]).join("").slice(0,2).toUpperCase(),a=qX(e,40);return n.jsxs("div",{className:"relative",children:[a?n.jsx("img",{src:a,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:r.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:l=>{const d=l.currentTarget.parentElement;d&&(d.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${r.tile};color:${r.title};border-color:${r.border}">${i}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:r.tile,color:r.title,borderColor:r.border},children:i}),s&&n.jsx("span",{className:"absolute -bottom-1 -right-1 h-3 w-3 rounded-full",style:{background:"#22c55e",boxShadow:`0 0 0 2px ${r.bg}`}})]})}const QX=({role:t})=>{const e={"Guild Master":"bg-amber-600/30 text-amber-200 border-amber-500/50",Officer:"bg-cyan-600/30 text-cyan-200 border-cyan-500/50",Member:"bg-emerald-600/30 text-emerald-200 border-emerald-500/50",Recruit:"bg-slate-600/30 text-slate-200 border-slate-500/50"};return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold border "+(e[t]||""),children:t})};function XX({rows:t,selId:e,onSelect:s,rightCols:r,theme:i}){const a=Hg(nc,i);return n.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:a.border},children:[n.jsx("style",{children:".no-scrollbar::-webkit-scrollbar{width:0;height:0}.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}"}),n.jsxs("div",{className:"max-h=[520px] max-h-[520px] overflow-auto no-scrollbar",style:{background:a.tableBg},children:[n.jsx("div",{className:"h-8 sticky top-0",style:{background:a.header}}),t.map((l,d)=>{var u,h,m;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"w-full text-left px-3 py-3 grid items-center gap-3 transition "+(d%2?"bg-slate-800/10":"")+(l.id===e?" bg-slate-800/40":" hover:bg-slate-800/20"),style:{gridTemplateColumns:"auto 1fr auto auto auto auto"},children:[n.jsx(KX,{name:l.name,memberClass:(m=(h=l.class)!=null?h:(u=l.values)==null?void 0:u.Class)!=null?m:null,online:l.online,theme:a}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs truncate",style:{color:a.sub},children:[l.class,l.server?`  ${l.server}`:""]})]}),n.jsx("div",{className:"justify-self-end",children:n.jsx(QX,{role:l.role})}),r(l)]},l.id)})]})]})}function Sl(t){return String(t!=null?t:"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function YX(t,e=40){if(!t)return;const s=Sl(t);let r=Zs.find(i=>Sl(i.label)===s||Sl(i.key)===s)||Zs.find(i=>Sl(i.label).startsWith(s)||s.startsWith(Sl(i.label))||Sl(i.key).startsWith(s)||s.startsWith(Sl(i.key)));return r?sr(r.iconUrl,e):void 0}function JX({rows:t,selId:e,onSelect:s,footer:r,theme:i}){const a=Hg(nc,i);return n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(l=>{var v,b,N,S,C,R,M,T,y;const d=l,u=l.name.slice(0,2).toUpperCase(),h=YX((N=(b=d.class)!=null?b:(v=d.values)==null?void 0:v.Class)!=null?N:null,40),m=typeof d.level=="number"?d.level:typeof((S=d.values)==null?void 0:S.Level)=="number"?d.values.Level:"",g=typeof d.scrapbook=="number"?`${d.scrapbook}%`:typeof((C=d.values)==null?void 0:C.Scrapbook)=="number"?`${d.values.Scrapbook}%`:null;return n.jsxs("button",{onClick:()=>s(l.id),"aria-pressed":l.id===e,className:"group text-left rounded-2xl border p-4 transition-transform duration-150 hover:-translate-y-1 focus:-translate-y-1 outline-none"+(l.id===e?" ring-1":""),style:{borderColor:a.border,background:`linear-gradient(180deg, ${a.tile} 0%, ${a.tableBg} 100%)`,boxShadow:l.id===e?`0 12px 30px -12px ${a.glow}`:"none"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[h?n.jsx("img",{src:h,alt:"",className:"h-10 w-10 rounded-2xl border object-contain",style:{borderColor:a.border,background:"transparent",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))"},onError:w=>{const D=w.currentTarget.parentElement;D&&(D.innerHTML=`<div class="grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold" style="background:${a.tile};color:${a.title};border-color:${a.border}">${u}</div>`)}}):n.jsx("div",{className:"grid place-items-center h-10 w-10 rounded-2xl border text-sm font-bold",style:{background:a.tile,color:a.title,borderColor:a.border},children:u}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-semibold truncate",style:{color:a.title},children:l.name}),n.jsxs("div",{className:"text-xs",style:{color:a.sub},children:[(T=(M=d.class)!=null?M:(R=d.values)==null?void 0:R.Class)!=null?T:"",d.server?`  ${d.server}`:""]})]}),n.jsx("div",{className:"ml-auto text-xs px-2 py-0.5 rounded-full border",style:{borderColor:a.border},children:(y=d.role)!=null?y:""})]}),n.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Level"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:m})]}),g&&n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] uppercase opacity-70",children:"Book"}),n.jsx("div",{className:"font-semibold",style:{color:a.title},children:g})]})]}),n.jsx("div",{className:"mt-3",children:r(l)})]},l.id)})})}const ZX=t=>{if(!t)return;const e={};return["main","con","sumBaseTotal"].forEach(s=>{const r=t[s];typeof r=="number"&&(e[s]=r)}),Object.keys(e).length?e:void 0};function eY({members:t,defaultView:e="list",defaultQuery:s="",defaultSort:r={key:"level",dir:"desc"},showControls:i=!0,selectedId:a,onSelect:l,renderActions:d,renderKPIs:u,theme:h}){var F;const m=E.useMemo(()=>Hg(nc,h),[h]),[g,v]=E.useState(e),[b,N]=E.useState(s),[S,C]=E.useState(r.key),[R,M]=E.useState(r.dir),[T,y]=E.useState((F=t[0])==null?void 0:F.id),w=a!=null?a:T,D=P=>{a||y(P);const B=t.find($=>$.id===P);B&&l&&l(B)},k=E.useMemo(()=>{const P=b.trim().toLowerCase();return P?t.filter(B=>B.name.toLowerCase().includes(P)||B.class.toLowerCase().includes(P)||String(B.role).toLowerCase().includes(P)):t},[t,b]),_=E.useMemo(()=>{const P=R==="asc"?1:-1,B=$=>{var W,H;switch(S){case"sumBaseStats":{const q=OX($);return q==null?-1/0:q}case"totalStats":return(H=(W=$.totalStats)!=null?W:$X(ZX($.baseStats)))!=null?H:-1/0;default:return $[S]}};return[...k].sort(($,W)=>{const H=B($),q=B(W);return H===q?0:H>q?P:-P})},[k,S,R]),A=E.useMemo(()=>_.find(P=>P.id===w)||_[0],[_,w]);return n.jsxs("div",{children:[i&&n.jsxs("div",{className:"mb-4 grid gap-3 md:grid-cols-2 lg:grid-cols-4 rounded-2xl border p-4",style:{background:m.tile,borderColor:m.border},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"View"}),n.jsxs("select",{value:g,onChange:P=>v(P.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[n.jsx("option",{className:"bg-slate-800",value:"list",children:"List"}),n.jsx("option",{className:"bg-slate-800",value:"cards",children:"Cards"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Search"}),n.jsx("input",{value:b,onChange:P=>N(P.target.value),placeholder:"name / class / role",className:"w-full rounded-xl border px-3 py-2 bg-transparent placeholder-slate-400",style:{borderColor:m.border}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm w-24",style:{color:m.sub},children:"Sort by"}),n.jsxs("select",{value:String(S),onChange:P=>C(P.target.value),className:"w-full rounded-xl border px-3 py-2 bg-transparent",style:{borderColor:m.border},children:[n.jsx("option",{className:"bg-slate-800",value:"level",children:"Level"}),n.jsx("option",{className:"bg-slate-800",value:"scrapbook",children:"Scrapbook"}),n.jsx("option",{className:"bg-slate-800",value:"name",children:"Name"}),n.jsx("option",{className:"bg-slate-800",value:"role",children:"Role"}),n.jsx("option",{className:"bg-slate-800",value:"sumBaseStats",children:"Sum Base Stats"}),n.jsx("option",{className:"bg-slate-800",value:"totalStats",children:"Total Stats"})]}),n.jsx("button",{onClick:()=>M(P=>P==="asc"?"desc":"asc"),className:"rounded-xl border px-3 py-2",style:{borderColor:m.border},children:R==="asc"?"":""})]})]}),n.jsx(WX,{member:A,actions:A&&(d?d(A):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Profile"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Compare"}),n.jsx("button",{className:"text-xs rounded-lg border px-2.5 py-1.5",style:{borderColor:m.border},children:"Message"})]})),extraKPIs:A&&u?u(A):null,theme:m}),g==="list"?n.jsx(XX,{rows:_,selId:w,onSelect:D,theme:m,rightCols:P=>{var B;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-right text-sm",children:(B=P.level)!=null?B:""}),n.jsx("div",{className:"text-right text-xs",style:{color:m.sub},children:AN(P.lastOnline)})]})}}):n.jsx(JX,{rows:_,selId:w,onSelect:D,theme:m,footer:P=>n.jsx("div",{className:"flex items-center justify-between text-xs",style:{color:m.sub},children:n.jsxs("span",{children:["Last ",AN(P.lastOnline)]})})})]})}function tY({guildName:t,server:e,emblemUrl:s,lastScanISO:r,members:i,avgLevel:a,totalPower:l,activity7d:d,topClasses:u,tickerItems:h,href:m,onClick:g,className:v}){const b=!!OE(),N=E.useMemo(()=>{if(!r)return null;const B=Date.now()-new Date(r).getTime(),$=Math.max(0,Math.floor(B/6e4));if($<60)return`${$}m`;const W=Math.floor($/60);return W<24?`${W}h`:`${Math.floor(W/24)}d`},[r]),S=zu(0),C=zu(0),R=zu(0),M=zu(0),T=Ap(S,B=>Math.round(B).toString()),y=Ap(C,B=>Math.round(B).toString()),w=Ap(R,B=>Math.round(B).toLocaleString()),D=Ap(M,B=>`${Math.round(B)}%`);E.useEffect(()=>{const B=b?0:.6;if(B===0){S.set(i),C.set(a),R.set(l!=null?l:0),M.set(d!=null?d:0);return}const $=[Ip(S,i,{duration:B}),Ip(C,a,{duration:B}),Ip(R,l!=null?l:0,{duration:B}),Ip(M,d!=null?d:0,{duration:B})];return()=>$.forEach(W=>W.stop())},[i,a,l,d,b]);const k=E.useRef(null);E.useEffect(()=>{if(b||!k.current)return;const B=k.current;let $=0,W=0;const H=()=>{W+=.016;const q=W*14%140-20;B.style.setProperty("--s-x",`${q}%`),$=requestAnimationFrame(H)};return $=requestAnimationFrame(H),()=>cancelAnimationFrame($)},[b]);const _={bgFrom:"#0A1728",bgTo:"#152A42",border:"#2B4C73",title:"#F5F9FF",text:"#FFFFFF",soft:"#B0C4D9",accent:"#5C8BC6",line:"#2C4A73"},A=100,F=m?"a":"div",P=m?{href:m}:{onClick:g};return n.jsxs(F,{...P,className:["group relative block w-full overflow-hidden rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-[#5C8BC6]/70",v!=null?v:""].join(" "),style:{background:`linear-gradient(135deg, ${_.bgFrom}, ${_.bgTo})`},children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"radial-gradient(120% 120% at 0% 50%, rgba(0,0,0,0.45) 0%, transparent 45%)"}}),n.jsxs("div",{className:"grid items-stretch gap-0 relative",style:{gridTemplateColumns:"minmax(220px, 22vw) 1fr"},children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"relative h-[170px] md:h-[190px] lg:h-[210px] w-full overflow-hidden",style:{borderTopLeftRadius:16,borderBottomLeftRadius:16},children:[n.jsxs("div",{className:"absolute inset-0 will-change-transform",style:{perspective:"1500px",transform:"rotateY(-18deg) rotateX(8deg) rotateZ(-2deg) skewX(-3deg) scale(1.02)",transformOrigin:"25% 50%"},children:[s?n.jsx("img",{src:s,alt:`${t} Emblem`,className:"h-full w-full object-cover",loading:"lazy"}):n.jsx("div",{className:"h-full w-full grid place-items-center",style:{background:"#14273E"},children:n.jsx("span",{className:"text-3xl font-bold text-white/85",children:(e==null?void 0:e.slice(0,3).toUpperCase())||"SRV"})}),n.jsx("div",{ref:k,"aria-hidden":!0,className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.40) 12%, rgba(255,255,255,0) 24%)",backgroundSize:"200% 100%",backgroundPosition:"var(--s-x, -20%) 0%",mixBlendMode:"overlay",filter:"blur(1px)",opacity:.55}})]}),N&&n.jsxs("div",{className:"absolute left-2 top-2 rounded-md px-2 py-0.5 text-xs font-semibold",style:{background:"rgba(10,23,40,0.75)",color:_.text,boxShadow:"0 4px 12px rgba(0,0,0,0.35)",border:`1px solid ${_.border}`},title:`Last scan: ${new Date(r).toLocaleString()}`,children:["Updated ",N]}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute right-0 top-0 h-full w-8",style:{backgroundImage:`linear-gradient(${A}deg, rgba(255,255,255,0) 46%, rgba(92,139,198,0.98) 50%, rgba(255,255,255,0) 54%)`,opacity:.95}}),n.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute -right-0.5 top-0 h-full w-14",style:{backgroundImage:`linear-gradient(${A}deg, rgba(0,0,0,0) 44%, rgba(0,0,0,0.4) 58%, rgba(0,0,0,0) 70%)`,mixBlendMode:"multiply",opacity:.55}})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{backgroundImage:`repeating-linear-gradient(${A}deg, transparent 0 46px, ${_.line}55 46px 47px)`,maskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent, black 8%, black 100%)",opacity:.5}}),n.jsxs("div",{className:"relative h-full px-5 md:px-7 py-4 md:py-5 flex flex-col justify-center",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[n.jsx("h3",{className:"truncate font-extrabold",style:{color:_.title,fontSize:22},children:t}),n.jsx("span",{className:"rounded-md px-2 py-0.5 text-[11px]",style:{background:"rgba(30,47,71,0.9)",color:_.soft,border:`1px solid ${_.border}`},children:e})]}),n.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:[n.jsx($p,{label:"Members",value:T}),n.jsx($p,{label:" Level",value:y}),n.jsx($p,{label:"Total Power",value:w}),typeof d=="number"&&n.jsx($p,{label:"Activity (7d)",value:D})]}),u!=null&&u.length?n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-[11px] uppercase tracking-wider",style:{color:_.soft},children:"Top Classes"}),u.slice(0,3).map(B=>n.jsxs("span",{className:"inline-flex items-center gap-2 rounded-md px-2 py-1",style:{background:"rgba(30,47,71,0.9)",border:`1px solid ${_.border}`,color:_.text},children:[B.iconUrl?n.jsx("img",{src:B.iconUrl,alt:B.key,className:"h-4 w-4 object-contain"}):n.jsx("span",{className:"h-4 w-4 rounded-sm",style:{background:_.accent,opacity:.85}}),n.jsxs("span",{className:"text-xs",children:[B.key," ",n.jsxs("span",{className:"opacity-70",children:["(",Math.round(B.percent),"%)"]})]})]},B.key))]}):null]})]})]}),h!=null&&h.length?n.jsx("div",{className:"relative py-2",style:{borderTop:`1px solid ${_.border}`,background:"linear-gradient(180deg, rgba(20,39,62,0.5), rgba(20,39,62,0.15))"},children:n.jsx(sY,{items:h,muted:b,color:_.soft})}):null]})}function $p({label:t,value:e}){return n.jsxs("div",{className:"relative z-10 min-w-0",children:[n.jsx("div",{className:"text-[11px] md:text-xs uppercase tracking-wider text-[#B0C4D9]",children:t}),n.jsx(BE.div,{className:"truncate text-xl md:text-2xl font-bold text-white","aria-live":"polite",children:e})]})}function sY({items:t,muted:e,color:s}){const r=E.useRef(null);return E.useEffect(()=>{if(e||!r.current)return;const i=r.current;let a=0,l=0;const d=()=>{a+=.016;const u=a*40%(i.scrollWidth+60);i.style.transform=`translateX(${-u}px)`,l=requestAnimationFrame(d)};return l=requestAnimationFrame(d),()=>cancelAnimationFrame(l)},[e]),n.jsx("div",{className:"overflow-hidden",children:n.jsx("div",{ref:r,className:"whitespace-nowrap will-change-transform",style:{color:s},children:t.concat(t).map((i,a)=>n.jsx("span",{className:"mx-6 text-xs align-middle",children:i},a))})})}const nY="_wrap_q5gkc_53",rY="_banner_q5gkc_59",iY="_bannerRowTop_q5gkc_61",aY="_bannerStripe_q5gkc_71",oY="_bannerTitle_q5gkc_79",lY="_bannerRowBottom_q5gkc_93",cY="_bannerSub_q5gkc_95",dY="_monthPickerWrap_q5gkc_101",uY="_monthPickerLabel_q5gkc_113",hY="_monthPicker_q5gkc_101",mY="_monthButton_q5gkc_131",pY="_monthButtonText_q5gkc_159",fY="_chev_q5gkc_161",gY="_monthList_q5gkc_165",xY="_monthOption_q5gkc_195",yY="_monthBadge_q5gkc_221",vY="_gridRow_q5gkc_237",bY="_gridRowBottom_q5gkc_239",_Y="_sideImage_q5gkc_253",wY="_sideImagePh_q5gkc_271",jY="_emblemPanel_q5gkc_275",SY="_emblemFrame_q5gkc_295",NY="_emblemImg_q5gkc_297",kY="_emblemPlaceholder_q5gkc_299",CY="_emblemShimmer_q5gkc_307",TY="_emblemCaption_q5gkc_315",EY="_card_q5gkc_319",AY="_cardHeader_q5gkc_331",IY="_cardTitle_q5gkc_339",PY="_cardSubtitle_q5gkc_341",RY="_headerRight_q5gkc_343",LY="_cardBody_q5gkc_345",DY="_tableWrap_q5gkc_349",MY="_tableTitle_q5gkc_351",FY="_table_q5gkc_349",BY="_th_q5gkc_355",$Y="_td_q5gkc_355",OY="_tdEmpty_q5gkc_365",VY="_sectionDivider_q5gkc_375",UY="_sectionStripe_q5gkc_389",zY="_sectionTitle_q5gkc_397",wt={wrap:nY,banner:rY,bannerRowTop:iY,bannerStripe:aY,bannerTitle:oY,bannerRowBottom:lY,bannerSub:cY,monthPickerWrap:dY,monthPickerLabel:uY,monthPicker:hY,monthButton:mY,monthButtonText:pY,chev:fY,monthList:gY,monthOption:xY,monthBadge:yY,gridRow:vY,gridRowBottom:bY,sideImage:_Y,sideImagePh:wY,emblemPanel:jY,emblemFrame:SY,emblemImg:NY,emblemPlaceholder:kY,emblemShimmer:CY,emblemCaption:TY,card:EY,cardHeader:AY,cardTitle:IY,cardSubtitle:PY,headerRight:RY,cardBody:LY,tableWrap:DY,tableTitle:MY,table:FY,th:BY,td:$Y,tdEmpty:OY,sectionDivider:VY,sectionStripe:UY,sectionTitle:zY};function HY(t){if(t==null||t==="")return"";const e=typeof t=="number"?t:Number(String(t).replace(/[^\d.-]/g,""));return isFinite(e)?Math.abs(e)>=1e9?(e/1e9).toFixed(2)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(2)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(2)+"K":e.toLocaleString("en-US"):String(t)}function PN(t,e="de-DE"){const s=new Date(t);return Number.isNaN(s.getTime())?"":s.toLocaleDateString(e,{day:"2-digit",month:"2-digit"})}const RN=({title:t,subtitle:e,children:s,rightBadge:r})=>n.jsxs("section",{className:wt.card,children:[(t||e||r)&&n.jsxs("header",{className:wt.cardHeader,children:[n.jsxs("div",{className:wt.headerTitles,children:[t&&n.jsx("h3",{className:wt.cardTitle,children:t}),e&&n.jsx("div",{className:wt.cardSubtitle,children:e})]}),r&&n.jsx("div",{className:wt.headerRight,children:r})]}),n.jsx("div",{className:wt.cardBody,children:s})]}),LN=({block:t})=>{var r,i;const e=t.columns,s=(r=t.rows)!=null?r:[];return n.jsxs("div",{className:wt.tableWrap,role:"region","aria-label":(i=t.title)!=null?i:"table",children:[t.title&&n.jsx("div",{className:wt.tableTitle,children:t.title}),n.jsxs("table",{className:wt.table,children:[n.jsx("thead",{children:n.jsx("tr",{children:e.map(a=>n.jsx("th",{className:wt.th,style:{width:a.width},children:a.label},a.key))})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{className:wt.tdEmpty,colSpan:e.length,children:"No data"})}):s.map((a,l)=>{var d;return n.jsx("tr",{children:e.map(u=>{var v;const h=a[u.key],m=typeof h=="number"||typeof h=="string"?h:"",g=u.format==="num"?HY(m):m;return n.jsx("td",{className:wt.td,"data-align":(v=u.align)!=null?v:"left",children:u.render?u.render(a):g},u.key)})},(d=a.id)!=null?d:l)})})]}),t.footer&&n.jsx("div",{className:wt.tableFooter,children:t.footer})]})},GY=(t,e)=>{E.useEffect(()=>{function s(r){t.current&&(t.current.contains(r.target)||e())}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t,e])},WY=({months:t,currentKey:e,onChange:s,fallbackDate:r})=>{var m;if(!(Array.isArray(t)&&t.length>0&&e))return n.jsx("div",{className:wt.bannerSub,children:r!=null?r:""});const a=E.useRef(null),[l,d]=E.useState(!1);GY(a,()=>d(!1));const u=t.find(g=>g.key===e),h=u?`${PN(u.fromISO)}${PN(u.toISO)}  ${u.daysSpan}d${u.available?"":"  n/a"}`:void 0;return n.jsxs("div",{className:wt.monthPickerWrap,children:[n.jsx("div",{className:wt.monthPickerLabel,children:"Monat"}),n.jsxs("div",{className:wt.monthPicker,ref:a,children:[n.jsxs("button",{type:"button",className:wt.monthButton,onClick:()=>d(g=>!g),"aria-haspopup":"listbox","aria-expanded":l,children:[n.jsx("span",{className:wt.monthButtonText,children:(m=u==null?void 0:u.label)!=null?m:""}),n.jsx("svg",{className:wt.chev,width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",children:n.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),l&&n.jsx("ul",{className:wt.monthList,role:"listbox",children:t.map(g=>n.jsx("li",{children:n.jsx("button",{type:"button",className:wt.monthOption,onClick:()=>{d(!1),s==null||s(g.key)},role:"option","aria-selected":g.key===e,children:g.label})},g.key))})]}),h&&n.jsx("span",{className:wt.monthBadge,children:h})]})},qY=({title:t,monthRange:e,months:s,currentMonthKey:r,onMonthChange:i})=>n.jsxs("div",{className:wt.banner,children:[n.jsxs("div",{className:wt.bannerRowTop,children:[n.jsx("div",{className:wt.bannerStripe}),n.jsx("div",{className:wt.bannerTitle,children:t}),n.jsx("div",{className:wt.bannerStripe})]}),n.jsx("div",{className:wt.bannerRowBottom,children:n.jsx(WY,{months:s,currentKey:r,onChange:i,fallbackDate:e})})]}),KY=({emblemUrl:t,caption:e})=>n.jsxs("div",{className:wt.emblemPanel,children:[n.jsxs("div",{className:wt.emblemFrame,children:[t?n.jsx("img",{src:t,alt:"Guild Emblem",className:wt.emblemImg}):n.jsx("div",{className:wt.emblemPlaceholder,children:"Emblem"}),n.jsx("div",{className:wt.emblemShimmer})]}),e&&n.jsx("div",{className:wt.emblemCaption,children:e})]}),DN=({imgUrl:t,alt:e})=>n.jsx("div",{className:wt.sideImage,children:t?n.jsx("img",{src:t,alt:e!=null?e:"side"}):n.jsx("div",{className:wt.sideImagePh,children:"Image"})}),hv=({children:t,className:e})=>n.jsx("div",{className:`${wt.gridRow} ${e!=null?e:""}`,children:t}),QY=({children:t})=>n.jsxs("div",{className:wt.sectionDivider,children:[n.jsx("div",{className:wt.sectionStripe}),n.jsx("div",{className:wt.sectionTitle,children:t}),n.jsx("div",{className:wt.sectionStripe})]}),XY=({data:t,onMonthChange:e})=>{const{header:s,panels:r,tablesTop:i,tablesBottom:a}=t;return n.jsxs("div",{className:wt.wrap,children:[n.jsx(qY,{title:s.title,monthRange:s.monthRange,months:s.months,currentMonthKey:s.currentMonthKey,onMonthChange:e}),n.jsxs(hv,{children:[n.jsx(DN,{imgUrl:r==null?void 0:r.leftImageUrl,alt:"left"}),n.jsx(KY,{emblemUrl:s.emblemUrl,caption:s.centerCaption}),n.jsx(DN,{imgUrl:r==null?void 0:r.rightImageUrl,alt:"right"})]}),n.jsx(hv,{children:i.map((l,d)=>n.jsx(RN,{title:l.title,subtitle:l.subtitle,children:n.jsx(LN,{block:l})},d))}),n.jsx(QY,{children:"Guild Overview"}),n.jsx(hv,{className:wt.gridRowBottom,children:a.map((l,d)=>n.jsx(RN,{title:l.title,subtitle:l.subtitle,children:n.jsx(LN,{block:l})},d))})]})},YY=({guildId:t,guildName:e,guildServer:s})=>{const[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(void 0),h=E.useRef({}),[m,g]=E.useState(()=>Op(e,s));E.useEffect(()=>{let b=!1;async function N(){var S,C,R,M,T;i(!0);try{const y=tc(it,`guilds/${t}/history_monthly`),w=await an(y),D=[];for(const A of w.docs){const F=A.id,P=A.data();if(!P)continue;h.current[F]=P;const B=(S=P==null?void 0:P.meta)!=null?S:{},$=B.fromISO||B.baselineISO||B.firstISO||"",W=B.toISO||B.latestISO||B.nowISO||"",H=Number((C=B.daysSpan)!=null?C:Math.floor((+new Date(W)-+new Date($))/864e5))||0,q=!!((M=(R=P==null?void 0:P.status)==null?void 0:R.available)!=null?M:$&&W&&H<=40),K=B.label||new Date(F+"-01T00:00:00").toLocaleString("de-DE",{month:"short",year:"numeric"});D.push({key:F,label:K,fromISO:$||new Date(F+"-01").toISOString(),toISO:W||new Date(F+"-28").toISOString(),daysSpan:H,available:q,reason:q||(T=P==null?void 0:P.status)==null?void 0:T.reason})}if(D.sort((A,F)=>A.key<F.key?1:-1),b)return;if(D.length===0){l(null),u(void 0),g(Op(e,s)),i(!1);return}l(D);const k=D[0].key;u(k);const _=h.current[k];g(MN(_,{guildName:e,guildServer:s,currentMonthKey:k,months:D}))}catch(y){console.error(y),l(null),u(void 0),g(Op(e,s))}finally{b||i(!1)}}return N(),()=>{b=!0}},[t,e,s]);async function v(b){u(b);let N=h.current[b];if(!N)try{const S=Ot(it,`guilds/${t}/history_monthly/${b}`),C=await Os(S);C.exists()?(N=C.data(),h.current[b]=N):N=null}catch(S){console.error(S),N=null}if(!N){g(Op(e,s,{currentMonthKey:b,months:a!=null?a:void 0}));return}g(MN(N,{guildName:e,guildServer:s,currentMonthKey:b,months:a!=null?a:void 0}))}return n.jsx(XY,{data:m,onMonthChange:v})};function Op(t,e,s){return{header:{title:`${t}  Monthly Progress`,monthRange:"-",emblemUrl:Th(t,512)||void 0,centerCaption:"Most Base Stats gained",currentMonthKey:s==null?void 0:s.currentMonthKey,months:s==null?void 0:s.months},panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:[Nl("Most Base Stats gained",e?`Server ${e}`:void 0),Nl("Sum Base Stats"),Nl("Highest Base Stats")],tablesBottom:[Nl("Main & Con"),Nl("Sum Base Stats"),Nl("Highest Base Stats"),Nl("Highest Total Stats")]}}function Nl(t,e){return{title:t,subtitle:e,columns:[],rows:[]}}function MN(t,e){var l,d,u,h,m,g,v,b;(l=t==null?void 0:t.meta)!=null;const s={title:`${e.guildName}  Monthly Progress`,monthRange:void 0,emblemUrl:Th(e.guildName,512)||void 0,centerCaption:"Most Base Stats gained",months:e.months,currentMonthKey:e.currentMonthKey},r=[{key:"rank",label:"#",width:36,align:"right"},{key:"name",label:"Name"}],i=[{title:"Most Base Stats gained",subtitle:e.guildServer?`Server ${e.guildServer}`:void 0,columns:[...r,{key:"level",label:"Level",width:70,align:"right",format:"num"},{key:"base",label:"Base",width:80,align:"right",format:"num"},{key:"delta",label:"",width:70,align:"right",format:"num"}],rows:((d=t==null?void 0:t.mostBaseGained)!=null?d:[]).map((N,S)=>{var C,R,M,T,y,w,D,k;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",level:(T=(M=N.levelLatest)!=null?M:N.level)!=null?T:null,base:(w=(y=N.baseLatest)!=null?y:N.base)!=null?w:null,delta:(k=(D=N.baseDelta)!=null?D:N.delta)!=null?k:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((u=t==null?void 0:t.sumBaseStats)!=null?u:[]).map((N,S)=>{var C,R,M,T,y,w,D;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",base:(M=N.base)!=null?M:null,stam:(y=(T=N.stamDelta)!=null?T:N.staminaDelta)!=null?y:null,sho:(D=(w=N.shoDelta)!=null?w:N.shootingDelta)!=null?D:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((h=t==null?void 0:t.highestBaseStats)!=null?h:[]).map((N,S)=>{var C,R,M,T,y;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",stats:(T=(M=N.stats)!=null?M:N.base)!=null?T:null,delta:(y=N.delta)!=null?y:null}})}],a=[{title:"Main & Con",columns:[...r,{key:"class",label:"Class",width:72,align:"center"},{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((m=t==null?void 0:t.mainAndCon)!=null?m:[]).map((N,S)=>{var C,R,M,T,y,w;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",class:(T=(M=N.class)!=null?M:N.className)!=null?T:"",stats:(y=N.stats)!=null?y:null,delta:(w=N.delta)!=null?w:null}})},{title:"Sum Base Stats",columns:[...r,{key:"base",label:"Base",width:100,align:"right",format:"num"},{key:"stam",label:"Stam ",width:90,align:"right",format:"num"},{key:"sho",label:"Sho ",width:90,align:"right",format:"num"}],rows:((g=t==null?void 0:t.sumBaseStats)!=null?g:[]).map((N,S)=>{var C,R,M,T,y;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",base:(M=N.base)!=null?M:null,stam:(T=N.stamDelta)!=null?T:null,sho:(y=N.shoDelta)!=null?y:null}})},{title:"Highest Base Stats",columns:[...r,{key:"stats",label:"Stats",width:100,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((v=t==null?void 0:t.highestBaseStats)!=null?v:[]).map((N,S)=>{var C,R,M,T;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",stats:(M=N.stats)!=null?M:null,delta:(T=N.delta)!=null?T:null}})},{title:"Highest Total Stats",columns:[...r,{key:"total",label:"Total Stats",width:120,align:"right",format:"num"},{key:"delta",label:"",width:80,align:"right",format:"num"}],rows:((b=t==null?void 0:t.highestTotalStats)!=null?b:[]).map((N,S)=>{var C,R,M,T;return{id:(C=N.playerId)!=null?C:S,rank:S+1,name:(R=N.name)!=null?R:"-",total:(M=N.total)!=null?M:null,delta:(T=N.delta)!=null?T:null}})}];return{header:s,panels:{leftImageUrl:void 0,rightImageUrl:void 0},tablesTop:i,tablesBottom:a}}const JY="_root_r1uj3_5",ZY="_sectionDivider_r1uj3_17",eJ="_sectionStripe_r1uj3_31",tJ="_sectionTitle_r1uj3_33",Cu={root:JY,sectionDivider:ZY,sectionStripe:eJ,sectionTitle:tJ},sJ="_root_4jywc_1",nJ="_accent_4jywc_31",FN={root:sJ,default:"_default_4jywc_29",accent:nJ};function Wo({text:t,tone:e="default",className:s}){return n.jsx("div",{className:`${FN.root} ${FN[e]} ${s!=null?s:""}`.trim(),children:t})}const rJ="_card_vvv3s_3",iJ="_wrap_vvv3s_31",aJ="_divider_vvv3s_45",oJ="_rows_vvv3s_77",lJ="_row_vvv3s_77",cJ="_left_vvv3s_109",dJ="_label_vvv3s_111",uJ="_avgHead_vvv3s_113",hJ="_avgNum_vvv3s_115",mJ="_top3_vvv3s_121",pJ="_chip_vvv3s_123",fJ="_badge_vvv3s_151",gJ="_name_vvv3s_159",xJ="_score_vvv3s_161",yJ="_headerSpacer_vvv3s_167",er={card:rJ,wrap:iJ,divider:aJ,rows:oJ,row:lJ,left:cJ,label:dJ,avgHead:uJ,avgNum:hJ,top3:mJ,chip:pJ,badge:fJ,name:gJ,score:xJ,headerSpacer:yJ};function vJ({name:t,value:e,classLabel:s,colors:r}){const i=Z1(s,64);return n.jsxs("div",{className:er.chip,children:[n.jsx("span",{className:er.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:er.name,children:t!=null?t:""}),n.jsx("span",{className:er.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function bJ({snapshot:t,colors:e,title:s="Base Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var m,g;return((m=h[d])!=null?m:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgBaseMain,list:i("baseMain"),key:"baseMain"},{label:"con",avg:t==null?void 0:t.avgConBase,list:i("conBase"),key:"conBase"},{label:"sum",avg:t==null?void 0:t.avgSumBaseTotal,list:i("sumBaseTotal"),key:"sumBaseTotal"}];return n.jsxs("div",{className:er.card,children:[n.jsx(Wo,{text:s}),n.jsx("div",{className:er.headerSpacer}),n.jsxs("div",{className:er.wrap,children:[n.jsx("div",{className:er.divider}),n.jsx("div",{className:er.rows,children:a.map((d,u)=>n.jsxs("div",{className:er.row,children:[n.jsxs("div",{className:er.left,children:[n.jsx("div",{className:er.label,children:d.label}),n.jsx("div",{className:er.avgHead,children:""}),n.jsx("div",{className:er.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:er.top3,children:d.list.map((h,m)=>n.jsx(vJ,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}const _J="_card_1enwc_1",wJ="_wrap_1enwc_1",jJ="_divider_1enwc_1",SJ="_rows_1enwc_1",NJ="_row_1enwc_1",kJ="_left_1enwc_1",CJ="_label_1enwc_1",TJ="_avgHead_1enwc_1",EJ="_avgNum_1enwc_1",AJ="_top3_1enwc_1",IJ="_chip_1enwc_1",PJ="_badge_1enwc_1",RJ="_name_1enwc_1",LJ="_score_1enwc_1",DJ="_headerSpacer_1enwc_1",tr={card:_J,wrap:wJ,divider:jJ,rows:SJ,row:NJ,left:kJ,label:CJ,avgHead:TJ,avgNum:EJ,top3:AJ,chip:IJ,badge:PJ,name:RJ,score:LJ,headerSpacer:DJ};function MJ({name:t,value:e,classLabel:s,colors:r}){const i=Z1(s,64);return n.jsxs("div",{className:tr.chip,children:[n.jsx("span",{className:tr.badge,children:i?n.jsx("img",{src:i,alt:""}):null}),n.jsx("span",{className:tr.name,children:t!=null?t:""}),n.jsx("span",{className:tr.score,style:{color:r.title},children:typeof e=="number"?e.toLocaleString("de-DE"):""})]})}function FJ({snapshot:t,colors:e,title:s="Total Stats"}){var l;const r=(l=t==null?void 0:t.members)!=null?l:[],i=d=>[...r].filter(u=>typeof u[d]=="number").sort((u,h)=>{var m,g;return((m=h[d])!=null?m:0)-((g=u[d])!=null?g:0)}).slice(0,3),a=[{label:"main",avg:t==null?void 0:t.avgAttrTotal,list:i("attrTotal"),key:"attrTotal"},{label:"con",avg:t==null?void 0:t.avgConTotal,list:i("conTotal"),key:"conTotal"},{label:"total",avg:t==null?void 0:t.avgTotalStats,list:i("totalStats"),key:"totalStats"}];return n.jsxs("div",{className:tr.card,children:[n.jsx(Wo,{text:s}),n.jsx("div",{className:tr.headerSpacer}),n.jsxs("div",{className:tr.wrap,children:[n.jsx("div",{className:tr.divider}),n.jsx("div",{className:tr.rows,children:a.map((d,u)=>n.jsxs("div",{className:tr.row,children:[n.jsxs("div",{className:tr.left,children:[n.jsx("div",{className:tr.label,children:d.label}),n.jsx("div",{className:tr.avgHead,children:""}),n.jsx("div",{className:tr.avgNum,style:{color:e.title},children:typeof d.avg=="number"?d.avg.toLocaleString("de-DE"):""})]}),n.jsx("div",{className:tr.top3,children:d.list.map((h,m)=>n.jsx(MJ,{name:h.name,value:h[d.key],classLabel:h.class,colors:e},m))})]},u))})]})]})}function BJ({guild:t,snapshot:e,colors:s}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Wo,{text:"General Info"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function $J({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Wo,{text:"Fortress"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function OJ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Wo,{text:"Rankings"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}function VJ({colors:t}){return n.jsxs("div",{style:{background:"transparent"},children:[n.jsx(Wo,{text:"Serververgleich"}),n.jsx("div",{style:{height:6}}),n.jsx("div",{className:"text-sm",style:{opacity:.8},children:""})]})}const UJ=E.memo(function({guild:e,snapshot:s,emblemUrl:r,colors:i}){const a=i.icon,l=({text:d})=>n.jsxs("div",{className:Cu.sectionDivider,children:[n.jsx("div",{className:Cu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}}),n.jsx("div",{className:Cu.sectionTitle,style:{color:i.soft},children:d}),n.jsx("div",{className:Cu.sectionStripe,style:{background:`linear-gradient(90deg, transparent, ${a}, transparent)`}})]});return n.jsxs("div",{className:Cu.root+" space-y-4",children:[n.jsx(l,{text:"GUILD OVERVIEW"}),n.jsx("div",{style:{marginTop:6,marginBottom:10},children:n.jsx(l,{text:"AVERAGE PLAYER STATS"})}),n.jsx(BJ,{guild:e,snapshot:s,colors:i}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx(bJ,{snapshot:s,colors:i}),n.jsx(FJ,{snapshot:s,colors:i})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 mt-4",children:[n.jsx($J,{colors:i}),n.jsx(OJ,{colors:i})]}),n.jsx("div",{className:"mt-4",children:n.jsx(VJ,{colors:i})})]})}),zJ="_wrapper_zqchq_3",HJ="_grid_zqchq_9",GJ="_tile_zqchq_13",WJ="_disabled_zqchq_37",qJ="_crestWrap_zqchq_41",KJ="_crest_zqchq_41",QJ="_ring_zqchq_53",XJ="_badge_zqchq_55",YJ="_meta_zqchq_67",JJ="_nameRow_zqchq_69",ZJ="_name_zqchq_69",eZ="_share_zqchq_73",tZ="_sub_zqchq_75",sZ="_tileButton_zqchq_79",nZ="_donutCard_zqchq_85",rZ="_donutHeader_zqchq_87",iZ="_legend_zqchq_91",aZ="_legendItem_zqchq_93",oZ="_legendSwatch_zqchq_95",lZ="_legendRight_zqchq_97",cZ="_centerLabel_zqchq_101",Ps={wrapper:zJ,grid:HJ,tile:GJ,disabled:WJ,crestWrap:qJ,crest:KJ,ring:QJ,badge:XJ,meta:YJ,nameRow:JJ,name:ZJ,share:eZ,sub:tZ,tileButton:sZ,donutCard:nZ,donutHeader:rZ,legend:iZ,legendItem:aZ,legendSwatch:oZ,legendRight:lZ,centerLabel:cZ},A0=56;function qf(t){return t==null||!isFinite(t)?"0.0%":`${Math.round(t*10)/10}%`}function BN(t){return t==null||!isFinite(t)?"0":`${Math.round(t)}`}const dZ=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null};function uZ(t){return t?/drive\.google\.com/.test(t):!1}function $N(t,e=A0){if(t)return uZ(t)?sr(t,e):t}function hZ(t){if(t==null)return null;let e=String(t).trim().normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[\s_]+/g,"-");const s={warrior:"warrior",mage:"mage",scout:"scout",assassin:"assassin","demon-hunter":"demon-hunter",berserker:"berserker","battle-mage":"battle-mage",druid:"druid",bard:"bard",necromancer:"necromancer",paladin:"paladin",demonhunter:"demon-hunter",battlemage:"battle-mage",dh:"demon-hunter",bm:"battle-mage",war:"warrior",wiz:"mage",necro:"necromancer",pala:"paladin",krieger:"warrior",magier:"mage",jaeger:"scout",jger:"scout",meuchelmoerder:"assassin",meuchelmrder:"assassin",dmonenjger:"demon-hunter",daemonenjaeger:"demon-hunter",zerker:"berserker",kampfmagier:"battle-mage",druide:"druid",barde:"bard",nekromant:"necromancer"};return s[e]?s[e]:e.includes("demon")&&e.includes("hunter")?"demon-hunter":e.includes("battle")&&e.includes("mage")?"battle-mage":null}function mZ(t){var m,g,v,b,N,S;if(!t)return null;const e=t,s=t,r=(m=e.key)!=null?m:s.id,i=(g=e.label)!=null?g:s.name,a=(b=(v=s.crestUrl)!=null?v:e.iconUrl)!=null?b:s.iconUrl,l=(N=e.iconUrl)!=null?N:s.iconUrl,d=(S=e.fallback)!=null?S:s.fallback;if(!r||!i)return null;const u=$N(a,A0),h=$N(l,A0);return{id:r,name:String(i),crestUrl:u||h,iconUrl:h||u,fallback:d?String(d):void 0}}function nA(t,e){var m,g,v,b,N,S,C,R,M,T,y,w,D,k,_,A,F,P,B,$,W;const s={},r={},i={},a={},l=e.map(H=>H.id);for(const H of l)s[H]=0,r[H]=0,i[H]=0,a[H]=null;for(const H of Array.isArray(t)?t:[]){const q=(w=(T=(R=(S=(b=(v=(g=(m=H.classId)!=null?m:H.class)!=null?g:H.klass)!=null?v:H.playerClass)!=null?b:H.cls)!=null?S:(N=H.values)==null?void 0:N.Class)!=null?R:(C=H.values)==null?void 0:C.class)!=null?T:(M=H.values)==null?void 0:M.Klasse)!=null?w:(y=H.values)==null?void 0:y.klasse,K=hZ(q);if(!K||!l.includes(K))continue;s[K]+=1;const G=dZ((A=(k=H.level)!=null?k:(D=H.values)==null?void 0:D.Level)!=null?A:(_=H.values)==null?void 0:_.level);G!=null&&(r[K]+=G,i[K]+=1,(!a[K]||((P=(F=a[K])==null?void 0:F.level)!=null?P:-1/0)<G)&&(a[K]={id:H.id,name:(W=($=H.name)!=null?$:(B=H.values)==null?void 0:B.Name)!=null?W:null,level:G}))}const d=Object.values(s).reduce((H,q)=>H+q,0),u={},h={};return l.forEach(H=>{u[H]=d>0?s[H]/d*100:0,h[H]=i[H]>0?r[H]/i[H]:null}),{counts:s,shares:u,avg:h,top:a}}const pZ=({valuePct:t})=>{const s=2*Math.PI*28,r=s*(1-Math.max(0,Math.min(100,t))/100);return n.jsxs("svg",{className:Ps.ring,viewBox:"0 0 60 60","aria-hidden":"true",children:[n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(255,255,255,.08)",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"30",cy:"30",r:28,stroke:"rgba(92,139,198,.9)",strokeWidth:"4",fill:"none",strokeDasharray:s,strokeDashoffset:r,strokeLinecap:"round"})]})},fZ=({data:t,classMeta:e,onPickClass:s})=>{const[r,i]=E.useState({}),a=Array.isArray(t)?t:[],l=Array.isArray(e)?e:[],{counts:d,shares:u,avg:h,top:m}=E.useMemo(()=>nA(a,l),[a,l]);return n.jsx("section",{className:Ps.wrapper,children:n.jsx("div",{className:Ps.grid,style:{gridTemplateColumns:"1fr"},children:l.map(g=>{var M,T,y;const v=(M=d[g.id])!=null?M:0,b=(T=u[g.id])!=null?T:0,N=h[g.id],S=m[g.id],C=v<=0,R=r[g.id]?void 0:g.crestUrl||g.iconUrl;return n.jsxs("div",{className:`${Ps.tile} ${C?Ps.disabled:""}`,title:C?`${g.name}: kein Mitglied`:`${g.name}  ${BN(v)}  ${qf(b)}${N?`   ${N.toFixed(1)}`:""}`,children:[n.jsxs("div",{className:Ps.crestWrap,children:[R?n.jsx("img",{className:Ps.crest,src:R,alt:g.name,onError:()=>i(w=>({...w,[g.id]:!0}))}):n.jsx("div",{className:Ps.crest,style:{background:"rgba(255,255,255,.06)",display:"grid",placeItems:"center",fontSize:18},children:(y=g.fallback)!=null?y:""}),n.jsx(pZ,{valuePct:b}),n.jsx("div",{className:Ps.badge,children:BN(v)})]}),n.jsxs("div",{className:Ps.meta,children:[n.jsxs("div",{className:Ps.nameRow,children:[n.jsx("div",{className:Ps.name,children:g.name}),n.jsx("div",{className:Ps.share,children:qf(b)})]}),n.jsxs("div",{className:Ps.sub,children:[N?` Lvl ${N.toFixed(1)}`:"",S?`  Top: ${S.name}${S.level?` (Lv ${S.level})`:""}`:""]})]}),!C&&s&&n.jsx("button",{className:Ps.tileButton,onClick:()=>s(g.id),"aria-label":`${g.name} filtern`})]},g.id)})})})},gZ=({data:t,classMeta:e})=>{const s=Array.isArray(t)?t:[],r=Array.isArray(e)?e:[],{shares:i,counts:a}=E.useMemo(()=>nA(s,r),[s,r]),l=E.useMemo(()=>Object.values(a).reduce((d,u)=>d+u,0),[a]);return n.jsxs("div",{className:Ps.donutCard,children:[n.jsxs("div",{className:Ps.donutHeader,children:[n.jsx("div",{children:"Klassen-Verteilung"}),n.jsxs("div",{className:Ps.legendRight,children:["Gesamt: ",l]})]}),n.jsxs("div",{className:"grid grid-cols-[260px_1fr] gap-4",children:[n.jsxs("svg",{width:260,height:260,viewBox:"0 0 260 260",role:"img","aria-label":"Klassen-Donut",children:[n.jsx("circle",{cx:130,cy:130,r:90,fill:"rgba(255,255,255,0.02)"}),(()=>{const g=Math.PI*2,v=r.map((N,S)=>{var C;return{id:N.id,pct:(C=i[N.id])!=null?C:0,color:`hsl(${Math.round(360/Math.max(r.length,1)*S)} 60% 55%)`}});let b=0;return v.map(N=>{const S=(N.pct||0)/100;if(S<=0)return null;const C=b,R=b+g*S;b=R;const M=R-C>Math.PI?1:0,T=130+100*Math.cos(C),y=130+100*Math.sin(C),w=130+100*Math.cos(R),D=130+100*Math.sin(R),k=130+64*Math.cos(R),_=130+64*Math.sin(R),A=130+64*Math.cos(C),F=130+64*Math.sin(C),P=`M ${T} ${y} A 100 100 0 ${M} 1 ${w} ${D} L ${k} ${_} A 64 64 0 ${M} 0 ${A} ${F} Z`;return n.jsx("path",{d:P,fill:N.color,opacity:.95},N.id)})})()]}),n.jsx("div",{className:Ps.legend,children:r.map((d,u)=>{var g,v;const h=(g=i[d.id])!=null?g:0,m=(v=a[d.id])!=null?v:0;return n.jsxs("div",{className:Ps.legendItem,title:`${d.name}: ${m}  ${qf(h)}`,children:[n.jsx("span",{className:Ps.legendSwatch,style:{background:`hsl(${Math.round(360/Math.max(r.length,1)*u)} 60% 55%)`,borderColor:"rgba(0,0,0,0.2)"}}),n.jsx("span",{children:d.name}),n.jsxs("span",{className:Ps.legendRight,children:[m,"  ",qf(h)]})]},d.id)})})]}),n.jsx("div",{className:Ps.centerLabel,children:"Anteile je Klasse"})]})},Xs={tile:"#152A42",tileAlt:"#14273E",line:"#2B4C73",title:"#F5F9FF",soft:"#B0C4D9",header:"#1E3657",icon:"#5C8BC6"},xZ=t=>{var e,s,r,i,a,l,d,u,h,m,g,v,b,N,S;return{id:t.id,name:(e=t.name)!=null?e:"Unknown",class:(s=t.class)!=null?s:"Unknown",role:(r=t.role)!=null?r:"Unknown",level:(i=t.level)!=null?i:void 0,scrapbook:void 0,lastOnline:(a=t.lastActivityMs)!=null?a:null,server:null,baseStats:{main:(l=t.baseMain)!=null?l:void 0,con:(d=t.conBase)!=null?d:void 0,sumBaseTotal:(u=t.sumBaseTotal)!=null?u:void 0},totalStats:(h=t.totalStats)!=null?h:void 0,values:{treasury:(m=t.treasury)!=null?m:void 0,mine:(g=t.mine)!=null?g:void 0,attrTotal:(v=t.attrTotal)!=null?v:void 0,conTotal:(b=t.conTotal)!=null?b:void 0,lastScan:(N=t.lastScan)!=null?N:void 0,lastActivity:(S=t.lastActivity)!=null?S:void 0}}},mv=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},yZ=t=>{if(!t)return null;const e=Math.max(0,Date.now()/1e3-t);return Math.floor(e/86400)};function rA({title:t,right:e,children:s}){return n.jsxs("div",{className:"rounded-2xl shadow-lg",style:{background:Xs.tile,border:`1px solid ${Xs.line}`},children:[(t||e)&&n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",style:{borderColor:Xs.line},children:[n.jsx("div",{className:"text-sm tracking-wide uppercase",style:{color:Xs.soft},children:t}),e]}),n.jsx("div",{className:"p-4",children:s})]})}function Tu({k:t,v:e}){return n.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[n.jsx("span",{className:"opacity-80",children:t}),n.jsx("span",{className:"font-semibold",style:{color:Xs.title},children:e})]})}function vZ({guild:t}){var s,r;const e=Th(t.name,800);return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-2xl border p-3",style:{borderColor:"transparent",background:"transparent"},children:n.jsx("div",{className:"w-full mx-auto max-w-[480px]",style:{aspectRatio:"3 / 4",borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"1px solid transparent",overflow:"hidden"},children:e?n.jsx("img",{src:e,alt:"",className:"max-h-full max-w-full",style:{maxHeight:"115%",maxWidth:"115%",objectFit:"contain",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 8px 16px rgba(0,0,0,.35))"},onError:i=>i.currentTarget.style.display="none"}):n.jsx("div",{className:"text-6xl",children:""})})}),n.jsx(rA,{title:"GILDEN INFO",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsx(Tu,{k:"Mitglieder",v:(s=t.memberCount)!=null?s:""}),n.jsx(Tu,{k:"HoF-Rang",v:t.hofRank!=null?`#${t.hofRank}`:""}),n.jsx(Tu,{k:"Server",v:(r=t.server)!=null?r:""}),n.jsx(Tu,{k:"Inaktiv",v:"0"}),n.jsx(Tu,{k:"Aktivitt",v:"100%"})]})})]})}function pv(){var C,R,M,T,y,w;const t=og(),e=t.id||t.gid||t.guildId||t.guild||"",s=oi(),[r,i]=E.useState(!0),[a,l]=E.useState(null),[d,u]=E.useState(null),[h,m]=E.useState(null),[g,v]=E.useState("grid"),b=E.useMemo(()=>(Array.isArray(Zs)?Zs:[]).map(mZ).filter(Boolean),[]);E.useEffect(()=>{let D=!1;async function k(){var _,A,F,P,B,$,W,H,q,K,G,te,ne,U,Z,he,ie,fe,be,ye,_e,we,de,pe,re,$e,He,pt,It,Mt,Ht,ss,Ne,Re,Ie,ze,at;i(!0),l(null);try{const ut=e.trim();if(!ut){l("Keine Gilde gewhlt."),i(!1);return}const xt=Ot(it,`guilds/${ut}/latest/latest`),Qt=await Os(xt);if(!Qt.exists()){l("Gilde nicht gefunden."),i(!1);return}const Gt=Qt.data(),Pn=(F=(A=Gt.name)!=null?A:(_=Gt.values)==null?void 0:_.Name)!=null?F:ut,en=($=(B=Gt.server)!=null?B:(P=Gt.values)==null?void 0:P.Server)!=null?$:null,Ds=(G=mv((K=(H=Gt.memberCount)!=null?H:(W=Gt.values)==null?void 0:W["Guild Member Count"])!=null?K:(q=Gt.values)==null?void 0:q.GuildMemberCount))!=null?G:null,Gn=(ye=mv((be=(ie=(Z=(ne=Gt.hofRank)!=null?ne:(te=Gt.values)==null?void 0:te["Hall of Fame Rank"])!=null?Z:(U=Gt.values)==null?void 0:U.HoF)!=null?ie:(he=Gt.values)==null?void 0:he.Rank)!=null?be:(fe=Gt.values)==null?void 0:fe["Guild Rank"]))!=null?ye:null,Sr=yZ(mv(Gt.timestamp));D||u({id:ut,name:Pn,server:en,memberCount:Ds,hofRank:Gn,lastScanDays:Sr});const Nr=Ot(it,`guilds/${ut}/snapshots/members_summary`),rr=await Os(Nr);if(rr.exists()&&!D){const ls=rr.data(),ce={guildId:String((_e=ls.guildId)!=null?_e:ut),updatedAt:String((pe=(de=ls.updatedAt)!=null?de:(we=Gt.values)==null?void 0:we.Timestamp)!=null?pe:""),updatedAtMs:Number(($e=(re=ls.updatedAtMs)!=null?re:Gt.timestamp*1e3)!=null?$e:0),count:Number((He=ls.count)!=null?He:0),hash:String((pt=ls.hash)!=null?pt:""),avgLevel:(It=ls.avgLevel)!=null?It:null,avgTreasury:(Mt=ls.avgTreasury)!=null?Mt:null,avgMine:(Ht=ls.avgMine)!=null?Ht:null,avgBaseMain:(ss=ls.avgBaseMain)!=null?ss:null,avgConBase:(Ne=ls.avgConBase)!=null?Ne:null,avgSumBaseTotal:(Re=ls.avgSumBaseTotal)!=null?Re:null,avgAttrTotal:(Ie=ls.avgAttrTotal)!=null?Ie:null,avgConTotal:(ze=ls.avgConTotal)!=null?ze:null,avgTotalStats:(at=ls.avgTotalStats)!=null?at:null,members:Array.isArray(ls.members)?ls.members:[]};m(ce)}}catch(ut){D||l((ut==null?void 0:ut.message)||"Fehler beim Laden.")}finally{D||i(!1)}}return k(),()=>{D=!0}},[e]);const N=E.useMemo(()=>{var D;return((D=h==null?void 0:h.members)!=null?D:[]).map(k=>xZ(k))},[h]);if(r)return n.jsx(Pt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsx("div",{className:"text-sm",style:{color:Xs.soft},children:"Lade Gildenprofil"})});if(!d)return n.jsx(Pt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!0,children:n.jsxs("div",{className:"text-sm",style:{color:Xs.soft},children:[a!=null?a:"Unbekannter Fehler.",n.jsx("div",{className:"mt-3",children:n.jsx("button",{onClick:()=>s("/"),className:"rounded-xl px-3 py-2 text-white",style:{background:"#2D4E78"},children:"Zur Startseite"})})]})});const S=n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"px-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",style:{paddingTop:10,paddingBottom:10,borderTop:`1px solid ${Xs.line}`,position:"relative",zIndex:2},children:[n.jsx("div",{className:"min-w-[120px]",children:n.jsx("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",style:{background:Xs.tile,border:`1px solid ${Xs.line}`,color:Xs.title},children:(C=d.server)!=null?C:"S?.EU"})}),n.jsx("div",{className:"flex-1 text-center",children:n.jsx("div",{className:"font-extrabold",style:{color:Xs.title,fontSize:26,lineHeight:1.15},children:d.name})}),n.jsxs("div",{className:"min-w-[220px] text-right text-xs",style:{color:Xs.soft},children:["Zuletzt aktualisiert:",h!=null&&h.updatedAt?h.updatedAt:""," ",n.jsx("span",{className:"inline-block h-2 w-2 rounded-full align-middle",style:{background:"#4CAF50"}})]})]}),n.jsx("div",{style:{height:1,background:Xs.line,opacity:.9,marginTop:4,marginBottom:20,position:"relative",zIndex:2}})]})});return n.jsxs(Pt,{title:"Gildenprofil",subtitle:"Gilde, KPIs & Verlauf",centerFramed:!1,children:[S,n.jsx("div",{className:"px-6 pb-8",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[n.jsx("div",{className:"col-span-12 md:col-span-3",children:n.jsx(vZ,{guild:d})}),n.jsxs("div",{className:"col-span-12 md:col-span-6 space-y-4",children:[n.jsx(UJ,{guild:d,snapshot:h,emblemUrl:Th(d.name,512)||void 0,colors:Xs}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-full max-w-[980px]",children:n.jsx(tY,{guildName:d.name,server:(R=d.server)!=null?R:"",emblemUrl:Th(d.name,512)||void 0,lastScanISO:h!=null&&h.updatedAtMs?new Date(h.updatedAtMs).toISOString():void 0,members:(M=d.memberCount)!=null?M:0,avgLevel:(T=h==null?void 0:h.avgLevel)!=null?T:0,totalPower:(y=h==null?void 0:h.avgTotalStats)!=null?y:void 0,tickerItems:h!=null&&h.updatedAt?[`Updated ${h.updatedAt}`,`Members ${(w=d.memberCount)!=null?w:0}`]:void 0})})}),n.jsx(bZ,{members:N,guildId:d.id,guildName:d.name,guildServer:d.server})]}),n.jsxs("div",{className:"col-span-12 md:col-span-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("button",{onClick:()=>v("grid"),"aria-label":"Klassenbersicht",children:n.jsx(Wo,{text:"Klassenbersicht",tone:g==="grid"?"accent":"default"})}),n.jsx("button",{onClick:()=>v("donut"),"aria-label":"Klassenverteilung",children:n.jsx(Wo,{text:"Klassenverteilung",tone:g==="donut"?"accent":"default"})})]}),g==="grid"?n.jsx(fZ,{data:N,classMeta:b,onPickClass:D=>{const k=new URL(window.location.href);k.searchParams.set("tab","bersicht"),k.searchParams.set("class",D),window.location.href=k.toString()}}):n.jsx(gZ,{data:N,classMeta:b})]})]})})]})}function bZ({members:t,guildId:e,guildName:s,guildServer:r}){const[i,a]=E.useState("bersicht");return n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center gap-2 border-b",style:{borderColor:Xs.line},role:"tablist",children:["bersicht","Rankings","Monthly Progress","Historie"].map(l=>{const d=l===i;return n.jsx("button",{role:"tab","aria-selected":d,onClick:()=>a(l),className:"rounded-xl px-3 py-2 text-sm",style:{border:`1px solid ${d?Xs.header:"transparent"}`,background:d?"rgba(45,78,120,0.35)":"transparent",color:Xs.title},children:l},l)})}),n.jsxs(rA,{children:[i==="bersicht"&&n.jsx(eY,{members:t,defaultView:"list",defaultSort:{key:"level",dir:"desc"}}),i==="Rankings"&&n.jsxs("div",{className:"text-sm",style:{color:Xs.soft},children:["Platzhalter ",n.jsx("b",{children:"Rankings"}),"  Inhalt folgt."]}),i==="Monthly Progress"&&n.jsx(YY,{guildId:e,guildName:s,guildServer:r}),i==="Historie"&&n.jsxs("div",{className:"text-sm",style:{color:Xs.soft},children:["Platzhalter ",n.jsx("b",{children:"Historie"}),"  Inhalt folgt."]})]})]})}function _Z(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsx(ON,{to:"/servers/rankings",title:"Rankings",desc:"Server-Ladder und Trends"}),n.jsx(ON,{to:"/servers/stats",title:"Stats",desc:"Verteilung, Aktivitt, Peaks"})]})]})}function ON({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:e}),s?n.jsx("div",{style:{opacity:.75,marginTop:4},children:s}):null]})}function wZ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Rankings"}),n.jsx("p",{style:{opacity:.8},children:"Ladder/Leaderboards pro Server (Platzhalter)."})]})}function jZ(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Servers  Stats"}),n.jsx("p",{style:{opacity:.8},children:"Statistische Auswertung: Aktivitt, Population, Peaks (Platzhalter)."})]})}const hn={tileAlt:"var(--tile, #14273E)",line:"var(--line, #2C4A73)",title:"var(--title, #F5F9FF)",textSoft:"var(--text-soft, #B0C4D9)",active:"var(--active, #2D4E78)"};function VN({children:t,style:e}){return n.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:"0 16px",...e},children:t})}function SZ({size:t=36}){return n.jsx("div",{style:{width:t,height:t,display:"grid",placeItems:"center"},"aria-hidden":!0,children:n.jsx("div",{style:{width:"100%",height:"100%",filter:"drop-shadow(0 2px 3px rgba(0,0,0,.45)) drop-shadow(0 6px 10px rgba(0,0,0,.28))",display:"grid",placeItems:"center",fontSize:Math.round(t*.72)},children:""})})}function Uc({label:t,value:e}){return n.jsxs("div",{style:{background:hn.tileAlt,border:`1px solid ${hn.line}`,borderRadius:16,padding:16,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsx("div",{style:{fontSize:12,color:hn.textSoft,marginBottom:4},children:t}),n.jsx("div",{style:{fontSize:22,color:hn.title,fontWeight:700},children:e})]})}function NZ(t){const e=t.trim(),s=e.toUpperCase(),r=e.toLowerCase(),i=s.replace(/^([A-Z]{2,})(\d{1,3})$/,"$1 $2"),a=r.replace(/^([a-z]{2,})(\d{1,3})$/,"$1 $2");let l="";const d=s.match(/^([A-Z]{2})(\d{1,3})$/);if(d){const u=d[1],h=String(parseInt(d[2],10)),m=u==="EU"?"eu":u==="US"?"us":u==="AM"?"net":u.toLowerCase();l=`s${h}.sfgame.${m}`}return Array.from(new Set([e,s,r,i,a,l].filter(Boolean)))}function fv(){var S,C,R,M;const t=og(),e=oi(),s=jr(),r=t.id||t.sid||t.serverId||t.server||"",[i,a]=E.useState(!0),[l,d]=E.useState(null),[u,h]=E.useState(null),[m,g]=E.useState(null);E.useEffect(()=>{let T=!1;async function y(){a(!0),d(null),h(null),g(null);try{const w=r.trim();if(!w)throw new Error("Kein Server gewhlt.");const D=Ot(it,`servers/${w}`),k=await Os(D);if(k.exists()){T||(h(k.id),g(k.data()));return}const _=tc(it,"servers"),A=NZ(w),F=[];for(const W of A)F.push(an(kn(_,Zi("code","==",W),zn(1)))),F.push(an(kn(_,Zi("displayName","==",W),zn(1)))),F.push(an(kn(_,Zi("host","==",W),zn(1))));const P=await Promise.allSettled(F);let B=null,$=null;for(const W of P){if(W.status!=="fulfilled")continue;const H=W.value;if(!H.empty){const q=H.docs[0];B=q.id,$=q.data();break}}if(!B||!$)throw new Error("Server nicht gefunden.");T||(h(B),g($),B!==w&&e(`/server/${encodeURIComponent(B)}`,{replace:!0,state:{from:s.pathname}}))}catch(w){T||d((w==null?void 0:w.message)||"Fehler beim Laden.")}finally{T||a(!1)}}return y(),()=>{T=!0}},[r,e,s.pathname]);const v=E.useMemo(()=>n.jsxs("div",{style:{padding:24,color:hn.textSoft},children:[l!=null?l:"Unbekannter Fehler.",n.jsx("div",{style:{marginTop:12},children:n.jsx("button",{onClick:()=>e("/"),style:{padding:"8px 12px",background:hn.active,border:"none",color:"#fff",borderRadius:8,cursor:"pointer"},children:"Zur Startseite"})})]}),[l,e]);if(i)return n.jsx(Pt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:n.jsx("div",{style:{padding:16,color:hn.textSoft},children:"Lade Serverprofil"})});if(!m)return n.jsx(Pt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:v});const b=m.displayName||m.code||u||r,N=m.active===!0?"Aktiv":m.active===!1?"Inaktiv":"";return n.jsxs(Pt,{title:"Serverprofil",subtitle:"Server, KPIs & Verlauf",centerFramed:!1,padded:!0,children:[n.jsx("div",{style:{position:"sticky",top:0,zIndex:2,background:"transparent",borderBottom:`1px solid ${hn.line}`},children:n.jsxs(VN,{style:{padding:16,display:"flex",alignItems:"center",gap:12},children:[n.jsx(SZ,{size:36}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:18,color:hn.title,fontWeight:700},children:b}),n.jsxs("div",{style:{fontSize:12,color:hn.textSoft},children:[m.host||"","  ",m.region||"","  ",((S=m.type)==null?void 0:S.toUpperCase())||""]})]})]})}),n.jsxs(VN,{style:{paddingTop:12,paddingBottom:24},children:[n.jsxs("div",{style:{background:hn.tileAlt,padding:15,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${hn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)"},children:[n.jsxs("div",{children:[n.jsx("h2",{style:{margin:0,color:hn.title,fontSize:24,fontWeight:800},children:b}),n.jsxs("div",{style:{marginTop:6,color:hn.textSoft,fontSize:13},children:[m.host||"","  ",m.region||"","  ",((C=m.type)==null?void 0:C.toUpperCase())||""]})]}),n.jsxs("div",{style:{textAlign:"right",fontSize:13},children:[n.jsxs("span",{style:{color:hn.textSoft},children:["Status: ",N]}),n.jsx("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:m.active?"#4CAF50":"#9E9E9E",marginLeft:8}})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:16,marginTop:16},children:[n.jsx(Uc,{label:"Code",value:m.code||""}),n.jsx(Uc,{label:"Host",value:m.host||""}),n.jsx(Uc,{label:"Region",value:m.region||""}),n.jsx(Uc,{label:"Typ",value:((R=m.type)==null?void 0:R.toUpperCase())||""}),n.jsx(Uc,{label:"Numeric ID",value:(M=m.numericId)!=null?M:""}),n.jsx(Uc,{label:"Status",value:N})]}),n.jsxs("div",{style:{marginTop:16,background:hn.tileAlt,padding:15,borderRadius:12,border:`1px solid ${hn.line}`,boxShadow:"0 10px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.06)",color:hn.textSoft},children:["Platzhalter ",n.jsx("b",{children:"Historie / Kennzahlen"}),"  wenn du knftig Server-Statistiken speicherst, binden wir sie hier ein."]})]})]})}const kZ="_page_177kv_1",CZ="_sectionCard_177kv_15",TZ="_identityCard_177kv_29",EZ="_identityGrid_177kv_39",AZ="_profileName_177kv_63",IZ="_identityMeta_177kv_77",PZ="_mainCharacter_177kv_95",RZ="_characterHeader_177kv_117",LZ="_characterTitle_177kv_131",DZ="_characterSubtitle_177kv_143",MZ="_classIcon_177kv_153",FZ="_metaGrid_177kv_181",BZ="_metaLabel_177kv_193",$Z="_metaValue_177kv_207",OZ="_portrait_177kv_217",VZ="_sectionHeader_177kv_245",UZ="_sectionHint_177kv_265",zZ="_bioText_177kv_275",HZ="_tagGroups_177kv_295",GZ="_tagGroupLabel_177kv_309",WZ="_tagList_177kv_323",qZ="_tag_177kv_295",KZ="_showcaseGrid_177kv_353",QZ="_characterCard_177kv_365",XZ="_characterCardHeader_177kv_385",YZ="_characterName_177kv_399",JZ="_badge_177kv_411",ZZ="_characterMeta_177kv_433",eee="_characterStats_177kv_449",tee="_statGrid_177kv_465",see="_statTile_177kv_477",nee="_statLabel_177kv_491",ree="_statValue_177kv_505",iee="_statSubtext_177kv_519",aee="_emptyState_177kv_531",oee="_recordsHighlights_177kv_551",lee="_highlightCard_177kv_565",cee="_recordType_177kv_579",dee="_recordTitle_177kv_593",uee="_timeline_177kv_607",hee="_timelineItem_177kv_625",mee="_timelineBullet_177kv_635",pee="_timelineContent_177kv_653",fee="_timelineTitle_177kv_661",gee="_timelineMeta_177kv_673",xee="_achievementsHighlights_177kv_685",yee="_achievementCard_177kv_699",vee="_achievementIcon_177kv_723",bee="_achievementName_177kv_747",_ee="_achievementDesc_177kv_759",wee="_achievementTier_177kv_771",jee="_achievementDate_177kv_785",See="_achievementsGrid_177kv_795",Nee="_achievementBadge_177kv_807",kee="_tierGold_177kv_831",Cee="_tierSilver_177kv_839",Tee="_tierBronze_177kv_847",Me={page:kZ,sectionCard:CZ,identityCard:TZ,identityGrid:EZ,profileName:AZ,identityMeta:IZ,mainCharacter:PZ,characterHeader:RZ,characterTitle:LZ,characterSubtitle:DZ,classIcon:MZ,metaGrid:FZ,metaLabel:BZ,metaValue:$Z,portrait:OZ,sectionHeader:VZ,sectionHint:UZ,bioText:zZ,tagGroups:HZ,tagGroupLabel:GZ,tagList:WZ,tag:qZ,showcaseGrid:KZ,characterCard:QZ,characterCardHeader:XZ,characterName:YZ,badge:JZ,characterMeta:ZZ,characterStats:eee,statGrid:tee,statTile:see,statLabel:nee,statValue:ree,statSubtext:iee,emptyState:aee,recordsHighlights:oee,highlightCard:lee,recordType:cee,recordTitle:dee,timeline:uee,timelineItem:hee,timelineBullet:mee,timelineContent:pee,timelineTitle:fee,timelineMeta:gee,achievementsHighlights:xee,achievementCard:yee,achievementIcon:vee,achievementName:bee,achievementDesc:_ee,achievementTier:wee,achievementDate:jee,achievementsGrid:See,achievementBadge:Nee,tierGold:kee,tierSilver:Cee,tierBronze:Tee},Eee={profileUser:{displayName:"Aurora Drake",languages:["en","de"],roles:["guildleader","tryhard"]},mainCharacter:{name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",lastScanAt:"2025-11-18T21:14:00.000Z"},bio:"Veteran guild leader focused on high-end fusion planning and experimental scrapbook routes. Available for collabs, raid clinics, and panel talks about SF scanning culture.",showcaseCharacters:[{id:"c1",name:"Aurora",class:"Mage",level:235,server:"S51  Neverwinter",guildName:"Starfall Syndicate",tag:"main",scrapbookPercent:92,highlightProgress:"Fortress 17"},{id:"c2",name:"Stardiver",class:"Scout",level:223,server:"S17  Blackwater",guildName:"Vault Seven",tag:"alt",scrapbookPercent:81,highlightProgress:"Dungeon 12"},{id:"c3",name:"Archivist Aria",class:"Warrior",level:210,server:"S09  Emerald Peak",guildName:"Heritage Keepers",tag:"archive",scrapbookPercent:68,highlightProgress:"Event Trophy 24"},{id:"c4",name:"Flux Operative",class:"Assassin",level:198,server:"S77  Quantum Vale",guildName:"Pulse Collective",tag:"event",scrapbookPercent:74,highlightProgress:"Festival Rank A"}],scanStats:{totalScans:1428,uniquePlayersScanned:613,uniqueGuildsScanned:108,scansLast30d:74,topServers:["S51 Neverwinter","S17 Blackwater","S77 Quantum Vale"],firstScanAt:"2022-07-12T10:00:00.000Z"},recordsAndMilestones:[{id:"r1",type:"record",title:"Fastest double fusion hand-in",when:"2024-05-09T00:00:00.000Z",context:"Guild Week  Starfall Syndicate"},{id:"r2",type:"record",title:"Scrapbook mentor program launched",when:"2023-11-14T00:00:00.000Z",context:"Community Scan Clinic"},{id:"r3",type:"milestone",title:"1000 scans uploaded",when:"2023-05-07T00:00:00.000Z",context:"SFDataHub milestone"},{id:"r4",type:"milestone",title:"Guest host at SF Magazine Live",when:"2022-10-19T00:00:00.000Z",context:"SFTV Stage"}],achievements:[{id:"a1",nameKey:"achievements.legendaryScout.name",descriptionKey:"achievements.legendaryScout.description",tier:"gold",unlockedAt:"2024-06-21T00:00:00.000Z"},{id:"a2",nameKey:"achievements.scanCoach.name",descriptionKey:"achievements.scanCoach.description",tier:"silver",unlockedAt:"2023-12-02T00:00:00.000Z"},{id:"a3",nameKey:"achievements.guildPulse.name",descriptionKey:"achievements.guildPulse.description",tier:"silver",unlockedAt:"2023-04-17T00:00:00.000Z"},{id:"a4",nameKey:"achievements.veteranArchivist.name",descriptionKey:"achievements.veteranArchivist.description",tier:"bronze",unlockedAt:"2022-12-28T00:00:00.000Z"},{id:"a5",nameKey:"achievements.eventStrategist.name",descriptionKey:"achievements.eventStrategist.description",tier:"bronze"}]},Aee=1e3*60*60*24,UN={gold:3,silver:2,bronze:1};function Iee(t){const e=new Date(t).getTime();if(Number.isNaN(e))return null;const s=Date.now()-e;return s<0?0:Math.floor(s/Aee)}function Vp(t){const e=new Date(t);return Number.isNaN(e.getTime())?yt("profile.public.identity.dateUnknown"):new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(e)}function Pee(){const{profileId:t}=og(),e=Eee,s=Iee(e.mainCharacter.lastScanAt),r=new Intl.NumberFormat,i=e.recordsAndMilestones.filter(m=>m.type==="record").slice(0,3),a=[...e.achievements].sort((m,g)=>UN[g.tier]-UN[m.tier]).slice(0,3),l=[{label:yt("profile.public.stats.totalScans"),value:r.format(e.scanStats.totalScans)},{label:yt("profile.public.stats.uniquePlayers"),value:r.format(e.scanStats.uniquePlayersScanned)},{label:yt("profile.public.stats.uniqueGuilds"),value:r.format(e.scanStats.uniqueGuildsScanned)},{label:yt("profile.public.stats.last30d"),value:r.format(e.scanStats.scansLast30d)}],d=s==null?yt("profile.public.identity.dateUnknown"):s===0?yt("profile.public.identity.lastScanToday"):`${s} ${yt("profile.public.identity.daysAgoSuffix")}`,u=yt("profile.public.identity.portraitPlaceholder"),h=e.scanStats.topServers.length>0?e.scanStats.topServers.join(", "):yt("profile.public.identity.unknownValue");return n.jsx(Pt,{title:yt("profile.public.title"),subtitle:yt("profile.public.subtitle"),centerFramed:!1,padded:!0,children:n.jsxs("div",{className:Me.page,children:[n.jsx("section",{className:`${Me.sectionCard} ${Me.identityCard}`,children:n.jsxs("div",{className:Me.identityGrid,children:[n.jsxs("div",{children:[n.jsx("h1",{className:Me.profileName,children:e.profileUser.displayName}),n.jsxs("div",{className:Me.identityMeta,children:[n.jsxs("span",{children:[yt("profile.public.identity.profileIdLabel"),": ",t!=null?t:yt("profile.public.identity.unknownValue")]}),n.jsxs("span",{children:[yt("profile.public.identity.lastScanLabel"),": ",d]})]}),n.jsxs("article",{className:Me.mainCharacter,children:[n.jsxs("div",{className:Me.characterHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Me.metaLabel,children:yt("profile.public.identity.mainCharacterLabel")}),n.jsx("div",{className:Me.characterTitle,children:e.mainCharacter.name}),n.jsxs("div",{className:Me.characterSubtitle,children:[e.mainCharacter.class,"  ",yt("profile.public.identity.levelShort")," ",e.mainCharacter.level]})]}),n.jsx("div",{className:Me.classIcon,children:e.mainCharacter.class.charAt(0)})]}),n.jsxs("div",{className:Me.metaGrid,children:[n.jsxs("div",{children:[n.jsx("div",{className:Me.metaLabel,children:yt("profile.public.identity.serverLabel")}),n.jsx("div",{className:Me.metaValue,children:e.mainCharacter.server})]}),n.jsxs("div",{children:[n.jsx("div",{className:Me.metaLabel,children:yt("profile.public.identity.guildLabel")}),n.jsx("div",{className:Me.metaValue,children:e.mainCharacter.guildName})]})]})]})]}),n.jsx("div",{className:Me.portrait,children:u})]})}),n.jsxs("section",{className:Me.sectionCard,children:[n.jsx("div",{className:Me.sectionHeader,children:n.jsx("span",{children:yt("profile.public.bio.title")})}),n.jsx("p",{className:Me.bioText,children:e.bio}),n.jsxs("div",{className:Me.tagGroups,children:[n.jsxs("div",{children:[n.jsx("div",{className:Me.tagGroupLabel,children:yt("profile.public.bio.languagesLabel")}),n.jsx("div",{className:Me.tagList,children:e.profileUser.languages.length>0?e.profileUser.languages.map(m=>n.jsx("span",{className:Me.tag,children:m.toUpperCase()},m)):n.jsx("span",{className:Me.tag,children:yt("profile.public.identity.unknownValue")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:Me.tagGroupLabel,children:yt("profile.public.bio.rolesLabel")}),n.jsx("div",{className:Me.tagList,children:e.profileUser.roles.length>0?e.profileUser.roles.map(m=>n.jsx("span",{className:Me.tag,children:yt(`profile.public.roles.${m}`)},m)):n.jsx("span",{className:Me.tag,children:yt("profile.public.identity.unknownValue")})})]})]})]}),n.jsxs("section",{className:Me.sectionCard,children:[n.jsxs("div",{className:Me.sectionHeader,children:[n.jsx("span",{children:yt("profile.public.showcase.title")}),n.jsx("span",{className:Me.sectionHint,children:yt("profile.public.showcase.subtitle")})]}),e.showcaseCharacters.length===0?n.jsx("div",{className:Me.emptyState,children:yt("profile.public.showcase.empty")}):n.jsx("div",{className:Me.showcaseGrid,children:e.showcaseCharacters.map(m=>n.jsxs("article",{className:Me.characterCard,children:[n.jsxs("div",{className:Me.characterCardHeader,children:[n.jsxs("div",{children:[n.jsx("div",{className:Me.characterName,children:m.name}),n.jsxs("div",{className:Me.characterMeta,children:[n.jsx("span",{children:m.class}),n.jsxs("span",{children:[yt("profile.public.identity.levelShort")," ",m.level]})]})]}),n.jsx("span",{className:Me.badge,children:yt(`profile.public.showcase.tags.${m.tag}`)})]}),n.jsxs("div",{className:Me.characterMeta,children:[n.jsx("span",{children:m.server}),n.jsx("span",{children:m.guildName})]}),n.jsxs("div",{className:Me.characterStats,children:[n.jsxs("span",{children:[yt("profile.public.showcase.scrapbookLabel")," ",m.scrapbookPercent,"%"]}),n.jsxs("span",{children:[yt("profile.public.showcase.highlightLabel"),": ",m.highlightProgress]})]})]},m.id))})]}),n.jsxs("section",{className:Me.sectionCard,children:[n.jsx("div",{className:Me.sectionHeader,children:n.jsx("span",{children:yt("profile.public.stats.title")})}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Me.statGrid,children:l.map(m=>n.jsxs("article",{className:Me.statTile,children:[n.jsx("div",{className:Me.statLabel,children:m.label}),n.jsx("div",{className:Me.statValue,children:m.value})]},m.label))}),n.jsxs("div",{className:Me.statSubtext,children:[yt("profile.public.stats.topServersLabel"),": ",h]}),n.jsxs("div",{className:Me.statSubtext,children:[yt("profile.public.stats.firstScanLabel"),": ",Vp(e.scanStats.firstScanAt)]})]})]}),n.jsxs("section",{className:Me.sectionCard,children:[n.jsx("div",{className:Me.sectionHeader,children:n.jsx("span",{children:yt("profile.public.records.title")})}),e.recordsAndMilestones.length===0?n.jsx("div",{className:Me.emptyState,children:yt("profile.public.records.empty")}):n.jsxs(n.Fragment,{children:[i.length>0&&n.jsx("div",{className:Me.recordsHighlights,children:i.map(m=>n.jsxs("article",{className:Me.highlightCard,children:[n.jsx("div",{className:Me.recordType,children:yt(`profile.public.records.type.${m.type}`)}),n.jsx("div",{className:Me.recordTitle,children:m.title}),n.jsxs("div",{className:Me.timelineMeta,children:[Vp(m.when),"  ",m.context]})]},m.id))}),n.jsx("ul",{className:Me.timeline,children:e.recordsAndMilestones.map(m=>n.jsxs("li",{className:Me.timelineItem,children:[n.jsx("div",{className:Me.timelineBullet}),n.jsxs("div",{className:Me.timelineContent,children:[n.jsx("div",{className:Me.timelineTitle,children:m.title}),n.jsxs("div",{className:Me.timelineMeta,children:[Vp(m.when),"  ",m.context]})]})]},m.id))})]})]}),n.jsxs("section",{className:Me.sectionCard,children:[n.jsxs("div",{className:Me.sectionHeader,children:[n.jsx("span",{children:yt("profile.public.achievements.title")}),e.achievements.length>0&&n.jsx("span",{className:Me.sectionHint,children:yt("profile.public.achievements.highlights")})]}),e.achievements.length===0?n.jsx("div",{className:Me.emptyState,children:yt("profile.public.achievements.empty")}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsx("div",{className:Me.achievementsHighlights,children:a.map(m=>n.jsxs("article",{className:Me.achievementCard,children:[n.jsx("div",{className:[Me.achievementIcon,m.tier==="gold"?Me.tierGold:m.tier==="silver"?Me.tierSilver:Me.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Me.achievementTier,children:yt(`profile.public.achievements.tiers.${m.tier}`)}),n.jsx("div",{className:Me.achievementName,children:yt(m.nameKey)}),n.jsx("div",{className:Me.achievementDesc,children:yt(m.descriptionKey)}),m.unlockedAt&&n.jsx("div",{className:Me.achievementDate,children:Vp(m.unlockedAt)})]},m.id))}),n.jsx("div",{className:Me.achievementsGrid,children:e.achievements.map(m=>n.jsxs("article",{className:Me.achievementBadge,children:[n.jsx("div",{className:[Me.achievementIcon,m.tier==="gold"?Me.tierGold:m.tier==="silver"?Me.tierSilver:Me.tierBronze].join(" "),children:m.tier.charAt(0).toUpperCase()}),n.jsx("div",{className:Me.achievementName,children:yt(m.nameKey)}),n.jsx("div",{className:Me.achievementDesc,children:yt(m.descriptionKey)})]},m.id))})]})]})]})})}const Ree="_wrap_k6pqt_1",Lee="_centerLogoWrap_k6pqt_21",Dee="_centerLogoLink_k6pqt_37",Mee="_centerLogo_k6pqt_21",Fee="_arc_k6pqt_55",Bee="_left_k6pqt_57",$ee="_right_k6pqt_59",Oee="_sub_k6pqt_61",Vee="_full_k6pqt_63",Uee="_arcItem_k6pqt_65",zee="_iconBtn_k6pqt_71",Hee="_active_k6pqt_125",Gee="_iconImg_k6pqt_135",Wee="_placeholderIcon_k6pqt_139",qee="_placeholderText_k6pqt_157",Kee="_iconLabel_k6pqt_161",jn={wrap:Ree,centerLogoWrap:Lee,centerLogoLink:Dee,centerLogo:Mee,arc:Fee,left:Bee,right:$ee,sub:Oee,full:Vee,arcItem:Uee,iconBtn:zee,active:Hee,iconImg:Gee,placeholderIcon:Wee,placeholderText:qee,iconLabel:Kee},Qee=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=jr();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),h=l.get("sub2"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub"),b=m.get("sub2");r==="main"?a=d===g:r==="sub"?a=d===g&&!!v&&u===v:a=d===g&&!!v&&u===v&&!!b&&h===b}catch(l){a=!1}return n.jsxs(rs,{to:t,"aria-label":e,className:[jn.iconBtn,a?jn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:jn.iconImg}):n.jsx("div",{className:jn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:jn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:jn.iconLabel,children:e})]})},Up=({items:t,side:e,anchorSide:s,compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440,superOffset:d=660})=>{if((e==="sub"||e==="sub2")&&!s)return null;const u=E.useMemo(()=>{const g=t.length;if(g===0)return[];let v=-90,b=90;e==="left"?(v=90,b=270):e==="sub"||e==="sub2"?s==="left"?(v=90,b=270):(v=-90,b=90):e==="full"&&(v=0,b=360);const N=(b-v)/(g+1),S=r?190:250;return t.map((C,R)=>{const T=(v+N*(R+1))*Math.PI/180;return{it:C,x:Math.cos(T)*S,y:Math.sin(T)*S}})},[t,e,s,r]),h=(()=>{const g={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?g.left=`calc(50% - ${a}px)`:e==="right"?g.left=`calc(50% + ${a}px)`:e==="sub"?g.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`:e==="sub2"&&(g.left=s==="left"?`calc(50% - ${d}px)`:`calc(50% + ${d}px)`),g})(),m=e==="sub"?"sub":e==="sub2"?"sub2":"main";return n.jsx("div",{className:[jn.arc,e==="left"?jn.left:"",e==="right"?jn.right:"",e==="sub"?jn.sub:"",e==="sub2"?jn.sub2:"",e==="full"?jn.full:""].join(" "),style:h,children:u.map(({it:g,x:v,y:b})=>n.jsx("div",{className:jn.arcItem,style:{transform:`translate(${v}px, ${b}px)`},children:n.jsx(Qee,{to:g.to,label:g.label,icon:g.icon,variant:m})},g.key))})},Xee=({logoSrc:t,categories:e})=>{const[s]=Yl(),r=s.get("tab")||null,i=s.get("sub")||null;s.get("sub2");const a=E.useMemo(()=>e.find(T=>T.key===r)||null,[e,r]),l=(a==null?void 0:a.sub)||[],d=E.useMemo(()=>l.find(T=>T.key===i)||null,[l,i]),u=(d==null?void 0:d.sub2)||[],h=(a==null?void 0:a.side)==="left"||(a==null?void 0:a.side)==="right"?a.side:"right",m=E.useRef(null),[g,v]=E.useState(!1),[b,N]=E.useState(220),[S,C]=E.useState(440),[R,M]=E.useState(660);return E.useLayoutEffect(()=>{(()=>{var F,P;const w=((P=(F=m.current)==null?void 0:F.getBoundingClientRect().width)!=null?P:380)/2,k=Math.round(w+60),_=Math.round(k+220),A=Math.round(_+220);N(k),C(_),M(A),v(!0)})()},[]),E.useEffect(()=>{let T=0,y=null,w={main:b,out:S,sup:R};const D=()=>{y!=null&&window.clearTimeout(y),y=window.setTimeout(()=>{T=requestAnimationFrame(()=>{var q,K;const _=((K=(q=m.current)==null?void 0:q.getBoundingClientRect().width)!=null?K:380)/2,F=Math.round(_+60),P=Math.round(F+220),B=Math.round(P+220),$=Math.abs(F-w.main),W=Math.abs(P-w.out),H=Math.abs(B-w.sup);$>1&&N(F),W>1&&C(P),H>1&&M(B),w={main:F,out:P,sup:B}})},120)};return window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D),y!=null&&window.clearTimeout(y),T&&cancelAnimationFrame(T)}},[b,S,R]),n.jsxs("div",{className:jn.wrap,children:[n.jsx("div",{className:jn.centerLogoWrap,children:n.jsx(rs,{to:"/guidehub",className:jn.centerLogoLink,"aria-label":"Guide Hub Home",children:n.jsx("img",{ref:m,src:t,alt:"Guide Hub",className:jn.centerLogo})})}),g&&n.jsxs(n.Fragment,{children:[n.jsx(Up,{items:e.filter(T=>T.side==="left").map(T=>({key:T.key,to:T.to,label:T.label,icon:T.icon})),side:"left",variant:"main",arcOffset:b}),n.jsx(Up,{items:e.filter(T=>T.side==="right").map(T=>({key:T.key,to:T.to,label:T.label,icon:T.icon})),side:"right",variant:"main",arcOffset:b}),h&&l.length>0&&n.jsx(Up,{items:l.map(T=>({key:T.key,to:T.to,label:T.label,icon:T.icon})),side:"sub",anchorSide:h,variant:"sub",outerOffset:S,compact:!0}),h&&u.length>0&&n.jsx(Up,{items:u.map(T=>({key:T.key,to:T.to,label:T.label,icon:T.icon})),side:"sub2",anchorSide:h,variant:"sub2",superOffset:R,compact:!0})]})]})},zN=[{key:"events",label:"Events",to:"/guidehub?tab=events",side:"left",sub:[{key:"event-list",label:"Event List",to:"/guidehub?tab=events&sub=event-list"},{key:"event-cycle",label:"Event Cycle",to:"/guidehub?tab=events&sub=event-cycle"},{key:"hellevator",label:"Hellevator",to:"/guidehub?tab=hellevator",sub2:[{key:"hellevator-guide",label:"Hellevator Guide",to:"/guidehub?tab=hellevator&sub=hellevator-guide"}]},{key:"legendary-dungeon",label:"Legendary Dungeon",to:"/guidehub?tab=legendary-dungeon",sub2:[{key:"legendary-dungeon-guide-epics-legendaries",label:"Legendary Dungeon Guide, Epics & Legendaries",to:"/guidehub?tab=legendary-dungeon&sub=legendary-dungeon-guide-epics-legendaries"}]}]},{key:"progression",label:"Progression",to:"/guidehub?tab=progression",side:"left",sub:[{key:"early",label:"Early Game",to:"/guidehub?tab=progression&sub=early",sub2:[{key:"first-weekend-guide",label:"First Weekend Guide",to:"/guidehub?tab=progression&sub=early&sub2=first-weekend-guide"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=progression&sub=early&sub2=max-item-stats-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=fortress-package-skip-order"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=progression&sub=early&sub2=underworld-pro-package-skip-order"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=early&sub2=gem-calculator"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=progression&sub=early&sub2=fortress-attack-duplication"}]},{key:"mid",label:"Mid Game",to:"/guidehub?tab=progression&sub=mid",sub2:[{key:"dungeon-pause",label:"Dungeon Pause",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause",sub2:[{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator"},{key:"dungeon-pause-exit",label:"Dungeon Pause Exit",to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit"}]},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=progression&sub=mid&sub2=gem-calculator"},{key:"calendar-skip",label:"Calendar Skip",to:"/guidehub?tab=progression&sub=mid&sub2=calendar-skip"}]},{key:"late",label:"Late Game",to:"/guidehub?tab=progression&sub=late"}]},{key:"gamefeatures",label:"Game Features",to:"/guidehub?tab=gamefeatures",side:"left",sub:[{key:"fortress",label:"Fortress",to:"/guidehub?tab=gamefeatures&sub=fortress",sub2:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-calculator"},{key:"fortress-package-skip-order",label:"Fortress Package skip order",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-package-skip-order"},{key:"fortress-attack-duplication",label:"Fortress attack duplication guide",to:"/guidehub?tab=gamefeatures&sub=fortress&sub2=fortress-attack-duplication"}]},{key:"dungeons",label:"Dungeons",to:"/guidehub?tab=dungeons",sub2:[]},{key:"underworld",label:"Underworld",to:"/guidehub?tab=gamefeatures&sub=underworld",sub2:[{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-calculator"},{key:"underworld-pro-package-skip-order",label:"Underworld Pro Package skip order",to:"/guidehub?tab=gamefeatures&sub=underworld&sub2=underworld-pro-package-skip-order"}]},{key:"arenaam",label:"Arena Manager",to:"/guidehub?tab=gamefeatures&sub=arenaam",sub2:[{key:"am-rune-bonuses",label:"AM Rune bonuses",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-rune-bonuses"},{key:"am-build-order",label:"AM Build order",to:"/guidehub?tab=gamefeatures&sub=arenaam&sub2=am-build-order"}]}]},{key:"calculators",label:"Calculators",to:"/guidehub?tab=calculators",side:"right",sub:[{key:"fortress-calculator",label:"Fortress Calculator",to:"/guidehub?tab=calculators&sub=fortress-calculator"},{key:"underworld-calculator",label:"Underworld Calculator",to:"/guidehub?tab=calculators&sub=underworld-calculator"},{key:"max-item-stats-calculator",label:"Max Item Stats Calculator",to:"/guidehub?tab=calculators&sub=max-item-stats-calculator"},{key:"gem-calculator",label:"Gem Calculator",to:"/guidehub?tab=calculators&sub=gem-calculator"},{key:"dungeon-pause-open-xp-calculator",label:"Dungeon Pause open XP Calculator",to:"/guidehub?tab=calculators&sub=dungeon-pause-open-xp-calculator"}]},{key:"infographics",label:"Infographics",to:"/guidehub?tab=infographics",side:"right",sub:[]},{key:"class-book",label:"Class book",to:"/guidehub?tab=class-book",side:"right",sub:[]}],Yee="_topWrap_1vr4p_1",Jee="_divider_1vr4p_19",Zee="_contentArea_1vr4p_53",ete="_placeholder_1vr4p_65",tte="_placeholderTitle_1vr4p_79",ste="_placeholderText_1vr4p_93",zc={topWrap:Yee,divider:Jee,contentArea:Zee,placeholder:ete,placeholderTitle:tte,placeholderText:ste},nte="/assets/logo_guidehub-c4zKGdF-.png";function rc({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const rte=()=>n.jsx(rc,{title:"Game Features"});function Ts({title:t}){return n.jsxs("div",{style:{padding:"16px 12px 24px",background:"var(--tableBg, #14273E)",border:"1px solid var(--line, #2C4A73)",borderRadius:12},children:[n.jsx("h2",{style:{margin:0,color:"var(--title, #F5F9FF)"},children:t}),n.jsx("p",{style:{margin:"6px 0 0",color:"var(--sub, #B0C4D9)"},children:"Coming soon"})]})}const ite=()=>n.jsx(Ts,{title:"Progression"}),ate=()=>n.jsx(Ts,{title:"Hellevator"}),ote=()=>n.jsx(Ts,{title:"Legendary Dungeon"}),lte=()=>n.jsx(Ts,{title:"Events"}),cte="_card_1rxdx_21",dte="_hoverLift_1rxdx_51",ute="_title_1rxdx_63",hte="_body_1rxdx_89",mte="_iconStack_1rxdx_99",Eu={card:cte,hoverLift:dte,title:ute,"pad-sm":"_pad-sm_1rxdx_81","pad-md":"_pad-md_1rxdx_83","pad-lg":"_pad-lg_1rxdx_85",body:hte,iconStack:mte};function pte({title:t,padding:e="md",hover:s=!0,className:r="",children:i}){return n.jsxs("div",{className:[Eu.card,Eu[`pad-${e}`],s?Eu.hoverLift:"",r].join(" "),children:[t?n.jsx("div",{className:Eu.title,children:t}):null,n.jsx("div",{className:Eu.body,children:i})]})}const fte=[{title:"Fortress Calculator",slug:"fortress-calculator"},{title:"Underworld Calculator",slug:"underworld-calculator"},{title:"Max Item Stats Calculator",slug:"max-item-stats-calculator"},{title:"Gem Calculator",slug:"gem-calculator"},{title:"Dungeon Pause Open XP Calculator",slug:"dungeon-pause-open-xp-calculator"}],gte="_grid_1amcc_3",xte="_tileBtn_1amcc_45",yte="_wrap_1amcc_87",vte="_headerBar_1amcc_99",bte="_title_1amcc_117",Au={grid:gte,tileBtn:xte,wrap:yte,headerBar:vte,title:bte};function _te(){const[t,e]=Yl(),s=r=>{const i=new URLSearchParams(t);i.set("tab","calculators"),i.set("sub",r),i.delete("sub2"),e(i,{replace:!1})};return n.jsxs("div",{className:Au.wrap,children:[n.jsx("div",{className:Au.headerBar,children:n.jsx("h2",{className:Au.title,children:"Calculators"})}),n.jsx("div",{className:Au.grid,children:fte.map(r=>n.jsx("button",{className:Au.tileBtn,onClick:()=>s(r.slug),"aria-label":r.title,children:n.jsx(pte,{title:r.title,padding:"md",hover:!0,children:n.jsx(n.Fragment,{children:" "})})},r.slug))})]})}const wte=()=>n.jsx(Ts,{title:"Infographics (Dropdown inside page)"}),jte=()=>n.jsx(Ts,{title:"Class book"}),Ste=()=>n.jsx(Ts,{title:"Dungeons"}),Nte=()=>n.jsx(rc,{title:"Fortress"}),kte=()=>n.jsx(rc,{title:"Fortress Calculator"}),Cte="_wrap_1skhh_7",Tte="_headerBar_1skhh_21",Ete="_title_1skhh_39",Ate="_meta_1skhh_55",Ite="_description_1skhh_67",Pte="_contentWrapper_1skhh_83",Rte="_tableSection_1skhh_97",Lte="_table_1skhh_97",Dte="_infoBox_1skhh_151",Mte="_sectionTitle_1skhh_165",Fte="_divider_1skhh_181",vr={wrap:Cte,headerBar:Tte,title:Ete,meta:Ate,description:Ite,contentWrapper:Pte,tableSection:Rte,table:Lte,infoBox:Dte,sectionTitle:Mte,divider:Fte};function Bte(){return n.jsxs("div",{className:vr.wrap,children:[n.jsxs("div",{className:vr.headerBar,children:[n.jsx("h2",{className:vr.title,children:"Fortress Package skip order"}),n.jsx("span",{className:vr.meta,children:"Last updated: 21.02.2025"})]}),n.jsx("p",{className:vr.description,children:"This guide outlines the optimal order to upgrade your Fortress and associated buildings in Shakes & Fidget. Follow the suggested order to minimize resource use and maximize efficiency."}),n.jsxs("div",{className:vr.contentWrapper,children:[n.jsxs("section",{className:vr.tableSection,children:[n.jsx("h3",{className:vr.sectionTitle,children:"Fortress Build Order"}),n.jsxs("table",{className:vr.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Building"}),n.jsx("th",{children:"Level"}),n.jsx("th",{children:"Gold Cost"}),n.jsx("th",{children:"Shroom Cost"}),n.jsx("th",{children:"Wood Cost"}),n.jsx("th",{children:"Stone Cost"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"35"}),n.jsx("td",{children:"12"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"150"}),n.jsx("td",{children:"50"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"138"}),n.jsx("td",{children:"46"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"440"}),n.jsx("td",{children:"140"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"406"}),n.jsx("td",{children:"129"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,100"}),n.jsx("td",{children:"333"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"1,015"}),n.jsx("td",{children:"308"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,500"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"24"}),n.jsx("td",{children:"2,308"}),n.jsx("td",{children:"738"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"60"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"6,000"}),n.jsx("td",{children:"2,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Laborer's Quarter"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"36"}),n.jsx("td",{children:"5,538"}),n.jsx("td",{children:"1,849"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"7"}),n.jsx("td",{children:"70"}),n.jsx("td",{children:"48"}),n.jsx("td",{children:"13,417"}),n.jsx("td",{children:"4,433"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"80"}),n.jsx("td",{children:"78"}),n.jsx("td",{children:"27,200"}),n.jsx("td",{children:"9,280"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"720"}),n.jsx("td",{children:"240"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"1,408"}),n.jsx("td",{children:"448"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Hall of Knight"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"2,640"}),n.jsx("td",{children:"800"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Gem Mine"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"15"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"50"}),n.jsx("td",{children:"17"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Treasury"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"25"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"40"}),n.jsx("td",{children:"13"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"0"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"30"}),n.jsx("td",{children:"20"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"92"}),n.jsx("td",{children:"74"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"248"}),n.jsx("td",{children:"200"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Woodcutter"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"21"}),n.jsx("td",{children:"500"}),n.jsx("td",{children:"320"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"22"}),n.jsx("td",{children:"0"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"6"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"90"}),n.jsx("td",{children:"16"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"9"}),n.jsx("td",{children:"5"}),n.jsx("td",{children:"264"}),n.jsx("td",{children:"45"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Quarry"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"12"}),n.jsx("td",{children:"10"}),n.jsx("td",{children:"660"}),n.jsx("td",{children:"107"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"1"}),n.jsx("td",{children:"4"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"20"}),n.jsx("td",{children:"14"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Barracks"}),n.jsx("td",{children:"2"}),n.jsx("td",{children:"8"}),n.jsx("td",{children:"3"}),n.jsx("td",{children:"82"}),n.jsx("td",{children:"55"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Total cost"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"577"}),n.jsx("td",{children:"363"}),n.jsx("td",{children:"99,881"}),n.jsx("td",{children:"33,218"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Fortress Pack ressources"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"300"}),n.jsx("td",{children:"100,000"}),n.jsx("td",{children:"50,000"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Left over"}),n.jsx("td",{children:"-"}),n.jsx("td",{children:"-577"}),n.jsx("td",{children:"-63"}),n.jsx("td",{children:"119"}),n.jsx("td",{children:"16,782"})]})]})]})]}),n.jsxs("section",{className:vr.infoBox,children:[n.jsx("h3",{className:vr.sectionTitle,children:"Important"}),n.jsx("p",{children:"Completely ignore building the following buildings until you have built everything else to MAX:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Archery Guild"}),n.jsx("li",{children:"Mage's Tower"}),n.jsx("li",{children:"Fortifications"})]}),n.jsx("div",{className:vr.divider}),n.jsx("h3",{className:vr.sectionTitle,children:"Total Costs"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Gold:"})," 577 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Shrooms:"})," 363 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Wood:"})," 99,881 ",n.jsx("br",{}),n.jsx("strong",{children:"Total Stone:"})," 33,218 ",n.jsx("br",{})]}),n.jsx("h3",{className:vr.sectionTitle,children:"Remaining Resources"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Remaining Gold:"})," -577 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Shrooms:"})," -63 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Wood:"})," 119 ",n.jsx("br",{}),n.jsx("strong",{children:"Remaining Stone:"})," 16,782"]})]})]})]})}const $te=()=>n.jsx(rc,{title:"Fortress attack duplication guide"}),Ote=()=>n.jsx(rc,{title:"Underworld"}),Vte=()=>n.jsx(rc,{title:"Underworld Calculator"}),Ute=()=>n.jsx(rc,{title:"Underworld Pro Package skip order"}),zte=()=>n.jsx(Ts,{title:"Arena / AM"}),Hte="_wrap_mm7x0_5",Gte="_headerBar_mm7x0_19",Wte="_title_mm7x0_37",qte="_meta_mm7x0_51",Kte="_description_mm7x0_63",Qte="_controls_mm7x0_79",Xte="_search_mm7x0_83",Yte="_tableWrap_mm7x0_119",Jte="_table_mm7x0_119",Zte="_thead_mm7x0_143",ese="_th_mm7x0_143",tse="_td_mm7x0_167",sse="_tierCell_mm7x0_179",nse="_amountCell_mm7x0_181",rse="_bonusCell_mm7x0_183",ise="_tags_mm7x0_185",ase="_tierBox_mm7x0_191",ose="_tierIcon_mm7x0_193",lse="_tierTexts_mm7x0_203",cse="_tierName_mm7x0_205",dse="_badge_mm7x0_211",use="_badgeMax_mm7x0_231",hse="_badgeAchiev_mm7x0_233",mse="_badgeX2_mm7x0_235",pse="_badgeX12_mm7x0_237",fse="_badgeX60_mm7x0_239",gse="_iconHead_mm7x0_245",xse="_achiev_mm7x0_261",yse="_achievImg_mm7x0_263",vse="_dataRow_mm7x0_291",bse="_tierCellHover_mm7x0_311",Ke={wrap:Hte,headerBar:Gte,title:Wte,meta:qte,description:Kte,controls:Qte,search:Xte,tableWrap:Yte,table:Jte,thead:Zte,th:ese,td:tse,tierCell:sse,amountCell:nse,bonusCell:rse,tags:ise,tierBox:ase,tierIcon:ose,tierTexts:lse,tierName:cse,badge:dse,badgeMax:use,badgeAchiev:hse,badgeX2:mse,badgeX12:pse,badgeX60:fse,iconHead:gse,achiev:xse,achievImg:yse,dataRow:vse,tierCellHover:bse};function iA(t){return String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().replace(/[^a-z0-9]+/g,"")}function _se(t){const e=t.filter(Boolean).join(" ");return iA(e)}const wse={fortressbanner:"DRIVE_FILE_ID_HIER",woodcuttergif:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",treasurygif:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",smithygif:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",quarrygif:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",magetowergif:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",laborerquagif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",gemminegif:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",fortressgif:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",fortificationgif:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",barracksgif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",archerygif:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",academygif:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",fortressgemcalculatoricon:"DRIVE_FILE_ID_HIER",fortressdiagram1:"DRIVE_FILE_ID_HIER",fortressdiagram2:"DRIVE_FILE_ID_HIER",underworldbanner:"DRIVE_FILE_ID_HIER",underworldcalculatoricon:"DRIVE_FILE_ID_HIER",uwgategif:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",trollblockgif:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",torturechambergif:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",soulextractorgif:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",keepergif:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",hearthofdarkngif:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",goldpitgif:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",goblinpitgif:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",gladiatorgif:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",adventuromaticgif:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",amicon:"1a_gPOH3j87wcsuI4sitTgwVA9lvlLJku",ambuildorder:"17euou3ng62FCr7HVeesQm-kZGcV7Ij7l",hellevatorbanner:"DRIVE_FILE_ID_HIER",hellevatoricon:"DRIVE_FILE_ID_HIER",legendarydungeonbanner:"DRIVE_FILE_ID_HIER",legendarydungeonepicslegendariesicon:"DRIVE_FILE_ID_HIER",eventsbanner:"DRIVE_FILE_ID_HIER",eventlisticon:"DRIVE_FILE_ID_HIER",eventcycleicon:"DRIVE_FILE_ID_HIER",calculatorsbanner:"DRIVE_FILE_ID_HIER",calculatorsmaxitemstatsicon:"DRIVE_FILE_ID_HIER",calculatorsdungeonpauseopenxpicon:"DRIVE_FILE_ID_HIER",progressionbanner:"DRIVE_FILE_ID_HIER",progressionearlygemcalculatordiagram1:"DRIVE_FILE_ID_HIER",progressionmiddungeonpauseoverview:"DRIVE_FILE_ID_HIER",infographicsbanner:"DRIVE_FILE_ID_HIER",classbookcover:"DRIVE_FILE_ID_HIER",classbookback:"DRIVE_FILE_ID_HIER",dungeonsbanner:"DRIVE_FILE_ID_HIER",goldxpcurve:"1UbZoa4h3bouL8sDdxLpKzz3kFEgFim_-",totalresrune:"1mdvEK5WDkBnR7pFs5-yVE_wTsAE6PqqH",lightresrune:"1692qgkv23P76tnkV22tpGQwmFQv3lrjc",lightdmgrune:"1932ov-vly-qu_ghlMmJrqH9zEH2UzZZ_",iceresrune:"1-8ocIDqs8wrDM8CgoaA3RCQN-A-pquWj",icedmgrune:"1idRxpKUIx5EBlO1D9c_CF0DxVmPtxR6O",fireresrune:"1N2eh0YOSGGkNzgDlnsnEdlbyU2BpfQqQ",firedmgrune:"1jCHfsLEZIg0konSNvDfmv42SUNWj3FEo",healthrune:"1rQCSliXuZi-Z3REBaHkNO9Dtte6MR4Bt",xprune:"1Okqq4A7pUaVhmNzYEBpyrHlSzISbnpXs",goldrune:"1qMhCTNrBV2NOvLxWsybCeXOrR96PBHt5",itemqualrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",epicrune:"1J-kvaKzyxj_HU31rPUVk8g1wF32DjG-S",singlerune:"1FowkAzWip7QNI2k6CUAjDWBdAMJU1pFV",doublerune:"16ZL63Rh9SW76iSZLSYxFkFNyBMY57Lr8",luckbig:"1iYlE4rDU6rg3MHKG0vvwwb9wskdmu8-1",blackbig:"14bA3CU46YkT4um1tHmFoOGLp8RZE_v0s",legendarybig:"1soGwIo5IBQBhyX75KhD3-3jodoMoe450"};function jse(t){var s;const e=Array.isArray(t)?_se(t):iA(t!=null?t:"");return(s=wse[e])!=null?s:null}function Gg(t,e=512){var a,l;const s=jse(t);if(!s)return{id:null,url:null,thumb:null,fallback:""};const r=(a=Kl(s))!=null?a:null,i=r&&(l=sr(r,e))!=null?l:null;return{id:s,url:r,thumb:i,fallback:""}}function Vl(t,e=512){return Gg(t,e).thumb}const jo={gold:"rune_gold",xp:"rune_xp",hp:"rune_hp",totalRes:"rune_totalres",singleRes:"rune_singleres",elem:"rune_elemental",item:"rune_itemquality",epics:"rune_epics"},HN={Capitalist:"achiev_capitalist","Stinking rich":"achiev_stinkingrich","Rune Master":"achiev_runemaster"};function So({keyName:t,label:e}){const s=Gg(t,36);return n.jsxs("div",{className:Ke.iconHead,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:e,width:36,height:36,style:{borderRadius:6,border:"1px solid #2B4C73"}}):n.jsx("div",{style:{width:36,height:36,borderRadius:6,background:"#1A2F4A",border:"1px solid #2B4C73",display:"grid",placeItems:"center",color:"#fff",fontWeight:800},children:(s.fallback||e).slice(0,1).toUpperCase()}),n.jsx("span",{children:e})]})}function Sse({name:t}){const e=Object.keys(HN).find(r=>t.toLowerCase().includes(r.toLowerCase())),s=Gg(e?HN[e]:"achiev_generic",16);return n.jsxs("div",{className:Ke.achiev,children:[s.thumb?n.jsx("img",{src:s.thumb,alt:t,width:16,height:16,style:{borderRadius:3,border:"1px solid #2C4A73"}}):n.jsx("div",{className:Ke.achievImg}),n.jsx("span",{children:t})]})}const Kf=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"Thousand",amount:"10 E4",singleRes:"4%",elemDmg:"3%"},{tier:"Thousand",amount:"100 E5",gold:"3%",epics:"3%"},{tier:"Million",amount:"1 E6",hp:"2%",singleRes:"5%",elemDmg:"4%"},{tier:"Million",amount:"10 E7",gold:"4%",epics:"4%"},{tier:"Million",amount:"100 E8",totalRes:"3%",singleRes:"6%",elemDmg:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",singleRes:"7%",elemDmg:"6%",epics:"5%"},{tier:"Billion",amount:"10 E10",xp:"2%",singleRes:"8%"},{tier:"Billion",amount:"100 E11",gold:"6%",elemDmg:"7%",epics:"6%"},{tier:"Trillion",amount:"1 E12",singleRes:"9%",elemDmg:"8%"},{tier:"Trillion",amount:"10 E13",gold:"7%",totalRes:"4%",singleRes:"10%",epics:"7%"},{tier:"Trillion",amount:"100 E14",singleRes:"11%",elemDmg:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",singleRes:"12%",epics:"8%"},{tier:"Quadrillion",amount:"10 E16",hp:"3%",elemDmg:"10%"},{tier:"Quadrillion",amount:"100 E17",gold:"9%",singleRes:"13%",epics:"9%"},{tier:"Quintillion",amount:"1 E18",singleRes:"14%",elemDmg:"11%"},{tier:"Quintillion",amount:"10 E19",gold:"10%",totalRes:"5%",epics:"10%"},{tier:"Quintillion",amount:"100 E20",singleRes:"15%",elemDmg:"12%"},{tier:"Sextillion",amount:"1 E21",gold:"11%",epics:"11%"},{tier:"Sextillion",amount:"10 E22",singleRes:"16%",elemDmg:"13%"},{tier:"Sextillion",amount:"100 E23",gold:"12%",totalRes:"6%",epics:"12%"},{tier:"Septillion",amount:"1 E24",singleRes:"17%",elemDmg:"14%"},{tier:"Septillion",amount:"10 E25",gold:"13%",epics:"13%"},{tier:"Septillion",amount:"100 E26",totalRes:"7%",singleRes:"18%",elemDmg:"15%"},{tier:"Octillion",amount:"1 E27",gold:"14%",epics:"14%"},{tier:"Octillion",amount:"10 E28",singleRes:"19%",elemDmg:"16%"},{tier:"Octillion",amount:"100 E29",gold:"15%",totalRes:"8%",epics:"15%"},{tier:"Nonillion",amount:"1 E30",singleRes:"20%",elemDmg:"17%"},{tier:"Nonillion",amount:"10 E31",gold:"16%",epics:"16%"},{tier:"Nonillion",amount:"100 E32",totalRes:"9%",singleRes:"21%",elemDmg:"18%"},{tier:"Decillion",amount:"1 E33",gold:"17%",epics:"17%"},{tier:"Decillion",amount:"10 E34",singleRes:"22%",elemDmg:"19%",note:"x2 Boost"},{tier:"Decillion",amount:"100 E35",gold:"18%",totalRes:"10%",epics:"18%"},{tier:"Undecillion",amount:"1 E36",singleRes:"23%",elemDmg:"20%"},{tier:"Undecillion",amount:"10 E37",gold:"19%",epics:"19%"},{tier:"Undecillion",amount:"100 E38",totalRes:"11%",singleRes:"24%",elemDmg:"21%"},{tier:"Duodecillion",amount:"1 E39",gold:"20%",epics:"20%"},{tier:"Duodecillion",amount:"10 E40",singleRes:"25%",elemDmg:"22%"},{tier:"Duodecillion",amount:"100 E41",gold:"21%",totalRes:"12%",epics:"21%"},{tier:"Tredecillion",amount:"1 E42",singleRes:"26%",elemDmg:"23%"},{tier:"Tredecillion",amount:"10 E43",gold:"22%",epics:"22%"},{tier:"Tredecillion",amount:"100 E44",totalRes:"13%",singleRes:"27%",elemDmg:"24%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"23%",epics:"23%"},{tier:"Quattuordecillion",amount:"10 E46",singleRes:"28%",elemDmg:"25%"},{tier:"Quattuordecillion",amount:"100 E47",gold:"24%",totalRes:"14%",epics:"24%"},{tier:"Quindecillion",amount:"1 E48",singleRes:"29%",elemDmg:"26%"},{tier:"Quindecillion",amount:"10 E49",gold:"25%",epics:"25%"},{tier:"Quindecillion",amount:"100 E50",totalRes:"15%",singleRes:"30%",elemDmg:"27%"},{tier:"Sexdecillion",amount:"1 E51",gold:"26%",epics:"26%"},{tier:"Sexdecillion",amount:"10 E52",singleRes:"31%",elemDmg:"28%"},{tier:"Sexdecillion",amount:"100 E53",gold:"27%",totalRes:"16%",epics:"27%"},{tier:"Septendecillion",amount:"1 E54",singleRes:"32%",elemDmg:"29%"},{tier:"Septendecillion",amount:"10 E55",gold:"28%",epics:"28%"},{tier:"Septendecillion",amount:"100 E56",totalRes:"17%",singleRes:"33%",elemDmg:"30%"},{tier:"Octodecillion",amount:"1 E57",gold:"29%",epics:"29%"},{tier:"Octodecillion",amount:"10 E58",singleRes:"34%",elemDmg:"31%"},{tier:"Octodecillion",amount:"100 E59",gold:"30%",totalRes:"18%",epics:"30%"},{tier:"Novemdecillion",amount:"1 E60",singleRes:"35%",elemDmg:"32%"},{tier:"Novemdecillion",amount:"10 E61",gold:"31%",epics:"31%"},{tier:"Novemdecillion",amount:"100 E62",totalRes:"19%",singleRes:"36%",elemDmg:"33%"},{tier:"Vigintillion",amount:"1 E63",gold:"32%",epics:"32%"},{tier:"Vigintillion",amount:"10 E64",singleRes:"37%",elemDmg:"34%"},{tier:"Vigintillion",amount:"100 E65",gold:"33%",totalRes:"20%",epics:"33%"},{tier:"Unvigintillion",amount:"1 E66",singleRes:"38%",elemDmg:"35%"},{tier:"Unvigintillion",amount:"10 E67",gold:"34%",epics:"34%"},{tier:"Unvigintillion",amount:"100 E68",totalRes:"21%",singleRes:"39%",elemDmg:"36%"},{tier:"Duovigintillion",amount:"1 E69",gold:"35%",epics:"35%"},{tier:"Duovigintillion",amount:"10 E70",note:"x12 Boost"},{tier:"Duovigintillion",amount:"100 E71",totalRes:"22%",singleRes:"40%",elemDmg:"37%"},{tier:"Trevigintillion",amount:"1 E72",gold:"36%",epics:"36%"},{tier:"Trevigintillion",amount:"10 E73",singleRes:"41%",elemDmg:"38%"},{tier:"Trevigintillion",amount:"100 E74",gold:"37%",totalRes:"23%",epics:"37%"},{tier:"Quattuorvigintillion",amount:"1 E75",singleRes:"42%",elemDmg:"39%"},{tier:"Quattuorvigintillion",amount:"10 E76",gold:"38%",epics:"38%"},{tier:"Quattuorvigintillion",amount:"100 E77",totalRes:"24%",singleRes:"43%",elemDmg:"40%"},{tier:"Quinvigintillion",amount:"1 E78",gold:"39%",epics:"39%"},{tier:"Quinvigintillion",amount:"10 E79",singleRes:"44%",elemDmg:"41%"},{tier:"Quinvigintillion",amount:"100 E80",gold:"40%",totalRes:"25%",epics:"40%"},{tier:"Sexvigintillion",amount:"1 E81",singleRes:"45%",elemDmg:"42%"},{tier:"Sexvigintillion",amount:"10 E82",gold:"41%",epics:"41%"},{tier:"Sexvigintillion",amount:"100 E83",totalRes:"26%",singleRes:"46%",elemDmg:"43%"},{tier:"Septenvigintillion",amount:"1 E84",gold:"42%",epics:"42%"},{tier:"Septenvigintillion",amount:"10 E85",singleRes:"47%",elemDmg:"44%"},{tier:"Septenvigintillion",amount:"100 E86",gold:"43%",totalRes:"27%",epics:"43%"},{tier:"Octovigintillion",amount:"1 E87",singleRes:"48%",elemDmg:"45%"},{tier:"Octovigintillion",amount:"10 E88",gold:"44%",epics:"44%"},{tier:"Octovigintillion",amount:"100 E89",totalRes:"28%",singleRes:"49%",elemDmg:"46%"},{tier:"Novemvigintillion",amount:"1 E90",gold:"45%",epics:"45%"},{tier:"Novemvigintillion",amount:"10 E91",singleRes:"50%",elemDmg:"47%"},{tier:"Novemvigintillion",amount:"100 E92",gold:"46%",totalRes:"29%",epics:"46%"},{tier:"Trigintillion",amount:"1 E93",singleRes:"51%",elemDmg:"48%"},{tier:"Trigintillion",amount:"10 E94",gold:"47%",epics:"47%"},{tier:"Trigintillion",amount:"100 E95",totalRes:"30%",singleRes:"52%",elemDmg:"49%"},{tier:"Untrigintillion",amount:"1 E96",gold:"48%",epics:"48%"},{tier:"Untrigintillion",amount:"10 E97",singleRes:"53%",elemDmg:"50%"},{tier:"Untrigintillion",amount:"100 E98",gold:"49%",totalRes:"31%",epics:"49%"},{tier:"Duotrigintillion",amount:"1 E99",singleRes:"54%",elemDmg:"51%"},{tier:"Duotrigintillion",amount:"10 E100",gold:"50%",epics:"50%"},{tier:"Duotrigintillion",amount:"100 E101",totalRes:"32%",singleRes:"55%",elemDmg:"52%"},{tier:"Trestrigintillion",amount:"1 E102",gold:"51%",epics:"51%"},{tier:"Trestrigintillion",amount:"10 E103",singleRes:"56%",elemDmg:"53%"},{tier:"Trestrigintillion",amount:"100 E104",gold:"52%",totalRes:"33%",epics:"52%"},{tier:"Quattuortrigintillion",amount:"1 E105",singleRes:"57%",elemDmg:"54%"},{tier:"Quattuortrigintillion",amount:"10 E106",gold:"53%",epics:"53%"},{tier:"Quattuortrigintillion",amount:"100 E107",totalRes:"34%",singleRes:"58%",elemDmg:"55%"},{tier:"Quintrigintillion",amount:"1 E108",gold:"54%",epics:"54%"},{tier:"Quintrigintillion",amount:"10 E109",singleRes:"59%",elemDmg:"56%"},{tier:"Quintrigintillion",amount:"100 E110",gold:"55%",totalRes:"35%",epics:"55%"},{tier:"Sextrigintillion",amount:"1 E111",singleRes:"60%",elemDmg:"57%",note:"x60 Boost"},{tier:"Sextrigintillion",amount:"10 E112",gold:"56%",epics:"56%"},{tier:"Sextrigintillion",amount:"100 E113",totalRes:"36%",singleRes:"61%",elemDmg:"58%"},{tier:"Septentrigintillion",amount:"1 E114",gold:"57%",epics:"57%"},{tier:"Septentrigintillion",amount:"10 E115",singleRes:"62%",elemDmg:"59%"},{tier:"Septentrigintillion",amount:"100 E116",gold:"58%",totalRes:"37%",epics:"58%"},{tier:"Octotrigintillion",amount:"1 E117",singleRes:"63%",elemDmg:"60%"},{tier:"Octotrigintillion",amount:"10 E118",gold:"59%",epics:"59%"},{tier:"Octotrigintillion",amount:"100 E119",gold:"60%",totalRes:"38%",epics:"60%"},{tier:"Noventrigintillion",amount:"1 E120",singleRes:"64%",elemDmg:"61%"},{tier:"Noventrigintillion",amount:"10 E121",gold:"61%",epics:"61%"},{tier:"Noventrigintillion",amount:"100 E122",gold:"62%",totalRes:"39%",epics:"62%"},{tier:"Quadragintillion",amount:"1 E123",singleRes:"65%",elemDmg:"62%"},{tier:"Quadragintillion",amount:"10 E124",gold:"63%",epics:"63%"},{tier:"Quadragintillion",amount:"100 E125",gold:"64%",totalRes:"40%",epics:"64%"},{tier:"Unquadragintillion",amount:"1 E126",singleRes:"66%",elemDmg:"63%"},{tier:"Unquadragintillion",amount:"10 E127",gold:"65%",epics:"65%"},{tier:"Unquadragintillion",amount:"100 E128",gold:"66%",totalRes:"41%",epics:"66%"},{tier:"Duoquadragintillion",amount:"1 E129",singleRes:"67%",elemDmg:"64%"},{tier:"Duoquadragintillion",amount:"10 E130",gold:"67%",epics:"67%"},{tier:"Duoquadragintillion",amount:"100 E131",gold:"68%",totalRes:"42%",epics:"68%"},{tier:"Trequadragintillion",amount:"1 E132",singleRes:"68%",elemDmg:"65%"},{tier:"Trequadragintillion",amount:"10 E133",gold:"69%",epics:"69%"},{tier:"Trequadragintillion",amount:"100 E134",gold:"70%",totalRes:"43%",epics:"70%"},{tier:"Quattuorquadragintillion",amount:"1 E135",singleRes:"69%",elemDmg:"66%"},{tier:"Quattuorquadragintillion",amount:"10 E136",gold:"71%",epics:"71%"},{tier:"Quattuorquadragintillion",amount:"100 E137",gold:"72%",totalRes:"44%",epics:"72%"},{tier:"Quinquadragintillion",amount:"1 E138",singleRes:"70%",elemDmg:"67%"},{tier:"Quinquadragintillion",amount:"10 E139",gold:"73%",epics:"73%"},{tier:"Quinquadragintillion",amount:"100 E140",gold:"74%",totalRes:"45%",epics:"74%"},{tier:"Sexquadragintillion",amount:"1 E141",singleRes:"71%",elemDmg:"68%"},{tier:"Sexquadragintillion",amount:"10 E142",gold:"75%",epics:"75%"},{tier:"Sexquadragintillion",amount:"100 E143",gold:"76%",totalRes:"46%",epics:"76%"},{tier:"Septenquadragintillion",amount:"1 E144",singleRes:"72%",elemDmg:"69%"},{tier:"Septenquadragintillion",amount:"10 E145",gold:"77%",epics:"77%"},{tier:"Septenquadragintillion",amount:"100 E146",gold:"78%",totalRes:"47%",epics:"78%"},{tier:"Octoquadragintillion",amount:"1 E147",singleRes:"73%",elemDmg:"70%"},{tier:"Octoquadragintillion",amount:"10 E148",gold:"79%",epics:"79%"},{tier:"Octoquadragintillion",amount:"100 E149",gold:"80%",totalRes:"48%",epics:"80%"},{tier:"Novenquadragintillion",amount:"1 E150",singleRes:"74%",elemDmg:"71%"},{tier:"Novenquadragintillion",amount:"10 E151",gold:"81%",epics:"81%"},{tier:"Novenquadragintillion",amount:"100 E152",gold:"82%",totalRes:"49%",epics:"82%"},{tier:"Quinquagintillion",amount:"1 E153",singleRes:"75%",elemDmg:"72%"},{tier:"Quinquagintillion",amount:"10 E154",gold:"83%",epics:"83%"},{tier:"Quinquagintillion",amount:"100 E155",gold:"84%",totalRes:"50%",epics:"84%"}];function gv(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function Nse(t){const e=(t!=null?t:"").toLowerCase();return e.includes("achievement")||e.includes("rune master")||e.includes("capitalist")||e.includes("stinking rich")}function kse(t){const e=(t!=null?t:"").toLowerCase();return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x8")?"x8":e.includes("x2")?"x2":null}const GN={Quintillion:"Capitalist Achievement",Septillion:"Stinking rich Achievement",Decillion:"Rune Master"},Cse="Komplette bersicht der Arena-Manager-Runen mit ihren Bonuswerten. Gruppiert nach Tier; Max, Achievements und Breakpoints sind markiert.";function Tse(t){const e=t.trim().toLowerCase();return e?Kf.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):Kf}function Ese(){const[t,e]=E.useState(""),[s,r]=E.useState(null),i=Tse(t),a=E.useMemo(()=>Math.max(...Kf.map(d=>gv(d.amount))),[]),l=E.useMemo(()=>{const d=new Map;for(const h of i)d.has(h.tier)||d.set(h.tier,[]),d.get(h.tier).push(h);const u=Array.from(new Set(Kf.map(h=>h.tier)));return Array.from(d.entries()).sort((h,m)=>u.indexOf(h[0])-u.indexOf(m[0]))},[i]);return n.jsxs("div",{className:Ke.wrap,children:[n.jsxs("div",{className:Ke.headerBar,children:[n.jsx("h2",{className:Ke.title,children:"Arena Manager  Rune bonuses"}),n.jsx("span",{className:Ke.meta,children:"last updated: 15.01.2025"})]}),n.jsx("p",{className:Ke.description,children:Cse}),n.jsx("div",{className:Ke.controls,children:n.jsx("input",{className:Ke.search,placeholder:"Suche (z. B. thousand, E34, x60)",value:t,onChange:d=>e(d.target.value)})}),n.jsx("div",{className:Ke.tableWrap,children:n.jsxs("table",{className:Ke.table,children:[n.jsx("thead",{className:Ke.thead,children:n.jsxs("tr",{className:Ke.headRow,children:[n.jsx("th",{className:`${Ke.th} ${Ke.tierCell}`,children:"Tier"}),n.jsx("th",{className:`${Ke.th} ${Ke.amountCell}`,children:"Amount"}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.gold,label:"Gold Bonus"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.xp,label:"XP Bonus"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.hp,label:"HP Bonus"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.totalRes,label:"Total Resistance"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.singleRes,label:"Single Resistance"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.elem,label:"Elemental Damage"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.item,label:"Improved Item Quality"})}),n.jsx("th",{className:Ke.th,children:n.jsx(So,{keyName:jo.epics,label:"Chances of Epics"})}),n.jsx("th",{className:Ke.th,children:"Tags"})]})}),n.jsx("tbody",{children:l.map(([d,u])=>{const h=Math.max(...u.map(m=>gv(m.amount)));return u.map((m,g)=>{var N,S,C,R,M,T,y,w;const v=Math.abs(gv(m.amount)-a)<1e-6,b=kse(m.note);return n.jsxs("tr",{className:Ke.dataRow,onMouseEnter:()=>r(d),onMouseLeave:()=>r(null),children:[g===0&&n.jsx("td",{className:`${Ke.td} ${Ke.tierCell} ${Math.abs(h-a)<1e-6?Ke.tierMax:""} ${s===d?Ke.tierCellHover:""}`,rowSpan:u.length,children:n.jsxs("div",{className:Ke.tierBox,children:[n.jsx("div",{className:Ke.tierIcon,children:d.slice(0,1).toUpperCase()}),n.jsxs("div",{className:Ke.tierTexts,children:[n.jsx("div",{className:Ke.tierName,children:d}),GN[d]&&n.jsx(Sse,{name:GN[d]})]})]})}),n.jsx("td",{className:`${Ke.td} ${Ke.amountCell}`,children:m.amount}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(N=m.gold)!=null?N:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(S=m.xp)!=null?S:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(C=m.hp)!=null?C:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(R=m.totalRes)!=null?R:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(M=m.singleRes)!=null?M:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(T=m.elemDmg)!=null?T:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(y=m.itemQuality)!=null?y:""}),n.jsx("td",{className:`${Ke.td} ${Ke.bonusCell}`,children:(w=m.epics)!=null?w:""}),n.jsxs("td",{className:`${Ke.td} ${Ke.tags}`,children:[v&&n.jsx("span",{className:`${Ke.badge} ${Ke.badgeMax}`,children:"MAX"}),Nse(m.note)&&n.jsx("span",{className:`${Ke.badge} ${Ke.badgeAchiev}`,children:"Achievement"}),b==="x2"&&n.jsx("span",{className:`${Ke.badge} ${Ke.badgeX2}`,children:"x2"}),b==="x12"&&n.jsx("span",{className:`${Ke.badge} ${Ke.badgeX12}`,children:"x12"}),b==="x60"&&n.jsx("span",{className:`${Ke.badge} ${Ke.badgeX60}`,children:"x60"}),b==="x8"&&n.jsx("span",{className:Ke.badge,children:"x8"})]})]},`${d}-${g}`)})})})]})})]})}const Ase="_wrap_zrza7_11",Ise="_headerBar_zrza7_15",Pse="_title_zrza7_31",Rse="_meta_zrza7_33",Lse="_centerCol_zrza7_37",Dse="_text_zrza7_53",Mse="_imageBox_zrza7_55",Fse="_imageFallback_zrza7_57",Bse="_credit_zrza7_59",_a={wrap:Ase,headerBar:Ise,title:Pse,meta:Rse,centerCol:Lse,text:Dse,imageBox:Mse,imageFallback:Fse,credit:Bse};function $se(){const t=Gg("ambuildorder"),e=E.useMemo(()=>t.id?`https://drive.google.com/thumbnail?id=${t.id}&sz=w1024`:null,[t.id]),s=E.useMemo(()=>t.id?`https://drive.google.com/uc?export=view&id=${t.id}`:null,[t.id]),r=t.thumb||null,i=e||s||r;return n.jsxs("div",{className:_a.wrap,children:[n.jsxs("div",{className:_a.headerBar,children:[n.jsx("h2",{className:_a.title,children:"Arena Manager  Build Order"}),n.jsx("span",{className:_a.meta,children:"Last updated: 30.11.2024"})]}),n.jsxs("div",{className:_a.centerCol,children:[n.jsxs("div",{className:_a.text,children:[n.jsx("p",{children:"Build your Attractions according to the picture below for maximum efficiency."}),n.jsxs("p",{children:["Upgrading to full Platinum on all Attractions will cost you ",n.jsx("strong",{children:"4300 Mushrooms"}),"."]})]}),i?n.jsx("div",{className:_a.imageBox,children:n.jsx("img",{src:i,alt:"Arena Manager build order",loading:"lazy",decoding:"async",referrerPolicy:"no-referrer"})}):n.jsx("div",{className:_a.imageFallback,children:""}),n.jsxs("p",{className:_a.credit,children:["Credit to ",n.jsx("em",{children:"SF Tavern Discord"}),"."]})]})]})}const Ose=()=>n.jsx(Ts,{title:"Hellevator Guide"}),Vse=()=>n.jsx(Ts,{title:"Legendary Dungeon Guide, Epics & Legendaries"}),Use=()=>n.jsx(Ts,{title:"Event List"}),zse=()=>n.jsx(Ts,{title:"Event Cycle"}),Hse="_foCalc_18a5w_3",Gse="_panel_18a5w_211",Wse="_panelHead_18a5w_227",qse="_panelTitle_18a5w_241",Kse="_controls_18a5w_243",Qse="_ctrlLabel_18a5w_245",Xse="_ctrlSelect_18a5w_249",Yse="_tableWrap_18a5w_291",Jse="_table_18a5w_291",Zse="_th_18a5w_305",ene="_td_18a5w_321",tne="_row_18a5w_333",sne="_note_18a5w_335",Is={foCalc:Hse,panel:Gse,panelHead:Wse,panelTitle:qse,controls:Kse,ctrlLabel:Qse,ctrlSelect:Xse,tableWrap:Yse,table:Jse,th:Zse,td:ene,row:tne,note:sne},aA={woodcuttergif:{id:"1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",url:"https://drive.google.com/uc?export=view&id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX",thumb:"https://drive.google.com/thumbnail?id=1wss7GO8uQd4EDNOqlxi6XnPTJN9a3_XX&sz=w64",fallback:""},treasurygif:{id:"1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",url:"https://drive.google.com/uc?export=view&id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw",thumb:"https://drive.google.com/thumbnail?id=1vcW_dKiJrmM2QswU9eRdPuqBXMAWD3rw&sz=w64",fallback:""},smithygif:{id:"1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",url:"https://drive.google.com/uc?export=view&id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i",thumb:"https://drive.google.com/thumbnail?id=1vFNzcf6ozg1zfAjM4hCZ5uXDLrrxlb5i&sz=w64",fallback:""},quarrygif:{id:"1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",url:"https://drive.google.com/uc?export=view&id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP",thumb:"https://drive.google.com/thumbnail?id=1lULek5WgJIWP71jleIEmzcdOOMOXG1tP&sz=w64",fallback:""},magetowergif:{id:"19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",url:"https://drive.google.com/uc?export=view&id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r",thumb:"https://drive.google.com/thumbnail?id=19kufIsNJbdqQ6W4Le2pcBo5LIUTyPf1r&sz=w64",fallback:""},laborerquagif:{id:"1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",url:"https://drive.google.com/uc?export=view&id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d",thumb:"https://drive.google.com/thumbnail?id=1CBT0dRrA3ls2AWcs6xcQf3j_saW_w06d&sz=w64",fallback:""},gemminegif:{id:"1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",url:"https://drive.google.com/uc?export=view&id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk",thumb:"https://drive.google.com/thumbnail?id=1e87-r1Dmm4nlFHAo7TJwGL6GnewvEgRk&sz=w64",fallback:""},fortressgif:{id:"1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",url:"https://drive.google.com/uc?export=view&id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2",thumb:"https://drive.google.com/thumbnail?id=1d1EuQpuyUACK3QSmqt3LS1E_VXAnMnv2&sz=w64",fallback:""},fortificationgif:{id:"1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",url:"https://drive.google.com/uc?export=view&id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ",thumb:"https://drive.google.com/thumbnail?id=1r9eE-dtW_tnwG0O_TcqbV0IfExrKWpHQ&sz=w64",fallback:""},barracksgif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},archerygif:{id:"19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",url:"https://drive.google.com/uc?export=view&id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE",thumb:"https://drive.google.com/thumbnail?id=19gHfiOcOSg3hFkkqalPWUbRAhSUrqjcE&sz=w64",fallback:""},academygif:{id:"1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",url:"https://drive.google.com/uc?export=view&id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9",thumb:"https://drive.google.com/thumbnail?id=1ecNA5rlJhtZBwgDZeiw3SJFNl2jM51z9&sz=w64",fallback:""},uwgategif:{id:"1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",url:"https://drive.google.com/uc?export=view&id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3",thumb:"https://drive.google.com/thumbnail?id=1FzKBmJcqXCOAUfdG7esFW6nOPkB8iJA3&sz=w64",fallback:""},trollblockgif:{id:"1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",url:"https://drive.google.com/uc?export=view&id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa",thumb:"https://drive.google.com/thumbnail?id=1xAP6-k2BfSe26Wfd9pumtikAc2GYMzXa&sz=w64",fallback:""},torturechambergif:{id:"1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",url:"https://drive.google.com/uc?export=view&id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1",thumb:"https://drive.google.com/thumbnail?id=1HVdmYILGq8B2GeJMhGAvxtgO_FPjWqK1&sz=w64",fallback:""},soulextractorgif:{id:"1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",url:"https://drive.google.com/uc?export=view&id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI",thumb:"https://drive.google.com/thumbnail?id=1rLtoEG-c_Q3bTzmEBrd4GydtEby2wVaI&sz=w64",fallback:""},keepergif:{id:"1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",url:"https://drive.google.com/uc?export=view&id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o",thumb:"https://drive.google.com/thumbnail?id=1qlcjFM6zaxNIbHjOCYndomdXS5MXiO1o&sz=w64",fallback:""},hearthofdarkngif:{id:"1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",url:"https://drive.google.com/uc?export=view&id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei",thumb:"https://drive.google.com/thumbnail?id=1mQR7OPGssgCLgiH8nEh8H2B_Dnp44Zei&sz=w64",fallback:""},goldpitgif:{id:"1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",url:"https://drive.google.com/uc?export=view&id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL",thumb:"https://drive.google.com/thumbnail?id=1PiL2fXnWyC8L7B6cep2ia282aB83KOqL&sz=w64",fallback:""},goblinpitgif:{id:"1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",url:"https://drive.google.com/uc?export=view&id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh",thumb:"https://drive.google.com/thumbnail?id=1sxzs5jx7oRxEqkxLwtfvM8CfkHzJJyKh&sz=w64",fallback:""},gladiatorgif:{id:"1KBe0WW5vytsOHob7i525db47XZTj-lfi",url:"https://drive.google.com/uc?export=view&id=1KBe0WW5vytsOHob7i525db47XZTj-lfi",thumb:"https://drive.google.com/thumbnail?id=1KBe0WW5vytsOHob7i525db47XZTj-lfi&sz=w64",fallback:""},adventuromaticgif:{id:"1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",url:"https://drive.google.com/uc?export=view&id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh",thumb:"https://drive.google.com/thumbnail?id=1HzPBVJm_Oj5uxIjooHQ1jAG21_eS2Knh&sz=w64",fallback:""}},Us=(t,e=0)=>t*3600+e*60,se=[Us(0,15),Us(0,31),Us(1,6),Us(2,20),Us(5,0),Us(8,0),Us(11,25),Us(18,27),Us(40,0),Us(87,16),Us(190,46),Us(320,0),Us(480,0),Us(615,33),Us(800,0)],qt=[Us(1054,17),Us(1122,51),Us(1245,42),Us(1343,20),Us(1440,0)],nne={fortress:{key:"fortress",title:"Fortress",costs:[{level:1,wood:0,stone:0,gold:10,timeSec:se[0]},{level:2,wood:150,stone:50,gold:20,timeSec:se[1]},{level:3,wood:440,stone:140,gold:30,timeSec:se[2]},{level:4,wood:1100,stone:333,gold:40,timeSec:se[3]},{level:5,wood:2500,stone:800,gold:50,timeSec:se[4]},{level:6,wood:6e3,stone:2e3,gold:60,timeSec:se[5]},{level:7,wood:13417,stone:4433,gold:70,timeSec:se[6]},{level:8,wood:27200,stone:9280,gold:80,timeSec:se[7]},{level:9,wood:57375,stone:19125,gold:90,timeSec:se[8]},{level:10,wood:154e3,stone:5e4,gold:100,timeSec:se[9]},{level:11,wood:379500,stone:122100,gold:110,timeSec:se[10]},{level:12,wood:830400,stone:273600,gold:120,timeSec:se[11]},{level:13,wood:1872e3,stone:619200,gold:130,timeSec:se[12]},{level:14,wood:3744e3,stone:1248e3,gold:140,timeSec:se[13]},{level:15,wood:72e5,stone:234e4,gold:150,timeSec:se[14]},{level:16,wood:1512e4,stone:504e4,gold:160,timeSec:qt[0]},{level:17,wood:2735e4,stone:9e6,gold:170,timeSec:qt[1]},{level:18,wood:5e7,stone:175e5,gold:180,timeSec:qt[2]},{level:19,wood:9e7,stone:3e7,gold:190,timeSec:qt[3]},{level:20,wood:165e6,stone:54e6,gold:200,timeSec:qt[4]}]},laborersquarter:{key:"laborersquarter",title:"Laborer's Quarter",costs:[{level:1,wood:35,stone:12,gold:5,timeSec:se[0]},{level:2,wood:138,stone:46,gold:10,timeSec:se[1]},{level:3,wood:406,stone:129,gold:15,timeSec:se[2]},{level:4,wood:1015,stone:308,gold:20,timeSec:se[3]},{level:5,wood:2308,stone:738,gold:25,timeSec:se[4]},{level:6,wood:5538,stone:1849,gold:30,timeSec:se[5]},{level:7,wood:12385,stone:4092,gold:35,timeSec:se[6]},{level:8,wood:25108,stone:8566,gold:40,timeSec:se[7]},{level:9,wood:52962,stone:17654,gold:45,timeSec:se[8]},{level:10,wood:142154,stone:46154,gold:50,timeSec:se[9]},{level:11,wood:350308,stone:112708,gold:55,timeSec:se[10]},{level:12,wood:766523,stone:252554,gold:60,timeSec:se[11]},{level:13,wood:1872e3,stone:619200,gold:65,timeSec:se[12]},{level:14,wood:3744e3,stone:1248e3,gold:70,timeSec:se[13]},{level:15,wood:72e5,stone:234e4,gold:75,timeSec:se[14]}]},academy:{key:"academy",title:"Academy",costs:[{level:1,wood:7,stone:9,gold:7,timeSec:se[0]},{level:2,wood:28,stone:37,gold:14,timeSec:se[1]},{level:3,wood:81,stone:103,gold:21,timeSec:se[2]},{level:4,wood:203,stone:246,gold:28,timeSec:se[3]},{level:5,wood:462,stone:591,gold:35,timeSec:se[4]},{level:6,wood:1108,stone:1477,gold:42,timeSec:se[5]},{level:7,wood:2477,stone:3247,gold:49,timeSec:se[6]},{level:8,wood:5022,stone:6853,gold:56,timeSec:se[7]},{level:9,wood:10592,stone:14123,gold:63,timeSec:se[8]},{level:10,wood:28431,stone:36923,gold:70,timeSec:se[9]},{level:11,wood:70062,stone:90166,gold:77,timeSec:se[10]},{level:12,wood:153305,stone:202043,gold:84,timeSec:se[11]},{level:13,wood:374400,stone:495360,gold:91,timeSec:se[12]},{level:14,wood:748800,stone:998400,gold:98,timeSec:se[13]},{level:15,wood:144e4,stone:1872e3,gold:105,timeSec:se[14]},{level:16,wood:3024e3,stone:4032e3,gold:112,timeSec:qt[0]},{level:17,wood:547e4,stone:72e5,gold:119,timeSec:qt[1]},{level:18,wood:1e7,stone:14e6,gold:126,timeSec:qt[2]},{level:19,wood:18e6,stone:24e6,gold:133,timeSec:qt[3]},{level:20,wood:33e6,stone:43e6,gold:140,timeSec:qt[4]}]},treasury:{key:"treasury",title:"Treasury",costs:[{level:1,wood:40,stone:13,gold:25,timeSec:se[0]},{level:2,wood:160,stone:53,gold:50,timeSec:se[1]},{level:3,wood:469,stone:149,gold:75,timeSec:se[2]},{level:4,wood:1173,stone:356,gold:100,timeSec:se[3]},{level:5,wood:2667,stone:853,gold:125,timeSec:se[4]},{level:6,wood:6400,stone:2133,gold:150,timeSec:se[5]},{level:7,wood:14311,stone:4729,gold:175,timeSec:se[6]},{level:8,wood:29013,stone:9899,gold:200,timeSec:se[7]},{level:9,wood:61200,stone:20400,gold:225,timeSec:se[8]},{level:10,wood:147840,stone:48e3,gold:250,timeSec:se[9]},{level:11,wood:331200,stone:106560,gold:275,timeSec:se[10]},{level:12,wood:664320,stone:218880,gold:300,timeSec:se[11]},{level:13,wood:1497600,stone:495360,gold:325,timeSec:se[12]},{level:14,wood:2995200,stone:998400,gold:350,timeSec:se[13]},{level:15,wood:576e4,stone:1872e3,gold:375,timeSec:se[14]},{level:"15-45",wood:576e4,stone:1872e3,gold:375,timeSec:se[14]}]},gemmine:{key:"gemmine",title:"Gem Mine",costs:[{level:1,wood:50,stone:17,gold:15,timeSec:se[0]},{level:2,wood:200,stone:67,gold:30,timeSec:se[1]},{level:3,wood:587,stone:187,gold:45,timeSec:se[2]},{level:4,wood:1467,stone:444,gold:60,timeSec:se[3]},{level:5,wood:3333,stone:1067,gold:75,timeSec:se[4]},{level:6,wood:8e3,stone:2667,gold:90,timeSec:se[5]},{level:7,wood:17889,stone:5911,gold:105,timeSec:se[6]},{level:8,wood:36267,stone:12373,gold:120,timeSec:se[7]},{level:9,wood:76500,stone:25500,gold:135,timeSec:se[8]},{level:10,wood:184800,stone:6e4,gold:150,timeSec:se[9]},{level:11,wood:414e3,stone:133200,gold:165,timeSec:se[10]},{level:12,wood:830400,stone:273600,gold:180,timeSec:se[11]},{level:13,wood:1872e3,stone:619200,gold:195,timeSec:se[12]},{level:14,wood:3744e3,stone:1248e3,gold:210,timeSec:se[13]},{level:15,wood:72e5,stone:234e4,gold:225,timeSec:se[14]},{level:16,wood:1512e4,stone:504e4,gold:240,timeSec:qt[0]},{level:17,wood:2735e4,stone:9e6,gold:255,timeSec:qt[1]},{level:18,wood:5e7,stone:175e5,gold:270,timeSec:qt[2]},{level:19,wood:9e7,stone:3e7,gold:285,timeSec:qt[3]},{level:20,wood:165e6,stone:54e6,gold:300,timeSec:qt[4]},{level:"21-100",wood:3e8,stone:1e8,gold:1e7,timeSec:Us(1440,0)}]},woodcutter:{key:"woodcutter",title:"Woodcutter's Hut",costs:[{level:1,wood:0,stone:0,gold:2,timeSec:se[0]},{level:2,wood:30,stone:20,gold:4,timeSec:se[1]},{level:3,wood:88,stone:56,gold:6,timeSec:se[2]},{level:4,wood:220,stone:133,gold:8,timeSec:se[3]},{level:5,wood:500,stone:320,gold:10,timeSec:se[4]},{level:6,wood:1200,stone:800,gold:12,timeSec:se[5]},{level:7,wood:2683,stone:1773,gold:14,timeSec:se[6]},{level:8,wood:5440,stone:3712,gold:16,timeSec:se[7]},{level:9,wood:11475,stone:7650,gold:18,timeSec:se[8]},{level:10,wood:30800,stone:2e4,gold:20,timeSec:se[9]},{level:11,wood:75900,stone:48840,gold:22,timeSec:se[10]},{level:12,wood:166080,stone:109440,gold:24,timeSec:se[11]},{level:13,wood:405600,stone:268320,gold:26,timeSec:se[12]},{level:14,wood:873600,stone:582400,gold:28,timeSec:se[13]},{level:15,wood:18e5,stone:117e4,gold:30,timeSec:se[14]},{level:16,wood:378e4,stone:252e4,gold:32,timeSec:qt[0]},{level:17,wood:6837500,stone:45e5,gold:34,timeSec:qt[1]},{level:18,wood:125e5,stone:875e4,gold:36,timeSec:qt[2]},{level:19,wood:225e5,stone:15e6,gold:38,timeSec:qt[3]},{level:20,wood:4125e4,stone:27e6,gold:40,timeSec:qt[4]}]},quarry:{key:"quarry",title:"Quarry",costs:[{level:1,wood:22,stone:0,gold:3,timeSec:se[0]},{level:2,wood:90,stone:16,gold:6,timeSec:se[1]},{level:3,wood:264,stone:45,gold:9,timeSec:se[2]},{level:4,wood:660,stone:107,gold:12,timeSec:se[3]},{level:5,wood:1500,stone:256,gold:15,timeSec:se[4]},{level:6,wood:3600,stone:640,gold:18,timeSec:se[5]},{level:7,wood:8050,stone:1419,gold:21,timeSec:se[6]},{level:8,wood:16320,stone:2970,gold:24,timeSec:se[7]},{level:9,wood:34425,stone:6120,gold:27,timeSec:se[8]},{level:10,wood:92400,stone:16e3,gold:30,timeSec:se[9]},{level:11,wood:227700,stone:39072,gold:33,timeSec:se[10]},{level:12,wood:498240,stone:87552,gold:36,timeSec:se[11]},{level:13,wood:1216800,stone:214656,gold:39,timeSec:se[12]},{level:14,wood:2620800,stone:465920,gold:42,timeSec:se[13]},{level:15,wood:54e5,stone:936e3,gold:45,timeSec:se[14]},{level:16,wood:1134e4,stone:2016e3,gold:48,timeSec:qt[0]},{level:17,wood:20512500,stone:36e5,gold:51,timeSec:qt[1]},{level:18,wood:375e5,stone:7e6,gold:54,timeSec:qt[2]},{level:19,wood:675e5,stone:12e6,gold:57,timeSec:qt[3]},{level:20,wood:12375e4,stone:216e5,gold:60,timeSec:qt[4]}]},barracks:{key:"barracks",title:"Barracks",costs:[{level:1,wood:20,stone:14,gold:4,timeSec:se[0]},{level:2,wood:82,stone:55,gold:8,timeSec:se[1]},{level:3,wood:240,stone:153,gold:12,timeSec:se[2]},{level:4,wood:600,stone:364,gold:16,timeSec:se[3]},{level:5,wood:1364,stone:873,gold:20,timeSec:se[4]},{level:6,wood:3273,stone:2182,gold:24,timeSec:se[5]},{level:7,wood:7318,stone:4836,gold:28,timeSec:se[6]},{level:8,wood:14836,stone:10124,gold:32,timeSec:se[7]},{level:9,wood:31295,stone:20864,gold:36,timeSec:se[8]},{level:10,wood:84e3,stone:54545,gold:40,timeSec:se[9]},{level:11,wood:207e3,stone:133200,gold:44,timeSec:se[10]},{level:12,wood:415200,stone:273600,gold:48,timeSec:se[11]},{level:13,wood:936e3,stone:619200,gold:52,timeSec:se[12]},{level:14,wood:1872e3,stone:1248e3,gold:56,timeSec:se[13]},{level:15,wood:36e5,stone:234e4,gold:60,timeSec:se[14]}]},smithy:{key:"smithy",title:"Smithy",costs:[{level:1,wood:25,stone:8,gold:4,timeSec:se[0]},{level:2,wood:100,stone:33,gold:8,timeSec:se[1]},{level:3,wood:293,stone:93,gold:12,timeSec:se[2]},{level:4,wood:733,stone:222,gold:16,timeSec:se[3]},{level:5,wood:1667,stone:533,gold:20,timeSec:se[4]},{level:6,wood:4e3,stone:1333,gold:24,timeSec:se[5]},{level:7,wood:8944,stone:2956,gold:28,timeSec:se[6]},{level:8,wood:18133,stone:6187,gold:32,timeSec:se[7]},{level:9,wood:38250,stone:12750,gold:36,timeSec:se[8]},{level:10,wood:92400,stone:3e4,gold:40,timeSec:se[9]},{level:11,wood:207e3,stone:66600,gold:44,timeSec:se[10]},{level:12,wood:415200,stone:136800,gold:48,timeSec:se[11]},{level:13,wood:936e3,stone:309600,gold:52,timeSec:se[12]},{level:14,wood:1872e3,stone:624e3,gold:56,timeSec:se[13]},{level:15,wood:36e5,stone:117e4,gold:60,timeSec:se[14]},{level:16,wood:756e4,stone:252e4,gold:64,timeSec:qt[0]},{level:17,wood:13675e3,stone:45e5,gold:68,timeSec:qt[1]},{level:18,wood:25e6,stone:875e4,gold:72,timeSec:qt[2]},{level:19,wood:45e6,stone:15e6,gold:76,timeSec:qt[3]},{level:20,wood:825e5,stone:27e6,gold:80,timeSec:qt[4]}]},magetower:{key:"magetower",title:"Mage's Tower",costs:[{level:1,wood:61,stone:20,gold:6,timeSec:se[0]},{level:2,wood:240,stone:61,gold:12,timeSec:se[1]},{level:3,wood:675,stone:205,gold:18,timeSec:se[2]},{level:4,wood:1636,stone:524,gold:24,timeSec:se[3]},{level:5,wood:4091,stone:1364,gold:30,timeSec:se[4]},{level:6,wood:9409,stone:3109,gold:36,timeSec:se[5]},{level:7,wood:19473,stone:6644,gold:42,timeSec:se[6]},{level:8,wood:41727,stone:13909,gold:48,timeSec:se[7]},{level:9,wood:113400,stone:36818,gold:54,timeSec:se[8]},{level:10,wood:282273,stone:90818,gold:60,timeSec:se[9]},{level:11,wood:622800,stone:205200,gold:66,timeSec:se[10]},{level:12,wood:1404e3,stone:464400,gold:72,timeSec:se[11]},{level:13,wood:2808e3,stone:936e3,gold:78,timeSec:se[12]},{level:14,wood:54e5,stone:1755e3,gold:84,timeSec:se[13]},{level:15,wood:1134e4,stone:378e4,gold:90,timeSec:se[14]}]},archery:{key:"archery",title:"Archery Guild",costs:[{level:1,wood:41,stone:7,gold:5,timeSec:se[0]},{level:2,wood:164,stone:27,gold:10,timeSec:se[1]},{level:3,wood:480,stone:76,gold:15,timeSec:se[2]},{level:4,wood:1200,stone:182,gold:20,timeSec:se[3]},{level:5,wood:2727,stone:436,gold:25,timeSec:se[4]},{level:6,wood:6545,stone:1091,gold:30,timeSec:se[5]},{level:7,wood:14636,stone:2418,gold:35,timeSec:se[6]},{level:8,wood:29673,stone:5062,gold:40,timeSec:se[7]},{level:9,wood:62591,stone:10432,gold:45,timeSec:se[8]},{level:10,wood:168e3,stone:27273,gold:50,timeSec:se[9]},{level:11,wood:414e3,stone:66600,gold:55,timeSec:se[10]},{level:12,wood:830400,stone:136800,gold:60,timeSec:se[11]},{level:13,wood:1872e3,stone:309600,gold:65,timeSec:se[12]},{level:14,wood:3744e3,stone:624e3,gold:70,timeSec:se[13]},{level:15,wood:72e5,stone:117e4,gold:75,timeSec:se[14]}]},fortifications:{key:"fortifications",title:"fortifications",costs:[{level:1,wood:30,stone:13,gold:15,timeSec:se[0]},{level:2,wood:120,stone:53,gold:30,timeSec:se[1]},{level:3,wood:352,stone:149,gold:45,timeSec:se[2]},{level:4,wood:880,stone:356,gold:60,timeSec:se[3]},{level:5,wood:2e3,stone:853,gold:75,timeSec:se[4]},{level:6,wood:4800,stone:2133,gold:90,timeSec:se[5]},{level:7,wood:10733,stone:4729,gold:105,timeSec:se[6]},{level:8,wood:21760,stone:9899,gold:120,timeSec:se[7]},{level:9,wood:45900,stone:20400,gold:135,timeSec:se[8]},{level:10,wood:110880,stone:48e3,gold:150,timeSec:se[9]},{level:11,wood:248400,stone:106560,gold:165,timeSec:se[10]},{level:12,wood:498240,stone:218880,gold:180,timeSec:se[11]},{level:13,wood:1123200,stone:495360,gold:195,timeSec:se[12]},{level:14,wood:2246400,stone:998400,gold:210,timeSec:se[13]},{level:15,wood:432e4,stone:1872e3,gold:225,timeSec:se[14]},{level:16,wood:9072e3,stone:4032e3,gold:240,timeSec:qt[0]},{level:17,wood:1641e4,stone:72e5,gold:255,timeSec:qt[1]},{level:18,wood:3e7,stone:14e6,gold:270,timeSec:qt[2]},{level:19,wood:54e6,stone:24e6,gold:285,timeSec:qt[3]},{level:20,wood:99e6,stone:432e5,gold:300,timeSec:qt[4]}]}},rne=[{key:"woodcutter",label:"Woodcutter"},{key:"treasury",label:"Treasury"},{key:"smithy",label:"Smithy"},{key:"quarry",label:"Quarry"},{key:"magetower",label:"Mage Tower"},{key:"laborersquarter",label:"Laborers Quarters"},{key:"gemmine",label:"Gem Mine"},{key:"fortress",label:"Fortress"},{key:"fortifications",label:"Fortification"},{key:"barracks",label:"Barracks"},{key:"archery",label:"Archery"},{key:"academy",label:"Academy"}],ine="fortress",ane={woodcutter:"woodcuttergif",treasury:"treasurygif",smithy:"smithygif",quarry:"quarrygif",magetower:"magetowergif",laborersquarter:"laborerquagif",gemmine:"gemminegif",fortress:"fortressgif",fortifications:"fortificationgif",barracks:"barracksgif",archery:"archerygif",academy:"academygif"};function one(t){return t<=0?0:t>=15?.75:+(t*.05).toFixed(2)}function WN(t){const e=Math.max(0,Math.round(t)),s=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,a=l=>l.toString().padStart(2,"0");return`${a(s)}:${a(r)}:${a(i)}`}const lne=()=>{const[t,e]=E.useState(ine),[s,r]=E.useState(1),i=E.useMemo(()=>{var m;const d=ane[t],u=aA[d],h=(m=u==null?void 0:u.id)!=null?m:u;return Kl.gifProxy(h)||Kl.gif(h)||""},[t]),a=E.useMemo(()=>{var d,u;return(u=(d=nne[t])==null?void 0:d.costs)!=null?u:[]},[t]),l=E.useMemo(()=>one(s),[s]);return n.jsxs("div",{className:`${Is.foCalc}`,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:rne.map(d=>n.jsx("option",{value:d.key,children:d.label},d.key))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:Is.panel,children:[n.jsxs("div",{className:Is.panelHead,children:[n.jsxs("div",{className:Is.panelTitle,children:["Fortress  ",t]}),n.jsxs("div",{className:Is.controls,children:[n.jsx("span",{className:Is.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{className:Is.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:16},(d,u)=>u).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:Is.tableWrap,children:n.jsxs("table",{className:Is.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:Is.th,children:"Level"}),n.jsx("th",{className:Is.th,children:"Wood"}),n.jsx("th",{className:Is.th,children:"Stone"}),n.jsx("th",{className:Is.th,children:"Build Time"}),n.jsx("th",{className:Is.th,children:"Build Time (L2)"}),n.jsx("th",{className:Is.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:a.map(d=>{var g,v,b,N,S,C,R;const u=(g=d.timeSec)!=null?g:0,h=Math.round(u*(1-l)),m=Math.ceil(Math.ceil(h/60)/10);return n.jsxs("tr",{className:Is.row,children:[n.jsx("td",{className:Is.td,children:d.level}),n.jsx("td",{className:Is.td,children:(N=(b=(v=d.wood)==null?void 0:v.toLocaleString)==null?void 0:b.call(v))!=null?N:d.wood}),n.jsx("td",{className:Is.td,children:(R=(C=(S=d.stone)==null?void 0:S.toLocaleString)==null?void 0:C.call(S))!=null?R:d.stone}),n.jsx("td",{className:Is.td,children:WN(u)}),n.jsx("td",{className:Is.td,children:WN(h)}),n.jsx("td",{className:Is.td,children:m.toLocaleString()})]},d.level)})})]})}),n.jsx("div",{className:Is.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},cne="_uwCalc_64lws_3",dne="_panel_64lws_211",une="_panelHead_64lws_227",hne="_panelTitle_64lws_241",mne="_controls_64lws_243",pne="_ctrlLabel_64lws_245",fne="_ctrlSelect_64lws_251",gne="_tableWrap_64lws_295",xne="_table_64lws_295",yne="_th_64lws_309",vne="_td_64lws_325",bne="_row_64lws_337",_ne="_note_64lws_339",_s={uwCalc:cne,panel:dne,panelHead:une,panelTitle:hne,controls:mne,ctrlLabel:pne,ctrlSelect:fne,tableWrap:gne,table:xne,th:yne,td:vne,row:bne,note:_ne},wne={uwgategif:"uwgate",trollblockgif:"trollblock",torturechambergif:"torturechamber",soulextractorgif:"soulextractor",keepergif:"keeper",hearthofdarkngif:"hearthofdarkn",goldpitgif:"goldpit",goblinpitgif:"goblinpit",gladiatorgif:"gladiator",adventuromaticgif:"adventuromatic"},jne={hearthofdarkn:{title:"Heart of Darkness",costs:[{level:1,soul:null,gold:null,timeSec:900},{level:2,soul:616,gold:2e3,timeSec:1895},{level:3,soul:1650,gold:3e3,timeSec:3960},{level:4,soul:4220,gold:4e3,timeSec:8400},{level:5,soul:11e3,gold:5e3,timeSec:18e3},{level:6,soul:25080,gold:6e3,timeSec:28800},{level:7,soul:45930,gold:7e3,timeSec:41100},{level:8,soul:84150,gold:8e3,timeSec:66420},{level:9,soul:198e3,gold:9e3,timeSec:144e3},{level:10,soul:439550,gold:1e4,timeSec:314160},{level:11,soul:902850,gold:11e3,timeSec:686760},{level:12,soul:2043300,gold:12e3,timeSec:1152e3},{level:13,soul:4118400,gold:13e3,timeSec:1728e3},{level:14,soul:7722e3,gold:14e3,timeSec:2215980},{level:15,soul:16632e3,gold:15e3,timeSec:288e4}]},soulextractor:{title:"Soul Extractor",costs:[{level:1,soul:74,gold:400,timeSec:900},{level:2,soul:277,gold:800,timeSec:1895},{level:3,soul:743,gold:1200,timeSec:3960},{level:4,soul:1900,gold:1600,timeSec:8400},{level:5,soul:4950,gold:2e3,timeSec:18e3},{level:6,soul:11285,gold:2400,timeSec:28800},{level:7,soul:24115,gold:2800,timeSec:41100},{level:8,soul:47585,gold:3200,timeSec:66420},{level:9,soul:118800,gold:3600,timeSec:144e3},{level:10,soul:264720,gold:4e3,timeSec:314160},{level:11,soul:543240,gold:4400,timeSec:686760},{level:12,soul:1225980,gold:4800,timeSec:1152e3},{level:13,soul:2471040,gold:5200,timeSec:1728e3},{level:14,soul:4633200,gold:5600,timeSec:2215980},{level:15,soul:9979200,gold:6e3,timeSec:288e4}]},gladiator:{title:"Gladiator Trainer",costs:[{level:1,soul:148,gold:700,timeSec:900},{level:2,soul:554,gold:1400,timeSec:1895},{level:3,soul:1485,gold:2100,timeSec:3960},{level:4,soul:3800,gold:2800,timeSec:8400},{level:5,soul:9900,gold:3500,timeSec:18e3},{level:6,soul:22570,gold:4200,timeSec:28800},{level:7,soul:48230,gold:4900,timeSec:41100},{level:8,soul:100950,gold:5600,timeSec:66420},{level:9,soul:237600,gold:6300,timeSec:144e3},{level:10,soul:527450,gold:7e3,timeSec:314160},{level:11,soul:1083420,gold:7700,timeSec:686760},{level:12,soul:2440320,gold:8400,timeSec:1152e3},{level:13,soul:4894080,gold:9100,timeSec:1728e3},{level:14,soul:9172800,gold:9800,timeSec:2215980},{level:15,soul:19728e3,gold:10500,timeSec:288e4}]},goldpit:{title:"Gold Pit",costs:[{level:1,soul:74,gold:350,timeSec:900},{level:2,soul:277,gold:700,timeSec:1895},{level:3,soul:743,gold:1050,timeSec:3960},{level:4,soul:1900,gold:1400,timeSec:8400},{level:5,soul:4950,gold:1750,timeSec:18e3},{level:6,soul:11285,gold:2100,timeSec:28800},{level:7,soul:24115,gold:2450,timeSec:41100},{level:8,soul:47585,gold:2800,timeSec:66420},{level:9,soul:118800,gold:3150,timeSec:144e3},{level:10,soul:264720,gold:3500,timeSec:314160},{level:11,soul:543240,gold:3850,timeSec:686760},{level:12,soul:1225980,gold:4200,timeSec:1152e3},{level:13,soul:2471040,gold:4550,timeSec:1728e3},{level:14,soul:4633200,gold:4900,timeSec:2215980},{level:15,soul:9979200,gold:5250,timeSec:288e4},{level:"16-100",soul:162518400,gold:1e7,timeSec:5184e3}]},adventuromatic:{title:"Adventuromatic",costs:[{level:1,soul:297,gold:1e4,timeSec:900},{level:2,soul:1105,gold:2e4,timeSec:1860},{level:3,soul:2970,gold:3e4,timeSec:3960},{level:4,soul:5700,gold:4e4,timeSec:8400},{level:5,soul:11880,gold:5e4,timeSec:18e3},{level:6,soul:22570,gold:6e4,timeSec:28800},{level:7,soul:41340,gold:7e4,timeSec:41100},{level:8,soul:75730,gold:8e4,timeSec:66420},{level:9,soul:178200,gold:9e4,timeSec:144e3},{level:10,soul:395600,gold:1e5,timeSec:314160},{level:11,soul:812550,gold:11e4,timeSec:686760},{level:12,soul:1839e3,gold:12e4,timeSec:1152e3},{level:13,soul:3706500,gold:13e4,timeSec:1728e3},{level:14,soul:6949800,gold:14e4,timeSec:2215980},{level:15,soul:14968500,gold:15e4,timeSec:288e4}]},torturechamber:{title:"Torture Chamber",costs:[{level:1,soul:148,gold:600,timeSec:900},{level:2,soul:554,gold:1200,timeSec:1895},{level:3,soul:1485,gold:1800,timeSec:3960},{level:4,soul:3800,gold:2400,timeSec:8400},{level:5,soul:9900,gold:3e3,timeSec:18e3},{level:6,soul:22570,gold:3600,timeSec:28800},{level:7,soul:48230,gold:4200,timeSec:41100},{level:8,soul:100950,gold:4800,timeSec:66420},{level:9,soul:237600,gold:5400,timeSec:144e3},{level:10,soul:527450,gold:6e3,timeSec:314160},{level:11,soul:1083420,gold:6600,timeSec:686760},{level:12,soul:2440320,gold:7200,timeSec:1152e3},{level:13,soul:4894080,gold:7800,timeSec:1728e3},{level:14,soul:9172800,gold:8400,timeSec:2215980},{level:15,soul:19728e3,gold:9e3,timeSec:288e4}]},uwgate:{title:"Underworld Gate",costs:[{level:1,soul:74,gold:300,timeSec:900},{level:2,soul:277,gold:600,timeSec:1895},{level:3,soul:743,gold:900,timeSec:3960},{level:4,soul:1900,gold:1200,timeSec:8400},{level:5,soul:4950,gold:1500,timeSec:18e3},{level:6,soul:11285,gold:1800,timeSec:28800},{level:7,soul:24115,gold:2100,timeSec:41100},{level:8,soul:47585,gold:2400,timeSec:66420},{level:9,soul:118800,gold:2700,timeSec:144e3},{level:10,soul:264720,gold:3e3,timeSec:314160},{level:11,soul:543240,gold:3300,timeSec:686760},{level:12,soul:1225980,gold:3600,timeSec:1152e3},{level:13,soul:2471040,gold:3900,timeSec:1728e3},{level:14,soul:4633200,gold:4200,timeSec:2215980},{level:15,soul:9979200,gold:4500,timeSec:288e4}]},keeper:{title:"Keeper",costs:[{level:1,soul:148,gold:650,timeSec:900},{level:2,soul:554,gold:1300,timeSec:1895},{level:3,soul:1485,gold:1950,timeSec:3960},{level:4,soul:3800,gold:2600,timeSec:8400},{level:5,soul:9900,gold:3250,timeSec:18e3},{level:6,soul:22570,gold:3900,timeSec:28800},{level:7,soul:48230,gold:4550,timeSec:41100},{level:8,soul:100950,gold:5200,timeSec:66420},{level:9,soul:237600,gold:5850,timeSec:144e3},{level:10,soul:527450,gold:6500,timeSec:314160},{level:11,soul:1083420,gold:7150,timeSec:686760},{level:12,soul:2440320,gold:7800,timeSec:1152e3},{level:13,soul:4894080,gold:8450,timeSec:1728e3},{level:14,soul:9172800,gold:9100,timeSec:2215980},{level:15,soul:19728e3,gold:9750,timeSec:288e4}]},goblinpit:{title:"Goblin Pit",costs:[{level:1,soul:74,gold:325,timeSec:900},{level:2,soul:277,gold:650,timeSec:1895},{level:3,soul:743,gold:975,timeSec:3960},{level:4,soul:1900,gold:1300,timeSec:8400},{level:5,soul:4950,gold:1625,timeSec:18e3},{level:6,soul:11285,gold:1950,timeSec:28800},{level:7,soul:24115,gold:2275,timeSec:41100},{level:8,soul:47585,gold:2600,timeSec:66420},{level:9,soul:118800,gold:2925,timeSec:144e3},{level:10,soul:264720,gold:3250,timeSec:314160},{level:11,soul:543240,gold:3575,timeSec:686760},{level:12,soul:1225980,gold:3900,timeSec:1152e3},{level:13,soul:2471040,gold:4225,timeSec:1728e3},{level:14,soul:4633200,gold:4550,timeSec:2215980},{level:15,soul:9979200,gold:4875,timeSec:288e4}]},trollblock:{title:"Troll Block",costs:[{level:1,soul:148,gold:750,timeSec:900},{level:2,soul:554,gold:1500,timeSec:1895},{level:3,soul:1485,gold:2250,timeSec:3960},{level:4,soul:3800,gold:3e3,timeSec:8400},{level:5,soul:9900,gold:3750,timeSec:18e3},{level:6,soul:22570,gold:4500,timeSec:28800},{level:7,soul:48230,gold:5250,timeSec:41100},{level:8,soul:100950,gold:6e3,timeSec:66420},{level:9,soul:237600,gold:6750,timeSec:144e3},{level:10,soul:527450,gold:7500,timeSec:314160},{level:11,soul:1083420,gold:8250,timeSec:686760},{level:12,soul:2440320,gold:9e3,timeSec:1152e3},{level:13,soul:4894080,gold:9750,timeSec:1728e3},{level:14,soul:9172800,gold:10500,timeSec:2215980},{level:15,soul:19728e3,gold:11250,timeSec:288e4}]}};function Sne(t){return Math.max(0,Math.min(15,Math.round(t)))*.05}function Nne(t){const e=Math.max(0,t),s=Math.round(e),r=Math.floor(s/3600),i=Math.floor(s%3600/60),a=s%60;return{h:r,m:i,s:a}}function qN(t){const{h:e,m:s,s:r}=Nne(t),i=a=>String(a).padStart(2,"0");return`${i(e)}:${i(s)}:${i(r)}`}function kne(t,e){var i,a;const s=Sne(e);return((a=(i=jne[t])==null?void 0:i.costs)!=null?a:[]).map(l=>{const d=l.timeSec*(1-s),u=Math.ceil(Math.ceil(d/60)/10);return{...l,timeAdjSec:d,skipMushroomsAdj:u}})}const Cne=["uwgategif","trollblockgif","torturechambergif","soulextractorgif","keepergif","hearthofdarkngif","goldpitgif","goblinpitgif","gladiatorgif","adventuromaticgif"],Tne=()=>{const[t,e]=E.useState("hearthofdarkngif"),[s,r]=E.useState(1),i=E.useMemo(()=>{var h;const d=aA[t],u=(h=d==null?void 0:d.id)!=null?h:d;return Kl.gifProxy(u)||Kl.gif(u)||""},[t]),a=E.useMemo(()=>{var d;return(d=wne[t])!=null?d:"hearthofdarkn"},[t]),l=E.useMemo(()=>kne(a,s),[a,s]);return n.jsxs("div",{className:_s.uwCalc,children:[n.jsxs("div",{className:"tabs",children:[n.jsx("span",{className:"tabSelectLabel",children:"Select building"}),n.jsx("select",{className:"tabSelect",value:t,onChange:d=>e(d.target.value),children:Cne.map(d=>n.jsx("option",{value:d,children:d.replace(/gif$/i,"")},d))})]}),n.jsxs("div",{className:"mediaRow",children:[n.jsx("div",{className:"media",children:i?n.jsx("img",{src:i,alt:t}):null}),n.jsxs("div",{className:_s.panel,children:[n.jsxs("div",{className:_s.panelHead,children:[n.jsxs("div",{className:_s.panelTitle,children:["Underworld  ",a]}),n.jsxs("div",{className:_s.controls,children:[n.jsx("label",{htmlFor:"uw-l2",className:_s.ctrlLabel,children:"L2 (Laborers)"}),n.jsx("select",{id:"uw-l2",className:_s.ctrlSelect,value:s,onChange:d=>r(parseInt(d.target.value,10)),children:Array.from({length:15},(d,u)=>u+1).map(d=>n.jsx("option",{value:d,children:d},d))})]})]}),n.jsx("div",{className:_s.tableWrap,children:n.jsxs("table",{className:_s.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:_s.th,children:"Level"}),n.jsx("th",{className:_s.th,children:"Soul"}),n.jsx("th",{className:_s.th,children:"Gold"}),n.jsx("th",{className:_s.th,children:"Build Time"}),n.jsx("th",{className:_s.th,children:"Build Time (L2)"}),n.jsx("th",{className:_s.th,children:"Skip (Mushr.)"})]})}),n.jsx("tbody",{children:l.length===0?n.jsx("tr",{className:_s.row,children:n.jsx("td",{className:_s.td,colSpan:6,children:"No data for this building yet."})}):l.map(d=>n.jsxs("tr",{className:_s.row,children:[n.jsx("td",{className:_s.td,children:d.level}),n.jsx("td",{className:_s.td,children:d.soul}),n.jsx("td",{className:_s.td,children:d.gold}),n.jsx("td",{className:_s.td,children:qN(d.timeSec)}),n.jsx("td",{className:_s.td,children:qN(d.timeAdjSec)}),n.jsx("td",{className:_s.td,children:d.skipMushroomsAdj})]},d.level))})]})}),n.jsx("p",{className:_s.note,children:"Hinweis: L2 wirkt fr alle Buildings (015  075%). Skip basiert auf der L2-Zeit (ceil(ceil(sec/60)/10))."})]})]})]})},Ene=()=>n.jsx(Ts,{title:"Max Item Stats Calculator"}),Ane="_wrap_mnr0g_1",Ine="_card_mnr0g_13",Pne="_title_mnr0g_33",Rne="_form_mnr0g_45",Lne="_field_mnr0g_57",Dne="_input_mnr0g_71",Mne="_gemsRow_mnr0g_87",Fne="_gemBox_mnr0g_101",Bne="_disabled_mnr0g_127",$ne="_gemImg_mnr0g_135",One="_gemFallback_mnr0g_149",Vne="_normalGem_mnr0g_165",Une="_blackGem_mnr0g_173",zne="_legendaryGem_mnr0g_181",Hne="_gemLabel_mnr0g_189",Gne="_gemValue_mnr0g_199",Wne="_hint_mnr0g_211",Zt={wrap:Ane,card:Ine,title:Pne,form:Rne,field:Lne,input:Dne,gemsRow:Mne,gemBox:Fne,disabled:Bne,gemImg:$ne,gemFallback:One,normalGem:Vne,blackGem:Une,legendaryGem:zne,gemLabel:Hne,gemValue:Gne,hint:Wne},qne={A:-8543.13499118391,B:44.0797096956705,C:223305.008474091,D:-.067010811487377,E:-307554661138002e-8,F:-632.101592233341,G:375316086045586e-19,H:204719196170508e-7,I:3153.33229655608,J:.421506101603155},Kne=.25,Qf=t=>Math.round(Number.isFinite(t)?t:0);function Qne(t){const e=Number(t.charLevel),s=Number(t.mineLevel),r=Number(t.guildHoK);if(s<25){const C=e*Kne*(1+(s-1)*.25)+r/3;return Qf(C)}const{A:i,B:a,C:l,D:d,E:u,F:h,G:m,H:g,I:v,J:b}=qne,S=i+a*e+l/s+d*e**2+u/s**2+h*e/s+m*e**3+g/s**3+v*e/s**2+b*e**2/s+r/3;return Qf(S)}function Xne(t){return Qf(t*(2/3))}function Yne(t){return Qf(t)}const xv={char:1e3,mine:100,hok:1e3},oA=({initialState:t,onStateChange:e})=>{var S,C,R;const[s,r]=E.useState((S=t==null?void 0:t.charLevel)!=null?S:""),[i,a]=E.useState((C=t==null?void 0:t.mineLevel)!=null?C:""),[l,d]=E.useState((R=t==null?void 0:t.guildHoKLevel)!=null?R:""),u=(M,T,y)=>{e&&(typeof M!="number"||typeof T!="number"||typeof y!="number"||e({charLevel:M,mineLevel:T,guildHoKLevel:y}))},h=E.useMemo(()=>s===""||i===""||l===""?null:Qne({charLevel:Number(s),mineLevel:Number(i),guildHoK:Number(l)}),[s,i,l]),m=E.useMemo(()=>h==null?null:Xne(h),[h]),g=E.useMemo(()=>h==null?null:Yne(h),[h]),v=Vl("luckbig"),b=Vl("blackbig"),N=Vl("legendarybig");return n.jsx("div",{className:Zt.wrap,children:n.jsxs("div",{className:Zt.card,children:[n.jsx("h2",{className:Zt.title,children:"Gem Calculator"}),n.jsxs("div",{className:Zt.form,children:[n.jsxs("label",{className:Zt.field,children:[n.jsx("span",{children:"Char Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Zt.input,placeholder:"e.g., 360",value:s,onChange:M=>{const T=M.currentTarget.value;if(T===""){r("");return}const y=Number(T),w=Number.isFinite(y)?y:"";r(w),u(w,i,l)},max:xv.char})]}),n.jsxs("label",{className:Zt.field,children:[n.jsx("span",{children:"Mine Level"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Zt.input,placeholder:"e.g., 10",value:i,onChange:M=>{const T=M.currentTarget.value;if(T===""){a("");return}const y=Number(T),w=Number.isFinite(y)?y:"";a(w),u(s,w,l)},max:xv.mine})]}),n.jsxs("label",{className:Zt.field,children:[n.jsx("span",{children:"Guild HoK"}),n.jsx("input",{type:"number",inputMode:"numeric",className:Zt.input,placeholder:"e.g., 840",value:l,onChange:M=>{const T=M.currentTarget.value;if(T===""){d("");return}const y=Number(T),w=Number.isFinite(y)?y:"";d(w),u(s,i,w)},max:xv.hok})]})]}),n.jsxs("div",{className:Zt.gemsRow,children:[n.jsxs("div",{className:`${Zt.gemBox} ${h==null?Zt.disabled:""}`,children:[v?n.jsx("img",{className:Zt.gemImg,src:v,alt:"Normal Gem"}):n.jsx("div",{className:`${Zt.gemFallback} ${Zt.normalGem}`}),n.jsx("div",{className:Zt.gemLabel,children:"Normal"}),n.jsx("div",{className:Zt.gemValue,children:h!=null?h:"-"})]}),n.jsxs("div",{className:`${Zt.gemBox} ${m==null?Zt.disabled:""}`,children:[b?n.jsx("img",{className:Zt.gemImg,src:b,alt:"Black Gem"}):n.jsx("div",{className:`${Zt.gemFallback} ${Zt.blackGem}`}),n.jsx("div",{className:Zt.gemLabel,children:"Black"}),n.jsx("div",{className:Zt.gemValue,children:m!=null?m:"-"})]}),n.jsxs("div",{className:`${Zt.gemBox} ${g==null?Zt.disabled:""}`,children:[N?n.jsx("img",{className:Zt.gemImg,src:N,alt:"Legendary Gem"}):n.jsx("div",{className:`${Zt.gemFallback} ${Zt.legendaryGem}`}),n.jsx("div",{className:Zt.gemLabel,children:"Legendary"}),n.jsx("div",{className:Zt.gemValue,children:g!=null?g:"-"})]})]}),n.jsxs("p",{className:Zt.hint,children:["The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find. Actual results may vary slightly."]})]})})},Jne="_container_19zdf_1",Zne="_headerBar_19zdf_13",ere="_title_19zdf_31",tre="_meta_19zdf_47",sre="_description_19zdf_59",Iu={container:Jne,headerBar:Zne,title:ere,meta:tre,description:sre},lA=({title:t,meta:e,description:s})=>n.jsxs("header",{className:Iu.container,children:[n.jsxs("div",{className:Iu.headerBar,children:[n.jsx("h2",{className:Iu.title,children:t}),e&&n.jsx("span",{className:Iu.meta,children:e})]}),s&&n.jsx("p",{className:Iu.description,children:s})]}),nre=()=>n.jsxs(n.Fragment,{children:[n.jsx(lA,{title:"Gem Calculator",meta:"last updated: 08.11.2024",description:n.jsxs(n.Fragment,{children:["Input your parameters (Char Level, Mine Level, Guild HoK) to see the approximate stats of your mined gems. The values are approximations and represent the ",n.jsx("em",{children:"max possible"})," you can find."]})}),n.jsx(oA,{})]}),rre="_wrapper_67xyv_1",ire="_panel_67xyv_11",are="_header_67xyv_27",ore="_title_67xyv_41",lre="_resetBtn_67xyv_53",cre="_table_67xyv_73",dre="_row_67xyv_99",ure="_name_67xyv_115",hre="_selectCell_67xyv_125",mre="_sumCell_67xyv_143",pre="_footer_67xyv_155",fre="_footerLine_67xyv_175",gre="_note_67xyv_187",zs={wrapper:rre,panel:ire,header:are,title:ore,resetBtn:lre,table:cre,row:dre,name:ure,selectCell:hre,sumCell:mre,footer:pre,footerLine:fre,note:gre};function rh(t,e,s){var l;if(!Array.isArray(t)||e<=0||s<=0)return 0;const r=Math.min(e,s),i=Math.max(e,s);let a=0;for(let d=r;d<=i;d++)a+=(l=t[d])!=null?l:0;return a}function xre(t){const e=[0];for(let s=1;s<=t;s++)e.push(s);return e}function Tt(t,e){const s=[0,...t.map(r=>Number(r)||0)];if(e&&s.length<e+1)for(;s.length<e+1;)s.push(0);return s}const yre=[{key:"light_13_dragons_hoard",name:"13 Dragon's Hoard",levels:Tt([14222021,15166093,16166597,17216101,18327374,19491852,20723258,22012436,23374540,26302843],10)},{key:"light_14_house_of_horrors",name:"14 House of Horrors",levels:Tt([26302843,27874231,29531221,31261572,33084028,34985806,36987473,39074626,41269055,45958126],10)},{key:"light_15_the_13th_floor",name:"15 The 13th floor",levels:Tt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"light_16_the_3rd_league_of_superheroes",name:"16 The 3rd League of Superheroes",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_17_time_honored_school_of_magic",name:"17 Time-honored School of Magic",levels:Tt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"light_18_hemorridor",name:"18 Hemorridor",levels:Tt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"light_19_easteros",name:"19 Easteros",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_20_dojo_of_childhood_heroes",name:"20 Dojo of Childhood Heroes",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_21_tavern_of_the_dark_doppelgangers",name:"21 Tavern of the Dark Doppelgangers",levels:Tt([0,0,0,9e8,0,0,0,0,0,0],10)},{key:"light_22_city_of_intrigues",name:"22 City of Intrigues",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_23_school_of_magic_express",name:"23 School of Magic Express",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_24_nordic_gods",name:"24 Nordic Gods",levels:Tt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"light_25_ash_mountain",name:"25 Ash Mountain",levels:Tt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"light_26_playa_hq",name:"26 Playa HQ",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"light_27_mount_olympus",name:"27 Mount Olympus",levels:Tt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"light_28_monster_grotto",name:"28 Monster Grotto",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_29_arcade_of_the_old_pixel_icons",name:"29 Arcade of the Old Pixel Icons",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_30_the_server_room",name:"30 The Server Room",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_31_workshop_of_the_hunters_of_the_undead",name:"31 Workshop of the Hunters of the Undead",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_32_retro_tv_legends",name:"32 Retro TV Legends",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"light_33_the_meeting_room",name:"33 The Meeting Room",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)}],vre=[{key:"shadow_13_dragons_hoard",name:"Dragon's Hoard",levels:Tt([105514978,110532270,115770753,121195386,126854805,132712488,138821184,145140861,151726857,165631756],10)},{key:"shadow_14_house_of_horrors",name:"House of Horrors",levels:Tt([165631756,175491135,186285917,197984244,210662291,224327317,239040847,254786681,271632931,301959487],10)},{key:"shadow_15_the_13th_floor",name:"The 13th floor",levels:Tt([178017293,191202824,205171015,220033230,235758967,252458197,270120546,288853442,3e8,3e8],10)},{key:"shadow_16_the_3rd_league_of_superheroes",name:"The 3rd League of Superheroes",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_17_time_honored_school_of_magic",name:"Time-honored School of Magic",levels:Tt([259975962,270214782,280912223,292102510,303767964,315951214,328604236,341835125,355585468,382691821],10)},{key:"shadow_18_hemorridor",name:"Hemorridor",levels:Tt([24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7,24e7],10)},{key:"shadow_19_easteros",name:"Easteros",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_20_dojo_of_childhood_heroes",name:"Dojo of Childhood Heroes",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_21_tavern_of_the_dark_doppelgangers",name:"Tavern of the Dark Doppelgangers",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_22_city_of_intrigues",name:"City of Intrigues",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_23_school_of_magic_express",name:"School of Magic Express",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_24_nordic_gods",name:"Nordic Gods",levels:Tt([120347346,126522017,132866756,139360845,146090132,153008769,160181035,167558757,175216768,188941263],10)},{key:"shadow_25_ash_mountain",name:"Ash Mountain",levels:Tt([135040235,141847664,148829086,155969807,163347783,170902540,178716219,186730862,195028890,210065935],10)},{key:"shadow_26_playa_hq",name:"Playa HQ",levels:Tt([3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],10)},{key:"shadow_27_mount_olympus",name:"Mount Olympus",levels:Tt([190287793,198430619,206862945,215567694,224629621,233954993,243664167,253651549,264056114,289991595],10)},{key:"shadow_28_monster_grotto",name:"Monster Grotto",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_29_arcade_of_the_old_pixel_icons",name:"Arcade of the Old Pixel Icons",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_30_the_server_room",name:"The Server Room",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_31_workshop_of_the_hunters_of_the_undead",name:"Workshop of the Hunters of the Undead",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_32_retro_tv_legends",name:"Retro TV Legends",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)},{key:"shadow_33_the_meeting_room",name:"The Meeting Room",levels:Tt([0,0,0,0,0,0,0,0,0,0],10)}],KN=[65368,78646,94079,111819,132262,155508,182146,212225,246371,284763,328069,346770,366397,386895,408294,430720,454114,478510,504046,530654,558370,587352,617518,648910,681690,715781,751224,788201,826619,866521,908108,951278,996080,1042727,1091110,1141283,1166970,1193476,1219983,1247568,1275153,1303614,1332282,1361870,1391459,1422202,1452944,1484667,1516609,1549531,1582452,1616659,1650866,1686118,1721610,1758197,1794784,1832737,1870690,1909807,1949185,1989727,2030270,2072325,2114381,2157674,2201243,2246109,2290975,2337454,2383932,2431784,2479935,2529460,2578984,2630284,2681584,2734341,2787423,2842028,2896632,2953122,3009611,3067713,3126157,3186213,3186213,3246270,3308402,3308402,3308402,3370535,3434372,3434372,3434372,3498580,3564571,3564571,3564571,3630562,3698747,3698747,3698747,3766932,3836998,3836998,3836998,3907462,3979807,3979807,3979807,4052152,4126905,4126905,4126905,4201658,4278400,4278400,4278400,4355562,4434796,4434796,4434796,4514030,4595812,4595812,4595812,4677594,4761563,4761563,4761563,4845982,4932588,4932588,4932588,5019195,5108581,5108581,5108581,5197968,5289659,5289659,5289659,5381834,5476411,5476411,5476411,5570988,5668502,5668502,5668502,5766016,5866054,5866054,5866054,5966603,6069677,6069677,6069677,6172751,6279031,6279031,6279031,6385312,6494253,6494253,6494253,6603742,6715997,6715997,6715997,6828252,6943878,6943878,6943878,7059504,7178039,7178039,7178039,7297158,7419187,7419187,7419187,7541215,7666913,7666913,7666913,7792612,7792612,7792612,7921366,7921366,7921366,8050735,8050735,8050735,8183283,8183283,8183283,8315830,8315830,8315830,8452244,8452244,8452244,8588658,8588658,8588658,8728404,8728404,8728404,8868807,8868807,8868807,9012543,9012543,9012543,9156279,9156279,9156279,9304206,9304206,9304206,9452132,9452132,9452132,9603558,9603558,9603558,9755685,9755685,9755685,9911445,9911445,9911445,9911445,10067205,10067205,10067205,10227366,10227366,10227366,10387528,10387528,10387528,10551497,10551497,10551497,10716202,10716202,10716202,10884714,10884714,10884714,11053227,11053227,11053227,11226513,11226513,11226513,11399799,11399799,11399799,11577075,11577075,11577075,11755135,11755135,11755135,11937336,11937336,11937336,12119538,12119538,12119538,12306741,12306741,12306741,12493945,12493945,12493945,12685480,12685480,12685480,12877848,12877848,12877848,13074548,13074548,13074548,13271248,13271248,13271248,13473359,13473359,13473359,13675470,13675470,13675470,13882118,13882118,13882118,14089639,14089639,14089639,14301863,14301863,14301863,14514086,14514086,14514086,14514086,14731980,14731980,14731980,14731980,14949874,14949874,14949874,14949874,15172685,15172685,15172685,15172685,15396424,15396424,15396424,15396424,15625080,15625080,15625080,15625080,15853736,15853736,15853736,15853736,16088503,16088503,16088503,16088503,16323270,16323270,16323270,16323270,16563175,16563175,16563175,16563175,16804066,16804066,16804066,16804066,17050281,17050281,17050281,17050281,17296497,17296497,17296497,17296497,17549113,17549113,17549113,17549113,17801729,17801729,17801729,17801729,18059901,18059901,18059901,18059901,18319104,18319104,18319104,18319104,18583863,15583863,18583863,18583863,18848623,18848623,18848623,18848623,19120282,19120282,19120282,19120282,19391941,19391941,19391941,19391941,19669408,19669408,19669408,19669408,19947967,19947967,19947967,19947967,20232534,20232534,20232534,20232534,20517101,20517101,20517101,20517101,20808868,20808868,20808868,20808868,21100634,21100634,21100634,21100634,21398670,21398670,21398670,21398670,21697862,21697862,21697862,21697862,22003323,22003323,22003323,22003323,22308783,22308783,22308783,22308783,22621991,22621991,22621991,22621991,22935198,22935198,22935198,22935198,23254942,23254942,23254942,23254942,23575896,23575896,23575896,23575896,23903614,23903614,23903614,23903614,24231331,24231331,24231331,24231331,24567146,24567146,24567146,24567146,24902960,24902960,24902960,24902960,25245819,25245819,25245819,25245819,25589958,25589958,25589958,25589958,25941140,25941140,25941140,25941140,26292323,26292323,26292323,26292323,26652189,26652189,26652189,26652189,27012054,27012054,27012054,27012054,27379265,27379265,27379265,27379265,27747829,27747829,27747829,27747829,28123981,28123981,28123981,28123981,28500134,28500134,28500134,28500134,28885344,28885344,28885344,28885344,29270554,29270554,29270554,29270554,29663666,29663666,29663666,29663666],bre=(()=>{const t=[0,...KN],e=1e3-KN.length;for(let s=0;s<e;s++)t.push(3e7);return t})(),_re=Tt([18327374,28420280,42784003,62790319,128800146,208088681,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8,3e8],30),wre=(()=>{const t=new Array(1001).fill(3e7);return t[0]=0,t})(),Ta={light:yre.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),shadow:vre.map(t=>({key:t.key,name:t.name,minLevel:1,maxLevel:10,levels:t.levels})),special:[{key:"special_twister",name:"Twister",minLevel:1,maxLevel:1e3,levels:bre,specialType:"twister"},{key:"special_cloi",name:"Continuous Loop of Idols",minLevel:1,maxLevel:30,levels:_re,specialType:"cloi"},{key:"special_sandstorm",name:"Sandstorm",minLevel:1,maxLevel:1e3,levels:wre,specialType:"sandstorm"}]},Xf=t=>t.toLocaleString("en-US");function QN(){const t={},e={},s={};return Ta.light.forEach(r=>t[r.key]={from:0,to:0}),Ta.shadow.forEach(r=>e[r.key]={from:0,to:0}),Ta.special.forEach(r=>{r.specialType==="twister"?s[r.key]={from:486,to:1e3}:r.specialType==="cloi"?s[r.key]={from:2,to:11}:s[r.key]={from:0,to:0}}),{light:t,shadow:e,special:s}}function cA({row:t,range:e,onChange:s}){var d,u;const r=E.useMemo(()=>xre(t.maxLevel),[t.maxLevel]),i=(d=e.from)!=null?d:0,a=(u=e.to)!=null?u:0,l=E.useMemo(()=>i===0||a===0?0:rh(t.levels,i,a),[t.levels,i,a]);return n.jsxs("tr",{className:zs.row,children:[n.jsx("td",{className:zs.name,children:t.name}),n.jsx("td",{className:zs.selectCell,children:n.jsx("select",{value:i,onChange:h=>s({from:Number(h.target.value),to:a}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsx("td",{className:zs.selectCell,children:n.jsx("select",{value:a,onChange:h=>s({from:i,to:Number(h.target.value)}),children:r.map(h=>n.jsx("option",{value:h,children:h===0?"":h},h))})}),n.jsxs("td",{className:zs.sumCell,children:[Xf(l)," XP"]})]})}function XN({title:t,rows:e,ranges:s,setRanges:r}){const i=E.useMemo(()=>e.reduce((a,l)=>{const d=s[l.key]||{from:0,to:0};return a+rh(l.levels,d.from,d.to)},0),[e,s]);return n.jsxs("div",{className:zs.panel,children:[n.jsx("div",{className:zs.header,children:n.jsx("div",{className:zs.title,children:t})}),n.jsxs("table",{className:zs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum XP"})]})}),n.jsx("tbody",{children:e.map(a=>{var l;return n.jsx(cA,{row:a,range:(l=s[a.key])!=null?l:{from:0,to:0},onChange:d=>r(a.key,d)},a.key)})})]}),n.jsx("div",{className:zs.footer,children:n.jsxs("div",{className:zs.footerLine,children:[n.jsxs("span",{children:["Sum Total ",t]}),n.jsxs("span",{children:[Xf(i)," XP"]})]})})]})}function dA({initialState:t,onStateChange:e}){var M,T,y;const s=E.useMemo(()=>QN(),[]),[r,i]=E.useState((M=t==null?void 0:t.light)!=null?M:s.light),[a,l]=E.useState((T=t==null?void 0:t.shadow)!=null?T:s.shadow),[d,u]=E.useState((y=t==null?void 0:t.special)!=null?y:s.special),h=(w,D,k)=>{e&&e({light:w,shadow:D,special:k})},m=(w,D)=>{i(k=>{const _={...k,[w]:D};return h(_,a,d),_})},g=(w,D)=>{l(k=>{const _={...k,[w]:D};return h(r,_,d),_})},v=(w,D)=>{u(k=>{const _={...k,[w]:D};return h(r,a,_),_})};E.useEffect(()=>{var w,D,k;if(t){i((w=t.light)!=null?w:s.light),l((D=t.shadow)!=null?D:s.shadow),u((k=t.special)!=null?k:s.special);return}i(s.light),l(s.shadow),u(s.special)},[t,s]);const b=E.useMemo(()=>Ta.light.reduce((w,D)=>{const k=r[D.key];return w+(k?rh(D.levels,k.from,k.to):0)},0),[r]),N=E.useMemo(()=>Ta.shadow.reduce((w,D)=>{const k=a[D.key];return w+(k?rh(D.levels,k.from,k.to):0)},0),[a]),S=E.useMemo(()=>Ta.special.reduce((w,D)=>{const k=d[D.key];return w+(k?rh(D.levels,k.from,k.to):0)},0),[d]),C=b+N+S,R=()=>{const w=QN();i(w.light),l(w.shadow),u(w.special),h(w.light,w.shadow,w.special)};return n.jsxs("div",{className:zs.wrapper,children:[n.jsx(XN,{title:"Light World",rows:Ta.light,ranges:r,setRanges:m}),n.jsx(XN,{title:"Shadow World",rows:Ta.shadow,ranges:a,setRanges:g}),n.jsxs("div",{className:zs.panel,children:[n.jsxs("div",{className:zs.header,children:[n.jsx("div",{className:zs.title,children:"Special Dungeons"}),n.jsx("button",{className:zs.resetBtn,onClick:R,children:"RESET"})]}),n.jsxs("table",{className:zs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Dungeon"}),n.jsx("th",{children:"From"}),n.jsx("th",{children:"To"}),n.jsx("th",{children:"Sum"})]})}),n.jsx("tbody",{children:Ta.special.map(w=>{var D;return n.jsx(cA,{row:w,range:(D=d[w.key])!=null?D:{from:0,to:0},onChange:k=>v(w.key,k)},w.key)})})]}),n.jsxs("div",{className:zs.footer,children:[n.jsxs("div",{className:zs.footerLine,children:[n.jsx("span",{children:"Sum Total Special"}),n.jsxs("span",{children:[Xf(S)," XP"]})]}),n.jsxs("div",{className:zs.footerLine,children:[n.jsx("span",{children:"Total XP"}),n.jsxs("span",{children:[Xf(C)," XP"]})]}),n.jsxs("div",{className:zs.note,children:["Flle die XP-Arrays in ",n.jsx("code",{children:"src/lib/calculators/dungeonPauseOpenXP/data.ts"}),", dann rechnet es 1:1 wie im Sheet."]})]})]})]})}function jre(){return n.jsx("div",{style:{padding:12},children:n.jsx(dA,{})})}const Sre=()=>n.jsx(Ts,{title:"Progression  Early Game"}),Nre="_wrap_n2poq_31",kre="_title_n2poq_33",Cre="_infoBox_n2poq_39",Tre="_infoTitle_n2poq_63",Ere="_infoList_n2poq_73",Are="_section_n2poq_89",Ire="_h2_n2poq_101",Pre="_h3_n2poq_103",Rre="_intro_n2poq_105",Lre="_ul_n2poq_107",Dre="_img_n2poq_113",us={wrap:Nre,title:kre,infoBox:Cre,infoTitle:Tre,infoList:Ere,section:Are,h2:Ire,h3:Pre,intro:Rre,ul:Lre,img:Dre},Mre=()=>{Yl();const t=[Vl("first-weekend-guide-day1",900),Vl("first-weekend-guide-day2",900),Vl("first-weekend-guide-day3",900)];return n.jsxs("div",{className:us.wrap,children:[n.jsx("h1",{className:us.title,children:"First Weekend Guide"}),n.jsxs("aside",{className:us.infoBox,role:"note","aria-label":"Important Level Tips",children:[n.jsx("div",{className:us.infoTitle,children:"Important Level Tips"}),n.jsxs("ul",{className:us.infoList,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Level 15"}),"  Medium Potions and Talisman are unlocked, buy them before pushing further."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  Dont upgrade Gem Mine past Level 1! Ignore all defensive buildings until fully maxing every other building."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 25"}),"  If you have ambitions to push further on day 1, wait to search for Gems until late into the evening for better Guild HoK and easy Gold gain due to Wheel Spins."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 3235"}),"  Big Potions get unlocked; at Level 32 the chance is very slim but be on the lookout to equip them as soon as possible."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 75"}),"  Wait with the Pet habitat fights! Use them when you are fully stuck on a Dungeon enemy to skip a few Levels and get better equipment from the Shops."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 105"}),"  If you are fully stuck on the Killing Machine in the Frost Blood Temple, you can upgrade your Gem Mine to Level 5 and equip yourself with stronger Gems."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Level 140"}),"  If you are a bad PvE Class, be sure to check in SF Tools if its beneficial to run a Dexterity Potion instead of your Main stat Potion for Shadow World fights."]})]})]}),n.jsx("p",{className:us.intro,children:"Follow these steps to get started with the game and make the most of your first weekend."}),n.jsxs("div",{className:us.section,children:[n.jsx("h2",{className:us.h2,children:"Preparation before launch"}),n.jsxs("ul",{className:us.ul,children:[n.jsx("li",{children:"Pre-register your account early to start collecting Twitch drops."}),n.jsx("li",{children:"Collect drops a few weeks before the server opens, but only grab the ones that expire soon (7 days after the Droppy Cycle ends). Save rewards like stone/wood packages until your fortress is built up."}),n.jsx("li",{children:"Pre-purchase the Starter Pack to avoid transaction issues at server launch."}),n.jsx("li",{children:"On day 1 and 2, your main limitation is the 300 thirst, so use it wisely."}),n.jsx("li",{children:"Heavy shroomer level goals: level 69 (day 1), level 90125 (day 2; class dependent), level 200210 (day 3; esp. if Underworld is unlocked)."})]})]}),n.jsxs("div",{className:us.section,children:[n.jsx("h2",{className:us.h2,children:"Day 1"}),n.jsx("h3",{className:us.h3,children:"Level 13"}),n.jsxs("ul",{className:us.ul,children:[n.jsx("li",{children:"Join any guild, sell your Starter Pack potion for 100 gold, upgrade guild skills to 6 Instructor and 4 Treasure."}),n.jsx("li",{children:"Unlock Training Dungeon and fight first enemies to reach level 3 (bugged reset to enemy 1 can push to level 4)."})]}),t[0]&&n.jsx("img",{className:us.img,src:t[0],alt:"Day 1 overview"})]}),n.jsxs("div",{className:us.section,children:[n.jsx("h3",{className:us.h3,children:"Level 410"}),n.jsxs("ul",{className:us.ul,children:[n.jsx("li",{children:"When the guild is full and skills are 6/4, start short expeditions (stick to short ones on day 1)."}),n.jsx("li",{children:"Continue expeditions until level 10 (unlocks Scrapbook)."}),n.jsx("li",{children:"Log in on phone for Second Screen (+5 to all stats)."}),n.jsx("li",{children:"Buy gear in Weapon & Magic shops; small potions as needed; ignore talisman slot until level 15+."}),n.jsx("li",{children:"Start HoF farming for stickers and a bit of gold to fill Scrapbook to 2025% (30%+ for shroomers)."})]})]}),n.jsxs("div",{className:us.section,children:[n.jsx("h2",{className:us.h2,children:"Day 2"}),n.jsx("h3",{className:us.h3,children:"Level 1015"}),n.jsxs("ul",{className:us.ul,children:[n.jsx("li",{children:"Farm max-gold players within 100 ranks (esp. shroomers) for easy gold & stats."}),n.jsx("li",{children:"Clear Tutorial Dungeon and Light World Dungeon 1 for gold and level-ups."}),n.jsx("li",{children:"Should bring you to level 1113; better gold per enemy while filling Scrapbook%."}),n.jsx("li",{children:"Get Rip-off Rip-off: win 3 in a row at shell game (`/gold bet 1`)."})]}),t[1]&&n.jsx("img",{className:us.img,src:t[1],alt:"Day 2 overview"})]}),n.jsxs("div",{className:us.section,children:[n.jsx("h2",{className:us.h2,children:"Day 3"}),n.jsx("h3",{className:us.h3,children:"Level 1520"}),n.jsxs("ul",{className:us.ul,children:[n.jsx("li",{children:"If stuck on dungeon enemies and Scrapbook  25%, use first-tier expeditions until level 15."}),n.jsx("li",{children:"At level 15, talismans and medium potions unlock in Magic Shop."})]}),t[2]&&n.jsx("img",{className:us.img,src:t[2],alt:"Day 3 overview"})]})]})},Fre=()=>n.jsx(Ts,{title:"Max Item Stats Calculator"}),Bre=()=>n.jsx(Ts,{title:"Fortress Package skip order (Early)"}),$re=()=>n.jsx(Ts,{title:"Underworld Pro Package skip order (Early)"}),Ore=()=>n.jsx(Ts,{title:"Gem Calculator (Early)"}),Vre=()=>n.jsx(Ts,{title:"Fortress attack duplication guide (Early)"}),Ure=()=>n.jsx(Ts,{title:"Progression  Mid Game"}),zre="_wrap_1x7jo_31",Hre="_header_1x7jo_35",Gre="_titles_1x7jo_55",Wre="_h1_1x7jo_57",qre="_lead_1x7jo_59",Kre="_ctaRow_1x7jo_63",Qre="_cta_1x7jo_63",Xre="_section_1x7jo_85",Yre="_sectionGrid_1x7jo_87",Jre="_card_1x7jo_99",Zre="_h2_1x7jo_103",eie="_h3_1x7jo_105",tie="_p_1x7jo_107",sie="_ul_1x7jo_111",nie="_ol_1x7jo_111",rie="_figure_1x7jo_117",iie="_figureNarrow_1x7jo_139",aie="_img_1x7jo_149",oie="_fallbackImg_1x7jo_151",lie="_figCaption_1x7jo_159",cie="_tableWrap_1x7jo_163",die="_table_1x7jo_163",uie="_footer_1x7jo_217",hie="_tools_1x7jo_219",mie="_toolBtn_1x7jo_221",Ut={wrap:zre,header:Hre,titles:Gre,h1:Wre,lead:qre,ctaRow:Kre,cta:Qre,section:Xre,sectionGrid:Yre,card:Jre,h2:Zre,h3:eie,p:tie,ul:sie,ol:nie,figure:rie,figureNarrow:iie,img:aie,fallbackImg:oie,figCaption:lie,tableWrap:cie,table:die,footer:uie,tools:hie,toolBtn:mie},pie=1400;function fie(){const t=E.useMemo(()=>Vl("goldxpcurve",pie),[]);return n.jsxs("div",{className:Ut.wrap,children:[n.jsxs("header",{className:Ut.header,children:[n.jsxs("div",{className:Ut.titles,children:[n.jsx("h1",{className:Ut.h1,children:"Dungeon Pause"}),n.jsx("p",{className:Ut.lead,children:"berblick, Start-/Endpunkte, Vorgehen und typische Fehler. Nutze die beiden Tools unten fr Berechnungen und den Exit-Pfad."})]}),n.jsxs("div",{className:Ut.ctaRow,children:[n.jsx(rs,{className:Ut.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator","aria-label":"Open XP Calculator ffnen",children:"Open XP Calculator"}),n.jsx(rs,{className:Ut.cta,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit","aria-label":"Dungeon Pause Exit anzeigen",children:"Exit / Beenden"})]})]}),n.jsxs("section",{className:Ut.section,children:[n.jsx("h2",{className:Ut.h2,children:"Worum gehts?"}),n.jsxs("p",{className:Ut.p,children:["Die Dungeon Pause umgeht das schwache Level-Fenster um ",n.jsx("strong",{children:"~470500"}),", in dem weder XP noch Gold besonders attraktiv sind. Als grobe Faustregel beginnt die Pause etwa bei ",n.jsx("strong",{children:"Level 370"})," und endet um ",n.jsx("strong",{children:"Level 475"}),". Die konkreten Werte hngen aber stark davon ab, wie viele Dungeons du bereits abgeschlossen hast (Shroomer beginnen i. d. R. frher)."]})]}),n.jsxs("section",{className:Ut.section,children:[n.jsx("h3",{className:Ut.h3,children:"XP & Gold  Verlauf"}),n.jsxs("div",{className:`${Ut.figure} ${Ut.figureNarrow}`,children:[t?n.jsx("img",{src:t,alt:"XP/Gold Verlaufskurve",className:Ut.img}):n.jsx("div",{className:Ut.fallbackImg,"aria-label":"Kein Bild hinterlegt",children:""}),n.jsx("div",{className:Ut.figCaption,children:"Veranschaulicht das Dip-Fenster, das mit der Dungeon Pause bersprungen wird."})]})]}),n.jsxs("section",{className:Ut.sectionGrid,children:[n.jsxs("div",{className:Ut.card,children:[n.jsx("h3",{className:Ut.h3,children:"Start & Ende"}),n.jsxs("ul",{className:Ut.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Start:"})," grob um Level 370 (abhngig von bereits geclearten Dungeons)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ende:"})," um Level 475; Zielbereich nach der Pause ca."," ",n.jsx("strong",{children:"505510"})," (danach Tagesdurst auf Gold drehen)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP vorausplanen:"})," Vor Einstieg idealerweise"," ",n.jsx("strong",{children:"30+"})," Level an Open XP verfgbar (typisch 3339)."]})]})]}),n.jsxs("div",{className:Ut.card,children:[n.jsx("h3",{className:Ut.h3,children:"Twister & Light/Shadow"}),n.jsxs("ul",{className:Ut.ul,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Twister:"})," bei ca. ",n.jsx("strong",{children:"486"})," aufhren (erster Blocker), etwas spter fr ein Level-Up ist okay."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Shadow/Light:"})," Shadow World kurz vor der Pause stoppen; Light World & Loop of Idols ggf. lnger fr Scrapbook-Bilder."]}),n.jsxs("li",{children:["Whrend der Pause weiterhin ",n.jsx("strong",{children:"13. Stock (Shadow)"})," und"," ",n.jsx("strong",{children:"City of Intrigue (Light)"})," fr ",n.jsx("em",{children:"Devilsatt"})," &"," ",n.jsx("em",{children:"Tritosting"})," clearen."]})]})]})]}),n.jsxs("section",{className:Ut.section,children:[n.jsx("h3",{className:Ut.h3,children:"Vorgehen"}),n.jsxs("ol",{className:Ut.ol,children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Open XP prfen:"})," Nutze den ",n.jsx("em",{children:"Open XP Calculator"})," (Button oben)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ressourcen planen:"})," Gold tendenziell in ",n.jsx("em",{children:"Base Stats"})," statt in hufige Ausrstungswechsel investieren."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Scrapbook befllen:"})," Vor Eintritt ggf. noch fehlende Bilder in Light World / Loop of Idols mitnehmen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Whrend der Pause:"})," Equipment mglichst stabil halten (Gildenabsprache), um Gold in Stats lenken zu knnen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Legendaries parken:"})," Gegen Ende der Pause einige starke Legendary-Gems bereitlegen, um beim Exit nicht alle skippen zu mssen."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Zeitpunkt:"})," Idealerweise whrend eines"," ",n.jsx("strong",{children:"Legendary Dungeon"})," (parallel Witch-Event)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Exit-Reihenfolge:"})," Twister  Light World  Loop of Idols  Shadow World; dann Erst-Reequip (auch Companions)."]})]})]}),n.jsxs("section",{className:Ut.section,children:[n.jsx("h3",{className:Ut.h3,children:"Kompaktbersicht"}),n.jsx("div",{className:Ut.tableWrap,children:n.jsxs("table",{className:Ut.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Aspekt"}),n.jsx("th",{children:"Empfehlung"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{children:"Start (Faustregel)"}),n.jsx("td",{children:"~370 (abhngig von geclearten Dungeons / Spielstil)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Ende (Faustregel)"}),n.jsx("td",{children:"~475; Ziel: 505510 und danach Tagesdurst auf Gold"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Open XP vor Eintritt"}),n.jsx("td",{children:"30+ (typisch 3339 Level verfgbar)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Twister"}),n.jsx("td",{children:"Stop bei ~486 (erster Blocker)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Light/Shadow"}),n.jsx("td",{children:"Shadow frher stoppen; Light & LoI lnger fr Scrapbook"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Whrend der Pause"}),n.jsx("td",{children:"Gold in Base Stats, wenig/kein Equip-Wechsel"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Pets"}),n.jsx("td",{children:"13F Shadow & City of Intrigue (Devilsatt, Tritosting)"})]}),n.jsxs("tr",{children:[n.jsx("td",{children:"Optimaler Exit"}),n.jsx("td",{children:"Legendary Dungeon (gleichzeitig Witch-Event)"})]})]})]})})]}),n.jsx("footer",{className:Ut.footer,children:n.jsxs("div",{className:Ut.tools,children:[n.jsx(rs,{className:Ut.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-open-xp-calculator",children:"Open XP Calculator"}),n.jsx(rs,{className:Ut.toolBtn,to:"/guidehub?tab=progression&sub=mid&sub2=dungeon-pause-exit",children:"Exit / Beenden"})]})})]})}const gie=()=>n.jsx(Ts,{title:"Dungeon Pause open XP Calculator"}),xie="_wrap_1uhww_3",yie="_headerBar_1uhww_15",vie="_title_1uhww_33",bie="_meta_1uhww_45",_ie="_description_1uhww_55",wie="_section_1uhww_69",jie="_sectionTitle_1uhww_77",Sie="_steps_1uhww_87",Hi={wrap:xie,headerBar:yie,title:vie,meta:bie,description:_ie,section:wie,sectionTitle:jie,steps:Sie};function Nie(){return n.jsxs("div",{className:Hi.wrap,children:[n.jsxs("div",{className:Hi.headerBar,children:[n.jsx("h2",{className:Hi.title,children:"Dungeon Pause Exit"}),n.jsx("span",{className:Hi.meta,children:"Last updated: 28.03.2025"})]}),n.jsx("p",{className:Hi.description,children:"Prepare for the Dungeon Pause Exit by saving some Legendary Gems before your intended exit date. This will help you avoid the effort and cost of skipping gems on the day of the exit."}),n.jsxs("section",{className:Hi.section,children:[n.jsx("h3",{className:Hi.sectionTitle,children:"Sequence for the Exit"}),n.jsxs("ol",{className:Hi.steps,children:[n.jsx("li",{children:"Clear the Twister in its entirety and throw all the items you get into the Witches Cauldron."}),n.jsx("li",{children:"Clear the entirety of the Light World, throwing the Epics you gain into the Witches Cauldron. You can save some Epics in case you're unlucky in the Shadow World."}),n.jsx("li",{children:"Clear the Shadow World until you get stuck on enemies. Use SFTools to check your chances and equip your Companions with newly acquired Shadow World Epics. Don't insert Gems yet!"}),n.jsx("li",{children:"Start clearing the Loop of Idols. Youll eventually get stuck, so dont try to clear it fully just yet."}),n.jsx("li",{children:"Once stuck, insert Legendary Gems into your Companions' equipment to proceed further in the Shadow World and the Loop of Idols."}),n.jsx("li",{children:"When you're stuck again, enter the Legendary Dungeon for a re-equip and perhaps equip some of your Companions with Legendarys."}),n.jsx("li",{children:"Clear what you can and are comfortable with spending, and you've successfully finished your Dungeon Pause Exit!"})]})]}),n.jsxs("section",{className:Hi.section,children:[n.jsx("h3",{className:Hi.sectionTitle,children:"Extra Tip"}),n.jsx("p",{children:"Equip all three main stat XL-Potions (Str, Int, Dex) to boost your chances against the Loop of Idols. This will allow you to fully clear it and achieve a 100% Scrapbook. Be careful, as this will cancel your active Constitution Potion and Potion of External Life!"})]})]})}const kie=()=>n.jsx(Ts,{title:"Gem Calculator (Mid)"}),Cie=()=>n.jsx(Ts,{title:"Calendar Skip"}),Tie=()=>n.jsx(Ts,{title:"Progression  Late Game"}),Eie="_layout_13sgm_29",Aie="_side_13sgm_49",Iie="_sideHead_13sgm_61",Pie="_search_13sgm_71",Rie="_spotBtn_13sgm_89",Lie="_sideList_13sgm_109",Die="_sideItem_13sgm_111",Mie="_active_13sgm_119",Fie="_sideTitle_13sgm_121",Bie="_ico_13sgm_123",$ie="_badge_13sgm_125",Oie="_detail_13sgm_139",Vie="_detailInner_13sgm_141",Uie="_detailHead_13sgm_143",zie="_detailTitle_13sgm_145",Hie="_empty_13sgm_147",Gie="_grid_13sgm_151",Wie="_card_13sgm_157",qie="_cardHead_13sgm_175",Kie="_btnGrid_13sgm_177",Qie="_itemBtn_13sgm_179",Xie="_spotWrap_13sgm_203",Yie="_spot_13sgm_89",Jie="_spotHead_13sgm_227",Zie="_spotSearch_13sgm_235",eae="_spotClose_13sgm_243",tae="_spotList_13sgm_253",sae="_spotItem_13sgm_255",nae="_spotItemEmpty_13sgm_259",rae="_spotCat_13sgm_261",iae="_spotLabel_13sgm_263",aae="_mark_13sgm_267",Dt={layout:Eie,side:Aie,sideHead:Iie,search:Pie,spotBtn:Rie,sideList:Lie,sideItem:Die,active:Mie,sideTitle:Fie,ico:Bie,badge:$ie,detail:Oie,detailInner:Vie,detailHead:Uie,detailTitle:zie,empty:Hie,grid:Gie,card:Wie,cardHead:qie,btnGrid:Kie,itemBtn:Qie,spotWrap:Xie,spot:Yie,spotHead:Jie,spotSearch:Zie,spotClose:eae,spotList:tae,spotItem:sae,spotItemEmpty:nae,spotCat:rae,spotLabel:iae,mark:aae};function oae(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pu(t,e){if(!e)return t;const s=new RegExp(`(${oae(e)})`,"ig");return t.replace(s,`<mark class="${Dt.mark}">$1</mark>`)}function YN(t){if(!t||!t.length)return 0;let e=0;for(const s of t)if(s.sub2&&s.sub2.length)if(s.sub2.some(i=>i.sub2&&i.sub2.length))for(const i of s.sub2)i.sub2&&i.sub2.length?e+=i.sub2.length:e+=1;else e+=s.sub2.length;else e+=1;return e}function lae(t){const e=[];for(const s of t){const r=s.label;if(!(!s.sub||!s.sub.length))for(const i of s.sub)if(i.sub2&&i.sub2.length)if(i.sub2.some(l=>l.sub2&&l.sub2.length))for(const l of i.sub2)if(l.sub2&&l.sub2.length)for(const d of l.sub2)e.push({full:`${r}  ${i.label}  ${l.label}  ${d.label}`,catKey:s.key,subKey:i.key,sub2Key:d.key});else e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else for(const l of i.sub2)e.push({full:`${r}  ${i.label}  ${l.label}`,catKey:s.key,subKey:i.key,sub2Key:l.key});else e.push({full:`${r}  ${i.label}`,catKey:s.key,subKey:i.key})}return e}function cae(t,e){var s;return e&&t.some(r=>r.key===e)?e:((s=t==null?void 0:t[0])==null?void 0:s.key)||""}const dae=({categories:t,onNavigate:e,autoFocusSearch:s})=>{const[r,i]=E.useState(()=>{var M;return((M=t==null?void 0:t[0])==null?void 0:M.key)||""}),[a,l]=E.useState(""),[d,u]=E.useState(!1),h=E.useRef(null),m=E.useMemo(()=>{const M=a.trim().toLowerCase();if(!M)return t;const T=y=>y.toLowerCase().includes(M);return t.map(y=>{const w=T(y.label),D=[];for(const k of y.sub||[]){const _=T(k.label);if(k.sub2&&k.sub2.length)if(k.sub2.some(F=>F.sub2&&F.sub2.length)){const F=[];for(const P of k.sub2)if(P.sub2&&P.sub2.length){const B=P.sub2.filter($=>T($.label));B.length&&F.push({...P,sub2:B})}else T(P.label)&&F.push(P);(_||F.length)&&D.push({...k,sub2:F})}else{const F=k.sub2.filter(P=>T(P.label));(_||F.length)&&D.push({...k,sub2:F})}else _&&D.push(k)}return w||D.length?{...y,sub:D.length?D:y.sub}:null}).filter(Boolean)},[t,a]),g=E.useMemo(()=>{const M=m.length?m:t,T=cae(M,r);return M.find(y=>y.key===T)||M[0]||null},[m,t,r]),v=E.useMemo(()=>lae(t),[t]),[b,N]=E.useState(""),S=E.useMemo(()=>{const M=b.trim().toLowerCase();return M?v.filter(T=>T.full.toLowerCase().includes(M)):v},[v,b]);E.useEffect(()=>{const M=T=>{const y=T.key.toLowerCase()==="k";(T.metaKey||T.ctrlKey)&&y&&(T.preventDefault(),u(!0),setTimeout(()=>{var w;return(w=h.current)==null?void 0:w.focus()},0)),T.key==="Escape"&&u(!1)};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[]);const C=E.useRef(null);E.useEffect(()=>{var M;s&&((M=C.current)==null||M.focus())},[s]);const R=()=>{var D;const M=a.trim().toLowerCase(),T=(M?v.find(k=>k.full.toLowerCase().includes(M)):v[0])||null;if(T){e({tab:T.catKey,sub:T.subKey,sub2:T.sub2Key});return}const y=g,w=(D=y==null?void 0:y.sub)==null?void 0:D[0];if(!(!y||!w))if(w.sub2&&w.sub2.length)if(w.sub2.some(_=>_.sub2&&_.sub2.length)){const _=w.sub2[0];_.sub2&&_.sub2.length?e({tab:y.key,sub:w.key,sub2:_.sub2[0].key}):e({tab:y.key,sub:w.key,sub2:_.key})}else e({tab:y.key,sub:w.key,sub2:w.sub2[0].key});else e({tab:y.key,sub:w.key})};return n.jsxs("div",{className:Dt.layout,children:[n.jsxs("div",{className:Dt.side,children:[n.jsxs("div",{className:Dt.sideHead,children:[n.jsx("input",{ref:C,className:Dt.search,type:"search",placeholder:"Suche",value:a,onChange:M=>l(M.target.value),onKeyDown:M=>{M.key==="Enter"&&R()}}),n.jsx("button",{className:Dt.spotBtn,type:"button",onClick:()=>{u(!0),setTimeout(()=>{var M;return(M=h.current)==null?void 0:M.focus()},0)},title:"Spotlight (Ctrl/Cmd+K)",children:"Spotlight"})]}),n.jsx("div",{className:Dt.sideList,children:(m.length?m:t).map(M=>n.jsxs("div",{className:`${Dt.sideItem} ${(g==null?void 0:g.key)===M.key?Dt.active:""}`,onClick:()=>i(M.key),children:[n.jsxs("span",{className:Dt.sideTitle,children:[M.icon?n.jsx("span",{className:Dt.ico,"aria-hidden":!0,children:M.icon}):null,M.label]}),n.jsx("span",{className:Dt.badge,children:YN(M.sub)})]},M.key))})]}),n.jsx("div",{className:Dt.detail,children:g?n.jsxs("div",{className:Dt.detailInner,children:[n.jsxs("div",{className:Dt.detailHead,children:[n.jsxs("h3",{className:Dt.detailTitle,children:[g.icon?n.jsx("span",{className:Dt.ico,"aria-hidden":!0,children:g.icon}):null,g.label]}),n.jsxs("div",{className:Dt.badge,children:[YN(g.sub)," Eintrge"]})]}),n.jsx("div",{className:Dt.grid,children:(g.sub||[]).map(M=>{const T=M.sub2&&M.sub2.length>0,y=T&&M.sub2.some(w=>w.sub2&&w.sub2.length);return n.jsxs("div",{className:Dt.card,children:[n.jsx("div",{className:Dt.cardHead,dangerouslySetInnerHTML:{__html:Pu(M.label,a)}}),T?n.jsx("div",{className:Dt.btnGrid,children:y?M.sub2.flatMap(w=>w.sub2&&w.sub2.length?w.sub2.map(D=>n.jsx("button",{className:Dt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:D.key}),dangerouslySetInnerHTML:{__html:Pu(`${w.label}  ${D.label}`,a)}},`${w.key}__${D.key}`)):[n.jsx("button",{className:Dt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:Pu(w.label,a)}},w.key)]):M.sub2.map(w=>n.jsx("button",{className:Dt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key,sub2:w.key}),dangerouslySetInnerHTML:{__html:Pu(w.label,a)}},w.key))}):n.jsx("div",{className:Dt.btnGrid,children:n.jsx("button",{className:Dt.itemBtn,onClick:()=>e({tab:g.key,sub:M.key}),dangerouslySetInnerHTML:{__html:Pu(M.label,a)}})})]},M.key)})}),a&&g.sub&&g.sub.length>0&&g.sub.every(M=>!M.sub2||!M.sub2.length?!M.label.toLowerCase().includes(a.trim().toLowerCase()):M.sub2.some(y=>y.sub2&&y.sub2.length)?M.sub2.every(y=>y.sub2&&y.sub2.length?y.sub2.every(w=>!w.label.toLowerCase().includes(a.trim().toLowerCase())):!y.label.toLowerCase().includes(a.trim().toLowerCase())):M.sub2.every(y=>!y.label.toLowerCase().includes(a.trim().toLowerCase())))?n.jsxs("div",{className:Dt.empty,children:["Keine Treffer in ",g.label,"."]}):null]}):n.jsx("div",{className:Dt.empty,children:"Keine Kategorie gefunden."})}),d&&n.jsx("div",{className:Dt.spotWrap,onClick:()=>u(!1),children:n.jsxs("div",{className:Dt.spot,onClick:M=>M.stopPropagation(),children:[n.jsxs("div",{className:Dt.spotHead,children:[n.jsx("input",{ref:h,className:Dt.spotSearch,type:"search",placeholder:"Schnellsuche (Themen & Unterpunkte)",value:b,onChange:M=>N(M.target.value)}),n.jsx("button",{className:Dt.spotClose,onClick:()=>u(!1),children:"Esc"})]}),n.jsx("div",{className:Dt.spotList,children:S.length===0?n.jsx("div",{className:Dt.spotItemEmpty,children:"Keine Treffer"}):S.map((M,T)=>n.jsxs("div",{className:Dt.spotItem,onClick:()=>{u(!1),e({tab:M.catKey,sub:M.subKey,sub2:M.sub2Key})},children:[n.jsx("div",{className:Dt.spotCat,children:M.catKey}),n.jsx("div",{className:Dt.spotLabel,children:M.full})]},T))})]})})]})},uae={gamefeatures:rte,progression:ite,hellevator:ate,"legendary-dungeon":ote,events:lte,calculators:_te,infographics:wte,"class-book":jte,dungeons:Ste},JN={gamefeatures:{fortress:Nte,underworld:Ote,arenaam:zte},hellevator:{"hellevator-guide":Ose},"legendary-dungeon":{"legendary-dungeon-guide-epics-legendaries":Vse},events:{"event-list":Use,"event-cycle":zse},calculators:{"fortress-calculator":lne,"underworld-calculator":Tne,"max-item-stats-calculator":Ene,"gem-calculator":nre,"dungeon-pause-open-xp-calculator":jre},progression:{early:Sre,mid:Ure,late:Tie}},yv={gamefeatures:{arenaam:{"am-rune-bonuses":Ese,"am-build-order":$se},underworld:{"underworld-calculator":Vte,"underworld-pro-package-skip-order":Ute},fortress:{"fortress-calculator":kte,"fortress-package-skip-order":Bte,"fortress-attack-duplication":$te}},progression:{early:{"first-weekend-guide":Mre,"max-item-stats-calculator":Fre,"fortress-package-skip-order":Bre,"underworld-pro-package-skip-order":$re,"gem-calculator":Ore,"fortress-attack-duplication":Vre},mid:{"dungeon-pause":fie,"dungeon-pause-open-xp-calculator":gie,"dungeon-pause-exit":Nie,"gem-calculator":kie,"calendar-skip":Cie}}};function hae(){const[t,e]=Yl(),s=t.get("tab")||"",r=t.get("sub")||"",i=t.get("sub2")||"";let a=null;s?s&&!r?a=uae[s]||null:s&&r&&!i?a=JN[s]&&JN[s][r]||null:s&&r&&i&&(a=yv[s]&&yv[s][r]&&yv[s][r][i]||null):a=null;const l=d=>{const u=new URLSearchParams(t);u.set("tab",d.tab),d.sub?u.set("sub",d.sub):u.delete("sub"),d.sub2?u.set("sub2",d.sub2):u.delete("sub2"),e(u,{replace:!1})};return n.jsxs(Pt,{children:[n.jsx("div",{className:zc.topWrap,children:n.jsx(Xee,{logoSrc:nte,categories:zN,titleI18nKey:"guides.index.title"})}),n.jsx("div",{className:zc.divider}),n.jsx("div",{className:zc.contentArea,children:a?n.jsx(a,{}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:zc.placeholder,children:[n.jsx("h2",{className:zc.placeholderTitle,children:"Guides"}),n.jsx("p",{className:zc.placeholderText,children:"Whle links eine Kategorie oder nutze Suche/Spotlight (Ctrl/Cmd+K), um Inhalte zu ffnen."})]}),n.jsx(dae,{categories:zN,onNavigate:l,autoFocusSearch:!1})]})})]})}const mae="_wrap_1353r_1",pae="_centerLogoWrap_1353r_21",fae="_centerLogoLink_1353r_37",gae="_centerLogo_1353r_21",xae="_arc_1353r_71",yae="_left_1353r_73",vae="_right_1353r_75",bae="_sub_1353r_77",_ae="_full_1353r_79",wae="_arcItem_1353r_81",jae="_iconBtn_1353r_87",Sae="_active_1353r_141",Nae="_iconImg_1353r_151",kae="_placeholderIcon_1353r_155",Cae="_placeholderText_1353r_173",Tae="_iconLabel_1353r_177",Sn={wrap:mae,centerLogoWrap:pae,centerLogoLink:fae,centerLogo:gae,arc:xae,left:yae,right:vae,sub:bae,full:_ae,arcItem:wae,iconBtn:jae,active:Sae,iconImg:Nae,placeholderIcon:kae,placeholderText:Cae,iconLabel:Tae},Eae=({to:t,label:e,icon:s,variant:r="main"})=>{const{search:i}=jr();let a=!1;try{const l=new URLSearchParams(i),d=l.get("tab"),u=l.get("sub"),m=new URL(t,window.location.origin).searchParams,g=m.get("tab"),v=m.get("sub");a=r==="sub"?d===g&&!!v&&u===v:d===g}catch(l){a=!1}return n.jsxs(rs,{to:t,"aria-label":e,className:[Sn.iconBtn,r==="sub"?Sn.muted:"",a?Sn.active:""].join(" "),title:e,replace:!1,children:[s?n.jsx("img",{src:s,alt:"",className:Sn.iconImg}):n.jsx("div",{className:Sn.placeholderIcon,"aria-hidden":"true",children:n.jsx("span",{className:Sn.placeholderText,children:e.slice(0,2).toUpperCase()})}),n.jsx("div",{className:Sn.iconLabel,children:e})]})},vv=({items:t,side:e,anchorSide:s="right",compact:r=!1,variant:i="main",arcOffset:a=220,outerOffset:l=440})=>{const d=E.useMemo(()=>{const h=t.length;if(h===0)return[];let m=-90,g=90;e==="left"?(m=90,g=270):e==="sub"?s==="left"?(m=90,g=270):(m=-90,g=90):e==="full"&&(m=0,g=360);const v=(g-m)/(h+1),b=r?190:250;return t.map((N,S)=>{const R=(m+v*(S+1))*Math.PI/180;return{it:N,x:Math.cos(R)*b,y:Math.sin(R)*b}})},[t,e,s,r]),u=(()=>{const h={position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"};return e==="left"?h.left=`calc(50% - ${a}px)`:e==="right"?h.left=`calc(50% + ${a}px)`:e==="sub"&&(h.left=s==="left"?`calc(50% - ${l}px)`:`calc(50% + ${l}px)`),h})();return n.jsx("div",{className:[Sn.arc,e==="left"?Sn.left:"",e==="right"?Sn.right:"",e==="sub"?Sn.sub:"",e==="full"?Sn.full:""].join(" "),style:u,children:d.map(({it:h,x:m,y:g})=>n.jsx("div",{className:Sn.arcItem,style:{transform:`translate(${m}px, ${g}px)`},children:n.jsx(Eae,{to:h.to,label:h.label,icon:h.icon,variant:i})},h.key))})},Aae=["creators","scans","predictions","news","records","feedback"],I0=[{key:"creators",label:"Creators",to:"/community?tab=creators",side:"left"},{key:"scans",label:"Scans",to:"/community?tab=scans",side:"left"},{key:"predictions",label:"Predictions",to:"/community?tab=predictions",side:"left"},{key:"news",label:"News",to:"/community?tab=news",side:"right"},{key:"records",label:"Records",to:"/community?tab=records",side:"right"},{key:"feedback",label:"Feedback",to:"/community?tab=feedback",side:"right"}],Iae={creators:[{key:"streamers",label:"Streamers",to:"/community?tab=creators&sub=streamers"},{key:"youtubers",label:"YouTubers",to:"/community?tab=creators&sub=youtubers"}],scans:[{key:"uploads",label:"Uploads",to:"/community?tab=scans&sub=uploads"},{key:"downloads",label:"Downloads",to:"/community?tab=scans&sub=downloads"}],predictions:[{key:"votes",label:"Votes",to:"/community?tab=predictions&sub=votes"},{key:"tipps",label:"Tipps",to:"/community?tab=predictions&sub=tipps"}],news:[{key:"updates",label:"Updates",to:"/community?tab=news&sub=updates"},{key:"announcements",label:"Announcements",to:"/community?tab=news&sub=announcements"}],feedback:[{key:"bugreports",label:"Bugreports",to:"/community?tab=feedback&sub=bugreports"},{key:"features",label:"Feature Requests",to:"/community?tab=feedback&sub=features"}],records:[]},Pae=new Set(Aae),Rae=I0.reduce((t,e)=>(t[e.key]=e,t),{}),Lae=t=>typeof t=="string"&&Pae.has(t),Dae=({logoSrc:t})=>{const[e]=Yl(),s=e.get("tab")||null,r=E.useMemo(()=>I0.filter(b=>b.side==="left"),[]),i=E.useMemo(()=>I0.filter(b=>b.side==="right"),[]),a=Lae(s)?s:null,l=a?Iae[a]:[],d=a?Rae[a].side:"right",u=E.useRef(null),[h,m]=E.useState(220),[g,v]=E.useState(440);return E.useEffect(()=>{const b=()=>{var T,y;const S=((y=(T=u.current)==null?void 0:T.offsetWidth)!=null?y:380)/2,R=Math.round(S+60),M=Math.round(R+220);m(R),v(M)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),n.jsxs("div",{className:Sn.wrap,children:[n.jsx("div",{className:Sn.centerLogoWrap,children:n.jsx(rs,{to:"/community",className:Sn.centerLogoLink,"aria-label":"Community Hub Home",children:n.jsx("img",{ref:u,src:t,alt:"Community Hub",className:Sn.centerLogo})})}),n.jsx(vv,{items:r.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"left",variant:"main",arcOffset:h}),n.jsx(vv,{items:i.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"right",variant:"main",arcOffset:h}),l.length>0&&n.jsx(vv,{items:l.map(b=>({key:b.key,to:b.to,label:b.label,icon:b.icon})),side:"sub",anchorSide:d,compact:!0,variant:"sub",outerOffset:g})]})},Mae="_topWrap_1rivx_1",Fae="_divider_1rivx_19",Bae="_contentArea_1rivx_53",$ae="_placeholder_1rivx_63",Oae="_placeholderTitle_1rivx_77",Vae="_placeholderText_1rivx_91",Hc={topWrap:Mae,divider:Fae,contentArea:Bae,placeholder:$ae,placeholderTitle:Oae,placeholderText:Vae},Uae="/assets/logo_communityhub-LVMLHRD6.png",zae=[{name:"DORZER",code:"Dorzer",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@DORZER",twitch:"https://www.twitch.tv/dorzer",drops:"Droplets",discord:"https://discord.gg/EWEgrCq"},{name:"Sergio Kurai",latestActivity:"01.05.2025",youtube:"https://www.youtube.com/@SergioKurai",twitch:"https://www.twitch.tv/sergiokuraiyt",discord:"https://discord.com/invite/BsuxhMWQYa"},{name:"Lootenant",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Lootenant",twitch:"https://www.twitch.tv/lootenantsf"},{name:"Belleghar",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Bellegahr/videos",twitch:"https://www.twitch.tv/bellegahr"},{name:"halo",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@GPS71xCyn",twitch:"https://www.twitch.tv/haloxmd"},{name:"Gorgoss",code:"Gorgoss",latestActivity:"15.09.2025",youtube:"https://www.youtube.com/@Gorgoss8000",twitch:"https://www.twitch.tv/gorgoss9000",discord:"https://discord.com/invite/J3gXmaRpbM"},{name:"TUNY",code:"Tuny",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@tuny-yt",twitch:"https://www.twitch.tv/tunyghost",drops:"Drops",discord:"https://discord.com/invite/tunysschuppen"},{name:"AlphaTV",latestActivity:"08.07.2025",youtube:"https://www.youtube.com/@AlphaTV01"},{name:"Salz_Live",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Salz_Live",twitch:"https://www.twitch.tv/salz_live"},{name:"Kepsoo",code:"Kepsoo",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/@kepsoo",discord:"https://discord.gg/FreedomSF"},{name:"Kysuel",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@Kysuel",twitch:"https://www.twitch.tv/kysuel"},{name:"Niisa",code:"Niisa",latestActivity:"22.09.2025",youtube:"https://www.youtube.com/channel/UCMSTL1cRbnfii2rbQIPJMAA",twitch:"https://www.twitch.tv/kysuel",drops:"Droplets",discord:"https://discord.com/invite/niisa"},{name:"BanditSF",code:"Bandit",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/banditsf",discord:"https://discord.com/invite/QSUBnB3MDW"},{name:"MoZone",code:"moZone",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/mozone",twitch:"https://www.twitch.tv/mozonetv",drops:"Drops",discord:"https://discord.com/invite/cbhT3ZZqkG"},{name:"CHAZE",code:"CHAZE",latestActivity:"22.09.2025",youtube:"https://www.twitch.tv/chaze",twitch:"https://www.twitch.tv/chaze",drops:"Droplets",discord:"https://discord.com/invite/kCXvXVceaE"},{name:"MoxTales",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/@MoxTales",twitch:"https://www.twitch.tv/moxtales",drops:"Droplets",discord:"https://discord.com/invite/rHuzrwbhcV"},{name:"feena1986",latestActivity:"22.09.2025",twitch:"https://www.twitch.tv/feena1986",drops:"Droplets"},{name:"Blackhammerplay",latestActivity:"01.08.2025",youtube:"https://www.youtube.com/channel/UCSbUYoE8AhJR0gVLK96USlQ",twitch:"https://www.twitch.tv/blackhammerplay",drops:"Droplets",discord:"https://discord.com/invite/u3mX7sfVHN"},{name:"Crappa",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/@Crappa",twitch:"https://www.twitch.tv/crappa",drops:"Droplets"},{name:"der_cyberpunk",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/c/dercyberpunk",twitch:"https://www.twitch.tv/der_cyberpunk",drops:"Droplets",discord:"https://discord.com/invite/GKV38UWCja"},{name:"Terste",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/channel/UCq8Z8IO_3SG5Q-55fnb2gLA",twitch:"https://www.twitch.tv/terste",drops:"Droplets",discord:"https://discord.com/invite/4XzTYgt"},{name:"UweReinholzen",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UC-fk4horLbcxpKqwY-XEwAg",twitch:"https://www.twitch.tv/uwereinholzen",drops:"Droplets",discord:"https://discord.com/invite/Qya8yBbfrg"},{name:"MrMoregame",latestActivity:"19.09.2025",youtube:"https://www.youtube.com/user/MrMoregame",twitch:"https://www.twitch.tv/mrmoregame",drops:"Droplets"},{name:"ChromieDE",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/channel/UChts6QeisFXtH1B8YrJBB-A",twitch:"https://www.twitch.tv/chromiede",drops:"Droplets",discord:"https://discord.com/invite/tHrHt56"},{name:"eGoLeipzig",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/egoleipzig"},{name:"Aurikos_Zonestos",latestActivity:"23.09.2025",youtube:"https://www.youtube.com/channel/UCumWgXIj3ca-oEGOv40-QJg",twitch:"https://www.twitch.tv/aurikos_zonestos"},{name:"xmaexel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/xmaexel",discord:"https://discord.com/invite/maexel"},{name:"Hunrizzle",code:"Hunrizzle",latestActivity:"01.09.2025",youtube:"https://www.youtube.com/@HunrizzleTV",discord:"https://discord.com/invite/V8ukg7GAyQ"},{name:"Spielestyler",code:"Spielestyler",latestActivity:"24.09.2025",youtube:"https://www.youtube.com/Spielestyler",twitch:"https://www.twitch.tv/spielestyler",discord:"https://discord.com/invite/aAzzvgs"},{name:"Plotz",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/plotz"},{name:"Chriddel",latestActivity:"24.09.2025",twitch:"https://www.twitch.tv/chriddel",discord:"https://discord.com/invite/ZQNDTD6"}];function uA(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"").replace(/-{2,}/g,"-").trim()}function Hae(t){if(!t)return new Date().toISOString();const e=t.split(".");if(e.length===3){const[r,i,a]=e.map(l=>parseInt(l,10));if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(a))return new Date(a,i-1,r).toISOString()}const s=new Date(t);return Number.isNaN(s.getTime())?new Date().toISOString():s.toISOString()}function bv(t){if(!t)return null;const e=t.trim();return e.length?/^https?:\/\//i.test(e)?e:e.startsWith("discord.gg")?`https://${e}`:e.startsWith("discord.com")?`https://${e}`:e.startsWith("www")?`https://${e}`:e.includes(".")?`https://${e}`:null:null}function Gae(t){const e=[];return t.code&&e.push(`Creator code: ${t.code}`),t.drops&&e.push(`Drops access: ${t.drops}`),e.push("Imported from the SFDataHub community sheet."),e.join("  ")}function Wae(t){return t.avatar?t.avatar:`/avatars/${uA(t.code||t.name||"creator")}.png`}function qae(t){const e=uA(t.code||t.name||"creator"),s=[],r=bv(t.youtube);r&&s.push({type:"YouTube",url:r});const i=bv(t.twitch);i&&s.push({type:"Twitch",url:i});const a=bv(t.discord);return a&&s.push({type:"Discord",url:a}),{id:`sheet-${e}`,name:t.name,avatar:Wae(t),description:Gae(t),language:"de",subscribers:0,totalViews:0,weeklyViews:0,weeklyPosts:t.drops?3:1,lastActive:Hae(t.latestActivity),platforms:s}}function Kae(t){var s,r,i;const e=Array.isArray(t)?t:Array.isArray(t==null?void 0:t.data)?t.data:[];return{generatedAt:(s=t==null?void 0:t.generatedAt)!=null?s:new Date().toISOString(),data:e,warnings:(i=(r=t==null?void 0:t.warnings)!=null?r:t==null?void 0:t.errors)!=null?i:[],stats:t==null?void 0:t.stats}}function hA(t="/data/creators-live.json"){const[e,s]=E.useState(null),[r,i]=E.useState(""),[a,l]=E.useState(!1),[d,u]=E.useState(0);return E.useEffect(()=>{let h=!1;async function m(){l(!0),i("");try{const g=await fetch(t,{cache:"no-store"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const v=await g.json();h||s(Kae(v))}catch(g){h||(i((g==null?void 0:g.message)||"Failed to load creator snapshot"),s(null))}finally{h||l(!1)}}return m(),()=>{h=!0}},[t,d]),{snapshot:e,error:r,loading:a,refresh:()=>u(h=>h+1)}}const Qae=zae,Xae=Qae.map(qae),Yae=[...Xae];function mA(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:String(t)}function Lo(t,e,s=mA){if(t<=0)return"";const r=s(t);return e?`${r} ${e}`:r}function Eh(t){const e=new Date(t).getTime();return Math.max(0,Math.round((Date.now()-e)/(24*3600*1e3)))}function Jae(t,e){const s=e==="asc"?1:-1;return(r,i)=>{switch(t){case"subs":return(r.subscribers-i.subscribers)*s;case"views":return(r.totalViews-i.totalViews)*s;case"activity":return(Eh(r.lastActive)-Eh(i.lastActive))*s*-1;case"language":return r.language.localeCompare(i.language)*s;default:return 0}}}function Zae(t){const e={width:16,height:16};switch(t){case"YouTube":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"YouTube",children:[n.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"3",className:"cc-ico-y"}),n.jsx("polygon",{points:"10,9 16,12 10,15",className:"cc-ico-y-play"})]});case"Twitch":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Twitch",children:[n.jsx("path",{d:"M4 4h16v10l-4 4h-4l-2 2H8v-2H4z",className:"cc-ico-t"}),n.jsx("rect",{x:"10",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"}),n.jsx("rect",{x:"14",y:"8",width:"2",height:"4",className:"cc-ico-t-eye"})]});case"TikTok":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"TikTok",children:[n.jsx("circle",{cx:"8",cy:"16",r:"4",className:"cc-ico-tt"}),n.jsx("path",{d:"M12 6v9",className:"cc-ico-tt-note"}),n.jsx("path",{d:"M12 6c2 3 5 4 7 4",className:"cc-ico-tt-note"})]});case"Discord":return n.jsxs("svg",{...e,viewBox:"0 0 24 24","aria-label":"Discord",children:[n.jsx("rect",{x:"4",y:"6",width:"16",height:"10",rx:"4",className:"cc-ico-d"}),n.jsx("circle",{cx:"10",cy:"11",r:"1",className:"cc-ico-d-eye"}),n.jsx("circle",{cx:"14",cy:"11",r:"1",className:"cc-ico-d-eye"})]})}}function ZN({c:t}){return n.jsxs("article",{className:"cc-card",children:[n.jsxs("header",{className:"cc-card-head",children:[n.jsx("img",{src:t.avatar,alt:`${t.name} avatar`,className:"cc-avatar",onError:e=>{const s=e.currentTarget;s.onerror=null,s.src="data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" rx="32" fill="#0b1a2d"/><text x="50%" y="52%" text-anchor="middle" font-size="12" fill="#94b8ff">No Img</text></svg>')}}),n.jsxs("div",{className:"cc-card-title",children:[n.jsx("h3",{className:"cc-name",children:t.name}),n.jsx("div",{className:"cc-platforms","aria-label":"Platforms",children:t.platforms.map(e=>n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",title:`${e.type}${e.verified?" (verified)":""}`,className:"cc-platform-link",children:[Zae(e.type),n.jsx("span",{className:"cc-sr",children:e.type})]},e.type))})]})]}),n.jsx("p",{className:"cc-desc",children:t.description}),n.jsxs("div",{className:"cc-stats",children:[n.jsx("span",{title:"Subscribers",children:Lo(t.subscribers,"subs")}),n.jsx("span",{title:"Total views",children:Lo(t.totalViews,"views")}),n.jsx("span",{title:"Weekly views",children:Lo(t.weeklyViews,"/wk")}),n.jsx("span",{title:"Weekly posts",children:Lo(t.weeklyPosts,"posts/wk",e=>`${e}`)})]}),n.jsxs("footer",{className:"cc-meta",children:[n.jsx("span",{className:"cc-badge",children:t.language.toUpperCase()}),n.jsxs("span",{className:"cc-meta-right",children:["active ",Eh(t.lastActive),"d ago"]})]})]},t.id)}function eoe({data:t}){return n.jsx("div",{className:"cc-table-wrap",children:n.jsxs("table",{className:"cc-table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Name"}),n.jsx("th",{children:"Lang"}),n.jsx("th",{children:"Subs"}),n.jsx("th",{children:"Total Views"}),n.jsx("th",{children:"Weekly Views"}),n.jsx("th",{children:"Weekly Posts"}),n.jsx("th",{children:"Active"})]})}),n.jsx("tbody",{children:t.map(e=>n.jsxs("tr",{children:[n.jsx("td",{children:n.jsxs("div",{className:"cc-table-name",children:[n.jsx("img",{src:e.avatar,alt:"",className:"cc-avatar-sm"}),n.jsx("span",{children:e.name})]})}),n.jsx("td",{children:e.language.toUpperCase()}),n.jsx("td",{children:Lo(e.subscribers)}),n.jsx("td",{children:Lo(e.totalViews)}),n.jsx("td",{children:Lo(e.weeklyViews)}),n.jsx("td",{children:Lo(e.weeklyPosts,void 0,s=>`${s}`)}),n.jsxs("td",{children:[Eh(e.lastActive),"d"]})]},e.id))})]})})}function pA(){var Z,he;const[t,e]=E.useState("static"),[s,r]=E.useState("cards"),[i,a]=E.useState("subs"),[l,d]=E.useState("desc"),[u,h]=E.useState("all"),[m,g]=E.useState("all"),[v,b]=E.useState(0),[N,S]=E.useState(365),[C,R]=E.useState(null),[M,T]=E.useState(""),[y,w]=E.useState(!1),[D,k]=E.useState(""),[_,A]=E.useState(null),{snapshot:F,error:P}=hA(),B=(Z=F==null?void 0:F.data)!=null&&Z.length?F.data:null,$=B!=null?B:Yae,W=t==="static"?$:(he=_!=null?_:B)!=null?he:[],H=E.useMemo(()=>{const ie=new Set(W.map(fe=>fe.language));return Array.from(ie).sort()},[W]),q=E.useMemo(()=>W.filter(ie=>u==="all"?!0:ie.language===u).filter(ie=>m==="all"?!0:ie.platforms.some(fe=>fe.type===m)).filter(ie=>ie.subscribers>=v).filter(ie=>Eh(ie.lastActive)<=N).slice().sort(Jae(i,l)),[W,u,m,v,N,i,l]);E.useEffect(()=>{if(!C&&q.length){const ie=q[Math.floor(Math.random()*q.length)];R(ie.id)}},[q,C]);const K=E.useMemo(()=>q.find(ie=>ie.id===C)||null,[q,C]),G=E.useMemo(()=>q.slice().sort((ie,fe)=>fe.weeklyViews-ie.weeklyViews).slice(0,5),[q]),te=E.useMemo(()=>q.slice().sort((ie,fe)=>fe.weeklyPosts-ie.weeklyPosts).slice(0,5),[q]);async function ne(){k(""),w(!0);try{const ie=await fetch(M,{headers:{Accept:"application/json"}});if(!ie.ok)throw new Error(`HTTP ${ie.status}`);const fe=await ie.json(),be=Array.isArray(fe)?fe:Array.isArray(fe==null?void 0:fe.data)?fe.data:[];A(be)}catch(ie){k((ie==null?void 0:ie.message)||"Fetch failed")}finally{w(!1)}}const U=q.length===0;return n.jsxs("section",{className:"cc-wrap",children:[n.jsxs("div",{className:"cc-heading",children:[n.jsx("h1",{children:"Content Creator Hub"}),n.jsx("p",{className:"cc-sub",children:"Profiles, stats and links to community creators."}),F&&n.jsxs("p",{className:"cc-sync",children:[n.jsxs("span",{children:["Live stats synced ",new Date(F.generatedAt).toLocaleString()]}),n.jsxs("span",{children:[F.data.length," profiles"]})]}),P&&n.jsx("p",{className:"cc-sync-error",children:P})]}),n.jsxs("div",{className:"cc-toolbar",children:[n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Data"}),n.jsxs("select",{value:t,onChange:ie=>e(ie.target.value),children:[n.jsx("option",{value:"static",children:"Static"}),n.jsx("option",{value:"dynamic",children:"Dynamic (API)"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"View"}),n.jsxs("select",{value:s,onChange:ie=>r(ie.target.value),children:[n.jsx("option",{value:"cards",children:"Cards"}),n.jsx("option",{value:"table",children:"Table"}),n.jsx("option",{value:"json",children:"JSON"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Sort by"}),n.jsxs("select",{value:i,onChange:ie=>a(ie.target.value),children:[n.jsx("option",{value:"subs",children:"Subs"}),n.jsx("option",{value:"views",children:"Views"}),n.jsx("option",{value:"activity",children:"Activity"}),n.jsx("option",{value:"language",children:"Language"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Dir"}),n.jsxs("select",{value:l,onChange:ie=>d(ie.target.value),children:[n.jsx("option",{value:"desc",children:"Desc"}),n.jsx("option",{value:"asc",children:"Asc"})]})]})]}),n.jsxs("div",{className:"cc-toolbar-row",children:[n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Language"}),n.jsxs("select",{value:u,onChange:ie=>h(ie.target.value),children:[n.jsx("option",{value:"all",children:"All"}),H.map(ie=>n.jsx("option",{value:ie,children:ie.toUpperCase()},ie))]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Platform"}),n.jsxs("select",{value:m,onChange:ie=>g(ie.target.value),children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"YouTube",children:"YouTube"}),n.jsx("option",{value:"Twitch",children:"Twitch"}),n.jsx("option",{value:"TikTok",children:"TikTok"}),n.jsx("option",{value:"Discord",children:"Discord"})]})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Min subs"}),n.jsx("input",{type:"number",min:0,value:v,onChange:ie=>b(Number(ie.target.value||0)),placeholder:"0"})]}),n.jsxs("label",{className:"cc-field",children:[n.jsx("span",{children:"Active within"}),n.jsxs("select",{value:N,onChange:ie=>S(Number(ie.target.value)),children:[n.jsx("option",{value:7,children:"7 days"}),n.jsx("option",{value:30,children:"30 days"}),n.jsx("option",{value:90,children:"90 days"}),n.jsx("option",{value:365,children:"365 days"})]})]})]})]}),t==="dynamic"&&n.jsxs("div",{className:"cc-api",children:[n.jsxs("div",{className:"cc-api-ctrls",children:[n.jsxs("label",{className:"cc-field cc-field-grow",children:[n.jsx("span",{children:"API URL"}),n.jsx("input",{type:"url",value:M,onChange:ie=>T(ie.target.value),placeholder:"https://api.example.com/creators"})]}),n.jsx("button",{className:"cc-btn",onClick:ne,disabled:!M||y,children:y?"Loading":"Fetch"})]}),D&&n.jsx("div",{className:"cc-api-error",children:D}),n.jsx("div",{className:"cc-api-hint",children:'Expected JSON: array of Creator objects or an object with a "data" array. Only public data. No embedding without permission.'})]}),K&&n.jsxs("div",{className:"cc-spotlight",children:[n.jsxs("div",{className:"cc-spot-head",children:[n.jsx("h2",{children:"Random CC Spotlight"}),n.jsx("button",{className:"cc-btn cc-btn-ghost",onClick:()=>{if(!q.length)return;const ie=q[Math.floor(Math.random()*q.length)];R(ie.id)},children:"Shuffle"})]}),n.jsx(ZN,{c:K})]}),n.jsxs("div",{className:"cc-main",children:[n.jsxs("div",{className:"cc-main-left",children:[U&&n.jsxs("div",{className:"cc-empty",children:[n.jsx("h3",{children:"No creators match the filters"}),n.jsx("p",{children:"Adjust activity range or other filters to see results."})]}),!U&&s==="cards"&&n.jsx("div",{className:"cc-grid",children:q.map(ie=>n.jsx(ZN,{c:ie},ie.id))}),!U&&s==="table"&&n.jsx(eoe,{data:q}),s==="json"&&n.jsx("pre",{className:"cc-json","aria-label":"JSON",children:JSON.stringify(q,null,2)})]}),n.jsxs("aside",{className:"cc-main-right",children:[n.jsxs("div",{className:"cc-side",children:[n.jsx("h3",{children:"Weekly Toplists"}),n.jsxs("div",{className:"cc-toplist",children:[n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Views"}),n.jsx("ol",{children:G.map(ie=>n.jsxs("li",{children:[n.jsx("span",{children:ie.name}),n.jsx("span",{className:"cc-top-val",children:mA(ie.weeklyViews)})]},ie.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{children:"By Weekly Posts"}),n.jsx("ol",{children:te.map(ie=>n.jsxs("li",{children:[n.jsx("span",{children:ie.name}),n.jsx("span",{className:"cc-top-val",children:ie.weeklyPosts})]},ie.id))})]})]})]}),n.jsxs("div",{className:"cc-side cc-legal",children:[n.jsx("h3",{children:"Legal & Disclaimer"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Only public data; no embedding without permission."}),n.jsx("li",{children:"Logos/icons used solely as identifiers, respecting brand guidelines."}),n.jsx("li",{children:'Disclaimer: "Profiles belong to their creators; all rights remain with owners; SFDataHub only lists & links."'})]})]})]})]})]})}function fA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Scans"}),n.jsx("p",{style:{opacity:.8},children:"Community-Uploads und geteilte Auswertungen (Platzhalter)."})]})}function gA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Predictions"}),n.jsx("p",{style:{opacity:.8},children:"Votes, Tipps & Prognosen der Community (Platzhalter)."})]})}function xA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  News"}),n.jsx("p",{style:{opacity:.8},children:"Kuratierte News & Updates aus der Community (Platzhalter)."})]})}function yA(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Community  Feedback"}),n.jsx("p",{style:{opacity:.8},children:"Teile Feature-Wnsche, Bugs und Ideen (Platzhalter)."})]})}const toe=[{category:"Level",record:"Level 300",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x",previousDays:"9",previousName:"Renervate"},{category:"Level",record:"Level 300",classType:"Warrior",days:"11",playerName:"MelendezTV",server:"w60.sfgame.net",release:"x"},{category:"Level",record:"Level 300",classType:"Scout",days:"9",playerName:"Tepakad",server:"s8.sfgame.eu",release:"x",previousDays:"16",previousName:"Se7en"},{category:"Level",record:"Level 300",classType:"Mage",days:"12",playerName:"Frieren",server:"s20.sfgame.eu",release:"x",previousDays:"17",previousName:"Pablo Escobar"},{category:"Level",record:"Level 300",classType:"Assassin",days:"10",playerName:"scharffe",server:"s8.sfgame.eu",release:"x",previousDays:"11",previousName:"Cartn"},{category:"Level",record:"Level 300",classType:"Battlemage",days:"11",playerName:"Vaaz",server:"s8.sfgame.eu",release:"x",previousDays:"21",previousName:"Pikatchu"},{category:"Level",record:"Level 300",classType:"Berserker",days:"10",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"11",previousName:"RaketenPeter"},{category:"Level",record:"Level 300",classType:"Demonhunter",days:"9",playerName:"Renervate",server:"s8.sfgame.eu",release:"x",previousDays:"10",previousName:"Spadedix Pururyk"},{category:"Level",record:"Level 300",classType:"Druid",days:"11",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"15",previousName:"LokaiX"},{category:"Level",record:"Level 300",classType:"Bard",days:"10",playerName:"Reckless",server:"s8.sfgame.eu",release:"x",previousDays:"12",previousName:"halo"},{category:"Level",record:"Level 300",classType:"Necromancer",days:"10",playerName:"Datalyzed",server:"s20.sfgame.eu",release:"x",previousDays:"12",previousName:"StehSeidl"},{category:"Level",record:"Level 300",classType:"Paladin",days:"8",playerName:"Turor",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 400",classType:"Any",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"115",previousName:"fake COCA"},{category:"Level",record:"Level 400",classType:"Warrior",days:"166",playerName:"fearofgod",server:"w57.sfgame.net",release:"x",previousDays:"175",previousName:"F1reFly"},{category:"Level",record:"Level 400",classType:"Scout",days:"149",playerName:"Casino Dobi",server:"s7.sfgame.eu",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Level",record:"Level 400",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",release:"x",previousDays:"161",previousName:"Zouzi10"},{category:"Level",record:"Level 400",classType:"Assassin",days:"160",playerName:"xTypischAndy",server:"w54.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Battlemage",days:"148",playerName:"Klifek",server:"w60.sfgame.net",release:"x",previousDays:"186",previousName:"Enduu"},{category:"Level",record:"Level 400",classType:"Berserker",days:"109",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",release:"x",previousDays:"135",previousName:"Canyonek"},{category:"Level",record:"Level 400",classType:"Demonhunter",days:"118",playerName:"Zouzi10",server:"s11.sfgame.eu",release:"x",previousDays:"150",previousName:"THEmaskedMAN"},{category:"Level",record:"Level 400",classType:"Druid",days:"128",playerName:"Marksman",server:"s1.sfgame.eu",release:"x",previousDays:"163",previousName:"Pikatchu"},{category:"Level",record:"Level 400",classType:"Bard",days:"115",playerName:"fake COCA",server:"w58.sfgame.net",release:"x"},{category:"Level",record:"Level 400",classType:"Necromancer",days:"141",playerName:"CoeVoe",server:"s11.sfgame.eu",release:"x",previousDays:"197",previousName:"Freewa"},{category:"Level",record:"Level 400",classType:"Paladin",days:"151",playerName:"MaG Snaaptos",server:"s17.sfgame.eu",release:"x"},{category:"Level",record:"Level 500",classType:"Any",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz & LoKaiX"},{category:"Level",record:"Level 500",classType:"Warrior",days:"540",playerName:"relaxo",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Scout",days:"541",playerName:"Landlord",server:"s10.sfgame.eu",release:"x",previousDays:"548",previousName:"Chrollo & Black Lotus"},{category:"Level",record:"Level 500",classType:"Mage",days:"540",playerName:"NicNag",server:"s10.sfgame.eu",release:"x",previousDays:"572",previousName:"Eyliaz"},{category:"Level",record:"Level 500",classType:"Assassin",days:"555",playerName:"Hardiy",server:"s10.sfgame.eu",release:"x",previousDays:"582",previousName:"Zeraffim"},{category:"Level",record:"Level 500",classType:"Battlemage",days:"542",playerName:"LsJabedias",server:"s10.sfgame.eu",release:"x",previousDays:"547",previousName:"Vaaz"},{category:"Level",record:"Level 500",classType:"Berserker",days:"538",playerName:"LoKaiX",server:"s10.sfgame.eu",release:"x",previousDays:"580",previousName:"Earl Koyar"},{category:"Level",record:"Level 500",classType:"Demonhunter",days:"540",playerName:"DeadUtility & Mirama",server:"s10.sfgame.eu",notes:"Both Players at the same time",release:"x",previousDays:"547",previousName:"LoKaiX"},{category:"Level",record:"Level 500",classType:"Druid",days:"542",playerName:"Odin",server:"s10.sfgame.eu",release:"x",previousDays:"570",previousName:"dex0n"},{category:"Level",record:"Level 500",classType:"Bard",days:"540",playerName:"ElonMuskow",server:"s10.sfgame.eu",release:"x",previousDays:"554",previousName:"Reckless"},{category:"Level",record:"Level 500",classType:"Necromancer",days:"542",playerName:"THEmaskedMAN",server:"s10.sfgame.eu",notes:"#ch",release:"x",previousDays:"554",previousName:"StehSeidl"},{category:"Level",record:"Level 500",classType:"Paladin",days:"",playerName:"",server:""},{category:"Fortress",record:"Knighthall 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"9",previousName:"Spadedix Pururyk"},{category:"Fortress",record:"Knighthall 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"23",previousName:"Kronikus"},{category:"Fortress",record:"Fortress 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"18",previousName:"NeverStealMyName"},{category:"Fortress",record:"Mine 20",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"29",previousName:"Apo"},{category:"Fortress",record:"Mine 100",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"30",previousName:"Apo"},{category:"Fortress",record:"Max Fortress",classType:"Any",days:"18",playerName:"Canys",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"31",previousName:"Apo"},{category:"Underworld",record:"Heart 15",classType:"Any",days:"8",playerName:"Turor",server:"s17.sfgame.eu",notes:"No Trading Partner (LD)",release:"x",previousDays:"19",previousName:"Uwe"},{category:"Dungeon",record:"Demon Portal finished",classType:"Solo",days:"82",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 392 (Berserker)",release:"x",previousDays:"90",previousName:"fake COCA"},{category:"Guild",record:"Demon Portal finished",classType:"Guild",days:"97",playerName:"Imbiss 69",server:"s20.sfgame.eu",notes:"LvL: 367",previousDays:"114",previousName:"Royal Guard"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Any",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"7",previousName:"xTypischAndy"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Warrior",days:"10",playerName:"MelendezTV",server:"w60.sfgame.net",notes:"Lvl:285",release:"x"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Scout",days:"6",playerName:"CoeVoe",server:"s22.sfgame.eu",notes:"LvL: 260",release:"x",previousDays:"7",previousName:"Turor Poziom"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Mage",days:"10",playerName:"Frieren",server:"s20.sfgame.eu",notes:"LvL:",release:"x",previousDays:"13",previousName:"Pablo Escobar"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Assassin",days:"3",playerName:"Kugy",server:"s16.sfgame.eu",notes:"LvL: 261",release:"x",previousDays:"8",previousName:"Cartn"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Battlemage",days:"10",playerName:"Vaaz",server:"s8.sfgame.eu",notes:"Lvl:295",release:"x",previousDays:"18",previousName:"Miloo"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Berserker",days:"9",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"Lvl: 274",release:"x",previousDays:"10",previousName:"RaketenPeter"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Demonhunter",days:"7",playerName:"xTypischAndy",server:"s10.sfgame.eu",notes:"LvL: 268",release:"x",previousDays:"8",previousName:"Spadedix Pururyk"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Druid",days:"10",playerName:"BahamasVoe",server:"s20.sfgame.eu",release:"x",previousDays:"13",previousName:"LokaiX"},{category:"Dungeon",record:"Jack the Hammerer",classType:"Bard",days:"9",playerName:"halo",server:"w60.sfgame.net",notes:"LvL: 266",release:"x"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Necromancer",days:"8",playerName:"AmR",server:"s22.sfgame.eu",notes:"LvL: 270",previousDays:"9",previousName:"Zouzi10_Twitch"},{category:"Dungeon",record:"Jack The Hammerer",classType:"Paladin",days:"8",playerName:"Misuk",server:"s17.sfgame.eu",notes:"LvL: 273",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Any",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"92",previousName:"fake COCA"},{category:"Dungeon",record:"Twister finished",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"LvL: 400",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Scout",days:"162",playerName:"Casino Dobi",server:"s7.sfgame.eu",notes:"LvL: 403",release:"x",previousDays:"163",previousName:"Flacko"},{category:"Dungeon",record:"Twister finished",classType:"Mage",days:"121",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"LvL: 399",release:"x",previousDays:"146",previousName:"Zouzi10"},{category:"Dungeon",record:"Twister finished",classType:"Assassin",days:"177",playerName:"xTypischAndy",server:"w54.sfgame.net",notes:"Lvl: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Battlemage",days:"324",playerName:"Wilhelm Tell",server:"s42.sfgame.net",notes:"LvL: 426 (Zsombey w54 270 days)",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Berserker",days:"71",playerName:"Sheikh Marksman",server:"s2.sfgame.eu",notes:"LvL: 389",release:"x",previousDays:"113",previousName:"Apocalypto3"},{category:"Dungeon",record:"Twister finished",classType:"Demonhunter",days:"79",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 388",release:"x",previousDays:"141",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Twister finished",classType:"Druid",days:"93",playerName:"Marksman",server:"s1.sfgame.eu",notes:"LvL: 390",release:"x",previousDays:"120",previousName:"Turor"},{category:"Dungeon",record:"Twister finished",classType:"Bard",days:"92",playerName:"fake COCA",server:"w58.sfgame.net",notes:"LvL: 392",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Necromancer",days:"150",playerName:"CoeVoe",server:"s11.sfgame.eu",notes:"LvL: 403",release:"x"},{category:"Dungeon",record:"Twister finished",classType:"Paladin",days:"",playerName:"",server:""},{category:"Guild",record:"Raid 50",classType:"Guild",days:"25",playerName:"Asylum",server:"s1.sfgame.eu",notes:"Average LvL: ~261",release:"x",previousDays:"26",previousName:"ApplePay"},{category:"IHOF",record:"IHOF #1",classType:"Any",days:"2313",playerName:"Strider",server:"s10.sfgame.us",release:"X"},{category:"Arena Manager",record:"E100",classType:"Any",days:"92",playerName:"Incrementare",server:"w50.sfgame.net",notes:"https://prnt.sc/1vcjt94",release:"x"},{category:"Guild",record:"Hall of Knights 1000",classType:"Guild",days:"134",playerName:"FREEDOM",server:"s8.sfgame.eu",release:"x",previousDays:"156",previousName:"Tavernenflotte"},{category:"Dungeon",record:"Marv",classType:"Scout",days:"127",playerName:"profii123",server:"s19.sfgame.eu",notes:"LvL: 372",release:"x",previousDays:"173",previousName:"lenni"},{category:"Dungeon",record:"Marv",classType:"Berserker",days:"40",playerName:"Sheikh Marksman",server:"eu2.sfgame.net",notes:"Lvl: 365",release:"x",previousDays:"79",previousName:"Halogen"},{category:"Dungeon",record:"Marv",classType:"Warrior",days:"176",playerName:"Kriegerherz",server:"w50.sfgame.net",notes:"Lvl:396",release:"x"},{category:"Dungeon",record:"Marv",classType:"Battlemage",days:"211",playerName:"Enduu",server:"w52.sfgame.net",notes:"Lvl:404",release:"x"},{category:"Dungeon",record:"Marv",classType:"Mage",days:"101",playerName:"CoeVoe",server:"s15.sfgame.eu",notes:"Lvl: 388",release:"x",previousDays:"106",previousName:"Zouzi10"},{category:"Dungeon",record:"Marv",classType:"Demonhunter",days:"176",playerName:"Zouzi10",server:"s11.sfgame.eu",notes:"LvL: 411",release:"x",previousDays:"205",previousName:"THEmaskedMAN"},{category:"Dungeon",record:"Marv",classType:"Assassin",days:"127",playerName:"ElonMuskow",server:"s20.sfgame.eu",notes:"LvL: 381",release:"x",previousDays:"262",previousName:"xTypischAndy"},{category:"Dungeon",record:"Marv",classType:"Druid",days:"162",playerName:"Turor",server:"w47.sfgame.net",notes:"LvL: 398",release:"x"},{category:"Dungeon",record:"Marv",classType:"Bard",days:"97",playerName:"fake COCA",server:"w58.sfgame.net",notes:"Lvl: 394",release:"x"},{category:"Dungeon",record:"Marv",classType:"Necromancer",days:"99",playerName:"Datalyzed",server:"s20.sfgame.eu",notes:"LvL: 375",release:"x",previousDays:"150",previousName:"CoeVoe"},{category:"Dungeon",record:"Marv",classType:"Paladin",days:"115",playerName:"Turor",server:"s17.sfgame.eu",notes:"LvL 382",release:"x"}],_v=[{category:"Level",achievement:"Level 100",date:"12/08/2009",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light Black Skull Fortress",date:"28/11/2009",name:"Ashyria",server:"s1de",notes:"Scout",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 200",date:"01/01/2010",name:"Kasimal",server:"s1de",notes:"Mage",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 300",date:"14/07/2011",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Stats",achievement:"10M Gold Skillcost",date:"23/01/2012",name:"Gumb",server:"s1de",notes:"Warrior, Renamed to Dvarin Dampfhammer",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Dungeons",achievement:"Light 13th floor",date:"02/09/2012",name:"Paepster",server:"s5de",notes:"Scout, Lvl 328",source:"https://youtu.be/uelXuIa2or4?t=45"},{category:"Level",achievement:"Level 350",date:"13/08/2013",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://forum.sfgame.de/node/59657?t=57681"},{category:"Guild",achievement:"50 Raids",date:"10/01/2014",name:"Die Wusels",server:"s1de",notes:"Best Players in 1 guild, Lvl ~342",source:"https://forum.sfgame.de/node/60939?t=58916"},{category:"Level",achievement:"Level 400",date:"25/11/2015",name:"Lichti82",server:"buffed de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/669559780961345538"},{category:"Dungeons",achievement:"Light Easteros",date:"30/07/2016",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 417, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/strategy-tactics-aa/1040-uk-s1-progress-easteros-dungeon-cleared-30-07-2016-world-s-2-to-clear-it/page4?postcount=49#post70158"},{category:"Dungeons",achievement:"Twister",date:"20/03/2017",name:"GeorgeKen",server:"s1co.uk",notes:"Scout, Lvl 449, Char deleted",source:"https://forum-int.sfgame.net/forum/board-archives/archive-game-support/general-aa/7008-twister-cleared-20-3-2017-world-first?t=6207"},{category:"Guild",achievement:"Hall of Knights 1000",date:"09/10/2017",name:"Game Masters",server:"s33pl",source:"https://www.youtube.com/watch?v=0FGtFJZWk90"},{category:"Level",achievement:"Level 500",date:"15/02/2018",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://twitter.com/sfgameofficial/status/964180787917664256"},{category:"Dungeons",achievement:"Shadow Easteros",date:"30/07/2018",name:"Manchurian",server:"s1de",notes:"Scout, Lvl 465",source:"https://forum.sfgame.de/node/77384?p=1217755#post1217755"},{category:"Features finished",achievement:"Gem Mine 100",date:"19/05/2019",name:"Strider",server:"s10us",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=85775#post85775"},{category:"Guild",achievement:"100 Raids",date:"26/09/2019",name:"Phoenix",server:"s1de",notes:"Beat it twice due to Rollback",source:"https://forum.sfgame.de/node/80544?p=1244699#post1244699"},{category:"Dungeons",achievement:"Shadow Magic School",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Dungeons",achievement:"Shadow Hemorridor",date:"07/10/2019",name:"Kay",server:"s5de",notes:"Mage, Lvl 518, Char deleted",source:"https://forum.sfgame.de/node/77384?p=1245463#post1245463"},{category:"Features finished",achievement:"Gold Pit 100",date:"28/09/2020",name:"Strider",server:"s10us",notes:"C-Spec s1de (deleted) was first",source:"https://forum-int.sfgame.net/forum/game-support/general/4640-s-f-tavern-talk?p=88447#post88447"},{category:"Level",achievement:"Level 500 Assassin",date:"18/10/2020",name:"Abaddon",server:"w23",source:"Char Description"},{category:"Features finished",achievement:"Arena Manager E151",date:"09/11/2020",name:"Strider",server:"s10us",source:"https://discord.com/channels/551152314329858048/626446099326173196/775491861712338954"},{category:"Level",achievement:"Level 600",date:"07/12/2020",name:"Don Serapio",server:"s7de",notes:"Warrior",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 600 Warrior",date:"07/12/2020",name:"Don Serapio",server:"s7de",source:"https://forum.sfgame.de/node/75904?p=1278383#post1278383"},{category:"Level",achievement:"Level 500 Battle Mage",date:"16/02/2021",name:"The Dark Mage",server:"s8cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/786608824219336754/811013527661838346"},{category:"Level",achievement:"Level 600 Scout",date:"20/03/2021",name:"DonZeus",server:"s6de",source:"https://forum.sfgame.de/node/75904?p=1290334#post1290334"},{category:"Level",achievement:"Level 600 Mage",date:"28/03/2021",name:"Kruemeline/boboline",server:"s14/s2de",notes:"Same day due to calendar lvlup",source:"https://forum.sfgame.de/node/75904?p=1290820#post1290820"},{category:"Stats",achievement:"300k Total Main",date:"08/04/2021",name:"Suichiro",server:"s1de",notes:"Mage, Lvl 565",source:"https://discord.com/channels/551152314329858048/551833536663912468/829749687241670697"},{category:"Stats",achievement:"200k Total Con",date:"01/05/2021",name:"Strider",server:"s10us",notes:"Scout, Lvl 566, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/837822110973165588"},{category:"Level",achievement:"Level 500 Berserker",date:"23/05/2021",name:"Borisz",server:"w32",notes:"Started 1 month after Berserker release",source:"https://discord.com/channels/551152314329858048/786608824219336754/846153839191130152"},{category:"Dungeons",achievement:"Shadow Olymp",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Dungeons",achievement:"Shadow Olymp (Mage)",date:"17/12/2021",name:"Nachteule",server:"s13de",notes:"Lvl 611",source:"https://youtu.be/FsFry82VFKo"},{category:"Level",achievement:"Level 500 Demon Hunter",date:"07/02/2022",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/786608824219336754/940212953544810526"},{category:"Dungeons",achievement:"Hellevator Stage 500",date:"04/03/2022",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 619",source:"https://discord.com/channels/551152314329858048/551833536663912468/949343121433583616"},{category:"Guild",achievement:"6 Million Helltokens",date:"13/03/2022",name:"Ritter des Anduril",server:"s1de",notes:"First Hellevator, easier stages",source:"https://fasy0901-s1-sfgame.jimdofree.com/infos-tipps-und-tricks/hellevator/"},{category:"Stats",achievement:"400k Total Main",date:"13/03/2022",name:"CHRISTIN",server:"s1de",notes:"Mage, Lvl 615",source:"https://discord.com/channels/551152314329858048/551833536663912468/952699439108210728"},{category:"Guild",achievement:"Hydra 20",date:"06/04/2022",name:"Phoenix",server:"s1de",notes:"Ritter des Anduril 1 day later",source:"https://forum.sfgame.de/node/81973?p=1493286#post1493286"},{category:"Dungeons",achievement:"Shadow Olymp (Warrior)",date:"11/05/2022",name:"Furaken",server:"s2fr",notes:"Lvl 641",source:"https://www.youtube.com/watch?v=_lPHtZzphj8"},{category:"Stats",achievement:"300k Total Con",date:"28/05/2022",name:"Strider",server:"s10us",notes:"Scout, Lvl 607, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/980011674729861150"},{category:"Level",achievement:"Level 500 Druid",date:"13/06/2022",name:"Incrementare",server:"s42de",source:"https://discord.com/channels/551152314329858048/786608824219336754/985673065436414002"},{category:"Dungeons",achievement:"Shadow Olymp (Scout)",date:"28/06/2022",name:"Strider",server:"s10us",notes:"Lvl 610",source:"https://discord.com/channels/551152314329858048/551833536663912468/991116241026687027"},{category:"Guild",achievement:"115 Raids",date:"10/08/2022",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=_QqMuwTR1Y8"},{category:"Level",achievement:"Level 600 Assassin",date:"29/10/2022",name:"Valadur",server:"s6cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1035857114771501157"},{category:"Guild",achievement:"Average Level 600",date:"31/10/2022",name:"Phoenix",server:"s1de",source:"https://discord.com/channels/551152314329858048/551833536663912468/1036553223944814682"},{category:"Level",achievement:"Level 600 Battle Mage",date:"25/11/2022",name:"The Dark Mage",server:"s8cz",notes:"Started on old server"},{category:"Stats",achievement:"500k Total Main",date:"19/02/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 647",source:"https://discord.com/channels/551152314329858048/551833536663912468/1077752082628624494"},{category:"Level",achievement:"Level 700",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Mage, DoktorDarm 2 days later, Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Mage",date:"18/05/2023",name:"Atzee",server:"s18de",notes:"Char deleted",source:"https://discord.com/channels/551152314329858048/551833536663912468/1108518595820011520"},{category:"Level",achievement:"Level 700 Warrior",date:"20/05/2023",name:"DoktorDarm",server:"s4de",source:"https://discord.com/channels/551152314329858048/551831352421515288/1109362315431780362"},{category:"Level",achievement:"Level 600 Berserker",date:"11/06/2023",name:"Masha",server:"s1cz",notes:"Started on old server",source:"https://discord.com/channels/551152314329858048/551833536663912468/1117502022653055026"},{category:"Stats",achievement:"400k Total Con",date:"01/07/2023",name:"Strider",server:"s10us",notes:"Scout, Lvl 653, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1124523597701074984"},{category:"Dungeons",achievement:"Shadow Monster Grotto 5/10",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Mage, Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Mage)",date:"10/09/2023",name:"Nachteule",server:"s13de",notes:"Lvl 682",source:"https://discord.com/channels/551152314329858048/551833536663912468/1150379615735513238"},{category:"Guild",achievement:"120 Raids",date:"17/09/2023",name:"Ritter des Anduril",server:"s1de",source:"https://www.youtube.com/watch?v=MX6Vw-oaq44"},{category:"Stats",achievement:"600k Total Main",date:"19/09/2023",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 666",source:"https://discord.com/channels/551152314329858048/551833536663912468/1154156886829047839"},{category:"Level",achievement:"Level 700 Scout",date:"06/10/2023",name:"DeTermit",server:"s6cz",source:"https://discord.com/channels/551152314329858048/551833536663912468/1159725534452924416"},{category:"Dungeons",achievement:"Shadow Olymp (Assassin)",date:"24/11/2023",name:"Caesar",server:"w23",notes:"Lvl 641",source:"https://discord.com/channels/551152314329858048/551833536663912468/1177590059516559420"},{category:"Level",achievement:"Level 600 Demon Hunter",date:"31/12/2023",name:" Bombay",server:"s41de",source:"https://discord.com/channels/551152314329858048/626446099326173196/1190798297800122499"},{category:"Guild",achievement:"Average Level 650",date:"13/01/2024",name:"ENDGEGNER",server:"f8",notes:"1 day after Fusion Server 8 launch",source:"https://discord.com/channels/551152314329858048/551833536663912468/1195718336760266853"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Warrior)",date:"05/02/2024",name:"Furaken",server:"f6",notes:"Lvl 706",source:"https://discord.com/channels/551152314329858048/551833536663912468/1204126538816299058"},{category:"Guild",achievement:"125 Raids",date:"28/02/2024",name:"GODS of LIGHT",server:"f8",source:"https://discord.com/channels/551152314329858048/551833536663912468/1212290444554412034"},{category:"Guild",achievement:"7 Million Helltokens",date:"01/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time 1 day faster",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213032961864372224"},{category:"Guild",achievement:"8 Million Helltokens",date:"02/03/2024",name:"Horizon",server:"f9",notes:"1 day advantage, GODS of LIGHT & Mirror of Time same time",source:"https://discord.com/channels/551152314329858048/551833536663912468/1213551211798855750"},{category:"Level",achievement:"Level 500 Bard",date:"10/03/2024",name:"Shinu",server:"w58",source:"https://discord.com/channels/551152314329858048/551833536663912468/1216228374457090171"},{category:"Stats",achievement:"700k Total Main",date:"04/04/2024",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1225904618844717129"},{category:"Level",achievement:"Level 600 Druid",date:"07/05/2024",name:"Incrementare",server:"s42de"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Scout)",date:"11/05/2024",name:"Strider",server:"f1",notes:"Lvl 681"},{category:"Dungeons",achievement:"Shadow Monster Grotto",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Mage, Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Dungeons",achievement:"Shadow MG (Mage)",date:"24/05/2024",name:"Nachteule",server:"f11de",notes:"Lvl 707, Dexterity Potion",source:"https://discord.com/channels/551152314329858048/551833536663912468/1243517823448252466"},{category:"Guild",achievement:"9 Million Helltokens",date:"01/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks, GODS of LIGHT same day",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246224670878076948"},{category:"Guild",achievement:"10 Million Helltokens",date:"02/06/2024",name:"ENDGEGNER",server:"f8",notes:"First Hellevator with Hell Attacks",source:"https://discord.com/channels/551152314329858048/551833536663912468/1246793059971235941"},{category:"Stats",achievement:"1 Million Total Stats",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Stats",achievement:"500k Total Con",date:"21/06/2024",name:"Strider",server:"f1",notes:"Scout, Lvl 685, 1:1 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Guild",achievement:"Average Level 675",date:"30/06/2024",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow Olymp (Battle Mage)",date:"29/08/2024",name:"DORZER",server:"f21",notes:"Lvl 651"},{category:"Stats",achievement:"800k Total Main",date:"07/09/2024",name:"Sturmhexe",server:"w11",notes:"Mage, Lvl 698",source:"https://discord.com/channels/551152314329858048/551833536663912468/1253778697304150138"},{category:"Dungeons",achievement:"Shadow MG (Warrior)",date:"09/09/2024",name:"Deinnachbar",server:"f8de",notes:"Lvl 726, Strength Potion, Live on twitch"},{category:"Dungeons",achievement:"Shadow MG (Scout)",date:"05/10/2024",name:"Manchurian",server:"f17de",notes:"Lvl 699",source:"https://discord.com/channels/551152314329858048/551833536663912468/1292160621609222236"},{category:"Guild",achievement:"130 Raids",date:"08/12/2024",name:"ENDGEGNER Alpha",server:"f11",notes:"48 players needed, avrg level 685",source:"https://youtu.be/O7Ss5jrRDiI?si=W8FpRXQdHVzWz6Rq"},{category:"Dungeons",achievement:"Shadow Olymp (Berserker)",date:"12/12/2024",name:"Rollin",server:"f22",notes:"Lvl 635",source:"https://discord.com/channels/551152314329858048/551833536663912468/1316735644604694609"},{category:"Level",achievement:"Level 750",date:"15/12/2024",name:"DoktorDarm",server:"f17de",notes:"Warrior"},{category:"Dungeons",achievement:"Shadow Olymp (Demon Hunter)",date:"05/01/2025",name:"Charles7",server:"f23",notes:"Lvl 612",source:"https://discord.com/channels/551152314329858048/551833536663912468/1325562596220338360"},{category:"Dungeons",achievement:"Sandstorm Stage 700",date:"24/01/2025",name:"Strider",server:"f1",notes:"Scout, Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Scout)",date:"24/01/2025",name:"Strider",server:"f1",notes:"Lvl 718"},{category:"Dungeons",achievement:"Sandstorm 700 (Mage)",date:"25/01/2025",name:"Nachteule",server:"f11",notes:"Lvl 742, No glove enchantment"},{category:"Guild",achievement:"Average Level 700",date:"26/01/2025",name:"ENDGEGNER",server:"f8",notes:"7 level lead",source:"https://discord.com/channels/551152314329858048/551833536663912468/1333157631195611188"},{category:"Stats",achievement:"900k Total Main",date:"25/02/2025",name:"Sturmhexe",server:"f20",notes:"Mage, Lvl 720",source:"https://discord.com/channels/551152314329858048/551833536663912468/1344054938518421554"},{category:"Guild",achievement:"11 Million Helltokens",date:"02/03/2025",name:"ENDGEGNER",server:"f8"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Assassin)",date:"05/03/2025",name:"Caesar",server:"f21",notes:"Lvl 688"},{category:"Level",achievement:"Level 700 Assassin",date:"07/03/2025",name:"Valadur",server:"f16"},{category:"Dungeons",achievement:"Sandstorm 700 (Warrior)",date:"06/04/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 758",source:"https://discord.com/channels/551152314329858048/551833536663912468/1358533675234623530"},{category:"Level",achievement:"Level 500 Necromancer",date:"21/04/2025",name:"Waldemar Meister",server:"f9",notes:"Started on old server"},{category:"Guild",achievement:"135 Raids",date:"11/05/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"47 players needed, avrg level 705",source:"https://youtu.be/6CrTYD_Mwa4?si=8UM2QOEtNbrwP_Qj&t=361"},{category:"Dungeons",achievement:"Shadow MG (Assassin)",date:"24/05/2025",name:"Hedges",server:"f21",notes:"Lvl 690, On a projector",source:"https://discord.com/channels/551152314329858048/551833536663912468/1375924629205418015"},{category:"Dungeons",achievement:"Sandstorm Stage 800",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Dungeons",achievement:"Sandstorm 800 (Scout)",date:"31/05/2025",name:"Strider",server:"maerwynn",notes:"Lvl 731",source:"https://www.youtube.com/watch?v=uPf9aHO9EkA"},{category:"Guild",achievement:"140 Raids",date:"16/06/2025",name:"ENDGEGNER Alpha",server:"f11",notes:"50 players needed, avrg level 708, 8 raids ahead",source:"https://youtu.be/_2DC8xYMaLI?si=kRY6C6HUROMq_IlC&t=418"},{category:"Stats",achievement:"600k Total Con",date:"28/06/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 736, 36:64 ratio",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389390871228846205"},{category:"Level",achievement:"Level 700 Battle Mage",date:"30/06/2025",name:"The Dark Mage",server:"f16",source:"https://discord.com/channels/551152314329858048/551833536663912468/1389084514977845309"},{category:"Stats",achievement:"1 Mio any Stat",date:"05/08/2025",name:"Sturmhexe",server:"f20",notes:"Intelligence",source:"https://discord.com/channels/551152314329858048/551833536663912468/1402067370918543500"},{category:"Dungeons",achievement:"Sandstorm 800 (Mage)",date:"16/08/2025",name:"Nachteule",server:"f11",notes:"Lvl 778"},{category:"Dungeons",achievement:"Shadow MG 5/10 (Berserker)",date:"21/09/2025",name:"Rollin",server:"f22",notes:"Lvl 684",source:"https://discord.com/channels/551152314329858048/551833536663912468/1419310679776825485"},{category:"Level",achievement:"Level 700 Berserker",date:"27/09/2025",name:"ch4rlie",server:"f22",source:"https://discord.com/channels/551152314329858048/551833536663912468/1421262001052844133"},{category:"Dungeons",achievement:"Sandstorm Stage 900",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Scout, Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 900 (Scout)",date:"28/09/2025",name:"Strider",server:"maerwynn",notes:"Lvl 760"},{category:"Dungeons",achievement:"Sandstorm 800 (Warrior)",date:"03/10/2025",name:"Deinnachbar",server:"f8",notes:"Lvl 792",source:"https://discord.com/channels/551152314329858048/551833536663912468/1423475693043453952"},{category:"Level",achievement:"Level 600 Bard",date:"18/10/2025",name:"Shinu",server:"f27",notes:"From w58"},{category:"Stats",achievement:"700k Total Con",date:"05/11/2025",name:"Taranin",server:"f18",notes:"Warrior, Lvl 767, 36:64 ratio"}],soe={infoCard:"1LpjOIafDHg1m6Il1H37gnujPph8tR6CY"},noe=t=>soe[t],roe=(t,e=64)=>{var i;const s=noe(t),r=Kl(s);return r&&(i=sr(r,e))!=null?i:null},ioe="_recordsPage_kdw96_1",aoe="_navArea_kdw96_15",ooe="_tabList_kdw96_27",loe="_tabButton_kdw96_55",coe="_tabButtonActive_kdw96_101",doe="_sectionContent_kdw96_115",uoe="_placeholderPanel_kdw96_127",hoe="_placeholderTitle_kdw96_143",moe="_placeholderText_kdw96_157",poe="_milestoneSection_kdw96_171",foe="_sectionHeader_kdw96_183",goe="_filterBar_kdw96_197",xoe="_filterButtons_kdw96_231",yoe="_filterButton_kdw96_231",voe="_filterButtonActive_kdw96_295",boe="_filterSelectWrapper_kdw96_309",_oe="_filterLabel_kdw96_321",woe="_filterSelect_kdw96_309",joe="_emptyFilterMessage_kdw96_355",Soe="_currentSection_kdw96_369",Noe="_currentGrid_kdw96_381",koe="_currentCard_kdw96_393",Coe="_categoryLabel_kdw96_419",Toe="_recordTitle_kdw96_433",Eoe="_currentDetails_kdw96_445",Aoe="_notes_kdw96_457",Ioe="_infoPanel_kdw96_469",Poe="_infoCard_kdw96_481",Roe="_disclaimerCard_kdw96_483",Loe="_infoHeader_kdw96_525",Doe="_infoAuthor_kdw96_539",Moe="_authorName_kdw96_557",Foe="_authorBadge_kdw96_565",Boe="_infoAuthorIcon_kdw96_591",$oe="_infoDate_kdw96_623",Ooe="_infoBody_kdw96_633",Voe="_infoTitle_kdw96_645",Uoe="_infoLink_kdw96_665",zoe="_milestoneGrid_kdw96_719",Hoe="_milestoneCard_kdw96_731",Goe="_milestoneCategory_kdw96_757",Woe="_milestoneTitle_kdw96_771",qoe="_milestoneDetails_kdw96_785",Koe="_detailRow_kdw96_797",Qoe="_detailLabel_kdw96_809",Xoe="_detailValue_kdw96_823",Yoe="_sourceLink_kdw96_833",Joe="_emptyState_kdw96_855",Ue={recordsPage:ioe,navArea:aoe,tabList:ooe,tabButton:loe,tabButtonActive:coe,sectionContent:doe,placeholderPanel:uoe,placeholderTitle:hoe,placeholderText:moe,milestoneSection:poe,sectionHeader:foe,filterBar:goe,filterButtons:xoe,filterButton:yoe,filterButtonActive:voe,filterSelectWrapper:boe,filterLabel:_oe,filterSelect:woe,emptyFilterMessage:joe,currentSection:Soe,currentGrid:Noe,currentCard:koe,categoryLabel:Coe,recordTitle:Toe,currentDetails:Eoe,notes:Aoe,infoPanel:Ioe,infoCard:Poe,disclaimerCard:Roe,infoHeader:Loe,infoAuthor:Doe,authorName:Moe,authorBadge:Foe,infoAuthorIcon:Boe,infoDate:$oe,infoBody:Ooe,infoTitle:Voe,infoLink:Uoe,milestoneGrid:zoe,milestoneCard:Hoe,milestoneCategory:Goe,milestoneTitle:Woe,milestoneDetails:qoe,detailRow:Koe,detailLabel:Qoe,detailValue:Xoe,sourceLink:Yoe,emptyState:Joe},Zoe=[{key:"current",label:"Current Records"},{key:"broken",label:"Broken Records"},{key:"milestones",label:"Milestones"}],ele={current:{title:"Current Records",description:"Live records that keep evolving with every community session. We will surface the verified winners and their stats here.",hint:"Stay tuned for the data rollout in the next update."},broken:{title:"Broken Records",description:"Historical benchmarks that were overtaken or retired. We keep them for reference and celebration.",hint:"If you have a record to archive, ping the Community team."}},tle=({title:t,description:e,hint:s})=>n.jsxs("article",{className:Ue.placeholderPanel,children:[n.jsx("h2",{className:Ue.placeholderTitle,children:t}),n.jsx("p",{className:Ue.placeholderText,children:e}),s&&n.jsx("p",{className:Ue.emptyState,children:s})]}),sle=()=>{const[t,e]=E.useState("all"),s=E.useMemo(()=>{const a=new Set,l=[];for(const d of _v)a.has(d.category)||(a.add(d.category),l.push(d.category));return["all",...l]},[]),r=t==="all"?_v:_v.filter(a=>a.category===t),i=a=>{e(a)};return n.jsxs("section",{className:Ue.milestoneSection,"aria-label":"Records milestones",children:[n.jsxs("div",{className:Ue.sectionHeader,children:[n.jsx("p",{children:"Milestones"}),n.jsx("h2",{children:"First-to achievements the community still celebrates"})]}),n.jsxs("div",{className:Ue.filterBar,children:[n.jsx("div",{className:Ue.filterButtons,children:s.map(a=>n.jsx("button",{type:"button",className:[Ue.filterButton,t===a&&Ue.filterButtonActive].filter(Boolean).join(" "),onClick:()=>i(a),"aria-pressed":t===a,children:a==="all"?"All Categories":a},a))}),n.jsxs("label",{className:Ue.filterSelectWrapper,children:[n.jsx("span",{className:Ue.filterLabel,children:"Category"}),n.jsx("select",{value:t,onChange:a=>i(a.target.value),className:Ue.filterSelect,children:s.map(a=>n.jsx("option",{value:a,children:a==="all"?"All Categories":a},a))})]})]}),r.length===0?n.jsx("p",{className:Ue.emptyFilterMessage,children:"No milestones fall into this category yet."}):n.jsx("div",{className:Ue.milestoneGrid,children:r.map(a=>n.jsxs("article",{className:Ue.milestoneCard,children:[n.jsx("span",{className:Ue.milestoneCategory,children:a.category}),n.jsx("h3",{className:Ue.milestoneTitle,children:a.achievement}),n.jsxs("div",{className:Ue.milestoneDetails,children:[n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Name"}),n.jsx("span",{className:Ue.detailValue,children:a.name})]}),n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Server"}),n.jsx("span",{className:Ue.detailValue,children:a.server})]}),n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Date"}),n.jsx("span",{className:Ue.detailValue,children:a.date})]}),a.notes&&n.jsx("p",{className:Ue.notes,children:a.notes}),a.source&&n.jsx("a",{href:a.source,target:"_blank",rel:"noreferrer",className:Ue.sourceLink,children:"Source"})]})]},`${a.achievement}-${a.name}`))})]})},nle=()=>n.jsxs("section",{className:Ue.currentSection,"aria-label":"Current community records",children:[n.jsxs("div",{className:Ue.sectionHeader,children:[n.jsx("p",{children:"Current Records"}),n.jsx("h2",{children:"The latest verified achievements"})]}),n.jsx("div",{className:Ue.currentGrid,children:toe.map((t,e)=>n.jsxs("article",{className:Ue.currentCard,children:[n.jsx("span",{className:Ue.categoryLabel,children:t.category}),n.jsx("h3",{className:Ue.recordTitle,children:t.record}),n.jsxs("div",{className:Ue.currentDetails,children:[n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Class"}),n.jsx("span",{className:Ue.detailValue,children:t.classType})]}),n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Player"}),n.jsx("span",{className:Ue.detailValue,children:t.playerName})]}),n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Server"}),n.jsx("span",{className:Ue.detailValue,children:t.server})]}),n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Days"}),n.jsx("span",{className:Ue.detailValue,children:t.days})]}),t.release&&n.jsxs("div",{className:Ue.detailRow,children:[n.jsx("span",{className:Ue.detailLabel,children:"Release"}),n.jsx("span",{className:Ue.detailValue,children:t.release})]}),(t.previousDays||t.previousName)&&n.jsxs("p",{className:Ue.notes,children:["Previous: ",t.previousDays?`${t.previousDays} days`:""," ",t.previousName?`(${t.previousName})`:""]}),t.notes&&n.jsx("p",{className:Ue.notes,children:t.notes})]})]},`${t.category}-${t.playerName}-${e}`))})]}),Ru={title:"Record board",paragraphs:["This is an unofficial collection of records achieved in Shakes and Fidget.","Due to the fact that we need to verify all records the posted days are the days between the release of the server and the achieving of the record. Records that are obtained with a new char on an old server are not counted.","If you achieved a record that you want to have listed and verified please message @aszu or @Zeraffim on Discord."],linkLabel:"Link to the record board:",linkUrl:"https://cutt.ly/2hTSpso"};function vA(){const[t,e]=E.useState("current"),s=roe("infoCard",32),r=()=>{if(t==="current")return n.jsx(nle,{});if(t==="milestones")return n.jsx(sle,{});const i=ele[t];return n.jsx(tle,{title:i.title,description:i.description,hint:i.hint})};return n.jsxs("section",{className:Ue.recordsPage,children:[n.jsx(lA,{title:"Records",meta:"Community Hub",description:"Current benchmarks, past triumphs and milestone-firsts from our community."}),n.jsxs("div",{className:Ue.infoPanel,children:[n.jsxs("div",{className:Ue.infoCard,children:[n.jsxs("div",{className:Ue.infoHeader,children:[n.jsxs("div",{className:Ue.infoAuthor,children:[s?n.jsx("img",{src:s,alt:"Community Data",className:Ue.infoAuthorIcon}):null,n.jsx("span",{className:Ue.authorName,children:"S&F Tavern Info"}),n.jsx("a",{href:"https://discord.gg/sftavern",target:"_blank",rel:"noreferrer",className:Ue.authorBadge,children:"Discord"})]}),n.jsx("span",{className:Ue.infoDate,children:"11.12.2020 14:08"})]}),n.jsxs("div",{className:Ue.infoBody,children:[n.jsx("h3",{className:Ue.infoTitle,children:Ru.title}),Ru.paragraphs.map(i=>n.jsx("p",{children:i},i))]}),n.jsxs("div",{className:Ue.infoLink,children:[n.jsx("span",{children:Ru.linkLabel}),n.jsx("a",{href:Ru.linkUrl,target:"_blank",rel:"noreferrer",children:Ru.linkUrl})]})]}),n.jsxs("div",{className:Ue.disclaimerCard,children:[n.jsx("h3",{className:Ue.infoTitle,children:"Disclaimer"}),n.jsx("p",{children:"The milestone data is sourced from the shared Milestones (First to) Google Sheet and curated by the Community Data Stewards. If you spot missing entries or have a verified source, please ping the Community Hub team so we can keep the list accurate."})]})]}),n.jsx("div",{className:Ue.navArea,children:n.jsx("nav",{className:Ue.tabList,"aria-label":"Records navigation",children:Zoe.map(i=>n.jsx("button",{type:"button",className:`${Ue.tabButton} ${t===i.key?Ue.tabButtonActive:""}`,"aria-pressed":t===i.key,onClick:()=>e(i.key),children:i.label},i.key))})}),n.jsx("div",{className:Ue.sectionContent,children:r()})]})}const rle={creators:pA,scans:fA,predictions:gA,news:xA,records:vA,feedback:yA};function ile(){const[t]=Yl(),e=t.get("tab")||"",s=rle[e];return n.jsxs(Pt,{children:[n.jsx("div",{className:Hc.topWrap,children:n.jsx(Dae,{logoSrc:Uae})}),n.jsx("div",{className:Hc.divider}),n.jsx("div",{className:Hc.contentArea,children:s?n.jsx(s,{}):n.jsxs("div",{className:Hc.placeholder,children:[n.jsx("h2",{className:Hc.placeholderTitle,children:"Community"}),n.jsx("p",{className:Hc.placeholderText,children:"Whle oben eine Kategorie, um die Inhalte hier anzuzeigen."})]})})]})}function ale(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12,marginTop:12},children:[n.jsxs(rs,{to:"/scans/latest",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Letzter Scan"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Neueste hochgeladene Daten"})]}),n.jsxs(rs,{to:"/scans/archive",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Archiv"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"Aeltere Scans & Verlauf"})]}),n.jsxs(rs,{to:"/upload-center",style:{display:"block",padding:"14px 16px",background:"var(--tile)",border:"1px solid var(--line)",borderRadius:12,textDecoration:"none",color:"var(--text)"},children:[n.jsx("div",{style:{fontWeight:700,color:"var(--title)"},children:"Upload Center"}),n.jsx("div",{style:{opacity:.75,marginTop:4},children:"CSV Import & lokale Vorschau (Spieler & Gilden)"})]})]})]})}function ole(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Letzter Scan"}),n.jsx("p",{style:{opacity:.8},children:"Hier erscheinen die Daten des zuletzt hochgeladenen Scans (Platzhalter)."})]})}function lle(){return n.jsxs("section",{style:{padding:16},children:[n.jsx("h1",{children:"Scans  Archiv"}),n.jsx("p",{style:{opacity:.8},children:"Hier kannst du ltere Scans durchsuchen (Platzhalter)."})]})}function cle(){return n.jsx(Pt,{title:"Guild Hub",subtitle:"Planner, Fusion, Waitlist & mehr",actions:n.jsx("button",{className:"rounded-2xl border px-4 py-2 text-sm text-white/90 hover:bg-white/5",style:{borderColor:"#2B4C73"},children:"Neu anlegen"}),left:n.jsx(dle,{}),right:n.jsx(ule,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42",color:"#F5F9FF"},children:[n.jsx("h2",{className:"text-sm mb-1",children:"Willkommen im Guild Hub"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Waehle links einen Bereich (Planner, Fusion, Waitlist, etc.) oder nutze unten die Kacheln."}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[n.jsx(rs,{to:"/guild-hub/fusion-planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"linear-gradient(135deg, rgba(43, 109, 224, 0.22), rgba(43, 109, 224, 0.08))",border:"1px solid #2B6DE0",color:"#F5F9FF"},children:"Zum Fusion Planner"}),n.jsx(rs,{to:"/guild-hub/planner",className:"rounded-xl px-3 py-2 text-xs font-semibold no-underline",style:{background:"#152A42",border:"1px solid #2B4C73",color:"#F5F9FF"},children:"Guild Planner oeffnen"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(zp,{to:"/guild-hub/planner",title:"Planner",desc:"Raids, Events, Aufgaben"}),n.jsx(zp,{to:"/guild-hub/fusion-planner",title:"Fusion Planner",desc:"Setups & Szenarien"}),n.jsx(zp,{to:"/guild-hub/compare-guilds",title:"Gildenvergleich",desc:"Kennzahlen nebeneinander legen"}),n.jsx(zp,{to:"/guild-hub/waitlist",title:"Waitlist",desc:"Bewerber & Slots"})]})]})})}function dle(){return n.jsxs("nav",{className:"space-y-2 text-sm",children:[n.jsx(Lu,{to:"/guild-hub/planner",children:"Planner"}),n.jsx(Lu,{to:"/guild-hub/fusion-planner",children:"Fusion Planner"}),n.jsx(Lu,{to:"/guild-hub/compare-guilds",children:"Gildenvergleich"}),n.jsx(Lu,{to:"/guild-hub/waitlist",children:"Waitlist"}),n.jsx(Lu,{to:"/guild-hub/settings",children:"Einstellungen"})]})}function ule(){return n.jsxs("aside",{className:"space-y-3 text-sm",children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Hinweis"}),n.jsx("p",{className:"text-xs",style:{color:"#B0C4D9"},children:"Rollen & Rechte werden spaeter hier gesteuert."})]})}function zp({to:t,title:e,desc:s}){return n.jsxs(rs,{to:t,className:"block rounded-2xl border p-4 no-underline",style:{background:"#152A42",borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("div",{className:"font-semibold text-[#F5F9FF]",children:e}),s?n.jsx("div",{className:"mt-1 text-sm opacity-75",children:s}):null]})}function Lu({to:t,children:e}){return n.jsx(Ns,{to:t,className:({isActive:s})=>`block rounded-lg border px-3 py-2 no-underline ${s?"font-semibold":""}`,style:({isActive:s})=>({borderColor:s?"#2B6DE0":"#2B4C73",background:s?"#1C3554":"#152A42",color:"#FFFFFF",boxShadow:s?"0 0 0 1px rgba(43, 109, 224, 0.4)":void 0}),children:e})}const hle="_page_1mlmy_1",mle="_header_1mlmy_13",ple="_headerStack_1mlmy_25",fle="_kicker_1mlmy_37",gle="_title_1mlmy_53",xle="_headerActions_1mlmy_65",yle="_primaryAction_1mlmy_77",vle="_secondaryAction_1mlmy_79",ble="_infoStrip_1mlmy_127",_le="_infoBlock_1mlmy_147",wle="_infoLabel_1mlmy_161",jle="_freshnessWrapper_1mlmy_181",Sle="_freshnessBadge_1mlmy_189",Nle="_badge_f0_1mlmy_213",kle="_badge_f1_1mlmy_215",Cle="_badge_f2_1mlmy_217",Tle="_badge_f3_1mlmy_219",Ele="_badge_f4_1mlmy_221",Ale="_badge_f5_1mlmy_223",Ile="_badge_f6_1mlmy_225",Ple="_badge_f7_1mlmy_227",Rle="_badge_unknown_1mlmy_229",Lle="_popover_1mlmy_233",Dle="_popoverLabel_1mlmy_265",Mle="_filterToolbar_1mlmy_275",Fle="_filterSheetButton_1mlmy_285",Ble="_inlineFilters_1mlmy_303",$le="_searchInput_1mlmy_315",Ole="_select_1mlmy_317",Vle="_ownerGroup_1mlmy_335",Ule="_ownerChip_1mlmy_347",zle="_ownerChipActive_1mlmy_365",Hle="_sortGroup_1mlmy_375",Gle="_sortLabel_1mlmy_387",Wle="_directionButton_1mlmy_397",qle="_listBody_1mlmy_415",Kle="_tableWrapper_1mlmy_427",Qle="_table_1mlmy_427",Xle="_stickyColumn_1mlmy_481",Yle="_rowTitleButton_1mlmy_495",Jle="_tableStatus_1mlmy_513",Zle="_cardList_1mlmy_533",ece="_card_1mlmy_533",tce="_cardHeader_1mlmy_565",sce="_cardTitle_1mlmy_577",nce="_cardMeta_1mlmy_595",rce="_cardDescription_1mlmy_611",ice="_cardFooter_1mlmy_623",ace="_cardLabel_1mlmy_639",oce="_scanBadge_1mlmy_649",lce="_emptyState_1mlmy_665",cce="_sheetBackdrop_1mlmy_681",dce="_sheet_1mlmy_681",uce="_sheetHandle_1mlmy_721",hce="_sheetBody_1mlmy_739",mce="_sheetLabel_1mlmy_755",pce="_sheetActions_1mlmy_793",fce="_overlay_1mlmy_807",gce="_panel_1mlmy_825",xce="_modal_1mlmy_851",yce="_drawer_1mlmy_861",vce="_panelHeader_1mlmy_869",bce="_panelControls_1mlmy_883",_ce="_panelDescription_1mlmy_913",wce="_detailGrid_1mlmy_925",jce="_panelFooter_1mlmy_957",Sce="_formOverlay_1mlmy_969",Nce="_formPanel_1mlmy_991",kce="_formGrid_1mlmy_1017",Cce="_menuWrapper_1mlmy_1029",Tce="_dotsButton_1mlmy_1037",Ece="_menu_1mlmy_1029",Ace="_pagination_1mlmy_1109",Ce={page:hle,header:mle,headerStack:ple,kicker:fle,title:gle,headerActions:xle,primaryAction:yle,secondaryAction:vle,infoStrip:ble,infoBlock:_le,infoLabel:wle,freshnessWrapper:jle,freshnessBadge:Sle,badge_f0:Nle,badge_f1:kle,badge_f2:Cle,badge_f3:Tle,badge_f4:Ele,badge_f5:Ale,badge_f6:Ile,badge_f7:Ple,badge_unknown:Rle,popover:Lle,popoverLabel:Dle,filterToolbar:Mle,filterSheetButton:Fle,inlineFilters:Ble,searchInput:$le,select:Ole,ownerGroup:Vle,ownerChip:Ule,ownerChipActive:zle,sortGroup:Hle,sortLabel:Gle,directionButton:Wle,listBody:qle,tableWrapper:Kle,table:Qle,stickyColumn:Xle,rowTitleButton:Yle,tableStatus:Jle,cardList:Zle,card:ece,cardHeader:tce,cardTitle:sce,cardMeta:nce,cardDescription:rce,cardFooter:ice,cardLabel:ace,scanBadge:oce,emptyState:lce,sheetBackdrop:cce,sheet:dce,sheetHandle:uce,sheetBody:hce,sheetLabel:mce,sheetActions:pce,overlay:fce,panel:gce,modal:xce,drawer:yce,panelHeader:vce,panelControls:bce,panelDescription:_ce,detailGrid:wce,panelFooter:jce,formOverlay:Sce,formPanel:Nce,formGrid:kce,menuWrapper:Cce,dotsButton:Tce,menu:Ece,pagination:Ace};function Ice(){var ne;const[t,e]=J.useState(vX),[s,r]=J.useState(uv),[i,a]=J.useState(uv),l=Cd(s.q,300),d=J.useMemo(()=>{const U=bX(t,s,l);return _X(U,s.sort,s.dir)},[t,s,l]),u=J.useMemo(()=>wX(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),m=J.useMemo(()=>Array.from(new Set(t.map(U=>U.owner))),[t]),g=Td("(min-width: 768px)"),v=Td("(min-width: 1024px)"),[b,N]=J.useState(!1),[S,C]=J.useState(null),R=(ne=t.find(U=>U.id===S))!=null?ne:null,M=J.useRef(null);Ed(M,!!R&&!v);const[T,y]=J.useState(null),[w,D]=J.useState(!1),k=J.useRef(null);Ed(k,w);const _=J.useMemo(()=>jX(t),[t]),A=J.useMemo(()=>_?Ch(_.nextUpdateAt,Date.now()):"",[_]),F=g,P=v,B=n.jsxs("div",{className:Ce.headerActions,children:[n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:()=>{y(null),D(!0)},children:"Neuer Eintrag"}),!g&&n.jsx("button",{type:"button",className:Ce.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>N(!0),children:"Filter"})]}),$=U=>{const Z=NN(U);r(Z),a(Z)},W=(U,Z)=>{const he=NN({...s,[U]:Z,page:U==="page"||U==="pageSize"?Z:1});$(he)},H=()=>{$(i),N(!1)},q=()=>{$(uv),N(!1)},K=(U,Z=!1)=>{if(Z)a(he=>{const fe=he.owner.includes(U)?he.owner.filter(be=>be!==U):[...he.owner,U];return{...he,owner:fe}});else{const ie=s.owner.includes(U)?s.owner.filter(fe=>fe!==U):[...s.owner,U];W("owner",ie)}},G=(U,Z)=>{e(he=>he.map(ie=>ie.id===U?{...ie,status:Z,updatedAt:new Date().toISOString()}:ie))},te=U=>{e(Z=>Z.some(ie=>ie.id===U.id)?Z.map(ie=>ie.id===U.id?U:ie):[U,...Z]),D(!1)};return n.jsxs(Pt,{title:"Guild Hub",subtitle:"Planner",centerFramed:!1,children:[n.jsxs("div",{className:Ce.page,children:[n.jsxs("header",{className:Ce.header,children:[n.jsxs("div",{className:Ce.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.kicker,children:"Deployment"}),n.jsx("h1",{className:Ce.title,children:"Planer"})]}),B]}),n.jsxs("div",{className:Ce.infoStrip,children:[n.jsxs("div",{className:Ce.infoBlock,children:[n.jsx("span",{className:Ce.infoLabel,children:"Offen"}),n.jsx("strong",{children:d.filter(U=>U.status==="open").length})]}),n.jsxs("div",{className:Ce.infoBlock,children:[n.jsx("span",{className:Ce.infoLabel,children:"In Arbeit"}),n.jsx("strong",{children:d.filter(U=>U.status==="in_progress").length})]}),_&&n.jsx(Pce,{code:_.freshness,label:Ob[_.freshness],updatedAt:_.lastScanAt,nextUpdateAt:_.nextUpdateAt,countdown:A})]})]}),n.jsx("section",{className:Ce.filterToolbar,children:g?n.jsx(Rce,{filters:s,owners:m,onChange:W,onOwnerToggle:U=>K(U,!1)}):n.jsx("button",{type:"button",className:Ce.filterSheetButton,onClick:()=>N(!0),"aria-haspopup":"dialog",children:"Filter & Sortierung"})}),n.jsx("section",{className:Ce.listBody,children:F?n.jsx(Lce,{items:u,sort:s.sort,dir:s.dir,onSortChange:U=>{const Z=s.sort===U&&s.dir==="asc"?"desc":"asc";W("sort",U),W("dir",Z)},onSelect:U=>C(U.id),onStatusChange:G,onEdit:U=>{y(U),D(!0)}}):n.jsx(Dce,{items:u,onSelect:U=>C(U.id),onStatusChange:G,onEdit:U=>{y(U),D(!0)}})}),n.jsx(Fce,{page:s.page,totalPages:h,onChange:U=>W("page",U)})]}),b&&n.jsx(Mce,{filters:i,owners:m,onChange:a,onOwnerToggle:U=>K(U,!0),onClose:()=>N(!1),onApply:H,onReset:q}),R&&n.jsx(_A,{ref:M,item:R,mode:P?"drawer":"modal",onClose:()=>C(null),onEdit:()=>{y(R),D(!0),C(null)},onStatusChange:G}),w&&n.jsx(wA,{ref:k,owners:m.length?m:sA,item:T,onClose:()=>D(!1),onSubmit:te})]})}function Pce({code:t,label:e,updatedAt:s,nextUpdateAt:r,countdown:i}){var d;const[a,l]=J.useState(!1);return n.jsxs("div",{className:Ce.freshnessWrapper,children:[n.jsx("button",{type:"button",className:`${Ce.freshnessBadge} ${(d=Ce[`badge_${t}`])!=null?d:""}`,"aria-label":`Freshness ${e}`,onClick:()=>l(u=>!u),children:e}),a&&n.jsxs("div",{className:Ce.popover,role:"dialog","aria-label":"Freshness Details",children:[n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Zuletzt gescannt"}),n.jsx("strong",{children:ia(s)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Naechster Scan"}),n.jsx("strong",{children:ia(r)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Ce.popoverLabel,children:"Countdown"}),n.jsx("strong",{children:i})]})]})]})}function Rce({filters:t,owners:e,onChange:s,onOwnerToggle:r}){return n.jsxs("div",{className:Ce.inlineFilters,children:[n.jsx("input",{type:"search",name:"plannerSearch","aria-label":"Planner Suche",className:Ce.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>s("q",i.target.value)}),n.jsxs("select",{className:Ce.select,name:"plannerType","aria-label":"Planner Typ",value:t.type,onChange:i=>s("type",i.target.value),children:[n.jsx("option",{value:"all",children:"Typ (alle)"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]}),n.jsxs("select",{className:Ce.select,name:"plannerStatus","aria-label":"Planner Status",value:t.status,onChange:i=>s("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("select",{className:Ce.select,name:"plannerRange","aria-label":"Planner Zeitraum",value:t.range,onChange:i=>s("range",i.target.value),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]}),n.jsx("div",{className:Ce.ownerGroup,children:e.map(i=>{const a=t.owner.includes(i);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${a?Ce.ownerChipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Ce.sortGroup,children:[n.jsx("label",{htmlFor:"planner-sort",className:Ce.sortLabel,children:"Sortieren"}),n.jsxs("select",{id:"planner-sort",name:"plannerSort",className:Ce.select,value:t.sort,onChange:i=>s("sort",i.target.value),children:[n.jsx("option",{value:"dueAt",children:"Faelligkeitsdatum"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"}),n.jsx("option",{value:"priority",children:"Prioritaet"}),n.jsx("option",{value:"title",children:"Titel"})]}),n.jsx("button",{type:"button","aria-label":"Sortierrichtung wechseln",className:Ce.directionButton,onClick:()=>s("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"":""})]})]})}function Lce({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a,onEdit:l}){const d=u=>e===u?s==="asc"?" ":" ":"";return t.length===0?n.jsx(bA,{}):n.jsx("div",{className:Ce.tableWrapper,children:n.jsxs("table",{className:Ce.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Ce.stickyColumn,onClick:()=>r("title"),children:["Titel",d("title")]}),n.jsx("th",{children:"Typ"}),n.jsx("th",{children:"Owner"}),n.jsxs("th",{onClick:()=>r("dueAt"),children:["Termin",d("dueAt")]}),n.jsx("th",{children:"Status"}),n.jsxs("th",{onClick:()=>r("updatedAt"),children:["Aktualisiert",d("updatedAt")]}),n.jsx("th",{})]})}),n.jsx("tbody",{children:t.map(u=>n.jsxs("tr",{children:[n.jsx("td",{className:Ce.stickyColumn,children:n.jsx("button",{type:"button",className:Ce.rowTitleButton,onClick:()=>i(u),children:u.title})}),n.jsx("td",{children:$b[u.type]}),n.jsx("td",{children:u.owner}),n.jsx("td",{children:ia(u.dueAt)}),n.jsx("td",{children:n.jsxs("select",{name:`plannerStatus-${u.id}`,"aria-label":`Status fuer ${u.title}`,className:Ce.tableStatus,value:u.status,onChange:h=>a(u.id,h.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})}),n.jsx("td",{children:em(u.updatedAt)}),n.jsx("td",{children:n.jsx(jA,{onEdit:()=>l(u),onComplete:()=>a(u.id,"done")})})]},u.id))})]})})}function Dce({items:t,onSelect:e,onStatusChange:s,onEdit:r}){return t.length===0?n.jsx(bA,{}):n.jsx("div",{className:Ce.cardList,children:t.map(i=>n.jsxs("article",{className:Ce.card,children:[n.jsxs("div",{className:Ce.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Ce.cardTitle,onClick:()=>e(i),children:i.title}),n.jsxs("div",{className:Ce.cardMeta,children:[n.jsx("span",{children:$b[i.type]}),n.jsx("span",{children:xX[i.status]}),n.jsxs("span",{children:["Due ",ia(i.dueAt)]})]})]}),n.jsx(jA,{onEdit:()=>r(i),onComplete:()=>s(i.id,"done")})]}),n.jsx("p",{className:Ce.cardDescription,children:i.description}),n.jsxs("div",{className:Ce.cardFooter,children:[n.jsxs("div",{children:[n.jsx("span",{className:Ce.cardLabel,children:"Owner"}),n.jsx("strong",{children:i.owner})]}),n.jsxs("select",{name:`plannerCardStatus-${i.id}`,"aria-label":`Status fuer ${i.title}`,className:Ce.tableStatus,value:i.status,onChange:a=>s(i.id,a.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]}),n.jsxs("span",{className:Ce.scanBadge,children:["Letzter Scan ",em(i.lastScanAt)]})]})]},i.id))})}function bA(){return n.jsx("div",{className:Ce.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Mce({filters:t,owners:e,onChange:s,onOwnerToggle:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Ce.sheetBackdrop,role:"presentation",onClick:i,children:n.jsxs("div",{className:Ce.sheet,role:"dialog","aria-label":"Filter",onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Ce.sheetHandle}),n.jsxs("div",{className:Ce.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Ce.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"plannerSheetSearch",value:t.q,onChange:d=>s(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Typ",n.jsxs("select",{name:"plannerSheetType",value:t.type,onChange:d=>s(u=>({...u,type:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Status",n.jsxs("select",{name:"plannerSheetStatus",value:t.status,onChange:d=>s(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Zeitraum",n.jsxs("select",{name:"plannerSheetRange",value:t.range,onChange:d=>s(u=>({...u,range:d.target.value})),children:[n.jsx("option",{value:"7d",children:"7 Tage"}),n.jsx("option",{value:"30d",children:"30 Tage"}),n.jsx("option",{value:"90d",children:"90 Tage"}),n.jsx("option",{value:"all",children:"Alle"})]})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Owner",n.jsx("div",{className:Ce.ownerGroup,children:e.map(d=>{const u=t.owner.includes(d);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${u?Ce.ownerChipActive:""}`,onClick:()=>r(d),children:d},d)})})]})]}),n.jsxs("div",{className:Ce.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const _A=J.forwardRef(({item:t,mode:e,onClose:s,onEdit:r,onStatusChange:i},a)=>n.jsx("div",{className:Ce.overlay,children:n.jsxs("div",{ref:a,className:`${Ce.panel} ${e==="drawer"?Ce.drawer:Ce.modal}`,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.cardLabel,children:$b[t.type]}),n.jsx("h2",{children:t.title})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("div",{className:Ce.panelControls,children:[n.jsxs("label",{children:["Status",n.jsxs("select",{value:t.status,onChange:l=>i(t.id,l.target.value),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{disabled:!0,value:t.priority,children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsx("p",{className:Ce.panelDescription,children:t.description}),n.jsxs("dl",{className:Ce.detailGrid,children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Owner"}),n.jsx("dd",{children:t.owner})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Assignees"}),n.jsx("dd",{children:t.assignees.join(", ")})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Termin"}),n.jsx("dd",{children:ia(t.dueAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt aktualisiert"}),n.jsx("dd",{children:em(t.updatedAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Erstellt"}),n.jsx("dd",{children:ia(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Tags"}),n.jsx("dd",{children:t.tags.join(", ")})]})]}),n.jsxs("div",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Ce.primaryAction,onClick:()=>i(t.id,"done"),children:"Als erledigt markieren"})]})]})}));_A.displayName="DetailPanel";const wA=J.forwardRef(({owners:t,item:e,onClose:s,onSubmit:r},i)=>{const[a,l]=J.useState(()=>{var h;return e!=null?e:{id:`planner-${Date.now()}`,title:"",type:"task",status:"open",owner:(h=t[0])!=null?h:sA[0],assignees:[],dueAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:"medium",tags:[],description:"",freshness:"unknown",lastScanAt:new Date().toISOString(),nextUpdateAt:new Date().toISOString()}});J.useEffect(()=>{e&&l(e)},[JSON.stringify(e)]);const d=h=>{h.preventDefault(),a.title.trim()&&r({...a,updatedAt:new Date().toISOString()})},u=h=>{l(m=>{const v=m.tags.includes(h)?m.tags.filter(b=>b!==h):[...m.tags,h];return{...m,tags:v}})};return n.jsx("div",{className:Ce.formOverlay,children:n.jsxs("form",{ref:i,className:Ce.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Ce.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ce.cardLabel,children:e?"Eintrag bearbeiten":"Neuer Eintrag"}),n.jsx("h2",{children:e?e.title:"Planner Task"})]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Titel",n.jsx("input",{name:"plannerFormTitle",value:a.title,onChange:h=>l(m=>({...m,title:h.target.value})),required:!0})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Beschreibung",n.jsx("textarea",{name:"plannerFormDescription",value:a.description,onChange:h=>l(m=>({...m,description:h.target.value})),rows:4})]}),n.jsxs("div",{className:Ce.formGrid,children:[n.jsxs("label",{children:["Typ",n.jsxs("select",{name:"plannerFormType",value:a.type,onChange:h=>l(m=>({...m,type:h.target.value})),children:[n.jsx("option",{value:"raid",children:"Raid"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"task",children:"Task"})]})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"plannerFormStatus",value:a.status,onChange:h=>l(m=>({...m,status:h.target.value})),children:[n.jsx("option",{value:"open",children:"Offen"}),n.jsx("option",{value:"in_progress",children:"In Arbeit"}),n.jsx("option",{value:"done",children:"Erledigt"}),n.jsx("option",{value:"canceled",children:"Abgebrochen"})]})]}),n.jsxs("label",{children:["Owner",n.jsx("select",{name:"plannerFormOwner",value:a.owner,onChange:h=>l(m=>({...m,owner:h.target.value})),children:t.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Prioritaet",n.jsxs("select",{name:"plannerFormPriority",value:a.priority,onChange:h=>l(m=>({...m,priority:h.target.value})),children:[n.jsx("option",{value:"urgent",children:"Urgent"}),n.jsx("option",{value:"high",children:"Hoch"}),n.jsx("option",{value:"medium",children:"Mittel"}),n.jsx("option",{value:"low",children:"Niedrig"})]})]})]}),n.jsxs("label",{className:Ce.sheetLabel,children:["Termin",n.jsx("input",{type:"datetime-local",name:"plannerFormDueAt",value:a.dueAt.slice(0,16),onChange:h=>l(m=>({...m,dueAt:new Date(h.target.value).toISOString()}))})]}),n.jsxs("div",{className:Ce.sheetLabel,children:["Tags",n.jsx("div",{className:Ce.ownerGroup,children:["raid","fusion","ops","community","recruiting"].map(h=>{const m=a.tags.includes(h);return n.jsx("button",{type:"button",className:`${Ce.ownerChip} ${m?Ce.ownerChipActive:""}`,onClick:()=>u(h),children:h},h)})})]}),n.jsxs("footer",{className:Ce.panelFooter,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Ce.primaryAction,children:"Speichern"})]})]})})});wA.displayName="PlannerFormOverlay";function jA({onEdit:t,onComplete:e}){const[s,r]=J.useState(!1),i=J.useRef(null);return J.useEffect(()=>{if(!s)return;const a=l=>{var d;(d=i.current)!=null&&d.contains(l.target)||r(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[s]),n.jsxs("div",{className:Ce.menuWrapper,ref:i,children:[n.jsx("button",{type:"button",className:Ce.dotsButton,"aria-haspopup":"menu","aria-expanded":s,onClick:()=>r(a=>!a),children:"..."}),s&&n.jsxs("div",{className:Ce.menu,role:"menu",children:[n.jsx("button",{type:"button",onClick:()=>t(),children:"Bearbeiten"}),n.jsx("button",{type:"button",onClick:()=>e(),children:"Als erledigt"}),n.jsx("button",{type:"button",onClick:()=>r(!1),children:"Mehr"})]})]})}function Fce({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Ce.pagination,children:[n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Ce.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const Bce="_page_1cvuk_1",$ce="_header_1cvuk_13",Oce="_headerLeading_1cvuk_29",Vce="_backLink_1cvuk_41",Uce="_headerStack_1cvuk_77",zce="_kicker_1cvuk_89",Hce="_title_1cvuk_105",Gce="_subtitle_1cvuk_117",Wce="_headerActions_1cvuk_129",qce="_plannerNotice_1cvuk_141",Kce="_noticeItem_1cvuk_163",Qce="_noticeWarning_1cvuk_185",Xce="_noticeDot_1cvuk_197",Yce="_tabSection_1cvuk_213",Jce="_tabBar_1cvuk_225",Zce="_tabItem_1cvuk_239",ede="_tabItemActive_1cvuk_279",tde="_tabLabel_1cvuk_291",sde="_tabHelper_1cvuk_301",nde="_tabPanel_1cvuk_311",rde="_tabBadge_1cvuk_331",ide="_primaryAction_1cvuk_1331",ade="_secondaryAction_1cvuk_1333",ode="_infoStrip_1cvuk_1383",lde="_infoBlock_1cvuk_1403",cde="_infoLabel_1cvuk_1415",dde="_infoHint_1cvuk_1441",ude="_stageGrid_1cvuk_1453",hde="_panel_1cvuk_1465",mde="_panelHeader_1cvuk_1487",pde="_panelKicker_1cvuk_1501",fde="_panelTitle_1cvuk_1517",gde="_panelLead_1cvuk_1529",xde="_badge_1cvuk_1541",yde="_panelBody_1cvuk_1563",vde="_placeholderGrid_1cvuk_1575",bde="_placeholderCard_1cvuk_1587",_de="_placeholderTitle_1cvuk_1609",wde="_placeholderText_1cvuk_1619",jde="_helperSection_1cvuk_1631",Sde="_helperCard_1cvuk_1639",Nde="_helperKicker_1cvuk_1661",kde="_helperTitle_1cvuk_1677",Cde="_helperText_1cvuk_1689",Tde="_helperActions_1cvuk_1701",st={page:Bce,header:$ce,headerLeading:Oce,backLink:Vce,headerStack:Uce,kicker:zce,title:Hce,subtitle:Gce,headerActions:Wce,plannerNotice:qce,noticeItem:Kce,noticeWarning:Qce,noticeDot:Xce,tabSection:Yce,tabBar:Jce,tabItem:Zce,tabItemActive:ede,tabLabel:tde,tabHelper:sde,tabPanel:nde,tabBadge:rde,primaryAction:ide,secondaryAction:ade,infoStrip:ode,infoBlock:lde,infoLabel:cde,infoHint:dde,stageGrid:ude,panel:hde,panelHeader:mde,panelKicker:pde,panelTitle:fde,panelLead:gde,badge:xde,panelBody:yde,placeholderGrid:vde,placeholderCard:bde,placeholderTitle:_de,placeholderText:wde,helperSection:jde,helperCard:Sde,helperKicker:Nde,helperTitle:kde,helperText:Cde,helperActions:Tde},Ede="_setupGrid_rdp6l_1",Ade="_setupLeft_rdp6l_13",Ide="_setupRight_rdp6l_15",Pde="_card_rdp6l_27",Rde="_cardHeader_rdp6l_49",Lde="_cardKicker_rdp6l_61",Dde="_cardTitle_rdp6l_77",Mde="_cardText_rdp6l_89",Fde="_toggleGroup_rdp6l_101",Bde="_toggleButton_rdp6l_113",$de="_toggleButtonActive_rdp6l_143",Ode="_modeHint_rdp6l_155",Vde="_formGrid_rdp6l_167",Ude="_formField_rdp6l_179",zde="_formLabel_rdp6l_191",Hde="_input_rdp6l_201",Gde="_suggestions_rdp6l_231",Wde="_suggestionBtn_rdp6l_257",qde="_suggestionName_rdp6l_297",Kde="_suggestionMeta_rdp6l_305",Qde="_partnerActions_rdp6l_315",Xde="_primaryAction_rdp6l_329",Yde="_secondaryAction_rdp6l_331",Jde="_partnerList_rdp6l_381",Zde="_partnerRow_rdp6l_393",eue="_partnerName_rdp6l_413",tue="_partnerMeta_rdp6l_423",sue="_removeButton_rdp6l_433",nue="_emptyState_rdp6l_463",rue="_previewBlock_rdp6l_473",iue="_previewLabel_rdp6l_485",aue="_previewValue_rdp6l_499",oue="_previewCard_rdp6l_509",lue="_previewTitle_rdp6l_523",cue="_previewMeta_rdp6l_533",due="_previewList_rdp6l_543",uue="_previewItem_rdp6l_555",hue="_setupInfo_rdp6l_569",mue="_setupWarning_rdp6l_593",pue="_setupInfoIcon_rdp6l_605",fue="_setupInfoTitle_rdp6l_629",gue="_setupInfoText_rdp6l_639",Fe={setupGrid:Ede,setupLeft:Ade,setupRight:Ide,card:Pde,cardHeader:Rde,cardKicker:Lde,cardTitle:Dde,cardText:Mde,toggleGroup:Fde,toggleButton:Bde,toggleButtonActive:$de,modeHint:Ode,formGrid:Vde,formField:Ude,formLabel:zde,input:Hde,suggestions:Gde,suggestionBtn:Wde,suggestionName:qde,suggestionMeta:Kde,partnerActions:Qde,primaryAction:Xde,secondaryAction:Yde,partnerList:Jde,partnerRow:Zde,partnerName:eue,partnerMeta:tue,removeButton:sue,emptyState:nue,previewBlock:rue,previewLabel:iue,previewValue:aue,previewCard:oue,previewTitle:lue,previewMeta:cue,previewList:due,previewItem:uue,setupInfo:hue,setupWarning:mue,setupInfoIcon:pue,setupInfoTitle:fue,setupInfoText:gue};function xue({setupState:t,onChangeMode:e,onChangeBaseGuild:s,onAddPartnerGuild:r,onRemovePartnerGuild:i}){var C,R,M,T,y,w,D,k,_,A;const[a,l]=J.useState(()=>{var F,P,B,$;return{name:(P=(F=t.baseGuild)==null?void 0:F.name)!=null?P:"",server:($=(B=t.baseGuild)==null?void 0:B.server)!=null?$:""}}),[d,u]=J.useState({id:void 0,name:"",server:""}),h=Cd(a.name,250),m=Cd(d.name,250),g=ek(h,a.server||"all"),v=ek(m,d.server||"all"),b=!!((R=(C=t.baseGuild)==null?void 0:C.name)!=null&&R.trim()&&((T=(M=t.baseGuild)==null?void 0:M.server)!=null&&T.trim())),N=t.partnerGuilds.length>0;J.useEffect(()=>{var P,B,$,W;const F={name:(B=(P=t.baseGuild)==null?void 0:P.name)!=null?B:"",server:(W=($=t.baseGuild)==null?void 0:$.server)!=null?W:""};(F.name!==a.name||F.server!==a.server)&&l(F)},[(y=t.baseGuild)==null?void 0:y.name,(w=t.baseGuild)==null?void 0:w.server]);const S=()=>{!d.name.trim()||!d.server.trim()||(r(d),u({id:void 0,name:"",server:""}))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:Fe.setupGrid,children:[n.jsxs("div",{className:Fe.setupLeft,children:[n.jsxs("div",{className:Fe.card,children:[n.jsx("div",{className:Fe.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Fe.cardKicker,children:"Modus"}),n.jsx("h3",{className:Fe.cardTitle,children:"Scan-based oder manuell"}),n.jsx("p",{className:Fe.cardText,children:"Waehle, ob bestehende Scans genutzt oder alle Angaben manuell erfasst werden."})]})}),n.jsxs("div",{className:Fe.toggleGroup,role:"group","aria-label":"Setup Modus",children:[n.jsx("button",{type:"button",className:`${Fe.toggleButton} ${t.mode==="scan"?Fe.toggleButtonActive:""}`,onClick:()=>e("scan"),children:"Scan-based"}),n.jsx("button",{type:"button",className:`${Fe.toggleButton} ${t.mode==="manual"?Fe.toggleButtonActive:""}`,onClick:()=>e("manual"),children:"Manual"})]}),n.jsx("p",{className:Fe.modeHint,children:t.mode==="scan"?"Use existing scan data (empfohlen, wenn aktuelle Scans vorliegen).":"Enter guild information manually if no scans are available."})]}),n.jsxs("div",{className:Fe.card,children:[n.jsx("div",{className:Fe.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Fe.cardKicker,children:"Base Guild"}),n.jsx("h3",{className:Fe.cardTitle,children:"Stammdaten"}),n.jsx("p",{className:Fe.cardText,children:"Lege die Basisgilde fest, die fuer die Fusion verwendet wird."})]})}),n.jsxs("div",{className:Fe.formGrid,children:[n.jsxs("label",{className:Fe.formField,children:[n.jsx("span",{className:Fe.formLabel,children:"Guild name"}),n.jsx("input",{type:"text",className:Fe.input,value:a.name,onChange:F=>{const P=F.target.value;l(B=>({...B,name:P}))},onBlur:()=>s({name:a.name}),placeholder:"z.B. Solaris"}),g.length>0&&n.jsx("div",{className:Fe.suggestions,children:g.map(F=>n.jsxs("button",{type:"button",className:Fe.suggestionBtn,onClick:()=>{l({name:F.name,server:F.server}),s({id:F.id,name:F.name,server:F.server})},children:[n.jsx("span",{className:Fe.suggestionName,children:F.name}),n.jsx("span",{className:Fe.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Fe.formField,children:[n.jsx("span",{className:Fe.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Fe.input,value:a.server,onChange:F=>{const P=F.target.value;l(B=>({...B,server:P}))},onBlur:()=>s({server:a.server}),placeholder:"z.B. EU-01"})]})]})]}),n.jsxs("div",{className:Fe.card,children:[n.jsx("div",{className:Fe.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Fe.cardKicker,children:"Partner Guilds"}),n.jsx("h3",{className:Fe.cardTitle,children:"Partner hinzufuegen"}),n.jsx("p",{className:Fe.cardText,children:"Fuege eine oder mehrere Partnergilden hinzu, die an der Fusion beteiligt sind."})]})}),n.jsxs("div",{className:Fe.formGrid,children:[n.jsxs("label",{className:Fe.formField,children:[n.jsx("span",{className:Fe.formLabel,children:"Name"}),n.jsx("input",{type:"text",className:Fe.input,value:d.name,onChange:F=>u(P=>({...P,name:F.target.value})),placeholder:"z.B. Nova Alliance"}),v.length>0&&n.jsx("div",{className:Fe.suggestions,children:v.map(F=>n.jsxs("button",{type:"button",className:Fe.suggestionBtn,onClick:()=>u({id:F.id,name:F.name,server:F.server}),children:[n.jsx("span",{className:Fe.suggestionName,children:F.name}),n.jsx("span",{className:Fe.suggestionMeta,children:F.server})]},F.id))})]}),n.jsxs("label",{className:Fe.formField,children:[n.jsx("span",{className:Fe.formLabel,children:"Server"}),n.jsx("input",{type:"text",className:Fe.input,value:d.server,onChange:F=>u(P=>({...P,server:F.target.value})),placeholder:"z.B. EU-02"})]})]}),n.jsxs("div",{className:Fe.partnerActions,children:[n.jsx("button",{type:"button",className:Fe.primaryAction,onClick:S,children:"Add partner guild"}),n.jsx("button",{type:"button",className:Fe.secondaryAction,onClick:()=>u({name:"",server:""}),children:"Reset fields"})]}),n.jsx("div",{className:Fe.partnerList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Fe.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Fe.partnerRow,children:[n.jsxs("div",{children:[n.jsx("div",{className:Fe.partnerName,children:F.name||"Unbenannt"}),n.jsx("div",{className:Fe.partnerMeta,children:F.server||"Server n/a"})]}),n.jsx("button",{type:"button",className:Fe.removeButton,onClick:()=>i(F.id),children:"Remove"})]},F.id))})]})]}),n.jsx("aside",{className:Fe.setupRight,children:n.jsxs("div",{className:Fe.card,children:[n.jsx("div",{className:Fe.cardHeader,children:n.jsxs("div",{children:[n.jsx("p",{className:Fe.cardKicker,children:"Preview"}),n.jsx("h3",{className:Fe.cardTitle,children:"Uebersicht"}),n.jsx("p",{className:Fe.cardText,children:"Zusammenfassung der aktuellen Auswahl, bevor weitere Daten geladen werden."})]})}),n.jsxs("div",{className:Fe.previewBlock,children:[n.jsx("div",{className:Fe.previewLabel,children:"Modus"}),n.jsx("div",{className:Fe.previewValue,children:t.mode==="scan"?"Scan-based":"Manual"})]}),n.jsxs("div",{className:Fe.previewBlock,children:[n.jsx("div",{className:Fe.previewLabel,children:"Base Guild"}),n.jsx("div",{className:Fe.previewCard,children:(D=t.baseGuild)!=null&&D.name||(k=t.baseGuild)!=null&&k.server?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Fe.previewTitle,children:((_=t.baseGuild)==null?void 0:_.name)||"Unbenannt"}),n.jsx("div",{className:Fe.previewMeta,children:((A=t.baseGuild)==null?void 0:A.server)||"Server n/a"})]}):n.jsx("div",{className:Fe.emptyState,children:"No base guild selected yet."})})]}),n.jsxs("div",{className:Fe.previewBlock,children:[n.jsx("div",{className:Fe.previewLabel,children:"Partner Guilds"}),n.jsx("div",{className:Fe.previewList,children:t.partnerGuilds.length===0?n.jsx("div",{className:Fe.emptyState,children:"No partner guilds added yet."}):t.partnerGuilds.map(F=>n.jsxs("div",{className:Fe.previewItem,children:[n.jsx("div",{className:Fe.previewTitle,children:F.name||"Unbenannt"}),n.jsx("div",{className:Fe.previewMeta,children:F.server||"Server n/a"})]},F.id))})]})]})})]}),b?N?null:n.jsxs("div",{className:Fe.setupInfo,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Fe.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Fe.setupInfoTitle,children:"Optional: add partner guilds."}),n.jsx("p",{className:Fe.setupInfoText,children:"You can add partner guilds to compare multi-guild fusion scenarios later."})]})]}):n.jsxs("div",{className:`${Fe.setupInfo} ${Fe.setupWarning}`,role:"status","aria-live":"polite",children:[n.jsx("span",{className:Fe.setupInfoIcon,"aria-hidden":!0,children:"i"}),n.jsxs("div",{children:[n.jsx("div",{className:Fe.setupInfoTitle,children:"No base guild selected yet."}),n.jsx("p",{className:Fe.setupInfoText,children:"Please choose a base guild (name and server) to plan a fusion with real members."})]})]})]})}function ek(t,e){const[s,r]=J.useState([]);return J.useEffect(()=>{const i=t.trim().toLowerCase();if(!i){r([]);return}let a=!1;async function l(){try{const d=Gh(it,"latest"),u=await an(kn(d,Ra("nameFold"),Dl(i),Ml(i+""),zn(12))),h=await an(kn(d,Zi("nameNgrams","array-contains",i),zn(12))),m=new Set,g=[],v=b=>{var w,D,k,_,A,F,P,B,$,W;const N=b.data(),C=(w=b.ref.parent)==null?void 0:w.parent;if(((D=C==null?void 0:C.parent)==null?void 0:D.id)!=="guilds")return;const M=(_=(k=C==null?void 0:C.id)!=null?k:N.guildIdentifier)!=null?_:b.id;if(!M||m.has(M))return;const T=(P=(F=N.server)!=null?F:(A=N.values)==null?void 0:A.Server)!=null?P:"Unknown";if(e!=="all"&&T!==e)return;const y=(W=($=N.name)!=null?$:(B=N.values)==null?void 0:B.Name)!=null?W:"Unbekannte Gilde";m.add(M),g.push({id:M,name:y,server:T})};u.forEach(v),h.forEach(v),a||(g.sort((b,N)=>b.name.localeCompare(N.name)),r(g))}catch(d){console.error("[FusionPlanner] guild search failed",d),a||r([])}}return l(),()=>{a=!0}},[t,e]),s}const yue="_membersContainer_1ctw8_1",vue="_scenarioSwitcher_1ctw8_13",bue="_scenarioButton_1ctw8_25",_ue="_scenarioButtonActive_1ctw8_63",wue="_scenarioButtonName_1ctw8_75",jue="_scenarioButtonDesc_1ctw8_83",Sue="_setupInfo_1ctw8_93",Nue="_setupInfoHeader_1ctw8_113",kue="_setupInfoTitle_1ctw8_127",Cue="_setupInfoMode_1ctw8_139",Tue="_setupInfoRow_1ctw8_163",Eue="_setupInfoLabel_1ctw8_175",Aue="_setupInfoValue_1ctw8_189",Iue="_setupInfoMeta_1ctw8_199",Pue="_setupInfoPartners_1ctw8_209",Rue="_setupInfoBadge_1ctw8_221",Lue="_setupInfoEmpty_1ctw8_245",Due="_membersSummary_1ctw8_255",Mue="_membersSummaryItem_1ctw8_275",Fue="_membersSummaryLabel_1ctw8_287",Bue="_membersSummaryValue_1ctw8_301",$ue="_maxSlotsInput_1ctw8_313",Oue="_membersTable_1ctw8_331",Vue="_membersRow_1ctw8_349",Uue="_membersHead_1ctw8_375",zue="_membersCell_1ctw8_385",Hue="_memberName_1ctw8_395",Gue="_memberBadge_1ctw8_403",Wue="_assignmentCell_1ctw8_427",que="_assignmentBadge_1ctw8_439",Kue="_assignmentBadgeMain_1ctw8_463",Que="_assignmentBadgePartner_1ctw8_475",Xue="_assignmentBadgeWatch_1ctw8_487",Yue="_assignmentBadgeIdle_1ctw8_499",Jue="_assignmentActions_1ctw8_507",Zue="_assignmentButton_1ctw8_519",ehe="_assignmentButtonActive_1ctw8_551",the="_decisionGroup_1ctw8_563",she="_decisionButton_1ctw8_575",nhe="_decisionButtonActive_1ctw8_607",rhe="_emptyWrap_1ctw8_619",ihe="_emptyTitle_1ctw8_633",ahe="_emptyText_1ctw8_641",ohe="_contextMenuBackdrop_1ctw8_651",lhe="_contextMenu_1ctw8_651",che="_contextMenuItem_1ctw8_693",dhe="_partnerPickerCell_1ctw8_725",uhe="_partnerLabel_1ctw8_737",hhe="_partnerSelect_1ctw8_751",Pe={membersContainer:yue,scenarioSwitcher:vue,scenarioButton:bue,scenarioButtonActive:_ue,scenarioButtonName:wue,scenarioButtonDesc:jue,setupInfo:Sue,setupInfoHeader:Nue,setupInfoTitle:kue,setupInfoMode:Cue,setupInfoRow:Tue,setupInfoLabel:Eue,setupInfoValue:Aue,setupInfoMeta:Iue,setupInfoPartners:Pue,setupInfoBadge:Rue,setupInfoEmpty:Lue,membersSummary:Due,membersSummaryItem:Mue,membersSummaryLabel:Fue,membersSummaryValue:Bue,maxSlotsInput:$ue,membersTable:Oue,membersRow:Vue,membersHead:Uue,membersCell:zue,memberName:Hue,memberBadge:Gue,assignmentCell:Wue,assignmentBadge:que,assignmentBadgeMain:Kue,assignmentBadgePartner:Que,assignmentBadgeWatch:Xue,assignmentBadgeIdle:Yue,assignmentActions:Jue,assignmentButton:Zue,assignmentButtonActive:ehe,decisionGroup:the,decisionButton:she,decisionButtonActive:nhe,emptyWrap:rhe,emptyTitle:ihe,emptyText:ahe,contextMenuBackdrop:ohe,contextMenu:lhe,contextMenuItem:che,partnerPickerCell:dhe,partnerLabel:uhe,partnerSelect:hhe};function mhe({members:t,scenario:e,onChangeScenarioDecision:s,onChangeScenarioTargetGuild:r,onChangeScenarioMaxSlots:i,setupState:a}){var k,_,A,F,P,B;const[l,d]=J.useState(null),u=J.useRef(null),h=a.partnerGuilds.length>0?a.partnerGuilds.map(($,W)=>({id:$.id,label:$.name||`Partner ${W+1}`})):[{id:"partner-default",label:"Partner guild"}],m=J.useCallback(($,W)=>{d({memberId:$,...W})},[]),g=J.useCallback(()=>{d(null)},[]),v=J.useCallback(()=>{u.current!==null&&(window.clearTimeout(u.current),u.current=null)},[]),b=J.useCallback(($,W,H)=>{v(),u.current=window.setTimeout(()=>{m($,{x:W,y:H})},550)},[v,m]);J.useEffect(()=>()=>v(),[v]);const N=J.useCallback(($,W,H)=>{if(W==="main")s($,"take"),r($,"main");else if(W==="partner"){const q=H?`partner:${H}`:"partner";s($,"take"),r($,q)}else s($,"bench"),r($,"none");g()},[g,s,r]),S=J.useCallback(($,W)=>{s($,W),W==="take"?r($,"main"):r($,"none")},[s,r]);if(!!!((_=(k=a.baseGuild)==null?void 0:k.name)!=null&&_.trim()&&((F=(A=a.baseGuild)==null?void 0:A.server)!=null&&F.trim())))return n.jsxs("div",{className:Pe.emptyWrap,children:[n.jsx("h3",{className:Pe.emptyTitle,children:"No base guild configured"}),n.jsx("p",{className:Pe.emptyText,children:"Please configure a base guild in the Setup tab before assigning members."})]});if(!e)return n.jsxs("div",{className:Pe.emptyWrap,children:[n.jsx("h3",{className:Pe.emptyTitle,children:"Members & Slots"}),n.jsx("p",{className:Pe.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t||t.length===0)return n.jsxs("div",{className:Pe.emptyWrap,children:[n.jsx("h3",{className:Pe.emptyTitle,children:"No members found"}),n.jsx("p",{className:Pe.emptyText,children:"No members found for the selected guild. Check if scans are available or try again later."})]});const R=(P=e.decisions)!=null?P:{},M=(B=e.targetGuildAssignments)!=null?B:{},T=t.filter($=>R[$.id]==="take").length,y=t.filter($=>R[$.id]==="bench").length,w=t.filter($=>R[$.id]==="drop").length,D=Math.max(0,e.maxSlots-e.reservedSlots-T);return n.jsxs("div",{className:Pe.membersContainer,children:[n.jsx("div",{className:Pe.scenarioSwitcher,children:n.jsxs("div",{className:`${Pe.scenarioButton} ${Pe.scenarioButtonActive}`,children:[n.jsx("span",{className:Pe.scenarioButtonName,children:e.name}),e.description?n.jsx("span",{className:Pe.scenarioButtonDesc,children:e.description}):null]})}),n.jsxs("div",{className:Pe.setupInfo,children:[n.jsxs("div",{className:Pe.setupInfoHeader,children:[n.jsx("div",{className:Pe.setupInfoTitle,children:"Planning for"}),n.jsx("span",{className:Pe.setupInfoMode,children:a.mode==="scan"?"Scan":"Manual"})]}),a.baseGuild?n.jsxs("div",{className:Pe.setupInfoRow,children:[n.jsx("span",{className:Pe.setupInfoLabel,children:"Base Guild"}),n.jsxs("span",{className:Pe.setupInfoValue,children:[a.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:Pe.setupInfoMeta,children:["(",a.baseGuild.server||"Server n/a",")"]})]})]}):n.jsx("div",{className:Pe.setupInfoEmpty,children:"No base guild selected in Setup tab."}),n.jsxs("div",{className:Pe.setupInfoRow,children:[n.jsx("span",{className:Pe.setupInfoLabel,children:"Partner Guilds"}),a.partnerGuilds.length?n.jsx("div",{className:Pe.setupInfoPartners,children:a.partnerGuilds.map($=>n.jsxs("span",{className:Pe.setupInfoBadge,children:[$.name||"Unbenannt",n.jsxs("span",{className:Pe.setupInfoMeta,children:[" (",$.server||"Server n/a",")"]})]},$.id))}):n.jsx("span",{className:Pe.setupInfoEmpty,children:"No partner guilds added yet."})]})]}),n.jsxs("div",{className:Pe.membersSummary,children:[n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Selected"}),n.jsxs("div",{className:Pe.membersSummaryValue,children:[T," / ",e.maxSlots]})]}),n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Free slots"}),n.jsx("div",{className:Pe.membersSummaryValue,children:D})]}),n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Bench"}),n.jsx("div",{className:Pe.membersSummaryValue,children:y})]}),n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Drop"}),n.jsx("div",{className:Pe.membersSummaryValue,children:w})]}),n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Reserved"}),n.jsx("div",{className:Pe.membersSummaryValue,children:e.reservedSlots})]}),n.jsxs("div",{className:Pe.membersSummaryItem,children:[n.jsx("div",{className:Pe.membersSummaryLabel,children:"Max slots"}),n.jsx("input",{type:"number",className:Pe.maxSlotsInput,value:e.maxSlots,min:0,onChange:$=>i(Number($.target.value))})]})]}),n.jsxs("div",{className:Pe.membersTable,children:[n.jsxs("div",{className:`${Pe.membersRow} ${Pe.membersHead}`,children:[n.jsx("div",{className:Pe.membersCell,children:"Name"}),n.jsx("div",{className:Pe.membersCell,children:"Level"}),n.jsx("div",{className:Pe.membersCell,children:"Guild"}),n.jsx("div",{className:Pe.membersCell,children:"Class"}),n.jsx("div",{className:Pe.membersCell,children:"Plan"}),n.jsx("div",{className:Pe.membersCell,children:"Decision"}),n.jsx("div",{className:Pe.membersCell,children:"Partner"})]}),t.map($=>{var ne,U,Z,he,ie,fe,be,ye,_e;const W=(ne=R[$.id])!=null?ne:"undecided",H=(U=M[$.id])!=null?U:"none",q=H&&H.toString().startsWith("partner:")?H.split(":")[1]:null,K=(fe=(Z=h.find(we=>we.id===q))==null?void 0:Z.label)!=null?fe:H==="partner"?(ie=(he=h[0])==null?void 0:he.label)!=null?ie:"Partner guild":null,G=W==="take"&&H==="main"?"main":W==="take"&&(H==="partner"||q)?"partner":W==="bench"?"watch":"unassigned",te=G==="main"?"Main guild":G==="partner"?K||"Partner guild":G==="watch"?"Watchlist":"Not planned";return n.jsxs("div",{className:Pe.membersRow,onContextMenu:we=>{we.preventDefault(),m($.id,{x:we.clientX,y:we.clientY})},onTouchStart:we=>{const de=we.touches[0];de&&b($.id,de.clientX,de.clientY)},onTouchEnd:v,onTouchCancel:v,children:[n.jsx("div",{className:Pe.membersCell,children:n.jsx("div",{className:Pe.memberName,children:$.name})}),n.jsx("div",{className:Pe.membersCell,children:n.jsxs("span",{className:Pe.memberBadge,children:["Lvl ",$.level]})}),n.jsx("div",{className:Pe.membersCell,children:$.guildName}),n.jsx("div",{className:Pe.membersCell,children:(ye=(be=$.className)!=null?be:$.class)!=null?ye:"?"}),n.jsxs("div",{className:`${Pe.membersCell} ${Pe.assignmentCell}`,children:[n.jsx("span",{className:`${Pe.assignmentBadge} ${G==="main"?Pe.assignmentBadgeMain:G==="partner"?Pe.assignmentBadgePartner:G==="watch"?Pe.assignmentBadgeWatch:Pe.assignmentBadgeIdle}`,children:te}),n.jsxs("div",{className:Pe.assignmentActions,role:"group","aria-label":"Target guild selection",children:[n.jsx("button",{type:"button",className:`${Pe.assignmentButton} ${G==="main"?Pe.assignmentButtonActive:""}`,onClick:()=>N($.id,"main"),children:"Main"}),n.jsx("button",{type:"button",className:`${Pe.assignmentButton} ${G==="watch"?Pe.assignmentButtonActive:""}`,onClick:()=>N($.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",className:`${Pe.assignmentButton} ${G==="partner"?Pe.assignmentButtonActive:""}`,onClick:()=>N($.id,"partner"),children:"Partner"})]})]}),n.jsx("div",{className:Pe.membersCell,children:n.jsx("div",{className:Pe.decisionGroup,role:"group","aria-label":"Decision",children:["take","bench","drop","undecided"].map(we=>n.jsx("button",{type:"button",className:`${Pe.decisionButton} ${W===we?Pe.decisionButtonActive:""}`,onClick:()=>S($.id,we),children:we==="take"?"Take":we==="bench"?"Bench":we==="drop"?"Drop":"?"},we))})}),n.jsxs("div",{className:`${Pe.membersCell} ${Pe.partnerPickerCell}`,children:[n.jsx("label",{className:Pe.partnerLabel,htmlFor:`partner-select-${$.id}`,children:"Partner"}),n.jsx("select",{id:`partner-select-${$.id}`,className:Pe.partnerSelect,value:q!=null?q:(_e=h[0])==null?void 0:_e.id,onChange:we=>N($.id,"partner",we.target.value),children:h.map(we=>n.jsx("option",{value:we.id,children:we.label},we.id))})]})]},$.id)})]}),l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Pe.contextMenuBackdrop,onClick:g}),n.jsxs("div",{className:Pe.contextMenu,style:{top:l.y,left:l.x},children:[n.jsx("button",{type:"button",className:Pe.contextMenuItem,onClick:()=>N(l.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Pe.contextMenuItem,onClick:()=>N(l.memberId,"watch"),children:"Move to Watchlist"}),h.map($=>n.jsxs("button",{type:"button",className:Pe.contextMenuItem,onClick:()=>N(l.memberId,"partner",$.id),children:["Move to ",$.label]},$.id))]})]}):null]})}const phe="_overview_6ytw3_1",fhe="_contextBox_6ytw3_15",ghe="_contextKicker_6ytw3_35",xhe="_contextTitle_6ytw3_51",yhe="_contextText_6ytw3_61",vhe="_contextDetails_6ytw3_71",bhe="_detailItem_6ytw3_85",_he="_detailLabel_6ytw3_99",whe="_detailValue_6ytw3_113",jhe="_kpiGrid_6ytw3_121",She="_kpiCard_6ytw3_133",Nhe="_kpiLabel_6ytw3_153",khe="_kpiValue_6ytw3_167",Che="_columnsWrapper_6ytw3_177",The="_column_6ytw3_177",Ehe="_columnDropTarget_6ytw3_213",Ahe="_columnHeader_6ytw3_223",Ihe="_columnKicker_6ytw3_235",Phe="_columnTitle_6ytw3_251",Rhe="_columnCount_6ytw3_259",Lhe="_columnBody_6ytw3_281",Dhe="_memberCard_6ytw3_293",Mhe="_memberTop_6ytw3_337",Fhe="_memberName_6ytw3_349",Bhe="_memberMeta_6ytw3_357",$he="_memberBadge_6ytw3_369",Ohe="_memberBottom_6ytw3_395",Vhe="_memberGuild_6ytw3_409",Uhe="_memberServer_6ytw3_419",zhe="_memberActions_6ytw3_427",Hhe="_emptyList_6ytw3_469",Ghe="_emptyWrap_6ytw3_487",Whe="_emptyTitle_6ytw3_501",qhe="_emptyText_6ytw3_509",Khe="_addPartnerCard_6ytw3_519",Qhe="_contextMenuBackdrop_6ytw3_559",Xhe="_contextMenu_6ytw3_559",Yhe="_contextMenuItem_6ytw3_601",Ze={overview:phe,contextBox:fhe,contextKicker:ghe,contextTitle:xhe,contextText:yhe,contextDetails:vhe,detailItem:bhe,detailLabel:_he,detailValue:whe,kpiGrid:jhe,kpiCard:She,kpiLabel:Nhe,kpiValue:khe,columnsWrapper:Che,column:The,columnDropTarget:Ehe,columnHeader:Ahe,columnKicker:Ihe,columnTitle:Phe,columnCount:Rhe,columnBody:Lhe,memberCard:Dhe,memberTop:Mhe,memberName:Fhe,memberMeta:Bhe,memberBadge:$he,memberBottom:Ohe,memberGuild:Vhe,memberServer:Uhe,memberActions:zhe,emptyList:Hhe,emptyWrap:Ghe,emptyTitle:Whe,emptyText:qhe,addPartnerCard:Khe,contextMenuBackdrop:Qhe,contextMenu:Xhe,contextMenuItem:Yhe};function Jhe({members:t,scenario:e,setupState:s,onChangeScenarioDecision:r,onChangeScenarioTargetGuild:i,onAddPartnerGuild:a}){var H,q,K;const l=(H=e==null?void 0:e.decisions)!=null?H:{},d=(q=e==null?void 0:e.targetGuildAssignments)!=null?q:{},u=s.partnerGuilds.length>0?s.partnerGuilds.map((G,te)=>({id:G.id,label:G.name||`Partner ${te+1}`})):[{id:"partner-default",label:"Partner guild"}],h=t.filter(G=>l[G.id]==="take"&&d[G.id]==="main"),m=t.filter(G=>l[G.id]==="bench"),g=u.reduce((G,te)=>(G[te.id]=t.filter(ne=>{const U=d[ne.id];return l[ne.id]==="take"&&(U===`partner:${te.id}`||U==="partner")}),G),{}),v=t.filter(G=>!h.includes(G)&&!m.includes(G)&&!Object.values(g).some(te=>te.includes(G))),[b,N]=J.useState(null),[S,C]=J.useState(null),R=J.useRef(null),M=t.length,T=h.length,y=m.length,w=Object.values(g).reduce((G,te)=>G+te.length,0),D=e&&typeof e.maxSlots=="number"?Math.max(0,e.maxSlots-T-w):0,k=J.useCallback((G,te,ne)=>{G&&(te==="main"?(r(G,"take"),i(G,"main")):te==="partner"?(r(G,"take"),i(G,ne?`partner:${ne}`:"partner")):te==="unassigned"?(r(G,"undecided"),i(G,"none")):(r(G,"bench"),i(G,"none")),C(null))},[r,i]),_=J.useCallback((G,te)=>ne=>{ne.preventDefault();const U=ne.dataTransfer.getData("text/plain");U&&k(U,G,te),N(null)},[k]),A=J.useCallback(G=>te=>{te.preventDefault(),N(G)},[]),F=J.useCallback(()=>N(null),[]),P=J.useCallback((G,te)=>{C({memberId:G,...te})},[]),B=J.useCallback(()=>{R.current!==null&&(window.clearTimeout(R.current),R.current=null)},[]),$=J.useCallback((G,te,ne)=>{B(),R.current=window.setTimeout(()=>{P(G,{x:te,y:ne})},550)},[B,P]);if(J.useEffect(()=>()=>B(),[B]),!e)return n.jsxs("div",{className:Ze.emptyWrap,children:[n.jsx("h3",{className:Ze.emptyTitle,children:"Overview"}),n.jsx("p",{className:Ze.emptyText,children:"Kein Szenario aktiv. Lege einen Plan an."})]});if(!t.length)return n.jsxs("div",{className:Ze.emptyWrap,children:[n.jsx("h3",{className:Ze.emptyTitle,children:"No members loaded"}),n.jsx("p",{className:Ze.emptyText,children:"Lade ein Setup mit Mitgliedern, um die Uebersicht zu nutzen."})]});const W=(G,te,ne,U,Z)=>n.jsxs("div",{className:`${Ze.column} ${b===G?Ze.columnDropTarget:""}`,onDragOver:A(G),onDragEnter:A(G),onDragLeave:F,onDrop:_(G,Z),children:[n.jsxs("div",{className:Ze.columnHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ze.columnKicker,children:ne}),n.jsx("h4",{className:Ze.columnTitle,children:te})]}),n.jsx("span",{className:Ze.columnCount,children:U.length})]}),n.jsx("div",{className:Ze.columnBody,children:U.length?U.map(he=>{var ie,fe,be,ye;return n.jsxs("div",{className:Ze.memberCard,draggable:!0,onDragStart:_e=>_e.dataTransfer.setData("text/plain",he.id),onContextMenu:_e=>{_e.preventDefault(),P(he.id,{x:_e.clientX,y:_e.clientY})},onTouchStart:_e=>{const we=_e.touches[0];we&&$(he.id,we.clientX,we.clientY)},onTouchEnd:B,onTouchCancel:B,children:[n.jsxs("div",{className:Ze.memberTop,children:[n.jsxs("div",{children:[n.jsx("div",{className:Ze.memberName,children:he.name}),n.jsxs("p",{className:Ze.memberMeta,children:[(fe=(ie=he.className)!=null?ie:he.class)!=null?fe:"Unknown","  ",(be=he.role)!=null?be:"Unknown"]})]}),n.jsxs("span",{className:Ze.memberBadge,children:["Lvl ",(ye=he.level)!=null?ye:"?"]})]}),n.jsxs("div",{className:Ze.memberBottom,children:[n.jsxs("span",{className:Ze.memberGuild,children:[he.guildName," ",n.jsxs("span",{className:Ze.memberServer,children:["(",he.server||"Server n/a",")"]})]}),n.jsxs("div",{className:Ze.memberActions,children:[n.jsx("button",{type:"button",onClick:()=>k(he.id,"main"),children:"Main"}),n.jsx("button",{type:"button",onClick:()=>k(he.id,"watch"),children:"Watch"}),n.jsx("button",{type:"button",onClick:()=>k(he.id,"partner"),children:"Partner"})]})]})]},he.id)}):n.jsx("div",{className:Ze.emptyList,children:"No players in this list yet."})})]});return n.jsxs("div",{className:Ze.overview,children:[n.jsxs("div",{className:Ze.contextBox,children:[n.jsxs("div",{children:[n.jsx("p",{className:Ze.contextKicker,children:"Setup"}),n.jsx("h3",{className:Ze.contextTitle,children:"Fusion Overview"}),n.jsx("p",{className:Ze.contextText,children:"Ziehe Spieler zwischen den Listen oder nutze das Kontextmenue."})]}),n.jsxs("div",{className:Ze.contextDetails,children:[n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Base Guild"}),n.jsx("strong",{className:Ze.detailValue,children:((K=s.baseGuild)==null?void 0:K.name)||"Unbenannt"})]}),n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Partner Guilds"}),n.jsx("strong",{className:Ze.detailValue,children:s.partnerGuilds.length})]}),n.jsxs("div",{className:Ze.detailItem,children:[n.jsx("span",{className:Ze.detailLabel,children:"Max Slots"}),n.jsx("strong",{className:Ze.detailValue,children:e.maxSlots})]})]})]}),n.jsxs("div",{className:Ze.kpiGrid,children:[n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Total players"}),n.jsx("strong",{className:Ze.kpiValue,children:M})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Main guild"}),n.jsx("strong",{className:Ze.kpiValue,children:T})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Watchlist"}),n.jsx("strong",{className:Ze.kpiValue,children:y})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Partner guild"}),n.jsx("strong",{className:Ze.kpiValue,children:w})]}),n.jsxs("div",{className:Ze.kpiCard,children:[n.jsx("span",{className:Ze.kpiLabel,children:"Free slots"}),n.jsx("strong",{className:Ze.kpiValue,children:D})]})]}),n.jsxs("div",{className:Ze.columnsWrapper,children:[W("unassigned","Unassigned","Noch ohne Planung",v),W("main","Main guild","Take & Assign main",h),W("watch","Watchlist","Bench for review",m),u.map(G=>{var te;return W("partner",G.label,"Take & Assign partner",(te=g[G.id])!=null?te:[],G.id)}),n.jsx("button",{type:"button",className:Ze.addPartnerCard,onClick:()=>a(`Partner ${u.length+1}`),children:"+ Partner guild"})]}),S?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Ze.contextMenuBackdrop,onClick:()=>C(null)}),n.jsxs("div",{className:Ze.contextMenu,style:{top:S.y,left:S.x},children:[n.jsx("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>k(S.memberId,"main"),children:"Move to Main guild"}),n.jsx("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>k(S.memberId,"watch"),children:"Move to Watchlist"}),u.map(G=>n.jsxs("button",{type:"button",className:Ze.contextMenuItem,onClick:()=>k(S.memberId,"partner",G.id),children:["Move to ",G.label]},G.id))]})]}):null]})}const Zhe="_scenariosTab_3v4iw_1",eme="_scenariosHeader_3v4iw_13",tme="_scenariosTitle_3v4iw_35",sme="_scenariosText_3v4iw_45",nme="_scenarioInfo_3v4iw_57",rme="_headerActions_3v4iw_71",ime="_createButton_3v4iw_81",ame="_scenarioList_3v4iw_115",ome="_scenarioCard_3v4iw_127",lme="_scenarioCardActive_3v4iw_147",cme="_scenarioCardTop_3v4iw_157",dme="_cardKicker_3v4iw_169",ume="_cardTitle_3v4iw_185",hme="_cardText_3v4iw_197",mme="_scenarioActiveBadge_3v4iw_209",pme="_scenarioMeta_3v4iw_231",fme="_scenarioMetaLabel_3v4iw_243",gme="_scenarioMetaValue_3v4iw_259",xme="_scenarioStats_3v4iw_269",yme="_scenarioStatItem_3v4iw_281",vme="_scenarioStatLabel_3v4iw_295",bme="_scenarioStatValue_3v4iw_311",_me="_scenarioActions_3v4iw_321",wme="_scenarioActionButton_3v4iw_337",jme="_scenarioActionActive_3v4iw_367",Sme="_scenarioActionGroup_3v4iw_377",Nme="_secondaryActionButton_3v4iw_389",kme="_deleteActionButton_3v4iw_391",Cme="_deleteActionDisabled_3v4iw_443",At={scenariosTab:Zhe,scenariosHeader:eme,scenariosTitle:tme,scenariosText:sme,scenarioInfo:nme,headerActions:rme,createButton:ime,scenarioList:ame,scenarioCard:ome,scenarioCardActive:lme,scenarioCardTop:cme,cardKicker:dme,cardTitle:ume,cardText:hme,scenarioActiveBadge:mme,scenarioMeta:pme,scenarioMetaLabel:fme,scenarioMetaValue:gme,scenarioStats:xme,scenarioStatItem:yme,scenarioStatLabel:vme,scenarioStatValue:bme,scenarioActions:_me,scenarioActionButton:wme,scenarioActionActive:jme,scenarioActionGroup:Sme,secondaryActionButton:Nme,deleteActionButton:kme,deleteActionDisabled:Cme};function Tme({scenarios:t,activeScenarioId:e,onSetActiveScenario:s,onCreateScenario:r,onDuplicateScenario:i,onRenameScenario:a,onDeleteScenario:l}){const d=J.useCallback(m=>{const g=Object.values(m.decisions),v=g.filter(C=>C==="take").length,b=g.filter(C=>C==="bench").length,N=g.filter(C=>C==="drop").length,S=Math.max(0,m.maxSlots-m.reservedSlots-v);return{selected:v,bench:b,drop:N,free:S}},[]),u=m=>{const g=window.prompt("Neuer Szenario-Name",m.name);g!==null&&a(m.id,g)},h=m=>{if(t.length<=1){window.alert("You need at least one scenario. Create a new scenario before deleting this one.");return}window.confirm("Are you sure you want to delete this scenario?")&&l(m.id)};return n.jsxs("div",{className:At.scenariosTab,children:[n.jsxs("div",{className:At.scenariosHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:At.cardKicker,children:"Scenarios"}),n.jsx("h3",{className:At.scenariosTitle,children:"Fusion Plans verwalten"}),n.jsx("p",{className:At.scenariosText,children:"Plane Varianten mit eigenen Slot-Einstellungen und Entscheidungen pro Mitglied."})]}),n.jsx("div",{className:At.headerActions,children:n.jsx("button",{type:"button",className:At.createButton,onClick:r,children:"Neues Szenario"})})]}),n.jsx("p",{className:At.scenarioInfo,children:"Scenarios allow you to compare different fusion plans (slots & decisions) with the same members."}),n.jsx("div",{className:At.scenarioList,children:t.map(m=>{const g=d(m),v=m.id===e,b=t.length<=1;return n.jsxs("article",{className:`${At.scenarioCard} ${v?At.scenarioCardActive:""}`,children:[n.jsxs("div",{className:At.scenarioCardTop,children:[n.jsxs("div",{children:[n.jsx("p",{className:At.cardKicker,children:"Scenario"}),n.jsx("h3",{className:At.cardTitle,children:m.name}),m.description?n.jsx("p",{className:At.cardText,children:m.description}):null]}),v?n.jsx("span",{className:At.scenarioActiveBadge,children:"Active"}):null]}),n.jsxs("div",{className:At.scenarioMeta,children:[n.jsxs("div",{children:[n.jsx("span",{className:At.scenarioMetaLabel,children:"Max slots"}),n.jsx("span",{className:At.scenarioMetaValue,children:m.maxSlots})]}),n.jsxs("div",{children:[n.jsx("span",{className:At.scenarioMetaLabel,children:"Reserved"}),n.jsx("span",{className:At.scenarioMetaValue,children:m.reservedSlots})]})]}),n.jsxs("div",{className:At.scenarioStats,children:[n.jsxs("div",{className:At.scenarioStatItem,children:[n.jsx("span",{className:At.scenarioStatLabel,children:"Selected"}),n.jsx("strong",{className:At.scenarioStatValue,children:g.selected})]}),n.jsxs("div",{className:At.scenarioStatItem,children:[n.jsx("span",{className:At.scenarioStatLabel,children:"Free"}),n.jsx("strong",{className:At.scenarioStatValue,children:g.free})]}),n.jsxs("div",{className:At.scenarioStatItem,children:[n.jsx("span",{className:At.scenarioStatLabel,children:"Bench"}),n.jsx("strong",{className:At.scenarioStatValue,children:g.bench})]}),n.jsxs("div",{className:At.scenarioStatItem,children:[n.jsx("span",{className:At.scenarioStatLabel,children:"Drop"}),n.jsx("strong",{className:At.scenarioStatValue,children:g.drop})]})]}),n.jsxs("div",{className:At.scenarioActions,children:[n.jsx("button",{type:"button",className:`${At.scenarioActionButton} ${v?At.scenarioActionActive:""}`,onClick:()=>s(m.id),children:"Set active"}),n.jsxs("div",{className:At.scenarioActionGroup,children:[n.jsx("button",{type:"button",className:At.secondaryActionButton,onClick:()=>i(m.id),children:"Duplicate"}),n.jsx("button",{type:"button",className:At.secondaryActionButton,onClick:()=>u(m),children:"Rename"}),n.jsx("button",{type:"button",className:`${At.deleteActionButton} ${b?At.deleteActionDisabled:""}`,onClick:()=>h(m),disabled:b,children:"Delete"})]})]})]},m.id)})})]})}const Eme="_resultWrap_179wi_1",Ame="_emptyState_179wi_13",Ime="_emptyTitle_179wi_35",Pme="_emptyText_179wi_43",Rme="_resultHeader_179wi_55",Lme="_resultKicker_179wi_79",Dme="_resultTitle_179wi_95",Mme="_resultText_179wi_107",Fme="_emptyNote_179wi_119",Bme="_setupSummary_179wi_131",$me="_setupSummaryTitle_179wi_149",Ome="_setupSummaryRow_179wi_159",Vme="_setupSummaryLabel_179wi_171",Ume="_setupSummaryValue_179wi_185",zme="_setupSummaryMeta_179wi_195",Hme="_setupSummaryTags_179wi_205",Gme="_setupSummaryTag_179wi_205",Wme="_classDistribution_179wi_241",qme="_resultStats_179wi_253",Kme="_resultStatBadge_179wi_267",Qme="_resultStatBadgeMuted_179wi_269",Xme="_group_179wi_307",Yme="_groupHeader_179wi_327",Jme="_groupTitle_179wi_341",Zme="_groupHint_179wi_351",epe="_groupBadge_179wi_361",tpe="_badgeSuccess_179wi_387",spe="_badgeMuted_179wi_399",npe="_badgeDanger_179wi_409",rpe="_groupEmpty_179wi_421",ipe="_groupTable_179wi_437",ape="_groupRow_179wi_455",ope="_groupHead_179wi_327",lpe="_groupCell_179wi_491",cpe="_memberName_179wi_501",dpe="_memberBadge_179wi_509",tt={resultWrap:Eme,emptyState:Ame,emptyTitle:Ime,emptyText:Pme,resultHeader:Rme,resultKicker:Lme,resultTitle:Dme,resultText:Mme,emptyNote:Fme,setupSummary:Bme,setupSummaryTitle:$me,setupSummaryRow:Ome,setupSummaryLabel:Vme,setupSummaryValue:Ume,setupSummaryMeta:zme,setupSummaryTags:Hme,setupSummaryTag:Gme,classDistribution:Wme,resultStats:qme,resultStatBadge:Kme,resultStatBadgeMuted:Qme,group:Xme,groupHeader:Yme,groupTitle:Jme,groupHint:Zme,groupBadge:epe,badgeSuccess:tpe,badgeMuted:spe,badgeDanger:npe,groupEmpty:rpe,groupTable:ipe,groupRow:ape,groupHead:ope,groupCell:lpe,memberName:cpe,memberBadge:dpe};function upe({members:t,scenario:e,setupState:s}){var N;if(!e)return n.jsxs("div",{className:tt.emptyState,children:[n.jsx("h3",{className:tt.emptyTitle,children:"No scenario selected"}),n.jsx("p",{className:tt.emptyText,children:"Please create or select a scenario in the Scenarios tab to see the planned result."})]});if(!t||t.length===0)return n.jsxs("div",{className:tt.emptyState,children:[n.jsx("h3",{className:tt.emptyTitle,children:"No members available"}),n.jsx("p",{className:tt.emptyText,children:"No members available for this plan yet. Configure a base guild with scan data in the Setup tab."})]});const{takeMembers:r,benchMembers:i,dropMembers:a,undecidedMembers:l}=J.useMemo(()=>{const S=[],C=[],R=[],M=[];return t.forEach(T=>{var w;const y=(w=e.decisions[T.id])!=null?w:"undecided";y==="take"?S.push(T):y==="bench"?C.push(T):y==="drop"?R.push(T):M.push(T)}),{takeMembers:S,benchMembers:C,dropMembers:R,undecidedMembers:M}},[t,e.decisions]),d=r.length,u=i.length,h=a.length,m=Math.max(0,e.maxSlots-d),g=e.maxSlots?Math.round(d/e.maxSlots*100):0,v=J.useMemo(()=>{const S=r.reduce((R,M)=>{var y,w;const T=(y=M.className)!=null?y:M.class;return T&&(R[T]=((w=R[T])!=null?w:0)+1),R},{});return Object.entries(S).map(([R,M])=>`${R}: ${M}`).join(" | ")},[r]),b=(S,C,R,M)=>n.jsxs("div",{className:tt.group,children:[n.jsxs("div",{className:tt.groupHeader,children:[n.jsxs("div",{children:[n.jsx("h4",{className:tt.groupTitle,children:S}),n.jsx("span",{className:tt.groupHint,children:C})]}),n.jsx("span",{className:`${tt.groupBadge} ${M}`,children:R.length})]}),R.length===0?n.jsx("div",{className:tt.groupEmpty,children:"No players in this group."}):n.jsxs("div",{className:tt.groupTable,role:"table",children:[n.jsxs("div",{className:`${tt.groupRow} ${tt.groupHead}`,role:"row",children:[n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Name"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Level"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Guild"}),n.jsx("div",{className:tt.groupCell,role:"columnheader",children:"Class"})]}),R.map(T=>{var y,w;return n.jsxs("div",{className:tt.groupRow,role:"row",children:[n.jsx("div",{className:tt.groupCell,role:"cell",children:n.jsx("span",{className:tt.memberName,children:T.name})}),n.jsx("div",{className:tt.groupCell,role:"cell",children:n.jsxs("span",{className:tt.memberBadge,children:["Lvl ",T.level]})}),n.jsx("div",{className:tt.groupCell,role:"cell",children:T.guildName}),n.jsx("div",{className:tt.groupCell,role:"cell",children:(w=(y=T.className)!=null?y:T.class)!=null?w:"-"})]},T.id)})]})]});return n.jsxs("div",{className:tt.resultWrap,children:[n.jsxs("div",{className:tt.resultHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:tt.resultKicker,children:"Final Plan"}),n.jsx("h3",{className:tt.resultTitle,children:e.name}),n.jsx("p",{className:tt.resultText,children:(N=e.description)!=null?N:"Zusammenfassung des aktuellen Plans."}),r.length===0?n.jsx("p",{className:tt.emptyNote,children:"No players selected for this scenario yet. Use the Members tab to mark players as 'take'."}):null,v?n.jsxs("p",{className:tt.classDistribution,children:["Class distribution: ",v]}):null,n.jsxs("div",{className:tt.setupSummary,children:[n.jsx("div",{className:tt.setupSummaryTitle,children:"Fusion plan between"}),s.baseGuild?n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Base"}),n.jsxs("span",{className:tt.setupSummaryValue,children:[s.baseGuild.name||"Unbenannt"," ",n.jsxs("span",{className:tt.setupSummaryMeta,children:["(",s.baseGuild.server||"Server n/a",")"]})]})]}):n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Base"}),n.jsx("span",{className:tt.setupSummaryMeta,children:"No base guild selected."})]}),n.jsxs("div",{className:tt.setupSummaryRow,children:[n.jsx("span",{className:tt.setupSummaryLabel,children:"Partners"}),s.partnerGuilds.length?n.jsx("div",{className:tt.setupSummaryTags,children:s.partnerGuilds.map(S=>n.jsxs("span",{className:tt.setupSummaryTag,children:[S.name||"Unbenannt"," ",n.jsxs("span",{className:tt.setupSummaryMeta,children:["(",S.server||"Server n/a",")"]})]},S.id))}):n.jsx("span",{className:tt.setupSummaryMeta,children:"No partner guilds added."})]})]})]}),n.jsxs("div",{className:tt.resultStats,children:[n.jsxs("span",{className:tt.resultStatBadge,children:["Members selected: ",d," / ",e.maxSlots]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Bench: ",u]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Drop: ",h]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Free slots: ",m]}),n.jsxs("span",{className:tt.resultStatBadge,children:["Utilization: ",g,"%"]}),l.length>0?n.jsxs("span",{className:tt.resultStatBadgeMuted,children:["Undecided: ",l.length]}):null]})]}),b("Final roster (selected)","Take",r,tt.badgeSuccess),b("Bench (waiting list)","Bench",i,tt.badgeMuted),b("Not included","Drop",a,tt.badgeDanger)]})}const Hp=[{id:"m1",name:"Liora",class:"Mage",role:"DPS",level:125,guildName:"Solaris",server:"EU-01"},{id:"m2",name:"Korben",class:"Warrior",role:"Tank",level:118,guildName:"Nova Alliance",server:"EU-02"},{id:"m3",name:"Sable",class:"Assassin",role:"DPS",level:122,guildName:"Eclipse",server:"EU-03"},{id:"m4",name:"Nyx",class:"Priest",role:"Support",level:119,guildName:"Helios",server:"EU-04"},{id:"m5",name:"Rowan",class:"Scout",role:"DPS",level:117,guildName:"Solaris",server:"EU-01"},{id:"m6",name:"Vex",class:"Berserker",role:"DPS",level:121,guildName:"Nova Alliance",server:"EU-02"},{id:"m7",name:"Elara",class:"Druid",role:"Healer",level:116,guildName:"Eclipse",server:"EU-03"}],tk=t=>t.reduce((e,s)=>(e[s.id]="undecided",e),{}),sk=t=>t.reduce((e,s)=>(e[s.id]="none",e),{}),hpe=(t,e,s)=>{var r,i,a,l,d,u,h,m,g,v,b,N,S,C,R,M;return{id:t.id,name:(r=t.name)!=null?r:"Unknown",class:(i=t.class)!=null?i:"Unknown",className:(a=t.class)!=null?a:void 0,role:(l=t.role)!=null?l:"Unknown",level:(d=t.level)!=null?d:void 0,guildName:e,server:s,scrapbook:void 0,lastOnline:(u=t.lastActivityMs)!=null?u:null,baseStats:{main:(h=t.baseMain)!=null?h:void 0,con:(m=t.conBase)!=null?m:void 0,sumBaseTotal:(g=t.sumBaseTotal)!=null?g:void 0},totalStats:(v=t.totalStats)!=null?v:void 0,values:{treasury:(b=t.treasury)!=null?b:void 0,mine:(N=t.mine)!=null?N:void 0,attrTotal:(S=t.attrTotal)!=null?S:void 0,conTotal:(C=t.conTotal)!=null?C:void 0,lastScan:(R=t.lastScan)!=null?R:void 0,lastActivity:(M=t.lastActivity)!=null?M:void 0}}},mpe=t=>{var r,i;if(!t)return null;const e=(r=t.id)==null?void 0:r.trim();if(e&&!e.startsWith("base-"))return e;const s=(i=t.name)==null?void 0:i.trim();return s||null},nk=()=>`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,rk=[{key:"setup",label:"Setup",helper:"Grundlage und Partner definieren"},{key:"members",label:"Members & Slots",helper:"Slots zaehlen, Intake planen"},{key:"overview",label:"Overview",helper:"Main/Partner/Watch verwalten"},{key:"scenarios",label:"Scenarios",helper:"Plan A/B/C vergleichen"},{key:"result",label:"Result",helper:"Finalen Merge-Plan festhalten"}],ppe=[{key:"setup",step:"01 - Setup",title:"Rahmen definieren",description:"Server, Regeln und Zeitleiste festlegen, bevor Daten gesammelt werden.",badge:"Entwurf",placeholders:["Server & Regeln","Zeitleiste","Owner & Stakeholder"]},{key:"members",step:"02 - Members & Slots",title:"Teams zusammenstellen",description:"Slot-Planung und Kapazitaeten mit den beteiligten Gilden abstimmen.",badge:"Platzhalter",placeholders:["Member Intake","Slot Matrix","Risiken & Offene Punkte"]},{key:"scenarios",step:"03 - Scenarios",title:"Varianten durchspielen",description:"Szenarien vergleichen, um die beste Aufstellung fuer die Fusion zu finden.",badge:"Coming soon",placeholders:["Baseline","Optimistic","Risk-Adjusted"]},{key:"result",step:"04 - Result",title:"Ergebnis fixieren",description:"Finalen Merge-Plan, KPIs und Kommunikationsplan zusammenfassen.",badge:"Review",placeholders:["KPIs & Metrics","Timeline","Go/No-Go Check"]}];function fpe(){var $;const[t,e]=J.useState("setup"),[s,r]=J.useState(Hp),[i,a]=J.useState(!1),[l,d]=J.useState({mode:"scan",baseGuild:void 0,partnerGuilds:[]}),[u,h]=J.useState(()=>[{id:"plan-a",name:"Plan A",description:"Baseline Variante",maxSlots:50,reservedSlots:0,decisions:tk(Hp),targetGuildAssignments:sk(Hp),isDefault:!0}]),[m,g]=J.useState("plan-a"),v=J.useMemo(()=>{var W,H;return(H=(W=u.find(q=>q.id===m))!=null?W:u[0])!=null?H:null},[m,u]),b=J.useMemo(()=>{var K,G;const W=l.baseGuild,H=(K=W==null?void 0:W.name)==null?void 0:K.trim(),q=(G=W==null?void 0:W.server)==null?void 0:G.trim();return!!(H&&q)},[l.baseGuild]),N=J.useMemo(()=>s.length>0,[s.length]),S=J.useMemo(()=>u.length>0,[u.length]),C=J.useMemo(()=>{const W=[];return b||W.push("Setup incomplete - no base guild selected."),b&&!N&&W.push("No members loaded yet. Check scans or setup."),S||W.push("No scenarios defined yet. Create at least one plan in the Scenarios tab."),W},[b,N,S]),R=(W,H)=>{h(q=>q.map(K=>K.id===m?{...K,decisions:{...K.decisions,[W]:H}}:K))},M=(W,H)=>{h(q=>q.map(K=>{var G;return K.id===m?{...K,targetGuildAssignments:{...(G=K.targetGuildAssignments)!=null?G:{},[W]:H}}:K}))},T=W=>{const H=Number(W)||0;h(q=>q.map(K=>K.id===m?{...K,maxSlots:Math.max(0,H)}:K))},y=()=>{h(W=>{const H={id:nk(),name:`Plan ${W.length+1}`,description:"Neue Variante",maxSlots:50,reservedSlots:0,decisions:tk(s),targetGuildAssignments:sk(s)};return g(H.id),[...W,H]})},w=W=>{h(H=>{var G;const q=H.find(te=>te.id===W);if(!q)return H;const K={...q,id:nk(),name:`${q.name} Copy`,isDefault:!1,createdAt:Date.now(),decisions:{...q.decisions},targetGuildAssignments:{...(G=q.targetGuildAssignments)!=null?G:{}}};return g(K.id),[...H,K]})},D=(W,H)=>{const q=H.trim();q&&h(K=>K.map(G=>G.id===W?{...G,name:q}:G))},k=W=>{h(H=>{if(H.length<=1)return H;const q=H.filter(K=>K.id!==W);return q.length?(m===W&&g(q[0].id),q):H})};J.useEffect(()=>{if(l.mode!=="scan"){a(!1),r(Hp);return}const W=[l.baseGuild,...l.partnerGuilds].filter(Boolean);if(W.length===0){a(!1),r([]);return}let H=!1;async function q(){var K,G,te,ne,U,Z,he,ie,fe,be;a(!0);try{const ye=[];for(const _e of W){const we=mpe(_e);if(!we)continue;const de=Ot(it,`guilds/${we}/latest/latest`),pe=await Os(de),re=pe.exists()?pe.data():null,$e=(U=(ne=(G=(K=_e.name)==null?void 0:K.trim())!=null?G:re==null?void 0:re.name)!=null?ne:(te=re==null?void 0:re.values)==null?void 0:te.Name)!=null?U:we,He=(be=(fe=(he=(Z=_e.server)==null?void 0:Z.trim())!=null?he:re==null?void 0:re.server)!=null?fe:(ie=re==null?void 0:re.values)==null?void 0:ie.Server)!=null?be:null,pt=Ot(it,`guilds/${we}/snapshots/members_summary`),It=await Os(pt);if(!It.exists())continue;const Mt=It.data();(Array.isArray(Mt.members)?Mt.members:[]).forEach(ss=>{ye.push(hpe(ss,$e,He))})}H||r(ye)}catch(ye){console.error("[FusionPlanner] Failed to load members",ye),H||r([])}finally{H||a(!1)}}return r([]),q(),()=>{H=!0}},[l.baseGuild,l.partnerGuilds,l.mode]),J.useEffect(()=>{i||h(W=>W.map(H=>{var te;const q=new Set(s.map(ne=>ne.id)),K={...H.decisions},G={...(te=H.targetGuildAssignments)!=null?te:{}};return s.forEach(ne=>{K[ne.id]||(K[ne.id]="undecided"),G[ne.id]||(G[ne.id]="none")}),Object.keys(K).forEach(ne=>{q.has(ne)||delete K[ne]}),Object.keys(G).forEach(ne=>{q.has(ne)||delete G[ne]}),{...H,decisions:K,targetGuildAssignments:G}}))},[s,i]);const _=W=>{d(H=>({...H,mode:W}))},A=W=>{d(H=>{var K,G,te;const q=(K=H.baseGuild)!=null?K:{id:"base-1",kind:"base",name:"",server:""};return{...H,baseGuild:{...q,...W.id?{id:W.id}:{},name:(G=W.name)!=null?G:q.name,server:(te=W.server)!=null?te:q.server}}})},F=W=>{var G;if(!W.name.trim()||!W.server.trim())return;const H=W.name.trim(),q=W.server.trim(),K=(G=W.id)==null?void 0:G.trim();d(te=>({...te,partnerGuilds:[...te.partnerGuilds,{id:K&&!K.startsWith("partner-")?K:`partner-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`,name:H,server:q,kind:"partner"}]}))},P=W=>{d(H=>({...H,partnerGuilds:H.partnerGuilds.filter(q=>q.id!==W)}))},B=()=>{switch(t){case"setup":return n.jsx(xue,{setupState:l,onChangeMode:_,onChangeBaseGuild:A,onAddPartnerGuild:F,onRemovePartnerGuild:P});case"members":return n.jsx(mhe,{members:s,scenario:v,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:M,onChangeScenarioMaxSlots:T,setupState:l});case"overview":return n.jsx(Jhe,{members:s,scenario:v,setupState:l,onChangeScenarioDecision:R,onChangeScenarioTargetGuild:M,onAddPartnerGuild:W=>F({name:W,server:"tbd"})});case"scenarios":return n.jsx(Tme,{scenarios:u,activeScenarioId:m,onSetActiveScenario:g,onCreateScenario:y,onDuplicateScenario:w,onRenameScenario:D,onDeleteScenario:k});case"result":return n.jsx(upe,{members:s,scenario:v,setupState:l});default:return null}};return n.jsx(Pt,{title:"Guild Hub",subtitle:"Fusion Planner",centerFramed:!1,children:n.jsxs("div",{className:st.page,children:[n.jsxs("header",{className:st.header,children:[n.jsxs("div",{className:st.headerLeading,children:[n.jsx(rs,{to:"/guild-hub",className:st.backLink,children:"Back to Guild Hub"}),n.jsxs("div",{className:st.headerStack,children:[n.jsx("p",{className:st.kicker,children:"Guild Hub"}),n.jsx("h1",{className:st.title,children:"Fusion Planner"}),n.jsx("p",{className:st.subtitle,children:"Plan guild merges with slots, scenarios and results."})]})]}),n.jsxs("div",{className:st.headerActions,children:[n.jsx("button",{type:"button",className:st.primaryAction,children:"Neues Setup"}),n.jsx("button",{type:"button",className:st.secondaryAction,children:"Checkliste"})]})]}),C.length?n.jsx("div",{className:st.plannerNotice,role:"status","aria-live":"polite",children:C.map(W=>n.jsxs("div",{className:`${st.noticeItem} ${W.toLowerCase().includes("no base guild")?st.noticeWarning:""}`,children:[n.jsx("span",{className:st.noticeDot,"aria-hidden":!0}),n.jsx("span",{children:W})]},W))}):null,n.jsxs("section",{className:st.tabSection,"aria-label":"Fusion Planner Tabs",children:[n.jsx("div",{className:st.tabBar,children:rk.map(W=>{const H=W.key===t;return n.jsxs("button",{type:"button",className:`${st.tabItem} ${H?st.tabItemActive:""}`,onClick:()=>e(W.key),"aria-pressed":H,children:[n.jsx("span",{className:st.tabLabel,children:W.label}),n.jsx("span",{className:st.tabHelper,children:W.helper})]},W.key)})}),n.jsxs("div",{className:st.tabPanel,children:[n.jsx("span",{className:st.tabBadge,children:($=rk.find(W=>W.key===t))==null?void 0:$.label}),B()]})]}),n.jsxs("section",{className:st.infoStrip,children:[n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Status"}),n.jsx("strong",{children:"Entwurf"}),n.jsx("p",{className:st.infoHint,children:"Bereit fuer weitere Eingaben."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Slots geplant"}),n.jsx("strong",{children:"0 / 40"}),n.jsx("p",{className:st.infoHint,children:"Platzhalter fuer spaeteres Slot-Mapping."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Szenarien"}),n.jsx("strong",{children:"3"}),n.jsx("p",{className:st.infoHint,children:"Baseline, Optimistic, Risiko."})]}),n.jsxs("div",{className:st.infoBlock,children:[n.jsx("span",{className:st.infoLabel,children:"Letztes Update"}),n.jsx("strong",{children:"vor wenigen Minuten"}),n.jsx("p",{className:st.infoHint,children:"Dummy-Text wird spaeter dynamisch ersetzt."})]})]}),n.jsx("section",{className:st.stageGrid,children:ppe.map(W=>n.jsxs("article",{className:st.panel,children:[n.jsxs("div",{className:st.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:st.panelKicker,children:W.step}),n.jsx("h2",{className:st.panelTitle,children:W.title}),n.jsx("p",{className:st.panelLead,children:W.description})]}),W.badge?n.jsx("span",{className:st.badge,children:W.badge}):null]}),n.jsx("div",{className:st.panelBody,children:n.jsx("div",{className:st.placeholderGrid,children:W.placeholders.map(H=>n.jsxs("div",{className:st.placeholderCard,children:[n.jsx("div",{className:st.placeholderTitle,children:H}),n.jsx("p",{className:st.placeholderText,children:"Strukturierte Flaeche fuer spaetere Eingaben."})]},H))})})]},W.key))}),n.jsx("section",{className:st.helperSection,children:n.jsxs("div",{className:st.helperCard,children:[n.jsxs("div",{children:[n.jsx("p",{className:st.helperKicker,children:"Result"}),n.jsx("h3",{className:st.helperTitle,children:"Finaler Merge-Plan"}),n.jsx("p",{className:st.helperText,children:"Zusammenfassung fuer Freigaben, inklusive KPIs, Risiken und Kommunikationsplan."})]}),n.jsxs("div",{className:st.helperActions,children:[n.jsx("button",{type:"button",className:st.secondaryAction,children:"Teilen"}),n.jsx("button",{type:"button",className:st.primaryAction,children:"Review starten"})]})]})})]})})}const P0=["EU-01","EU-02","US-01","US-02","ASIA-01"],ih=new Intl.NumberFormat("de-DE");function gpe(){const t=Td("(min-width: 768px)"),[e,s]=J.useState("all"),[r,i]=J.useState(null),[a,l]=J.useState(null),[d,u]=J.useState(null),[h,m]=J.useState(null),g=[r,a].filter(Boolean).length,v=J.useMemo(()=>{const P=[d,h].filter(Boolean);if(!P.length)return 0;const B=P.reduce(($,W)=>{var H;return $+((H=W.members)!=null?H:0)},0);return Math.round(B/P.length)},[d,h]),[b,N]=J.useState(null),[S,C]=J.useState(!1),R=J.useRef(null);Ed(R,S&&!t),J.useEffect(()=>{t&&C(!1)},[t]),J.useEffect(()=>{if(!b)return;const P=$=>{const W=$.target;W&&(W.closest(`.${ae.freshnessBadge}`)||W.closest(`.${ae.freshnessPopover}`)||N(null))},B=$=>{$.key==="Escape"&&N(null)};return document.addEventListener("pointerdown",P),document.addEventListener("keydown",B),()=>{document.removeEventListener("pointerdown",P),document.removeEventListener("keydown",B)}},[b]);const M=J.useMemo(()=>d?Ch(d.nextUpdateAt,Date.now()):"",[d]),T=J.useMemo(()=>h?Ch(h.nextUpdateAt,Date.now()):"",[h]),y=()=>C(!0),w=()=>C(!1),D=P=>{s(P)},k=(P,B)=>{P==="guildA"?(i(B.id),u(B)):(l(B.id),m(B))},_=P=>{P==="guildA"?(i(null),u(null)):(l(null),m(null))},A=P=>{N(B=>B===P?null:P)},F=d&&h;return n.jsxs(Pt,{title:"Guild Hub",subtitle:"Gildenvergleich",centerFramed:!1,children:[n.jsxs("div",{className:ae.page,children:[n.jsxs("header",{className:ae.header,children:[n.jsxs("div",{className:ae.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Guild Hub"}),n.jsx("h1",{className:ae.title,children:"Gilden vergleichen"}),n.jsx("p",{className:ae.subtitle,children:"Waehle zwei Gilden, gleiche Kennzahlen ab und sichere Risiken ab, bevor du dich fuer oder gegen einen Zusammenschluss entscheidest."})]}),n.jsx("div",{className:ae.headerActions,children:!t&&n.jsx("button",{type:"button",className:ae.secondaryAction,onClick:y,children:"Filter"})})]}),n.jsxs("div",{className:ae.infoStrip,children:[n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Pool"}),n.jsxs("strong",{children:[ih.format(g)," Gilden"]})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Durchschnitt Mitglieder"}),n.jsx("strong",{children:ih.format(v)})]}),n.jsxs("div",{className:ae.infoCard,children:[n.jsx("span",{className:ae.infoLabel,children:"Serverfilter"}),n.jsx("strong",{children:e==="all"?"Alle":e})]})]}),t&&n.jsx("div",{className:ae.inlineFilters,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:P=>D(P.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),P0.map(P=>n.jsx("option",{value:P,children:P},P))]})]})})]}),n.jsxs("div",{className:ae.layout,children:[n.jsxs("section",{className:ae.selectionColumn,children:[n.jsx(ik,{title:"Gilde A",slot:"guildA",selectedGuild:d,excludeId:a,onSelect:k,onClear:_,serverFilter:e,onServerChange:D}),n.jsx(ik,{title:"Gilde B",slot:"guildB",selectedGuild:h,excludeId:r,onSelect:k,onClear:_,serverFilter:e,onServerChange:D})]}),n.jsxs("section",{className:ae.comparisonColumn,children:[n.jsxs("div",{className:ae.comparisonCard,children:[n.jsxs("div",{className:ae.comparisonHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.kicker,children:"Vergleich"}),n.jsx("h2",{className:ae.sectionTitle,children:"Kennzahlen"})]}),F&&n.jsxs("span",{className:ae.diffBadge,children:["Delta Mitglieder:"," ",ih.format(d.members-h.members)]})]}),F?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:ae.metricGrid,children:[n.jsx(ak,{label:"Mitglieder",aValue:d.members,bValue:h.members}),n.jsx(ak,{label:"Durchschnittslevel",aValue:d.avgLevel,bValue:h.avgLevel,isDecimal:!0}),n.jsx(xpe,{guildA:d,guildB:h,countdownA:M,countdownB:T,activePopover:b,onToggle:A})]}),n.jsx(ype,{guildA:d,guildB:h})]}):n.jsx("div",{className:ae.emptyState,children:n.jsx("p",{children:"Waehle zwei Gilden aus, um den direkten Vergleich zu starten."})})]}),n.jsxs("div",{className:ae.supportPanels,children:[n.jsx(vpe,{}),n.jsx(bpe,{})]})]})]})]}),!t&&n.jsx("div",{className:`${ae.sheetOverlay} ${S?ae.sheetOpen:""}`,children:n.jsxs("div",{className:ae.sheet,role:"dialog","aria-modal":"true",ref:R,children:[n.jsxs("header",{className:ae.sheetHeader,children:[n.jsx("h3",{children:"Filter"}),n.jsx("button",{type:"button",className:ae.clearButton,onClick:w,children:"Schliessen"})]}),n.jsx("div",{className:ae.sheetBody,children:n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:e,onChange:P=>D(P.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),P0.map(P=>n.jsx("option",{value:P,children:P},P))]})]})})]})})]})}function ik({title:t,slot:e,selectedGuild:s,excludeId:r,onSelect:i,onClear:a,serverFilter:l,onServerChange:d}){const[u,h]=J.useState(""),m=Cd(u,300);J.useEffect(()=>{h("")},[s,l]);const{results:g,loading:v}=_pe(m,l,r);return n.jsxs("article",{className:ae.selectionCard,children:[n.jsxs("div",{className:ae.slotHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.slotLabel,children:t}),n.jsx("p",{className:ae.slotStatus,children:s?"Ausgewaehlt":"Noch keine Auswahl"})]}),s&&n.jsx("button",{type:"button",className:ae.clearButton,onClick:()=>a(e),children:"Reset"})]}),n.jsxs("div",{className:ae.slotBody,children:[n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Server"}),n.jsxs("select",{className:ae.select,value:l,onChange:b=>d(b.target.value),children:[n.jsx("option",{value:"all",children:"Alle Server"}),P0.map(b=>n.jsx("option",{value:b,children:b},b))]})]}),n.jsxs("label",{className:ae.filterField,children:[n.jsx("span",{children:"Suchen"}),n.jsx("input",{className:ae.searchInput,placeholder:"Gildennamen eingeben",value:u,onChange:b=>h(b.target.value)})]}),n.jsxs("div",{className:ae.resultList,role:"list",children:[v&&n.jsx("div",{className:ae.emptyResult,children:"Lade..."}),!v&&g.length===0&&n.jsx("div",{className:ae.emptyResult,children:"Keine Gilde gefunden."}),!v&&g.map(b=>n.jsxs("div",{className:ae.resultItem,children:[n.jsxs("div",{children:[n.jsx("p",{className:ae.resultName,children:b.name}),n.jsxs("p",{className:ae.resultMeta,children:[b.server," - ",b.members," Mitglieder"]})]}),n.jsx("button",{type:"button",className:ae.selectButton,onClick:()=>i(e,b),children:"Waehlen"})]},b.id))]}),s&&n.jsxs("div",{className:ae.selectedCard,children:[n.jsx("p",{className:ae.selectedName,children:s.name}),n.jsxs("p",{className:ae.selectedMeta,children:[s.server," - ",s.members," Mitglieder - Durchschnittslevel"," ",s.avgLevel.toFixed(1)]}),n.jsx("p",{className:ae.selectedTagline,children:s.tagline})]})]})]})}function ak({label:t,aValue:e,bValue:s,isDecimal:r=!1}){const i=d=>r?d.toFixed(1).replace(".",","):ih.format(d),a=e-s;let l="gleich";if(a!==0){const d=r?Math.abs(a).toFixed(1).replace(".",","):ih.format(Math.abs(a));l=a>0?`+${d}`:`-${d}`}return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:t}),n.jsxs("div",{className:ae.metricValues,children:[n.jsx("span",{"aria-label":"Gilde A",children:i(e)}),n.jsx("span",{className:ae.metricDivider,children:"vs"}),n.jsx("span",{"aria-label":"Gilde B",children:i(s)})]}),n.jsx("p",{className:ae.metricDelta,children:l})]})}function xpe({guildA:t,guildB:e,countdownA:s,countdownB:r,activePopover:i,onToggle:a}){return n.jsxs("div",{className:ae.metricCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Freshness"}),n.jsx("div",{className:ae.freshnessRow,children:[t,e].map(l=>{const d=l.id===t.id?s:r,u=`fresh-${l.id}`,h=i===u;return n.jsxs("div",{className:ae.freshnessItem,children:[n.jsxs("button",{type:"button",className:ae.freshnessBadge,"aria-haspopup":"dialog","aria-expanded":h,onClick:()=>a(u),children:[n.jsx("span",{children:l.freshness.toUpperCase()}),n.jsx("small",{children:em(l.lastScanAt)})]}),h&&n.jsxs("div",{className:ae.freshnessPopover,role:"dialog",children:[n.jsx("p",{className:ae.popoverTitle,children:l.name}),n.jsxs("dl",{children:[n.jsxs("div",{children:[n.jsx("dt",{children:"Status"}),n.jsx("dd",{children:Ob[l.freshness]})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Zuletzt gescannt"}),n.jsx("dd",{children:ia(l.lastScanAt)})]}),n.jsxs("div",{children:[n.jsx("dt",{children:"Naechstes Update"}),n.jsxs("dd",{children:[ia(l.nextUpdateAt)," (",d,")"]})]})]})]})]},l.id)})})]})}function ype({guildA:t,guildB:e}){const s=J.useMemo(()=>Array.from(new Set([...t.classes,...e.classes].map(r=>r.label))),[t.classes,e.classes]);return n.jsxs("div",{className:ae.classCard,children:[n.jsx("p",{className:ae.metricLabel,children:"Klassenverteilung"}),n.jsx("div",{className:ae.classGrid,children:[t,e].map(r=>n.jsxs("div",{className:ae.classColumn,children:[n.jsx("h3",{children:r.name}),n.jsx("div",{className:ae.classBar,"aria-label":`Klassenverteilung ${r.name}`,children:r.classes.map(i=>n.jsxs("span",{style:{width:`${i.percent}%`},className:ae.classSlice,children:[n.jsx("small",{children:i.label}),n.jsxs("strong",{children:[i.percent,"%"]})]},i.label))})]},r.id))}),n.jsx("ul",{className:ae.classLegend,children:s.map(r=>n.jsx("li",{children:r},r))})]})}function vpe(){const t=["Audit der Rollenabdeckung (Tank/Heal/Support)","Loot-Regeln angleichen und dokumentieren","Raid-Kalender synchronisieren","Kommunikationskanaele zusammenfuehren","Server-Transfers und Namenskonflikte pruefen"];return n.jsxs("section",{className:ae.checklistCard,children:[n.jsx("h3",{children:"Vor dem Vergleich pruefen"}),n.jsx("ul",{className:ae.checklist,children:t.map(e=>n.jsx("li",{children:e},e))})]})}function bpe(){return n.jsxs("section",{className:ae.infoCardExtended,children:[n.jsx("h3",{children:"Transfers-Diff"}),n.jsxs("p",{children:["Hier erscheint spaeter die Auswertung aus ",n.jsx("code",{children:"lib/guilds/transfers/"}),". Aktuell nur eine Info-Box, damit der Slot sichtbar bleibt."]}),n.jsx("p",{className:ae.infoNote,children:"Bereite schon jetzt deine Kriterien vor, damit die spaetere Automatik direkt Daten aufnehmen kann."}),n.jsx("button",{type:"button",className:ae.secondaryAction,disabled:!0,children:"Modul folgt"})]})}function _pe(t,e,s){const[r,i]=J.useState([]),[a,l]=J.useState(!1);return J.useEffect(()=>{const d=t.trim();if(d.length===0){i([]),l(!1);return}let u=!1;async function h(){l(!0);try{const m=d.toLowerCase(),g=Gh(it,"latest"),v=await an(kn(g,Ra("nameFold"),Dl(m),Ml(m+""),zn(15))),b=await an(kn(g,Zi("nameNgrams","array-contains",m),zn(15))),N=new Set,S=[],C=R=>{var B,$,W,H,q,K,G,te,ne,U,Z,he,ie,fe,be,ye,_e,we,de,pe,re;const M=R.data(),y=(B=R.ref.parent)==null?void 0:B.parent,w=y==null?void 0:y.parent;if((w==null?void 0:w.id)!=="guilds")return;const k=(W=($=y==null?void 0:y.id)!=null?$:M.guildIdentifier)!=null?W:R.id;if(!k||N.has(k)||s&&k===s)return;const _=(K=(q=M.name)!=null?q:(H=M.values)==null?void 0:H.Name)!=null?K:"Unbekannte Gilde",A=(ne=(te=M.server)!=null?te:(G=M.values)==null?void 0:G.Server)!=null?ne:"Unknown";if(e!=="all"&&A!==e)return;const F=(fe=(ie=(Z=M.memberCount)!=null?Z:(U=M.values)==null?void 0:U["Guild Member Count"])!=null?ie:(he=M.values)==null?void 0:he.GuildMemberCount)!=null?fe:0,P=(_e=(ye=M.updatedAt)!=null?ye:(be=M.values)==null?void 0:be.UpdatedAt)!=null?_e:M.timestamp?new Date(M.timestamp*1e3).toISOString():new Date().toISOString();N.add(k),S.push({id:k,name:_,tagline:(we=M.tagline)!=null?we:"",server:A,members:F,avgLevel:(re=(pe=M.avgLevel)!=null?pe:(de=M.values)==null?void 0:de.AvgLevel)!=null?re:0,lastScanAt:P,updatedAt:P,nextUpdateAt:P,freshness:"unknown",classes:[]})};v.forEach(C),b.forEach(C),u||(S.sort((R,M)=>R.name.localeCompare(M.name)),i(S))}catch(m){console.error("[GuildHub CompareGuilds] guild search failed",m),u||i([])}finally{u||l(!1)}}return h(),()=>{u=!0}},[t,e,s]),{results:r,loading:a}}const wpe="_page_o27vc_1",jpe="_header_o27vc_13",Spe="_headerStack_o27vc_25",Npe="_kicker_o27vc_37",kpe="_title_o27vc_53",Cpe="_headerActions_o27vc_65",Tpe="_primaryAction_o27vc_77",Epe="_secondaryAction_o27vc_79",Ape="_infoStrip_o27vc_109",Ipe="_infoPill_o27vc_129",Ppe="_freshnessWrapper_o27vc_163",Rpe="_freshnessBadge_o27vc_171",Lpe="_popover_o27vc_191",Dpe="_popoverLabel_o27vc_221",Mpe="_filterToolbar_o27vc_231",Fpe="_filterSheetButton_o27vc_241",Bpe="_inlineFilters_o27vc_259",$pe="_searchInput_o27vc_271",Ope="_select_o27vc_273",Vpe="_chipGroup_o27vc_295",Upe="_chip_o27vc_295",zpe="_chipActive_o27vc_325",Hpe="_levelRow_o27vc_335",Gpe="_sortControls_o27vc_363",Wpe="_sortLabel_o27vc_375",qpe="_directionButton_o27vc_385",Kpe="_listBody_o27vc_403",Qpe="_tableWrapper_o27vc_415",Xpe="_table_o27vc_415",Ype="_cardFooter_o27vc_459",Jpe="_panel_o27vc_461",Zpe="_formPanel_o27vc_463",efe="_statusSelect_o27vc_481",tfe="_stickyColumn_o27vc_515",sfe="_rowButton_o27vc_529",nfe="_scanBadge_o27vc_545",rfe="_cardList_o27vc_561",ife="_card_o27vc_459",afe="_cardHeader_o27vc_593",ofe="_cardTitle_o27vc_605",lfe="_cardMeta_o27vc_623",cfe="_cardNotes_o27vc_635",dfe="_emptyState_o27vc_659",ufe="_sheetBackdrop_o27vc_675",hfe="_sheet_o27vc_675",mfe="_sheetHandle_o27vc_717",pfe="_sheetBody_o27vc_733",ffe="_sheetLabel_o27vc_749",gfe="_sheetActions_o27vc_785",xfe="_overlay_o27vc_797",yfe="_drawer_o27vc_837",vfe="_modal_o27vc_845",bfe="_panelHeader_o27vc_853",_fe="_section_o27vc_867",wfe="_tagRow_o27vc_899",jfe="_historyList_o27vc_913",Sfe="_panelFooter_o27vc_943",Nfe="_formOverlay_o27vc_955",kfe="_formGrid_o27vc_1003",Cfe="_warning_o27vc_1015",Tfe="_pagination_o27vc_1033",Te={page:wpe,header:jpe,headerStack:Spe,kicker:Npe,title:kpe,headerActions:Cpe,primaryAction:Tpe,secondaryAction:Epe,infoStrip:Ape,infoPill:Ipe,freshnessWrapper:Ppe,freshnessBadge:Rpe,popover:Lpe,popoverLabel:Dpe,filterToolbar:Mpe,filterSheetButton:Fpe,inlineFilters:Bpe,searchInput:$pe,select:Ope,chipGroup:Vpe,chip:Upe,chipActive:zpe,levelRow:Hpe,sortControls:Gpe,sortLabel:Wpe,directionButton:qpe,listBody:Kpe,tableWrapper:Qpe,table:Xpe,cardFooter:Ype,panel:Jpe,formPanel:Zpe,statusSelect:efe,stickyColumn:tfe,rowButton:sfe,scanBadge:nfe,cardList:rfe,card:ife,cardHeader:afe,cardTitle:ofe,cardMeta:lfe,cardNotes:cfe,emptyState:dfe,sheetBackdrop:ufe,sheet:hfe,sheetHandle:mfe,sheetBody:pfe,sheetLabel:ffe,sheetActions:gfe,overlay:xfe,drawer:yfe,modal:vfe,panelHeader:bfe,section:_fe,tagRow:wfe,historyList:jfe,panelFooter:Sfe,formOverlay:Nfe,formGrid:kfe,warning:Cfe,pagination:Tfe},Yf=["Warrior","Mage","Scout","Assassin","Battle Mage","Druid","Bard"],Jf=["EU-01","EU-02","US-01","US-02","ASIA-01"],Vb={f0:"F0 - <1h",f1:"F1 - 1-4h",f2:"F2 - 4-12h",f3:"F3 - 12-24h",f4:"F4 - 1-2d",f5:"F5 - 2-4d",f6:"F6 - 4-7d",f7:"F7 - >7d",unknown:"Unbekannt"},ok={f0:0,f1:1,f2:2,f3:3,f4:4,f5:5,f6:6,f7:7,unknown:8},wv={q:"",status:"all",classes:[],servers:[],lvMin:1,lvMax:200,sort:"updatedAt",dir:"desc",page:1,pageSize:6},Efe=[{id:"wl-001",name:"Lyra Ashwood",classRole:"Mage",level:192,server:"EU-01",status:"in_review",notes:"Hohe Aktivitaet, bringt Raid-Heal mit. Hat Interesse an Support-Rollen. Discord verifiziert.",contact:"Discord: lyra#0291",source:"Community Waitlist",tags:["raid","support"],lastScanAt:No(2),updatedAt:No(3),freshness:"f1",history:[{date:Dr(1),message:"Interview abgeschlossen"},{date:Dr(3),message:"Profil angelegt"}]},{id:"wl-002",name:"Torren Vale",classRole:"Warrior",level:185,server:"EU-02",status:"new",notes:"Tank fuer Abend-Raids, bisher ohne Gilde. Gute Logs, keine Streaming-Praesenz.",contact:"Email: torren@example.com",source:"Offline Bewerbungsformular",tags:["tank"],lastScanAt:No(10),updatedAt:No(11),freshness:"f3",history:[{date:Dr(2),message:"Wartet auf Erstgespraech"}]},{id:"wl-003",name:"Seris Bloom",classRole:"Druid",level:178,server:"US-01",status:"accepted",notes:"Healer + Flex-Scout. Bereits auf dem Discord. Benoetigt Transferhilfe.",contact:"Discord: seris#0177",source:"Guild Referral",tags:["healer","flex"],lastScanAt:No(20),updatedAt:No(5),freshness:"f4",history:[{date:Dr(4),message:"Probe erfolgreich"},{date:Dr(6),message:"Bewerbung angenommen"}]},{id:"wl-004",name:"Draxen Holt",classRole:"Scout",level:165,server:"US-02",status:"declined",notes:"PvP Spieler, konnte Raid-Pflichten nicht sicherstellen. Freundlich verabschiedet.",contact:"Discord: draxen#0901",source:"Seasonal Event",tags:["pvp"],lastScanAt:Dr(2),updatedAt:Dr(2),freshness:"f5",history:[{date:Dr(2),message:"Absage gesendet"}]},{id:"wl-005",name:"Mira Lios",classRole:"Battle Mage",level:188,server:"EU-01",status:"withdrawn",notes:"Hat ein anderes Angebot angenommen. Moegliche Rueckkehr offen lassen.",contact:"Email: mira@example.com",source:"Discord DM",tags:["backup"],lastScanAt:Dr(3),updatedAt:Dr(1),freshness:"f6",history:[{date:Dr(1),message:"Bewerbung zurueckgezogen"},{date:Dr(5),message:"Interview geplant"}]},{id:"wl-006",name:"Kael Thorn",classRole:"Assassin",level:190,server:"ASIA-01",status:"new",notes:"Fokus auf Mythic Dungeons. Gute Logs, benoetigt Uebergangshilfe.",contact:"Discord: kael#4488",source:"Community Waitlist",tags:["mythic"],lastScanAt:No(5),updatedAt:No(5),freshness:"f2",history:[{date:Dr(1),message:"Profil verifiziert"}]}];function lk(t){return{...t,lvMin:Math.max(1,t.lvMin),lvMax:Math.max(t.lvMin,Math.min(200,t.lvMax)),page:Math.max(1,t.page),pageSize:Math.min(25,Math.max(4,t.pageSize)),classes:Array.from(new Set(t.classes)),servers:Array.from(new Set(t.servers))}}function Afe(t,e,s){const r=s.toLowerCase();return t.filter(i=>{const a=r===""||i.name.toLowerCase().includes(r)||i.notes.toLowerCase().includes(r)||i.server.toLowerCase().includes(r),l=e.status==="all"||i.status===e.status,d=e.classes.length===0||e.classes.includes(i.classRole),u=e.servers.length===0||e.servers.includes(i.server),h=i.level>=e.lvMin&&i.level<=e.lvMax;return a&&l&&d&&u&&h})}function Ife(t,e,s){const r=[...t];return r.sort((i,a)=>{let l=0;switch(e){case"name":l=i.name.localeCompare(a.name);break;case"level":l=i.level-a.level;break;case"status":l=i.status.localeCompare(a.status);break;case"lastScan":l=new Date(i.lastScanAt).getTime()-new Date(a.lastScanAt).getTime();break;case"updatedAt":default:l=new Date(i.updatedAt).getTime()-new Date(a.updatedAt).getTime();break}return s==="asc"?l:-l}),r}function Pfe(t,e,s){const r=(e-1)*s;return t.slice(r,r+s)}function pf(t){return new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}function Rfe(t){const e=Date.now()-new Date(t).getTime(),s=Math.round(e/6e4);if(s<60)return`${s} min`;const r=Math.round(s/60);return r<48?`${r} h`:`${Math.round(r/24)} d`}function Lfe(t){return t.length?t.reduce((e,s)=>e?ok[s.freshness]>ok[e.freshness]?s:e:s,null):null}function Dr(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString()}function No(t){const e=new Date;return e.setHours(e.getHours()-t),e.toISOString()}function Dfe(){var H;const[t,e]=J.useState(Efe),[s,r]=J.useState(wv),[i,a]=J.useState(wv),l=Cd(s.q,300),d=J.useMemo(()=>{const q=Afe(t,s,l);return Ife(q,s.sort,s.dir)},[t,s,l]),u=J.useMemo(()=>Pfe(d,s.page,s.pageSize),[d,s.page,s.pageSize]),h=Math.max(1,Math.ceil(d.length/s.pageSize)),m=Td("(min-width: 768px)"),g=Td("(min-width: 1024px)"),[v,b]=J.useState(!1),[N,S]=J.useState(null),C=(H=t.find(q=>q.id===N))!=null?H:null,R=J.useRef(null);Ed(R,!!C&&!g);const[M,T]=J.useState(null),[y,w]=J.useState(!1),D=J.useRef(null);Ed(D,y);const k=J.useMemo(()=>Lfe(t),[t]),_=k&&k.lastScanAt?Rfe(k.lastScanAt):"unbekannt",A=q=>{const K=lk(q);r(K),a(K)},F=(q,K)=>{const G=lk({...s,[q]:K,page:q==="page"?K:1});A(G)},P=()=>{A(i),b(!1)},B=()=>{A(wv),b(!1)},$=(q,K)=>{e(G=>G.map(te=>te.id===q?{...te,status:K,updatedAt:new Date().toISOString()}:te))},W=q=>{e(K=>K.some(te=>te.id===q.id)?K.map(te=>te.id===q.id?q:te):[q,...K]),w(!1)};return n.jsxs(Pt,{title:"Guild Hub",subtitle:"Waitlist",centerFramed:!1,children:[n.jsxs("div",{className:Te.page,children:[n.jsxs("header",{className:Te.header,children:[n.jsxs("div",{className:Te.headerStack,children:[n.jsxs("div",{children:[n.jsx("p",{className:Te.kicker,children:"Recruiting"}),n.jsx("h1",{className:Te.title,children:"Waitlist"})]}),n.jsxs("div",{className:Te.headerActions,children:[n.jsx("button",{type:"button",className:Te.primaryAction,onClick:()=>{T(null),w(!0)},children:"Neuer Eintrag"}),!m&&n.jsx("button",{type:"button",className:Te.secondaryAction,"aria-label":"Filter oeffnen",onClick:()=>b(!0),children:"Filter"})]})]}),n.jsxs("div",{className:Te.infoStrip,children:[n.jsx(jv,{label:"Neu",value:d.filter(q=>q.status==="new").length}),n.jsx(jv,{label:"In Review",value:d.filter(q=>q.status==="in_review").length}),n.jsx(jv,{label:"Zugesagt",value:d.filter(q=>q.status==="accepted").length}),k&&n.jsx(Mfe,{label:Vb[k.freshness],updatedAt:k.lastScanAt,countdown:_})]})]}),n.jsx("section",{className:Te.filterToolbar,children:m?n.jsx(Ffe,{filters:s,onChange:F,onToggleClass:q=>{const K=s.classes.includes(q)?s.classes.filter(G=>G!==q):[...s.classes,q];F("classes",K)},onToggleServer:q=>{const K=s.servers.includes(q)?s.servers.filter(G=>G!==q):[...s.servers,q];F("servers",K)}}):n.jsx("button",{type:"button",className:Te.filterSheetButton,onClick:()=>b(!0),children:"Filter & Sortierung"})}),n.jsx("section",{className:Te.listBody,children:m?n.jsx(Bfe,{items:u,sort:s.sort,dir:s.dir,onSortChange:q=>{const K=s.sort===q&&s.dir==="asc"?"desc":"asc";F("sort",q),F("dir",K)},onSelect:S,onStatusChange:$}):n.jsx($fe,{items:u,onSelect:S,onStatusChange:$})}),n.jsx(Vfe,{page:s.page,totalPages:h,onChange:q=>F("page",q)})]}),v&&n.jsx(Ofe,{filters:i,onChange:a,onToggleClass:q=>a(K=>({...K,classes:K.classes.includes(q)?K.classes.filter(G=>G!==q):[...K.classes,q]})),onToggleServer:q=>a(K=>({...K,servers:K.servers.includes(q)?K.servers.filter(G=>G!==q):[...K.servers,q]})),onClose:()=>b(!1),onApply:P,onReset:B}),C&&n.jsx(NA,{ref:R,item:C,mode:g?"drawer":"modal",onClose:()=>S(null),onEdit:()=>{T(C),w(!0),S(null)}}),y&&n.jsx(kA,{ref:D,item:M,entries:t,onClose:()=>w(!1),onSubmit:W})]})}function jv({label:t,value:e}){return n.jsxs("div",{className:Te.infoPill,children:[n.jsx("span",{children:t}),n.jsx("strong",{children:e})]})}function Mfe({label:t,updatedAt:e,countdown:s}){const[r,i]=J.useState(!1);return n.jsxs("div",{className:Te.freshnessWrapper,children:[n.jsx("button",{type:"button",className:Te.freshnessBadge,onClick:()=>i(a=>!a),"aria-expanded":r,children:t}),r&&n.jsxs("div",{className:Te.popover,children:[n.jsxs("div",{children:[n.jsx("span",{className:Te.popoverLabel,children:"Letzter Scan"}),n.jsx("strong",{children:pf(e)})]}),n.jsxs("div",{children:[n.jsx("span",{className:Te.popoverLabel,children:"Aktualisiert"}),n.jsx("strong",{children:s})]})]})]})}function Ffe({filters:t,onChange:e,onToggleClass:s,onToggleServer:r}){return n.jsxs("div",{className:Te.inlineFilters,children:[n.jsx("input",{type:"search",name:"waitlistSearch","aria-label":"Waitlist Suche",className:Te.searchInput,placeholder:"Suchen...",value:t.q,onChange:i=>e("q",i.target.value)}),n.jsxs("select",{name:"waitlistStatus","aria-label":"Waitlist Status",className:Te.select,value:t.status,onChange:i=>e("status",i.target.value),children:[n.jsx("option",{value:"all",children:"Status (alle)"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("div",{className:Te.chipGroup,children:Yf.map(i=>{const a=t.classes.includes(i);return n.jsx("button",{type:"button",className:`${Te.chip} ${a?Te.chipActive:""}`,onClick:()=>s(i),children:i},i)})}),n.jsx("div",{className:Te.chipGroup,children:Jf.map(i=>{const a=t.servers.includes(i);return n.jsx("button",{type:"button",className:`${Te.chip} ${a?Te.chipActive:""}`,onClick:()=>r(i),children:i},i)})}),n.jsxs("div",{className:Te.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistLvMin","aria-label":"Level Minimum",value:t.lvMin,min:1,max:t.lvMax,onChange:i=>e("lvMin",Number(i.target.value))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistLvMax","aria-label":"Level Maximum",value:t.lvMax,min:t.lvMin,max:200,onChange:i=>e("lvMax",Number(i.target.value))})]})]}),n.jsxs("div",{className:Te.sortControls,children:[n.jsx("label",{className:Te.sortLabel,children:"Sortieren"}),n.jsxs("select",{value:t.sort,name:"waitlistSort","aria-label":"Sortierung",onChange:i=>e("sort",i.target.value),children:[n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"level",children:"Level"}),n.jsx("option",{value:"status",children:"Status"}),n.jsx("option",{value:"lastScan",children:"Letzter Scan"}),n.jsx("option",{value:"updatedAt",children:"Aktualisiert"})]}),n.jsx("button",{type:"button",className:Te.directionButton,onClick:()=>e("dir",t.dir==="asc"?"desc":"asc"),children:t.dir==="asc"?"ASC":"DESC"})]})]})}function Bfe({items:t,sort:e,dir:s,onSortChange:r,onSelect:i,onStatusChange:a}){const l=d=>e===d?s==="asc"?" ":" ":"";return t.length?n.jsx("div",{className:Te.tableWrapper,children:n.jsxs("table",{className:Te.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsxs("th",{className:Te.stickyColumn,onClick:()=>r("name"),children:["Name",l("name")]}),n.jsx("th",{children:"Klasse"}),n.jsxs("th",{onClick:()=>r("level"),children:["Level",l("level")]}),n.jsx("th",{children:"Server"}),n.jsxs("th",{onClick:()=>r("status"),children:["Status",l("status")]}),n.jsx("th",{children:"Notizen"}),n.jsxs("th",{onClick:()=>r("lastScan"),children:["Letzter Scan",l("lastScan")]})]})}),n.jsx("tbody",{children:t.map(d=>n.jsxs("tr",{children:[n.jsx("td",{className:Te.stickyColumn,children:n.jsx("button",{type:"button",className:Te.rowButton,onClick:()=>i(d.id),children:d.name})}),n.jsx("td",{children:d.classRole}),n.jsx("td",{children:d.level}),n.jsx("td",{children:d.server}),n.jsx("td",{children:n.jsxs("select",{className:Te.statusSelect,name:`waitlistStatus-${d.id}`,"aria-label":`Status fuer ${d.name}`,value:d.status,onChange:u=>a(d.id,u.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})}),n.jsxs("td",{children:[d.notes.slice(0,64),"..."]}),n.jsx("td",{children:n.jsx("span",{className:Te.scanBadge,children:Vb[d.freshness]})})]},d.id))})]})}):n.jsx(SA,{})}function $fe({items:t,onSelect:e,onStatusChange:s}){return t.length?n.jsx("div",{className:Te.cardList,children:t.map(r=>n.jsxs("article",{className:Te.card,children:[n.jsxs("div",{className:Te.cardHeader,children:[n.jsxs("div",{children:[n.jsx("button",{type:"button",className:Te.cardTitle,onClick:()=>e(r.id),children:r.name}),n.jsxs("p",{className:Te.cardMeta,children:[r.classRole," - Lv ",r.level," - ",r.server]})]}),n.jsx("span",{className:Te.scanBadge,children:Vb[r.freshness]})]}),n.jsxs("p",{className:Te.cardNotes,children:[r.notes.slice(0,160),"..."]}),n.jsxs("div",{className:Te.cardFooter,children:[n.jsxs("select",{className:Te.statusSelect,name:`waitlistStatusCard-${r.id}`,"aria-label":`Status fuer ${r.name}`,value:r.status,onChange:i=>s(r.id,i.target.value),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]}),n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:()=>e(r.id),children:"Details"})]})]},r.id))}):n.jsx(SA,{})}function SA(){return n.jsx("div",{className:Te.emptyState,children:n.jsx("p",{children:"Keine Eintraege fuer die aktuellen Filter."})})}function Ofe({filters:t,onChange:e,onToggleClass:s,onToggleServer:r,onClose:i,onApply:a,onReset:l}){return n.jsx("div",{className:Te.sheetBackdrop,onClick:i,children:n.jsxs("div",{className:Te.sheet,onClick:d=>d.stopPropagation(),children:[n.jsx("div",{className:Te.sheetHandle}),n.jsxs("div",{className:Te.sheetBody,children:[n.jsx("h2",{children:"Filter"}),n.jsxs("label",{className:Te.sheetLabel,children:["Suche",n.jsx("input",{type:"search",name:"waitlistSheetSearch","aria-label":"Waitlist Suche",value:t.q,onChange:d=>e(u=>({...u,q:d.target.value}))})]}),n.jsxs("label",{className:Te.sheetLabel,children:["Status",n.jsxs("select",{name:"waitlistSheetStatus","aria-label":"Waitlist Status",value:t.status,onChange:d=>e(u=>({...u,status:d.target.value})),children:[n.jsx("option",{value:"all",children:"Alle"}),n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]}),n.jsxs("div",{className:Te.sheetLabel,children:["Klassen",n.jsx("div",{className:Te.chipGroup,children:Yf.map(d=>{const u=t.classes.includes(d);return n.jsx("button",{type:"button",className:`${Te.chip} ${u?Te.chipActive:""}`,"aria-label":`Klasse ${d}`,onClick:()=>s(d),children:d},d)})})]}),n.jsxs("div",{className:Te.sheetLabel,children:["Server",n.jsx("div",{className:Te.chipGroup,children:Jf.map(d=>{const u=t.servers.includes(d);return n.jsx("button",{type:"button",className:`${Te.chip} ${u?Te.chipActive:""}`,"aria-label":`Server ${d}`,onClick:()=>r(d),children:d},d)})})]}),n.jsxs("div",{className:Te.levelRow,children:[n.jsxs("label",{children:["Lv min",n.jsx("input",{type:"number",name:"waitlistSheetLvMin","aria-label":"Level Minimum",value:t.lvMin,onChange:d=>e(u=>({...u,lvMin:Number(d.target.value)}))})]}),n.jsxs("label",{children:["Lv max",n.jsx("input",{type:"number",name:"waitlistSheetLvMax","aria-label":"Level Maximum",value:t.lvMax,onChange:d=>e(u=>({...u,lvMax:Number(d.target.value)}))})]})]})]}),n.jsxs("div",{className:Te.sheetActions,children:[n.jsx("button",{type:"button",onClick:l,children:"Zuruecksetzen"}),n.jsx("button",{type:"button",className:Te.primaryAction,onClick:a,children:"Anwenden"})]})]})})}const NA=J.forwardRef(({item:t,mode:e,onClose:s,onEdit:r},i)=>n.jsx("div",{className:Te.overlay,children:n.jsxs("div",{ref:i,className:`${Te.panel} ${e==="drawer"?Te.drawer:Te.modal}`,children:[n.jsxs("header",{className:Te.panelHeader,children:[n.jsxs("div",{children:[n.jsxs("p",{className:Te.cardMeta,children:[t.classRole," - Lv ",t.level," - ",t.server]}),n.jsx("h2",{children:t.name})]}),n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:s,children:"Schliessen"})]}),n.jsxs("section",{className:Te.section,children:[n.jsx("h3",{children:"Kontakt"}),n.jsx("p",{children:t.contact}),n.jsxs("p",{children:["Quelle: ",t.source]})]}),n.jsxs("section",{className:Te.section,children:[n.jsx("h3",{children:"Notizen"}),n.jsx("p",{children:t.notes})]}),n.jsxs("section",{className:Te.section,children:[n.jsx("h3",{children:"Tags"}),n.jsx("div",{className:Te.tagRow,children:t.tags.length?t.tags.map(a=>n.jsx("span",{children:a},a)):n.jsx("span",{children:"Keine"})})]}),n.jsxs("section",{className:Te.section,children:[n.jsx("h3",{children:"Historie"}),n.jsx("ul",{className:Te.historyList,children:t.history.map(a=>n.jsxs("li",{children:[n.jsx("span",{children:pf(a.date)}),n.jsx("p",{children:a.message})]},`${a.date}-${a.message}`))})]}),n.jsxs("section",{className:Te.section,children:[n.jsx("h3",{children:"Scan-Infos"}),n.jsxs("p",{children:["Letzter Scan: ",pf(t.lastScanAt)]}),n.jsxs("p",{children:["Aktualisiert: ",pf(t.updatedAt)]})]}),n.jsxs("footer",{className:Te.panelFooter,children:[n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:r,children:"Bearbeiten"}),n.jsx("button",{type:"button",className:Te.primaryAction,onClick:s,children:"Schliessen"})]})]})}));NA.displayName="DetailPanel";const kA=J.forwardRef(({item:t,entries:e,onClose:s,onSubmit:r},i)=>{const[a,l]=J.useState(()=>t!=null?t:{id:`wl-${Date.now()}`,name:"",classRole:Yf[0],level:1,server:Jf[0],status:"new",notes:"",contact:"",source:"",tags:[],lastScanAt:new Date().toISOString(),updatedAt:new Date().toISOString(),freshness:"unknown",history:[]});J.useEffect(()=>{t&&l(t)},[JSON.stringify(t)]);const d=h=>{h.preventDefault(),r({...a,updatedAt:new Date().toISOString()})},u=e.some(h=>h.id!==a.id&&h.name.toLowerCase()===a.name.toLowerCase()&&h.server===a.server);return n.jsx("div",{className:Te.formOverlay,children:n.jsxs("form",{ref:i,className:Te.formPanel,onSubmit:d,children:[n.jsxs("header",{className:Te.panelHeader,children:[n.jsxs("div",{children:[n.jsx("p",{className:Te.cardMeta,children:t?"Bearbeiten":"Neu"}),n.jsx("h2",{children:t?t.name:"Neuer Bewerber"})]}),n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:s,children:"Schliessen"})]}),u&&n.jsx("div",{className:Te.warning,children:"Hinweis: moegliche Dublette (Name+Server)."}),n.jsxs("label",{className:Te.sheetLabel,children:["Name",n.jsx("input",{name:"waitlistFormName",value:a.name,onChange:h=>l(m=>({...m,name:h.target.value}))})]}),n.jsxs("div",{className:Te.formGrid,children:[n.jsxs("label",{children:["Klasse",n.jsx("select",{name:"waitlistFormClass",value:a.classRole,onChange:h=>l(m=>({...m,classRole:h.target.value})),children:Yf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Level",n.jsx("input",{type:"number",name:"waitlistFormLevel",value:a.level,min:1,max:200,onChange:h=>l(m=>({...m,level:Number(h.target.value)}))})]}),n.jsxs("label",{children:["Server",n.jsx("select",{name:"waitlistFormServer",value:a.server,onChange:h=>l(m=>({...m,server:h.target.value})),children:Jf.map(h=>n.jsx("option",{value:h,children:h},h))})]}),n.jsxs("label",{children:["Status",n.jsxs("select",{name:"waitlistFormStatus",value:a.status,onChange:h=>l(m=>({...m,status:h.target.value})),children:[n.jsx("option",{value:"new",children:"Neu"}),n.jsx("option",{value:"in_review",children:"In Review"}),n.jsx("option",{value:"accepted",children:"Zugesagt"}),n.jsx("option",{value:"declined",children:"Abgelehnt"}),n.jsx("option",{value:"withdrawn",children:"Zurueckgezogen"})]})]})]}),n.jsxs("label",{className:Te.sheetLabel,children:["Kontakt",n.jsx("input",{name:"waitlistFormContact",value:a.contact,onChange:h=>l(m=>({...m,contact:h.target.value}))})]}),n.jsxs("label",{className:Te.sheetLabel,children:["Quelle",n.jsx("input",{name:"waitlistFormSource",value:a.source,onChange:h=>l(m=>({...m,source:h.target.value}))})]}),n.jsxs("label",{className:Te.sheetLabel,children:["Notizen",n.jsx("textarea",{name:"waitlistFormNotes",value:a.notes,onChange:h=>l(m=>({...m,notes:h.target.value})),rows:4})]}),n.jsxs("footer",{className:Te.panelFooter,children:[n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:s,children:"Abbrechen"}),n.jsx("button",{type:"submit",className:Te.primaryAction,children:"Speichern"})]})]})})});kA.displayName="WaitlistForm";function Vfe({page:t,totalPages:e,onChange:s}){return n.jsxs("div",{className:Te.pagination,children:[n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Zurueck"}),n.jsxs("span",{children:["Seite ",t," / ",e]}),n.jsx("button",{type:"button",className:Te.secondaryAction,onClick:()=>s(Math.min(e,t+1)),disabled:t===e,children:"Weiter"})]})}const Ufe=["tab","sub","sub2","q","sort","dir","page","pageSize"];function $d(t=[]){const[e,s]=Yl(),r=J.useMemo(()=>[...t].sort().join("|"),[t]),i=J.useMemo(()=>{const m=new Set([...Ufe]);return t.forEach(g=>m.add(g)),Array.from(m)},[r]),a=J.useMemo(()=>{const m={};return i.forEach(g=>{const v=e.get(g);v!==null&&(m[g]=v)}),m},[e,i]),l=J.useCallback((m,g)=>{var b;const v=new URLSearchParams(e);Object.entries(m).forEach(([N,S])=>{S==null||S===""?v.delete(N):v.set(N,String(S))}),s(v,{replace:(b=g==null?void 0:g.replace)!=null?b:!1})},[e,s]),d=J.useCallback(m=>{const g=new URLSearchParams(e);(m&&m.length>0?m:i).forEach(b=>g.delete(b)),s(g,{replace:!0})},[e,s,i]),u=J.useCallback((m,g="")=>{var v;return(v=a[m])!=null?v:g},[a]),h=J.useCallback((m,g=0)=>{const v=a[m],b=v?Number(v):NaN;return Number.isFinite(b)?b:g},[a]);return{params:a,getParam:u,getNumberParam:h,writeParams:l,resetParams:d}}function zfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Activity"})})}function Hfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Imports"})})}function Gfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Announcements"})})}function Wfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Events"})})}function qfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Roles"})})}function Kfe(){return $d(),n.jsx("section",{style:{padding:16},children:n.jsx("h1",{children:"Guild Hub - Settings"})})}const Qfe=[{icon:n.jsx(ug,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Active Sessions",value:"1,248",hint:"+5.2% vs. last week"},{icon:n.jsx(i6,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Ingestion Rate",value:"98.4%",hint:"Stable in the last 24h"},{icon:n.jsx(QL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),label:"Service Health",value:"Operational",hint:"No incidents detected"}],Xfe=[{id:"job-sync",title:"Background job stalled",time:"2 minutes ago",scope:"jobs/pipeline"},{id:"webhook-42",title:"Webhook delivery failed",time:"18 minutes ago",scope:"webhooks/guild-sync"},{id:"scan-queue",title:"Scan queue retry limit reached",time:"36 minutes ago",scope:"scans/queue"}],Yfe=[{env:"Production",version:"2024.06.18",status:"Healthy",time:"Deployed 4h ago"},{env:"Staging",version:"2024.06.20-rc1",status:"Needs verification",time:"Awaiting QA sign-off"}];function Jfe(){return n.jsx(Pt,{title:"Admin Control Center",subtitle:"Operational overview for administrators",actions:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(rs,{to:"/admin/errors",className:"rounded-2xl border px-4 py-2 text-sm no-underline",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"View error log"}),n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},children:"Refresh data"})]}),left:n.jsx(Zfe,{}),right:n.jsx(ege,{}),centerFramed:!0,leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:Qfe.map(t=>n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[t.icon,t.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:t.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:t.hint})]},t.label))}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent incidents"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest critical signals collected across the platform."})]}),n.jsx(rs,{to:"/admin/errors",className:"text-xs no-underline",style:{color:"#5C8BC6"},children:"Go to log"})]}),n.jsx("ul",{className:"space-y-3",children:Xfe.map(t=>n.jsx("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[n.jsx(e1,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),t.title]}),n.jsxs("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:["Scope: ",t.scope]})]}),n.jsx("span",{className:"text-xs text-[#8AA5C4]",children:t.time})]})},t.id))})]})]})})}function Zfe(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Quick access"}),n.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[n.jsx(rs,{to:"/dashboard",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Global dashboard"}),n.jsx(rs,{to:"/admin/scans-uploaded",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Scans uploaded"}),n.jsx(rs,{to:"/admin/errors",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Error log"}),n.jsx(rs,{to:"/admin/creators-api",className:"rounded-xl border px-3 py-2 text-xs no-underline",style:{borderColor:"#2B4C73",background:"#1A2F4A",color:"#F5F9FF"},children:"Creator APIs"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Escalation"}),n.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-[#B0C4D9]",children:[n.jsx("li",{children:" Pager rotation: Ops Team"}),n.jsx("li",{children:" Slack channel: #sf-alerts"}),n.jsx("li",{children:" Next review: Today 17:00"})]})]})]})}function ege(){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Deployment status"}),n.jsx("ul",{className:"mt-3 space-y-2",children:Yfe.map(t=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t.env}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-[#F5F9FF]",children:t.version}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.status}),n.jsx("div",{className:"mt-1 text-[11px] text-[#8AA5C4]",children:t.time})]},t.env))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Maintenance"}),n.jsx("p",{className:"mt-2 text-xs text-[#B0C4D9]",children:"Window scheduled for Sunday 02:0004:00 UTC. Expect short downtime for guild aggregation services."})]})]})}const tge=[{id:"ERR-1201",time:"2024-06-20 12:42 UTC",service:"scans/ingest",severity:"critical",message:"Queue depth exceeded threshold (depth=1,200)"},{id:"ERR-1199",time:"2024-06-20 12:11 UTC",service:"webhooks/guild-sync",severity:"warning",message:"Webhook delivery failed after 3 retries"},{id:"ERR-1197",time:"2024-06-20 11:38 UTC",service:"jobs/pipeline",severity:"critical",message:"Worker heartbeat missing for shard eu-west-2"},{id:"ERR-1188",time:"2024-06-20 09:26 UTC",service:"api/public",severity:"info",message:"Client rate limited (userId=84322)"}];function sge(){return n.jsx(Pt,{title:"Error log",subtitle:"Chronological record of platform level issues",centerFramed:!0,mode:"page",stickyTopbar:!0,children:n.jsxs("div",{className:"rounded-2xl border",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsxs("div",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Time"}),n.jsx("span",{children:"Service"}),n.jsx("span",{className:"text-right",children:"Severity"})]}),n.jsx("ul",{children:tge.map(t=>n.jsxs("li",{className:"grid grid-cols-[120px_170px_minmax(0,1fr)_120px] gap-4 border-t px-5 py-4 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-[#8AA5C4]",children:t.id}),n.jsx("span",{className:"text-xs text-[#B0C4D9]",children:t.time}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:t.service}),n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:t.message})]}),n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-right",style:{color:nge(t.severity)},children:t.severity})]},t.id))})]})})}function nge(t){switch(t){case"critical":return"#FF6B6B";case"warning":return"#F9A825";default:return"#8AA5C4"}}const Ci={background:"#152A42",borderColor:"#2B4C73"},nd={background:"#1A2F4A",borderColor:"#2B4C73"},Sv=[{id:"sim-001",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-600*1e3),processingMs:4200,fileSizeBytes:31e5,errorCode:null},{id:"sim-002",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-1680*1e3),processingMs:5100,fileSizeBytes:287e4,errorCode:null},{id:"sim-003",status:"failed",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-obsidian",guildName:"Obsidian Pact",uploadedAt:new Date(Date.now()-2700*1e3),processingMs:2900,fileSizeBytes:332e4,errorCode:"pipeline/timeout"},{id:"sim-004",status:"success",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-4080*1e3),processingMs:4700,fileSizeBytes:305e4,errorCode:null},{id:"sim-005",status:"processing",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-720*1e3),processingMs:null,fileSizeBytes:291e4,errorCode:null},{id:"sim-006",status:"success",uploaderId:"ops-04",uploaderName:"Ops  Fynn",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-10800*1e3),processingMs:5600,fileSizeBytes:342e4,errorCode:null},{id:"sim-007",status:"failed",uploaderId:"ops-01",uploaderName:"Ops  Mira",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-300*60*1e3),processingMs:6e3,fileSizeBytes:328e4,errorCode:"ingest/schema-mismatch"},{id:"sim-008",status:"success",uploaderId:"ops-02",uploaderName:"Ops  Lyo",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-540*60*1e3),processingMs:4300,fileSizeBytes:299e4,errorCode:null},{id:"sim-009",status:"success",uploaderId:"ops-03",uploaderName:"Ops  Kaia",guildId:"guild-horizon",guildName:"Horizon Keep",uploadedAt:new Date(Date.now()-660*60*1e3),processingMs:6200,fileSizeBytes:356e4,errorCode:null},{id:"sim-010",status:"success",uploaderId:"ops-06",uploaderName:"Ops  Theo",guildId:"guild-emerald",guildName:"Emerald Vanguard",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:5100,fileSizeBytes:312e4,errorCode:null},{id:"sim-011",status:"failed",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-1560*60*1e3),processingMs:3e3,fileSizeBytes:274e4,errorCode:"pipeline/timeout"},{id:"sim-012",status:"success",uploaderId:"ops-05",uploaderName:"Ops  Nira",guildId:"guild-aurora",guildName:"Aurora Syndicate",uploadedAt:new Date(Date.now()-2880*60*1e3),processingMs:4900,fileSizeBytes:283e4,errorCode:null}];function rge(){const{data:t,loading:e,refreshing:s,error:r,refresh:i}=lge(),a=J.useMemo(()=>[{label:"Total uploads",value:si(t.metrics.totalUploads),hint:`${si(t.metrics.last24h)} in the last 24h`,icon:n.jsx(gL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Success rate",value:Ah(t.metrics.successRate),hint:`${si(t.metrics.failed)} failed`,icon:n.jsx(rL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Avg. processing",value:t.metrics.avgProcessingMs?Nv(t.metrics.avgProcessingMs):"",hint:t.metrics.p95ProcessingMs?`p95 ${Nv(t.metrics.p95ProcessingMs)}`:"Awaiting data",icon:n.jsx(pL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Data footprint",value:ck(t.metrics.totalFileSizeBytes),hint:"Across fetched window",icon:n.jsx(bL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Active uploaders",value:si(t.metrics.uniqueUploaders),hint:`${si(t.metrics.uniqueGuilds)} guilds represented`,icon:n.jsx(ug,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"})},{label:"Open failures",value:si(t.recentFailures.length),hint:"Latest 5 shown on the right",icon:n.jsx(SC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"})}],[t]);return n.jsx(Pt,{title:"Scans uploaded",subtitle:"Operational analytics for ingestion volume, health, and failure recovery",centerFramed:!0,mode:"page",stickyTopbar:!0,left:n.jsx(ige,{breakdown:t.statusBreakdown,onRefresh:i,loading:e,refreshing:s}),right:n.jsx(age,{issues:t.issues,failures:t.recentFailures,uploaders:t.topUploaders,guilds:t.topGuilds}),leftWidth:260,rightWidth:320,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(l=>n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsx("div",{className:"flex items-start justify-between gap-4",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#F5F9FF]",children:[l.icon,l.label]}),n.jsx("div",{className:"mt-3 text-2xl font-semibold text-white",children:l.value})]})}),n.jsx("div",{className:"mt-2 text-xs text-[#B0C4D9]",children:l.hint})]},l.label))}),n.jsxs("section",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Pipeline status"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Distribution of ingest outcomes for the fetched upload window."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.statusBreakdown.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:nd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:rd(l.status)},"aria-hidden":"true"}),Ub(l.status)]}),n.jsx("span",{className:"font-semibold",children:si(l.count)})]}),n.jsx("div",{className:"mt-2 h-1.5 rounded-full",style:{background:"#0F2137"},"aria-hidden":"true",children:n.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.min(l.share*100,100).toFixed(1)}%`,backgroundColor:rd(l.status)}})}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:[Ah(l.share)," of window"]})]},l.status))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsx("header",{className:"flex items-center justify-between gap-4",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Hourly throughput"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Recent upload cadence with successes and failures in the last twelve hours."})]})}),n.jsx("ul",{className:"mt-4 space-y-3",children:t.timeline.map(l=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:nd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-semibold",children:l.hourLabel}),n.jsxs("span",{children:[si(l.total)," uploads"]})]}),n.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3 text-xs text-[#8AA5C4]",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:rd("success")},"aria-hidden":"true"}),"Success ",si(l.success)]}),n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full",style:{backgroundColor:rd("failed")},"aria-hidden":"true"}),"Failed ",si(l.failed)]})]})]},l.hourLabel))})]})]}),n.jsxs("section",{className:"rounded-2xl border",style:Ci,children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3 border-b px-5 py-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Recent uploads"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest activity pulled from Firestore. Includes success and failure cases."})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-[#8AA5C4]",children:e?n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Mo,{className:"h-3.5 w-3.5 animate-spin"})," Syncing"]}):r?n.jsxs("span",{className:"inline-flex items-center gap-1 text-[#F9A825]",children:[n.jsx(e1,{className:"h-3.5 w-3.5"}),r]}):n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(XR,{className:"h-3.5 w-3.5"}),"Live snapshot"]})})]}),n.jsxs("div",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-xs font-semibold uppercase tracking-wide",style:{borderColor:"#2B4C73",color:"#D6E4F7"},children:[n.jsx("span",{children:"ID"}),n.jsx("span",{children:"Status"}),n.jsx("span",{children:"Uploader"}),n.jsx("span",{children:"Guild"}),n.jsx("span",{className:"text-right",children:"Processing"}),n.jsx("span",{className:"text-right",children:"File size"})]}),n.jsx("ul",{children:t.recentUploads.map(l=>{var d,u,h,m;return n.jsxs("li",{className:"grid grid-cols-[150px_130px_minmax(0,1fr)_minmax(0,1fr)_110px_110px] gap-4 border-b px-5 py-3 text-sm",style:{borderColor:"#2B4C73",color:"#FFFFFF"},children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:l.id}),n.jsx("span",{children:n.jsx(oge,{status:l.status})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(u=(d=l.uploaderName)!=null?d:l.uploaderId)!=null?u:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.uploadedAt?l.uploadedAt.toLocaleString():"Timestamp missing"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:(m=(h=l.guildName)!=null?h:l.guildId)!=null?m:""}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:l.errorCode?`Issue: ${l.errorCode}`:"Healthy"})]}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.processingMs?Nv(l.processingMs):"Pending"}),n.jsx("span",{className:"text-right text-xs text-[#B0C4D9]",children:l.fileSizeBytes?ck(l.fileSizeBytes):""})]},l.id)})})]})]})})}function ige({breakdown:t,onRefresh:e,loading:s,refreshing:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("div",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsxs("div",{className:"flex items-center justify-between text-[#F5F9FF]",children:[n.jsx("span",{children:"Controls"}),n.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center gap-1 rounded-xl border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#F5F9FF"},disabled:r,children:[n.jsx(dg,{className:`h-3.5 w-3.5 ${r?"animate-spin":""}`,"aria-hidden":"true"}),r?"Refreshing":"Refresh"]})]}),n.jsx("p",{className:"mt-3 text-xs text-[#8AA5C4]",children:"Pulls the newest ingest snapshot from Firestore. Uses a 100 item window ordered by upload time."})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Status mix"}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.map(i=>n.jsxs("li",{className:"flex items-center justify-between gap-2",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full",style:{backgroundColor:rd(i.status)},"aria-hidden":"true"}),Ub(i.status)]}),n.jsx("span",{children:Ah(i.share)})]},i.status))}),s&&n.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs text-[#8AA5C4]",children:[n.jsx(Mo,{className:"h-3.5 w-3.5 animate-spin","aria-hidden":"true"})," Synchronising"]})]}),n.jsxs("div",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsx("div",{className:"text-[#F5F9FF]",children:"Data guardrails"}),n.jsxs("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Yp,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Pipeline SLA  6s avg processing. Monitor the Avg. processing metric above."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Yp,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Alert if failure share exceeds 8% within an hour or 3 consecutive failures happen."})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Yp,{className:"mt-0.5 h-3.5 w-3.5 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Review guild specific spikes  cross check with the guild table in the right rail."})]})]})]})]})}function age({issues:t,failures:e,uploaders:s,guilds:r}){return n.jsxs("div",{className:"space-y-4 text-sm",children:[n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(SC,{className:"h-4 w-4 text-[#F9A825]","aria-hidden":"true"}),n.jsx("span",{children:"Top failure signatures"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:t.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failures detected in window."}):t.map(i=>n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:nd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{children:i.code}),n.jsxs("span",{className:"font-semibold",children:["",i.count]})]}),n.jsxs("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:["Last seen: ",i.lastSeen?i.lastSeen.toLocaleString():"Unknown"]})]},i.code))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(e1,{className:"h-4 w-4 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("span",{children:"Latest failed uploads"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:e.length===0?n.jsx("li",{className:"text-[#8AA5C4]",children:"No failed uploads in snapshot."}):e.slice(0,5).map(i=>{var a;return n.jsxs("li",{className:"rounded-xl border px-3 py-2",style:nd,children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-[#F5F9FF]",children:[n.jsx("span",{className:"font-mono text-xs text-[#8AA5C4]",children:i.id}),n.jsx("span",{children:i.uploadedAt?i.uploadedAt.toLocaleTimeString():""})]}),n.jsx("div",{className:"mt-1 text-xs text-[#8AA5C4]",children:(a=i.errorCode)!=null?a:"No error code provided"})]},i.id)})})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(ug,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Uploader leaderboard"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:s.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:nd,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Ah(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:si(i.count)})]},i.id))})]}),n.jsxs("article",{className:"rounded-2xl border p-4",style:Ci,children:[n.jsxs("header",{className:"flex items-center gap-2 text-[#F5F9FF]",children:[n.jsx(jL,{className:"h-4 w-4 text-[#5C8BC6]","aria-hidden":"true"}),n.jsx("span",{children:"Guild spotlight"})]}),n.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#B0C4D9]",children:r.map(i=>n.jsxs("li",{className:"flex items-center justify-between rounded-xl border px-3 py-2",style:nd,children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-[#F5F9FF]",children:i.name}),n.jsxs("div",{className:"text-xs text-[#8AA5C4]",children:["Success ",Ah(i.successRate)]})]}),n.jsx("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:si(i.count)})]},i.id))})]})]})}function oge({status:t}){const e=rd(t);return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] uppercase tracking-wide",style:{borderColor:e,color:e},children:[n.jsx(Yp,{className:"h-3 w-3","aria-hidden":"true"}),Ub(t)]})}function lge(){const[t,e]=J.useState(Sv),[s,r]=J.useState(!0),[i,a]=J.useState(!1),[l,d]=J.useState(null),u=J.useCallback(async(m=!1)=>{m?a(!0):r(!0);try{const g=tc(it,"scanUploads"),v=kn(g,Ra("uploadedAt","desc"),zn(100)),N=(await an(v)).docs.map(S=>cge(S.id,S.data()));N.length>0?(e(N),d(null)):(e(Sv),d("No uploads in window  showing fallback snapshot"))}catch(g){console.error("[ScansUploaded] Failed to load Firestore data",g),d("Live data unavailable  fallback snapshot active"),e(Sv)}finally{m?a(!1):r(!1)}},[]);J.useEffect(()=>{u(!1)},[u]);const h=J.useMemo(()=>uge(t),[t]);return{loading:s,refreshing:i,error:l,data:h,refresh:J.useCallback(()=>u(!0),[u])}}function cge(t,e){const s=dge(e.status);return{id:t,status:s,uploaderId:typeof e.uploaderId=="string"?e.uploaderId:null,uploaderName:typeof e.uploaderName=="string"?e.uploaderName:null,guildId:typeof e.guildId=="string"?e.guildId:null,guildName:typeof e.guildName=="string"?e.guildName:null,uploadedAt:e.uploadedAt instanceof $s?e.uploadedAt.toDate():e.uploadedAt instanceof Date?e.uploadedAt:null,processingMs:typeof e.processingMs=="number"?e.processingMs:null,fileSizeBytes:typeof e.fileSizeBytes=="number"?e.fileSizeBytes:null,errorCode:typeof e.errorCode=="string"?e.errorCode:null}}function dge(t){return t==="success"||t==="failed"||t==="processing"||t==="queued"?t:"unknown"}function uge(t){var A,F;const e=new Map,s=new Map,r=new Map,i=new Map,a=[];let l=0,d=0;const h=Date.now()-1440*60*1e3,m=new Map;t.forEach(P=>{var H,q,K,G,te,ne,U,Z,he,ie,fe,be,ye,_e,we,de,pe;const B=(H=e.get(P.status))!=null?H:0;if(e.set(P.status,B+1),P.uploadedAt&&P.uploadedAt.getTime()>=h&&(d+=1),P.processingMs!=null&&a.push(P.processingMs),P.fileSizeBytes!=null&&(l+=P.fileSizeBytes),P.status==="failed"&&P.errorCode){const re=(q=s.get(P.errorCode))!=null?q:{count:0,lastSeen:null};s.set(P.errorCode,{count:re.count+1,lastSeen:!re.lastSeen||P.uploadedAt&&re.lastSeen<P.uploadedAt?P.uploadedAt:re.lastSeen})}const $=(G=(K=P.uploaderId)!=null?K:P.uploaderName)!=null?G:`anon-${P.id}`,W=(U=r.get($))!=null?U:{name:(ne=(te=P.uploaderName)!=null?te:P.uploaderId)!=null?ne:"Unknown",success:0,total:0};if(r.set($,{name:(he=(Z=P.uploaderName)!=null?Z:P.uploaderId)!=null?he:"Unknown",success:W.success+(P.status==="success"?1:0),total:W.total+1}),P.guildId||P.guildName){const re=(fe=(ie=P.guildId)!=null?ie:P.guildName)!=null?fe:`guild-${P.id}`,$e=(_e=i.get(re))!=null?_e:{name:(ye=(be=P.guildName)!=null?be:P.guildId)!=null?ye:"Unknown",success:0,total:0};i.set(re,{name:(de=(we=P.guildName)!=null?we:P.guildId)!=null?de:"Unknown",success:$e.success+(P.status==="success"?1:0),total:$e.total+1})}if(P.uploadedAt){const re=new Date(P.uploadedAt);re.setMinutes(0,0,0);const $e=re.toISOString(),He=(pe=m.get($e))!=null?pe:{hourLabel:mge(re),timestamp:re,total:0,success:0,failed:0};m.set($e,{hourLabel:He.hourLabel,timestamp:He.timestamp,total:He.total+1,success:He.success+(P.status==="success"?1:0),failed:He.failed+(P.status==="failed"?1:0)})}});const g=t.length,v=(A=e.get("success"))!=null?A:0,b=(F=e.get("failed"))!=null?F:0,N=a.length?a.reduce((P,B)=>P+B,0)/a.length:null,S=a.length?hge(a,95):null,C=r.size,R=i.size,M=Array.from(e.entries()).map(([P,B])=>({status:P,count:B,share:g?B/g:0})).sort((P,B)=>B.count-P.count),T=Array.from(m.values()).sort((P,B)=>B.timestamp.getTime()-P.timestamp.getTime()).slice(0,12),y=Array.from(s.entries()).map(([P,B])=>({code:P,...B})).sort((P,B)=>B.count-P.count).slice(0,6),w=[...t].sort((P,B)=>{var $,W,H,q;return((W=($=B.uploadedAt)==null?void 0:$.getTime())!=null?W:0)-((q=(H=P.uploadedAt)==null?void 0:H.getTime())!=null?q:0)}).slice(0,12),D=t.filter(P=>P.status==="failed").sort((P,B)=>{var $,W,H,q;return((W=($=B.uploadedAt)==null?void 0:$.getTime())!=null?W:0)-((q=(H=P.uploadedAt)==null?void 0:H.getTime())!=null?q:0)}),k=Array.from(r.entries()).map(([P,B])=>({id:P,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((P,B)=>B.count-P.count).slice(0,5),_=Array.from(i.entries()).map(([P,B])=>({id:P,name:B.name,count:B.total,successRate:B.total?B.success/B.total:0})).sort((P,B)=>B.count-P.count).slice(0,5);return{metrics:{totalUploads:g,last24h:d,successRate:g?v/g:0,failed:b,avgProcessingMs:N,p95ProcessingMs:S,uniqueUploaders:C,uniqueGuilds:R,totalFileSizeBytes:l},statusBreakdown:M,timeline:T,issues:y,recentFailures:D,recentUploads:w,topUploaders:k,topGuilds:_}}function hge(t,e){const s=[...t].sort((d,u)=>d-u);if(s.length===0)return 0;const r=e/100*(s.length-1),i=Math.floor(r),a=Math.ceil(r);if(i===a)return s[i];const l=r-i;return s[i]*(1-l)+s[a]*l}function si(t){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(t)}function Ah(t){return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t>0&&t<.1?1:0,maximumFractionDigits:1}).format(t)}function Nv(t){return t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(1)}s`}function ck(t){if(t<=0)return"0 B";const e=["B","KB","MB","GB"];let s=t,r=0;for(;s>=1024&&r<e.length-1;)s/=1024,r+=1;return`${s.toFixed(s>=10?0:1)} ${e[r]}`}function rd(t){switch(t){case"success":return"#5CC689";case"failed":return"#FF6B6B";case"processing":return"#F9A825";case"queued":return"#5C8BC6";default:return"#8AA5C4"}}function Ub(t){switch(t){case"success":return"Success";case"failed":return"Failed";case"processing":return"Processing";case"queued":return"Queued";default:return"Unknown"}}function mge(t){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit"}).format(t)}function kv({label:t,value:e,hint:s}){return n.jsxs("article",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:t}),n.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:e}),s&&n.jsx("div",{className:"mt-1 text-xs text-[#B0C4D9]",children:s})]})}function pge(){var d,u,h,m,g,v;const{snapshot:t,error:e,loading:s,refresh:r}=hA(),i=(d=t==null?void 0:t.warnings)!=null?d:[],a=(h=(u=t==null?void 0:t.data)==null?void 0:u.length)!=null?h:0,l=(m=t==null?void 0:t.stats)!=null?m:{};return n.jsx(Pt,{title:"Creator API Monitor",subtitle:"Track the ingestion pipeline for YouTube & Twitch stats",actions:n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{type:"button",className:"rounded-2xl border px-4 py-2 text-sm",style:{borderColor:"#2B4C73",color:"#F5F9FF"},onClick:r,disabled:s,children:s?"Refreshing":"Refresh snapshot"})}),centerFramed:!0,stickyRails:!0,children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[n.jsx(kv,{label:"Last successful sync",value:t!=null&&t.generatedAt?new Date(t.generatedAt).toLocaleString():"not available",hint:e?"Falling back to static data":""}),n.jsx(kv,{label:"Creators tracked",value:a?a.toString():"0"}),n.jsx(kv,{label:"API lookups",value:`${(g=l.youtubeLookups)!=null?g:0}  ${(v=l.twitchLookups)!=null?v:0}`,hint:"YouTube  Twitch"})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"Warnings"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Latest issues reported by the sync script."})]}),i.length===0?n.jsx("p",{className:"text-xs text-[#8AA5C4]",children:"No warnings logged in the last snapshot."}):n.jsx("ul",{className:"space-y-2",children:i.map((b,N)=>n.jsxs("li",{className:"rounded-xl border px-4 py-3",style:{borderColor:"#2B4C73",background:"#1A2F4A"},children:[n.jsxs("div",{className:"text-sm font-semibold text-[#F5F9FF]",children:[b.creator,"  ",b.scope]}),n.jsx("div",{className:"text-xs text-[#B0C4D9]",children:b.message}),b.source&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:b.source})]},`${b.scope}-${N}`))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{background:"#152A42",borderColor:"#2B4C73"},children:[n.jsxs("header",{className:"mb-3",children:[n.jsx("h2",{className:"text-sm font-semibold text-[#F5F9FF]",children:"How to update creator stats"}),n.jsx("p",{className:"text-xs text-[#B0C4D9]",children:"Run the sync script locally or on a scheduler."})]}),n.jsxs("ol",{className:"list-decimal space-y-2 pl-5 text-xs text-[#B0C4D9]",children:[n.jsxs("li",{children:["Add the following environment variables (e.g. in ",n.jsx("code",{children:".env.local"}),"):",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"YOUTUBE_API_KEY=... TWITCH_CLIENT_ID=... TWITCH_CLIENT_SECRET=..."})]}),n.jsxs("li",{children:["Execute the sync script:",n.jsx("pre",{className:"mt-2 rounded-xl bg-[#0F1E33] p-3 text-[11px] text-[#F5F9FF]",children:"pnpm sync:creators"})]}),n.jsxs("li",{children:["Commit/deploy the generated ",n.jsx("code",{children:"public/data/creators-live.json"})," or upload it to hosting so the frontend can pick up the latest snapshot."]})]}),e&&n.jsxs("p",{className:"mt-3 text-xs text-[#ff90a3]",children:["Live snapshot error: ",e]})]})]})})}const Wg=`${aa}/admin/users`,fge=25,zb=()=>{if(!Wg)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},dk=t=>typeof t!="number"?null:$s.fromMillis(t),Hb=t=>{var e;return{id:t.id,userId:t.userId,displayName:t.displayName,avatarUrl:t.avatarUrl,primaryProvider:(e=t.primaryProvider)!=null?e:"discord",roles:t.roles,providers:t.providers,profile:t.profile,createdAt:dk(t.createdAt),lastLoginAt:dk(t.lastLoginAt),status:t.status,notes:t.notes}},gge=t=>{var r;const e=new URLSearchParams;e.set("pageSize",String((r=t.pageSize)!=null?r:fge)),t.cursor&&e.set("cursor",t.cursor),t.role&&e.set("role",t.role),t.status&&e.set("status",t.status),t.provider&&e.set("provider",t.provider),t.search&&e.set("search",t.search);const s=e.toString();return s?`?${s}`:""},Gb=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function uk(t={}){var r;zb();const e=gge(t),s=`${Wg}${e}`;try{const i=await fetch(s,{credentials:"include"});if(!i.ok)throw await Gb(i);const a=await i.json();return{users:a.users.map(Hb),nextPageCursor:(r=a.nextPageCursor)!=null?r:null}}catch(i){throw console.error("[AdminUsers] listAdminUsers failed",i),i instanceof Error?i:new Error("Failed to load admin users")}}async function xge(t){zb();const e=await fetch(`${Wg}/${encodeURIComponent(t)}`,{credentials:"include"});if(!e.ok)throw await Gb(e);const s=await e.json();return Hb(s.user)}async function yge(t,e){zb();const s=await fetch(`${Wg}/${encodeURIComponent(t)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw await Gb(s);const r=await s.json();return Hb(r.user)}const CA=`${aa}/admin/audit-events`,vge=50,bge=()=>{if(!CA)throw new Error("Admin API base URL missing (set VITE_AUTH_BASE_URL).")},_ge=t=>typeof t!="number"?null:$s.fromMillis(t),wge=t=>{var e,s;return{id:t.id,createdAt:_ge(t.createdAt),actorUserId:t.actorUserId,actorDisplayName:(e=t.actorDisplayName)!=null?e:null,targetUserId:t.targetUserId,action:t.action,summary:t.summary,changes:(s=t.changes)!=null?s:{},context:t.context}},jge=t=>{var r;const e=new URLSearchParams;e.set("limit",String((r=t.limit)!=null?r:vge)),t.cursor&&e.set("cursor",t.cursor),t.actorUserId&&e.set("actorUserId",t.actorUserId),t.targetUserId&&e.set("targetUserId",t.targetUserId),t.action&&e.set("action",t.action);const s=e.toString();return s?`?${s}`:""},Sge=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function R0(t={}){var i;bge();const e=`${CA}${jge(t)}`,s=await fetch(e,{credentials:"include"});if(!s.ok)throw await Sge(s);const r=await s.json();return{events:r.events.map(wge),nextPageCursor:(i=r.nextPageCursor)!=null?i:null}}async function Nge(t,e=10){return R0({targetUserId:t,limit:e})}const kge=20,Cge=50,ah={borderColor:"#2B4C73",background:"#152A42"},TA={background:"#1A2F4A"};function Tge(){var d;const{status:t,user:e}=Xa(),s=(d=e==null?void 0:e.roles)!=null?d:[],r=s.includes("admin"),i=r||s.includes("mod"),[a,l]=E.useState("users");return t==="loading"||t==="idle"?n.jsx(Pt,{title:"Admin Users",subtitle:"Checking permissions",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full items-center justify-center text-[#B0C4D9]",children:[n.jsx(Mo,{className:"mr-2 h-4 w-4 animate-spin"}),"Validating session..."]})}):i?n.jsx(Pt,{title:"Admin user management",subtitle:"Moderate accounts, roles, and audit events",centerFramed:!0,mode:"page",actions:n.jsxs("div",{className:"flex items-center rounded-full border px-3 py-1 text-xs",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:[n.jsx(Jl,{className:"mr-2 h-3.5 w-3.5 text-[#5C8BC6]"}),r?"Admin":"Moderator"," access"]}),stickyTopbar:!0,subheader:n.jsx(Ege,{activeTab:a,onChange:l}),children:a==="users"?n.jsx(Age,{isAdmin:r}):n.jsx(Ige,{isAdmin:r,onSelectUser:u=>{l("users"),typeof window!="undefined"&&window.dispatchEvent(new CustomEvent("sf-admin-open-user",{detail:{userId:u}}))}})}):n.jsx(Pt,{title:"Admin Users",subtitle:"Control panel access",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#B0C4D9]",children:[n.jsx(NC,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"Access restricted"}),n.jsxs("p",{children:["You need at least the ",n.jsx("strong",{children:"mod"})," role to view this section."]})]})})}function Ege({activeTab:t,onChange:e}){const s=[{key:"users",label:"Users",icon:n.jsx(ug,{className:"h-4 w-4"})},{key:"audit",label:"Audit Log",icon:n.jsx(WL,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2",children:s.map(r=>n.jsxs("button",{type:"button",onClick:()=>e(r.key),className:`flex items-center gap-2 rounded-2xl border px-3 py-1.5 text-xs transition ${t===r.key?"bg-[#1F3A59] text-white":"text-[#B0C4D9]"}`,style:{borderColor:"#2B4C73"},"aria-pressed":t===r.key,children:[r.icon,r.label]},r.key))})}function Age({isAdmin:t}){const[e,s]=E.useState({role:"all",status:"all",provider:"all",search:""}),[r,i]=E.useState(""),a=D0(r,350);E.useEffect(()=>{s(de=>de.search===a?de:{...de,search:a})},[a]);const[l,d]=E.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[u,h]=E.useState(0),m=E.useMemo(()=>({pageSize:kge,role:e.role==="all"?void 0:e.role,status:e.status==="all"?void 0:e.status,provider:e.provider==="all"?void 0:e.provider,search:e.search}),[e]);E.useEffect(()=>{let de=!1;return d(pe=>({...pe,loading:!0,error:null})),uk(m).then(pe=>{de||d({items:pe.users,cursor:pe.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(pe=>{de||d(re=>({...re,loading:!1,loadingMore:!1,error:pe instanceof Error?pe.message:"Failed to load users"}))}),()=>{de=!0}},[m,u]);const g=()=>h(de=>de+1),v=async()=>{if(l.cursor){d(de=>({...de,loadingMore:!0,error:null}));try{const de=await uk({...m,cursor:l.cursor});d(pe=>({items:[...pe.items,...de.users],cursor:de.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(de){d(pe=>{var re;return{...pe,loadingMore:!1,error:(re=de==null?void 0:de.message)!=null?re:"Failed to load additional users"}})}}},[b,N]=E.useState(null),[S,C]=E.useState(null),[R,M]=E.useState(!1),[T,y]=E.useState(null),[w,D]=E.useState(""),[k,_]=E.useState(!1),[A,F]=E.useState(null),[P,B]=E.useState(!1),[$,W]=E.useState(!1),[H,q]=E.useState([]),[K,G]=E.useState(!1),[te,ne]=E.useState(null),U=E.useRef(null);E.useEffect(()=>{U.current=b},[b]);const Z=E.useRef(!1);E.useEffect(()=>{Z.current=k},[k]);const he=E.useCallback(async de=>{var pe;G(!0),ne(null);try{const re=await Nge(de,12);U.current===de&&q(re.events)}catch(re){U.current===de&&ne((pe=re==null?void 0:re.message)!=null?pe:"Failed to load audit history")}finally{U.current===de&&G(!1)}},[]);E.useEffect(()=>{var $e;if(!b){C(null),D(""),_(!1),q([]),ne(null),W(!1);return}const de=b,pe=l.items.find(He=>He.id===de);pe?(C(pe),D(($e=pe.notes)!=null?$e:"")):(C(null),D("")),_(!1),M(!0),y(null);let re=!1;return xge(de).then(He=>{var pt;re||U.current!==de||(C(He),D((pt=He.notes)!=null?pt:""),_(!1),M(!1))}).catch(He=>{var pt;re||U.current!==de||(M(!1),y((pt=He==null?void 0:He.message)!=null?pt:"Failed to load user"))}),he(de),()=>{re=!0}},[b,l.items,he]),E.useEffect(()=>{var pe;if(!b)return;const de=l.items.find(re=>re.id===b);de&&(C(re=>re&&re.id===de.id?{...re,...de}:de),Z.current||D((pe=de.notes)!=null?pe:""))},[l.items,b]);const ie=E.useCallback(de=>{d(pe=>({...pe,items:pe.items.map(re=>re.id===de.id?de:re)}))},[]),fe=E.useCallback(async de=>{var pe,re;if(S){B(!0),F(null);try{const $e=await yge(S.id,de);C($e),ie($e),"notes"in de&&(_(!1),D((pe=$e.notes)!=null?pe:"")),await he($e.id)}catch($e){F((re=$e==null?void 0:$e.message)!=null?re:"Failed to update user")}finally{B(!1)}}},[S,he,ie]),be=de=>{if(!S||!t||de==="user")return;const pe=new Set(S.roles);pe.has(de)?pe.delete(de):pe.add(de),pe.add("user"),fe({roles:Array.from(pe)})},ye=de=>{!S||!t||L0(S.status)===de||de==="banned"&&!window.confirm(`Ban ${oh(S)}? They will lose access to the control panel.`)||fe({status:de})},_e=de=>{D(de),_(!0)},we=()=>{!S||!t||!k||fe({notes:w.trim().length?w:null})};return E.useEffect(()=>{if(typeof window=="undefined")return;const de=pe=>{const re=pe.detail;re!=null&&re.userId&&N(re.userId)};return window.addEventListener("sf-admin-open-user",de),()=>{window.removeEventListener("sf-admin-open-user",de)}},[]),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:ah,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(zv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Search user id or name",value:r,onChange:de=>i(de.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(ff,{label:"Role",value:e.role,onChange:de=>s(pe=>({...pe,role:de})),options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"mod",label:"Mod"},{value:"creator",label:"Creator"},{value:"user",label:"User"}]}),n.jsx(ff,{label:"Status",value:e.status,onChange:de=>s(pe=>({...pe,status:de})),options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"suspended",label:"Suspended"},{value:"banned",label:"Banned"}]}),n.jsx(ff,{label:"Provider",value:e.provider,onChange:de=>s(pe=>({...pe,provider:de})),options:[{value:"all",label:"All"},{value:"discord",label:"Discord"},{value:"google",label:"Google"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(dg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_360px]",children:[n.jsxs("div",{className:"rounded-2xl border",style:ah,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#B0C4D9]",children:[l.items.length," users ",e.search?"filtered":""]}),l.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Mo,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:TA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"User ID"}),n.jsx("th",{className:"px-4 py-2",children:"Display name"}),n.jsx("th",{className:"px-4 py-2",children:"Role"}),n.jsx("th",{className:"px-4 py-2",children:"Status"}),n.jsx("th",{className:"px-4 py-2",children:"Providers"}),n.jsx("th",{className:"px-4 py-2",children:"Created"}),n.jsx("th",{className:"px-4 py-2",children:"Last login"})]})}),n.jsx("tbody",{children:l.items.map(de=>{var re,$e,He;const pe=de.id===b;return n.jsxs("tr",{onClick:()=>N(de.id),className:`cursor-pointer border-t text-xs transition hover:bg-[#1F3652] ${pe?"bg-[#1F3652]":""}`,style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 font-mono text-[#8AA5C4]",children:de.userId}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(AA,{url:RA(de),name:oh(de)}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm",children:oh(de)}),(re=de.profile)!=null&&re.displayName&&de.profile.displayName!==de.displayName?n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:de.profile.displayName}):null]})]})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(IA,{role:PA(de.roles)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(Rge,{status:L0(de.status)})}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Zf,{provider:"discord",active:!!(($e=de.providers)!=null&&$e.discord)}),n.jsx(Zf,{provider:"google",active:!!((He=de.providers)!=null&&He.google)})]})}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ud(de.createdAt)}),n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ud(de.lastLoginAt)})]},de.id)})})]}),!l.loading&&!l.items.length&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No users match these filters."})]}),l.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Wu,{className:"h-3.5 w-3.5"}),l.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:l.cursor?"More users available":"End of list"}),n.jsx("button",{type:"button",onClick:v,disabled:!l.cursor||l.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:l.loadingMore?"Loading...":"Load more"})]})]}),n.jsx("aside",{className:"rounded-2xl border p-3",style:ah,children:S?n.jsx(Pge,{user:S,isAdmin:t,detailLoading:R,detailError:T,notesValue:w,notesDirty:k,onNotesChange:_e,onNotesSave:we,onRoleToggle:be,onStatusChange:ye,actionError:A,actionPending:P,auditEntries:H,auditLoading:K,auditError:te,onRefreshAudit:()=>S&&he(S.id),showRawJson:$,toggleRawJson:()=>W(de=>!de)}):n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-center text-sm text-[#8AA5C4]",children:[n.jsx(hL,{className:"h-10 w-10 text-[#5C8BC6]"}),"Select a user to see details."]})})]})]})}function Ige({isAdmin:t,onSelectUser:e}){const[s,r]=E.useState({actor:"",target:"",action:"all"}),[i,a]=E.useState(""),[l,d]=E.useState(""),u=D0(i,350),h=D0(l,350);E.useEffect(()=>{r(R=>R.actor===u&&R.target===h?R:{...R,actor:u,target:h})},[u,h]);const[m,g]=E.useState({items:[],cursor:null,loading:!0,loadingMore:!1,error:null}),[v,b]=E.useState(0),N=E.useMemo(()=>{const R=s.action==="all"?void 0:s.action,M=s.actor.includes(":")?s.actor:void 0,T=s.target.includes(":")?s.target:void 0;return{limit:Cge,action:R,actorUserId:M,targetUserId:T}},[s]);E.useEffect(()=>{let R=!1;return g(M=>({...M,loading:!0,error:null})),R0(N).then(M=>{R||g({items:M.events,cursor:M.nextPageCursor,loading:!1,loadingMore:!1,error:null})}).catch(M=>{R||g(T=>{var y;return{...T,loading:!1,loadingMore:!1,error:(y=M==null?void 0:M.message)!=null?y:"Failed to load audit log"}})}),()=>{R=!0}},[N,v]);const S=async()=>{if(m.cursor){g(R=>({...R,loadingMore:!0,error:null}));try{const R=await R0({...N,cursor:m.cursor});g(M=>({items:[...M.items,...R.events],cursor:R.nextPageCursor,loading:!1,loadingMore:!1,error:null}))}catch(R){g(M=>{var T;return{...M,loadingMore:!1,error:(T=R==null?void 0:R.message)!=null?T:"Failed to load more events"}})}}},C=E.useMemo(()=>{const R=s.actor.trim().toLowerCase(),M=s.target.trim().toLowerCase();return m.items.filter(T=>{var D;const y=!R||T.actorUserId.toLowerCase().includes(R)||((D=T.actorDisplayName)!=null?D:"").toLowerCase().includes(R),w=!M||T.targetUserId.toLowerCase().includes(M);return y&&w})},[m.items,s.actor,s.target]);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("section",{className:"flex flex-wrap items-center gap-3 rounded-2xl border p-3 text-xs",style:ah,children:[n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(zv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Actor (id or name)",value:i,onChange:R=>a(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border px-3 py-1",style:{borderColor:"#2B4C73"},children:[n.jsx(zv,{className:"h-4 w-4 text-[#5C8BC6]"}),n.jsx("input",{type:"text",placeholder:"Target user id",value:l,onChange:R=>d(R.target.value),className:"w-48 bg-transparent text-sm text-white placeholder:text-[#6E86A6] focus:outline-none"})]}),n.jsx(ff,{label:"Action",value:s.action,onChange:R=>r(M=>({...M,action:R})),options:[{value:"all",label:"All"},{value:"user.role.update",label:"Role update"},{value:"user.status.update",label:"Status update"},{value:"user.notes.update",label:"Notes update"}]}),n.jsx("div",{className:"ml-auto flex items-center gap-2",children:n.jsxs("button",{type:"button",onClick:()=>b(R=>R+1),className:"flex items-center gap-1 rounded-full border px-3 py-1 text-xs text-[#B0C4D9]",style:{borderColor:"#2B4C73"},children:[n.jsx(dg,{className:"h-3.5 w-3.5"}),"Refresh"]})})]}),n.jsxs("div",{className:"rounded-2xl border",style:ah,children:[n.jsxs("header",{className:"flex items-center justify-between border-b px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsxs("span",{className:"text-[#8AA5C4]",children:[C.length," events"]}),m.loading&&n.jsxs("span",{className:"flex items-center gap-2 text-[#B0C4D9]",children:[n.jsx(Mo,{className:"h-3 w-3 animate-spin"})," Loading"]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full text-left text-sm text-white",children:[n.jsx("thead",{style:TA,children:n.jsxs("tr",{className:"text-xs uppercase tracking-wide text-[#8AA5C4]",children:[n.jsx("th",{className:"px-4 py-2",children:"Time"}),n.jsx("th",{className:"px-4 py-2",children:"Actor"}),n.jsx("th",{className:"px-4 py-2",children:"Target User"}),n.jsx("th",{className:"px-4 py-2",children:"Action"}),n.jsx("th",{className:"px-4 py-2",children:"Summary"})]})}),n.jsx("tbody",{children:C.map(R=>{var M;return n.jsxs("tr",{className:"border-t text-xs text-[#E4ECF5]",style:{borderColor:"#203650"},children:[n.jsx("td",{className:"px-4 py-2 text-[#8AA5C4]",children:ud(R.createdAt)}),n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("div",{className:"text-white",children:(M=R.actorDisplayName)!=null?M:"N/A"}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:R.actorUserId})]}),n.jsx("td",{className:"px-4 py-2",children:n.jsx("button",{type:"button",className:"text-left font-mono text-[#5C8BC6] underline-offset-2 hover:underline",onClick:()=>e(R.targetUserId),children:R.targetUserId})}),n.jsx("td",{className:"px-4 py-2",children:n.jsx(EA,{action:R.action})}),n.jsx("td",{className:"px-4 py-2 text-[#C8D6EC]",children:R.summary})]},R.id)})})]}),!C.length&&!m.loading&&n.jsx("div",{className:"px-4 py-6 text-center text-sm text-[#8AA5C4]",children:"No audit events match these filters."})]}),m.error&&n.jsxs("div",{className:"flex items-center gap-2 border-t px-4 py-3 text-xs text-[#FFB347]",style:{borderColor:"#203650"},children:[n.jsx(Wu,{className:"h-3.5 w-3.5"}),m.error]}),n.jsxs("footer",{className:"flex items-center justify-between border-t px-4 py-3 text-xs",style:{borderColor:"#203650"},children:[n.jsx("span",{className:"text-[#8AA5C4]",children:m.cursor?"More events available":"End of audit log"}),n.jsx("button",{type:"button",onClick:S,disabled:!m.cursor||m.loadingMore,className:"rounded-full border px-3 py-1 text-[#B0C4D9] disabled:opacity-40",style:{borderColor:"#2B4C73"},children:m.loadingMore?"Loading...":"Load more"})]})]}),!t&&n.jsx("div",{className:"rounded-2xl border px-4 py-3 text-xs text-[#8AA5C4]",style:{borderColor:"#2B4C73"},children:"You are viewing the audit log in read-only mode."})]})}function Pge({user:t,isAdmin:e,detailLoading:s,detailError:r,notesValue:i,notesDirty:a,onNotesChange:l,onNotesSave:d,onRoleToggle:u,onStatusChange:h,actionError:m,actionPending:g,auditEntries:v,auditLoading:b,auditError:N,onRefreshAudit:S,showRawJson:C,toggleRawJson:R}){var T,y;const M=PA(t.roles);return n.jsxs("div",{className:"space-y-4 text-xs text-[#E4ECF5]",children:[s&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border px-3 py-2",style:{borderColor:"#2B4C73"},children:[n.jsx(Mo,{className:"h-3 w-3 animate-spin"}),"Loading user..."]}),r&&n.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-[#F9A825] bg-[#3A2B0F] px-3 py-2 text-[#FFD55F]",children:[n.jsx(Wu,{className:"h-3.5 w-3.5"}),r]}),n.jsx("div",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(AA,{url:RA(t),name:oh(t),size:56}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"truncate text-base text-white",children:oh(t)}),n.jsx("div",{className:"font-mono text-[11px] text-[#8AA5C4]",children:t.userId}),n.jsxs("div",{className:"mt-1 flex gap-1",children:[n.jsx(IA,{role:M}),n.jsx(Zf,{provider:"discord",active:!!((T=t.providers)!=null&&T.discord)}),n.jsx(Zf,{provider:"google",active:!!((y=t.providers)!=null&&y.google)})]})]})]})}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Roles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["admin","mod","creator","user"].map(w=>n.jsx("button",{type:"button",onClick:()=>u(w),disabled:!e||w==="user",className:`rounded-full px-3 py-1 text-xs ${t.roles.includes(w)?"bg-[#1F3A59] text-white":"bg-[#122033] text-[#6E86A6]"} disabled:opacity-50`,children:w},w))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsx("h3",{className:"mb-3 text-sm font-semibold text-white",children:"Status"}),n.jsx("div",{className:"flex gap-2",children:["active","suspended","banned"].map(w=>n.jsx("button",{type:"button",onClick:()=>h(w),disabled:!e,className:`rounded-full border px-3 py-1 text-xs capitalize ${L0(t.status)===w?"border-[#5C8BC6] text-white":"border-[#2B4C73] text-[#8AA5C4]"} disabled:opacity-50`,children:w},w))})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notes"}),!e&&n.jsx("span",{className:"text-[11px] text-[#8AA5C4]",children:"Read-only"})]}),n.jsx("textarea",{value:i,onChange:w=>l(w.target.value),className:"h-24 w-full rounded-xl border bg-[#0F1B2A] p-2 text-sm text-white placeholder:text-[#5C6E89] focus:outline-none disabled:opacity-60",style:{borderColor:"#2B4C73"},placeholder:"Add context for moderators",disabled:!e}),n.jsxs("div",{className:"mt-2 flex items-center justify-between text-[11px] text-[#8AA5C4]",children:[g&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Mo,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&e&&n.jsx("button",{type:"button",onClick:d,className:"ml-auto rounded-full border px-3 py-1 text-xs text-white",style:{borderColor:"#2B4C73"},children:"Save notes"})]}),m&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Wu,{className:"h-3 w-3"}),m]})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Audit log"}),n.jsxs("button",{type:"button",onClick:S,className:"flex items-center gap-1 rounded-full border px-2 py-1 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsx(dg,{className:"h-3 w-3"}),"Refresh"]})]}),b&&n.jsxs("div",{className:"flex items-center gap-2 text-[#8AA5C4]",children:[n.jsx(Mo,{className:"h-3 w-3 animate-spin"})," Loading entries..."]}),N&&n.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-[#F9A825] bg-[#3A2B0F] px-2 py-1 text-[11px] text-[#FFD55F]",children:[n.jsx(Wu,{className:"h-3 w-3"}),N]}),!b&&!v.length&&n.jsx("div",{className:"text-[11px] text-[#8AA5C4]",children:"No actions logged."}),n.jsx("ul",{className:"space-y-2",children:v.map(w=>{var D;return n.jsxs("li",{className:"rounded-xl border px-3 py-2 text-[11px]",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"flex items-center justify-between text-[#8AA5C4]",children:[n.jsx("span",{children:ud(w.createdAt)}),n.jsx(EA,{action:w.action})]}),n.jsx("div",{className:"mt-1 text-white",children:(D=w.actorDisplayName)!=null?D:w.actorUserId}),n.jsx("div",{className:"text-[#C8D6EC]",children:w.summary})]},w.id)})})]}),n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73"},children:[n.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Meta"}),n.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 text-[11px] text-[#5C8BC6]",children:[n.jsx(c6,{className:"h-3 w-3"}),C?"Hide raw JSON":"Show raw JSON"]})]}),n.jsxs("dl",{className:"space-y-1 text-[11px] text-[#C8D6EC]",children:[n.jsx(Gp,{label:"Created",value:ud(t.createdAt)}),n.jsx(Gp,{label:"Last login",value:ud(t.lastLoginAt)}),n.jsx(Gp,{label:"Primary provider",value:t.primaryProvider}),n.jsx(Gp,{label:"Roles",value:t.roles.join(", ")})]}),C&&n.jsx("pre",{className:"mt-3 max-h-48 overflow-auto rounded-xl bg-[#0F1B2A] p-3 text-[11px] text-[#8AA5C4]",children:JSON.stringify(t,null,2)})]})]})}function EA({action:t}){const e=t==="user.role.update"?"Role update":t==="user.status.update"?"Status update":"Notes update";return n.jsx("span",{className:"rounded-full border px-2 py-0.5 text-[11px]",style:{borderColor:"#2B4C73",color:"#B0C4D9"},children:e})}function Gp({label:t,value:e}){return e?n.jsxs("div",{className:"flex justify-between gap-2",children:[n.jsx("span",{className:"text-[#6E86A6]",children:t}),n.jsx("span",{className:"text-white",children:e})]}):null}function ff({label:t,value:e,options:s,onChange:r}){return n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[#8AA5C4]",children:t}),n.jsx("select",{value:e,onChange:i=>r(i.target.value),className:"rounded-xl border bg-[#0F1B2A] px-3 py-1 text-xs text-white focus:outline-none",style:{borderColor:"#2B4C73"},children:s.map(i=>n.jsx("option",{value:i.value,children:i.label},i.value))})]})}function AA({url:t,name:e,size:s=32}){return t?n.jsx("img",{src:t,alt:"",className:"rounded-full border object-cover",style:{width:s,height:s,borderColor:"#2B4C73"}}):n.jsx("div",{className:"flex items-center justify-center rounded-full border bg-[#0F1B2A] text-xs text-[#8AA5C4]",style:{width:s,height:s,borderColor:"#2B4C73"},children:e.slice(0,2).toUpperCase()})}function IA({role:t}){const e=t==="admin"?"#F87171":t==="mod"?"#FBBF24":t==="creator"?"#34D399":"#93C5FD";return n.jsx("span",{className:"rounded-full px-2 py-0.5 text-[11px] capitalize",style:{background:"rgba(255,255,255,0.08)",color:e},children:t})}function Rge({status:t}){const e={active:{label:"Active",color:"#5CC689",icon:n.jsx(cL,{className:"h-3 w-3"})},suspended:{label:"Suspended",color:"#F9A825",icon:n.jsx(Jl,{className:"h-3 w-3"})},banned:{label:"Banned",color:"#FF6B6B",icon:n.jsx(JR,{className:"h-3 w-3"})}},{label:s,color:r,icon:i}=e[t];return n.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px]",style:{color:r,background:"rgba(255,255,255,0.06)"},children:[i,s]})}function Zf({provider:t,active:e}){const s=t==="discord"?"D":"G";return n.jsx("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded-full text-[11px] ${e?"bg-[#1F3A59] text-white":"bg-[#0F1B2A] text-[#55637B]"}`,title:t,children:s})}function PA(t){const e=["admin","mod","creator","user"];for(const s of e)if(t.includes(s))return s;return"user"}function oh(t){var e,s,r,i,a,l,d,u,h;return(h=(u=(a=(s=t.displayName)!=null?s:(e=t.profile)==null?void 0:e.displayName)!=null?a:(i=(r=t.providers)==null?void 0:r.discord)==null?void 0:i.displayName)!=null?u:(d=(l=t.providers)==null?void 0:l.google)==null?void 0:d.displayName)!=null?h:t.userId}function RA(t){var e,s,r,i,a,l,d;return(d=(l=(r=t.avatarUrl)!=null?r:(s=(e=t.providers)==null?void 0:e.discord)==null?void 0:s.avatarUrl)!=null?l:(a=(i=t.providers)==null?void 0:i.google)==null?void 0:a.avatarUrl)!=null?d:null}function L0(t){return t!=null?t:"active"}function ud(t){if(!t)return"";const e=t.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(e)}function D0(t,e){const[s,r]=E.useState(t);return E.useEffect(()=>{const i=window.setTimeout(()=>r(t),e);return()=>window.clearTimeout(i)},[t,e]),s}function Lge(){return n.jsx(Pt,{title:"Einstellungen",subtitle:"Profil, Sicherheit, Anzeige",centerFramed:!0,children:n.jsx("div",{className:"space-y-4",children:n.jsxs("section",{className:"rounded-2xl border p-4",style:{borderColor:"#2B4C73",background:"#152A42"},children:[n.jsx("h3",{className:"mb-2 text-sm",style:{color:"#F5F9FF"},children:"Profil"}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["Anzeigename",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]}),n.jsxs("label",{className:"grid gap-1 text-xs",style:{color:"#B0C4D9"},children:["E-Mail",n.jsx("input",{className:"rounded-lg border bg-transparent px-3 py-2",style:{borderColor:"#2B4C73",color:"#F5F9FF"}})]})]})]})})})}const Dge="_page_rpt6g_1",Mge="_tabs_rpt6g_17",Fge="_tab_rpt6g_17",Bge="_tabActive_rpt6g_71",$ge="_banner_rpt6g_87",Oge="_bannerSuccess_rpt6g_101",Vge="_bannerError_rpt6g_113",Uge="_card_rpt6g_125",zge="_cardTitle_rpt6g_145",Hge="_settingsForm_rpt6g_159",Gge="_formRow_rpt6g_173",Wge="_selectInput_rpt6g_185",qge="_checkboxRow_rpt6g_203",Kge="_settingsFooter_rpt6g_227",Qge="_inlineStatus_rpt6g_245",Xge="_helperText_rpt6g_259",Yge="_secondaryButton_rpt6g_271",Jge="_cardSubtitle_rpt6g_297",Zge="_identityHeader_rpt6g_309",exe="_identityAvatar_rpt6g_323",txe="_identityName_rpt6g_337",sxe="_identityProvider_rpt6g_351",nxe="_identityForm_rpt6g_363",rxe="_nameInputWrap_rpt6g_379",ixe="_nameLabel_rpt6g_395",axe="_nameInput_rpt6g_379",oxe="_nameSaveButton_rpt6g_427",lxe="_feedbackError_rpt6g_471",cxe="_feedbackSuccess_rpt6g_483",dxe="_metaGrid_rpt6g_495",uxe="_metaItem_rpt6g_507",hxe="_metaLabel_rpt6g_521",mxe="_metaValue_rpt6g_535",pxe="_serviceList_rpt6g_549",fxe="_serviceRow_rpt6g_559",gxe="_serviceName_rpt6g_587",xxe="_serviceStatus_rpt6g_601",yxe="_serviceAction_rpt6g_613",vxe="_securityText_rpt6g_645",bxe="_securityNote_rpt6g_657",_xe="_logoutButton_rpt6g_669",wxe="_loadingState_rpt6g_701",jxe="_emptyState_rpt6g_703",Sxe="_emptyStateTitle_rpt6g_721",Nxe="_emptyStateText_rpt6g_733",kxe="_primaryButton_rpt6g_745",De={page:Dge,tabs:Mge,tab:Fge,tabActive:Bge,banner:$ge,bannerSuccess:Oge,bannerError:Vge,card:Uge,cardTitle:zge,settingsForm:Hge,formRow:Gge,selectInput:Wge,checkboxRow:qge,settingsFooter:Kge,inlineStatus:Qge,helperText:Xge,secondaryButton:Yge,cardSubtitle:Jge,identityHeader:Zge,identityAvatar:exe,identityName:txe,identityProvider:sxe,identityForm:nxe,nameInputWrap:rxe,nameLabel:ixe,nameInput:axe,nameSaveButton:oxe,feedbackError:lxe,feedbackSuccess:cxe,metaGrid:dxe,metaItem:uxe,metaLabel:hxe,metaValue:mxe,serviceList:pxe,serviceRow:fxe,serviceName:gxe,serviceStatus:xxe,serviceAction:yxe,securityText:vxe,securityNote:bxe,logoutButton:_xe,loadingState:wxe,emptyState:jxe,emptyStateTitle:Sxe,emptyStateText:Nxe,primaryButton:kxe},Cxe="_header_op1dh_1",Txe="_headerTexts_op1dh_9",Exe="_tableWrap_op1dh_16",Axe="_table_op1dh_16",Ixe="_tableRow_op1dh_44",Pxe="_dateCell_op1dh_48",Rxe="_actionsHeader_op1dh_52",Lxe="_actionCell_op1dh_56",Dxe="_unlinkButton_op1dh_60",Mxe="_unlinkIcon_op1dh_88",Fxe="_muted_op1dh_93",Bxe="_emptyState_op1dh_97",$xe="_emptyTitle_op1dh_105",Oxe="_emptyDescription_op1dh_111",Vxe="_confirmBackdrop_op1dh_117",Uxe="_confirmDialog_op1dh_128",zxe="_confirmTitle_op1dh_140",Hxe="_confirmText_op1dh_147",Gxe="_confirmName_op1dh_155",Wxe="_confirmMeta_op1dh_160",qxe="_errorText_op1dh_164",Kxe="_confirmActions_op1dh_170",Qxe="_cancelButton_op1dh_177",Xxe="_confirmButton_op1dh_178",hs={header:Cxe,headerTexts:Txe,tableWrap:Exe,table:Axe,tableRow:Ixe,dateCell:Pxe,actionsHeader:Rxe,actionCell:Lxe,unlinkButton:Dxe,unlinkIcon:Mxe,muted:Fxe,emptyState:Bxe,emptyTitle:$xe,emptyDescription:Oxe,confirmBackdrop:Vxe,confirmDialog:Uxe,confirmTitle:zxe,confirmText:Hxe,confirmName:Gxe,confirmMeta:Wxe,errorText:qxe,confirmActions:Kxe,cancelButton:Qxe,confirmButton:Xxe},Yxe=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},Cv=t=>{var s;const e=(s=t.name)==null?void 0:s.trim();return e||(t.playerId!==void 0&&t.playerId!==null?`#${t.playerId}`:"-")},Jxe=({user:t,refreshSession:e})=>{const{t:s}=qo(),[r,i]=E.useState(!1),[a,l]=E.useState(!1),[d,u]=E.useState(null),[h,m]=E.useState(null),g=E.useMemo(()=>{var y;return(y=t.linkedPlayers)!=null?y:[]},[t.linkedPlayers]),v=E.useMemo(()=>`${aa}/user/unlink-character`,[]),b=async()=>{i(!0);try{await e({silent:!0})}catch(y){console.error("[Account] Failed to refresh linked players",y)}finally{i(!1)}},N=y=>{u(y),m(null)},S=()=>{a||(u(null),m(null))},C=async()=>{var y;if(d){if(!v){m(s("account.connectedCharacters.errors.serviceUnavailable","Auth service is not configured for unlinking."));return}l(!0),i(!0),m(null);try{const w=await fetch(v,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:d.playerId,server:d.server})});if(!w.ok){const D=await w.json().catch(()=>null),k=(D==null?void 0:D.error)||(D==null?void 0:D.message)||s("account.connectedCharacters.errors.unlink","Could not unlink character.");throw new Error(k)}await e({silent:!0}),u(null)}catch(w){const D=(y=w==null?void 0:w.message)!=null?y:s("account.connectedCharacters.errors.unlink","Could not unlink character.");m(D)}finally{l(!1),i(!1)}}},R=y=>y?y.startsWith("discord_")?s("account.connectedCharacters.method.discord","Discord bot"):y:"-",M=()=>n.jsx("div",{className:hs.tableWrap,children:n.jsxs("table",{className:hs.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:s("account.connectedCharacters.columns.character","Character")}),n.jsx("th",{children:s("account.connectedCharacters.columns.server","Server")}),n.jsx("th",{children:s("account.connectedCharacters.columns.playerId","Player ID")}),n.jsx("th",{children:s("account.connectedCharacters.columns.class","Class")}),n.jsx("th",{children:s("account.connectedCharacters.columns.level","Level")}),n.jsx("th",{children:s("account.connectedCharacters.columns.guild","Guild")}),n.jsx("th",{children:s("account.connectedCharacters.columns.lastVerified","Last linked")}),n.jsx("th",{children:s("account.connectedCharacters.columns.source","Source")}),n.jsx("th",{className:hs.actionsHeader,children:s("account.connectedCharacters.columns.actions","Actions")})]})}),n.jsx("tbody",{children:g.map((y,w)=>{var P,B,$,W;const D=`${(P=y.server)!=null?P:"unknown"}-${(B=y.playerId)!=null?B:w}`,k=($=y.level)!=null?$:"-",_=y.guildName||"-",A=y.class||"-",F=R(y.method);return n.jsxs("tr",{className:hs.tableRow,children:[n.jsx("td",{children:Cv(y)}),n.jsx("td",{children:y.server||"-"}),n.jsx("td",{children:(W=y.playerId)!=null?W:"-"}),n.jsx("td",{className:y.class?void 0:hs.muted,children:A}),n.jsx("td",{className:typeof y.level!="number"?hs.muted:void 0,children:k}),n.jsx("td",{className:y.guildName?void 0:hs.muted,children:_}),n.jsx("td",{className:hs.dateCell,children:Yxe(y.verifiedAt)}),n.jsx("td",{className:y.method?void 0:hs.muted,children:F}),n.jsx("td",{className:hs.actionCell,children:n.jsx("button",{type:"button",className:hs.unlinkButton,onClick:()=>N(y),title:s("account.connectedCharacters.actions.unlink","Disconnect character"),"aria-label":`${s("account.connectedCharacters.actions.unlink","Disconnect character")} ${Cv(y)}`,disabled:a||r,children:n.jsx("svg",{className:hs.unlinkIcon,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:n.jsx("path",{fill:"currentColor",d:"M9 4h6a1 1 0 0 1 1 1v2h5v2h-2.1l-1.05 11.2A2 2 0 0 1 15.86 22H8.14a2 2 0 0 1-1.99-1.8L5.1 9H3V7h5V5a1 1 0 0 1 1-1Zm5 2V6H10v2h4Zm-6.93 3 1.02 10.8a1 1 0 0 0 1 .9h7.72a1 1 0 0 0 1-.9L18.83 9ZM10 11v7h2v-7Zm4 0v7h2v-7Z"})})})})]},D)})})]})}),T=()=>{var w;if(!d)return null;const y="unlink-dialog-title";return n.jsx("div",{className:hs.confirmBackdrop,role:"dialog","aria-modal":"true","aria-labelledby":y,children:n.jsxs("div",{className:hs.confirmDialog,children:[n.jsx("h3",{id:y,className:hs.confirmTitle,children:s("account.connectedCharacters.confirmation.title","Are you sure you want to unlink this character?")}),n.jsxs("p",{className:hs.confirmText,children:[n.jsx("span",{className:hs.confirmName,children:Cv(d)}),n.jsxs("span",{className:hs.confirmMeta,children:[d.server||"-"," - #",(w=d.playerId)!=null?w:"-"]})]}),h&&n.jsx("p",{className:hs.errorText,children:h}),n.jsxs("div",{className:hs.confirmActions,children:[n.jsx("button",{type:"button",className:hs.cancelButton,onClick:S,disabled:a,children:s("account.connectedCharacters.confirmation.cancel","Cancel")}),n.jsx("button",{type:"button",className:hs.confirmButton,onClick:C,disabled:a,children:a?s("account.connectedCharacters.confirmation.confirming","Unlinking..."):s("account.connectedCharacters.confirmation.confirm","Yes, unlink")})]})]})})};return t?n.jsxs("section",{className:De.card,children:[n.jsxs("div",{className:hs.header,children:[n.jsxs("div",{className:hs.headerTexts,children:[n.jsx("h2",{className:De.cardTitle,children:s("account.connectedCharacters.title","Connected characters")}),n.jsx("p",{className:De.cardSubtitle,children:s("account.connectedCharacters.subtitle","These game characters are linked to your SFDataHub account.")})]}),n.jsx("button",{type:"button",className:De.secondaryButton,onClick:b,disabled:r,children:r?s("account.connectedCharacters.actions.refreshing","Refreshing..."):s("account.connectedCharacters.actions.refresh","Refresh")})]}),r&&n.jsx("p",{className:De.helperText,children:s("account.connectedCharacters.loading","Refreshing characters...")}),!r&&g.length===0&&n.jsxs("div",{className:hs.emptyState,children:[n.jsx("p",{className:hs.emptyTitle,children:s("account.connectedCharacters.empty.title","No characters linked yet")}),n.jsx("p",{className:hs.emptyDescription,children:s("account.connectedCharacters.empty.description",'Use the "!connect char" command in Discord to link your characters, then click "Refresh" here.')})]}),g.length>0&&M(),T()]}):null},LA="user_settings";async function hk(t){if(!t)return null;try{const e=Ot(it,LA,t),s=await Os(e);if(!s.exists())return null;const r=s.data();return r!=null?r:null}catch(e){return console.warn("[UserSettings] Failed to load settings",e),null}}async function Zxe(t,e){if(t)try{const s=Ot(it,LA,t);await Ga(s,e,{merge:!0})}catch(s){throw console.error("[UserSettings] Failed to update settings",s),s}}const DA="user_tools_state";async function eye(t){var e;if(!t)return null;try{const s=Ot(it,DA,t),r=await Os(s);return r.exists()&&(e=r.data())!=null?e:null}catch(s){return console.warn("[UserToolsSettings] Failed to load tools settings",s),null}}async function tye(t,e){if(t)try{const s=Ot(it,DA,t),r={...e,updatedAt:new Date().toISOString()};await Ga(s,r,{merge:!0})}catch(s){throw console.error("[UserToolsSettings] Failed to save tools settings",s),s}}const sye="https://i.pravatar.cc/72",Wp=`${aa}/auth/account/profile`,Tv=`${aa}/auth/google/link/start`,mk=3,pk=32,fk=t=>{if(!t)return;const e=new Date(t);return Number.isNaN(e.getTime())?t:e.toLocaleString()},nye=()=>{const{status:t,user:e,logout:s,refreshSession:r}=Xa(),i=oi(),a=jr(),{t:l,i18n:d}=qo(),[u,h]=E.useState("overview"),[m,g]=E.useState(null),[v,b]=E.useState(null),[N,S]=E.useState(!1),[C,R]=E.useState(null),[M,T]=E.useState(!1),[y,w]=E.useState(!1),[D,k]=E.useState(null),[_,A]=E.useState(null),[F,P]=E.useState(!0),[B,$]=E.useState(!1),[W,H]=E.useState(null),[q,K]=E.useState(!1),G=E.useMemo(()=>{const Re=new URLSearchParams(a.search);return Re.get("linked")==="google"?{type:"success",message:"Google successfully connected."}:Re.get("error")==="google_already_linked"?{type:"error",message:"This Google account is already linked to another SFDataHub account."}:null},[a.search]),te=t==="loading"||t==="idle",ne=t==="authenticated"&&!!e,U=e==null?void 0:e.id,Z=E.useMemo(()=>({language:d.language==="de"?"de":"en",defaultSection:"home",compactTables:!1,showExperimentalFeatures:!1}),[d.language]);E.useEffect(()=>{if(!U){g(null),b(null),R(null),S(!1),k(null),A(null),P(!1),$(!1),H(null),K(!1);return}let Re=!0;return(async()=>{S(!0),R(null),w(!1);try{const ze=await hk(U),at=ze?{...Z,...ze}:Z;if(!Re)return;g(at),b(at)}catch(ze){if(!Re)return;R(l("account.settings.error","Could not load settings."))}finally{Re&&S(!1)}})(),()=>{Re=!1}},[U,Z,l]),E.useEffect(()=>{if(!U)return;let Re=!0;const Ie={defaultSetId:null,showToolsIntro:!0,enableExperimentalTools:!1};return(async()=>{P(!0),H(null),K(!1);try{const at=await eye(U);if(!Re)return;const ut=at?{...Ie,...at}:Ie;k(ut),A(ut)}catch(at){if(!Re)return;H(l("account.tools.loadError","Could not load tools settings."))}finally{Re&&P(!1)}})(),()=>{Re=!1}},[U,l]);const he=()=>{i("/login")},ie=async()=>{await s(),i("/")},fe=()=>{if(!Tv){window.alert("Auth service is not configured for Google linking.");return}window.location.href=Tv},be=()=>n.jsx("div",{className:De.loadingState,children:"Checking session..."}),ye=()=>n.jsxs("div",{className:De.emptyState,children:[n.jsx("p",{className:De.emptyStateTitle,children:"You are not signed in."}),n.jsx("p",{className:De.emptyStateText,children:"Use the sign-in page to connect your Discord or Google account and unlock settings."}),n.jsx("button",{type:"button",className:De.primaryButton,onClick:he,children:"Go to sign-in"})]}),_e=()=>{if(!G)return null;const Re=G.type==="success"?`${De.banner} ${De.bannerSuccess}`:`${De.banner} ${De.bannerError}`;return n.jsx("div",{className:Re,children:G.message})},we=()=>{var Gt,Pn,en;if(!e)return null;const Re=(Gt=e.providers)==null?void 0:Gt.discord,Ie=(Pn=e.providers)==null?void 0:Pn.google,ze=!!Re,at=!!Ie,ut=!!Tv,xt=ut?at?Ie!=null&&Ie.displayName?`Connected as ${Ie.displayName}`:"Connected":"Not connected":"Auth service not configured",Qt=[{key:"discord",name:"Discord",status:ze?`Connected as ${(en=Re==null?void 0:Re.displayName)!=null?en:e.displayName}`:"Not connected",actionLabel:ze?"Connected":"Connect",disabled:!0},{key:"google",name:"Google",status:xt,actionLabel:at?"Connected":"Connect",disabled:at||!ut,onClick:at||!ut?void 0:fe},{key:"twitch",name:"Twitch",status:"Planned",actionLabel:"Soon",disabled:!0},{key:"youtube",name:"YouTube",status:"Planned",actionLabel:"Soon",disabled:!0}];return n.jsxs("section",{className:De.card,children:[n.jsx("h2",{className:De.cardTitle,children:"Connected services"}),n.jsx("p",{className:De.cardSubtitle,children:"Manage which social logins are linked to your SFDataHub identity."}),n.jsx("div",{className:De.serviceList,children:Qt.map(Ds=>n.jsxs("div",{className:De.serviceRow,children:[n.jsxs("div",{children:[n.jsx("p",{className:De.serviceName,children:Ds.name}),n.jsx("p",{className:De.serviceStatus,children:Ds.status})]}),n.jsx("button",{type:"button",className:De.serviceAction,disabled:Ds.disabled,onClick:Ds.onClick,children:Ds.actionLabel})]},Ds.key))})]})},de=()=>n.jsxs("section",{className:De.card,children:[n.jsx("h2",{className:De.cardTitle,children:"Security & session"}),n.jsx("p",{className:De.securityText,children:"We only store your SFDataHub user ID, display name, avatar URL and provider identifiers (like your Discord ID). We never see or store your Discord or Google password."}),n.jsx("p",{className:De.securityNote,children:"Logging out here only clears your SFDataHub session cookie. Your Discord or Google account stays signed in separately."}),n.jsx("button",{type:"button",className:De.logoutButton,onClick:ie,children:"Log out from this device"}),n.jsx("p",{className:De.securityNote,children:"To fully revoke access, remove SFDataHub Auth from your Discord applications page."})]}),pe=(Re,Ie)=>{m&&(g(ze=>({...ze!=null?ze:Z,[Re]:Ie})),w(!1))},re=!!(m&&v&&JSON.stringify(m)!==JSON.stringify(v)),$e=!!(D&&_&&JSON.stringify(D)!==JSON.stringify(_)),He=async()=>{if(!(!U||!m||M||!re))try{T(!0),R(null),await Zxe(U,m),b(m),w(!0)}catch(Re){R(l("account.settings.saveError","Could not save settings. Please try again."))}finally{T(!1)}},pt=(Re,Ie)=>{D&&(k(ze=>({...ze!=null?ze:{},[Re]:Ie})),K(!1))},It=async()=>{if(!(!U||!D||B||!$e))try{$(!0),H(null),await tye(U,D),A(D),K(!0)}catch(Re){H(l("account.tools.save.error","Could not save settings. Please try again."))}finally{$(!1)}},Mt=()=>{var Re,Ie;return n.jsxs("section",{className:De.card,children:[n.jsx("h2",{className:De.cardTitle,children:l("account.settings.title","Settings")}),n.jsx("p",{className:De.cardSubtitle,children:l("account.settings.subtitle","Configure your personal preferences.")}),N&&n.jsx("p",{className:De.helperText,children:l("account.settings.loading","Loading settings...")}),C&&n.jsxs("div",{className:De.feedbackError,children:[n.jsx("p",{children:C}),n.jsx("button",{type:"button",className:De.secondaryButton,onClick:()=>{U&&(R(null),w(!1),S(!0),hk(U).then(ze=>{const at=ze?{...Z,...ze}:Z;g(at),b(at)}).catch(()=>{R(l("account.settings.error","Could not load settings."))}).finally(()=>S(!1)))},children:l("account.settings.retry","Retry")})]}),m&&!N&&n.jsxs("div",{className:De.settingsForm,children:[n.jsxs("div",{className:De.formRow,children:[n.jsx("label",{className:De.nameLabel,htmlFor:"settings-language",children:l("account.settings.language.label","Preferred language")}),n.jsxs("select",{id:"settings-language",className:De.selectInput,value:(Re=m.language)!=null?Re:Z.language,onChange:ze=>pe("language",ze.target.value),children:[n.jsx("option",{value:"en",children:l("topbar.lang_en","English")}),n.jsx("option",{value:"de",children:l("topbar.lang_de","Deutsch")})]})]}),n.jsxs("div",{className:De.formRow,children:[n.jsx("label",{className:De.nameLabel,htmlFor:"settings-section",children:l("account.settings.defaultSection.label","Default section")}),n.jsxs("select",{id:"settings-section",className:De.selectInput,value:(Ie=m.defaultSection)!=null?Ie:Z.defaultSection,onChange:ze=>pe("defaultSection",ze.target.value),children:[n.jsx("option",{value:"home",children:l("nav.home","Home")}),n.jsx("option",{value:"toplists",children:l("nav.toplists","Top Lists")}),n.jsx("option",{value:"guilds",children:l("nav.guilds","Guilds")}),n.jsx("option",{value:"tools",children:l("nav.tools","Tools")}),n.jsx("option",{value:"community",children:l("nav.community","Community")})]})]}),n.jsxs("label",{className:De.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!m.compactTables,onChange:ze=>pe("compactTables",ze.target.checked)}),n.jsx("span",{children:l("account.settings.compactTables.label","Use compact table layout")})]}),n.jsxs("label",{className:De.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!m.showExperimentalFeatures,onChange:ze=>pe("showExperimentalFeatures",ze.target.checked)}),n.jsx("span",{children:l("account.settings.experimental.label","Enable experimental features")})]})]}),n.jsxs("div",{className:De.settingsFooter,children:[n.jsxs("div",{className:De.inlineStatus,children:[y?n.jsx("span",{className:De.feedbackSuccess,children:l("account.settings.saved","Settings saved.")}):re?null:n.jsx("span",{className:De.helperText,children:l("account.settings.noChanges","No changes to save.")}),M&&n.jsx("span",{className:De.helperText,children:l("account.settings.saving","Saving...")})]}),n.jsx("button",{type:"button",className:De.primaryButton,disabled:!re||M||!m,onClick:He,children:l("account.settings.save","Save settings")})]})]})},Ht=()=>{const Re=[{key:"overview",label:l("account.tabs.overview","Overview")},{key:"settings",label:l("account.tabs.settings","Settings")},{key:"tools",label:l("account.tabs.tools","Tools")},{key:"connected-characters",label:l("account.tabs.connectedCharacters","Connected characters")}];return n.jsx("div",{className:De.tabs,role:"tablist","aria-label":"Account sections",children:Re.map(Ie=>{const ze=u===Ie.key;return n.jsx("button",{type:"button",className:`${De.tab} ${ze?De.tabActive:""}`,onClick:()=>h(Ie.key),role:"tab","aria-selected":ze,children:Ie.label},Ie.key)})})},ss=()=>{var Re;if(!e)return null;switch(u){case"overview":return n.jsxs(n.Fragment,{children:[n.jsx(rye,{user:e,refreshSession:r}),we(),de()]});case"settings":return Mt();case"tools":return n.jsxs("section",{className:De.card,children:[n.jsx("h2",{className:De.cardTitle,children:l("account.tools.title","Tools settings")}),n.jsx("p",{className:De.cardSubtitle,children:l("account.tools.subtitle","Configure how tools behave for your account.")}),F&&n.jsx("p",{className:De.helperText,children:l("account.tools.loading","Loading tools settings...")}),W&&n.jsx("p",{className:De.feedbackError,children:W}),D&&!F&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:De.settingsForm,children:[n.jsxs("div",{className:De.formRow,children:[n.jsx("label",{className:De.nameLabel,htmlFor:"tools-default-set",children:l("account.tools.defaultSet.label","Default set ID")}),n.jsx("input",{id:"tools-default-set",type:"text",className:De.nameInput,value:(Re=D.defaultSetId)!=null?Re:"",onChange:Ie=>pt("defaultSetId",Ie.target.value),placeholder:l("account.tools.defaultSet.placeholder","Enter a default set ID")})]}),n.jsxs("label",{className:De.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!D.showToolsIntro,onChange:Ie=>pt("showToolsIntro",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.showIntro.label","Show tools intro")})]}),n.jsxs("label",{className:De.checkboxRow,children:[n.jsx("input",{type:"checkbox",checked:!!D.enableExperimentalTools,onChange:Ie=>pt("enableExperimentalTools",Ie.target.checked)}),n.jsx("span",{children:l("account.tools.experimental.label","Enable experimental tools")})]})]}),n.jsxs("div",{className:De.settingsFooter,children:[n.jsxs("div",{className:De.inlineStatus,children:[q?n.jsx("span",{className:De.feedbackSuccess,children:l("account.tools.save.success","Settings saved.")}):$e?null:n.jsx("span",{className:De.helperText,children:l("account.tools.save.noChanges","No changes to save.")}),B&&n.jsx("span",{className:De.helperText,children:l("account.tools.save.saving","Saving...")})]}),n.jsx("button",{type:"button",className:De.primaryButton,disabled:F||B||!$e||!D,onClick:It,children:l("account.tools.save.cta","Save settings")})]})]})]});case"connected-characters":return n.jsx(Jxe,{user:e,refreshSession:r});default:return null}},Ne=()=>te?be():ne?n.jsxs(n.Fragment,{children:[Ht(),ss()]}):ye();return n.jsx(Pt,{title:"Account & Profile",subtitle:"Manage your SFDataHub identity and connected services.",centerFramed:!0,children:n.jsxs("div",{className:De.page,children:[_e(),Ne()]})})};function rye({user:t,refreshSession:e}){var D;const[s,r]=E.useState(()=>{var k;return(k=t==null?void 0:t.displayName)!=null?k:""}),[i,a]=E.useState(!1),[l,d]=E.useState(null),[u,h]=E.useState(!1),m=(t==null?void 0:t.avatarUrl)||sye,g=(t==null?void 0:t.provider)==="google"?"Google":"Discord",v=(D=t==null?void 0:t.displayName)!=null?D:"",b=s.trim(),N=b.length===0||b.length>=mk&&b.length<=pk,S=!!t&&b.length>0&&b!==v,C=!!(Wp&&N&&S&&!i),R=b.length>0&&!N?`Name must be between ${mk} and ${pk} characters.`:null;E.useEffect(()=>{var k;r((k=t==null?void 0:t.displayName)!=null?k:""),h(!1),d(null)},[t==null?void 0:t.id,t==null?void 0:t.displayName]);const M=E.useMemo(()=>{var k;return t?[{label:"SFDataHub ID",value:t.id},(k=t.roles)!=null&&k.length?{label:"Roles",value:t.roles.join(", ")}:null,t.createdAt?{label:"Created at",value:fk(t.createdAt)}:null,t.lastLoginAt?{label:"Last login",value:fk(t.lastLoginAt)}:null].filter(_=>!!(_!=null&&_.value)):[]},[t]),T=async()=>{var k,_;if(!C||!Wp){Wp||d("Auth service is not configured.");return}try{a(!0),d(null),h(!1);const A=await fetch(Wp,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:b})});if(!A.ok){const F=await A.json().catch(()=>null);throw new Error((k=F==null?void 0:F.error)!=null?k:"Failed to update name.")}await e(),h(!0),r(b)}catch(A){const F=(_=A==null?void 0:A.message)!=null?_:"Failed to update name.";d(F)}finally{a(!1)}},y=k=>{k.key==="Enter"&&(k.preventDefault(),C&&T())},w=()=>{C&&T()};return t?n.jsxs("section",{className:De.card,children:[n.jsxs("div",{className:De.identityHeader,children:[n.jsx("img",{src:m,alt:"",className:De.identityAvatar}),n.jsxs("div",{children:[n.jsx("p",{className:De.identityName,children:t.displayName||"Unbenannter Nutzer"}),n.jsxs("p",{className:De.identityProvider,children:[g," sign-in"]})]}),n.jsx("span",{className:De.statusBadge,children:"Verified"})]}),n.jsxs("div",{className:De.identityForm,children:[n.jsxs("div",{className:De.nameInputWrap,children:[n.jsx("label",{className:De.nameLabel,children:"Display name"}),n.jsx("input",{type:"text",className:De.nameInput,value:s,onChange:k=>r(k.target.value),onKeyDown:y,onBlur:w,placeholder:"Enter your display name"})]}),n.jsx("button",{type:"button",className:De.nameSaveButton,disabled:!C,onClick:T,children:i?"Saving...":"Save"})]}),R&&n.jsx("p",{className:De.feedbackError,children:R}),l&&n.jsx("p",{className:De.feedbackError,children:l}),u&&n.jsx("p",{className:De.feedbackSuccess,children:"Name updated."}),M.length>0&&n.jsx("div",{className:De.metaGrid,children:M.map(k=>n.jsxs("div",{className:De.metaItem,children:[n.jsx("span",{className:De.metaLabel,children:k.label}),n.jsx("span",{className:De.metaValue,children:k.value})]},k.label))})]}):null}const $t={wrap:{padding:16,maxWidth:1200,margin:"0 auto",color:"#FFFFFF"},grid:{display:"grid",gridTemplateColumns:"250px 1fr",gap:16},tile:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16,boxShadow:"0 8px 20px rgba(0,0,0,.25)"},link:{display:"block",padding:"10px 12px",borderRadius:12,background:"#1A2F4A",border:"1px solid rgba(255,255,255,.06)",marginBottom:8},active:{outline:"2px solid #1F3B5D"},note:{color:"#B0C4D9",fontSize:12},groupLabel:{margin:"16px 0 8px",color:"#B0C4D9",fontSize:12,textTransform:"uppercase",letterSpacing:.6}};function iye(){return n.jsx("div",{style:$t.wrap,children:n.jsxs("div",{style:$t.grid,children:[n.jsxs("aside",{style:$t.tile,children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Playground"}),n.jsx("p",{style:$t.note,children:"Kleine Spielwiese fr UI/Flows. Links whlen, rechts live ansehen."}),n.jsxs("nav",{children:[n.jsx("div",{style:$t.groupLabel,children:"Allgemein"}),n.jsx(Ns,{to:"list-views",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"List-View Switcher"}),n.jsx(Ns,{to:"rescan-widget",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Rescan Widget (auto)"}),n.jsx(Ns,{to:"upload-sim",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Upload Simulator"}),n.jsx(Ns,{to:"hud/game-buttons",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"HUD  Game Buttons"}),n.jsx(Ns,{to:"theme-maker",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Theme / Template Maker"}),n.jsx(Ns,{to:"theme-maker-pro",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Theme / Template Maker  Pro"}),n.jsx("div",{style:$t.groupLabel,children:"Templates"}),n.jsx(Ns,{to:"templates/content-shell",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"ContentShell Template"}),n.jsx(Ns,{to:"templates/blank",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Leere Vorlage"}),n.jsx(Ns,{to:"templates/blank-alt",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Leere Vorlage (Neu)"}),n.jsx(Ns,{to:"templates/blank-layout-2",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Leere Vorlage  Layout 2"}),n.jsx(Ns,{to:"templates/blank-layout-3",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Leere Vorlage  Layout 3"}),n.jsx(Ns,{to:"templates/blank-layout-4",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"Leere Vorlage  Layout 4"}),n.jsx("div",{style:$t.groupLabel,children:"Guide Hub Demos"}),n.jsx(Ns,{to:"am-rune-bonuses-demos",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"AM Rune Bonuses  Demos (AE)"}),n.jsx("div",{style:$t.groupLabel,children:"Graphics / Portraits"}),n.jsx(Ns,{to:"portrait-maker",style:({isActive:t})=>({...$t.link,...t?$t.active:{}}),children:"PortraitMaker Demo"})]})]}),n.jsx("section",{style:$t.tile,children:n.jsx(pC,{})})]})})}const aye="_page_1kokx_1",oye="_topBar_1kokx_17",lye="_tabs_1kokx_31",cye="_tab_1kokx_31",dye="_tabActive_1kokx_63",uye="_searchWrap_1kokx_73",hye="_input_1kokx_85",mye="_stickyIcons_1kokx_105",pye="_iconBtn_1kokx_129",fye="_tableWrap_1kokx_161",gye="_table_1kokx_161",xye="_th_1kokx_181",yye="_td_1kokx_181",vye="_row_1kokx_201",bye="_chips_1kokx_219",_ye="_chip_1kokx_219",wye="_badges_1kokx_249",jye="_badge_1kokx_249",Sye="_badgeMax_1kokx_275",Nye="_badgeAchiev_1kokx_277",kye="_badgeX2_1kokx_279",Cye="_badgeX12_1kokx_281",Tye="_badgeX60_1kokx_283",Eye="_section_1kokx_289",Aye="_sectionHeader_1kokx_297",Iye="_cardList_1kokx_315",Pye="_card_1kokx_315",Rye="_cardMax_1kokx_353",Lye="_iconXL_1kokx_355",Dye="_split_1kokx_369",Mye="_left_1kokx_379",Fye="_leftBtn_1kokx_399",Bye="_leftBtnActive_1kokx_411",$ye="_detail_1kokx_413",Oye="_grid_1kokx_433",Vye="_tile_1kokx_443",Uye="_drawer_1kokx_457",zye="_timeline_1kokx_487",Hye="_node_1kokx_493",Gye="_dot_1kokx_501",ht={page:aye,topBar:oye,tabs:lye,tab:cye,tabActive:dye,searchWrap:uye,input:hye,stickyIcons:mye,iconBtn:pye,tableWrap:fye,table:gye,th:xye,td:yye,row:vye,chips:bye,chip:_ye,badges:wye,badge:jye,badgeMax:Sye,badgeAchiev:Nye,badgeX2:kye,badgeX12:Cye,badgeX60:Tye,section:Eye,sectionHeader:Aye,cardList:Iye,card:Pye,cardMax:Rye,iconXL:Lye,split:Dye,left:Mye,leftBtn:Fye,leftBtnActive:Bye,detail:$ye,grid:Oye,tile:Vye,drawer:Uye,timeline:zye,node:Hye,dot:Gye},gk=[{tier:"Thousand",amount:"1 E3",gold:"2%",xp:"1%",hp:"1%",totalRes:"2%",singleRes:"3%",elemDmg:"2%",itemQuality:"+1",epics:"2%"},{tier:"",amount:"10 E4",gold:"4%",xp:"3%"},{tier:"",amount:"100 E5",gold:"3%",xp:"3%"},{tier:"Million",amount:"1 E6",gold:"2%",xp:"5%",hp:"4%"},{tier:"",amount:"10 E7",gold:"4%",xp:"4%"},{tier:"",amount:"100 E8",gold:"3%",xp:"6%",hp:"5%"},{tier:"Billion",amount:"1 E9",gold:"5%",xp:"7%",hp:"6%",totalRes:"5%"},{tier:"",amount:"10 E10",gold:"2%",xp:"8%"},{tier:"",amount:"100 E11",gold:"6%",xp:"7%",hp:"6%"},{tier:"Trillion",amount:"1 E12",gold:"9%",xp:"8%"},{tier:"",amount:"10 E13",gold:"7%",xp:"4%",hp:"10%",totalRes:"7%"},{tier:"",amount:"100 E14",gold:"11%",xp:"9%"},{tier:"Quadrillion",amount:"1 E15",gold:"8%",xp:"12%",hp:"8%"},{tier:"",amount:"10 E16",gold:"3%",xp:"10%"},{tier:"",amount:"100 E17",gold:"9%",xp:"13%",hp:"11%",totalRes:"9%"},{tier:"Quintillion",amount:"1 E18",gold:"5%",xp:"14%"},{tier:"Capitalist",amount:"10 E19",gold:"10%",xp:"12%",itemQuality:"+2",epics:"10%",note:"Achievement"},{tier:"Achievement",amount:"100 E20",gold:"15%",note:"Achievement"},{tier:"Sextillion",amount:"1 E21",gold:"16%",xp:"13%"},{tier:"",amount:"10 E22",gold:"11%",xp:"17%",hp:"14%",totalRes:"11%"},{tier:"",amount:"100 E23",gold:"4%",xp:"6%",hp:"18%"},{tier:"Septillion",amount:"1 E24",gold:"12%",xp:"15%",hp:"12%"},{tier:"Stinking rich",amount:"10 E25",gold:"13%",xp:"3%",hp:"19%",totalRes:"16%",note:"Achievement"},{tier:"Achievement",amount:"100 E26",gold:"20%",xp:"13%",note:"Achievement"},{tier:"Octillion",amount:"1 E27",gold:"7%",xp:"21%",hp:"17%"},{tier:"",amount:"10 E28",gold:"14%",xp:"22%",totalRes:"14%"},{tier:"",amount:"100 E29",gold:"15%",xp:"18%"},{tier:"Nonillion",amount:"1 E30",gold:"5%",xp:"23%",hp:"15%"},{tier:"",amount:"10 E31",gold:"8%",xp:"24%",totalRes:"19%"},{tier:"",amount:"100 E32",gold:"16%",xp:"25%",hp:"20%",totalRes:"16%"},{tier:"Decillion",amount:"1 E33",gold:"4%",xp:"26%"},{tier:"Rune Master",amount:"10 E34",gold:"17%",xp:"9%",hp:"21%",totalRes:"17%",note:"Achievement"},{tier:"Achievement",amount:"100 E35",gold:"27%",xp:"22%",note:"Achievement"},{tier:"Undecillion",amount:"1 E36",gold:"18%",xp:"6%",hp:"28%",totalRes:"18%"},{tier:"",amount:"10 E37",xp:"23%"},{tier:"",amount:"100 E38",gold:"19%",xp:"10%",hp:"29%",totalRes:"19%"},{tier:"Duodecillion",amount:"1 E39",xp:"24%",note:"x2 Boost"},{tier:"",amount:"10 E40",gold:"20%",xp:"30%",hp:"25%",totalRes:"20%"},{tier:"",amount:"100 E41",xp:"31%"},{tier:"Tredecillion",amount:"1 E42",gold:"21%",xp:"11%",hp:"32%",totalRes:"26%",singleRes:"21%"},{tier:"",amount:"10 E43",gold:"7%",xp:"33%"},{tier:"",amount:"100 E44",gold:"22%",xp:"34%",hp:"27%",totalRes:"22%"},{tier:"Quattuordecillion",amount:"1 E45",gold:"5%",xp:"28%"},{tier:"",amount:"10 E46",gold:"23%",xp:"12%",hp:"35%",totalRes:"23%"},{tier:"",amount:"100 E47",xp:"36%",hp:"29%"},{tier:"Quindecillion",amount:"1 E48",gold:"24%",xp:"24%",note:"x12 Boost"},{tier:"",amount:"10 E49",xp:"37%",hp:"30%"},{tier:"",amount:"100 E50",gold:"25%",xp:"8%",hp:"13%",totalRes:"38%",singleRes:"25%"},{tier:"Sexdecillion",amount:"1 E51",xp:"39%",hp:"31%",itemQuality:"+3"},{tier:"",amount:"10 E52",gold:"26%",xp:"26%"},{tier:"",amount:"100 E53",xp:"40%",hp:"32%"},{tier:"Septendecillion",amount:"1 E54",gold:"27%",xp:"14%",hp:"41%",totalRes:"33%",singleRes:"27%"},{tier:"",amount:"10 E55",gold:"6%"},{tier:"",amount:"100 E56",gold:"28%",xp:"9%",hp:"42%",totalRes:"34%",singleRes:"28%"},{tier:"Octodecillion",amount:"1 E57",xp:"43%",hp:"35%",note:"x8 Boost"},{tier:"",amount:"10 E58",gold:"29%",xp:"15%",hp:"44%",totalRes:"29%"},{tier:"",amount:"100 E59",xp:"45%",hp:"36%"},{tier:"Novendecillion",amount:"1 E60",gold:"30%",xp:"30%"},{tier:"",amount:"10 E61",xp:"46%",hp:"37%"},{tier:"",amount:"100 E62",gold:"31%",xp:"16%",hp:"47%",totalRes:"31%"},{tier:"Vigintillion",amount:"1 E63",gold:"10%",xp:"48%",hp:"38%"},{tier:"",amount:"10 E64",gold:"32%",xp:"49%",totalRes:"32%"},{tier:"",amount:"100 E65",gold:"7%",xp:"39%"},{tier:"Unvigintillion",amount:"1 E66",gold:"33%",xp:"17%",hp:"40%",totalRes:"33%"},{tier:"",amount:"10 E67",xp:"50%"}];function ri(t){const e=t.match(/(\d+)\s*E\s*(\d+)/i);if(!e)return 0;const s=Number(e[1]||1),r=Number(e[2]||0);return Math.log10(s)+r}function Wye(t){var e;return/achievement|capitalist|stinking rich|rune master/i.test(`${t.tier} ${(e=t.note)!=null?e:""}`)}function qye(t){var s,r;const e=(r=(s=t.note)==null?void 0:s.toLowerCase())!=null?r:"";return e.includes("x60")?"x60":e.includes("x12")?"x12":e.includes("x2")?"x2":null}function eg({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:ht.iconBtn,title:t||"Rune",children:e})}function Wb({label:t}){const e=(t||"?").slice(0,1).toUpperCase();return n.jsx("div",{className:ht.iconXL,title:t||"Rune",children:e})}function Kye(t){const e=new Map;for(const s of t){const r=s.tier&&s.tier.trim()!==""?s.tier:"(no tier)";e.has(r)||e.set(r,[]),e.get(r).push(s)}return Array.from(e.entries())}function tm({r:t}){const e=[];return t.gold&&e.push(`Gold ${t.gold}`),t.xp&&e.push(`XP ${t.xp}`),t.hp&&e.push(`HP ${t.hp}`),t.totalRes&&e.push(`Total Res ${t.totalRes}`),t.singleRes&&e.push(`Single Res ${t.singleRes}`),t.elemDmg&&e.push(`Elem ${t.elemDmg}`),t.itemQuality&&e.push(`Item ${t.itemQuality}`),t.epics&&e.push(`Epics ${t.epics}`),n.jsx("div",{className:ht.chips,children:e.map((s,r)=>n.jsx("span",{className:ht.chip,children:s},r))})}function sm({r:t,isMax:e}){const s=[];e&&s.push({label:"MAX",cls:ht.badgeMax}),Wye(t)&&s.push({label:"Achievement",cls:ht.badgeAchiev});const r=qye(t);return r==="x2"&&s.push({label:"x2",cls:ht.badgeX2}),r==="x12"&&s.push({label:"x12",cls:ht.badgeX12}),r==="x60"&&s.push({label:"x60",cls:ht.badgeX60}),s.length===0?null:n.jsx("div",{className:ht.badges,children:s.map((i,a)=>{var l;return n.jsx("span",{className:`${ht.badge} ${(l=i.cls)!=null?l:""}`,children:i.label},a)})})}function Qye(t){const e=t.trim().toLowerCase();return e?gk.filter(s=>{var r;return`${s.tier} ${s.amount} ${(r=s.note)!=null?r:""}`.toLowerCase().includes(e)}):gk}function Xye({data:t}){const e=Math.max(...t.map(i=>ri(i.amount))),s=E.useMemo(()=>Array.from(new Set(t.map(i=>i.tier||"(no tier)"))),[t]);function r(i){const a=document.querySelector(`[data-tier="${CSS.escape(i||"(no tier)")}"`);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:ht.stickyIcons,children:s.map((i,a)=>n.jsx("div",{onClick:()=>r(i),children:n.jsx(eg,{label:i||"(no tier)"})},a))}),n.jsx("div",{className:ht.tableWrap,children:n.jsxs("table",{className:ht.table,children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:ht.th,style:{width:42}}),n.jsx("th",{className:ht.th,style:{width:120},children:"Amount"}),n.jsx("th",{className:ht.th,children:"Bonuses"}),n.jsx("th",{className:ht.th,style:{width:220},children:"Tags"})]})}),n.jsx("tbody",{children:t.map((i,a)=>{const l=Math.abs(ri(i.amount)-e)<1e-6;return n.jsxs("tr",{className:ht.row,"data-tier":i.tier||"(no tier)",children:[n.jsx("td",{className:ht.td,children:n.jsx(eg,{label:i.tier||""})}),n.jsx("td",{className:ht.td,children:i.amount}),n.jsx("td",{className:ht.td,children:n.jsx(tm,{r:i})}),n.jsx("td",{className:ht.td,children:n.jsx(sm,{r:i,isMax:l})})]},a)})})]})})]})}function Yye({data:t}){const e=Kye(t),s=Math.max(...t.map(r=>ri(r.amount)));return n.jsx(n.Fragment,{children:e.map(([r,i])=>n.jsxs("section",{className:ht.section,children:[n.jsx("div",{className:ht.sectionHeader,children:r}),n.jsx("div",{className:ht.cardList,children:i.map((a,l)=>{const d=Math.abs(ri(a.amount)-s)<1e-6;return n.jsxs("div",{className:`${ht.card} ${d?ht.cardMax:""}`,children:[n.jsx(Wb,{label:r}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:a.amount}),n.jsx(sm,{r:a,isMax:d})]}),n.jsx(tm,{r:a})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r})]},l)})})]},r))})}function Jye({data:t}){var l;const e=Array.from(new Set(t.map(d=>d.tier||"(no tier)"))),[s,r]=E.useState((l=e[0])!=null?l:""),i=t.filter(d=>(d.tier||"(no tier)")===s),a=Math.max(...t.map(d=>ri(d.amount)));return n.jsxs("div",{className:ht.split,children:[n.jsx("div",{className:ht.left,children:e.map(d=>n.jsxs("button",{className:`${ht.leftBtn} ${d===s?ht.leftBtnActive:""}`,onClick:()=>r(d),children:[n.jsx(eg,{label:d}),n.jsx("span",{children:d})]},d))}),n.jsxs("div",{className:ht.detail,children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(Wb,{label:s}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:s}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:"Levels in this tier"})]})]}),i.map((d,u)=>{const h=Math.abs(ri(d.amount)-a)<1e-6;return n.jsxs("div",{className:ht.card,style:{gridTemplateColumns:"1fr auto"},children:[n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx("strong",{children:d.amount}),n.jsx(sm,{r:d,isMax:h})]}),n.jsx(tm,{r:d})]}),n.jsx("div",{style:{opacity:.75,fontSize:12,alignSelf:"start"},children:"Amount"})]},u)})]})]})}function Zye({data:t}){const[e,s]=E.useState(null),r=Math.max(...t.map(i=>ri(i.amount)));return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:ht.grid,children:t.map((i,a)=>n.jsx("div",{className:ht.tile,onClick:()=>s(i),title:i.tier||"",children:n.jsxs("div",{style:{display:"grid",gap:6,placeItems:"center"},children:[n.jsx(eg,{label:i.tier||""}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:i.amount})]})},a))}),e&&n.jsxs("div",{className:ht.drawer,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[n.jsx(Wb,{label:e.tier||""}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:e.amount}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:e.tier||""})]})]}),n.jsx("button",{className:ht.tab,onClick:()=>s(null),children:"Close"})]}),n.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:n.jsx(sm,{r:e,isMax:Math.abs(ri(e.amount)-r)<1e-6})}),n.jsx(tm,{r:e})]})]})}function eve({data:t}){const e=Math.max(...t.map(r=>ri(r.amount))),s=[...t].sort((r,i)=>ri(r.amount)-ri(i.amount));return n.jsx("div",{className:ht.timeline,children:s.map((r,i)=>{const a=Math.abs(ri(r.amount)-e)<1e-6;return n.jsxs("div",{className:ht.node,children:[n.jsx("div",{className:ht.dot,children:(r.tier||"?").slice(0,1).toUpperCase()}),n.jsxs("div",{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx("strong",{children:r.amount}),n.jsx(sm,{r,isMax:a})]}),n.jsx(tm,{r})]}),n.jsx("div",{style:{opacity:.75,fontSize:12},children:r.tier||""})]},i)})})}const tve=["A: Compact Table","B: Card Track","C: Two-Pane","D: Icon Grid + Drawer","E: Timeline"];function sve(){const[t,e]=E.useState("A: Compact Table"),[s,r]=E.useState(""),i=Qye(s);return n.jsxs("div",{className:ht.page,children:[n.jsxs("div",{className:ht.topBar,children:[n.jsx("div",{className:ht.tabs,children:tve.map(a=>n.jsx("button",{onClick:()=>e(a),className:`${ht.tab} ${t===a?ht.tabActive:""}`,children:a},a))}),n.jsx("div",{className:ht.searchWrap,children:n.jsx("input",{className:ht.input,placeholder:"Suche (z. B. thousand, x60, E34)",value:s,onChange:a=>r(a.target.value)})})]}),t==="A: Compact Table"&&n.jsx(Xye,{data:i}),t==="B: Card Track"&&n.jsx(Yye,{data:i}),t==="C: Two-Pane"&&n.jsx(Jye,{data:i}),t==="D: Icon Grid + Drawer"&&n.jsx(Zye,{data:i}),t==="E: Timeline"&&n.jsx(eve,{data:i})]})}function nve(){return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-xl font-bold",children:"Playground / HUD"}),n.jsx("div",{className:"mt-4 grid gap-3",children:n.jsx(Ns,{to:"/playground/hud/buttons",className:"block rounded-lg border px-4 py-3 hover:bg-white/5",children:"Game Buttons"})})]})}const je={bg:"#0C1C2E",tile:"#152A42",active:"#1F3B5D",txt:"#FFFFFF",txt2:"#B0C4D9",title:"#F5F9FF",border:"#2B4C73",btn:"#1E2F47"},rve=()=>n.jsx("style",{children:`
    @keyframes shineSweep { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 40% { opacity: .35; } 100% { transform: translateX(120%) skewX(-20deg); opacity: 0; } }
    @keyframes pulseSoft { 0%,100% { box-shadow: 0 0 0 rgba(127,178,255,0);} 50% { box-shadow: 0 0 18px rgba(127,178,255,.35);} }
    @keyframes hologrid { 0% { background-position: 0 0, 0 0; } 100% { background-position: 100px 0, 0 60px; } }
    @keyframes sparkleFloat { 0% { transform: translateY(0); opacity:.7;} 50% { transform: translateY(-4px); opacity:1;} 100% { transform: translateY(0); opacity:.7;} }
    .noise::after { content:""; position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend:overlay;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.8"/></svg>'); }
    .vignette::before { content:""; position:absolute; inset:-2px; pointer-events:none; border-radius:1rem; box-shadow: inset 0 0 40px rgba(0,0,0,.5); }
  `}),Rl={size:"md",withIcon:!0,disabled:!1,baseBorder:!0,glow:!0,shine:!0,scan:!1,pulse:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,hologram:!1,vignette:!1,press:!0,material:"metal",noiseTex:!1,rimLight:!1,innerGlow2:!1,innerShadow2:!1,sparkles:!1,tilt:!1,lift:!1,doubleBorder:!1,cornerNotch:!1,stripesDiag:!1};function ive(t){return t==="sm"?"px-3 py-1.5 text-xs":t==="lg"?"px-6 py-3 text-base":"px-5 py-2 text-sm"}function Od(t){return["relative select-none inline-flex items-center gap-2 font-semibold transition-all border",ive(t.size),t.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer",t.press?"active:translate-y-[1px]":"",t.lift?"hover:-translate-y-[1px]":"",t.tilt?"[perspective:600px] hover:[transform:rotateX(3deg)_rotateY(-3deg)]":""].join(" ")}function MA(t){const e=t.depth?"0 6px 14px rgba(0,0,0,.35)":"0 4px 10px rgba(0,0,0,.25)",s={background:"linear-gradient(180deg, #203757, #132338)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.06), ${e}`},r={background:"linear-gradient(135deg, rgba(127,178,255,.20), rgba(127,178,255,.05))",backdropFilter:"saturate(1.2)",boxShadow:`inset 0 0 10px rgba(127,178,255,.25), ${e}`},i={background:"repeating-linear-gradient(45deg, #1A2F4A 0 6px, #16283f 6px 12px)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},a={background:"linear-gradient(90deg, #8ca6bf, #e3edf7 40%, #8ca6bf 60%, #2b3e57)",filter:"saturate(0.9)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.25), ${e}`},l={background:"linear-gradient(135deg, #705c1f, #b9972e 35%, #ffd86a 55%, #7a6422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.15), ${e}`},d={background:"radial-gradient(100% 60% at 50% 0%, #0f1a2a, #0a1422)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.04), ${e}`},u={background:"linear-gradient(135deg, rgba(92,139,198,.25), rgba(10,255,255,.1))",boxShadow:`${e}`},h={background:"conic-gradient(from 200deg, rgba(120,180,255,.2), rgba(80,140,240,.08), rgba(120,180,255,.2))",boxShadow:`${e}`},m={background:"linear-gradient(120deg, rgba(127,178,255,.18), rgba(127,255,212,.14), rgba(186,127,255,.14))",boxShadow:`${e}`},g={background:"linear-gradient(180deg, #1e3250, #1a2d49)",filter:"saturate(0.9) contrast(1.05)",boxShadow:`inset 0 1px 0 rgba(255,255,255,.05), ${e}`},v={background:"#1b2f49",filter:"saturate(0.8)",boxShadow:`${e}`},b={background:"linear-gradient(135deg, rgba(255,255,255,.06), rgba(127,178,255,.12)), repeating-conic-gradient(from 0deg, rgba(127,178,255,.18) 0 10deg, transparent 10deg 20deg)",backgroundBlendMode:"screen",boxShadow:`${e}`};return{metal:s,crystal:r,carbon:i,chrome:a,gold:l,obsidian:d,neon:u,plasma:h,aurora:m,satin:g,matte:v,holo:b}[t.material]}function Xo(t){const e={color:je.title,borderColor:je.border,...MA(t)};return t.baseBorder&&t.gradBorder&&(e.border="1px solid transparent",e.backgroundImage=`${e.background}, conic-gradient(from 0deg, #5C8BC6, #7FB2FF, #5C8BC6)`,e.backgroundOrigin="border-box",e.backgroundClip="padding-box, border-box"),t.baseBorder&&t.doubleBorder&&(e.boxShadow=`${e.boxShadow}, 0 0 0 1px rgba(127,178,255,.25) inset`),t.baseBorder||(e.border="0 solid transparent"),e}const nm=({children:t})=>n.jsx("span",{className:"relative z-10",children:t});function Vd({fx:t,clip:e}){return n.jsxs(n.Fragment,{children:[t.shine&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:n.jsx("span",{className:"pointer-events-none absolute top-0 left-0 h-full w-1/3 bg-white/12 blur-sm",style:{animation:"shineSweep 2.3s linear infinite"}})}),t.scan&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-70",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0px, rgba(255,255,255,.08) 1px, transparent 1px, transparent 3px)"}}),t.hologram&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-25",style:{clipPath:e,backgroundImage:"linear-gradient(90deg, rgba(127,178,255,.25) 1px, transparent 1px), linear-gradient(0deg, rgba(127,178,255,.20) 1px, transparent 1px)",backgroundSize:"20px 20px, 20px 20px",animation:"hologrid 5s linear infinite"}}),t.vignette&&n.jsx("span",{className:"pointer-events-none vignette absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.glow&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"0 0 12px rgba(127,178,255,.35)",clipPath:e}}),t.bevel&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 0 rgba(0,0,0,.35)",clipPath:e}}),t.baseBorder&&t.outline&&n.jsx("span",{className:"pointer-events-none absolute -inset-[2px] rounded-xl",style:{border:"2px solid rgba(127,178,255,.55)",clipPath:e}}),t.pulse&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{animation:"pulseSoft 2.2s ease-in-out infinite",clipPath:e}}),t.noiseTex&&n.jsx("span",{className:"pointer-events-none noise absolute inset-0 rounded-xl",style:e?{clipPath:e}:void 0}),t.rimLight&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 0 1px rgba(127,178,255,.18), 0 0 22px rgba(127,178,255,.25)",clipPath:e}}),t.innerGlow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 0 18px rgba(127,178,255,.25)",clipPath:e}}),t.innerShadow2&&n.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-xl",style:{boxShadow:"inset 0 12px 24px rgba(0,0,0,.25)",clipPath:e}}),t.sparkles&&n.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-hidden",style:e?{clipPath:e}:void 0,children:[...Array(10)].map((s,r)=>n.jsx("span",{className:"absolute w-1 h-1 rounded-full bg-white/70",style:{top:`${Math.random()*90+5}%`,left:`${Math.random()*90+5}%`,animation:"sparkleFloat 2.6s ease-in-out infinite",animationDelay:`-${Math.random()*2.6}s`}},r))}),t.stripesDiag&&n.jsx("span",{className:"pointer-events-none absolute inset-0 opacity-15",style:{clipPath:e,backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,.15) 0 2px, transparent 2px 8px)"}}),t.cornerNotch&&n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:"polygon(8% 0, 92% 0, 100% 8%, 100% 92%, 92% 100%, 8% 100%, 0 92%, 0 8%)"}})]})}function ave({fx:t,children:e}){const s=Od(t),r=Xo(t),i="polygon(50% 0, 100% 50%, 50% 100%, 0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:t.material==="crystal"?"linear-gradient(135deg, rgba(127,178,255,.12), rgba(127,178,255,.03))":void 0}}),n.jsx(Vd,{fx:t,clip:i}),t.withIcon&&n.jsx(_C,{size:16,className:"relative z-10"}),n.jsx(nm,{children:e})]})}function ove({fx:t,children:e}){const s=Od(t),r=Xo(t),i="polygon(25% 0, 75% 0, 100% 50%, 75% 100%,25% 100%,0 50%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Vd,{fx:t,clip:i}),t.withIcon&&n.jsx(wC,{size:16,className:"relative z-10"}),n.jsx(nm,{children:e})]})}function lve({fx:t,children:e}){const s=Od(t),r=Xo(t),i="polygon(30% 0, 70% 0, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0 70%, 0 30%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i}}),n.jsx(Vd,{fx:t,clip:i}),t.withIcon&&n.jsx(Jl,{size:16,className:"relative z-10"}),n.jsx(nm,{children:e})]})}function cve({fx:t,children:e}){const s=Od(t),r=Xo(t),i="polygon(6% 0, 94% 0, 100% 38%, 88% 100%, 12% 100%, 0 38%)";return n.jsxs("button",{disabled:t.disabled,className:`${s} overflow-hidden`,style:r,children:[n.jsx("span",{className:"pointer-events-none absolute inset-0",style:{clipPath:i,background:`linear-gradient(135deg, ${je.tile}, ${je.active})`}}),n.jsx(Vd,{fx:t,clip:i}),t.withIcon&&n.jsx(jC,{size:16,className:"relative z-10"}),n.jsx(nm,{children:e})]})}function dve({fx:t,children:e}){const s=Od(t),r=Xo(t);return n.jsxs("button",{disabled:t.disabled,className:`${s} rounded-full overflow-hidden`,style:r,children:[n.jsx(Vd,{fx:t}),t.withIcon&&n.jsx(cg,{size:16,className:"relative z-10"}),n.jsx(nm,{children:e})]})}function uve({fx:t,tabs:e}){const[s,r]=E.useState(0);return n.jsx("div",{className:"inline-flex rounded-xl p-1",style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:e.map((i,a)=>n.jsxs("button",{onClick:()=>r(a),className:`px-4 py-2 rounded-lg text-sm transition-colors ${a===s?"text-white":"text-[#B0C4D9] hover:text-white"}`,style:{backgroundColor:a===s?je.active:"transparent",border:a===s&&t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[t.withIcon&&a===s&&n.jsx(cg,{size:14,className:"inline mr-1"}),i]},a))})}function hve({fx:t}){const e=Od(t),s=Xo(t);return n.jsx("button",{disabled:t.disabled,className:`${e} rounded-xl p-2`,style:s,"aria-label":"Icon action",children:n.jsx(kC,{})})}const M0={Arcade:t=>({...t,material:"neon",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!0,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!0,lift:!0}),Mythic:t=>({...t,material:"gold",glow:!0,shine:!0,pulse:!1,hologram:!1,rimLight:!0,sparkles:!1,depth:!0,bevel:!0,outline:!0,gradBorder:!0,innerGlow2:!0,innerShadow2:!0,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1,baseBorder:!0}),Tactical:t=>({...t,material:"carbon",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!0,bevel:!0,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!0,stripesDiag:!0,noiseTex:!0,tilt:!1,lift:!1}),Minimal:t=>({...t,material:"matte",glow:!1,shine:!1,pulse:!1,hologram:!1,rimLight:!1,sparkles:!1,depth:!1,bevel:!1,outline:!1,gradBorder:!1,innerGlow2:!1,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!1}),Holo:t=>({...t,material:"holo",glow:!0,shine:!0,pulse:!0,hologram:!0,rimLight:!0,sparkles:!1,depth:!0,bevel:!1,outline:!1,gradBorder:!0,innerGlow2:!0,innerShadow2:!1,stripesDiag:!1,noiseTex:!1,tilt:!1,lift:!0})};function mve({fx:t,setFx:e}){const s=(d,u)=>e(h=>({...h,[d]:u})),r=d=>e(u=>({...u,[d]:!u[d]})),i=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"],a=[["baseBorder","Border"],["glow","Glow"],["shine","Shine"],["pulse","Pulse"],["depth","3D"],["bevel","Bevel"],["outline","Outline"]],l=[["scan","Scan"],["hologram","Hologram"],["gradBorder","Grad-Border"],["vignette","Vignette"],["noiseTex","Noise"],["rimLight","Rim"],["innerGlow2","InnerGlow"],["innerShadow2","InnerShadow"],["sparkles","Sparkles"],["stripesDiag","Stripes"],["tilt","Tilt"],["lift","Lift"],["doubleBorder","DoubleBorder"],["cornerNotch","CornerNotch"]];return n.jsxs("div",{className:"rounded-2xl p-3 md:p-4 flex flex-wrap items-center gap-2 md:gap-3",style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${je.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:je.title},children:"Presets"}),Object.keys(M0).map(d=>n.jsx("button",{onClick:()=>e(u=>M0[d](u)),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:je.btn,borderColor:je.border,color:je.title},children:d},d))]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${je.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:je.title},children:"Material"}),i.map(d=>n.jsx("button",{onClick:()=>s("material",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.material===d?"":"opacity-70"}`,style:{backgroundColor:t.material===d?je.active:je.btn,borderColor:je.border,color:je.title},children:d},d)),n.jsx("span",{className:"ml-2 text-xs font-semibold",style:{color:je.title},children:"Size"}),["sm","md","lg"].map(d=>n.jsx("button",{onClick:()=>s("size",d),className:`px-2.5 py-1 rounded-md border text-xs ${t.size===d?"":"opacity-70"}`,style:{backgroundColor:t.size===d?je.active:je.btn,borderColor:je.border,color:je.title},children:d.toUpperCase()},d)),n.jsx("button",{onClick:()=>e(d=>({...d,withIcon:!d.withIcon})),className:"ml-1 px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.withIcon?je.active:je.btn,borderColor:je.border,color:je.title},children:"Icon"}),n.jsx("button",{onClick:()=>e(d=>({...d,disabled:!d.disabled})),className:"px-2.5 py-1 rounded-md border text-xs",style:{backgroundColor:t.disabled?je.active:je.btn,borderColor:je.border,color:je.title},children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center gap-2 pr-3 mr-2",style:{borderRight:t.baseBorder?`1px solid ${je.border}`:"0"},children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:je.title},children:"Core FX"}),a.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?je.active:je.btn,borderColor:je.border,color:je.title},children:u},d))]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold",style:{color:je.title},children:"Advanced"}),l.map(([d,u])=>n.jsx("button",{onClick:()=>r(d),className:`px-2.5 py-1 rounded-md border text-xs ${t[d]?"":"opacity-70"}`,style:{backgroundColor:t[d]?je.active:je.btn,borderColor:je.border,color:je.title},children:u},d))]}),n.jsx("button",{onClick:()=>e(Rl),className:"ml-auto px-3 py-1.5 rounded-md border text-xs",style:{backgroundColor:je.btn,borderColor:je.border,color:je.title},children:"Reset"})]})}function xs({fx:t,className:e="",style:s={},children:r,clip:i}){const a=Xo(t);return n.jsxs("div",{className:`relative ${e}`,style:{...a,...s},children:[n.jsx(Vd,{fx:t,clip:i}),n.jsx("div",{className:"relative z-10",children:r})]})}function nr({fx:t,className:e="",children:s}){return n.jsx("div",{className:`rounded-xl p-3 ${e}`,style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:s})}function pve({fx:t}){const[e,s]=E.useState(["EU1","Demon Hunter"]),r=["EU1","EU2","Fusion","Mage","Demon Hunter","Warrior"];return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Toggle Chips"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(i=>{const a=e.includes(i);return n.jsx(xs,{fx:t,className:`rounded-full border ${a?"":"opacity-80"}`,style:{borderColor:je.border},children:n.jsx("button",{onClick:()=>s(l=>a?l.filter(d=>d!==i):[...l,i]),className:"px-3 py-1 text-xs text-white",children:i})},i)})})]})}function fve({fx:t}){return n.jsxs(nr,{fx:t,className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",style:{color:je.title},children:"Icon Toolbar"}),[1,2,3,4,5].map(e=>n.jsx(xs,{fx:t,className:"rounded-xl border p-2",style:{borderColor:je.border},children:n.jsxs("button",{className:"relative",children:[n.jsx(kC,{size:16}),e===3&&n.jsx("span",{className:"absolute -top-1 -right-1 grid place-items-center w-4 h-4 rounded-full text-[10px]",style:{backgroundColor:"#E11D48",color:"white"},children:"3"})]})},e))]})}function gve({fx:t}){return n.jsxs(xs,{fx:t,className:"rounded-xl p-3",style:{border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Breadcrumb HUD"}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-white/90",children:["Home","Guilds","Fusion Planner"].map(e=>n.jsx(xs,{fx:t,className:"rounded-md border px-2 py-1",style:{borderColor:je.border},children:e},e))})]})}function xve({fx:t}){const e=[{k:"Players",v:"12,340",d:"+2.1%"},{k:"Scans/Day",v:"842",d:"+4.0%"},{k:"Hydra",v:"7/10",d:"-"}];return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Stat Tiles"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.map(s=>n.jsxs(xs,{fx:t,className:"rounded-lg border p-2 text-white",style:{borderColor:je.border},children:[n.jsx("div",{className:"text-[10px] opacity-80",children:s.k}),n.jsx("div",{className:"text-sm",children:s.v}),n.jsx("div",{className:"text-[11px] opacity-80",children:s.d})]},s.k))})]})}function yve({fx:t}){const[e,s]=E.useState(.66);return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Meter / Energy Bar"}),n.jsx(xs,{fx:t,className:"h-3 w-full rounded-full border overflow-hidden",style:{borderColor:je.border},children:n.jsx("div",{role:"progressbar","aria-valuenow":Math.round(e*100),"aria-valuemin":0,"aria-valuemax":100,className:"h-full",style:{width:`${e*100}%`,background:"linear-gradient(90deg, #5C8BC6, #7FB2FF)"}})}),n.jsx("div",{className:"mt-2 flex gap-2",children:[.25,.5,.75,1].map(r=>n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsxs("button",{onClick:()=>s(r),className:"px-2 py-1 text-xs text-white",children:[Math.round(r*100),"%"]})},r))})]})}function vve({fx:t}){return n.jsxs(nr,{fx:t,className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-sm",style:{color:je.title},children:"Badge / Medal"}),n.jsxs(xs,{fx:t,className:"relative grid place-items-center w-12 h-12 rounded-full border text-white",style:{borderColor:je.border},children:[n.jsx(Jl,{size:16}),n.jsx("span",{className:"absolute -bottom-1 px-1 rounded bg-[#1F3B5D] text-[10px] text-white",children:"LVL 50"})]})]})}function bve({fx:t}){const[e,s]=E.useState(!1);return n.jsxs(nr,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:je.title},children:"Toast / Notification"}),n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Show"})})]}),e&&n.jsxs(xs,{fx:t,className:"mt-2 relative rounded-xl border p-2",style:{borderColor:je.border},children:[n.jsx("span",{className:"text-xs text-white",children:"Scan complete  14 new players"}),n.jsx("button",{onClick:()=>s(!1),className:"absolute right-2 top-1 text-xs text-white/80",children:""})]})]})}function _ve({fx:t}){const[e,s]=E.useState(!0);return n.jsxs(nr,{fx:t,className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:je.title},children:"Toggle Switch"}),n.jsxs(xs,{fx:t,className:"relative h-6 w-11 rounded-full border",style:{borderColor:je.border},children:[n.jsx("button",{onClick:()=>s(r=>!r),className:`absolute inset-0 rounded-full ${e?"":"opacity-80"}`}),n.jsx("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full transition-transform",style:{transform:`translateX(${e?20:0}px)`,background:"linear-gradient(180deg, #203757, #132338)"}})]})]})}function wve({fx:t}){const[e,s]=E.useState(!1),r=["Overview","Stats","Activity","Hydra"];return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Dropdown HUD"}),n.jsx(xs,{fx:t,className:"w-full text-left rounded-lg border text-xs",style:{borderColor:je.border},children:n.jsx("button",{onClick:()=>s(i=>!i),className:"w-full px-3 py-2 text-white",children:"Select section"})}),e&&n.jsx(xs,{fx:t,className:"mt-2 rounded-lg border",style:{borderColor:je.border},children:r.map(i=>n.jsx("div",{className:"px-3 py-2 text-xs text-white/90 hover:bg-white/5",children:i},i))})]})}function jve({fx:t}){const e=["Map","Scan","Log","Info","Fav","Cfg"];return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Radial Menu (Preview)"}),n.jsxs("div",{className:"relative mx-auto my-2 h-36 w-36",children:[n.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"}}),e.map((s,r)=>{const i=r/e.length*Math.PI*2,a=56,l=56+Math.cos(i)*a,d=56+Math.sin(i)*a;return n.jsx(xs,{fx:t,className:"absolute -ml-5 -mt-5 h-10 w-10 rounded-full border grid place-items-center text-[10px] text-white",style:{left:l,top:d,borderColor:je.border},children:s},s)}),n.jsx(xs,{fx:t,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-12 w-12 rounded-full border grid place-items-center text-[11px] text-white",style:{borderColor:je.border},children:"Menu"})]})]})}function Sve({fx:t}){const e=[1,2,3,4,5],[s,r]=E.useState(2);return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Pagination HUD"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map(i=>n.jsx(xs,{fx:t,className:`rounded-md border px-3 py-1 text-xs ${i===s?"":"opacity-80"}`,style:{borderColor:je.border},children:n.jsx("button",{className:"text-white",onClick:()=>r(i),children:i})},i))})]})}function Nve({fx:t}){const[e,s]=E.useState(!1);return n.jsxs(nr,{fx:t,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm",style:{color:je.title},children:"Modal HUD"}),n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 text-xs text-white",children:"Open"})})]}),e&&n.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:n.jsxs(xs,{fx:t,className:"min-w-[260px] rounded-2xl border p-4 text-white",style:{borderColor:je.border},children:[n.jsx("div",{className:"text-sm mb-2",children:"Mission Brief"}),n.jsx("div",{className:"text-xs opacity-80",children:"Scan completed. 14 anomalies detected. Proceed?"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",onClick:()=>s(!1),children:"Cancel"})}),n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{className:"px-2 py-1 text-xs",children:"Confirm"})})]})]})})]})}function kve({fx:t}){const[e,s]=E.useState("");return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Search HUD"}),n.jsx(xs,{fx:t,className:"rounded-lg border p-2",style:{borderColor:je.border},children:n.jsx("input",{value:e,onChange:r=>s(r.target.value),placeholder:"Type to search",className:"w-full bg-transparent text-xs text-white outline-none placeholder:text-white/50"})})]})}function Cve({fx:t}){const e=["Alpha","Bravo","Charlie","Delta"],[s,r]=E.useState("Bravo");return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"List Selectable"}),n.jsx("div",{className:"space-y-2",children:e.map(i=>n.jsx(xs,{fx:t,className:`rounded-md border px-3 py-2 text-xs text-white ${s===i?"":"opacity-80"}`,style:{borderColor:je.border},children:n.jsx("button",{className:"w-full text-left",onClick:()=>r(i),children:i})},i))})]})}function Tve({fx:t}){const e=["Init","Scan","Verify","Done"],[s,r]=E.useState(1);return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Steps"}),n.jsx("div",{className:"flex items-center gap-3",children:e.map((i,a)=>n.jsxs(J.Fragment,{children:[n.jsx(xs,{fx:t,className:`grid h-8 w-8 place-items-center rounded-full border text-xs text-white ${a<=s?"":"opacity-70"}`,style:{borderColor:je.border},children:a+1}),a<e.length-1&&n.jsx("div",{className:"h-px w-8 bg-white/20"})]},i))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.max(0,s-1)),children:"Back"})}),n.jsx(xs,{fx:t,className:"rounded-md border",style:{borderColor:je.border},children:n.jsx("button",{className:"px-2 py-1 text-xs text-white",onClick:()=>r(Math.min(e.length-1,s+1)),children:"Next"})})]})]})}function Eve({fx:t}){const e=["","","","","",""];return n.jsxs(nr,{fx:t,children:[n.jsx("div",{className:"text-sm mb-2",style:{color:je.title},children:"Dock Bar"}),n.jsx("div",{className:"flex items-center gap-2",children:e.map((s,r)=>n.jsx(xs,{fx:t,className:"grid h-10 w-10 place-items-center rounded-xl border text-white",style:{borderColor:je.border},children:s},r))})]})}function Ave(){const[t,e]=E.useState(Rl);return n.jsxs("div",{className:"min-h-screen p-6 md:p-10 space-y-6",style:{backgroundColor:je.bg,color:je.txt},children:[n.jsx(rve,{}),n.jsxs("header",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(PL,{}),n.jsx("h1",{className:"text-xl font-bold",style:{color:je.title},children:"Game Buttons Playground"}),n.jsx("span",{className:"text-xs",style:{color:je.txt2},children:"(Materials + FX extended + Presets)"})]})}),n.jsx(mve,{fx:t,setFx:e})]}),n.jsxs("section",{className:"grid gap-4",children:[n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:je.title},children:"Shapes"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(ave,{fx:t,children:[n.jsx(_C,{size:16})," Diamond"]}),n.jsxs(ove,{fx:t,children:[n.jsx(wC,{size:16})," Hex"]}),n.jsxs(lve,{fx:t,children:[n.jsx(Jl,{size:16})," Octagon/Shield"]}),n.jsxs(cve,{fx:t,children:[n.jsx(jC,{size:16})," Shard"]}),n.jsxs(dve,{fx:t,children:[n.jsx(cg,{size:16})," Pill/Chip"]}),n.jsx(hve,{fx:t})]})]}),n.jsxs("div",{className:"rounded-2xl p-4 space-y-3",style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold",style:{color:je.title},children:"Tabs"}),n.jsx(uve,{fx:t,tabs:["Overview","Stats","Activity","Hydra"]})]})]}),n.jsx("section",{className:"grid gap-4",children:n.jsxs("div",{className:"rounded-2xl p-4",style:{backgroundColor:je.tile,border:t.baseBorder?`1px solid ${je.border}`:"0 solid transparent"},children:[n.jsx("h2",{className:"font-semibold mb-3",style:{color:je.title},children:"More HUD Patterns"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[n.jsx(pve,{fx:t}),n.jsx(fve,{fx:t}),n.jsx(gve,{fx:t}),n.jsx(xve,{fx:t}),n.jsx(yve,{fx:t}),n.jsx(vve,{fx:t}),n.jsx(bve,{fx:t}),n.jsx(_ve,{fx:t}),n.jsx(wve,{fx:t}),n.jsx(jve,{fx:t}),n.jsx(Sve,{fx:t}),n.jsx(Nve,{fx:t}),n.jsx(kve,{fx:t}),n.jsx(Cve,{fx:t}),n.jsx(Tve,{fx:t}),n.jsx(Eve,{fx:t})]})]})}),n.jsx(Ive,{}),n.jsx("footer",{className:"text-center text-xs",style:{color:je.txt2},children:"SFDataHub palette  Tailwind  No external assets"})]})}function Ive(){return E.useEffect(()=>{try{const t=["metal","crystal","carbon","chrome","gold","obsidian","neon","plasma","aurora","satin","matte","holo"];console.assert(t.includes(Rl.material),"Material type present");const e=Xo(Rl);console.assert(e&&typeof e=="object","surfaceStyles returns object"),t.forEach(r=>{const i=MA({...Rl,material:r});console.assert(i&&typeof i=="object",`materialSurface ok for ${r}`)}),["baseBorder","glow","shine","scan","pulse","depth","bevel","outline","gradBorder","hologram","vignette","press","noiseTex","rimLight","innerGlow2","innerShadow2","sparkles","tilt","lift","doubleBorder","cornerNotch","stripesDiag"].forEach(r=>{console.assert(typeof Rl[r]=="boolean",`toggle ${r} is boolean`)}),Object.entries(M0).forEach(([r,i])=>{console.assert(typeof i=="function",`preset ${r} is function`);const a=i({...Rl});console.assert(a&&typeof a=="object",`preset ${r} returns state`)}),console.log("%cGame Buttons Playground  Dev tests ok","color:#7FB2FF")}catch(t){console.error("DevTests error",t)}},[]),null}const lh={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",radius:16,shadow:20,gap:12},xk={Arcade:{...lh,tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",shadow:28,radius:18},Mythic:{...lh,tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",shadow:32,radius:20}},Gc={background:"#112338",border:"1px solid #2C4A73",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer"},FA={display:"grid",gap:8,alignItems:"center"};function wa({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...FA,gridTemplateColumns:"120px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function Ev({label:t,value:e,min:s,max:r,onChange:i}){return n.jsxs("label",{style:{...FA,gridTemplateColumns:"120px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value))}),n.jsx("input",{type:"number",min:s,max:r,value:e,onChange:a=>i(parseInt(a.target.value||"0"))})]})}function yk(){const[t,e]=J.useState(lh),s=J.useRef(null),r=u=>{const h=s.current;h&&(h.style.setProperty("--page",u.page),h.style.setProperty("--tile",u.tile),h.style.setProperty("--tile-hover",u.tileHover),h.style.setProperty("--nav",u.nav),h.style.setProperty("--active",u.active),h.style.setProperty("--text",u.text),h.style.setProperty("--text-soft",u.textSoft),h.style.setProperty("--title",u.title),h.style.setProperty("--line",u.line),h.style.setProperty("--radius",`${u.radius}px`),h.style.setProperty("--shadow",`0 8px ${u.shadow}px rgba(0,0,0,0.25)`),h.style.setProperty("--gap",`${u.gap}px`))};J.useEffect(()=>{r(t)},[t]);const i=u=>e(xk[u]),a=()=>e(lh),l=()=>{const u=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=document.createElement("a");h.href=URL.createObjectURL(u),h.download="sfdatahub-theme.json",h.click()},d=async u=>{const h=await u.text();e({...lh,...JSON.parse(h)})};return n.jsxs("div",{ref:s,style:{color:"var(--text, #FFFFFF)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title, #F5F9FF)"},children:"Theme / Template Maker (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"380px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(xk).map(u=>n.jsx("button",{style:Gc,onClick:()=>i(u),children:u},u)),n.jsx("button",{style:Gc,onClick:a,children:"Default"}),n.jsx("button",{style:Gc,onClick:l,children:"Export JSON"}),n.jsxs("label",{style:{...Gc,display:"inline-block"},children:["Import JSON",n.jsx("input",{type:"file",accept:"application/json",onChange:u=>u.target.files&&d(u.target.files[0]),style:{display:"none"}})]})]}),n.jsx(wa,{label:"Page",value:t.page,onChange:u=>e(h=>({...h,page:u}))}),n.jsx(wa,{label:"Tile",value:t.tile,onChange:u=>e(h=>({...h,tile:u}))}),n.jsx(wa,{label:"Tile Hover",value:t.tileHover,onChange:u=>e(h=>({...h,tileHover:u}))}),n.jsx(wa,{label:"Nav",value:t.nav,onChange:u=>e(h=>({...h,nav:u}))}),n.jsx(wa,{label:"Active",value:t.active,onChange:u=>e(h=>({...h,active:u}))}),n.jsx(wa,{label:"Text",value:t.text,onChange:u=>e(h=>({...h,text:u}))}),n.jsx(wa,{label:"Text Soft",value:t.textSoft,onChange:u=>e(h=>({...h,textSoft:u}))}),n.jsx(wa,{label:"Title",value:t.title,onChange:u=>e(h=>({...h,title:u}))}),n.jsx(wa,{label:"Line",value:t.line,onChange:u=>e(h=>({...h,line:u}))}),n.jsx(Ev,{label:"Radius",value:t.radius,min:8,max:28,onChange:u=>e(h=>({...h,radius:u}))}),n.jsx(Ev,{label:"Shadow",value:t.shadow,min:8,max:40,onChange:u=>e(h=>({...h,shadow:u}))}),n.jsx(Ev,{label:"Grid Gap",value:t.gap,min:6,max:24,onChange:u=>e(h=>({...h,gap:u}))})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Card Preview"}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}}),n.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:10},children:[n.jsx("button",{style:{...Gc,background:"var(--tile-hover, #1E3A5C)"},children:"Primary"}),n.jsx("button",{style:Gc,children:"Secondary"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:"var(--gap, 12px)"},children:Array.from({length:6}).map((u,h)=>n.jsxs("div",{style:{background:"var(--tile, #152A42)",border:"1px solid var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)",padding:16,boxShadow:"var(--shadow, 0 8px 20px rgba(0,0,0,.25))"},children:[n.jsxs("div",{style:{fontWeight:700,marginBottom:8},children:["Tile ",h+1]}),n.jsx("div",{style:{height:60,border:"1px dashed var(--line, #2C4A73)",borderRadius:"var(--radius, 16px)"}})]},h))})]})]})]})}const F0={page:"#0C1C2E",tile:"#152A42",tileHover:"#1E3A5C",nav:"#0A1728",active:"#1F3B5D",text:"#FFFFFF",textSoft:"#B0C4D9",title:"#F5F9FF",line:"#2C4A73",accent:"#5C8BC6",success:"#4caf50",warning:"#ffb300",danger:"#ef5350",radius:16,border:1,gap:12,shadow:24,surfaceOpacity:100,noise:8,fontFamily:'ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial',fontSize:14,headingsTight:!0,glow:.18,scanlines:0},vk={"SFDataHub (Default)":{...F0},"Arcade Neon":{tile:"#1A2F4A",tileHover:"#25456B",active:"#2D4E78",accent:"#9AECFF",shadow:32,glow:.28,noise:12,fontSize:15},"Mythic Steel":{tile:"#14273E",tileHover:"#1E3657",active:"#2B4C73",text:"#F5F9FF",textSoft:"#D6E4F7",line:"#355a8a",accent:"#B0C4D9",shadow:36,radius:18,noise:6},Terminal:{page:"#0B0E12",tile:"#10161F",tileHover:"#121B26",active:"#0f253d",text:"#D9F7BE",textSoft:"#9DB096",accent:"#9FE870",line:"#223444",glow:.05,shadow:14,border:1,fontFamily:'"IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas'},"High Contrast":{text:"#FFFFFF",textSoft:"#E6E6E6",title:"#FFFFFF",tile:"#0E1F33",tileHover:"#15375C",line:"#6CA0FF",accent:"#6CA0FF",glow:.35,shadow:38}},qg={display:"grid",gap:8,alignItems:"center"},kl={background:"#112338",border:"1px solid var(--line, #2C4A73)",color:"#FFFFFF",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontSize:13},Cl={display:"inline-flex",alignItems:"center",gap:8,padding:"6px 10px",borderRadius:999,background:"rgba(255,255,255,.05)",border:"1px solid var(--line, #2C4A73)",fontSize:12};function ei({label:t,value:e,onChange:s}){return n.jsxs("label",{style:{...qg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"color",value:e,onChange:r=>s(r.target.value)})]})}function ja({label:t,value:e,min:s,max:r,step:i=1,onChange:a,suffix:l}){return n.jsxs("label",{style:{...qg,gridTemplateColumns:"140px 1fr 70px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"range",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value))}),n.jsx("input",{type:"number",min:s,max:r,step:i,value:e,onChange:d=>a(parseFloat(d.target.value||"0"))})]})}function Pve({label:t,checked:e,onChange:s}){return n.jsxs("label",{style:{...qg,gridTemplateColumns:"1fr 46px"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft, #B0C4D9)"},children:t}),n.jsx("input",{type:"checkbox",checked:e,onChange:r=>s(r.target.checked)})]})}function bk(){const[t,e]=J.useState(F0),s=J.useRef(null),r=h=>{const m=s.current;m&&(m.style.setProperty("--page",h.page),m.style.setProperty("--tile",h.tile),m.style.setProperty("--tile-hover",h.tileHover),m.style.setProperty("--nav",h.nav),m.style.setProperty("--active",h.active),m.style.setProperty("--text",h.text),m.style.setProperty("--text-soft",h.textSoft),m.style.setProperty("--title",h.title),m.style.setProperty("--line",h.line),m.style.setProperty("--accent",h.accent),m.style.setProperty("--success",h.success),m.style.setProperty("--warning",h.warning),m.style.setProperty("--danger",h.danger),m.style.setProperty("--radius",`${h.radius}px`),m.style.setProperty("--border",`${h.border}px`),m.style.setProperty("--gap",`${h.gap}px`),m.style.setProperty("--shadow",`0 10px ${h.shadow}px rgba(0,0,0,0.30)`),m.style.setProperty("--surface-opacity",`${h.surfaceOpacity}%`),m.style.setProperty("--noise",`${h.noise}%`),m.style.setProperty("--font",h.fontFamily),m.style.setProperty("--font-size",`${h.fontSize}px`),m.style.setProperty("--heading-tight",h.headingsTight?"1.1":"1.3"),m.style.setProperty("--glow",`${h.glow}`),m.style.setProperty("--scanlines",`${h.scanlines}`))};J.useEffect(()=>{r(t)},[t]);const i=(h,m)=>e(g=>({...g,[h]:m})),a=h=>e(m=>({...m,...vk[h]})),l=()=>{const h=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(h),m.download="sfdatahub-theme-pro.json",m.click()},d=async h=>{try{const m=await h.text(),g=JSON.parse(m);e({...t,...g})}catch(m){}},u={name:"Karynth, the Patient",className:"Demon Hunter",guild:"Night Owls",server:"EU1",level:302,scrapbook:87,power:124580,activity:76};return n.jsxs("div",{ref:s,style:{fontFamily:"var(--font, ui-sans-serif)",color:"var(--text, #fff)"},children:[n.jsx("h2",{style:{marginTop:0,color:"var(--title,#F5F9FF)",lineHeight:"var(--heading-tight,1.2)"},children:"Theme / Template Maker  Pro (scoped)"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"420px 1fr",gap:16},children:[n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile, #152A42) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line,#2C4A73)",borderRadius:"var(--radius,16px)",padding:16,boxShadow:"var(--shadow, 0 10px 24px rgba(0,0,0,.3))",display:"grid",gap:12},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[Object.keys(vk).map(h=>n.jsx("button",{style:kl,onClick:()=>a(h),children:h},h)),n.jsx("button",{style:kl,onClick:()=>e(F0),children:"Reset"}),n.jsx("button",{style:kl,onClick:l,children:"Export"}),n.jsxs("label",{style:{...kl,display:"inline-block"},children:["Import",n.jsx("input",{type:"file",accept:"application/json",style:{display:"none"},onChange:h=>h.target.files&&d(h.target.files[0])})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Palette"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(ei,{label:"Page",value:t.page,onChange:h=>i("page",h)}),n.jsx(ei,{label:"Tile",value:t.tile,onChange:h=>i("tile",h)}),n.jsx(ei,{label:"Tile Hover",value:t.tileHover,onChange:h=>i("tileHover",h)}),n.jsx(ei,{label:"Active",value:t.active,onChange:h=>i("active",h)}),n.jsx(ei,{label:"Text",value:t.text,onChange:h=>i("text",h)}),n.jsx(ei,{label:"Text Soft",value:t.textSoft,onChange:h=>i("textSoft",h)}),n.jsx(ei,{label:"Title",value:t.title,onChange:h=>i("title",h)}),n.jsx(ei,{label:"Line",value:t.line,onChange:h=>i("line",h)}),n.jsx(ei,{label:"Accent",value:t.accent,onChange:h=>i("accent",h)}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[n.jsx(ei,{label:"Success",value:t.success,onChange:h=>i("success",h)}),n.jsx(ei,{label:"Warning",value:t.warning,onChange:h=>i("warning",h)}),n.jsx(ei,{label:"Danger",value:t.danger,onChange:h=>i("danger",h)})]})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Layout"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(ja,{label:"Radius",min:0,max:28,value:t.radius,onChange:h=>i("radius",h)}),n.jsx(ja,{label:"Border (px)",min:0,max:3,step:.5,value:t.border,onChange:h=>i("border",h)}),n.jsx(ja,{label:"Grid Gap",min:6,max:28,value:t.gap,onChange:h=>i("gap",h)}),n.jsx(ja,{label:"Shadow (blur)",min:0,max:48,value:t.shadow,onChange:h=>i("shadow",h)}),n.jsx(ja,{label:"Surface Opacity",min:40,max:100,value:t.surfaceOpacity,onChange:h=>i("surfaceOpacity",h),suffix:"%"}),n.jsx(ja,{label:"Noise",min:0,max:20,value:t.noise,onChange:h=>i("noise",h),suffix:"%"})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"Typography"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("label",{style:{...qg,gridTemplateColumns:"140px 1fr"},children:[n.jsx("span",{style:{fontSize:12,color:"var(--text-soft,#B0C4D9)"},children:"Font Family"}),n.jsx("input",{value:t.fontFamily,onChange:h=>i("fontFamily",h.target.value)})]}),n.jsx(ja,{label:"Base Font Size",min:12,max:18,value:t.fontSize,onChange:h=>i("fontSize",h)}),n.jsx(Pve,{label:"Headings tighter",checked:t.headingsTight,onChange:h=>i("headingsTight",h)})]})]}),n.jsxs("details",{open:!0,children:[n.jsx("summary",{style:{cursor:"pointer",fontWeight:700},children:"FX"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx(ja,{label:"Accent Glow",min:0,max:.6,step:.02,value:t.glow,onChange:h=>i("glow",h)}),n.jsx(ja,{label:"Scanlines",min:0,max:.6,step:.02,value:t.scanlines,onChange:h=>i("scanlines",h)})]})]})]}),n.jsxs("div",{style:{display:"grid",gap:"var(--gap, 12px)"},children:[n.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",background:"color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",border:"var(--border,1px) solid var(--line)",borderRadius:"var(--radius)",padding:12},children:[n.jsxs("span",{style:Cl,children:[n.jsx("span",{style:{width:10,height:10,borderRadius:999,background:"var(--accent)"}})," Accent"]}),n.jsx("span",{style:{...Cl,borderColor:"var(--success)",color:"var(--success)"},children:"Success"}),n.jsx("span",{style:{...Cl,borderColor:"var(--warning)",color:"var(--warning)"},children:"Warning"}),n.jsx("span",{style:{...Cl,borderColor:"var(--danger)",color:"var(--danger)"},children:"Danger"}),n.jsxs("span",{style:Cl,children:["Radius: ",t.radius]}),n.jsxs("span",{style:Cl,children:["Shadow: ",t.shadow]}),n.jsxs("span",{style:Cl,children:["Noise: ",t.noise,"%"]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:"var(--gap)",background:"linear-gradient(0deg, rgba(255,255,255,calc(var(--scanlines,0))) 1px, transparent 1px), color-mix(in srgb, var(--tile) var(--surface-opacity,100%), transparent)",backgroundSize:"100% 3px, auto",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:16,boxShadow:"var(--shadow)"},children:[n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{width:120,height:120,borderRadius:"calc(var(--radius) + 36px)",background:"radial-gradient(80% 80% at 50% 50%, color-mix(in srgb, var(--accent) 35%, transparent) 0%, transparent 70%), #0f2238",border:"1px solid var(--line)",boxShadow:`0 0 0 1px rgba(255,255,255,.03), 0 0 ${12+t.glow*24}px ${t.glow*24}px color-mix(in srgb, var(--accent) 20%, transparent)`}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:800,fontSize:18,lineHeight:"var(--heading-tight)"},children:u.name}),n.jsxs("div",{style:{fontSize:12,color:"var(--text-soft)"},children:[u.className,"  ",u.guild," ",n.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",u.server,")"]})]})]}),n.jsx("div",{style:{display:"grid",gap:8},children:[{label:"Level",value:u.level,pct:u.level%350/3.5,color:"var(--accent)"},{label:"Scrapbook",value:u.scrapbook+"%",pct:u.scrapbook/100,color:"var(--success)"},{label:"Power",value:u.power.toLocaleString(),pct:.72,color:"var(--warning)"},{label:"Activity",value:u.activity+"%",pct:u.activity/100,color:"var(--accent)"}].map((h,m)=>n.jsxs("div",{style:{display:"grid",gap:4},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"var(--text-soft)"},children:[n.jsx("span",{children:h.label}),n.jsx("span",{style:{color:"var(--title)"},children:h.value})]}),n.jsx("div",{style:{position:"relative",height:8,background:"rgba(255,255,255,.06)",border:"1px solid var(--line)",borderRadius:999},children:n.jsx("div",{style:{position:"absolute",inset:0,width:`${Math.round(h.pct*100)}%`,background:`linear-gradient(90deg, color-mix(in srgb, ${h.color} 75%, transparent), ${h.color})`,borderRadius:999,boxShadow:`0 0 ${8+t.glow*12}px color-mix(in srgb, ${h.color} 40%, transparent)`}})})]},m))}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:4},children:[n.jsx("button",{style:{...kl,background:"var(--tile-hover)"},children:"Open Profile"}),n.jsx("button",{style:{...kl,borderColor:"var(--accent)",color:"var(--accent)",background:"transparent"},children:"Favorite"})]})]}),n.jsxs("div",{style:{display:"grid",gap:12},children:[n.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:["Overview","Gear","Stats","Timeline"].map((h,m)=>n.jsx("button",{style:{...kl,background:m===0?"var(--tile-hover)":"transparent",borderColor:m===0?"var(--active)":"var(--line)",boxShadow:m===0?`0 0 ${10+t.glow*20}px color-mix(in srgb, var(--accent) 26%, transparent)`:void 0},children:h},h))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px,1fr))",gap:"var(--gap)"},children:[{k:"DPS",v:"12.4k",trend:"+5%"},{k:"Crit",v:"31%",trend:"+1%"},{k:"Armor",v:"8.2k",trend:"-2%"},{k:"Evasion",v:"15%",trend:"+0%"}].map((h,m)=>n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",padding:12,boxShadow:"var(--shadow)"},children:[n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:h.k}),n.jsx("div",{style:{fontWeight:800,fontSize:24},children:h.v}),n.jsx("div",{style:{fontSize:12,color:h.trend.startsWith("+")?"var(--success)":"var(--danger)"},children:h.trend})]},m))}),n.jsxs("div",{style:{background:"color-mix(in srgb, var(--tile) var(--surface-opacity), transparent)",border:"var(--border) solid var(--line)",borderRadius:"var(--radius)",overflow:"hidden"},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:12,background:"rgba(255,255,255,.05)",borderBottom:"1px solid var(--line)"},children:[n.jsx("div",{style:{padding:10},children:"Attribute"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:"Value"}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:""})]}),[["Strength","2,180","+12"],["Dexterity","2,720","+6"],["Intelligence","1,360","0"],["Luck","2,010","+3"]].map((h,m)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px 100px",fontSize:13,borderTop:"1px solid rgba(255,255,255,.06)",background:m%2?"rgba(255,255,255,.025)":"transparent"},children:[n.jsx("div",{style:{padding:10},children:h[0]}),n.jsx("div",{style:{padding:10,textAlign:"right"},children:h[1]}),n.jsx("div",{style:{padding:10,textAlign:"right",color:h[2].startsWith("+")?"var(--success)":"var(--text-soft)"},children:h[2]})]},m))]})]})]}),n.jsx("div",{style:{fontSize:12,color:"var(--text-soft)"},children:"Scoped: Alle Variablen gelten nur in diesem Playground. Exportiere dein Setup als JSON und bernimm spter selektiv in globale Tokens."})]})]})]})}const _k=["Demon Hunter","Warrior","Mage","Assassin","Berserker","Scout"];function Rve(t=120){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,className:_k[s%_k.length],level:200+s%50,guild:s%3===0?`Guild ${s%10}`:void 0,kpi:Math.round(Math.random()*1e3)/10});return e}const Av={background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16};function wk(){const[t,e]=E.useState("rows"),[s,r]=E.useState(0),[i,a]=E.useState(""),[l,d]=E.useState(60),u=E.useMemo(()=>Rve(240),[]),h=E.useMemo(()=>u.filter(m=>m.level>=s).filter(m=>m.name.toLowerCase().includes(i.toLowerCase())).slice(0,l),[u,s,i,l]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"ListView Switcher"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("select",{value:t,onChange:m=>e(m.target.value),children:[n.jsx("option",{value:"rows",children:"Compact Rows"}),n.jsx("option",{value:"cards",children:"Card Grid"}),n.jsx("option",{value:"masonry",children:"Masonry"})]}),n.jsx("input",{placeholder:"Search",value:i,onChange:m=>a(m.target.value)}),n.jsxs("label",{children:["Min Level ",n.jsx("input",{type:"number",value:s,onChange:m=>r(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]}),n.jsxs("label",{children:["Limit ",n.jsx("input",{type:"number",value:l,onChange:m=>d(parseInt(m.target.value||"0")),style:{marginLeft:8,width:90}})]})]}),t==="rows"&&n.jsx("div",{style:{...Av,padding:0,overflow:"hidden"},children:h.map(m=>{var g;return n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{style:{width:28,height:28,borderRadius:8,background:"#1A2F4A",border:"1px solid #2C4A73"}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontWeight:700},children:[m.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73",marginLeft:8},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{title:"Sparkline placeholder",style:{width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}}),n.jsx("div",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="cards"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>{var g;return n.jsxs("div",{style:Av,children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:m.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9",margin:"6px 0 10px"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),n.jsx("div",{style:{height:80,border:"1px dashed rgba(255,255,255,.15)",borderRadius:8,display:"grid",placeItems:"center"},children:"Media"}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[n.jsx("span",{style:{fontSize:12,color:"#B0C4D9"},children:"Trend"}),n.jsx("span",{style:{fontSize:24,fontWeight:700},children:(g=m.kpi)==null?void 0:g.toFixed(1)})]})]},m.id)})}),t==="masonry"&&n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:12},children:h.map(m=>n.jsxs("div",{style:{...Av,height:140+parseInt(m.id)%3*40},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("div",{style:{fontWeight:700},children:m.name}),n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:m.className})]}),n.jsxs("div",{style:{fontSize:12,color:"#B0C4D9"},children:["Lvl ",m.level," ",m.guild?` ${m.guild}`:""]}),n.jsx("div",{style:{marginTop:8,width:100,height:28,display:"inline-block",background:"linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.02))",borderRadius:6,border:"1px solid rgba(255,255,255,.08)"}})]},m.id))})]})}function jk(t=24){const e=[];for(let s=1;s<=t;s++)e.push({id:String(s),name:`Player ${s}`,server:`EU${1+s%3}`,lastScanMinsAgo:60+s*7%240});return e}function Sk(){const[t,e]=E.useState(120),[s,r]=E.useState(()=>jk(24));E.useEffect(()=>{const a=setInterval(()=>{r(l=>{if(!l.length)return l;const d=Math.floor(Math.random()*l.length),u=[...l];return u[d]={...u[d],lastScanMinsAgo:0},u})},5e3);return()=>clearInterval(a)},[]),E.useEffect(()=>{const a=setInterval(()=>{r(l=>l.map(d=>({...d,lastScanMinsAgo:d.lastScanMinsAgo+15})))},15e3);return()=>clearInterval(a)},[]);const i=E.useMemo(()=>s.filter(a=>a.lastScanMinsAgo>t),[s,t]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Rescan Widget  AutoRemoval"}),n.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:12},children:[n.jsxs("label",{children:["Freshness TTL (min) ",n.jsx("input",{type:"number",value:t,onChange:a=>e(parseInt(a.target.value||"0")),style:{marginLeft:8,width:100}})]}),n.jsx("button",{onClick:()=>r(jk(24)),children:"Reset Demo Data"})]}),n.jsx("p",{style:{color:"#B0C4D9",fontSize:12},children:"Eintrge mit last scan  TTL verschwinden automatisch (keine Checkboxen)."}),n.jsxs("div",{style:{background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,overflow:"hidden"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",fontWeight:600,background:"rgba(255,255,255,.04)"},children:[n.jsx("div",{children:"Player"}),n.jsx("div",{style:{width:180,textAlign:"right"},children:"Last Scan"})]}),i.map(a=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,.06)"},children:[n.jsxs("div",{children:[a.name," ",n.jsx("span",{style:{fontSize:12,padding:"2px 8px",borderRadius:999,background:"#0f2a44",border:"1px solid #2b4c73"},children:a.server})]}),n.jsxs("div",{style:{width:180,textAlign:"right"},children:[a.lastScanMinsAgo," min ago"]})]},a.id)),i.length===0&&n.jsx("div",{style:{padding:"10px 12px",textAlign:"center",color:"#B0C4D9"},children:"All fresh. Nothing to rescan "})]})]})}function Lve(t){const e=/"log"\s*:\s*\{/.test(t)&&/"entries"\s*:\s*\[/.test(t),s=/shakes|fidget|playa|sftools|guild|player|server/i.test(t);return{isHar:e,isSf:s}}function Nk(){const[t,e]=E.useState("idle"),[s,r]=E.useState(null),[i,a]=E.useState(!1),l=E.useCallback(async d=>{var h;d.preventDefault(),a(!1);const u=(h=d.dataTransfer.files)==null?void 0:h[0];if(u){e("validating");try{const m=await u.text(),{isHar:g,isSf:v}=Lve(m);if(e("parsing"),await new Promise(b=>setTimeout(b,600)),!g&&!v){e("error"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),error:"Not recognized as HAR or S&F JSON."});return}e("done"),r({isHar:g,isSf:v,sizeKB:Math.round(u.size/1024),summary:`Detected: ${g?"HAR":v?"S&F JSON":"Unknown"}. Entries: ~${Math.floor(m.length/2500)} (rough).`})}catch(m){e("error"),r({isHar:!1,isSf:!1,sizeKB:0,error:(m==null?void 0:m.message)||"Parse failed"})}}},[]);return n.jsxs("div",{children:[n.jsx("h2",{style:{marginTop:0,color:"#F5F9FF"},children:"Upload Simulator  HAR / JSON Detection"}),n.jsx("div",{onDragOver:d=>{d.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:l,style:{border:"2px dashed #2C4A73",borderRadius:16,padding:32,background:i?"#10263f":"#0f2238"},children:n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Drop HAR or S&F JSON here"}),n.jsx("div",{style:{fontSize:12,color:"#B0C4D9"},children:"Detection  Validation  Parsing  Summary"})]})}),n.jsxs("div",{style:{marginTop:16,background:"#152A42",border:"1px solid #2C4A73",borderRadius:16,padding:16},children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Status:"})," ",t]}),s?n.jsxs("ul",{children:[n.jsxs("li",{children:["isHar: ",String(s.isHar)]}),n.jsxs("li",{children:["isSf: ",String(s.isSf)]}),n.jsxs("li",{children:["sizeKB: ",s.sizeKB]}),s.error&&n.jsxs("li",{style:{color:"#ff8a8a"},children:["error: ",s.error]}),s.summary&&n.jsxs("li",{children:["summary: ",s.summary]})]}):n.jsx("p",{style:{fontSize:12,color:"#B0C4D9"},children:"No file yet."})]})]})}const Dve="_wrap_hxkkn_3",Mve="_left_hxkkn_17",Fve="_right_hxkkn_25",Bve="_canvasCard_hxkkn_33",$ve="_hint_hxkkn_83",Ove="_panel_hxkkn_95",Vve="_panelTitle_hxkkn_109",Uve="_panelBody_hxkkn_121",Sa={wrap:Dve,left:Mve,right:Fve,canvasCard:Bve,hint:$ve,panel:Ove,panelTitle:Vve,panelBody:Uve},zve=["","white","black","gradient","transparentGradient","retroGradient","stained","hvGold","hvSilver","hvBronze"],Hve=["","goldenFrame","twitchFrame","worldBossFrameGold","worldBossFrameSilver","worldBossFrameBronze","polarisFrame"];function Gve(){const[t,e]=E.useState("Canvas ist vorbereitet (526526)."),s=E.useRef(null),[r,i]=E.useState({genderName:"male",class:2,race:1,mouth:1,hair:1,hairColor:1,horn:0,hornColor:0,brows:1,eyes:1,beard:0,nose:1,ears:1,extra:0,special:0,showBorder:!0,background:"gradient",frame:""}),[a,l]=E.useState(!0);E.useEffect(()=>{const m=document.getElementById("PortraitCanvas");if(!m){e("Fehler: Canvas nicht gefunden.");return}try{s.current&&typeof s.current.dispose=="function"&&s.current.dispose()}catch(b){}let g=console.error;a&&(console.error=(...b)=>{var S;const N=String((S=b==null?void 0:b[0])!=null?S:"");N.includes("Failed to load URL")&&N.includes("PortraitMaker-res/portraits/")||g(...b)});let v=null;try{v=new Yk(m,{...r}),s.current=v,e("Rendering")}catch(b){a&&(console.error=g),g("Error initializing PortraitMaker:",b),e("Fehler bei der Initialisierung. Details in der Konsole.");return}return v&&(v.onFinish=()=>{a&&(console.error=g),e("Fertig gerendert.")}),()=>{try{v&&typeof v.dispose=="function"&&v.dispose()}finally{a&&(console.error=g)}}},[r,a]);const d=()=>{const m=document.getElementById("PortraitCanvas");if(!m)return;const g=m.toDataURL("image/png"),v=document.createElement("a");v.href=g,v.download="portrait.png",v.click()},u=m=>{i(g=>({...g,genderName:m,beard:m==="female"?0:g.beard}))},h=r.special!==0;return n.jsxs("div",{className:Sa.wrap,children:[n.jsx("div",{className:Sa.left,children:n.jsxs("div",{className:Sa.canvasCard,children:[n.jsx("canvas",{id:"PortraitCanvas",className:"portrait-canvas",width:526,height:526}),n.jsx("div",{className:Sa.hint,children:t})]})}),n.jsx("div",{className:Sa.right,children:n.jsxs("div",{className:Sa.panel,children:[n.jsx("h2",{className:Sa.panelTitle,children:"Controls"}),n.jsx("div",{className:Sa.panelBody,children:n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{title:"0 = normaler Avatar; 0 = Special-Avatar-Index (ignoriert andere Parts)",children:["Special:",n.jsx("input",{type:"number",value:r.special,onChange:m=>i(g=>({...g,special:Number(m.target.value||0)})),style:{width:100}})]}),n.jsxs("fieldset",{disabled:h,style:{border:0,padding:0,margin:0},children:[n.jsxs("label",{children:["Gender:",n.jsxs("select",{value:r.genderName,onChange:m=>u(m.target.value),children:[n.jsx("option",{value:"male",children:"male"}),n.jsx("option",{value:"female",children:"female"})]})]}),n.jsxs("label",{children:["Class:",n.jsx("input",{type:"number",min:1,value:r.class,onChange:m=>i(g=>({...g,class:Number(m.target.value||0)})),style:{width:80}})]}),n.jsxs("label",{children:["Race:",n.jsx("input",{type:"number",min:1,value:r.race,onChange:m=>i(g=>({...g,race:Number(m.target.value||0)})),style:{width:80}})]})]}),n.jsxs("label",{children:["Background:",n.jsx("select",{value:r.background,onChange:m=>i(g=>({...g,background:m.target.value})),children:zve.map(m=>n.jsx("option",{value:m,children:m===""?"transparent":m},m))})]}),n.jsxs("label",{children:["Frame:",n.jsx("select",{value:r.frame,onChange:m=>i(g=>({...g,frame:m.target.value})),children:Hve.map(m=>n.jsx("option",{value:m,children:m===""?"none":m},m))})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:r.showBorder,onChange:m=>i(g=>({...g,showBorder:m.target.checked}))}),"showBorder"]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:a,onChange:m=>l(m.target.checked)}),"Mute 404 logs (Playground)"]}),n.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:n.jsx("button",{onClick:d,children:"Export PNG"})}),h&&n.jsxs("div",{className:Sa.hint,children:["Hinweis: Bei ",n.jsx("code",{children:"special  0"})," werden die Gesichtsteile ignoriert  das ist korrekt laut Guide."]})]})})]})})]})}const Wve=[{id:"hero",title:"Hero Panel",description:"Ein optionaler Einstieg mit Titel und Actions."},{id:"overview",title:"Overview Blocks",description:"Kurze KPIs oder Status-Kacheln."},{id:"details",title:"Detail Cards",description:"Sections fuer tiefergehende Inhalte oder Tabellen."}],qve=[{label:"Last Update",value:"vor 2 Stunden"},{label:"Owner",value:"Playground Team"},{label:"Status",value:"Prototype"}],Kve=["Review Datenbindung fuer API","UI mit Live-Daten verdrahten","Validierung & Edge-Cases definieren"];function Qve(){return n.jsx(Pt,{title:"ContentShell Template",subtitle:"Basislayout fuer neue Playground-Seiten",leftWidth:260,rightWidth:260,centerFramed:!0,left:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Outline"}),n.jsx("ul",{className:"mt-2 space-y-2",children:Wve.map(t=>n.jsxs("li",{className:"rounded-xl border border-slate-600/60 bg-slate-800/50 p-3",children:[n.jsx("div",{className:"font-semibold text-slate-50",children:t.title}),n.jsx("p",{className:"text-xs text-slate-400",children:t.description})]},t.id))})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Checks"}),n.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4 text-xs",children:[n.jsx("li",{children:"Viewport-Anpassung -> Desktop/Mobile"}),n.jsx("li",{children:"Dark-Mode Farben auf Konsistenz pruefen"}),n.jsx("li",{children:"Rail Inhalte sticky halten"})]})]})]}),right:n.jsxs("div",{className:"space-y-4 text-sm text-slate-200",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quick Stats"}),n.jsx("dl",{className:"mt-3 space-y-3 text-sm",children:qve.map(t=>n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("dt",{className:"text-xs text-slate-400",children:t.label}),n.jsx("dd",{className:"font-semibold",children:t.value})]},t.label))})]}),n.jsxs("div",{className:"rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Next up"}),n.jsx("ul",{className:"mt-3 list-disc space-y-1 pl-4 text-xs text-emerald-100/90",children:Kve.map(t=>n.jsx("li",{children:t},t))})]})]}),children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx("section",{id:"hero",className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-6",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Hero"}),n.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-50",children:"Willkommen im Template"}),n.jsx("p",{className:"text-sm text-slate-300",children:"Nutze diesen Bereich, um Kontext oder KPIs zu platzieren."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:"rounded-xl border border-slate-500/60 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200",children:"Secondary"}),n.jsx("button",{className:"rounded-xl bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-950",children:"Primary Action"})]})]})}),n.jsx("section",{id:"overview",className:"grid gap-4 md:grid-cols-3",children:["Snapshot","Pipelines","Open Topics"].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/40 p-4",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:t}),n.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:"42"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Platzhalter fuer Inhalte oder KPIs."})]},t))}),n.jsx("section",{id:"details",className:"space-y-4",children:[1,2].map(t=>n.jsxs("article",{className:"rounded-2xl border border-slate-600/60 bg-slate-900/60 p-5",children:[n.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Detail Section ",t]}),n.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Modul ",t]})]}),n.jsx("button",{className:"rounded-lg border border-slate-500/50 px-3 py-1 text-xs text-slate-200",children:"Configure"})]}),n.jsx("p",{className:"mt-3 text-sm text-slate-300",children:"Dieser Bereich ist bewusst leer gehalten, damit schnell Komponenten, Tabellen oder Diagramme eingefuegt werden koennen."})]},t))})]})})}const Xve={genderName:"male",class:2,race:1,mouth:1,hair:3,hairColor:4,horn:0,hornColor:0,brows:2,eyes:3,beard:0,nose:2,ears:1,extra:0,special:0,showBorder:!0,background:"",frame:"",mirrorHorizontal:!0};function Yve(){return n.jsx(Pt,{title:"Leere Template-Seite",subtitle:"Noch kein Inhalt hinterlegt",centerFramed:!0,children:n.jsx("div",{className:"flex w-full justify-center pt-10",children:n.jsx(tA,{config:Xve,label:"Playground Avatar"})})})}const Jve=Array.from({length:4},(t,e)=>({id:e+1,label:e===0?"Leere Vorlage (Neu)":`Kopie ${e+1}`,note:e===0?"Basisbereich zum Sammeln von Modulen und Ideen.":"Kopiertes Layout zum Testen weiterer Varianten."}));function Zve(){return n.jsx(Pt,{title:"Leere Template-Seite - Neu",subtitle:"Starte hier mit deinem eigenen Layout.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"grid w-full max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2",children:Jve.map(t=>n.jsxs("div",{className:"flex h-full flex-col items-stretch gap-4 rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",style:{color:"#86A0C7"},children:t.label}),n.jsx("div",{className:"flex h-48 items-center justify-center rounded-2xl border-2 border-dashed border-white/30 px-3 text-center text-sm text-slate-300",style:{background:"rgba(20, 40, 70, 0.4)"},children:"Noch keine Inhalte. Ziehe Komponenten aus dem Hub und teste Layoutideen."})]}),n.jsx("p",{className:"text-[11px] text-slate-400",children:t.note})]},t.id))})})})}const e0e="_avatarFrameMask_1pzs8_5",t0e="_avatarFrameOverlay_1pzs8_7",kk={avatarFrameMask:e0e,avatarFrameOverlay:t0e},s0e=[{title:"Header",detail:"Groer Hero-Bereich"},{title:"CTA-Row",detail:"Zentrale Aktion mit zwei Buttons"},{title:"Preview",detail:"Groes Portrait, ready to replace with real block"},{title:"Log",detail:"Beobachte Logs oder Hinweise hier"}];function n0e(){return n.jsx(Pt,{title:"Leere Template-Seite  Layout 2",subtitle:"Whle einzelne Bereiche und teste ihre Kombination.",centerFramed:!0,children:n.jsxs("div",{className:"flex w-full flex-col gap-6 pt-10",children:[n.jsx("div",{className:"grid w-full gap-6 md:grid-cols-2",children:s0e.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:t.title}),n.jsx("p",{className:"mt-2 text-xs text-slate-300",children:t.detail}),n.jsx("div",{className:"mt-4 h-24 flex-1 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.title))}),n.jsxs("section",{className:"mt-10 flex w-full flex-col gap-10",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 1  Radialer Mask-Fade (Avatar-Hintergrund blendet weich aus)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Das Avatarbild wird mit einer Maskierung in der Mitte komplett sichtbar gehalten und zu den Rndern hin transparent, sodass der Card-Hintergrund durchscheint."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:kk.avatarFrameMask,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Mask Fade"})})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-white",children:"Variante 2  Overlay-Gradient (Rand verschmilzt mit Hintergrund)"}),n.jsx("p",{className:"mt-1 text-xs text-slate-300",children:"Hier bleibt das Avatarbild unverndert, aber ein Overlay-Gradient frbt die Rnder in deine Hintergrundfarbe ein. Dadurch wird der harte Avatar-Hintergrund aufgeweicht."}),n.jsx("div",{className:"mt-4",children:n.jsx("div",{className:kk.avatarFrameOverlay,children:n.jsx("img",{src:"/assets/demo-avatar-special.png",alt:"Avatar Demo  Overlay Fade"})})})]})]})]})})}const r0e=[{label:"Sektion A",info:"Intro + Hinweise"},{label:"Sektion B",info:"Visuelle Tester"},{label:"Sektion C",info:"Varianten-Log"}];function i0e(){return n.jsx(Pt,{title:"Leere Template-Seite  Layout 3",subtitle:"bersichtliche Spalten lassen sich schnell mit Komponenten fllen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-8 pt-10",children:n.jsx("div",{className:"flex w-full flex-col gap-4",children:r0e.map(t=>n.jsxs("div",{className:"flex flex-col rounded-2xl border border-white/10 bg-slate-900/60 p-5",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.4em]",style:{color:"#7EA0D4"},children:[t.label,n.jsx("span",{children:"Leer"})]}),n.jsx("p",{className:"mt-2 text-sm text-slate-300",children:t.info}),n.jsx("div",{className:"mt-4 h-32 rounded-2xl border border-dashed border-white/30 bg-white/5"})]},t.label))})})})}function a0e(){return n.jsx(Pt,{title:"Leere Template-Seite  Layout 4",subtitle:"Groformatiger Workspace fr experimentelle Kompositionen.",centerFramed:!0,children:n.jsx("div",{className:"flex w-full flex-col gap-6 pt-10",children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.4em]",style:{color:"#A5B7DB"},children:"Bereich 1"}),n.jsx("div",{className:"mt-4 h-40 rounded-2xl border border-dashed border-white/30 bg-gradient-to-b from-white/5 to-transparent"})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 2"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]}),n.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-900/60 p-6",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.35em]",style:{color:"#A5B7DB"},children:"Bereich 3"}),n.jsx("div",{className:"mt-4 h-28 rounded-2xl border border-dashed border-white/30 bg-white/5"})]})]})]})})})}const Y={page:"#0C1C2E",tile:"#152A42",tileAlt:"#14273E",line:"#2C4A73",text:"#FFFFFF",title:"#F5F9FF"},o0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},l0e={maxWidth:1200,margin:"0 auto"},c0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function d0e(){return n.jsx("div",{style:o0e,children:n.jsxs("div",{style:l0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"HAR Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:c0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"HAR Import Demo"}),n.jsxs("div",{style:{border:`1px dashed ${Y.line}`,borderRadius:12,padding:24,textAlign:"center",background:Y.tileAlt},children:["Drop .har file here or"," ",n.jsx("button",{style:{padding:"6px 10px"},children:"Browse"})]}),n.jsx("div",{style:{marginTop:8,fontSize:12,opacity:.85},children:"Validation, progress, and logs would appear here."})]})})]})})}const u0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},h0e={maxWidth:1200,margin:"0 auto"},m0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function p0e(){return n.jsx("div",{style:u0e,children:n.jsxs("div",{style:h0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"JSON/CSV Import Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:m0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"JSON/CSV Import"}),n.jsxs("div",{style:{display:"grid",gap:8},children:[n.jsxs("label",{children:["Upload JSON ",n.jsx("input",{type:"file",accept:".json"})]}),n.jsxs("label",{children:["Upload CSV ",n.jsx("input",{type:"file",accept:".csv"})]})]}),n.jsx("div",{style:{marginTop:8},children:"Mapping Wizard (columns  fields) preview placeholder."})]})})]})})}const f0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},g0e={maxWidth:1200,margin:"0 auto"},x0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function y0e(){return n.jsx("div",{style:f0e,children:n.jsxs("div",{style:g0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Index Schema Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:x0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Index Schema Viewer"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:["players","groups","trackers","metadata"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"fields"})]},t))})]})})]})})}const v0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},b0e={maxWidth:1200,margin:"0 auto"},_0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function w0e(){return n.jsx("div",{style:v0e,children:n.jsxs("div",{style:b0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Player Profile (Contained) Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:_0e,children:[n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#1A2F4A",border:`1px solid ${Y.line}`}}),n.jsxs("div",{children:[n.jsx("h3",{style:{margin:"4px 0",color:Y.title},children:"NightRaven"}),n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Demon Hunter  Guild: Ravens  EU1"})]})]}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:12},children:["Level 487","Scrapbook 93%","Total 12.4M","Scanned 2d ago"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const j0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},S0e={maxWidth:1200,margin:"0 auto"},N0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function k0e(){return n.jsx("div",{style:j0e,children:n.jsxs("div",{style:S0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Guild Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:N0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Guild Hub"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Y.title},children:"Ravens"}),n.jsx("span",{children:"Avg Lvl 465"}),n.jsx("span",{children:"Fresh scans 82%"})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8},children:[n.jsx("b",{style:{color:Y.title},children:"Arcana"}),n.jsx("span",{children:"Avg Lvl 458"}),n.jsx("span",{children:"Fresh scans 76%"})]})]})]})})]})})}const C0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},T0e={maxWidth:1200,margin:"0 auto"},E0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function A0e(){return n.jsx("div",{style:C0e,children:n.jsxs("div",{style:T0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Server Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:E0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))",gap:8,marginTop:8},children:["EU1","EU2","EU3","INT1","US1"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"Top players, activity"})]},t))})]})})]})})}const I0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},P0e={maxWidth:1200,margin:"0 auto"},R0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function L0e(){return n.jsx("div",{style:I0e,children:n.jsxs("div",{style:P0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Rankings Views Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:R0e,children:[n.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:["Compact","MasterDetail","Cards"].map(t=>n.jsx("button",{style:{padding:"6px 10px",background:"#152A42",border:`1px solid ${Y.line}`,borderRadius:10},children:t},t))}),n.jsx("div",{style:{border:`1px solid ${Y.line}`,borderRadius:12,overflow:"hidden"},children:[{id:"p1",name:"NightRaven",delta:"+2",lvl:487},{id:"p2",name:"ManaFox",delta:"-1",lvl:472}].map((t,e)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 60px 60px",gap:8,padding:"10px 12px",background:e%2?"#14273E":"#152A42"},children:[n.jsx("b",{style:{color:Y.title},children:t.name}),n.jsx("span",{children:t.delta}),n.jsxs("span",{children:["Lvl ",t.lvl]})]},t.id))})]})})]})})}const D0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},M0e={maxWidth:1200,margin:"0 auto"},F0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function B0e(){return n.jsx("div",{style:D0e,children:n.jsxs("div",{style:M0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"KPI Dashboard Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:F0e,children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["Scans/day 128","Growth 7d +12%","Servers 5"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})})})]})})}const $0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},O0e={maxWidth:1200,margin:"0 auto"},V0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function U0e(){return n.jsx("div",{style:$0e,children:n.jsxs("div",{style:O0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Progression Tracker Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:V0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Progression Tracker"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"Chart placeholder"})]})})]})})}const z0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},H0e={maxWidth:1200,margin:"0 auto"},G0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function W0e(){return n.jsx("div",{style:z0e,children:n.jsxs("div",{style:H0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Legendary & Pets Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsx("div",{style:G0e,children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"Legendary Tracker"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Shadow Bow "}),n.jsx("li",{children:"Mythic Ring "})]})]}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"Pets"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Firewolf 4/5"}),n.jsx("li",{children:"Sandwyrm 2/5"})]})]})]})})})]})})}const q0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},K0e={maxWidth:1200,margin:"0 auto"},Q0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function X0e(){return n.jsx("div",{style:q0e,children:n.jsxs("div",{style:K0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Community Scans Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Q0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Community Scans"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8,marginTop:8},children:["Weekly Podium","Top Scanners","Past Winners"].map(t=>n.jsx("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:t},t))})]})})]})})}const Y0e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},J0e={maxWidth:1200,margin:"0 auto"},Z0e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function e1e(){return n.jsx("div",{style:Y0e,children:n.jsxs("div",{style:J0e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Creator Hub Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Z0e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Creator Hub"}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:8,marginTop:8},children:["YT: ArcMage","Twitch: DemonHunterPro"].map(t=>n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:t}),n.jsx("div",{style:{fontSize:12,opacity:.85},children:"clicks / subs / language"})]},t))})]})})]})})}const t1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},s1e={maxWidth:1200,margin:"0 auto"},n1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function r1e(){return n.jsx("div",{style:t1e,children:n.jsxs("div",{style:s1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feedback Form Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:n1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback"}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Category"}),n.jsxs("select",{style:{background:"#152A42",color:Y.text,border:`1px solid ${Y.line}`,borderRadius:8,padding:"6px 8px"},children:[n.jsx("option",{children:"UI"}),n.jsx("option",{children:"Data"}),n.jsx("option",{children:"Bug"})]})]}),n.jsxs("label",{style:{display:"grid",gap:6,marginTop:8},children:[n.jsx("span",{children:"Message"}),n.jsx("textarea",{rows:4,style:{background:"#152A42",color:Y.text,border:`1px solid ${Y.line}`,borderRadius:8,padding:"6px 8px"}})]}),n.jsx("button",{style:{marginTop:8,padding:"8px 12px",background:"#1E3A5C",border:`1px solid ${Y.line}`,borderRadius:10},children:"Send"})]})})]})})}const i1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},a1e={maxWidth:1200,margin:"0 auto"},o1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function l1e(){return n.jsx("div",{style:i1e,children:n.jsxs("div",{style:a1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feedback Admin Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:o1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feedback Admin"}),n.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:["Improve HUD","Fix CSV import"].map(t=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("span",{children:t}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{style:{padding:"6px 10px"},children:"Approve"}),n.jsx("button",{style:{padding:"6px 10px"},children:"Reject"})]})]},t))})]})})]})})}const c1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},d1e={maxWidth:1200,margin:"0 auto"},u1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function h1e(){return n.jsx("div",{style:c1e,children:n.jsxs("div",{style:d1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Tutorials Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:u1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Tutorial Engine"}),n.jsxs("ol",{children:[n.jsx("li",{children:"Step highlights"}),n.jsx("li",{children:"Progress bar"}),n.jsx("li",{children:"Badges"})]})]})})]})})}const m1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},p1e={maxWidth:1200,margin:"0 auto"},f1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function g1e(){return n.jsx("div",{style:m1e,children:n.jsxs("div",{style:p1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Wiki & FAQ Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:f1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Wiki / FAQ"}),n.jsx("input",{placeholder:"Search",style:{marginTop:8,padding:"8px 10px",background:"#152A42",border:`1px solid ${Y.line}`,borderRadius:10}}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"How to import HAR?"}),n.jsx("li",{children:"What data is stored?"})]})]})})]})})}const x1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},y1e={maxWidth:1200,margin:"0 auto"},v1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function b1e(){return n.jsx("div",{style:x1e,children:n.jsxs("div",{style:y1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Settings Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:v1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Settings"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("label",{children:["Language",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"EN"}),n.jsx("option",{children:"DE"})]})]}),n.jsxs("label",{children:["Theme",n.jsxs("select",{style:{marginLeft:8},children:[n.jsx("option",{children:"Dark"}),n.jsx("option",{children:"Custom"})]})]}),n.jsxs("label",{children:["Notifications",n.jsx("input",{type:"checkbox",defaultChecked:!0,style:{marginLeft:8}})]}),n.jsxs("label",{children:["Privacy",n.jsx("input",{type:"checkbox",style:{marginLeft:8}})]})]})]})})]})})}const _1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},w1e={maxWidth:1200,margin:"0 auto"},j1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function S1e(){return n.jsx("div",{style:_1e,children:n.jsxs("div",{style:w1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"ToS & Privacy Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:j1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"ToS & Privacy"}),n.jsx("div",{style:{height:180,overflow:"auto",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:n.jsx("p",{children:"Allgemeines Registrierung Rollen Verarbeitung Transparenz Sicherheit Haftung nderungen Kontakt"})}),n.jsxs("label",{style:{marginTop:8},children:[n.jsx("input",{type:"checkbox"})," I agree"]})]})})]})})}const N1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},k1e={maxWidth:1200,margin:"0 auto"},C1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function T1e(){return n.jsx("div",{style:N1e,children:n.jsxs("div",{style:k1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Transparency Viewer Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:C1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Live Payload Viewer"}),n.jsx("div",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap",background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:`{
  "user_id": "abc",
  "player_id": "p123",
  "server": "EU1",
  "verified_at": "2025-09-27T18:00:00Z"
}`})]})})]})})}const E1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},A1e={maxWidth:1200,margin:"0 auto"},I1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function P1e(){return n.jsx("div",{style:E1e,children:n.jsxs("div",{style:A1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"PWA Update Flow Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:I1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"PWA Update Flow"}),n.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[n.jsx("button",{style:{padding:"8px 12px"},children:"Check for updates"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Reload to update"})]})]})})]})})}const R1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},L1e={maxWidth:1200,margin:"0 auto"},D1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function M1e(){return n.jsx("div",{style:R1e,children:n.jsxs("div",{style:L1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"PWA Install Prompt Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:D1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Install Prompt"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:12,marginTop:8},children:[n.jsx("div",{style:{width:120,height:120,background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:20}}),n.jsxs("div",{children:[n.jsx("b",{style:{color:Y.title},children:"Install SFDataHub"}),n.jsx("p",{style:{opacity:.85},children:"Faster access, offline read-only, notifications"}),n.jsx("button",{style:{padding:"8px 12px"},children:"Install"})]})]})]})})]})})}const F1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},B1e={maxWidth:1200,margin:"0 auto"},$1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function O1e(){return n.jsx("div",{style:F1e,children:n.jsxs("div",{style:B1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Connect Manual Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:$1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Manual (Bookmarklet)"}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:[n.jsx("b",{style:{color:Y.title},children:"View source"}),n.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:"javascript:(function(){/*  */})();"})]})]})})]})})}const V1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},U1e={maxWidth:1200,margin:"0 auto"},z1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function H1e(){return n.jsx("div",{style:V1e,children:n.jsxs("div",{style:U1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Connect Userscript Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:z1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Connect: Auto-Detection (Userscript)"}),n.jsxs("div",{style:{display:"grid",gap:8,marginTop:8},children:[n.jsx("div",{children:"Install/Enable check"}),n.jsx("div",{children:"Events preview"})]})]})})]})})}const G1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},W1e={maxWidth:1200,margin:"0 auto"},q1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function K1e(){return n.jsx("div",{style:G1e,children:n.jsxs("div",{style:W1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Exports Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:q1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Exports"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"CSV/Excel"}),n.jsx("div",{children:"Tabs, widths, locales"})]}),n.jsxs("div",{style:{background:Y.tileAlt,border:`1px solid ${Y.line}`,borderRadius:10,padding:10},children:[n.jsx("b",{style:{color:Y.title},children:"JSON API"}),n.jsx("div",{children:"Schema picker, whitelists"})]})]})]})})]})})}const Q1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},X1e={maxWidth:1200,margin:"0 auto"},Y1e={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function J1e(){return n.jsx("div",{style:Q1e,children:n.jsxs("div",{style:X1e,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Deeplinks Demo Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:Y1e,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Deeplinks & URL Params"}),n.jsx("div",{style:{fontFamily:"monospace",background:"#0A1728",border:`1px solid ${Y.line}`,borderRadius:10,padding:10,marginTop:8},children:"/toplists?server=eu1&class=warrior&range=7d"})]})})]})})}const Z1e={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},ebe={maxWidth:1200,margin:"0 auto"},tbe={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function sbe(){return n.jsx("div",{style:Z1e,children:n.jsxs("div",{style:ebe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Servers Editor Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:tbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Servers Editor"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px 120px",gap:8,marginTop:8},children:[n.jsx("input",{placeholder:"Server name (EU4)",style:{padding:"6px 8px"}}),n.jsxs("select",{children:[n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Disabled"})]}),n.jsx("button",{children:"Add"})]})]})})]})})}const nbe={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},rbe={maxWidth:1200,margin:"0 auto"},ibe={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function abe(){return n.jsx("div",{style:nbe,children:n.jsxs("div",{style:rbe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Jobs & Queues Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:ibe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Jobs / Queues"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Import: EU1-2025-09-27T16:00 "}),n.jsx("li",{children:"Rescan: EU2-Player#123 pending"})]})]})})]})})}const obe={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},lbe={maxWidth:1200,margin:"0 auto"},cbe={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function dbe(){return n.jsx("div",{style:obe,children:n.jsxs("div",{style:lbe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Feature Flags Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:cbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Feature Flags"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 120px",gap:8,marginTop:8},children:[n.jsx("span",{children:"Beta: New Rankings"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox",defaultChecked:!0})}),n.jsx("span",{children:"Widgets v2"}),n.jsx("label",{children:n.jsx("input",{type:"checkbox"})})]})]})})]})})}const ube={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},hbe={maxWidth:1200,margin:"0 auto"},mbe={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function pbe(){return n.jsx("div",{style:ube,children:n.jsxs("div",{style:hbe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Table Performance Lab Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:mbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Table Performance Lab"}),n.jsx("div",{style:{height:160,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"virtualized table placeholder"})]})})]})})}const fbe={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},gbe={maxWidth:1200,margin:"0 auto"},xbe={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function ybe(){return n.jsx("div",{style:fbe,children:n.jsxs("div",{style:gbe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Mobile Bottom Sheet Filters Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:xbe,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Mobile Bottom Sheet Filters"}),n.jsx("div",{style:{height:180,border:`1px dashed ${Y.line}`,borderRadius:10,display:"grid",placeItems:"center"},children:"bottom sheet mock"})]})})]})})}const vbe={minHeight:"100vh",background:Y.page,color:Y.text,padding:"24px 16px"},bbe={maxWidth:1200,margin:"0 auto"},_be={background:Y.tile,border:`1px solid ${Y.line}`,borderRadius:12,padding:12};function wbe(){return n.jsx("div",{style:vbe,children:n.jsxs("div",{style:bbe,children:[n.jsx("h1",{style:{color:Y.title,marginTop:0},children:"Accessibility Pass Page"}),n.jsx("div",{style:{display:"grid",gap:12},children:n.jsxs("div",{style:_be,children:[n.jsx("div",{style:{fontSize:12,opacity:.8},children:"Accessibility Pass"}),n.jsxs("ul",{style:{marginTop:8},children:[n.jsx("li",{children:"Focus ring visible"}),n.jsx("li",{children:"Skip links"}),n.jsx("li",{children:"Contrast  4.5:1"})]})]})})]})})}const jbe=t=>t?t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t:null:null;function Sbe({isLoggedIn:t,hasUnsyncedChanges:e,lastSyncedAt:s,cooldownUntil:r,onSyncClick:i,isSaving:a,syncError:l}){const{t:d}=qo(),[u,h]=E.useState(null);E.useEffect(()=>{const R=jbe(r);if(!R){h(null);return}const M=()=>{const y=Date.now(),w=Math.max(0,Math.floor((R-y)/1e3));h(w)};M();const T=window.setInterval(M,1e3);return()=>window.clearInterval(T)},[r]);const m=u!==null&&u>0,g=!t||a||!e||m,v=E.useMemo(()=>{if(u===null||u<=0)return null;const R=Math.floor(u/60),M=u%60;return`${String(R).padStart(2,"0")}:${String(M).padStart(2,"0")}`},[u]),b=a?d("tools.sync.saving"):v?d("tools.sync.cooldownLabel",{time:v}):d("tools.sync.buttonSave"),N=E.useMemo(()=>d(e?"tools.sync.statusUnsynced":s?"tools.sync.statusSynced":"tools.sync.statusNever"),[e,s,d]),S=E.useMemo(()=>{if(e)return null;if(s){const R=typeof s=="string"?new Date(s):s;return`${d("tools.sync.lastSyncLabel")}: ${R.toLocaleTimeString()}`}return d("tools.sync.noChanges")},[e,s,d]),C=["rounded-xl border px-4 py-2 text-sm font-semibold uppercase tracking-wide transition focus:outline-none focus:ring-2 focus:ring-emerald-400/70",g?"cursor-not-allowed border-slate-700/70 bg-slate-800/70 text-slate-500":"border-emerald-400/60 bg-emerald-500/10 text-emerald-50 hover:border-emerald-300 hover:bg-emerald-500/20"].join(" ");return n.jsx("div",{className:"mt-4 rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4",children:n.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[n.jsx("button",{type:"button",disabled:g,onClick:i,className:C,children:b}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:N}),S&&n.jsx("p",{className:"text-sm text-slate-200",children:S}),l&&n.jsx("p",{className:"text-sm text-rose-400",children:l})]})]})})}const qp=3,BA="sfdatahub.tools.sets.v1",Ck=[{id:"set-main-dh",name:"Main DH",classLabel:"Demon Hunter",serverLabel:"DE-55"},{id:"set-twink-mage",name:"Twink Mage",classLabel:"Mage",serverLabel:"US-12"}],Wc=[{id:"gemSim",labelKey:"tools.labels.gemSim",defaultLabel:"Gem Simulator",descriptionKey:"tools.descriptions.gemSim",defaultDescription:"Placeholder fuer kuenftige Gem-Berechnungen."},{id:"dungeonPauseOpenXP",labelKey:"tools.labels.dungeonPause",defaultLabel:"Dungeon Pause",descriptionKey:"tools.descriptions.dungeonPause",defaultDescription:"Dummy-Ansicht fuer Dungeon-Pausen-Tools."},{id:"xpDungeon",labelKey:"tools.labels.xpDungeon",defaultLabel:"XP Dungeon",descriptionKey:"tools.descriptions.xpDungeon",defaultDescription:"Slide fuer XP-Lauf-Planung als Platzhalter."}],Nbe=300*1e3;async function kbe(t,e){const s=Ot(tc(it,"user_tools_state"),t);console.log("[ToolsSync] userId param:",t,"doc path:",s.path);const r={version:1,updatedAt:ji(),sets:e.sets,activeSetId:e.activeSetId,activeToolId:e.activeToolId};await Ga(s,r,{merge:!1})}const Cbe=()=>{if(typeof window=="undefined")return null;try{const t=window.localStorage.getItem(BA);if(!t)return null;const e=JSON.parse(t);return!e||e.version!==1||e.type!=="toolSet"||!Array.isArray(e.sets)?null:e}catch(t){return console.warn("Failed to parse persisted tools state",t),null}};function Tbe(){var Ht,ss;const{t}=qo(),{user:e,status:s,loginWithDiscord:r}=Xa(),i=s==="authenticated"&&!!e,a=E.useMemo(()=>Cbe(),[]),l=E.useMemo(()=>{var Ne;return(Ne=a==null?void 0:a.sets)!=null&&Ne.length?a.sets.slice(0,qp):Ck},[a]),d=E.useMemo(()=>{var Re,Ie,ze,at;const Ne=a==null?void 0:a.activeSetId;return Ne&&l.some(ut=>ut.id===Ne)?Ne:(at=(ze=(Re=l[0])==null?void 0:Re.id)!=null?ze:(Ie=Ck[0])==null?void 0:Ie.id)!=null?at:"set-main-dh"},[a,l]),u=E.useMemo(()=>{var Re,Ie;const Ne=a==null?void 0:a.activeToolId;return Ne&&Wc.some(ze=>ze.id===Ne)?Ne:(Ie=(Re=Wc[0])==null?void 0:Re.id)!=null?Ie:"gemSim"},[a]),[h,m]=E.useState(l),[g,v]=E.useState(d),[b,N]=E.useState(u),[S,C]=E.useState(null),[R,M]=E.useState(""),[T,y]=E.useState(""),[w,D]=E.useState(!1),[k,_]=E.useState(null),[A,F]=E.useState(null),[P,B]=E.useState(!1),[$,W]=E.useState(null),H=E.useRef(null),q=E.useRef(!0);E.useEffect(()=>{if(typeof window!="undefined")try{const Ne={version:1,type:"toolSet",sets:h,activeSetId:g!=null?g:null,activeToolId:b};window.localStorage.setItem(BA,JSON.stringify(Ne))}catch(Ne){console.warn("Failed to persist tools state",Ne)}},[h,g,b]),E.useEffect(()=>{if(!i){D(!1),q.current=!0;return}if(q.current){q.current=!1;return}D(!0)},[i,h,g,b]);const K=E.useMemo(()=>{var Ne;return(Ne=h.find(Re=>Re.id===g))!=null?Ne:h[0]},[g,h]),G=E.useMemo(()=>{var Ne;return(Ne=Wc.find(Re=>Re.id===b))!=null?Ne:Wc[0]},[b]),te=(Ht=K==null?void 0:K.tools)==null?void 0:Ht.gemSim,ne=(ss=K==null?void 0:K.tools)==null?void 0:ss.dungeonPauseOpenXP,U=h.length,Z=U>=qp,he=()=>{if(Z)return;const Ne=U+1,Re=t("tools.sets.defaultName","New Set"),Ie={id:`set-${Date.now()}`,name:`${Re} ${Ne}`,classLabel:"Class TBD",serverLabel:"Server TBD"};m(ze=>[...ze,Ie]),v(Ie.id)},ie=()=>{r()},fe=()=>{if(!K){console.warn("No active set to export.");return}const Ne={version:1,type:"toolSet",set:K},Re=new Blob([JSON.stringify(Ne,null,2)],{type:"application/json"}),Ie=URL.createObjectURL(Re),ze=document.createElement("a"),at=K.name.toLowerCase().replace(/\s+/g,"-");ze.href=Ie,ze.download=`sfdatahub-set-${at}.json`,ze.click(),URL.revokeObjectURL(Ie)},be=()=>{var Ne;(Ne=H.current)==null||Ne.click()},ye=Ne=>{var ut,xt;if(h.length<=1){alert(t("tools.sets.deleteLastForbidden"));return}const Re=t("tools.sets.deleteConfirmTitle"),Ie=t("tools.sets.deleteConfirmText");if(!window.confirm(`${Re}

${Ie}`))return;const ze=h.filter(Qt=>Qt.id!==Ne),at=Ne===g?(xt=(ut=ze[0])==null?void 0:ut.id)!=null?xt:null:g;m(ze),at&&v(at)},_e=Ne=>{const Re=h.find(Ie=>Ie.id===Ne);Re&&(C(Ne),M(Re.name),y(""))},we=()=>{C(null),M(""),y("")},de=()=>{if(!S)return;const Ne=R.trim();if(!Ne){y(t("tools.sets.renameErrorEmpty"));return}m(Re=>Re.map(Ie=>Ie.id===S?{...Ie,name:Ne}:Ie)),C(null),M(""),y("")},pe=async Ne=>{var Ie,ze;const Re=(ze=(Ie=Ne.target)==null?void 0:Ie.files)==null?void 0:ze[0];if(Re)try{if(h.length>=qp){alert(t("tools.sets.importErrorMaxReached"));return}const at=await Re.text(),ut=JSON.parse(at);if((ut==null?void 0:ut.version)!==1||(ut==null?void 0:ut.type)!=="toolSet"||typeof(ut==null?void 0:ut.set)!="object")throw new Error("invalid payload");const{set:xt}=ut;if(typeof(xt==null?void 0:xt.name)!="string"||typeof(xt==null?void 0:xt.classLabel)!="string"||typeof(xt==null?void 0:xt.serverLabel)!="string")throw new Error("invalid set");const Qt={...xt,id:`imported-${Date.now()}`,name:xt.name,classLabel:xt.classLabel,serverLabel:xt.serverLabel};m(Gt=>[...Gt,Qt]),v(Qt.id)}catch(at){console.error("Failed to import set",at),alert(t("tools.sets.importErrorInvalid"))}finally{Ne.target.value=""}},re=Ne=>{g&&(m(Re=>Re.map(Ie=>{var at;if(Ie.id!==g)return Ie;const ze={...(at=Ie.tools)!=null?at:{},gemSim:Ne};return{...Ie,tools:ze}})),D(!0))},$e=Ne=>{g&&(m(Re=>Re.map(Ie=>{var at;if(Ie.id!==g)return Ie;const ze={...(at=Ie.tools)!=null?at:{},dungeonPauseOpenXP:Ne};return{...Ie,tools:ze}})),D(!0))},He=`${U}/${qp}`,pt=t(G.labelKey,G.defaultLabel),It=t(G.descriptionKey,G.defaultDescription),Mt=async()=>{if(!i)return;const Ne=e==null?void 0:e.id;if(!(!Ne||P||A!==null&&A>Date.now())&&w){B(!0),W(null);try{await kbe(Ne,{sets:h,activeSetId:g,activeToolId:b});const Ie=Date.now(),ze=Ie+Nbe;D(!1),_(new Date(Ie)),F(ze)}catch(Ie){console.error("Failed to sync tools state",Ie),W(t("tools.sync.error"))}finally{B(!1)}}};return n.jsx(Pt,{title:"Tools",subtitle:"Sets & Dummy-Tools",centerFramed:!1,children:n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/60 p-4 md:p-5",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Sets"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Waehle dein aktives Char-Set (max. 3 Slots)"})]}),n.jsx("span",{className:"text-xs text-slate-400",children:He})]}),n.jsxs("div",{className:"flex items-stretch gap-3 overflow-x-auto pb-1",children:[h.map(Ne=>{const Re=Ne.id===g;return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>v(Ne.id),className:["flex min-w-[180px] flex-col gap-1 rounded-2xl border px-4 py-3 text-left transition duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Re?"border-emerald-400/80 bg-emerald-500/10 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.6)]":"border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:bg-slate-800/80"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-50",children:Ne.name}),n.jsx("span",{role:"button",tabIndex:0,onClick:Ie=>{Ie.stopPropagation(),_e(Ne.id)},onKeyDown:Ie=>{(Ie.key==="Enter"||Ie.key===" ")&&(Ie.preventDefault(),Ie.stopPropagation(),_e(Ne.id))},"aria-label":t("tools.sets.rename"),className:"rounded-full border border-transparent p-1 text-slate-300 transition hover:border-slate-500 hover:text-white",children:n.jsx($L,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"text-xs text-emerald-200/90",children:Ne.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:Ne.serverLabel}),Re&&n.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-emerald-300",children:"Aktiv"})]}),h.length>1&&n.jsx("button",{type:"button",onClick:Ie=>{Ie.stopPropagation(),ye(Ne.id)},className:"absolute bottom-2 right-2 rounded-full border border-slate-600/60 bg-slate-900/80 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-widest text-slate-200 transition hover:border-slate-400 hover:text-white",children:t("tools.sets.delete")})]},Ne.id)}),n.jsxs("button",{type:"button",onClick:he,disabled:Z,className:["flex h-full min-w-[140px] flex-col items-center justify-center gap-2 rounded-2xl border border-dashed px-4 py-3 text-sm font-semibold transition",Z?"cursor-not-allowed border-slate-700/70 bg-slate-800/40 text-slate-500":"border-emerald-400/60 bg-emerald-500/5 text-emerald-200 hover:border-emerald-400 hover:bg-emerald-500/10"].join(" "),children:[n.jsx("span",{className:"text-lg",children:"+"}),n.jsx("span",{children:h.length>=3?"Max erreicht":"Neues Set"})]})]}),n.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-2",children:[n.jsx("button",{type:"button",onClick:fe,className:"rounded-xl border border-slate-600/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400/80 hover:bg-slate-800/60",children:t("tools.sets.exportActive")}),n.jsx("button",{type:"button",onClick:be,className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200 transition hover:border-emerald-300 hover:bg-emerald-500/20",children:t("tools.sets.import")})]}),n.jsx("input",{ref:H,type:"file",accept:"application/json",className:"hidden",onChange:pe})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:[n.jsx("div",{className:"mb-3 flex items-center justify-between gap-3",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-base font-semibold text-slate-50",children:"Tools"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Dummy-Tools, die das aktive Set verwenden"})]})}),n.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-1",children:Wc.map(Ne=>{const Re=Ne.id===b,Ie=t(Ne.labelKey,Ne.defaultLabel);return n.jsxs("button",{type:"button",onClick:()=>N(Ne.id),className:["flex flex-shrink-0 items-center gap-2 rounded-xl border px-4 py-2 text-sm font-semibold transition duration-150 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",Re?"border-emerald-400/80 bg-emerald-500/10 text-emerald-100 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/70 text-slate-200 hover:border-emerald-400/60 hover:text-emerald-100"].join(" "),children:[n.jsx("span",{className:"text-base","aria-hidden":!0,children:"*"}),n.jsx("span",{children:Ie})]},Ne.id)})})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-[1.2fr_1fr] md:items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:t("tools.banner.accountComingSoon")}),n.jsx("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:t("tools.banner.accountTitle")})]}),n.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ne=>n.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/5 p-3 text-sm text-emerald-50 shadow-[0_12px_45px_-30px_rgba(16,185,129,0.8)]",children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-200/90",children:t("tools.banner.accountComingSoon")}),n.jsx("div",{className:"mt-1 leading-snug text-emerald-50/90",children:Ne})]},Ne))})]}),n.jsx(Sbe,{isLoggedIn:i,hasUnsyncedChanges:w,lastSyncedAt:k,cooldownUntil:A,onSyncClick:Mt,isSaving:P,syncError:$})]}):n.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.banner.guestTitle")}),n.jsx("p",{className:"text-sm text-slate-400",children:t("tools.banner.guestDescription")}),n.jsx("ul",{className:"text-sm text-slate-300",children:[t("tools.banner.featureSetComparison"),t("tools.banner.featureIntegration"),t("tools.banner.featureCloudSync")].map(Ne=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"mt-[3px] h-1.5 w-1.5 rounded-full bg-emerald-400","aria-hidden":!0}),n.jsx("span",{children:Ne})]},Ne))})]}),n.jsx("div",{className:"flex gap-3 md:flex-col md:items-end",children:n.jsx("button",{type:"button",onClick:ie,className:"rounded-xl border border-emerald-400/60 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-emerald-400/70",children:t("tools.banner.guestLoginCta")})})]})}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-5 md:p-6",children:[n.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Aktives Tool"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-50",children:pt}),n.jsxs("p",{className:"text-sm text-slate-400",children:["Aktives Set: ",(K==null?void 0:K.name)||"kein Set"]})]}),n.jsx("div",{className:"flex gap-2",children:Wc.map(Ne=>n.jsx("div",{className:["h-2 w-8 rounded-full transition",b===Ne.id?"bg-emerald-400":"bg-slate-700"].join(" "),"aria-hidden":!0},Ne.id))})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[n.jsxs("div",{className:"rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsx("div",{className:"text-sm text-slate-300",children:It}),n.jsx("div",{className:"mt-4",children:b==="gemSim"?n.jsx(oA,{initialState:te,onStateChange:re}):b==="dungeonPauseOpenXP"?n.jsx(dA,{initialState:ne,onStateChange:$e},g):n.jsxs("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-900/60 p-4 text-center text-sm text-slate-400",children:["Placeholder fuer kuenftige Tool-Komponente",n.jsx("br",{}),"(z. B. ",pt,")"]})})]}),n.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Set-Details"}),n.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-100",children:K==null?void 0:K.name}),n.jsx("div",{className:"text-sm text-emerald-200/90",children:K==null?void 0:K.classLabel}),n.jsx("div",{className:"text-xs text-slate-400",children:K==null?void 0:K.serverLabel})]}),n.jsxs("div",{className:"rounded-2xl border border-dashed border-emerald-400/40 bg-emerald-500/5 p-3 text-xs text-emerald-100",children:["Lokaler State only - keine Firestore-Anbindung.",n.jsx("br",{}),"Slides wechseln, wenn du oben ein Tool auswaehlst."]})]})]})]}),S&&n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:we}),n.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-slate-700/80 bg-slate-900/95 p-6 shadow-2xl",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:t("tools.sets.renameTitle")}),n.jsx("label",{className:"mt-4 block text-xs uppercase tracking-[0.3em] text-slate-400",children:t("tools.sets.renameLabel")}),n.jsx("input",{value:R,onChange:Ne=>M(Ne.target.value),autoFocus:!0,className:"mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-900/60 px-4 py-2 text-sm text-slate-50 outline-none transition focus:border-emerald-400",placeholder:t("tools.sets.renamePlaceholder")}),T&&n.jsx("p",{className:"mt-2 text-xs text-rose-400",children:T}),n.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:we,className:"rounded-xl border border-slate-600/80 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-slate-200 transition hover:border-slate-400 hover:bg-slate-800/60",children:t("tools.sets.renameCancel")}),n.jsx("button",{type:"button",onClick:de,className:"rounded-xl border border-emerald-400/60 bg-emerald-500 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:border-emerald-300 hover:bg-emerald-500/80",children:t("tools.sets.renameSave")})]})]})]})]})})}const Ebe="_backdrop_19xh2_1",Abe="_panel_19xh2_19",Ibe="_header_19xh2_43",Pbe="_tabs_19xh2_63",Rbe="_tabBtn_19xh2_75",Lbe="_tabActive_19xh2_97",Dbe="_closeBtn_19xh2_101",Mbe="_content_19xh2_123",Gi={backdrop:Ebe,panel:Abe,header:Ibe,tabs:Pbe,tabBtn:Rbe,tabActive:Lbe,closeBtn:Dbe,content:Mbe},qi=t=>{if(typeof t=="number")return t;if(t==null)return 0;let e=String(t).trim();if(!e||e==="-"||e.toLowerCase()==="nan")return 0;e=e.replace(/\s+/g,"").replace(/\.(?=\d{3}\b)/g,"").replace(/,/g,".");const s=Number(e);return Number.isFinite(s)?s:0},Fbe=t=>{if(!t)return{group:"ALL",serverKey:"all"};const e=String(t).toUpperCase();let s=e.match(/S?(\d+)[._-]?EU|S(\d+)\.SFGAME\.EU/);return s?{group:"EU",serverKey:`EU${s[1]||s[2]}`}:e.includes("AM1")||e.includes("S1.SFGAME.US")?{group:"US",serverKey:"AM1"}:e.includes("MAERWYNN")?{group:"INT",serverKey:"MAERWYNN"}:(s=e.match(/F(\d+)/),s?{group:"FUSION",serverKey:`F${s[1]}`}:{group:"ALL",serverKey:"all"})},Bbe={Warrior:"Base Strength",Berserker:"Base Strength",Paladin:"Base Strength",Scout:"Base Dexterity",Assassin:"Base Dexterity","Demon Hunter":"Base Dexterity",Bard:"Base Dexterity",Mage:"Base Intelligence","Battle Mage":"Base Intelligence",Necromancer:"Base Intelligence",Druid:"Base Intelligence"},Po=(t,e)=>t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,$be=t=>{const e={str:qi(Po(t,"Base Strength")),dex:qi(Po(t,"Base Dexterity")),intl:qi(Po(t,"Base Intelligence")),con:qi(Po(t,"Base Constitution")),luck:qi(Po(t,"Base Luck"))},s=e.str+e.dex+e.intl+e.con+e.luck;return{...e,sum:s}},Obe=(t,e)=>{var _,A;const{playerId:s,name:r,className:i,level:a,server:l,guildIdentifier:d,guildName:u,timestamp:h,updatedAt:m,values:g={}}=t||{},v=qi(a),{group:b,serverKey:N}=Fbe(l),S=$be(g),C=(_=Bbe[String(i)])!=null?_:"Base Intelligence",R=qi(Po(g,C)),M=S.sum,T=S.con,y=v>0?M/v:0,w=qi(Po(g,"Gem Mine")),D=qi(Po(g,"Treasury")),k=e?e():null;return{playerId:String(s!=null?s:""),name:String(r!=null?r:""),class:String(i!=null?i:""),level:v,group:b,serverKey:N,guildId:d?String(d):"",guildName:u?String(u):"",sum:M,main:R,con:T,ratio:y,mine:w,treasury:D,timestamp:qi(h),updatedAtFromLatest:(A=m!=null?m:k)!=null?A:null}},ni=t=>String(t!=null?t:"").trim(),$A=t=>ni(t).toUpperCase(),Bt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),Tk=t=>t<10?`0${t}`:String(t),Vbe=t=>{const e=t?new Date(t*1e3):new Date;return+`${e.getFullYear()}${Tk(e.getMonth()+1)}${Tk(e.getDate())}`},gf=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),Ek=t=>{const e=gf(t);if(!e)return[];const s=e.split(/[^a-z0-9]+/g).filter(r=>r&&r.length>=2);return Array.from(new Set(s))},Ak=t=>{const e=new Set;for(const s of t)for(let r=1;r<=s.length;r++)e.add(s.slice(0,r));return Array.from(e)},Ik=t=>{var s;const e=String((s=t==null?void 0:t.code)!=null?s:"").toLowerCase();return e.includes("permission")||e.includes("already")||e.includes("failed-precondition")},B0=t=>{if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null},Pk=t=>{const e=B0(t);return Number.isFinite(e!=null?e:NaN)?Math.trunc(e):null},Ube=t=>{const e=Bt(t);for(const[s,r]of Object.entries(OA))if(Bt(r)===e)return Number(s);return null},Rk=t=>{var a;const e=t==null?"":String(t).trim();if(!e)return{classId:null,className:null};const s=Number(e);if(Number.isInteger(s)&&!Number.isNaN(s)){const l=s;return{classId:l,className:(a=OA[l])!=null?a:String(l)}}return{classId:Ube(e),className:e}},gs={PLAYERS:{IDENTIFIER:Bt("Identifier"),PID:Bt("ID"),GUILD_IDENTIFIER:Bt("Guild Identifier"),SERVER:Bt("Server"),NAME:Bt("Name"),TIMESTAMP:Bt("Timestamp"),LEVEL:Bt("Level"),CLASS:Bt("Class"),GUILD:Bt("Guild")},GUILDS:{GUILD_IDENTIFIER:Bt("Guild Identifier"),SERVER:Bt("Server"),NAME:Bt("Name"),MEMBER_COUNT:Bt("Guild Member Count"),TIMESTAMP:Bt("Timestamp"),HOF:Bt("Hall of Fame Rank"),HOF_ALT:Bt("HoF"),RANK:Bt("Rank"),GUILD_RANK:Bt("Guild Rank")}},OA={1:"Warrior",2:"Mage",3:"Scout",4:"Assassin",5:"Battle Mage",6:"Berserker",7:"Demon Hunter",8:"Bard"},VA=[gs.PLAYERS.LEVEL,Bt("Level"),Bt("Lvl"),Bt("Stufe")],UA=[gs.PLAYERS.CLASS,Bt("Class"),Bt("ClassID"),Bt("Class ID"),Bt("CharClass"),Bt("Klasse")],zA=t=>{const e=new Map;return t.forEach(s=>{const r=Bt(s);e.has(r)||e.set(r,s)}),e},id=t=>{const e=new Set;for(const s of t)Object.keys(s).forEach(r=>e.add(r));return Array.from(e)},Fr=(t,e,s)=>{const r=e.get(s);return r&&Object.prototype.hasOwnProperty.call(t,r)?t[r]:Ca(t,s)},$0=(t,e,s)=>s.map(r=>Fr(t,e,r)).find(r=>r!=null&&String(r)!==""),zbe=new Set([Bt("Strength"),Bt("Dexterity"),Bt("Intelligence"),Bt("Constitution"),Bt("Luck"),Bt("Attribute")]),Hbe=["equipment"],Gbe=t=>zbe.has(t)||Hbe.some(e=>t.includes(e)),Ca=(t,e)=>{for(const s of Object.keys(t))if(Bt(s)===e)return t[s]};function tg(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,m=new Date(l,a,i,d,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}function Lk(t){const e=new Date(t*1e3),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-r);const i=new Date(Date.UTC(s.getUTCFullYear(),0,1)),a=Math.ceil(((+s-+i)/864e5+1)/7),l=s.getUTCFullYear(),d=a.toString().padStart(2,"0");return`${l}-W${d}`}function Dk(t){const e=new Date(t*1e3),s=new Date(e),r=(s.getDay()+6)%7;s.setHours(0,0,0,0),s.setDate(s.getDate()-r);const i=Math.floor(s.getTime()/1e3),a=i+7*86400-1;return{start:i,end:a}}function Mk(t){const e=new Date(t*1e3),s=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0");return`${s}-${r}`}function Fk(t){const e=new Date(t*1e3),s=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);return{start:Math.floor(s.getTime()/1e3),end:Math.floor(r.getTime()/1e3)}}function Wbe(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function sg(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[]};const r=Wbe((u=s[0])!=null?u:""),i=h=>{const m=[];let g="",v=!1;for(let b=0;b<h.length;b++){const N=h[b];N==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:N===r&&!v?(m.push(g),g=""):g+=N}return m.push(g),m},l=(s[0]?i(s[0]).map(ni):[]).map((h,m)=>h||`col${m}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const m=i(s[h]);if(m.every(v=>ni(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=m[v]!=null?ni(m[v]):"";d.push(g)}return{headers:l,rows:d}}function qbe(t){const e={};for(let s=0;s<t.length;s++){const r=Bt(t[s]);VA.includes(r)&&e.levelIndex==null&&(e.levelIndex=s),UA.includes(r)&&e.classIndex==null&&(e.classIndex=s)}if(e.levelIndex==null){const s=t.findIndex(r=>r.trim()==="Level");s>=0&&(e.levelIndex=s)}if(e.classIndex==null){const s=t.findIndex(r=>r.trim()==="Class");s>=0&&(e.classIndex=s)}return e}function HA(t,e){var d;const s=e&&e.length?e:id(t),r=zA(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[],l=qbe(s);for(const u of t){const h=(d=Fr(u,r,gs.PLAYERS.PID))!=null?d:Fr(u,r,gs.PLAYERS.IDENTIFIER),m=ni(h);if(!m){i.missingIdentifier++;continue}const g=tg(Fr(u,r,gs.PLAYERS.TIMESTAMP));if(g==null){i.badTimestamp++;continue}const v=Fr(u,r,gs.PLAYERS.SERVER),b=v&&ni(v)!==""?$A(v):void 0;if(!b){i.missingServer++;continue}const N=Fr(u,r,gs.PLAYERS.NAME),S=N!=null&&ni(N)!==""?String(N):null,C=Fr(u,r,gs.PLAYERS.GUILD_IDENTIFIER),R=C!=null&&ni(C)!==""?String(C):null,M=Fr(u,r,gs.PLAYERS.GUILD),T=M!=null&&ni(M)!==""?String(M):null,y=l.levelIndex!=null?Pk(u[s[l.levelIndex]]):Pk($0(u,r,VA)),w=l.classIndex!=null?Rk(u[s[l.classIndex]]):Rk($0(u,r,UA));a.push({playerId:m,server:b,name:S,timestampSec:g,guildIdentifier:R,guildName:T,level:y,classId:w.classId,className:w.className,raw:u})}return{rows:a,stats:i,headers:s}}function GA(t,e){const s=e&&e.length?e:id(t),r=zA(s),i={missingIdentifier:0,badTimestamp:0,missingServer:0},a=[];for(const l of t){const d=Fr(l,r,gs.GUILDS.GUILD_IDENTIFIER),u=ni(d);if(!u){i.missingIdentifier++;continue}const h=tg(Fr(l,r,gs.GUILDS.TIMESTAMP));if(h==null){i.badTimestamp++;continue}const m=Fr(l,r,gs.GUILDS.SERVER),g=m&&ni(m)!==""?$A(m):void 0;if(!g){i.missingServer++;continue}const v=Fr(l,r,gs.GUILDS.NAME),b=v!=null&&ni(v)!==""?String(v):null,N=B0(Fr(l,r,gs.GUILDS.MEMBER_COUNT)),S=B0($0(l,r,[gs.GUILDS.HOF,gs.GUILDS.HOF_ALT,gs.GUILDS.RANK,gs.GUILDS.GUILD_RANK]));a.push({guildIdentifier:u,server:g,name:b,timestampSec:h,memberCount:N,hofRank:S,raw:l})}return{rows:a,stats:i,headers:s}}function Kbe(t){const e=sg(t);return HA(e.rows,e.headers).rows}function Qbe(t){const e=sg(t);return GA(e.rows,e.headers).rows}const Bk="stats_cache_player_derived",Xbe="stats_index_players_daily_compact",xf=40,$k=120;async function hd(t,e,s,r){r==null||r({phase:"prepare",current:0,total:t.length,pass:s});for(let i=0;i<t.length;i+=e){const a=MB(it),l=t.slice(i,i+e);for(const d of l)d(a);r==null||r({phase:"write",current:Math.min(i+l.length,t.length),total:t.length,pass:s}),await a.commit(),await new Promise(d=>setTimeout(d,12))}r==null||r({phase:"done",current:1,total:1,pass:s})}async function Ok(t,e,s){var m,g,v;const r=[];if(!t.length)return r;let i=0,a=0,l=0,d=0;const u=b=>{e==null||e({phase:b,current:b==="done"?t.length:i,total:t.length,pass:"scans",created:a,duplicate:l,error:d,kind:s})};u("prepare");const h=it.bulkWriter;if(typeof h=="function"){const b=h.call(it,{throttling:!0}),N=()=>{i++,u("write")};for(const{ref:S,data:C,key:R}of t)b.create(S,C).then(()=>{a++,r.push({key:R,status:"created"}),N()}).catch(M=>{var y,w;const T=String((y=M==null?void 0:M.code)!=null?y:"").toLowerCase();T.includes("already")&&T.includes("exist")?(l++,r.push({key:R,status:"duplicate"})):(d++,r.push({key:R,status:"error",message:String((w=M==null?void 0:M.message)!=null?w:M)})),N()});try{await b.close()}catch(S){console.warn("[ImportCsv] bulkWriter close with errors",{error:S})}return u("done"),r}for(const{ref:b,data:N,key:S}of t){try{await Ga(b,N),a++,r.push({key:S,status:"created"})}catch(C){const R=String((m=C==null?void 0:C.code)!=null?m:"").toLowerCase();R.includes("permission")||R.includes("already")?(l++,r.push({key:S,status:"duplicate",message:String((g=C==null?void 0:C.message)!=null?g:C)})):(d++,r.push({key:S,status:"error",message:String((v=C==null?void 0:C.message)!=null?v:C)}))}i++,u("write")}return u("done"),r}async function Ybe(t,e,s,r){if(!t.length&&!e.length&&!s.length)return;const i=t.length+e.length+s.length,a=it.bulkWriter;if(typeof a=="function"){const h=a.call(it,{throttling:!0});r==null||r({phase:"prepare",current:0,total:i,pass:"latest"});for(const{ref:m,data:g}of t)h.set(m,g,{merge:!0});for(const{pid:m,data:g}of e)h.set(Ot(it,`${Bk}/${m}`),g,{merge:!0});for(const{ref:m,data:g}of s)h.set(m,g,{merge:!0});r==null||r({phase:"write",current:i,total:i,pass:"latest"}),await h.close(),r==null||r({phase:"done",current:1,total:1,pass:"latest"});return}const l=t.map(({ref:h,data:m})=>g=>g.set(h,m,{merge:!0})),d=e.map(({pid:h,data:m})=>g=>g.set(Ot(it,`${Bk}/${h}`),m,{merge:!0})),u=s.map(({ref:h,data:m})=>g=>g.set(h,m,{merge:!0}));await hd(l,xf,"latest",r),await hd(d,xf,"latest",r),await hd(u,xf,"latest",r)}function Kp(t,e){const s={};for(const r of e){const i=Bt(r);if(Gbe(i)){let a=null,l;for(const d of t){const u=d.row[r];if(u==null||u==="")continue;const h=Number(String(u).replace(/[^0-9.-]/g,""));Number.isNaN(h)||(a==null||h>a)&&(a=h,l=u)}s[r]=l!=null?l:""}else{let a="";for(let l=t.length-1;l>=0;l--){const d=t[l].row[r];if(d!=null&&String(d)!==""){a=d;break}}s[r]=a}}return s}async function Vk(t){var i;const e=await Os(t);if(!e.exists())return 0;const s=e.data();if(((i=s==null?void 0:s.values)==null?void 0:i.Timestamp)!=null){const a=tg(s.values.Timestamp);if(a!=null)return a}if((s==null?void 0:s.timestampRaw)!=null){const a=tg(s.timestampRaw);if(a!=null)return a}if(typeof(s==null?void 0:s.ts)=="number")return s.ts;const r=s==null?void 0:s.timestamp;if(typeof r=="number")return r>9999999999?Math.floor(r/1e3):r;if(typeof r=="string"){const a=Date.parse(r);return Number.isFinite(a)?Math.floor(a/1e3):0}return 0}async function Uk(t,e){var m,g,v,b,N,S,C;const s=typeof performance!="undefined"?performance.now():Date.now(),r=[],i=[],a={writtenScanPlayers:0,writtenLatestPlayers:0,writtenWeeklyPlayers:0,writtenMonthlyPlayers:0,writtenScanGuilds:0,writtenLatestGuilds:0,writtenWeeklyGuilds:0,writtenMonthlyGuilds:0,skippedBadTs:0,skippedMissingIdentifier:0,skippedMissingGuildIdentifier:0,skippedMissingServer:0,skippedMissingName:0,skippedBadTsGuild:0,skippedMissingNameGuild:0},l=[],d=[];if(!e||!e.kind)throw new Error('CSV-Typ fehlt: { kind: "players" | "guilds" }.');const u=e.onProgress?(R=>{var M;return(M=e.onProgress)==null?void 0:M.call(e,{...R,kind:e.kind})}):void 0;if(e.kind==="players"){const R=[],M=[],T=[],y=new Map,w=[];let D=[],k=[];if(e.rows&&Array.isArray(e.rows))D=e.rows,k=id(D);else if(e.raw&&typeof e.raw=="string"){const H=sg(e.raw);D=H.rows,k=H.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:_,stats:A,headers:F}=HA(D,k);a.skippedMissingIdentifier+=A.missingIdentifier,a.skippedBadTs+=A.badTimestamp,a.skippedMissingServer+=A.missingServer;const P=F.length?F:id(D),B=new Map;for(const H of _){const q=`${H.playerId}__${H.server}__${H.timestampSec}`;R.push({key:q,ref:Ot(it,`players/${H.playerId}/scans/${H.timestampSec}`),data:{playerId:H.playerId,server:H.server,timestamp:H.timestampSec,timestampRaw:Ca(H.raw,gs.PLAYERS.TIMESTAMP),name:H.name,values:H.raw,createdAt:ji()}}),B.has(H.playerId)||B.set(H.playerId,[]),B.get(H.playerId).push({row:H.raw,ts:H.timestampSec,parsed:H})}const $=await Ok(R,u,"players");l.push(...$),a.writtenScanPlayers=$.filter(H=>H.status==="created").length;for(const[H,q]of B){q.sort((re,$e)=>re.ts-$e.ts);const K=q[q.length-1],G=K.parsed,te=G.server,ne=G.name,U=(m=G.level)!=null?m:null,Z=(g=G.className)!=null?g:null,he=(v=G.guildName)!=null?v:null,ie=G.guildIdentifier,fe=ne!=null?ne:"",be=Ek(fe),ye=Ak(be),_e=Ot(it,`players/${H}/latest/latest`),we=await Vk(_e);if(K.ts>we){const re=ji();M.push({ref:_e,data:{playerId:H,server:te,timestamp:K.ts,timestampRaw:Ca(K.row,gs.PLAYERS.TIMESTAMP),name:ne,values:K.row,updatedAt:re,nameFold:gf(fe),nameTokens:be,nameNgrams:ye,level:U,className:Z,guildName:he,guildNameFold:he?gf(he):null}});const $e={playerId:H,name:ne,className:Z,level:U,server:te,guildIdentifier:ie||void 0,guildName:he||void 0,values:K.row,timestamp:K.ts,updatedAt:re},He=Obe($e,ji);T.push({pid:H,data:He});const pt=Vbe(K.ts),It=[{scopeId:"all_all_sum",group:"ALL",serverKey:"all"},{scopeId:`${He.group||"ALL"}_all_sum`,group:He.group||"ALL",serverKey:"all"}];He.serverKey&&He.serverKey!=="all"&&It.push({scopeId:`${He.group||"ALL"}_${He.serverKey}_sum`,group:He.group||"ALL",serverKey:He.serverKey});for(const Mt of It){const Ht=`${pt}__${Mt.scopeId}`;y.has(Ht)||y.set(Ht,{dateKey:pt,scopeId:Mt.scopeId,group:Mt.group,serverKey:Mt.serverKey,ids:[],vals:[]});const ss=y.get(Ht);ss.ids.push(H),ss.vals.push(Number((b=He.sum)!=null?b:0))}a.writtenLatestPlayers++}const de=new Map,pe=new Map;for(const re of q){const $e=Lk(re.ts),He=Mk(re.ts);de.has($e)||de.set($e,[]),pe.has(He)||pe.set(He,[]),de.get($e).push(re),pe.get(He).push(re)}for(const[re,$e]of de){$e.sort((Mt,Ht)=>Mt.ts-Ht.ts);const He=Kp($e,P),pt=Dk($e[$e.length-1].ts),It=$e[$e.length-1];w.push(Mt=>{const Ht=Ot(it,`players/${H}/history_weekly/${re}`);Mt.set(Ht,{playerId:H,weekId:re,periodStartSec:pt.start,periodEndSec:pt.end,lastTs:It.ts,lastTimestampRaw:Ca(It.row,gs.PLAYERS.TIMESTAMP),server:It.parsed.server,name:It.parsed.name,values:He,updatedAt:ji()},{merge:!0})}),a.writtenWeeklyPlayers++}for(const[re,$e]of pe){$e.sort((Mt,Ht)=>Mt.ts-Ht.ts);const He=Kp($e,P),pt=Fk($e[$e.length-1].ts),It=$e[$e.length-1];w.push(Mt=>{const Ht=Ot(it,`players/${H}/history_monthly/${re}`);Mt.set(Ht,{playerId:H,monthId:re,periodStartSec:pt.start,periodEndSec:pt.end,lastTs:It.ts,lastTimestampRaw:Ca(It.row,gs.PLAYERS.TIMESTAMP),server:It.parsed.server,name:It.parsed.name,values:He,updatedAt:ji()},{merge:!0})}),a.writtenMonthlyPlayers++}}const W=[];for(const{dateKey:H,scopeId:q,group:K,serverKey:G,ids:te,vals:ne}of y.values()){const U=te.map((fe,be)=>{var ye;return{id:fe,val:(ye=ne[be])!=null?ye:0}});U.sort((fe,be)=>be.val-fe.val);const Z=U.map(fe=>fe.id),he=U.map(fe=>fe.val),ie=U.map((fe,be)=>be+1);W.push({ref:Ot(it,`${Xbe}/${H}__${q}`),data:{n:U.length,ids:Z,vals:he,ranks:ie,generatedAt:Date.now(),group:K,serverKey:G,metric:"sum",dateKey:H}})}await Ybe(M,T,W,u),await hd(w,$k,"history",u)}if(e.kind==="guilds"){const R=[],M=[],T=[];let y=[],w=[];if(e.rows&&Array.isArray(e.rows))y=e.rows,w=id(y);else if(e.raw&&typeof e.raw=="string"){const B=sg(e.raw);y=B.rows,w=B.headers}else throw new Error("Es wurden weder 'rows' noch 'raw' bergeben.");const{rows:D,stats:k,headers:_}=GA(y,w);a.skippedMissingGuildIdentifier+=k.missingIdentifier,a.skippedBadTsGuild+=k.badTimestamp,a.skippedMissingServer+=k.missingServer;const A=_.length?_:id(y),F=new Map;for(const B of D){const $=`${B.guildIdentifier}__${B.server}__${B.timestampSec}`;R.push({key:$,ref:Ot(it,`guilds/${B.guildIdentifier}/scans/${B.timestampSec}`),data:{guildIdentifier:B.guildIdentifier,server:B.server,timestamp:B.timestampSec,timestampRaw:Ca(B.raw,gs.GUILDS.TIMESTAMP),name:B.name,values:B.raw,createdAt:ji()}}),F.has(B.guildIdentifier)||F.set(B.guildIdentifier,[]),F.get(B.guildIdentifier).push({row:B.raw,ts:B.timestampSec,parsed:B})}const P=await Ok(R,u,"guilds");d.push(...P),a.writtenScanGuilds=P.filter(B=>B.status==="created").length;for(const[B,$]of F){$.sort((fe,be)=>fe.ts-be.ts);const W=$[$.length-1],H=W.parsed,q=(N=H.name)!=null?N:"",K=Ek(q),G=Ak(K),te=(S=H.memberCount)!=null?S:null,ne=(C=H.hofRank)!=null?C:null,U=Ot(it,`guilds/${B}/latest/latest`),Z=await Vk(U);W.ts>Z&&(M.push(fe=>{fe.set(U,{guildIdentifier:B,server:H.server,timestamp:W.ts,timestampRaw:Ca(W.row,gs.GUILDS.TIMESTAMP),name:H.name,values:W.row,updatedAt:ji(),nameFold:gf(q),nameTokens:K,nameNgrams:G,memberCount:te,hofRank:ne},{merge:!0})}),a.writtenLatestGuilds++);const he=new Map,ie=new Map;for(const fe of $){const be=Lk(fe.ts),ye=Mk(fe.ts);he.has(be)||he.set(be,[]),ie.has(ye)||ie.set(ye,[]),he.get(be).push(fe),ie.get(ye).push(fe)}for(const[fe,be]of he){be.sort((de,pe)=>de.ts-pe.ts);const ye=Kp(be,A),_e=Dk(be[be.length-1].ts),we=be[be.length-1];T.push(de=>{const pe=Ot(it,`guilds/${B}/history_weekly/${fe}`);de.set(pe,{guildIdentifier:B,weekId:fe,periodStartSec:_e.start,periodEndSec:_e.end,lastTs:we.ts,lastTimestampRaw:Ca(we.row,gs.GUILDS.TIMESTAMP),server:we.parsed.server,name:we.parsed.name,values:ye,updatedAt:ji()},{merge:!0})}),a.writtenWeeklyGuilds++}for(const[fe,be]of ie){be.sort((de,pe)=>de.ts-pe.ts);const ye=Kp(be,A),_e=Fk(be[be.length-1].ts),we=be[be.length-1];T.push(de=>{const pe=Ot(it,`guilds/${B}/history_monthly/${fe}`);de.set(pe,{guildIdentifier:B,monthId:fe,periodStartSec:_e.start,periodEndSec:_e.end,lastTs:we.ts,lastTimestampRaw:Ca(we.row,gs.GUILDS.TIMESTAMP),server:we.parsed.server,name:we.parsed.name,values:ye,updatedAt:ji()},{merge:!0})}),a.writtenMonthlyGuilds++}}try{await hd(M,xf,"latest",u)}catch(B){if(Ik(B))console.warn("[ImportCsv] guild latest write skipped (duplicate/permission)",{error:B});else throw B}try{await hd(T,$k,"history",u)}catch(B){if(Ik(B))console.warn("[ImportCsv] guild history write skipped (duplicate/permission)",{error:B});else throw B}}const h=typeof performance!="undefined"?performance.now():Date.now();return{detectedType:e.kind,counts:a,errors:r,warnings:i,durationMs:h-s,playerResults:l,guildResults:d}}const jt=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),Jbe=t=>String(t!=null?t:"").trim(),O0=t=>Jbe(t).toUpperCase(),V0=t=>String(t!=null?t:"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase();function Vn(t,e){for(const s of Object.keys(t))if(jt(s)===e)return t[s]}function Na(t,e){for(const s of e){const r=Vn(t,s);if(r!=null&&String(r)!=="")return r}}function Tl(t){if(t==null||t==="")return null;const e=Number(String(t).replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}function md(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})\s+(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(s){const i=Number(s[1]),a=Number(s[2])-1,l=Number(s[3]),d=Number(s[4]),u=Number(s[5]),h=s[6]?Number(s[6]):0,m=new Date(l,a,i,d,u,h);if(!Number.isNaN(m.getTime()))return Math.floor(m.getTime()/1e3)}const r=Date.parse(e);return Number.isFinite(r)?Math.floor(r/1e3):null}const Qs={GUILD_IDENTIFIER:jt("Guild Identifier"),SERVER:jt("Server"),NAME:jt("Name"),TIMESTAMP:jt("Timestamp"),LEVEL:jt("Level"),CLASS:jt("Class"),GUILD:jt("Guild"),GUILD_ROLE:[jt("Role"),jt("Guild Role")],TREASURY:[jt("Treasury"),jt("Fortress Treasury"),jt("Treasury Level"),jt("Festungsschatzkammer")],MINE:[jt("Mine"),jt("Gem Mine"),jt("Mine Level"),jt("Festungsmine")],BASE_MAIN:[jt("Base"),jt("Base Attribute"),jt("BaseMain"),jt("Basis Attribut")],CON_BASE:[jt("Con Base"),jt("Constitution Base"),jt("Base Constitution"),jt("Basis Konstitution"),jt("conbase")],ATTR_TOT:[jt("Attribute"),jt("Attr Total"),jt("Attribut"),jt("Attribut Gesamt")],CON_TOT:[jt("Constitution"),jt("Constitution Total"),jt("Konstitution"),jt("Konstitution Gesamt")],LAST_ACTIVE:[jt("Last Active"),jt("LastActivity"),jt("Letzte Aktivitt")],GUILD_JOINED:[jt("Guild Joined"),jt("Joined Guild"),jt("Gildenbeitritt")]},yf={GUILD_IDENTIFIER:jt("Guild Identifier"),SERVER:jt("Server"),NAME:jt("Name")};function zk(t){const e=String(t||"").trim().toUpperCase();return e==="LEADER"||e==="GUILD LEADER"?0:e==="OFFICER"||e==="ADVISOR"||e==="ELDER"?1:e==="MEMBER"?2:3}function Zbe(t){let e=5381;for(let s=0;s<t.length;s++)e=e*33^t.charCodeAt(s);return(e>>>0).toString(36)}function e_e(t){var s;const e=new Map;for(const r of t){const i=String((s=Vn(r,yf.GUILD_IDENTIFIER))!=null?s:"").trim(),a=Vn(r,yf.SERVER),l=Vn(r,yf.NAME);if(!i||!a||!l)continue;const d=`${O0(a)}__${V0(String(l))}`;e.set(d,i)}return e}function t_e(t){var T,y;const e=Vn(t,Qs.TIMESTAMP),s=md(e),r=Na(t,Qs.LAST_ACTIVE),i=md(r),a=Na(t,Qs.GUILD_JOINED),l=md(a),d=Tl(Vn(t,Qs.LEVEL)),u=(()=>{const w=Vn(t,Qs.CLASS);return w!=null&&String(w).trim()!==""?String(w):null})(),h=(()=>{const w=Na(t,Qs.GUILD_ROLE);return w!=null&&String(w).trim()!==""?String(w):null})(),m=Tl(Na(t,Qs.TREASURY)),g=Tl(Na(t,Qs.MINE)),v=Tl(Na(t,Qs.BASE_MAIN)),b=Tl(Na(t,Qs.CON_BASE)),N=Tl(Na(t,Qs.ATTR_TOT)),S=Tl(Na(t,Qs.CON_TOT)),C=v!=null&&b!=null?v+b:null,R=N!=null&&S!=null?N+S:null,M=(()=>{const w=Vn(t,Qs.NAME);return w!=null&&String(w).trim()!==""?String(w):null})();return{id:String((y=(T=t==null?void 0:t.ID)!=null?T:t==null?void 0:t.Identifier)!=null?y:""),name:M,class:u,role:h,level:d,treasury:m,mine:g,baseMain:v,conBase:b,sumBaseTotal:C,attrTotal:N,conTotal:S,totalStats:R,lastScan:e!=null?String(e):null,lastActivity:r!=null?String(r):null,lastScanMs:s!=null?s*1e3:null,lastActivityMs:i!=null?i*1e3:null,guildJoined:a!=null?String(a):null,guildJoinedMs:l!=null?l*1e3:null}}function ka(t,e){const s=t.map(r=>r[e]).filter(r=>typeof r=="number");return s.length?s.reduce((r,i)=>r+i,0)/s.length:null}const s_e=t=>{const e=t==null?void 0:t.code;if(!e)return!1;const s=String(e).toLowerCase();return s==="permission-denied"||s==="already-exists"||s==="failed-precondition"};async function n_e(t){var l,d,u;const e=Ot(it,`guilds/${t}/latest/latest`),s=await Os(e);if(!s.exists())return{sec:null,raw:null};const r=s.data()||{},i=(u=(d=r.timestampRaw)!=null?d:(l=r.values)==null?void 0:l.Timestamp)!=null?u:null;let a=null;return typeof r.timestamp=="number"?a=r.timestamp>9999999999?Math.floor(r.timestamp/1e3):r.timestamp:i&&(a=md(i)),{sec:a,raw:i}}async function r_e(t){const e=Ot(it,`guilds/${t}/snapshots/members_summary`),s=await Os(e);if(!s.exists())return 0;const r=s.data()||{};if(typeof r.updatedAtMs=="number")return Math.floor(r.updatedAtMs/1e3);if(typeof r.updatedAt=="string"){const i=md(r.updatedAt);if(i!=null)return i}return 0}async function i_e(t,e){var l,d,u,h,m,g,v;const s=e_e(e||[]),r=new Set;for(const b of e||[]){const N=String((l=Vn(b,yf.GUILD_IDENTIFIER))!=null?l:"").trim();N&&r.add(N)}for(const b of t||[]){const N=Vn(b,Qs.SERVER);let S=String((d=Vn(b,Qs.GUILD_IDENTIFIER))!=null?d:"").trim();if(!S){const C=(u=Vn(b,Qs.GUILD))!=null?u:b.Guild;if(C&&N){const R=`${O0(N)}__${V0(String(C))}`,M=s.get(R);M&&(S=M)}}S&&r.add(S)}let i=0,a=null;for(const b of r){const{sec:N,raw:S}=await n_e(b);if(N==null)continue;const C=await r_e(b);if(N<=C)continue;const R=new Map;for(const q of t||[]){const K=Vn(q,Qs.SERVER);let G=String((h=Vn(q,Qs.GUILD_IDENTIFIER))!=null?h:"").trim();if(!G){const U=(m=Vn(q,Qs.GUILD))!=null?m:q.Guild;if(U&&K){const Z=`${O0(K)}__${V0(String(U))}`,he=s.get(Z);he&&(G=he)}}if(G!==b)continue;const te=md(Vn(q,Qs.TIMESTAMP));if(te==null||te!==N)continue;const ne=String((v=(g=q==null?void 0:q.ID)!=null?g:q==null?void 0:q.Identifier)!=null?v:"").trim();ne&&(R.has(ne)||R.set(ne,q))}const M=Array.from(R.values()),T=[];for(const q of M)T.push(t_e(q));T.sort((q,K)=>{var ne,U;const G=zk(q.role),te=zk(K.role);return G!==te?G-te:((ne=q.name)!=null?ne:"").toLowerCase().localeCompare(((U=K.name)!=null?U:"").toLowerCase())});const y=ka(T,"level"),w=ka(T,"treasury"),D=ka(T,"mine"),k=ka(T,"baseMain"),_=ka(T,"conBase"),A=ka(T,"sumBaseTotal"),F=ka(T,"attrTotal"),P=ka(T,"conTotal"),B=ka(T,"totalStats"),$=JSON.stringify({gid:b,tsSec:N,members:T.map(q=>{var K,G,te,ne,U,Z,he,ie,fe,be,ye,_e,we;return{id:q.id,name:(K=q.name)!=null?K:"",class:(G=q.class)!=null?G:"",role:(te=q.role)!=null?te:"",level:(ne=q.level)!=null?ne:null,treasury:(U=q.treasury)!=null?U:null,mine:(Z=q.mine)!=null?Z:null,baseMain:(he=q.baseMain)!=null?he:null,conBase:(ie=q.conBase)!=null?ie:null,sumBaseTotal:(fe=q.sumBaseTotal)!=null?fe:null,attrTotal:(be=q.attrTotal)!=null?be:null,conTotal:(ye=q.conTotal)!=null?ye:null,totalStats:(_e=q.totalStats)!=null?_e:null,guildJoinedMs:(we=q.guildJoinedMs)!=null?we:null}})}),W=Zbe($),H=Ot(it,`guilds/${b}/snapshots/members_summary`);try{await Ga(H,{guildId:b,count:T.length,updatedAt:S!=null?S:String(N),updatedAtMs:N*1e3,hash:W,avgLevel:y,avgTreasury:w,avgMine:D,avgBaseMain:k,avgConBase:_,avgSumBaseTotal:A,avgAttrTotal:F,avgConTotal:P,avgTotalStats:B,members:T,updatedAtServer:ji()},{merge:!0}),i++}catch(q){if(s_e(q)){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows duplicate/permission",{gid:b,error:q});continue}console.error("[ImportSelectionToDb] writeGuildSnapshotsFromRows fatal",{gid:b,error:q}),a=a||q}}if(a)throw a;return{guildsProcessed:r.size,snapshotsWritten:i}}function a_e(t){const e=new Date(t),s=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0");return`${s}-${r}`}async function o_e(t,e,s,r){var u,h,m;const i=Ot(it,`guilds/${t}/history_monthly/${e}/snapshots/members_summary_first`),a=await Os(i);if(!a.exists())return await Ga(i,s,{merge:!1}),{first:s,firstTsMs:(u=s.updatedAtMs)!=null?u:s.timestamp?s.timestamp*1e3:r};const l=a.data(),d=(h=l.updatedAtMs)!=null?h:l.timestamp?l.timestamp*1e3:r;return r<d?(await Ga(i,s,{merge:!1}),{first:s,firstTsMs:(m=s.updatedAtMs)!=null?m:s.timestamp?s.timestamp*1e3:r}):{first:l,firstTsMs:d}}async function l_e(t,e,s){const r=Ot(it,`guilds/${t}/history_monthly/${e}`);await Ga(r,s,{merge:!0})}function c_e(t){var M,T,y,w,D,k,_,A,F,P,B,$,W;const{guildId:e,monthKey:s,server:r,first:i,firstTsMs:a,latest:l,latestTsMs:d}=t,u=a!=null?Math.floor((d-a)/864e5):null,h=u!=null&&u<=40,m={available:h};h||(m.reason=u==null?"INSUFFICIENT_DATA":"SPAN_GT_40D");const g={meta:{monthKey:s,label:new Date(`${s}-01T00:00:00Z`).toLocaleString("de-DE",{month:"short",year:"numeric"}),fromISO:a?new Date(a).toISOString():null,toISO:new Date(d).toISOString(),fromTs:a?Math.floor(a/1e3):null,toTs:Math.floor(d/1e3),daysSpan:u,guildId:e,server:r!=null?r:null},status:m};if(!h||!i)return g;const v=new Map;for(const H of i.members||[])H.playerId&&v.set(H.playerId,H);const b=[],N=[],S=[],C=[],R=[];for(const H of l.members||[]){if(!H.playerId)continue;const q=v.get(H.playerId)||null,K=(M=H.sumBaseTotal)!=null?M:null,G=(T=q==null?void 0:q.sumBaseTotal)!=null?T:null,te=K!=null&&G!=null?K-G:0,ne=(y=H.totalStats)!=null?y:null,U=(w=q==null?void 0:q.totalStats)!=null?w:null,Z=ne!=null&&U!=null?ne-U:0;b.push({playerId:H.playerId,name:(D=H.name)!=null?D:null,class:(k=H.class)!=null?k:null,levelLatest:(_=H.level)!=null?_:null,baseLatest:K,baseDelta:te}),N.push({playerId:H.playerId,name:(A=H.name)!=null?A:null,base:K,stamDelta:null,shoDelta:null}),S.push({playerId:H.playerId,name:(F=H.name)!=null?F:null,stats:K,delta:te}),C.push({playerId:H.playerId,name:(P=H.name)!=null?P:null,total:ne,delta:Z}),R.push({playerId:H.playerId,name:(B=H.name)!=null?B:null,class:($=H.class)!=null?$:null,stats:(W=H.baseMain)!=null?W:null,delta:(q==null?void 0:q.baseMain)!=null&&H.baseMain!=null?H.baseMain-q.baseMain:0})}return b.sort((H,q)=>{var K,G;return((K=q.baseDelta)!=null?K:-1/0)-((G=H.baseDelta)!=null?G:-1/0)}),S.sort((H,q)=>{var K,G;return((K=q.stats)!=null?K:-1/0)-((G=H.stats)!=null?G:-1/0)}),C.sort((H,q)=>{var K,G;return((K=q.total)!=null?K:-1/0)-((G=H.total)!=null?G:-1/0)}),N.sort((H,q)=>{var K,G;return((K=q.base)!=null?K:-1/0)-((G=H.base)!=null?G:-1/0)}),R.sort((H,q)=>{var K,G;return((K=q.stats)!=null?K:-1/0)-((G=H.stats)!=null?G:-1/0)}),{...g,mostBaseGained:b.slice(0,50),sumBaseStats:N.slice(0,50),highestBaseStats:S.slice(0,50),highestTotalStats:C.slice(0,50),mainAndCon:R.slice(0,50)}}const U0=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,""),Hk=(t,e)=>{for(const s of Object.keys(t))if(U0(s)===e)return t[s]};async function WA(t,e){var m,g;const{playersRows:s,guildsRows:r}=t,i=[];let a=[],l=[],d=!0;const u=e!=null&&e.onProgress?(v,b)=>{var N;return(N=e.onProgress)==null?void 0:N.call(e,{...v,kind:b})}:void 0;try{const v=await Uk(null,{kind:"guilds",rows:r,onProgress:u?b=>u(b,"guilds"):void 0});i.push(v),Array.isArray(v.guildResults)&&(l=v.guildResults)}catch(v){console.error("[ImportSelectionToDb] guild import error",v),d=!1}try{const v=await Uk(null,{kind:"players",rows:s,onProgress:u?b=>u(b,"players"):void 0});i.push(v),Array.isArray(v.playerResults)&&(a=v.playerResults)}catch(v){console.error("[ImportSelectionToDb] player import error",v),d=!1}try{await i_e(s,r)}catch(v){console.warn("[ImportSelectionToDb] writeGuildSnapshotsFromRows skipped",v),d=!1}const h=new Set;for(const v of r){const b=Hk(v,U0("Guild Identifier"));b&&h.add(String(b))}for(const v of s){const b=Hk(v,U0("Guild Identifier"));b&&h.add(String(b))}for(const v of h){const b=Ot(it,`guilds/${v}/snapshots/members_summary`),N=await Os(b);if(!N.exists())continue;const S=N.data(),C=Number((m=S.updatedAtMs)!=null?m:S.timestamp?S.timestamp*1e3:Date.now()),R=a_e(C);let M=null,T=null;try{const w=await o_e(v,R,S,C);M=w.first,T=w.firstTsMs}catch(w){console.warn("[ImportSelectionToDb] ensureFirstOfMonth skipped",{guildId:v,monthKey:R,error:w})}const y=c_e({guildId:v,monthKey:R,server:(g=S.server)!=null?g:null,first:M,firstTsMs:T,latest:S,latestTsMs:C});try{await l_e(v,R,y)}catch(w){console.warn("[ImportSelectionToDb] writeMonthlyDoc skipped",{guildId:v,monthKey:R,error:w})}}return{ok:d,players:a,guilds:l,reports:i}}const Iv=t=>String(t!=null?t:"").trim(),Zn=t=>t.toLowerCase().replace(/[\s_\u00a0]+/g,"");function d_e(t){const e=[",",";","	","|"];let s=",",r=-1;for(const i of e){const a=(t.match(new RegExp(`\\${i}`,"g"))||[]).length;a>r&&(s=i,r=a)}return s}function z0(t){var u;const s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`);if(!s.length)return{headers:[],rows:[],delimiter:","};const r=d_e((u=s[0])!=null?u:""),i=h=>{const m=[];let g="",v=!1;for(let b=0;b<h.length;b++){const N=h[b];N==='"'?v&&h[b+1]==='"'?(g+='"',b++):v=!v:N===r&&!v?(m.push(g),g=""):g+=N}return m.push(g),m},l=(s[0]?i(s[0]).map(Iv):[]).map((h,m)=>h||`col${m}`),d=[];for(let h=1;h<s.length;h++){if(!s[h])continue;const m=i(s[h]);if(m.every(v=>Iv(v)===""))continue;const g={};for(let v=0;v<l.length;v++)g[l[v]]=m[v]!=null?Iv(m[v]):"";d.push(g)}return{headers:l,rows:d,delimiter:r}}const Ys={PLAYERS:{IDENTIFIER:Zn("Identifier"),PID:Zn("ID"),GUILD_IDENTIFIER:Zn("Guild Identifier"),TIMESTAMP:Zn("Timestamp"),NAME:Zn("Name"),SERVER:Zn("Server"),OWN:Zn("Own")},GUILDS:{GUILD_IDENTIFIER:Zn("Guild Identifier"),GUILD_MEMBER_COUNT:Zn("Guild Member Count"),NAME:Zn("Name"),TIMESTAMP:Zn("Timestamp"),SERVER:Zn("Server")}},qA=(t,e)=>{const s=new Set(t.map(Zn));return e.every(r=>s.has(r))},Wi=(t,e)=>{for(const s of Object.keys(t))if(Zn(s)===e)return t[s]};function u_e(t){const e=t.toLowerCase();return/^players\.\d+\.csv$/.test(e)?"players":/^groups\.\d+\.csv$/.test(e)?"guilds":"unknown"}function Gk(t){const e=t.map(Zn),s=a=>e.includes(a);let r=0,i=0;return s(Ys.PLAYERS.GUILD_IDENTIFIER)&&(r+=2),s(Ys.PLAYERS.IDENTIFIER)&&(r+=2),s(Ys.PLAYERS.TIMESTAMP)&&(r+=1),s(Ys.GUILDS.GUILD_IDENTIFIER)&&(i+=2),s(Ys.GUILDS.GUILD_MEMBER_COUNT)&&(i+=3),s(Ys.GUILDS.TIMESTAMP)&&(i+=1),r===0&&i===0?"unknown":i>r?"guilds":r>i||s(Ys.PLAYERS.IDENTIFIER)?"players":"guilds"}function H0(t,e){const s=u_e(t);if(s!=="unknown"){const i=Gk(e);return i!=="unknown"&&i!==s?{kind:s,via:"filename",warn:`Per Dateiname als "${s}" klassifiziert, Header deuten auf "${i}".`}:{kind:s,via:"filename"}}const r=Gk(e);return{kind:r,via:r==="unknown"?"unknown":"headers"}}function KA(t){if(t==null)return null;const e=String(t).trim();if(/^\d{13}$/.test(e))return Math.floor(Number(e)/1e3);if(/^\d{10}$/.test(e))return Number(e);const s=Date.parse(e);return Number.isFinite(s)?Math.floor(s/1e3):null}function h_e(t,e){var r;const s=[];if(!qA(e,[Ys.PLAYERS.GUILD_IDENTIFIER]))return s;for(const i of t){const a=Wi(i,Ys.PLAYERS.GUILD_IDENTIFIER);if(!a)continue;const l=Wi(i,Ys.PLAYERS.SERVER),d=l&&String(l).trim()!==""?String(l).trim().toUpperCase():void 0;s.push({guildIdentifier:String(a),id:Wi(i,Ys.PLAYERS.IDENTIFIER)||void 0,name:Wi(i,Ys.PLAYERS.NAME)||void 0,own:["1","true","","yes","y","ja"].includes(String(Wi(i,Ys.PLAYERS.OWN)).toLowerCase()),server:d,tsSec:(r=KA(Wi(i,Ys.PLAYERS.TIMESTAMP)))!=null?r:void 0})}return s}function m_e(t,e){const s=[];if(!qA(e,[Ys.GUILDS.GUILD_IDENTIFIER,Ys.GUILDS.GUILD_MEMBER_COUNT]))return s;for(const r of t){const i=Wi(r,Ys.GUILDS.GUILD_IDENTIFIER),a=Number(Wi(r,Ys.GUILDS.GUILD_MEMBER_COUNT));if(!i||!Number.isFinite(a))continue;const l=KA(Wi(r,Ys.GUILDS.TIMESTAMP));s.push({guildIdentifier:String(i),name:Wi(r,Ys.GUILDS.NAME)||void 0,memberCount:a,tsSec:l!=null?l:void 0})}return s}function QA(t){var d,u,h,m,g,v,b,N;let e=[],s=[];for(const S of t){const C=z0(S.text),{kind:R}=H0(S.name,C.headers);R==="players"?e=e.concat(Kbe(S.text)):R==="guilds"&&(s=s.concat(Qbe(S.text)))}const r=[],i=new Map,a=new Map;for(const S of e){const C={playerId:S.playerId,name:(d=S.name)!=null?d:"",server:S.server,guildId:(u=S.guildIdentifier)!=null?u:void 0,level:(h=S.level)!=null?h:void 0,className:(m=S.className)!=null?m:void 0,scanTimestampSec:S.timestampSec};r.push(C),S.guildIdentifier&&(i.has(S.guildIdentifier)||i.set(S.guildIdentifier,[]),i.get(S.guildIdentifier).push(C),a.has(S.guildIdentifier)||a.set(S.guildIdentifier,S.server))}const l=[];for(const S of s){const C=(g=i.get(S.guildIdentifier))!=null?g:[];l.push({guildId:S.guildIdentifier,name:(v=S.name)!=null?v:S.guildIdentifier,server:S.server,memberCount:(b=S.memberCount)!=null?b:C.length,scanTimestampSec:S.timestampSec,members:C.map(R=>({playerId:R.playerId,name:R.name,level:R.level,className:R.className}))}),i.delete(S.guildIdentifier)}for(const[S,C]of i.entries()){if(!C.length)continue;const R=a.get(S);if(!R)continue;const M=C.reduce((T,y)=>Math.max(T,y.scanTimestampSec),C[0].scanTimestampSec);l.push({guildId:S,name:S,server:R,memberCount:C.length,scanTimestampSec:M,members:C.map(T=>({playerId:T.playerId,name:T.name,level:T.level,className:T.className}))})}return{filename:(N=t[0])==null?void 0:N.name,players:r,guilds:l}}function p_e(t,e){var C,R,M,T,y,w;const s=[],r=new Map;for(const D of t){const k=D.id||"",_=(C=D.server)==null?void 0:C.toUpperCase();if(k){const A=`${_!=null?_:"NO"}::${k}`;r.has(A)||r.set(A,{server:_,id:k,name:D.name||"",own:!!D.own})}}const i=r.size,a=t.length,l=Array.from(r.values()).filter(D=>D.own).length,d=new Map;for(const D of r.values())D.server&&d.set(D.server,((R=d.get(D.server))!=null?R:0)+1);const u=Array.from(d.entries()).map(([D,k])=>({server:D,players:k})).sort((D,k)=>k.players-D.players),h=u.length,m=new Map;for(const D of t)m.set(D.guildIdentifier,((M=m.get(D.guildIdentifier))!=null?M:0)+1);const g=new Set,v=new Map;for(const D of e)g.add(D.guildIdentifier),v.set(D.guildIdentifier,{name:D.name||"",declared:D.memberCount});for(const D of m.keys())g.add(D);let b=0;const N=[];for(const D of g){const k=(T=v.get(D))==null?void 0:T.declared,_=(y=m.get(D))!=null?y:0,A=k!=null&&_===k;A&&b++,N.push({id:D,name:((w=v.get(D))==null?void 0:w.name)||"",declaredCount:k!=null?k:0,playersCount:_,full:A})}[...v.values()].some(D=>Number.isFinite(D.declared))||s.push("Keine 'Guild Member Count' Information gefunden  vollstndig gescannte Gilden nicht sicher bestimmbar."),N.sort((D,k)=>D.name?D.name.localeCompare(k.name):D.id.localeCompare(k.id));const S=Array.from(r.values()).sort((D,k)=>(D.server||"")===(k.server||"")?D.name.localeCompare(k.name):(D.server||"").localeCompare(k.server||""));return{totalPlayers:a,uniquePlayerIds:i,ownPlayers:l,servers:h,perServer:u,guildsRepresented:g.size,fullyScannedGuilds:b,notes:s,playersList:S,guildsList:N}}function XA({mode:t="db",onBuildUploadSession:e}){const[s,r]=E.useState([]),[i,a]=E.useState(null),[l,d]=E.useState(!1),[u,h]=E.useState(null),[m,g]=E.useState(!1),[v,b]=E.useState(null),[N,S]=E.useState([]),[C,R]=E.useState(null);E.useEffect(()=>{const P=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=P}},[]);const M=E.useCallback(async P=>{var B;d(!0),h(null),a(null),S([]),b(null);try{const $=Array.from(P).slice(0,2),W=[];let H=[],q=[];for(const K of $){const G=K,te=await G.text(),ne=z0(te),{kind:U,warn:Z}=H0(G.name,ne.headers);W.push({name:G.name,size:G.size||te.length,rows:ne.rows.length,delimiter:ne.delimiter,text:te,kind:U,warn:Z}),U==="players"?H=H.concat(h_e(ne.rows,ne.headers)):U==="guilds"&&(q=q.concat(m_e(ne.rows,ne.headers)))}r(W),a(p_e(H,q))}catch($){h(String((B=$==null?void 0:$.message)!=null?B:$))}finally{d(!1)}},[]),T=E.useCallback(async P=>{!P||P.length===0||await M(P)},[M]),y=E.useCallback(async P=>{P.preventDefault();const B=P.dataTransfer.files;!B||!B.length||await M(B)},[M]),w=E.useCallback(()=>{const P=s.map(B=>({name:B.name,text:B.text}));return QA(P)},[s]);async function D(){var P;if(s.length){g(!0),R({phase:"prepare",current:0,total:0}),b(null),S([]);try{let B=[],$=[];for(const H of s){const q=z0(H.text),{kind:K}=H0(H.name,q.headers);K==="players"&&(B=B.concat(q.rows)),K==="guilds"&&($=$.concat(q.rows))}if(console.info("[UploadCenter] start import",{hasPlayersCsv:!!B.length,hasGuildsCsv:!!$.length,playersRows:B.length,guildsRows:$.length}),!$.length)throw new Error('Guilds-CSV mit "Guild Identifier" + "Guild Member Count" + "Timestamp" nicht gefunden.');if(!B.length)throw new Error('Players-CSV mit "Guild Identifier" nicht gefunden.');const W=await WA({playersRows:B,guildsRows:$},{onProgress:H=>R(H)});R({phase:"done",current:1,total:1}),S(W.reports),b("Import abgeschlossen.")}catch(B){console.error("[UploadCenter] Import error:",B),b(`Fehler beim Import: ${(P=B==null?void 0:B.message)!=null?P:B}`)}finally{g(!1),setTimeout(()=>R(null),1200)}}}const k=E.useCallback(async()=>{var P;if(!(t!=="session"||!e||!s.length)){g(!0),b(null),S([]),h(null),R(null);try{const B=w();e(B),b("Session prepared locally.")}catch(B){console.error("[UploadCenter] Session build error:",B),b(`Fehler beim Import: ${(P=B==null?void 0:B.message)!=null?P:B}`)}finally{g(!1)}}},[t,e,s,w]),_=E.useMemo(()=>s.map(P=>`${P.name} (${P.rows} rows, ${P.delimiter}, ${P.kind}${P.warn?" ":""})`),[s]),A=E.useMemo(()=>s.reduce((P,B)=>P+B.rows,0),[s]),F=C?Math.floor(100*C.current/Math.max(1,C.total||1)):0;return n.jsxs("div",{className:"uc-panel",style:{boxSizing:"border-box",width:"100%",maxWidth:"1200px",margin:"0 auto",maxHeight:"80vh",overflow:"auto",background:"#152A42",border:"1px solid #2B4C73",borderRadius:12,padding:16},children:[n.jsx("style",{children:`
        .uc-panel::-webkit-scrollbar { width: 10px; height: 10px; }
        .uc-panel::-webkit-scrollbar-track { background: transparent; }
        .uc-panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 8px; }
        .uc-chip { background:#0F2238; border:1px solid #24456E; border-radius:999px; padding:4px 10px; color:#D6E4F7; font-size:12px; }
        .uc-chip + .uc-chip { margin-left:6px; }
        .uc-btn { background:#2E75F0; color:#fff; border:none; border-radius:8px; padding:8px 12px; }
        .uc-btn:disabled { opacity:.6; cursor:not-allowed; }
      `}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[n.jsx("h3",{style:{margin:0,color:"#F5F9FF"},children:"Upload Center"}),n.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[_.map((P,B)=>n.jsx("span",{className:"uc-chip",title:s[B].warn||"",children:P},B)),s.length>0&&n.jsxs("span",{className:"uc-chip",children:["Total: ",A," rows"]})]}),n.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:[C&&t==="db"&&n.jsxs("div",{style:{minWidth:180,display:"flex",alignItems:"center",gap:8},children:[n.jsx("div",{style:{width:120,height:8,background:"#27456E",borderRadius:6,overflow:"hidden"},children:n.jsx("div",{style:{width:`${F}%`,height:"100%",background:"#2E75F0"}})}),n.jsxs("span",{style:{color:"#D6E4F7"},children:[F,"%"]})]}),n.jsx("button",{onClick:t==="session"?k:D,disabled:!s.length||!i||m||t==="session"&&!e,className:"uc-btn",children:m?"Loading":t==="session"?"Add as Upload Session":"Load to DB"}),v&&n.jsx("span",{style:{color:v.startsWith("Fehler")?"#ff9e9e":"#B0E3A1"},children:v})]})]}),n.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr auto",alignItems:"center",marginTop:8},children:[n.jsx("label",{style:{opacity:.9},children:"Dateien whlen (max. 2) oder hierher ziehen"}),n.jsx("input",{type:"file",accept:".csv,text/csv",multiple:!0,onChange:P=>T(P.target.files),disabled:l})]}),n.jsx("div",{onDragOver:P=>P.preventDefault(),onDrop:y,style:{marginTop:12,padding:20,border:"2px dashed #2C4A73",borderRadius:10,textAlign:"center",color:"#B0C4D9"},children:"Drop 12 CSV files here"}),l&&n.jsx("div",{style:{marginTop:12,color:"#B0C4D9"},children:"Analysiere CSV(s)"}),u&&n.jsxs("div",{style:{marginTop:12,color:"#ff9e9e"},children:[n.jsx("b",{children:"Fehler:"})," ",u]}),i&&n.jsxs("div",{style:{marginTop:12,padding:12,background:"#0F2238",border:"1px solid #24456E",borderRadius:10},children:[n.jsx("div",{style:{color:"#D6E4F7",marginBottom:8},children:n.jsx("b",{children:"Gesamtbersicht (nur Vorschau)"})}),n.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[n.jsx(Du,{label:"Eigene Charaktere (unique IDs)",value:i.ownPlayers}),n.jsx(Du,{label:"Spieler in Datei (eindeutige IDs)",value:i.uniquePlayerIds,hint:`Total (mit ID): ${i.totalPlayers}`}),n.jsx(Du,{label:"Vertretene Gilden (mit ID)",value:i.guildsRepresented}),n.jsx(Du,{label:"Vollstndig gescannte Gilden",value:i.fullyScannedGuilds}),n.jsx(Du,{label:"Verschiedene Server",value:i.servers})]}),n.jsxs("div",{style:{marginTop:12},children:[n.jsx("div",{style:{color:"#B0C4D9",marginBottom:6},children:"Spieler pro Server (eindeutige IDs):"}),n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"right"},children:"Spieler"})]})}),n.jsx("tbody",{children:i.perServer.map(P=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:P.server}),n.jsx("td",{style:{textAlign:"right"},children:P.players})]},P.server))})]})]}),n.jsxs("div",{style:{marginTop:12,display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[n.jsxs("details",{children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Spieler-Liste anzeigen (",i.playersList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Server"}),n.jsx("th",{style:{textAlign:"left"},children:"Spieler-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"left"},children:"Own"})]})}),n.jsx("tbody",{children:i.playersList.map((P,B)=>{var $,W;return n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:($=P.server)!=null?$:""}),n.jsx("td",{children:P.id}),n.jsx("td",{children:P.name||""}),n.jsx("td",{children:P.own?"":""})]},`${(W=P.server)!=null?W:"NO"}-${P.id}-${B}`)})})]})})]}),n.jsxs("details",{open:!0,children:[n.jsxs("summary",{style:{cursor:"pointer",color:"#D6E4F7",fontWeight:600},children:["Gilden-Liste anzeigen (",i.guildsList.length,")"]}),n.jsx("div",{style:{marginTop:8},children:n.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",color:"#DDE8F7"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #2C4A73"},children:[n.jsx("th",{style:{textAlign:"left"},children:"Guild-ID"}),n.jsx("th",{style:{textAlign:"left"},children:"Name"}),n.jsx("th",{style:{textAlign:"right"},children:"Deklariert"}),n.jsx("th",{style:{textAlign:"right"},children:"Gezhlt"}),n.jsx("th",{style:{textAlign:"center"},children:"Vollstndig"})]})}),n.jsx("tbody",{children:i.guildsList.map((P,B)=>n.jsxs("tr",{style:{borderBottom:"1px solid #1E3556"},children:[n.jsx("td",{children:P.id}),n.jsx("td",{children:P.name||""}),n.jsx("td",{style:{textAlign:"right"},children:P.declaredCount||0}),n.jsx("td",{style:{textAlign:"right"},children:P.playersCount}),n.jsx("td",{style:{textAlign:"center"},children:P.full?"":""})]},`${P.id}-${B}`))})]})})]})]}),!!i.notes.length&&n.jsxs("div",{style:{marginTop:10,color:"#ffd27a"},children:["Hinweise:",n.jsx("ul",{children:i.notes.map((P,B)=>n.jsx("li",{children:P},B))})]})]})]})}function Du({label:t,value:e,hint:s}){return n.jsxs("div",{style:{background:"#14273E",border:"1px solid #2B4C73",borderRadius:10,padding:12,color:"#FFFFFF"},children:[n.jsx("div",{style:{fontSize:12,opacity:.85},children:t}),n.jsx("div",{style:{fontSize:20,fontWeight:700},children:e}),s&&n.jsx("div",{style:{fontSize:12,opacity:.7,marginTop:2},children:s})]})}function f_e(){return n.jsxs("div",{children:[n.jsx("h3",{style:{marginTop:0},children:"JSON Import (bald verfgbar)"}),n.jsxs("p",{children:["Dieser Tab bleibt als Platzhalter erhalten. Der frhere JSON-Importer ist absichtlich entfernt/deaktiviert. Nutze bitte den ",n.jsx("strong",{children:"CSV"}),"-Tab."]})]})}function g_e(){const{isOpen:t,close:e,activeTab:s,setTab:r,canUse:i}=J1();return!t||!i?null:n.jsx("div",{className:Gi.backdrop,onClick:e,children:n.jsxs("div",{className:Gi.panel,onClick:a=>a.stopPropagation(),children:[n.jsxs("div",{className:Gi.header,children:[n.jsx("div",{style:{fontWeight:600},children:"Upload Center"}),n.jsxs("div",{className:Gi.tabs,children:[n.jsx("button",{type:"button",className:`${Gi.tabBtn} ${s==="csv"?Gi.tabActive:""}`,onClick:()=>r("csv"),children:"CSV"}),n.jsx("button",{type:"button",className:`${Gi.tabBtn} ${s==="json"?Gi.tabActive:""}`,onClick:()=>r("json"),title:"Platzhalter  keine Importfunktion",children:"JSON"})]}),n.jsx("button",{type:"button",className:Gi.closeBtn,onClick:e,children:"Schlieen"})]}),n.jsx("div",{className:Gi.content,children:s==="csv"?n.jsx(XA,{mode:"db"}):n.jsx(f_e,{})})]})})}const YA="sfdatahub_upload_sessions_v1",Pv={sessions:[],activeSessionId:null},x_e=()=>{var t,e,s,r,i,a;if(typeof window=="undefined")return Pv;try{const l=window.localStorage.getItem(YA);if(!l)return Pv;const d=JSON.parse(l);if(d&&typeof d=="object"){if("version"in d&&(d==null?void 0:d.version)===1&&d.type==="uploadCenter.sessions"&&Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(s=(e=u.activeSessionId)!=null?e:(t=u.sessions[0])==null?void 0:t.id)!=null?s:null}}if(Array.isArray(d.sessions)){const u=d;return{sessions:u.sessions,activeSessionId:(a=(i=u.activeSessionId)!=null?i:(r=u.sessions[0])==null?void 0:r.id)!=null?a:null}}}}catch(l){console.warn("[UploadCenterSessions] Failed to parse persisted state",l)}return Pv},JA=E.createContext(null);function y_e({children:t}){const e=E.useMemo(()=>x_e(),[]),[s,r]=E.useState(()=>e.sessions),[i,a]=E.useState(()=>e.activeSessionId),l=E.useCallback(T=>({...T,players:T.players.map(y=>({...y,status:"pending"})),guilds:T.guilds.map(y=>({...y,status:"pending"}))}),[]);E.useEffect(()=>{if(typeof window!="undefined")try{const T={version:1,type:"uploadCenter.sessions",sessions:s,activeSessionId:i};window.localStorage.setItem(YA,JSON.stringify(T))}catch(T){console.warn("[UploadCenterSessions] Failed to persist state",T)}},[s,i]);const d=E.useCallback(T=>{const y=l(T);r(w=>[...w,y]),a(y.id)},[l]),u=E.useCallback(T=>{a(T)},[]),h=E.useCallback(T=>{r(y=>{const w=y.filter(D=>D.id!==T);return a(D=>{var k,_;return D===T?(_=(k=w[0])==null?void 0:k.id)!=null?_:null:D}),w})},[]),m=E.useCallback(()=>{r([]),a(null)},[]),g=E.useCallback((T,y,w,D)=>{r(k=>k.map(_=>{if(_.id!==T)return _;if(y==="player"){const F=_.players.map(P=>P.key===w?{...P,selected:D}:P);return{..._,players:F}}const A=_.guilds.map(F=>F.key===w?{...F,selected:D}:F);return{..._,guilds:A}}))},[]),v=E.useCallback((T,y,w)=>{r(D=>D.map(k=>{if(k.id!==T)return k;if(y==="player"){const A=k.players.map(F=>({...F,selected:w}));return{...k,players:A}}const _=k.guilds.map(A=>({...A,selected:w}));return{...k,guilds:_}}))},[]),b=E.useCallback((T,y,w)=>{r(D=>D.map(k=>{if(k.id!==T)return k;const _=k.guilds.find(B=>B.key===y);if(!_)return k;const A=_.guildId,F=k.players.map(B=>B.guildId===A?{...B,selected:w}:B),P=k.guilds.map(B=>B.key===y?{...B,selected:w}:B);return{...k,players:F,guilds:P}}))},[]),N=E.useCallback((T,y,w)=>{r(D=>D.map(k=>{if(k.id!==T)return k;let _;const A=k.players.map($=>$.key!==y?$:(_=$.guildId,{...$,selected:w}));if(!_)return{...k,players:A};const F=A.filter($=>$.guildId===_),P=F.length>0&&F.every($=>$.selected),B=k.guilds.map($=>$.guildId!==_?$:w===!1?{...$,selected:!1}:P?{...$,selected:!0}:$);return{...k,players:A,guilds:B}}))},[]),S=E.useCallback((T,y)=>{r(w=>w.map(D=>{if(D.id!==T)return D;const k=D.players.map(A=>({...A,selected:y})),_=D.guilds.map(A=>{if(!y)return{...A,selected:!1};const F=k.filter(B=>B.guildId===A.guildId),P=F.length>0&&F.every(B=>B.selected);return{...A,selected:P}});return{...D,players:k,guilds:_}}))},[]),C=E.useCallback((T,y)=>{r(w=>w.map(D=>{if(D.id!==T)return D;const k=D.guilds.map(A=>({...A,selected:y})),_=D.players.map(A=>y&&A.guildId?{...A,selected:!0}:!y&&A.guildId?{...A,selected:!1}:A);return{...D,guilds:k,players:_}}))},[]),R=E.useCallback((T,y,w,D)=>{console.log("[UploadSessions] setRecordStatus",{sessionId:T,kind:y,recordKey:w,status:D}),r(k=>k.map(_=>{if(_.id!==T)return _;if(y==="player"){const F=_.players.map(P=>P.key===w?{...P,status:D}:P);return{..._,players:F}}const A=_.guilds.map(F=>F.key===w?{...F,status:D}:F);return{..._,guilds:A}}))},[]),M=E.useMemo(()=>({sessions:s,activeSessionId:i,addSession:d,setActiveSession:u,removeSession:h,clearAllSessions:m,toggleRecordSelection:g,selectAllInSession:v,selectGuildWithPlayers:b,updateGuildSelectionFromPlayer:N,selectAllPlayersWithGuilds:S,selectAllGuildsWithPlayers:C,setRecordStatus:R}),[s,i,d,u,h,m,g,v,b,N,S,C,R]);return n.jsx(JA.Provider,{value:M,children:t})}function v_e(){const t=E.useContext(JA);if(!t)throw new Error("useUploadCenterSessions must be used within UploadCenterSessionsProvider");return t}function b_e({route:t,featureId:e,fallback:s=null,children:r}){var v;const{isLoading:i}=Xa(),{resolveRule:a,canAccessFeature:l,canAccessRule:d,loading:u}=Dg(),h=(v=e!=null?e:t)!=null?v:"/",m=J.useMemo(()=>a(h),[a,h]);J.useEffect(()=>{m||console.debug(`[FeatureGate] No rule found for target "${h}", allowing by default.`)},[m,h]);const g=J.useMemo(()=>!e&&!t?!0:m?d(m):l(h),[l,d,e,t,m,h]);return i||u?null:g?n.jsx(n.Fragment,{children:r}):n.jsx(n.Fragment,{children:s})}const Wk="pending";function qk(t,e,s){const r=t.players.map(a=>{var d;return{key:`${a.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:a.playerId,name:a.name,server:a.server,scanTimestampSec:a.scanTimestampSec,guildId:(d=a.guildId)!=null?d:void 0,level:a.level,className:a.className,selected:!0,status:Wk}}),i=t.guilds.map(a=>{var u;const l=`${a.guildId}__${a.server}__${a.scanTimestampSec}`,d=a.members.map(h=>({key:`${h.playerId}__${a.server}__${a.scanTimestampSec}`,playerId:h.playerId,name:h.name,level:h.level,className:h.className}));return{key:l,guildId:a.guildId,name:a.name,server:a.server,memberCount:(u=a.memberCount)!=null?u:a.members.length,scanTimestampSec:a.scanTimestampSec,members:d,selected:!0,status:Wk}});return{id:e,createdAt:s,sourceFilename:t.filename,scanUploadId:void 0,players:r,guilds:i}}const vf=()=>{const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${r}`};async function __e(t){var s,r,i,a;if(!t)return console.warn("[UploadCenterUsage] Missing userId, returning empty usage."),{date:null,guilds:0,players:0};const e=Ot(it,"users",t);try{const l=await Os(e);if(!l.exists())return console.warn("[UploadCenterUsage] User document does not exist.",{userId:t}),{date:null,guilds:0,players:0};const d=(s=l.data())==null?void 0:s.uploadCenter,u=(r=d==null?void 0:d.usage)!=null?r:{};return{date:typeof(u==null?void 0:u.date)=="string"?u.date:null,guilds:Number((i=u==null?void 0:u.guilds)!=null?i:0)||0,players:Number((a=u==null?void 0:u.players)!=null?a:0)||0}}catch(l){return console.error("[UploadCenterUsage] Failed to fetch usage data.",{userId:t,error:l}),{date:null,guilds:0,players:0}}}async function w_e(t,e,s){var b,N,S;if(!t){console.warn("[UploadCenterUsage] Missing userId, skipping usage update.");return}const r=vf(),i=Ot(it,"users",t);let a;try{a=await Os(i)}catch(C){console.error("[UploadCenterUsage] Failed to fetch user document.",{userId:t,error:C});return}if(!a.exists()){console.warn("[UploadCenterUsage] User document does not exist.",{userId:t});return}const l=(b=a.data())==null?void 0:b.uploadCenter,d=l==null?void 0:l.usage,u=(d==null?void 0:d.date)===r,h=u?Number((N=d==null?void 0:d.guilds)!=null?N:0):0,m=u?Number((S=d==null?void 0:d.players)!=null?S:0):0,g=h+Number(e!=null?e:0),v=m+Number(s!=null?s:0);try{await Ga(i,{uploadCenter:{...l!=null?l:{},usage:{date:r,guilds:g,players:v}}},{merge:!0})}catch(C){console.error("[UploadCenterUsage] Failed to update usage data.",{userId:t,error:C})}}const Do={enabled:!0,dailyGuildLimit:9999,dailyPlayerLimit:999999},ng=t=>{if(t==null||typeof t=="boolean"||typeof t=="string"&&t.trim()==="")return null;const e=Number(t);return Number.isFinite(e)&&e>=0?e:null},j_e=t=>{if(!t||typeof t!="object")return;const e={};return Object.entries(t).forEach(([s,r])=>{if(!r||typeof r!="object")return;const i=r,a=ng(i.dailyGuildLimit),l=ng(i.dailyPlayerLimit),d=i.enabled,u={};typeof d=="boolean"&&(u.enabled=d),a!==null&&(u.dailyGuildLimit=a),l!==null&&(u.dailyPlayerLimit=l),Object.keys(u).length>0&&(e[s]=u)}),Object.keys(e).length>0?e:void 0};async function S_e(t){const e=Ot(it,"upload_quota_config","default");try{const s=await Os(e);if(!s.exists())return console.warn("[UploadQuota] Missing config document. Using defaults."),Do;const r=s.data(),i=ng(r==null?void 0:r.dailyGuildLimit),a=ng(r==null?void 0:r.dailyPlayerLimit),l=j_e(r==null?void 0:r.roles),d={dailyGuildLimit:i!=null?i:Do.dailyGuildLimit,dailyPlayerLimit:a!=null?a:Do.dailyPlayerLimit};typeof(r==null?void 0:r.enabled)=="boolean"&&(d.enabled=r.enabled),l&&(d.roles=l);const u=r&&Object.prototype.hasOwnProperty.call(r,"dailyGuildLimit")&&i===null,h=r&&Object.prototype.hasOwnProperty.call(r,"dailyPlayerLimit")&&a===null;return(u||h)&&console.warn("[UploadQuota] Invalid config payload. Using defaults.",{data:r}),d}catch(s){return console.error("[UploadQuota] Failed to load quota config.",{userId:t==null?void 0:t.id,error:s}),Do}}function N_e(t,e){var a,l,d;const s=Array.isArray(e)?e.filter(u=>typeof u=="string"&&u.length>0):[],r=Number.isFinite(t.dailyGuildLimit)?t.dailyGuildLimit:Do.dailyGuildLimit,i=Number.isFinite(t.dailyPlayerLimit)?t.dailyPlayerLimit:Do.dailyPlayerLimit;for(const u of s){const h=(a=t.roles)==null?void 0:a[u];if(!h||h.enabled===!1)continue;const m=(l=h.dailyGuildLimit)!=null?l:r,g=(d=h.dailyPlayerLimit)!=null?d:i;return console.debug("[UploadQuota] Applying role override for upload limits.",{role:u,guildLimit:m,playerLimit:g}),{dailyGuildLimit:m,dailyPlayerLimit:g}}return{dailyGuildLimit:r,dailyPlayerLimit:i}}async function Kk(t){var u,h,m;const e=(u=t==null?void 0:t.id)!=null?u:null,s=(m=(h=t==null?void 0:t.uploadCenter)==null?void 0:h.usage)!=null?m:{date:null,guilds:0,players:0},r=Array.isArray(t==null?void 0:t.roles)?t.roles:[],[i,a]=await Promise.all([S_e(t),e?__e(e):Promise.resolve(null)]),l=N_e(i,r);return{config:{...i,dailyGuildLimit:l.dailyGuildLimit,dailyPlayerLimit:l.dailyPlayerLimit},usage:a!=null?a:s}}const k_e=(t,e)=>`${aa}/scan-uploads/${encodeURIComponent(t)}/${e}.csv`,C_e=async t=>{let e=`Request failed (${t.status})`;try{const s=await t.json();s!=null&&s.error&&(e=s.error)}catch(s){}return new Error(e)};async function Qk(t,e){const s=k_e(t,e);console.log(`[scan-uploads] Fetching ${e} CSV for scanId=${t}`);const r=await fetch(s,{method:"GET",credentials:"include",headers:{Accept:"text/csv"}});if(!r.ok)throw console.error(`[scan-uploads] Failed to fetch ${e} CSV for scanId=${t} (status ${r.status})`),await C_e(r);const i=await r.text();return console.log(`[scan-uploads] Fetched ${e} CSV for scanId=${t} (${i.length} chars)`),i}const T_e=t=>{const[e,s]=E.useState([]),[r,i]=E.useState(!1),[a,l]=E.useState(null);return E.useEffect(()=>{if(!t){s([]),i(!1),l(null);return}let d=!0;return(async()=>{i(!0),l(null);try{const h=tc(it,"scan_uploads"),m=kn(h,Zi("discordUserId","==",t),Ra("uploadedAt","desc")),g=await an(m);if(!d)return;const v=g.docs.map(b=>({id:b.id,...b.data()}));console.log(`[upload-center] Loaded ${v.length} scan_uploads for current user (remote sessions)`),s(v)}catch(h){if(!d)return;console.error("[upload-center] Failed to load scan_uploads for current user",h),l(h instanceof Error?h:new Error("Failed to load scan uploads")),s([])}finally{d&&i(!1)}})(),()=>{d=!1}},[t]),{items:e,loading:r,error:a}},ZA="sfdatahub_upload_quota_v1",e4=t=>{var e,s;return{date:typeof(t==null?void 0:t.date)=="string"?t.date:null,guilds:Number((e=t==null?void 0:t.guilds)!=null?e:0)||0,players:Number((s=t==null?void 0:t.players)!=null?s:0)||0}},Rv=(t,e)=>{if(typeof window=="undefined")return;const s={version:1,config:t,usage:e4(e),storedAt:new Date().toISOString()};try{window.localStorage.setItem(ZA,JSON.stringify(s))}catch(r){console.warn("[UploadQuotaStorage] Failed to persist quota data",r)}},E_e=()=>{var t,e;if(typeof window=="undefined")return null;try{const s=window.localStorage.getItem(ZA);if(!s)return null;const r=JSON.parse(s);return!r||typeof r!="object"||r.version!==1||typeof((t=r.config)==null?void 0:t.dailyGuildLimit)!="number"||typeof((e=r.config)==null?void 0:e.dailyPlayerLimit)!="number"?null:{version:1,config:{dailyGuildLimit:Number(r.config.dailyGuildLimit)||0,dailyPlayerLimit:Number(r.config.dailyPlayerLimit)||0},usage:e4(r.usage),storedAt:typeof r.storedAt=="string"?r.storedAt:""}}catch(s){return console.warn("[UploadQuotaStorage] Failed to read quota data",s),null}},rg=(t,e)=>Math.max(t-e,0),Xk=(t,e,s)=>{var l,d,u;const r=e.date===s,i=r&&(l=e.guilds)!=null?l:0,a=r&&(d=e.players)!=null?d:0;return{config:t,usageDate:(u=e.date)!=null?u:null,usedGuildsToday:i,usedPlayersToday:a,remainingGuilds:rg(t.dailyGuildLimit,i),remainingPlayers:rg(t.dailyPlayerLimit,a),today:s}},A_e=({className:t})=>{if(!t)return n.jsx("span",{title:"Unknown class",className:"text-xs text-center text-zinc-400 block",children:"Unknown"});const{url:e,fallback:s}=Y3(t),r=e?sr(e,28):void 0;return r?n.jsx("img",{src:r,alt:t,title:t,className:"mx-auto h-6 w-6 rounded-full object-contain",draggable:!1}):s?n.jsx("span",{title:t,className:"mx-auto text-center text-sm leading-none",style:{display:"block"},children:s}):n.jsx("span",{title:t,className:"text-xs text-center text-zinc-400 block",children:t})};function I_e(){return n.jsx(Pt,{title:"Upload Center",subtitle:"Import CSV scans locally, review all players and guilds, then upload only the records you want to store.",centerFramed:!1,children:n.jsx(P_e,{})},"upload-center-shell")}function P_e(){var Pn,en,Ds,Gn,Sr,Ur,Nr,rr,ls;const{sessions:t,activeSessionId:e,addSession:s,setActiveSession:r,removeSession:i,selectGuildWithPlayers:a,updateGuildSelectionFromPlayer:l,selectAllPlayersWithGuilds:d,selectAllGuildsWithPlayers:u,setRecordStatus:h}=v_e(),{t:m}=qo(),{user:g}=Xa(),v=(Ds=(en=(Pn=g==null?void 0:g.providers)==null?void 0:Pn.discord)==null?void 0:en.id)!=null?Ds:(g==null?void 0:g.provider)==="discord"?g.id:null,{items:b,loading:N,error:S}=T_e(v),C=!!v,R=t.find(ce=>ce.id===e)||null,M=E.useMemo(()=>new Set(t.map(ce=>ce.scanUploadId).filter(ce=>!!ce)),[t]),[T,y]=J.useState(new Set),[w,D]=E.useState({phase:"idle",processed:0,total:0,created:0,duplicate:0,error:0}),[k,_]=E.useState("all"),[A,F]=E.useState("all"),[P,B]=E.useState(!1),[$,W]=E.useState(!1),[H,q]=E.useState(null),[K,G]=E.useState(null),[te,ne]=E.useState(()=>Xk(Do,{date:null,guilds:0,players:0},vf())),[U,Z]=E.useState(null),he=E.useCallback((ce,qe)=>{const Ge=vf();ne(Xk(ce,qe,Ge)),Z(null)},[]),ie=E.useCallback(async()=>{try{const ce=await Kk(g!=null?g:null);he(ce.config,ce.usage),Rv(ce.config,ce.usage)}catch(ce){console.error("[UploadCenter] Failed to refresh upload quota",ce),Z("Could not refresh upload quota. Using last known values.")}},[he,g]);E.useEffect(()=>{var ct,rt;let ce=!0;vf();const qe=(rt=(ct=g==null?void 0:g.uploadCenter)==null?void 0:ct.usage)!=null?rt:{date:null,guilds:0,players:0};he(Do,qe);const Ge=E_e();return Ge&&he(Ge.config,Ge.usage),(async()=>{try{const Et=await Kk(g!=null?g:null);if(!ce)return;he(Et.config,Et.usage),Rv(Et.config,Et.usage)}catch(Et){console.error("[UploadCenter] Failed to refresh upload quota",Et),ce&&Z("Could not refresh upload quota. Using last known values.")}})(),()=>{ce=!1}},[g,(Sr=(Gn=g==null?void 0:g.uploadCenter)==null?void 0:Gn.usage)==null?void 0:Sr.date,(Nr=(Ur=g==null?void 0:g.uploadCenter)==null?void 0:Ur.usage)==null?void 0:Nr.guilds,(ls=(rr=g==null?void 0:g.uploadCenter)==null?void 0:rr.usage)==null?void 0:ls.players,he]);const fe=E.useCallback(ce=>{const qe=`csv_${Date.now()}`,Ge=new Date().toISOString(),ct=qk(ce,qe,Ge);s(ct),r(qe)},[s,r]),be=ce=>{const qe=new Date(ce);return Number.isNaN(qe.getTime())?"Unknown date":qe.toLocaleString()},ye=ce=>{y(qe=>{const Ge=new Set(qe);return Ge.has(ce)?Ge.delete(ce):Ge.add(ce),Ge})},_e=ce=>{var rt,Et;const qe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ge={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",created:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",duplicate:"bg-amber-500/10 text-amber-100 border border-amber-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",created:"UPLOADED",duplicate:"IN DB",error:"ERROR"};return n.jsx("span",{className:`${qe} ${(rt=Ge[ce])!=null?rt:Ge.pending}`,children:(Et=ct[ce])!=null?Et:ce})},we=ce=>{if(!ce)return"Unknown date";try{if(typeof ce.toDate=="function")return ce.toDate().toLocaleString()}catch(qe){}return"Unknown date"},de=ce=>{var Et,is,Rn;const qe="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide",Ge={pending:"bg-slate-800 text-slate-200 border border-slate-600/70",stored:"bg-emerald-500/10 text-emerald-100 border border-emerald-400/60",received:"bg-sky-500/10 text-sky-100 border border-sky-400/60",error:"bg-rose-500/10 text-rose-100 border border-rose-400/60"},ct={pending:"PENDING",stored:"STORED",received:"RECEIVED",error:"ERROR"},rt=(Et=ce==null?void 0:ce.toLowerCase())!=null?Et:"pending";return n.jsx("span",{className:`${qe} ${(is=Ge[rt])!=null?is:Ge.pending}`,children:(Rn=ct[rt])!=null?Rn:ce||"PENDING"})},pe=E.useCallback((ce,qe,Ge)=>{const ct=ce==="created"||ce==="duplicate";return Ge&&ct?!1:qe==="all"?!0:qe==="pending"?ce==="pending":qe==="inDb"?ct:qe==="error"?ce==="error":!0},[]),re=E.useMemo(()=>R?R.players.filter(ce=>pe(ce.status,k,P)):[],[R,pe,k,P]),$e=E.useMemo(()=>R?R.guilds.filter(ce=>pe(ce.status,A,$)):[],[R,pe,A,$]),He=E.useCallback(async ce=>{if(ce!=null&&ce.id){G(null),q(ce.id);try{const qe=[],Ge=ce.queueId||ce.scanId||ce.id,ct=ce.hasPlayersCsv!==!1,rt=ce.hasGuildsCsv!==!1;if(ct){const Wn=await Qk(ce.id,"players");qe.push({name:`players.scan-${Ge}.csv`,text:Wn})}if(rt){const Wn=await Qk(ce.id,"guilds");qe.push({name:`guilds.scan-${Ge}.csv`,text:Wn})}if(!qe.length)throw new Error("No CSV data available for this scan.");const Et=QA(qe);Et.filename=Ge||Et.filename;const is=`scan_${ce.id}_${Date.now()}`,Rn=new Date().toISOString(),Ii={...qk(Et,is,Rn),scanUploadId:ce.id};s(Ii),r(is),console.log(`[upload-center] Loaded remote scan session for scanId=${ce.id} (session ${is})`)}catch(qe){console.error(`[upload-center] Failed to load remote scan session for scanId=${ce==null?void 0:ce.id}`,qe),G(qe instanceof Error?qe.message:"Failed to load remote scan session.")}finally{q(null)}}},[s,r]),pt=E.useMemo(()=>{if(!R)return!1;const ce=R.players.some(Ge=>Ge.selected),qe=R.guilds.some(Ge=>Ge.selected);return ce||qe},[R]),It=w.phase==="uploading"||w.phase==="finalizing",Mt=()=>{if(!R)return null;const ce=R.players.filter(rt=>rt.selected),qe=R.guilds.filter(rt=>rt.selected);if(!ce.length&&!qe.length)return null;const Ge=ce.map(rt=>{var Et,is,Rn;return{Identifier:rt.playerId,"Guild Identifier":(Et=rt.guildId)!=null?Et:"",Timestamp:rt.scanTimestampSec,Server:rt.server,Name:rt.name,Class:(is=rt.className)!=null?is:"",Level:(Rn=rt.level)!=null?Rn:""}}),ct=qe.map(rt=>{var Et;return{"Guild Identifier":rt.guildId,"Guild Member Count":(Et=rt.memberCount)!=null?Et:rt.members.length,Timestamp:rt.scanTimestampSec,Name:rt.name,Server:rt.server}});return{playersRows:Ge,guildsRows:ct}},Ht=E.useCallback((ce,qe)=>{ne(Ge=>{const ct=Ge.usedGuildsToday+ce,rt=Ge.usedPlayersToday+qe,Et={...Ge,usedGuildsToday:ct,usedPlayersToday:rt,remainingGuilds:rg(Ge.config.dailyGuildLimit,ct),remainingPlayers:rg(Ge.config.dailyPlayerLimit,rt),usageDate:Ge.today};return Rv(Ge.config,{date:Ge.today,guilds:ct,players:rt}),Et})},[]),ss=E.useMemo(()=>te.usageDate?te.usageDate===te.today?"Today":te.usageDate:"No uploads yet",[te.today,te.usageDate]),Ne=te.config.dailyPlayerLimit===0,Re=te.config.dailyGuildLimit===0,Ie=Ne?m("uploadCenter.quota.unlimited"):te.config.dailyPlayerLimit,ze=Re?m("uploadCenter.quota.unlimited"):te.config.dailyGuildLimit,at=Ne?m("uploadCenter.quota.unlimited"):`${Ie} limit today`,ut=Re?m("uploadCenter.quota.unlimited"):`${ze} limit today`,xt=Ne?m("uploadCenter.quota.unlimited"):te.remainingPlayers,Qt=Re?m("uploadCenter.quota.unlimited"):te.remainingGuilds,Gt=async()=>{var Ri,oa,ir;if(!R)return;const ce=Mt();if(!ce)return;const qe=R.players.filter(ns=>ns.selected),Ge=R.guilds.filter(ns=>ns.selected),ct=qe.length+Ge.length;if(!ct)return;const rt=(Ri=g==null?void 0:g.id)!=null?Ri:null,{config:Et,usedGuildsToday:is,usedPlayersToday:Rn}=te,li=is+Ge.length,Ii=Rn+qe.length,Wn=li>Et.dailyGuildLimit,Yo=Ii>Et.dailyPlayerLimit;if(Wn||Yo){Z(`Daily quota exceeded: You can import up to ${Et.dailyGuildLimit} guilds / ${Et.dailyPlayerLimit} players per day. Today you already imported ${is} guilds / ${Rn} players. This selection would bring you to ${li} guilds / ${Ii} players.`);return}Z(null),D({phase:"uploading",processed:0,total:ct,created:0,duplicate:0,error:0});const cs={processed:0,created:0,duplicate:0,error:0},zr={processed:0,created:0,duplicate:0,error:0},kr=()=>{const ns=Math.min(cs.processed+zr.processed,ct),ws=ns>=ct&&ct>0?"finalizing":"uploading";D({phase:ws,processed:ns,total:ct,created:cs.created+zr.created,duplicate:cs.duplicate+zr.duplicate,error:cs.error+zr.error})},Pi=ns=>ws=>{var Li;if((ws==null?void 0:ws.pass)!=="scans")return;const ar=ns==="players"?cs:zr;typeof ws.current=="number"&&(ar.processed=Math.min(ws.current,(Li=ws.total)!=null?Li:ws.current)),typeof ws.created=="number"&&(ar.created=ws.created),typeof ws.duplicate=="number"&&(ar.duplicate=ws.duplicate),typeof ws.error=="number"&&(ar.error=ws.error),kr()};try{console.log("[UploadCenter] starting selection upload",{players:qe.length,guilds:Ge.length});const ns=await WA(ce,{onProgress:Vt=>{(Vt==null?void 0:Vt.kind)==="players"?Pi("players")(Vt):(Vt==null?void 0:Vt.kind)==="guilds"&&Pi("guilds")(Vt)}}),ws=R.id;let ar=!1,Li=!1;if(console.log("[UploadCenter] importSelectionToDb result",{playersSample:(oa=ns==null?void 0:ns.players)==null?void 0:oa.slice(0,5),guildsSample:(ir=ns==null?void 0:ns.guilds)==null?void 0:ir.slice(0,5),selectedPlayerKeys:qe.slice(0,5).map(Vt=>Vt.key),selectedGuildKeys:Ge.slice(0,5).map(Vt=>Vt.key)}),((ns==null?void 0:ns.players)||[]).forEach(Vt=>{ar=!0,h(ws,"player",Vt.key,Vt.status)}),((ns==null?void 0:ns.guilds)||[]).forEach(Vt=>{Li=!0,h(ws,"guild",Vt.key,Vt.status)}),!ar&&!Li&&(qe.forEach(Vt=>h(ws,"player",Vt.key,"created")),Ge.forEach(Vt=>h(ws,"guild",Vt.key,"created"))),qe.length||Ge.length){if(Ht(Ge.length,qe.length),!rt)console.warn("[UploadCenter] Cannot persist upload usage because the user ID is missing.");else try{await w_e(rt,Ge.length,qe.length)}catch(Vt){console.error("[UploadCenter] Failed to record upload usage.",Vt)}await ie()}}catch(ns){console.error("[UploadCenter] Failed to upload selection",ns)}finally{D(ns=>({...ns,phase:"done"}))}};return n.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[n.jsxs("section",{className:"rounded-2xl border border-emerald-400/40 bg-emerald-500/5 p-4 md:p-5",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-emerald-200/80",children:"Local-only until you upload"}),n.jsx("h2",{className:"mt-1 text-lg font-semibold text-emerald-50",children:"Review first, then opt-in to store data"}),n.jsx("p",{className:"mt-2 text-sm text-emerald-50/80",children:"CSV files are parsed in your browser. Nothing is written to SFDataHub until you pick records and trigger the upload."})]}),n.jsxs("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 md:p-5",children:[n.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Upload quota"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Daily limits & usage"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Values are cached locally in your browser so you can resume uploads across page reloads."})]}),n.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-800/80 px-3 py-2 text-xs text-slate-200",children:["Last upload: ",ss]})]}),n.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-emerald-200/80",children:"Players"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-emerald-50",children:xt}),n.jsx("span",{className:"text-sm text-emerald-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-emerald-100/70",children:[te.usedPlayersToday," used / ",at]})]}),n.jsxs("div",{className:"rounded-xl border border-sky-400/40 bg-sky-500/5 p-3",children:[n.jsx("div",{className:"text-xs uppercase tracking-[0.14em] text-sky-200/80",children:"Guilds"}),n.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[n.jsx("span",{className:"text-2xl font-semibold text-sky-50",children:Qt}),n.jsx("span",{className:"text-sm text-sky-100/80",children:"remaining"})]}),n.jsxs("div",{className:"mt-1 text-xs text-sky-100/70",children:[te.usedGuildsToday," used / ",ut]})]})]}),U&&n.jsx("div",{className:"mt-3 rounded-xl border border-amber-400/60 bg-amber-500/10 px-3 py-2 text-sm text-amber-50",children:U})]}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Sessions"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Import Sessions"}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-3 md:p-4",children:[n.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-100",children:"Import CSV"}),n.jsx(XA,{mode:"session",onBuildUploadSession:fe})]}),n.jsx("p",{className:"text-sm text-slate-400",children:"Here you will see your locally imported CSV sessions (filename, date, player/guild counts)."}),t.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Placeholder - once CSV imports are wired up, recent sessions will appear here with quick actions to resume, inspect, or discard them."}):n.jsx("div",{className:"flex flex-col gap-3",children:t.map(ce=>{const qe=ce.id===e;return n.jsxs("div",{role:"button",tabIndex:0,onClick:()=>r(ce.id),onKeyDown:Ge=>{(Ge.key==="Enter"||Ge.key===" ")&&(Ge.preventDefault(),r(ce.id))},className:["w-full rounded-xl border px-4 py-3 text-left transition",qe?"border-emerald-400/80 bg-emerald-500/10 text-emerald-50 shadow-[0_10px_40px_-20px_rgba(16,185,129,0.7)]":"border-slate-700/70 bg-slate-800/60 text-slate-100 hover:border-emerald-400/60 hover:text-emerald-50"].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:ce.sourceFilename||"Unnamed session"}),n.jsx("span",{className:"text-xs text-slate-400",children:be(ce.createdAt)})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players: ",ce.players.length]}),n.jsxs("div",{children:["Guilds: ",ce.guilds.length]})]}),n.jsx("button",{type:"button",onClick:Ge=>{Ge.stopPropagation(),window.confirm("Remove this session from the list? This will NOT delete any data from the database.")&&i(ce.id)},className:"rounded-full p-1 transition text-red-400 hover:text-red-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-300","aria-label":"Remove session",title:"Remove this session from the list",children:n.jsx(u6,{className:"h-4 w-4"})})]})]}),qe&&n.jsx("div",{className:"mt-2 inline-flex items-center gap-1 rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold uppercase tracking-wide text-emerald-100",children:"Active"})]},ce.id)})}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsx("h4",{className:"text-sm font-semibold text-slate-100",children:"Scan uploads from Discord bot"}),K&&n.jsx("div",{className:"rounded-xl border border-amber-400/60 bg-amber-500/10 p-3 text-sm text-amber-100",children:K}),C?N?n.jsx("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Loading scan uploads..."}):S?n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 p-4 text-sm text-rose-100",children:"Error loading scan uploads."}):b.length===0?n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"No scan uploads from Discord bot yet."}):n.jsx("div",{className:"flex flex-col gap-3",children:b.map(ce=>{const qe=H===ce.id,Ge=M.has(ce.id),ct=qe||Ge;return n.jsxs("button",{type:"button",onClick:()=>{ct||He(ce)},disabled:ct,title:Ge?"This scan is already loaded above. Remove it there to load it again.":void 0,className:["w-full rounded-xl border px-4 py-3 text-left text-slate-100 transition","border-slate-700/70 bg-slate-800/60 hover:border-emerald-400/60 hover:text-emerald-50",ct?"cursor-not-allowed opacity-70 bg-slate-700/60 text-slate-400":""].join(" "),children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("span",{className:"text-sm font-semibold",children:ce.queueId||ce.scanId||ce.id}),n.jsx("span",{className:"text-xs text-slate-400",children:we(ce.uploadedAt)}),ce.discordUsername&&n.jsx("span",{className:"text-xs text-slate-400",children:ce.discordUsername})]}),n.jsxs("div",{className:"text-right text-xs text-slate-400",children:[n.jsxs("div",{children:["Players CSV: ",ce.hasPlayersCsv?"yes":"no"]}),n.jsxs("div",{children:["Guilds CSV: ",ce.hasGuildsCsv?"yes":"no"]})]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-300",children:[de(ce.status),ce.serverCode&&n.jsxs("span",{className:"rounded-full border border-slate-600/70 bg-slate-800/60 px-2 py-0.5",children:["Server: ",ce.serverCode]}),ce.lastError&&n.jsxs("span",{className:"rounded-full border border-rose-500/60 bg-rose-500/10 px-2 py-0.5 text-rose-100",children:["Error: ",ce.lastError]}),n.jsx("span",{className:"rounded-full border border-emerald-400/60 bg-emerald-500/10 px-2 py-0.5 text-emerald-100",children:Ge?"Loaded":qe?"Loading...":"Load into preview"})]})]},ce.id)})}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 p-4 text-sm text-slate-300",children:"Link your Discord account to see bot uploads here."})]})]})}),n.jsx("section",{className:"rounded-2xl border border-slate-700/70 bg-slate-900/70 p-4 md:p-5",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-400",children:"Review"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Preview & Selection"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Use these previews to decide what to keep. Tables will support filters, sorting, and selection before committing."}),n.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[n.jsx("button",{type:"button",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-50 shadow-[0_10px_30px_-12px_rgba(16,185,129,0.8)] transition hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 disabled:cursor-not-allowed disabled:bg-slate-700 disabled:text-slate-300 disabled:shadow-none",onClick:Gt,disabled:It||!R||!pt,children:w.phase==="uploading"?"Uploading...":w.phase==="finalizing"?"Finalizing...":"Upload selected to DB"}),U&&n.jsx("div",{className:"rounded-xl border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100",children:U}),w.total>0&&n.jsx("div",{className:"text-xs text-slate-300",children:w.phase==="uploading"?n.jsxs(n.Fragment,{children:["Uploading ",w.processed," / ",w.total," records (",Math.round(w.processed/Math.max(w.total,1)*100),"%) - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="finalizing"?n.jsxs(n.Fragment,{children:["Finalizing import - ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):w.phase==="done"?n.jsxs(n.Fragment,{children:["Upload finished: ",w.created," created, ",w.duplicate," duplicates, ",w.error," errors"]}):null}),R?n.jsx("div",{className:"rounded-xl border border-emerald-400/50 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:`Active session: ${R.sourceFilename||R.id} - ${R.players.length} players, ${R.guilds.length} guilds`}):n.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-slate-800/60 px-3 py-2 text-sm text-slate-300",children:t.length>0?"Select a session in the list above to review its players and guilds.":"No active CSV session. Import a CSV via the Upload Center modal to start."})]})]}),R&&n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Players"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Players: ",R.players.length," total,"," ",R.players.filter(ce=>ce.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>d(R.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>d(R.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ce=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",k===ce?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>_(ce),children:ce==="all"?"All":ce==="pending"?"Pending":ce==="inDb"?"In DB":"Error"},ce))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:P,onChange:ce=>B(ce.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),re.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any player records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Level"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Class"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:re.map(ce=>{var qe;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:ce.selected,onChange:()=>l(R.id,ce.key,!ce.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ce.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:ce.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:(qe=ce.level)!=null?qe:""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:n.jsx(A_e,{className:ce.className})}),n.jsx("td",{className:"px-3 py-2",children:_e(ce.status)})]},ce.key)})})]})})]}),n.jsxs("div",{className:"rounded-xl border border-slate-700/70 bg-slate-800/60 p-4",children:[n.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[n.jsx("h4",{className:"text-base font-semibold text-slate-100",children:"Guilds"}),n.jsxs("div",{className:"text-xs text-slate-300",children:["Guilds: ",R.guilds.length," total,"," ",R.guilds.filter(ce=>ce.selected).length," selected"]})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 text-xs",children:[n.jsx("button",{type:"button",className:"rounded-lg border border-emerald-400/60 bg-emerald-500/10 px-3 py-1 font-semibold text-emerald-100 transition hover:border-emerald-300",onClick:()=>u(R.id,!0),children:"Select all"}),n.jsx("button",{type:"button",className:"rounded-lg border border-slate-600/70 bg-slate-700/60 px-3 py-1 font-semibold text-slate-200 transition hover:border-slate-400",onClick:()=>u(R.id,!1),children:"Clear selection"})]}),n.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2 text-xs text-slate-200",children:[n.jsx("div",{className:"inline-flex items-center gap-1",children:["all","pending","inDb","error"].map(ce=>n.jsx("button",{type:"button",className:["rounded-full px-3 py-1 border transition",A===ce?"border-emerald-400/70 text-emerald-100 bg-emerald-500/10":"border-slate-600/70 text-slate-300 bg-slate-800/60 hover:border-emerald-300/60"].join(" "),onClick:()=>F(ce),children:ce==="all"?"All":ce==="pending"?"Pending":ce==="inDb"?"In DB":"Error"},ce))}),n.jsxs("label",{className:"ml-auto inline-flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:$,onChange:ce=>W(ce.target.checked)}),n.jsx("span",{children:"Hide uploaded"})]})]}),$e.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-slate-700/70 bg-slate-900/60 p-3 text-sm text-slate-400",children:"This session does not contain any guild records."}):n.jsx("div",{className:"overflow-auto rounded-lg border border-slate-700/70",children:n.jsxs("table",{className:"min-w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/70 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left",children:"Expand"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Sel."}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Guild"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Server"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),n.jsx("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),n.jsx("tbody",{children:$e.map(ce=>{var ct;const qe=T.has(ce.key),Ge=(ct=ce.memberCount)!=null?ct:ce.members.length;return n.jsxs(J.Fragment,{children:[n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("button",{type:"button",className:"rounded border border-slate-600/70 bg-slate-800/60 px-2 py-1 text-xs text-slate-200",onClick:()=>ye(ce.key),"aria-expanded":qe,children:qe?"Collapse":"Expand"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"checkbox",checked:ce.selected,onChange:()=>a(R.id,ce.key,!ce.selected)})}),n.jsx("td",{className:"px-3 py-2 font-semibold text-slate-50",children:ce.name||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:ce.server||""}),n.jsx("td",{className:"px-3 py-2 text-slate-200",children:Ge}),n.jsx("td",{className:"px-3 py-2",children:_e(ce.status)})]}),qe&&n.jsx("tr",{className:"border-t border-slate-800/70 bg-slate-900/60",children:n.jsxs("td",{className:"px-3 py-3 text-slate-200",colSpan:6,children:[n.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.18em] text-slate-400",children:"Members"}),ce.members.length===0?n.jsx("div",{className:"text-sm text-slate-300",children:"No members listed."}):n.jsxs("table",{className:"w-full text-sm text-slate-100",children:[n.jsx("thead",{className:"bg-slate-900/50 text-xs uppercase tracking-wide text-slate-400",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Name"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Level"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Class"})]})}),n.jsx("tbody",{children:ce.members.map(rt=>{var Et,is;return n.jsxs("tr",{className:"border-t border-slate-800/70",children:[n.jsx("td",{className:"px-2 py-1",children:rt.name||""}),n.jsx("td",{className:"px-2 py-1",children:(Et=rt.level)!=null?Et:""}),n.jsx("td",{className:"px-2 py-1",children:(is=rt.className)!=null?is:""})]},rt.key)})})]})]})})]},ce.key)})})]})})]})]})]})})]})}function R_e(){const{canUse:t}=J1();return t?n.jsx(I_e,{}):n.jsx(Pt,{title:"Upload Center",subtitle:"Upload Center access required",centerFramed:!0,mode:"page",children:n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 text-center text-sm text-[#B0C4D9]",children:[n.jsx(NC,{className:"h-10 w-10 text-[#FF6B6B]","aria-hidden":"true"}),n.jsx("p",{className:"text-base font-semibold text-white",children:"You don't have access to this feature."}),n.jsx("p",{children:"Contact an admin if you think you should be able to use the Upload Center."})]})})}const L_e=t=>()=>n.jsx("div",{style:{padding:16},children:n.jsx("h2",{style:{color:"var(--title)"},children:t})}),Jn=L_e("Diese Unterseite existiert in der neuen Struktur nicht mehr."),Lt=(t,e,s,r=n.jsx(El,{to:"/",replace:!0}))=>n.jsx(b_e,{featureId:t,route:e,fallback:r,children:s});hI.createRoot(document.getElementById("root")).render(n.jsx(J.StrictMode,{children:n.jsx(FB,{children:n.jsx(WB,{children:n.jsx(YB,{children:n.jsxs(y_e,{children:[n.jsx(PR,{children:n.jsx(lR,{children:n.jsxs(xe,{element:n.jsx(iO,{}),children:[n.jsx(xe,{path:"/",element:Lt("main.home","/",n.jsx(eW,{}),n.jsx(El,{to:"/login",replace:!0}))}),n.jsx(xe,{path:"/login",element:n.jsx(xW,{})}),n.jsx(xe,{path:"/dashboard",element:Lt("main.dashboard","/dashboard",n.jsx(yW,{}))}),n.jsx(xe,{path:"/dashboard/kpis",element:Lt("main.dashboard","/dashboard",n.jsx(_W,{}))}),n.jsx(xe,{path:"/dashboard/activity",element:Lt("main.dashboard","/dashboard",n.jsx(wW,{}))}),n.jsx(xe,{path:"/dashboard/progression",element:Lt("main.dashboard","/dashboard",n.jsx(jW,{}))}),n.jsx(xe,{path:"/discover",element:Lt("main.discover","/discover",n.jsx(SW,{}))}),n.jsx(xe,{path:"/toplists",element:Lt("main.toplists","/toplists",n.jsx(kK,{}))}),n.jsx(xe,{path:"/sfmagazine",element:n.jsx(EW,{})}),n.jsx(xe,{path:"/sfmagazine/historybook",element:n.jsx(iq,{})}),n.jsx(xe,{path:"/help",element:n.jsx(bq,{})}),n.jsx(xe,{path:"/players",element:n.jsx(CK,{})}),n.jsx(xe,{path:"/players/rankings",element:n.jsx(TK,{})}),n.jsx(xe,{path:"/players/stats",element:n.jsx(EK,{})}),n.jsx(xe,{path:"/players/profile",element:n.jsx(cv,{})}),n.jsx(xe,{path:"/players/profile/:playerId",element:n.jsx(cv,{})}),n.jsx(xe,{path:"/players/compare",element:n.jsx(SX,{})}),n.jsx(xe,{path:"/player/:playerId",element:n.jsx(cv,{})}),n.jsx(xe,{path:"/guilds",element:n.jsx(PX,{})}),n.jsx(xe,{path:"/guilds/rankings",element:n.jsx(RX,{})}),n.jsx(xe,{path:"/guilds/stats",element:n.jsx(LX,{})}),n.jsx(xe,{path:"/guilds/profile",element:n.jsx(pv,{})}),n.jsx(xe,{path:"/guilds/profile/:guildId",element:n.jsx(pv,{})}),n.jsx(xe,{path:"/guild/:guildId",element:n.jsx(pv,{})}),n.jsx(xe,{path:"/servers",element:n.jsx(_Z,{})}),n.jsx(xe,{path:"/servers/rankings",element:n.jsx(wZ,{})}),n.jsx(xe,{path:"/servers/stats",element:n.jsx(jZ,{})}),n.jsx(xe,{path:"/servers/profile",element:n.jsx(fv,{})}),n.jsx(xe,{path:"/servers/profile/:serverId",element:n.jsx(fv,{})}),n.jsx(xe,{path:"/server/:serverId",element:n.jsx(fv,{})}),n.jsx(xe,{path:"/u/:profileId",element:n.jsx(Pee,{})}),n.jsx(xe,{path:"/guidehub/*",element:Lt("main.guidehub","/guidehub",n.jsx(hae,{}))}),n.jsx(xe,{path:"/tools",element:Lt("main.tools","/tools",n.jsx(Tbe,{}))}),n.jsx(xe,{path:"/upload-center",element:Lt("main.uploadCenter","/upload-center",n.jsx(R_e,{}),n.jsx(El,{to:"/login",replace:!0}))}),n.jsx(xe,{path:"/UploadCenter",element:n.jsx(El,{to:"/upload-center",replace:!0})}),n.jsx(xe,{path:"/community",element:Lt("main.community","/community",n.jsx(ile,{}))}),n.jsx(xe,{path:"/community/scans",element:Lt("main.community","/community",n.jsx(fA,{}))}),n.jsx(xe,{path:"/community/predictions",element:Lt("main.community","/community",n.jsx(gA,{}))}),n.jsx(xe,{path:"/community/creators",element:Lt("main.community","/community",n.jsx(pA,{}))}),n.jsx(xe,{path:"/community/feedback",element:Lt("main.community","/community",n.jsx(yA,{}))}),n.jsx(xe,{path:"/community/news",element:Lt("main.community","/community",n.jsx(xA,{}))}),n.jsx(xe,{path:"/community/records",element:Lt("main.community","/community",n.jsx(vA,{}))}),n.jsx(xe,{path:"/scans",element:Lt("main.scans","/scans",n.jsx(ale,{}))}),n.jsx(xe,{path:"/scans/latest",element:Lt("main.scans","/scans",n.jsx(ole,{}))}),n.jsx(xe,{path:"/scans/archive",element:Lt("main.scans","/scans",n.jsx(lle,{}))}),n.jsx(xe,{path:"/guild-hub",element:Lt("main.guildHub","/guild-hub",n.jsx(cle,{}))}),n.jsx(xe,{path:"/guild-hub/planner",element:Lt("main.guildHub","/guild-hub",n.jsx(Ice,{}))}),n.jsx(xe,{path:"/guild-hub/fusion-planner",element:Lt("main.guildHub","/guild-hub",n.jsx(fpe,{}))}),n.jsx(xe,{path:"/guild-hub/compare-guilds",element:Lt("main.guildHub","/guild-hub",n.jsx(gpe,{}))}),n.jsx(xe,{path:"/guild-hub/waitlist",element:Lt("main.guildHub","/guild-hub",n.jsx(Dfe,{}))}),n.jsx(xe,{path:"/guild-hub/activity",element:Lt("main.guildHub","/guild-hub",n.jsx(zfe,{}))}),n.jsx(xe,{path:"/guild-hub/imports",element:Lt("main.guildHub","/guild-hub",n.jsx(Hfe,{}))}),n.jsx(xe,{path:"/guild-hub/announcements",element:Lt("main.guildHub","/guild-hub",n.jsx(Gfe,{}))}),n.jsx(xe,{path:"/guild-hub/events",element:Lt("main.guildHub","/guild-hub",n.jsx(Wfe,{}))}),n.jsx(xe,{path:"/guild-hub/roles",element:Lt("main.guildHub","/guild-hub",n.jsx(qfe,{}))}),n.jsx(xe,{path:"/guild-hub/settings",element:Lt("main.guildHub","/guild-hub",n.jsx(Kfe,{}))}),n.jsx(xe,{path:"/admin",element:Lt("main.admin","/admin",n.jsx(Jfe,{}))}),n.jsx(xe,{path:"/admin/errors",element:Lt("main.admin","/admin",n.jsx(sge,{}))}),n.jsx(xe,{path:"/admin/scans-uploaded",element:Lt("main.admin","/admin",n.jsx(rge,{}))}),n.jsx(xe,{path:"/admin/creators-api",element:Lt("main.admin","/admin",n.jsx(pge,{}))}),n.jsx(xe,{path:"/admin/users",element:Lt("main.admin","/admin",n.jsx(Tge,{}))}),n.jsx(xe,{path:"/settings",element:Lt("main.settings","/settings",n.jsx(Lge,{}))}),n.jsx(xe,{path:"/settings/account",element:Lt("main.settings","/settings",n.jsx(nye,{}))}),n.jsxs(xe,{path:"/playground",element:Lt("main.playground","/playground",n.jsx(iye,{})),children:[n.jsx(xe,{index:!0,element:n.jsx("div",{style:{color:"#B0C4D9"},children:"Choose an item on the left."})}),n.jsx(xe,{path:"list-views",element:n.jsx(wk,{})}),n.jsx(xe,{path:"rescan-widget",element:n.jsx(Sk,{})}),n.jsx(xe,{path:"upload-sim",element:n.jsx(Nk,{})}),n.jsx(xe,{path:"theme-maker",element:n.jsx(yk,{})}),n.jsx(xe,{path:"theme-maker-pro",element:n.jsx(bk,{})}),n.jsx(xe,{path:"am-rune-bonuses-demos",element:n.jsx(sve,{})}),n.jsx(xe,{path:"templates/content-shell",element:n.jsx(Qve,{})}),n.jsx(xe,{path:"templates/blank",element:n.jsx(Yve,{})}),n.jsx(xe,{path:"templates/blank-alt",element:n.jsx(Zve,{})}),n.jsx(xe,{path:"templates/blank-layout-2",element:n.jsx(n0e,{})}),n.jsx(xe,{path:"templates/blank-layout-3",element:n.jsx(i0e,{})}),n.jsx(xe,{path:"templates/blank-layout-4",element:n.jsx(a0e,{})}),n.jsx(xe,{path:"portrait-maker",element:n.jsx(Gve,{})}),n.jsx(xe,{path:"hud",element:n.jsx(nve,{})}),n.jsx(xe,{path:"hud/game-buttons",element:n.jsx(Ave,{})}),n.jsx(xe,{path:"core-ui/theme-maker",element:n.jsx(yk,{})}),n.jsx(xe,{path:"core-ui/theme-maker-pro",element:n.jsx(bk,{})}),n.jsx(xe,{path:"core-ui/list-views",element:n.jsx(wk,{})}),n.jsx(xe,{path:"sync/rescan",element:n.jsx(Sk,{})}),n.jsx(xe,{path:"upload/sim",element:n.jsx(Nk,{})}),n.jsx(xe,{path:"import/har",element:n.jsx(d0e,{})}),n.jsx(xe,{path:"import/json-csv",element:n.jsx(p0e,{})}),n.jsx(xe,{path:"import/schema",element:n.jsx(y0e,{})}),n.jsx(xe,{path:"hubs/player-contained",element:n.jsx(w0e,{})}),n.jsx(xe,{path:"hubs/guilds",element:n.jsx(k0e,{})}),n.jsx(xe,{path:"hubs/servers",element:n.jsx(A0e,{})}),n.jsx(xe,{path:"rankings/views",element:n.jsx(L0e,{})}),n.jsx(xe,{path:"analytics/kpi",element:n.jsx(B0e,{})}),n.jsx(xe,{path:"analytics/progression",element:n.jsx(U0e,{})}),n.jsx(xe,{path:"analytics/legendary-pets",element:n.jsx(W0e,{})}),n.jsx(xe,{path:"community/scans",element:n.jsx(X0e,{})}),n.jsx(xe,{path:"community/creators",element:n.jsx(e1e,{})}),n.jsx(xe,{path:"feedback/form",element:n.jsx(r1e,{})}),n.jsx(xe,{path:"feedback/admin",element:n.jsx(l1e,{})}),n.jsx(xe,{path:"help/tutorials",element:n.jsx(h1e,{})}),n.jsx(xe,{path:"help/wiki",element:n.jsx(g1e,{})}),n.jsx(xe,{path:"legal/tos",element:n.jsx(S1e,{})}),n.jsx(xe,{path:"legal/transparency",element:n.jsx(T1e,{})}),n.jsx(xe,{path:"settings",element:n.jsx(b1e,{})}),n.jsx(xe,{path:"pwa/update",element:n.jsx(P1e,{})}),n.jsx(xe,{path:"pwa/install",element:n.jsx(M1e,{})}),n.jsx(xe,{path:"connect/manual",element:n.jsx(O1e,{})}),n.jsx(xe,{path:"connect/userscript",element:n.jsx(H1e,{})}),n.jsx(xe,{path:"interop/exports",element:n.jsx(K1e,{})}),n.jsx(xe,{path:"interop/deeplinks",element:n.jsx(J1e,{})}),n.jsx(xe,{path:"admin/servers",element:n.jsx(sbe,{})}),n.jsx(xe,{path:"admin/jobs",element:n.jsx(abe,{})}),n.jsx(xe,{path:"admin/flags",element:n.jsx(dbe,{})}),n.jsx(xe,{path:"perf/table-lab",element:n.jsx(pbe,{})}),n.jsx(xe,{path:"mobile/filters",element:n.jsx(ybe,{})}),n.jsx(xe,{path:"qa/a11y",element:n.jsx(wbe,{})})]}),n.jsx(xe,{path:"/latest-scan",element:n.jsx(El,{to:"/scans/latest",replace:!0})}),n.jsx(xe,{path:"/old-scans",element:n.jsx(El,{to:"/scans/archive",replace:!0})}),n.jsx(xe,{path:"/favorites",element:Jn()}),n.jsx(xe,{path:"/notifications",element:Jn()}),n.jsx(xe,{path:"/guilds/planner",element:Jn()}),n.jsx(xe,{path:"/guilds/fusion",element:Jn()}),n.jsx(xe,{path:"/guilds/academy",element:Jn()}),n.jsx(xe,{path:"/toplists/players",element:Jn()}),n.jsx(xe,{path:"/toplists/guilds",element:Jn()}),n.jsx(xe,{path:"/toplists/servers",element:Jn()}),n.jsx(xe,{path:"/settings/profile",element:Jn()}),n.jsx(xe,{path:"/settings/appearance",element:Jn()}),n.jsx(xe,{path:"/players/search",element:Jn()}),n.jsx(xe,{path:"/servers/list",element:Jn()}),n.jsx(xe,{path:"/servers/trend",element:Jn()}),n.jsx(xe,{path:"/scans/upload",element:Jn()}),n.jsx(xe,{path:"/scans/history",element:Jn()}),n.jsx(xe,{path:"*",element:n.jsx(El,{to:"/",replace:!0})})]})})}),n.jsx(g_e,{})]})})})})}));

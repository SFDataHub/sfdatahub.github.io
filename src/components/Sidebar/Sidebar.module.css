/* ====== Container (Root der globalen Sidebar) ====== */
.root{
  position: fixed;
  left: 0;
  top: var(--topbar-h);
  bottom: 0;
  width: var(--sidebar-w);
  background: transparent;
  border-right: none;
  box-shadow: none;

  isolation: isolate;
  z-index: 1000;
  display: grid;
  grid-template-rows: auto 1fr auto;
  transition: width .2s ease;
  overflow: visible;
}

.root::before,
.root::after{ content: none !important; }

.expanded{ width: var(--sidebar-expanded-w); }

.root *, .root *::before, .root *::after{ box-sizing: border-box; }

/* ====== Header ====== */
.headRow{
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:10px var(--sidebar-pad);
}
.headTitle{ display:flex; align-items:center; gap:8px; color:var(--text-soft); font-size:12px; }
.headDot{ width:6px; height:6px; background:#3aa0ff; border-radius:999px; display:inline-block; }
.headLabel{ text-transform:uppercase; letter-spacing:.06em; }
.pinBtn{
  width:32px; height:32px; border-radius:8px;
  background:var(--tile); border:1px solid var(--line); color:var(--text);
}

/* ====== Kein Clipping durch Scrollcontainer ====== */
.navScroll{ overflow: visible; }
.pad{ padding-inline: var(--sidebar-pad); padding-top:8px; padding-bottom:8px; }

/* ====== Karten/Segmente ====== */
.segCard{
  width: 100%;
  margin: 8px 0;
  padding: 10px;
  border: 1px solid var(--line);
  background: var(--tile);
  border-radius: 12px;
  box-shadow:
    0 10px 24px rgba(0,0,0,0.35),
    0 2px 6px rgba(0,0,0,0.35),
    inset 0 1px 0 rgba(255,255,255,0.06);
  overflow: visible;
  transition: transform .15s ease;
}
.segCard:hover{ transform: translateY(-1px); }

.segTitle{
  color: var(--text-soft);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: .06em;
  margin: 4px 6px 8px;
}

/* ====== Connected Characters ====== */
.connectedCharactersCard{
  margin-top: 6px;
}
.connectedCharactersTitle{
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: .01em;
  margin-bottom: 10px;
}
.connectedCharactersList{
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.connectedCharactersList[data-collapsed="true"]{
  align-items: stretch;
}
.characterChip{
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  background: var(--tile-hover);
  border: 1px solid var(--line);
  color: var(--text);
  cursor: pointer;
  text-align: left;
  transition: background-color .15s ease, border-color .15s ease, transform .12s ease;
}
.characterChip:hover{
  background: var(--active);
  border-color: var(--line);
  transform: translateY(-1px);
}
.characterChipId{
  font-weight: 600;
  font-size: 14px;
}
.characterChipMeta{
  color: var(--text-soft);
  font-size: 12px;
}
.connectedCharactersEmpty{
  width: 100%;
  text-align: left;
  appearance: none;
  border: 1px dashed var(--line);
  background: var(--tile-hover);
  color: var(--text-soft);
  font-size: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color .15s ease, border-color .15s ease, transform .12s ease, color .15s ease;
}
.connectedCharactersEmpty:hover,
.connectedCharactersEmpty:focus-visible{
  background: var(--active);
  border-color: var(--line);
  color: var(--text);
  transform: translateY(-1px);
}
.connectedCharactersEmpty:focus-visible{
  outline: 2px solid rgba(255,255,255,0.25);
  outline-offset: 2px;
}
.connectedCharactersEmptyText{
  display: block;
}
.connectedCharactersEmptyCta{
  font-weight: 600;
  color: var(--text);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
}
.connectedCharactersList[data-collapsed="true"] .characterChip{
  align-items: center;
  text-align: center;
}
.connectedCharactersList[data-collapsed="true"] .characterChipMeta{
  width: 100%;
}
@media (max-width: 768px){
  .connectedCharactersCard{
    width: 100%;
  }
  .characterChip{
    font-size: 14px;
  }
}

/* ====== Liste/Navigation ====== */
.navCol{ display:flex; flex-direction:column; gap:6px; width:100%; }
.navItemWrap{ position:relative; display:flex; align-items:center; gap:6px; width:100%; overflow:visible; }

/* Haupt-Button */
.navBtn{
  display:flex; align-items:center; gap:10px;
  width:100%;
  padding:10px 12px;
  border-radius:16px;
  background:transparent;
  color:var(--text);
  border:0; text-decoration:none;
  white-space:nowrap;
  overflow:hidden;
}
.navBtn:hover{ background: var(--tile-hover); }
.navBtnActive{ background: var(--active) !important; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); }

.label{
  white-space:nowrap;
  display:inline-block;
  overflow:hidden;
}

/* Collapsed: nur Icons — aber ohne display:none (damit Animationen starten können) */
.root[data-collapsed="true"] .navBtn{ justify-content: center; }
.root[data-collapsed="true"] .label{
  width: 0 !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Deko-Chevron rechts */
.trailing{
  margin-left:auto; padding-left:8px;
  display:inline-flex; align-items:center; justify-content:center;
  width:18px; height:18px; opacity:.6;
  pointer-events:none; background:transparent; border:0;
}
.trailing .ico{ width:16px; height:16px; }
.root[data-collapsed="true"] .trailing{ display: none; }

/* ====== Submenu ====== */
.submenuPanel{
  position:absolute;
  left: calc(100% + 8px);
  top: 0;
  width:224px; padding:8px;
  border:1px solid var(--line);
  background: #0a1728;
  border-radius:12px;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  opacity:0; visibility:hidden; transform:translateY(2px);
  transition:opacity .12s ease, transform .12s ease, visibility .12s ease;
  z-index: 2000;
  pointer-events:auto;
}
.isOpen > .submenuPanel{ opacity:1; visibility:visible; transform:translateY(0); }

.hoverBridge{ position:absolute; left:-8px; top:0; width:8px; height:100%; }

.submenuCol{ display:flex; flex-direction:column; gap:6px; }
.submenuLink{
  display:block; padding:9px 10px; border-radius:12px;
  color:var(--text); text-decoration:none;
}
.submenuLink:hover{ background: var(--tile-hover); }
.submenuLinkActive{ background: var(--active); }

/* ====== Footer ====== */
.footer{ width:100%; }
.login{
  display:flex; align-items:center; justify-content:center; gap:8px;
  width:100%; padding:10px;
  background: var(--tile);
  border:1px solid var(--line);
  border-radius:10px;
  color:var(--text);
  box-shadow:
    0 6px 14px rgba(0,0,0,0.30),
    inset 0 1px 0 rgba(255,255,255,0.06);
}
.userMeta{
  margin-top:6px;
  font-size:11px;
  line-height:1.3;
  color:var(--text-soft);
  text-align:center;
}
.footerLink{
  display:block;
  margin-top:8px;
  text-align:center;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid var(--line);
  background:var(--tile);
  color:var(--text);
  text-decoration:none;
}
.footerLink:hover{
  background:var(--tile-hover);
}
.footerRow{
  display:flex;
  gap:8px;
  margin-top:8px;
}
.footerRowCell{
  flex:1;
  display:flex;
}
.footerRowCell > *{
  flex:1;
}
.footerRowLink{
  margin-top:0;
}
.languageSwitch{
  position:relative;
  display:flex;
  width:100%;
  --slant: 14px;
  border:1px solid var(--line);
  background:var(--tile);
  border-radius:10px;
  overflow:hidden;
  box-shadow:
    0 6px 12px rgba(0,0,0,0.2),
    inset 0 1px 0 rgba(255,255,255,0.05);
}
.languageSegment{
  flex:1;
  padding:8px 10px;
  background:transparent;
  border:0;
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  color:var(--text);
  font-size:0.85rem;
  font-weight:600;
  letter-spacing:0.05em;
  text-transform:uppercase;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  cursor:pointer;
  position:relative;
  --clip-shape: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  clip-path:var(--clip-shape);
  transition:box-shadow .2s ease, filter .2s ease, opacity .2s ease;
}
.languageSegment::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.2));
  opacity:0.5;
  pointer-events:none;
  transition:opacity .2s ease;
  clip-path:var(--clip-shape);
}
.languageSegment::after{
  content:"";
  position:absolute;
  inset:0;
  clip-path:var(--clip-shape);
  pointer-events:none;
  opacity:0;
  box-shadow:
    inset 0 0 0 2px var(--accent),
    inset 0 0 0 1px rgba(255,255,255,0.05);
  transition:opacity .15s ease;
}
.languageSegmentEn{
  --clip-shape: polygon(0 0, 100% 0, calc(100% - var(--slant)) 100%, 0 100%);
  z-index:2;
  background-image:url("/assets/flags/Flag_of_the_United_Kingdom_(3-5).svg.png");
}
.languageSegmentDe{
  --clip-shape: polygon(var(--slant) 0, 100% 0, 100% 100%, 0 100%);
  margin-left:calc(var(--slant) * -1);
  z-index:1;
  background-image:url("/assets/flags/Flag_of_Germany.svg.png");
}
.languageSegmentActive{
  filter:brightness(1.05);
}
.languageSegmentActive::before{
  opacity:0.18;
}
.languageSegmentActive::after{
  opacity:1;
}
.languageSegmentInactive{
  filter:saturate(0.95) brightness(0.97);
}
.languageSegmentInactive::before{
  opacity:0.35;
}
.languageSegment:hover{
  filter:brightness(1.08);
}
.languageSegment:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.legal{ margin-top:8px; font-size:10px; line-height:1.25; color:var(--text-soft); }

/* ====== Sicherheitsnetze ====== */
.navItemWrap, .navBtn, .trailing{
  overflow: hidden !important;
  scrollbar-width: none;
}
.navItemWrap::-webkit-scrollbar,
.navBtn::-webkit-scrollbar,
.trailing::-webkit-scrollbar{ display: none; }

/* ====== Tipp-Effekt (ohne Cursor) ====== */
.labelText{
  position: relative;
  display: inline-block;
  white-space: nowrap;
}
.char{
  display: inline-block;
  opacity: 0;
  visibility: hidden;
  animation-fill-mode: forwards;
}

/* Aufklappen → „Tippen“ (hartes Umschalten pro Buchstabe) */
.labelText[data-open="true"] .char{
  animation-name: typeIn;
  animation-duration: var(--duration, 0,5ms);
  animation-timing-function: steps(1, end);
  animation-delay: calc(var(--i) * var(--step, 35ms));
}

/* Zuklappen → „Backspace“ (rückwärts) */
.labelText[data-open="false"] .char{
  animation-name: typeOut;
  animation-duration: var(--duration, 1ms);
  animation-timing-function: steps(1, end);
  animation-delay: calc((var(--count) - 1 - var(--i)) * var(--step, 70ms));
}

@keyframes typeIn{
  0%   { opacity: 0; visibility: hidden; }
  100% { opacity: 1; visibility: visible; }
}
@keyframes typeOut{
  0%   { opacity: 1; visibility: visible; }
  100% { opacity: 0; visibility: hidden; }
}


/* Hauptnavi-Karte: eigener Hintergrund */
.mainNavCard{
  background: #0F2030;
}
